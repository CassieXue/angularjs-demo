!function (e, t) {
    "use strict";
    var i = ["ng", "oc.lazyLoad"], n = {}, a = [], r = [], o = [], s = [], l = e.noop, c = {}, d = [];
    e.module("oc.lazyLoad", ["ng"]).provider("$ocLazyLoad", ["$controllerProvider", "$provide", "$compileProvider", "$filterProvider", "$injector", "$animateProvider", function (u, h, g, m, v, y) {
        function b(t, n, a) {
            if (n) {
                var r, s, u, p = [];
                for (r = n.length - 1; r >= 0; r--) if (s = n[r], e.isString(s) || (s = x(s)), s && d.indexOf(s) === -1 && (!k[s] || o.indexOf(s) !== -1)) {
                    var h = i.indexOf(s) === -1;
                    if (u = f(s), h && (i.push(s), b(t, u.requires, a)), u._runBlocks.length > 0) for (c[s] = []; u._runBlocks.length > 0;) c[s].push(u._runBlocks.shift());
                    e.isDefined(c[s]) && (h || a.rerun) && (p = p.concat(c[s])), w(t, u._invokeQueue, s, a.reconfig), w(t, u._configBlocks, s, a.reconfig), l(h ? "ocLazyLoad.moduleLoaded" : "ocLazyLoad.moduleReloaded", s), n.pop(), d.push(s)
                }
                var g = t.getInstanceInjector();
                e.forEach(p, function (e) {
                    g.invoke(e)
                })
            }
        }

        function _(t, i) {
            function a(t, i) {
                var n, a = !0;
                return i.length && (n = r(t), e.forEach(i, function (e) {
                    a = a && r(e) !== n
                })), a
            }

            function r(t) {
                return e.isArray(t) ? $(t.toString()) : e.isObject(t) ? $(E(t)) : e.isDefined(t) && null !== t ? $(t.toString()) : t
            }

            var o = t[2][0], s = t[1], c = !1;
            e.isUndefined(n[i]) && (n[i] = {}), e.isUndefined(n[i][s]) && (n[i][s] = {});
            var d = function (e, t) {
                n[i][s].hasOwnProperty(e) || (n[i][s][e] = []), a(t, n[i][s][e]) && (c = !0, n[i][s][e].push(t), l("ocLazyLoad.componentLoaded", [i, s, e]))
            };
            if (e.isString(o)) d(o, t[2][1]); else {
                if (!e.isObject(o)) return !1;
                e.forEach(o, function (t, i) {
                    e.isString(t) ? d(t, o[1]) : d(i, t)
                })
            }
            return c
        }

        function w(t, i, n, r) {
            if (i) {
                var o, s, l, c;
                for (o = 0, s = i.length; o < s; o++) if (l = i[o], e.isArray(l)) {
                    if (null !== t) {
                        if (!t.hasOwnProperty(l[0])) throw new Error("unsupported provider " + l[0]);
                        c = t[l[0]]
                    }
                    var d = _(l, n);
                    if ("invoke" !== l[1]) d && e.isDefined(c) && c[l[1]].apply(c, l[2]); else {
                        var u = function (t) {
                            var i = a.indexOf(n + "-" + t);
                            (i === -1 || r) && (i === -1 && a.push(n + "-" + t), e.isDefined(c) && c[l[1]].apply(c, l[2]))
                        };
                        if (e.isFunction(l[2][0])) u(l[2][0]); else if (e.isArray(l[2][0])) for (var p = 0, f = l[2][0].length; p < f; p++) e.isFunction(l[2][0][p]) && u(l[2][0][p])
                    }
                }
            }
        }

        function x(t) {
            var i = null;
            return e.isString(t) ? i = t : e.isObject(t) && t.hasOwnProperty("name") && e.isString(t.name) && (i = t.name), i
        }

        function C(t) {
            if (!e.isString(t)) return !1;
            try {
                return f(t)
            } catch (e) {
                if (/No module/.test(e) || e.message.indexOf("$injector:nomod") > -1) return !1
            }
        }

        var k = {}, S = {
            $controllerProvider: u,
            $compileProvider: g,
            $filterProvider: m,
            $provide: h,
            $injector: v,
            $animateProvider: y
        }, T = !1, D = !1, L = [], A = {};
        L.push = function (e) {
            this.indexOf(e) === -1 && Array.prototype.push.apply(this, arguments)
        }, this.config = function (t) {
            e.isDefined(t.modules) && (e.isArray(t.modules) ? e.forEach(t.modules, function (e) {
                k[e.name] = e
            }) : k[t.modules.name] = t.modules), e.isDefined(t.debug) && (T = t.debug), e.isDefined(t.events) && (D = t.events)
        }, this._init = function (n) {
            if (0 === r.length) {
                var a = [n], o = ["ng:app", "ng-app", "x-ng-app", "data-ng-app"],
                    l = /\sng[:\-]app(:\s*([\w\d_]+);?)?\s/, c = function (e) {
                        return e && a.push(e)
                    };
                e.forEach(o, function (t) {
                    o[t] = !0, c(document.getElementById(t)), t = t.replace(":", "\\:"), void 0 !== n[0] && n[0].querySelectorAll && (e.forEach(n[0].querySelectorAll("." + t), c), e.forEach(n[0].querySelectorAll("." + t + "\\:"), c), e.forEach(n[0].querySelectorAll("[" + t + "]"), c))
                }), e.forEach(a, function (t) {
                    if (0 === r.length) {
                        var i = " " + n.className + " ", a = l.exec(i);
                        a ? r.push((a[2] || "").replace(/\s+/g, ",")) : e.forEach(t.attributes, function (e) {
                            0 === r.length && o[e.name] && r.push(e.value)
                        })
                    }
                })
            }
            0 !== r.length || (t.jasmine || t.mocha) && e.isDefined(e.mock) || console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");
            var d = function t(n) {
                if (i.indexOf(n) === -1) {
                    i.push(n);
                    var a = e.module(n);
                    w(null, a._invokeQueue, n), w(null, a._configBlocks, n), e.forEach(a.requires, t)
                }
            };
            e.forEach(r, function (e) {
                d(e)
            }), r = [], s.pop()
        };
        var E = function (t) {
            try {
                return JSON.stringify(t)
            } catch (n) {
                var i = [];
                return JSON.stringify(t, function (t, n) {
                    if (e.isObject(n) && null !== n) {
                        if (i.indexOf(n) !== -1) return;
                        i.push(n)
                    }
                    return n
                })
            }
        }, $ = function (e) {
            var t, i, n, a = 0;
            if (0 == e.length) return a;
            for (t = 0, n = e.length; t < n; t++) i = e.charCodeAt(t), a = (a << 5) - a + i, a |= 0;
            return a
        };
        this.$get = ["$log", "$rootElement", "$rootScope", "$cacheFactory", "$q", function (t, a, o, c, u) {
            function h(e) {
                var i = u.defer();
                return t.error(e.message), i.reject(e), i.promise
            }

            var g, m = c("ocLazyLoad");
            return T || (t = {}, t.error = e.noop, t.warn = e.noop, t.info = e.noop), S.getInstanceInjector = function () {
                return g || (g = a.data("$injector") || e.injector())
            }, l = function (e, i) {
                D && o.$broadcast(e, i), T && t.info(e, i)
            }, {
                _broadcast: l, _$log: t, _getFilesCache: function () {
                    return m
                }, toggleWatch: function (e) {
                    e ? s.push(!0) : s.pop()
                }, getModuleConfig: function (t) {
                    if (!e.isString(t)) throw new Error("You need to give the name of the module to get");
                    return k[t] ? e.copy(k[t]) : null
                }, setModuleConfig: function (t) {
                    if (!e.isObject(t)) throw new Error("You need to give the module config object to set");
                    return k[t.name] = t, t
                }, getModules: function () {
                    return i
                }, isLoaded: function (t) {
                    if (e.isString(t) && (t = [t]), e.isArray(t)) {
                        var n, a;
                        for (n = 0, a = t.length; n < a; n++) if (!function (e) {
                            var t = i.indexOf(e) > -1;
                            return t || (t = !!C(e)), t
                        }(t[n])) return !1;
                        return !0
                    }
                    throw new Error("You need to define the module(s) name(s)")
                }, _getModuleName: x, _getModule: function (e) {
                    try {
                        return f(e)
                    } catch (t) {
                        throw(/No module/.test(t) || t.message.indexOf("$injector:nomod") > -1) && (t.message = 'The module "' + E(e) + '" that you are trying to load does not exist. ' + t.message), t
                    }
                }, moduleExists: C, _loadDependencies: function (t, i) {
                    var n, a, r, o = [], s = this;
                    if (null === (t = s._getModuleName(t))) return u.when();
                    try {
                        n = s._getModule(t)
                    } catch (e) {
                        return h(e)
                    }
                    return a = s.getRequires(n), e.forEach(a, function (n) {
                        if (e.isString(n)) {
                            var a = s.getModuleConfig(n);
                            if (null === a) return void L.push(n);
                            n = a, a.name = void 0
                        }
                        if (s.moduleExists(n.name)) return r = n.files.filter(function (e) {
                            return s.getModuleConfig(n.name).files.indexOf(e) < 0
                        }), 0 !== r.length && s._$log.warn('Module "', t, '" attempted to redefine configuration for dependency. "', n.name, '"\n Additional Files Loaded:', r), e.isDefined(s.filesLoader) ? void o.push(s.filesLoader(n, i).then(function () {
                            return s._loadDependencies(n)
                        })) : h(new Error("Error: New dependencies need to be loaded from external files (" + n.files + "), but no loader has been defined."));
                        if (e.isArray(n)) {
                            var l = [];
                            e.forEach(n, function (e) {
                                var t = s.getModuleConfig(e);
                                null === t ? l.push(e) : t.files && (l = l.concat(t.files))
                            }), l.length > 0 && (n = {files: l})
                        } else e.isObject(n) && n.hasOwnProperty("name") && n.name && (s.setModuleConfig(n), L.push(n.name));
                        if (e.isDefined(n.files) && 0 !== n.files.length) {
                            if (!e.isDefined(s.filesLoader)) return h(new Error('Error: the module "' + n.name + '" is defined in external files (' + n.files + "), but no loader has been defined."));
                            o.push(s.filesLoader(n, i).then(function () {
                                return s._loadDependencies(n)
                            }))
                        }
                    }), u.all(o)
                }, inject: function (t) {
                    var i = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1],
                        n = !(arguments.length <= 2 || void 0 === arguments[2]) && arguments[2], a = this,
                        o = u.defer();
                    if (e.isDefined(t) && null !== t) {
                        if (e.isArray(t)) {
                            var s = [];
                            return e.forEach(t, function (e) {
                                s.push(a.inject(e, i, n))
                            }), u.all(s)
                        }
                        a._addToLoadList(a._getModuleName(t), !0, n)
                    }
                    if (r.length > 0) {
                        var l = r.slice();
                        !function e(t) {
                            L.push(t), A[t] = o.promise, a._loadDependencies(t, i).then(function () {
                                try {
                                    d = [], b(S, L, i)
                                } catch (e) {
                                    return a._$log.error(e.message), void o.reject(e)
                                }
                                r.length > 0 ? e(r.shift()) : o.resolve(l)
                            }, function (e) {
                                o.reject(e)
                            })
                        }(r.shift())
                    } else {
                        if (i && i.name && A[i.name]) return A[i.name];
                        o.resolve()
                    }
                    return o.promise
                }, getRequires: function (t) {
                    var n = [];
                    return e.forEach(t.requires, function (e) {
                        i.indexOf(e) === -1 && n.push(e)
                    }), n
                }, _invokeQueue: w, _registerInvokeList: _, _register: b, _addToLoadList: p, _unregister: function (t) {
                    e.isDefined(t) && e.isArray(t) && e.forEach(t, function (e) {
                        n[e] = void 0
                    })
                }
            }
        }], this._init(e.element(t.document))
    }]);
    var u = e.bootstrap;
    e.bootstrap = function (t, f, h) {
        return i = ["ng", "oc.lazyLoad"], n = {}, a = [], r = [], o = [], s = [], l = e.noop, c = {}, d = [], e.forEach(f.slice(), function (e) {
            p(e, !0, !0)
        }), u(t, f, h)
    };
    var p = function (t, i, n) {
        (s.length > 0 || i) && e.isString(t) && r.indexOf(t) === -1 && (r.push(t), n && o.push(t))
    }, f = e.module;
    e.module = function (e, t, i) {
        return p(e, !1, !0), f(e, t, i)
    }, "undefined" != typeof module && "undefined" != typeof exports && module.exports === exports && (module.exports = "oc.lazyLoad")
}(angular, window), function (e) {
    "use strict";
    e.module("oc.lazyLoad").directive("ocLazyLoad", ["$ocLazyLoad", "$compile", "$animate", "$parse", "$timeout", function (t, i, n, a, r) {
        return {
            restrict: "A", terminal: !0, priority: 1e3, compile: function (r, o) {
                var s = r[0].innerHTML;
                return r.html(""), function (r, o, l) {
                    var c = a(l.ocLazyLoad);
                    r.$watch(function () {
                        return c(r) || l.ocLazyLoad
                    }, function (a) {
                        e.isDefined(a) && t.load(a).then(function () {
                            n.enter(s, o), i(o.contents())(r)
                        })
                    }, !0)
                }
            }
        }
    }])
}(angular), function (e) {
    "use strict";
    e.module("oc.lazyLoad").config(["$provide", function (t) {
        t.decorator("$ocLazyLoad", ["$delegate", "$q", "$window", "$interval", function (t, i, n, a) {
            var r = !1, o = n.document.getElementsByTagName("head")[0] || n.document.getElementsByTagName("body")[0];
            return t.buildElement = function (s, l, c) {
                var d, u, p = i.defer(), f = t._getFilesCache(), h = function (e) {
                    var t = (new Date).getTime();
                    return e.indexOf("?") >= 0 ? "&" === e.substring(0, e.length - 1) ? e + "_dc=" + t : e + "&_dc=" + t : e + "?_dc=" + t
                };
                switch (e.isUndefined(f.get(l)) && f.put(l, p.promise), s) {
                    case"css":
                        d = n.document.createElement("link"), d.type = "text/css", d.rel = "stylesheet", d.href = c.cache === !1 ? h(l) : l;
                        break;
                    case"js":
                        d = n.document.createElement("script"), d.src = c.cache === !1 ? h(l) : l;
                        break;
                    default:
                        f.remove(l), p.reject(new Error('Requested type "' + s + '" is not known. Could not inject "' + l + '"'))
                }
                d.onload = d.onreadystatechange = function (e) {
                    d.readyState && !/^c|loade/.test(d.readyState) || u || (d.onload = d.onreadystatechange = null, u = 1, t._broadcast("ocLazyLoad.fileLoaded", l), p.resolve(d))
                }, d.onerror = function () {
                    f.remove(l), p.reject(new Error("Unable to load " + l))
                }, d.async = c.serie ? 0 : 1;
                var g = o.lastChild;
                if (c.insertBefore) {
                    var m = e.element(e.isDefined(window.jQuery) ? c.insertBefore : document.querySelector(c.insertBefore));
                    m && m.length > 0 && (g = m[0])
                }
                if (g.parentNode.insertBefore(d, g), "css" == s) {
                    var v = n.navigator.userAgent.toLowerCase();
                    if (v.indexOf("phantomjs/1.9") > -1) r = !0; else if (/iP(hone|od|ad)/.test(n.navigator.platform)) {
                        var y = n.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
                            b = parseFloat([parseInt(y[1], 10), parseInt(y[2], 10), parseInt(y[3] || 0, 10)].join("."));
                        r = b < 6
                    } else if (v.indexOf("android") > -1) {
                        var _ = parseFloat(v.slice(v.indexOf("android") + 8));
                        r = _ < 4.4
                    } else if (v.indexOf("safari") > -1) {
                        var w = v.match(/version\/([\.\d]+)/i);
                        r = w && w[1] && parseFloat(w[1]) < 6
                    }
                    if (r) var x = 1e3, C = a(function () {
                        try {
                            d.sheet.cssRules, a.cancel(C), d.onload()
                        } catch (e) {
                            --x <= 0 && d.onerror()
                        }
                    }, 20)
                }
                return p.promise
            }, t
        }])
    }])
}(angular), function (e) {
    "use strict";
    e.module("oc.lazyLoad").config(["$provide", function (t) {
        t.decorator("$ocLazyLoad", ["$delegate", "$q", function (t, i) {
            return t.filesLoader = function (n) {
                var a = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1], r = [], o = [], s = [],
                    l = [], c = null, d = t._getFilesCache();
                t.toggleWatch(!0), e.extend(a, n);
                var u = function (i) {
                    var n, u = null;
                    if (e.isObject(i) && (u = i.type, i = i.path), c = d.get(i), e.isUndefined(c) || a.cache === !1) {
                        if (null !== (n = /^(css|less|html|htm|js)?(?=!)/.exec(i)) && (u = n[1], i = i.substr(n[1].length + 1, i.length)), !u) if (null !== (n = /[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(i))) u = n[1]; else {
                            if (t.jsLoader.hasOwnProperty("ocLazyLoadLoader") || !t.jsLoader.hasOwnProperty("requirejs")) return void t._$log.error("File type could not be determined. " + i);
                            u = "js"
                        }
                        "css" !== u && "less" !== u || r.indexOf(i) !== -1 ? "html" !== u && "htm" !== u || o.indexOf(i) !== -1 ? "js" === u || s.indexOf(i) === -1 ? s.push(i) : t._$log.error("File type is not valid. " + i) : o.push(i) : r.push(i)
                    } else c && l.push(c)
                };
                if (a.serie ? u(a.files.shift()) : e.forEach(a.files, function (e) {
                    u(e)
                }), r.length > 0) {
                    var p = i.defer();
                    t.cssLoader(r, function (i) {
                        e.isDefined(i) && t.cssLoader.hasOwnProperty("ocLazyLoadLoader") ? (t._$log.error(i), p.reject(i)) : p.resolve()
                    }, a), l.push(p.promise)
                }
                if (o.length > 0) {
                    var f = i.defer();
                    t.templatesLoader(o, function (i) {
                        e.isDefined(i) && t.templatesLoader.hasOwnProperty("ocLazyLoadLoader") ? (t._$log.error(i), f.reject(i)) : f.resolve()
                    }, a), l.push(f.promise)
                }
                if (s.length > 0) {
                    var h = i.defer();
                    t.jsLoader(s, function (i) {
                        e.isDefined(i) && (t.jsLoader.hasOwnProperty("ocLazyLoadLoader") || t.jsLoader.hasOwnProperty("requirejs")) ? (t._$log.error(i), h.reject(i)) : h.resolve()
                    }, a), l.push(h.promise)
                }
                if (0 === l.length) {
                    var g = i.defer(),
                        m = "Error: no file to load has been found, if you're trying to load an existing module you should use the 'inject' method instead of 'load'.";
                    return t._$log.error(m), g.reject(m), g.promise
                }
                return a.serie && a.files.length > 0 ? i.all(l).then(function () {
                    return t.filesLoader(n, a)
                }) : i.all(l).finally(function (e) {
                    return t.toggleWatch(!1), e
                })
            }, t.load = function (n) {
                var a, r = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1], o = this, s = null,
                    l = [], c = i.defer(), d = e.copy(n), u = e.copy(r);
                if (e.isArray(d)) return e.forEach(d, function (e) {
                    l.push(o.load(e, u))
                }), i.all(l).then(function (e) {
                    c.resolve(e)
                }, function (e) {
                    c.reject(e)
                }), c.promise;
                if (e.isString(d) ? (s = o.getModuleConfig(d)) || (s = {files: [d]}) : e.isObject(d) && (s = e.isDefined(d.path) && e.isDefined(d.type) ? {files: [d]} : o.setModuleConfig(d)), null === s) {
                    return a = 'Module "' + (o._getModuleName(d) || "unknown") + '" is not configured, cannot load.', t._$log.error(a), c.reject(new Error(a)), c.promise
                }
                e.isDefined(s.template) && (e.isUndefined(s.files) && (s.files = []), e.isString(s.template) ? s.files.push(s.template) : e.isArray(s.template) && s.files.concat(s.template));
                var p = e.extend({}, u, s);
                return e.isUndefined(s.files) && e.isDefined(s.name) && t.moduleExists(s.name) ? t.inject(s.name, p, !0) : (t.filesLoader(s, p).then(function () {
                    t.inject(null, p).then(function (e) {
                        c.resolve(e)
                    }, function (e) {
                        c.reject(e)
                    })
                }, function (e) {
                    c.reject(e)
                }), c.promise)
            }, t
        }])
    }])
}(angular), function (e) {
    "use strict";
    e.module("oc.lazyLoad").config(["$provide", function (t) {
        t.decorator("$ocLazyLoad", ["$delegate", "$q", function (t, i) {
            return t.cssLoader = function (n, a, r) {
                var o = [];
                e.forEach(n, function (e) {
                    o.push(t.buildElement("css", e, r))
                }), i.all(o).then(function () {
                    a()
                }, function (e) {
                    a(e)
                })
            }, t.cssLoader.ocLazyLoadLoader = !0, t
        }])
    }])
}(angular), function (e) {
    "use strict";
    e.module("oc.lazyLoad").config(["$provide", function (t) {
        t.decorator("$ocLazyLoad", ["$delegate", "$q", function (t, i) {
            return t.jsLoader = function (n, a, r) {
                var o = [];
                e.forEach(n, function (e) {
                    o.push(t.buildElement("js", e, r))
                }), i.all(o).then(function () {
                    a()
                }, function (e) {
                    a(e)
                })
            }, t.jsLoader.ocLazyLoadLoader = !0, t
        }])
    }])
}(angular), function (e) {
    "use strict";
    e.module("oc.lazyLoad").config(["$provide", function (t) {
        t.decorator("$ocLazyLoad", ["$delegate", "$templateCache", "$q", "$http", function (t, i, n, a) {
            return t.templatesLoader = function (r, o, s) {
                var l = [], c = t._getFilesCache();
                return e.forEach(r, function (t) {
                    var r = n.defer();
                    l.push(r.promise), a.get(t, s).then(function (n) {
                        var a = n.data;
                        e.isString(a) && a.length > 0 && e.forEach(e.element(a), function (e) {
                            "SCRIPT" === e.nodeName && "text/ng-template" === e.type && i.put(e.id, e.innerHTML)
                        }), e.isUndefined(c.get(t)) && c.put(t, !0), r.resolve()
                    }).catch(function (e) {
                        r.reject(new Error('Unable to load template file "' + t + '": ' + e.data))
                    })
                }), n.all(l).then(function () {
                    o()
                }, function (e) {
                    o(e)
                })
            }, t.templatesLoader.ocLazyLoadLoader = !0, t
        }])
    }])
}(angular), Array.prototype.indexOf || (Array.prototype.indexOf = function (e, t) {
    var i;
    if (null == this) throw new TypeError('"this" is null or not defined');
    var n = Object(this), a = n.length >>> 0;
    if (0 === a) return -1;
    var r = +t || 0;
    if (Math.abs(r) === 1 / 0 && (r = 0), r >= a) return -1;
    for (i = Math.max(r >= 0 ? r : a - Math.abs(r), 0); i < a;) {
        if (i in n && n[i] === e) return i;
        i++
    }
    return -1
}), function (e) {
    function t(i) {
        if (n[i]) return n[i].exports;
        var a = n[i] = {i: i, l: !1, exports: {}};
        return e[i].call(a.exports, a, a.exports, t), a.l = !0, a.exports
    }

    var i = window.webpackJsonp;
    window.webpackJsonp = function (t, n, r) {
        for (var o, s, l = 0, c = []; l < t.length; l++) s = t[l], a[s] && c.push(a[s][0]), a[s] = 0;
        for (o in n) Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o]);
        for (i && i(t, n, r); c.length;) c.shift()()
    };
    var n = {}, a = {17: 0};
    t.e = function (e) {
        function i() {
            s.onerror = s.onload = null, clearTimeout(l);
            var t = a[e];
            0 !== t && (t && t[1](new Error("Loading chunk " + e + " failed.")), a[e] = void 0)
        }

        var n = a[e];
        if (0 === n) return new Promise(function (e) {
            e()
        });
        if (n) return n[2];
        var r = new Promise(function (t, i) {
            n = a[e] = [t, i]
        });
        n[2] = r;
        var o = document.getElementsByTagName("head")[0], s = document.createElement("script");
        s.type = "text/javascript", s.charset = "utf-8", s.async = !0, s.timeout = 12e4, t.nc && s.setAttribute("nonce", t.nc), s.src = t.p + "" + e + ".chunk-3900c4.js";
        var l = setTimeout(i, 12e4);
        return s.onerror = s.onload = i, o.appendChild(s), r
    }, t.m = e, t.c = n, t.d = function (e, i, n) {
        t.o(e, i) || Object.defineProperty(e, i, {configurable: !1, enumerable: !0, get: n})
    }, t.n = function (e) {
        var i = e && e.__esModule ? function () {
            return e.default
        } : function () {
            return e
        };
        return t.d(i, "a", i), i
    }, t.o = function (e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, t.p = "//m1.bdp.cn/dist/", t.oe = function (e) {
        throw console.error(e), e
    }, t(t.s = 401)
}([function (e, t, i) {
    var n = i(66)("wks"), a = i(43), r = i(4).Symbol, o = "function" == typeof r;
    (e.exports = function (e) {
        return n[e] || (n[e] = o && r[e] || (o ? r : a)("Symbol." + e))
    }).store = n
}, function (e, t, i) {
    e.exports = {default: i(145), __esModule: !0}
}, function (e, t) {
    var i = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = i)
}, function (e, t) {
    var i = e.exports = {version: "2.5.1"};
    "number" == typeof __e && (__e = i)
}, function (e, t) {
    var i = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = i)
}, function (e, t, i) {
    var n = i(54)("wks"), a = i(33), r = i(2).Symbol, o = "function" == typeof r;
    (e.exports = function (e) {
        return n[e] || (n[e] = o && r[e] || (o ? r : a)("Symbol." + e))
    }).store = n
}, function (e, t, i) {
    var n = i(9), a = i(79), r = i(52), o = Object.defineProperty;
    t.f = i(7) ? Object.defineProperty : function (e, t, i) {
        if (n(e), t = r(t, !0), n(i), a) try {
            return o(e, t, i)
        } catch (e) {
        }
        if ("get" in i || "set" in i) throw TypeError("Accessors not supported!");
        return "value" in i && (e[t] = i.value), e
    }
}, function (e, t, i) {
    e.exports = !i(24)(function () {
        return 7 != Object.defineProperty({}, "a", {
            get: function () {
                return 7
            }
        }).a
    })
}, function (e, t, i) {
    var n = i(19);
    e.exports = function (e) {
        if (!n(e)) throw TypeError(e + " is not an object!");
        return e
    }
}, function (e, t, i) {
    var n = i(16);
    e.exports = function (e) {
        if (!n(e)) throw TypeError(e + " is not an object!");
        return e
    }
}, function (e, t) {
    var i = {}.hasOwnProperty;
    e.exports = function (e, t) {
        return i.call(e, t)
    }
}, function (e, t, i) {
    var n = i(2), a = i(3), r = i(34), o = i(12), s = function (e, t, i) {
        var l, c, d, u = e & s.F, p = e & s.G, f = e & s.S, h = e & s.P, g = e & s.B, m = e & s.W,
            v = p ? a : a[t] || (a[t] = {}), y = v.prototype, b = p ? n : f ? n[t] : (n[t] || {}).prototype;
        p && (i = t);
        for (l in i) (c = !u && b && void 0 !== b[l]) && l in v || (d = c ? b[l] : i[l], v[l] = p && "function" != typeof b[l] ? i[l] : g && c ? r(d, n) : m && b[l] == d ? function (e) {
            var t = function (t, i, n) {
                if (this instanceof e) {
                    switch (arguments.length) {
                        case 0:
                            return new e;
                        case 1:
                            return new e(t);
                        case 2:
                            return new e(t, i)
                    }
                    return new e(t, i, n)
                }
                return e.apply(this, arguments)
            };
            return t.prototype = e.prototype, t
        }(d) : h && "function" == typeof d ? r(Function.call, d) : d, h && ((v.virtual || (v.virtual = {}))[l] = d, e & s.R && y && !y[l] && o(y, l, d)))
    };
    s.F = 1, s.G = 2, s.S = 4, s.P = 8, s.B = 16, s.W = 32, s.U = 64, s.R = 128, e.exports = s
}, function (e, t, i) {
    var n = i(6), a = i(25);
    e.exports = i(7) ? function (e, t, i) {
        return n.f(e, t, a(1, i))
    } : function (e, t, i) {
        return e[t] = i, e
    }
}, function (e, t, i) {
    "use strict";
    t.__esModule = !0, t.default = function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
}, function (e, t, i) {
    var n = i(92), a = i(51);
    e.exports = function (e) {
        return n(a(e))
    }
}, function (e, t, i) {
    var n = i(29), a = i(68);
    e.exports = i(20) ? function (e, t, i) {
        return n.f(e, t, a(1, i))
    } : function (e, t, i) {
        return e[t] = i, e
    }
}, function (e, t) {
    e.exports = function (e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
    }
}, function (e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(89), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    t.default = function () {
        function e(e, t) {
            for (var i = 0; i < t.length; i++) {
                var n = t[i];
                n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), (0, a.default)(e, n.key, n)
            }
        }

        return function (t, i, n) {
            return i && e(t.prototype, i), n && e(t, n), t
        }
    }()
}, function (e, t, i) {
    var n = i(4), a = i(15), r = i(21), o = i(43)("src"), s = Function.toString, l = ("" + s).split("toString");
    i(22).inspectSource = function (e) {
        return s.call(e)
    }, (e.exports = function (e, t, i, s) {
        var c = "function" == typeof i;
        c && (r(i, "name") || a(i, "name", t)), e[t] !== i && (c && (r(i, o) || a(i, o, e[t] ? "" + e[t] : l.join(String(t)))), e === n ? e[t] = i : s ? e[t] ? e[t] = i : a(e, t, i) : (delete e[t], a(e, t, i)))
    })(Function.prototype, "toString", function () {
        return "function" == typeof this && this[o] || s.call(this)
    })
}, function (e, t) {
    e.exports = function (e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
    }
}, function (e, t, i) {
    e.exports = !i(67)(function () {
        return 7 != Object.defineProperty({}, "a", {
            get: function () {
                return 7
            }
        }).a
    })
}, function (e, t) {
    var i = {}.hasOwnProperty;
    e.exports = function (e, t) {
        return i.call(e, t)
    }
}, function (e, t) {
    var i = e.exports = {version: "2.5.1"};
    "number" == typeof __e && (__e = i)
}, function (e, t) {
    e.exports = {}
}, function (e, t) {
    e.exports = function (e) {
        try {
            return !!e()
        } catch (e) {
            return !0
        }
    }
}, function (e, t) {
    e.exports = function (e, t) {
        return {enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t}
    }
}, function (e, t) {
    e.exports = {}
}, function (e, t) {
    var i = {}.toString;
    e.exports = function (e) {
        return i.call(e).slice(8, -1)
    }
}, function (e, t) {
    var i = {}.toString;
    e.exports = function (e) {
        return i.call(e).slice(8, -1)
    }
}, function (e, t, i) {
    var n = i(8), a = i(102), r = i(103), o = Object.defineProperty;
    t.f = i(20) ? Object.defineProperty : function (e, t, i) {
        if (n(e), t = r(t, !0), n(i), a) try {
            return o(e, t, i)
        } catch (e) {
        }
        if ("get" in i || "set" in i) throw TypeError("Accessors not supported!");
        return "value" in i && (e[t] = i.value), e
    }
}, function (e, t, i) {
    var n = i(31);
    e.exports = function (e, t, i) {
        if (n(e), void 0 === t) return e;
        switch (i) {
            case 1:
                return function (i) {
                    return e.call(t, i)
                };
            case 2:
                return function (i, n) {
                    return e.call(t, i, n)
                };
            case 3:
                return function (i, n, a) {
                    return e.call(t, i, n, a)
                }
        }
        return function () {
            return e.apply(t, arguments)
        }
    }
}, function (e, t) {
    e.exports = function (e) {
        if ("function" != typeof e) throw TypeError(e + " is not a function!");
        return e
    }
}, function (e, t, i) {
    var n = i(81), a = i(55);
    e.exports = Object.keys || function (e) {
        return n(e, a)
    }
}, function (e, t) {
    var i = 0, n = Math.random();
    e.exports = function (e) {
        return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++i + n).toString(36))
    }
}, function (e, t, i) {
    var n = i(38);
    e.exports = function (e, t, i) {
        if (n(e), void 0 === t) return e;
        switch (i) {
            case 1:
                return function (i) {
                    return e.call(t, i)
                };
            case 2:
                return function (i, n) {
                    return e.call(t, i, n)
                };
            case 3:
                return function (i, n, a) {
                    return e.call(t, i, n, a)
                }
        }
        return function () {
            return e.apply(t, arguments)
        }
    }
}, function (e, t) {
    e.exports = !0
}, function (e, t, i) {
    var n = i(6).f, a = i(10), r = i(5)("toStringTag");
    e.exports = function (e, t, i) {
        e && !a(e = i ? e : e.prototype, r) && n(e, r, {configurable: !0, value: t})
    }
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return (e.slice(0, 1).toLocaleLowerCase() + e.slice(1)).replace("Component", "").replace("Directive", "")
    }

    function a(e) {
        var t = angular.module(e.name, e.dependence);
        e.service && _.forEach(e.service, function (e, i) {
            return t.service(n(i), e)
        }), e.controller && _.forEach(e.controller, function (e, i) {
            return t.controller(n(i), e)
        }), e.directive && _.forEach(e.directive, function (e, i) {
            return t.directive(n(i), e.directiveConstructor)
        })
    }

    function r(e) {
        var t = angular.module(e.name);
        e.service && _.forEach(e.service, function (e, i) {
            return t.service(n(i), e)
        }), e.controller && _.forEach(e.controller, function (e, i) {
            return t.controller(n(i), e)
        }), e.directive && _.forEach(e.directive, function (e, i) {
            return t.directive(n(i), e.directiveConstructor)
        })
    }

    function o(e) {
        return function (t) {
            t.directiveConstructor = e
        }
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.creatNgModule = a, t.extendNgModule = r, t.ngComponent = o;
    t.ngDirective = o
}, function (e, t) {
    e.exports = function (e) {
        if ("function" != typeof e) throw TypeError(e + " is not a function!");
        return e
    }
}, function (e, t) {
    t.f = {}.propertyIsEnumerable
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    t.__esModule = !0;
    var a = i(146), r = n(a), o = i(148), s = n(o),
        l = "function" == typeof s.default && "symbol" == typeof r.default ? function (e) {
            return typeof e
        } : function (e) {
            return e && "function" == typeof s.default && e.constructor === s.default && e !== s.default.prototype ? "symbol" : typeof e
        };
    t.default = "function" == typeof s.default && "symbol" === l(r.default) ? function (e) {
        return void 0 === e ? "undefined" : l(e)
    } : function (e) {
        return e && "function" == typeof s.default && e.constructor === s.default && e !== s.default.prototype ? "symbol" : void 0 === e ? "undefined" : l(e)
    }
}, function (e, t, i) {
    e.exports = {default: i(162), __esModule: !0}
}, function (e, t, i) {
    var n = i(28), a = i(0)("toStringTag"), r = "Arguments" == n(function () {
        return arguments
    }()), o = function (e, t) {
        try {
            return e[t]
        } catch (e) {
        }
    };
    e.exports = function (e) {
        var t, i, s;
        return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof(i = o(t = Object(e), a)) ? i : r ? n(t) : "Object" == (s = n(t)) && "function" == typeof t.callee ? "Arguments" : s
    }
}, function (e, t) {
    var i = 0, n = Math.random();
    e.exports = function (e) {
        return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++i + n).toString(36))
    }
}, function (e, t, i) {
    var n = i(19), a = i(4).document, r = n(a) && n(a.createElement);
    e.exports = function (e) {
        return r ? a.createElement(e) : {}
    }
}, function (e, t) {
    var i = Math.ceil, n = Math.floor;
    e.exports = function (e) {
        return isNaN(e = +e) ? 0 : (e > 0 ? n : i)(e)
    }
}, function (e, t) {
    e.exports = function (e) {
        if (void 0 == e) throw TypeError("Can't call method on  " + e);
        return e
    }
}, function (e, t, i) {
    var n = i(110), a = i(46);
    e.exports = function (e) {
        return n(a(e))
    }
}, function (e, t, i) {
    var n = i(66)("keys"), a = i(43);
    e.exports = function (e) {
        return n[e] || (n[e] = a(e))
    }
}, function (e, t, i) {
    var n = i(29).f, a = i(21), r = i(0)("toStringTag");
    e.exports = function (e, t, i) {
        e && !a(e = i ? e : e.prototype, r) && n(e, r, {configurable: !0, value: t})
    }
}, function (e, t) {
    var i = Math.ceil, n = Math.floor;
    e.exports = function (e) {
        return isNaN(e = +e) ? 0 : (e > 0 ? n : i)(e)
    }
}, function (e, t) {
    e.exports = function (e) {
        if (void 0 == e) throw TypeError("Can't call method on  " + e);
        return e
    }
}, function (e, t, i) {
    var n = i(16);
    e.exports = function (e, t) {
        if (!n(e)) return e;
        var i, a;
        if (t && "function" == typeof(i = e.toString) && !n(a = i.call(e))) return a;
        if ("function" == typeof(i = e.valueOf) && !n(a = i.call(e))) return a;
        if (!t && "function" == typeof(i = e.toString) && !n(a = i.call(e))) return a;
        throw TypeError("Can't convert object to primitive value")
    }
}, function (e, t, i) {
    var n = i(54)("keys"), a = i(33);
    e.exports = function (e) {
        return n[e] || (n[e] = a(e))
    }
}, function (e, t, i) {
    var n = i(2), a = n["__core-js_shared__"] || (n["__core-js_shared__"] = {});
    e.exports = function (e) {
        return a[e] || (a[e] = {})
    }
}, function (e, t) {
    e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
}, function (e, t, i) {
    t.f = i(5)
}, function (e, t, i) {
    var n = i(2), a = i(3), r = i(35), o = i(56), s = i(6).f;
    e.exports = function (e) {
        var t = a.Symbol || (a.Symbol = r ? {} : n.Symbol || {});
        "_" == e.charAt(0) || e in t || s(t, e, {value: o.f(e)})
    }
}, function (e, t, i) {
    var n = i(16), a = i(2).document, r = n(a) && n(a.createElement);
    e.exports = function (e) {
        return r ? a.createElement(e) : {}
    }
}, function (e, t, i) {
    var n = i(51);
    e.exports = function (e) {
        return Object(n(e))
    }
}, function (e, t, i) {
    "use strict";
    var n = i(133)(!0);
    i(78)(String, "String", function (e) {
        this._t = String(e), this._i = 0
    }, function () {
        var e, t = this._t, i = this._i;
        return i >= t.length ? {value: void 0, done: !0} : (e = n(t, i), this._i += e.length, {value: e, done: !1})
    })
}, function (e, t, i) {
    var n = i(50), a = Math.min;
    e.exports = function (e) {
        return e > 0 ? a(n(e), 9007199254740991) : 0
    }
}, function (e, t, i) {
    var n = i(9), a = i(135), r = i(55), o = i(53)("IE_PROTO"), s = function () {
    }, l = function () {
        var e, t = i(58)("iframe"), n = r.length;
        for (t.style.display = "none", i(87).appendChild(t), t.src = "javascript:", e = t.contentWindow.document, e.open(), e.write("<script>document.F=Object</script>"), e.close(), l = e.F; n--;) delete l.prototype[r[n]];
        return l()
    };
    e.exports = Object.create || function (e, t) {
        var i;
        return null !== e ? (s.prototype = n(e), i = new s, s.prototype = null, i[o] = e) : i = l(), void 0 === t ? i : a(i, t)
    }
}, function (e, t) {
    t.f = Object.getOwnPropertySymbols
}, function (e, t, i) {
    e.exports = i(192)
}, function (e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(84), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    t.default = function (e) {
        return function () {
            var t = e.apply(this, arguments);
            return new a.default(function (e, i) {
                function n(r, o) {
                    try {
                        var s = t[r](o), l = s.value
                    } catch (e) {
                        return void i(e)
                    }
                    if (!s.done) return a.default.resolve(l).then(function (e) {
                        n("next", e)
                    }, function (e) {
                        n("throw", e)
                    });
                    e(l)
                }

                return n("next")
            })
        }
    }
}, function (e, t, i) {
    var n = i(4), a = n["__core-js_shared__"] || (n["__core-js_shared__"] = {});
    e.exports = function (e) {
        return a[e] || (a[e] = {})
    }
}, function (e, t) {
    e.exports = function (e) {
        try {
            return !!e()
        } catch (e) {
            return !0
        }
    }
}, function (e, t) {
    e.exports = function (e, t) {
        return {enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t}
    }
}, function (e, t, i) {
    "use strict";
    var n = i(70), a = i(71), r = i(18), o = i(15), s = i(21), l = i(23), c = i(106), d = i(49), u = i(113),
        p = i(0)("iterator"), f = !([].keys && "next" in [].keys()), h = function () {
            return this
        };
    e.exports = function (e, t, i, g, m, v, y) {
        c(i, t, g);
        var b, _, w, x = function (e) {
                if (!f && e in T) return T[e];
                switch (e) {
                    case"keys":
                    case"values":
                        return function () {
                            return new i(this, e)
                        }
                }
                return function () {
                    return new i(this, e)
                }
            }, C = t + " Iterator", k = "values" == m, S = !1, T = e.prototype, D = T[p] || T["@@iterator"] || m && T[m],
            L = D || x(m), A = m ? k ? x("entries") : L : void 0, E = "Array" == t ? T.entries || D : D;
        if (E && (w = u(E.call(new e))) !== Object.prototype && w.next && (d(w, C, !0), n || s(w, p) || o(w, p, h)), k && D && "values" !== D.name && (S = !0, L = function () {
            return D.call(this)
        }), n && !y || !f && !S && T[p] || o(T, p, L), l[t] = L, l[C] = h, m) if (b = {
            values: k ? L : x("values"),
            keys: v ? L : x("keys"),
            entries: A
        }, y) for (_ in b) _ in T || r(T, _, b[_]); else a(a.P + a.F * (f || S), t, b);
        return b
    }
}, function (e, t) {
    e.exports = !1
}, function (e, t, i) {
    var n = i(4), a = i(22), r = i(15), o = i(18), s = i(30), l = function (e, t, i) {
        var c, d, u, p, f = e & l.F, h = e & l.G, g = e & l.S, m = e & l.P, v = e & l.B,
            y = h ? n : g ? n[t] || (n[t] = {}) : (n[t] || {}).prototype, b = h ? a : a[t] || (a[t] = {}),
            _ = b.prototype || (b.prototype = {});
        h && (i = t);
        for (c in i) d = !f && y && void 0 !== y[c], u = (d ? y : i)[c], p = v && d ? s(u, n) : m && "function" == typeof u ? s(Function.call, u) : u, y && o(y, c, u, e & l.U), b[c] != u && r(b, c, p), m && _[c] != u && (_[c] = u)
    };
    n.core = a, l.F = 1, l.G = 2, l.S = 4, l.P = 8, l.B = 16, l.W = 32, l.U = 64, l.R = 128, e.exports = l
}, function (e, t, i) {
    var n = i(109), a = i(74);
    e.exports = Object.keys || function (e) {
        return n(e, a)
    }
}, function (e, t, i) {
    var n = i(45), a = Math.min;
    e.exports = function (e) {
        return e > 0 ? a(n(e), 9007199254740991) : 0
    }
}, function (e, t) {
    e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
}, function (e, t, i) {
    var n = i(4).document;
    e.exports = n && n.documentElement
}, function (e, t, i) {
    var n, a, r, o = i(30), s = i(126), l = i(75), c = i(44), d = i(4), u = d.process, p = d.setImmediate,
        f = d.clearImmediate, h = d.MessageChannel, g = d.Dispatch, m = 0, v = {}, y = function () {
            var e = +this;
            if (v.hasOwnProperty(e)) {
                var t = v[e];
                delete v[e], t()
            }
        }, b = function (e) {
            y.call(e.data)
        };
    p && f || (p = function (e) {
        for (var t = [], i = 1; arguments.length > i;) t.push(arguments[i++]);
        return v[++m] = function () {
            s("function" == typeof e ? e : Function(e), t)
        }, n(m), m
    }, f = function (e) {
        delete v[e]
    }, "process" == i(28)(u) ? n = function (e) {
        u.nextTick(o(y, e, 1))
    } : g && g.now ? n = function (e) {
        g.now(o(y, e, 1))
    } : h ? (a = new h, r = a.port2, a.port1.onmessage = b, n = o(r.postMessage, r, 1)) : d.addEventListener && "function" == typeof postMessage && !d.importScripts ? (n = function (e) {
        d.postMessage(e + "", "*")
    }, d.addEventListener("message", b, !1)) : n = "onreadystatechange" in c("script") ? function (e) {
        l.appendChild(c("script")).onreadystatechange = function () {
            l.removeChild(this), y.call(e)
        }
    } : function (e) {
        setTimeout(o(y, e, 1), 0)
    }), e.exports = {set: p, clear: f}
}, function (e, t, i) {
    "use strict";

    function n(e) {
        var t, i;
        this.promise = new e(function (e, n) {
            if (void 0 !== t || void 0 !== i) throw TypeError("Bad Promise constructor");
            t = e, i = n
        }), this.resolve = a(t), this.reject = a(i)
    }

    var a = i(31);
    e.exports.f = function (e) {
        return new n(e)
    }
}, function (e, t, i) {
    "use strict";
    var n = i(35), a = i(11), r = i(80), o = i(12), s = i(10), l = i(26), c = i(134), d = i(36), u = i(93),
        p = i(5)("iterator"), f = !([].keys && "next" in [].keys()), h = function () {
            return this
        };
    e.exports = function (e, t, i, g, m, v, y) {
        c(i, t, g);
        var b, _, w, x = function (e) {
                if (!f && e in T) return T[e];
                switch (e) {
                    case"keys":
                    case"values":
                        return function () {
                            return new i(this, e)
                        }
                }
                return function () {
                    return new i(this, e)
                }
            }, C = t + " Iterator", k = "values" == m, S = !1, T = e.prototype, D = T[p] || T["@@iterator"] || m && T[m],
            L = D || x(m), A = m ? k ? x("entries") : L : void 0, E = "Array" == t ? T.entries || D : D;
        if (E && (w = u(E.call(new e))) !== Object.prototype && w.next && (d(w, C, !0), n || s(w, p) || o(w, p, h)), k && D && "values" !== D.name && (S = !0, L = function () {
            return D.call(this)
        }), n && !y || !f && !S && T[p] || o(T, p, L), l[t] = L, l[C] = h, m) if (b = {
            values: k ? L : x("values"),
            keys: v ? L : x("keys"),
            entries: A
        }, y) for (_ in b) _ in T || r(T, _, b[_]); else a(a.P + a.F * (f || S), t, b);
        return b
    }
}, function (e, t, i) {
    e.exports = !i(7) && !i(24)(function () {
        return 7 != Object.defineProperty(i(58)("div"), "a", {
            get: function () {
                return 7
            }
        }).a
    })
}, function (e, t, i) {
    e.exports = i(12)
}, function (e, t, i) {
    var n = i(10), a = i(14), r = i(136)(!1), o = i(53)("IE_PROTO");
    e.exports = function (e, t) {
        var i, s = a(e), l = 0, c = [];
        for (i in s) i != o && n(s, i) && c.push(i);
        for (; t.length > l;) n(s, i = t[l++]) && (~r(c, i) || c.push(i));
        return c
    }
}, function (e, t, i) {
    var n = i(81), a = i(55).concat("length", "prototype");
    t.f = Object.getOwnPropertyNames || function (e) {
        return n(e, a)
    }
}, function (e, t, i) {
    "use strict";

    function n(e) {
        var t, i;
        this.promise = new e(function (e, n) {
            if (void 0 !== t || void 0 !== i) throw TypeError("Bad Promise constructor");
            t = e, i = n
        }), this.resolve = a(t), this.reject = a(i)
    }

    var a = i(38);
    e.exports.f = function (e) {
        return new n(e)
    }
}, function (e, t, i) {
    e.exports = {default: i(172), __esModule: !0}
}, function (e, t, i) {
    const n = i(341);
    e.exports = function (e) {
        if (!e) return null;
        var t = !1;
        n(e, function () {
        });
        return t = !0, function (e) {
            if (t) return e()
        }
    }
}, function (e, t) {
}, function (e, t, i) {
    var n = i(2).document;
    e.exports = n && n.documentElement
}, function (e, t, i) {
    i(138);
    for (var n = i(2), a = i(12), r = i(26), o = i(5)("toStringTag"), s = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), l = 0; l < s.length; l++) {
        var c = s[l], d = n[c], u = d && d.prototype;
        u && !u[o] && a(u, o, c), r[c] = r.Array
    }
}, function (e, t, i) {
    e.exports = {default: i(159), __esModule: !0}
}, function (e, t, i) {
    var n = i(39), a = i(25), r = i(14), o = i(52), s = i(10), l = i(79), c = Object.getOwnPropertyDescriptor;
    t.f = i(7) ? c : function (e, t) {
        if (e = r(e), t = o(t, !0), l) try {
            return c(e, t)
        } catch (e) {
        }
        if (s(e, t)) return a(!n.f.call(e, t), e[t])
    }
}, function (e, t, i) {
    "use strict";

    function n() {
        return 1 === window.usedThemeId ? "dark" : (window.usedThemeId, "light")
    }

    function a(e, t) {
        for (var i in t) void 0 === e[i] ? e[i] = t[i] : _.isObject(e[i]) && a(e[i], t[i])
    }

    function r(e, t) {
        for (var i = n(), r = e[i], o = [], s = 0, l = r.length; s < l; s++) {
            var c = r[s];
            c.value = void 0 === c.value ? s : c.value, o.push(c), c.style = c.style || {}, a(c.style, t)
        }
        return {skinList: o}
    }

    function o(e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = [];
        return ["dark", "light"].forEach(function (n) {
            for (var r = t[n], o = e[n], s = 0, l = o.length; s < l; s++) {
                var c = o[s];
                i.push(c), c.theme = n, c.style = c.style || {}, a(c.style, r)
            }
        }), i
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.getTheme = n, t.meregeSkin = a, t.getSkinInfo = r, t.getSkinList = o
}, function (e, t, i) {
    var n = i(27);
    e.exports = Object("z").propertyIsEnumerable(0) ? Object : function (e) {
        return "String" == n(e) ? e.split("") : Object(e)
    }
}, function (e, t, i) {
    var n = i(10), a = i(59), r = i(53)("IE_PROTO"), o = Object.prototype;
    e.exports = Object.getPrototypeOf || function (e) {
        return e = a(e), n(e, r) ? e[r] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? o : null
    }
}, function (e, t, i) {
    var n = i(27), a = i(5)("toStringTag"), r = "Arguments" == n(function () {
        return arguments
    }()), o = function (e, t) {
        try {
            return e[t]
        } catch (e) {
        }
    };
    e.exports = function (e) {
        var t, i, s;
        return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof(i = o(t = Object(e), a)) ? i : r ? n(t) : "Object" == (s = n(t)) && "function" == typeof t.callee ? "Arguments" : s
    }
}, function (e, t, i) {
    var n = i(9), a = i(38), r = i(5)("species");
    e.exports = function (e, t) {
        var i, o = n(e).constructor;
        return void 0 === o || void 0 == (i = n(o)[r]) ? t : a(i)
    }
}, function (e, t, i) {
    var n, a, r, o = i(34), s = i(176), l = i(87), c = i(58), d = i(2), u = d.process, p = d.setImmediate,
        f = d.clearImmediate, h = d.MessageChannel, g = d.Dispatch, m = 0, v = {}, y = function () {
            var e = +this;
            if (v.hasOwnProperty(e)) {
                var t = v[e];
                delete v[e], t()
            }
        }, b = function (e) {
            y.call(e.data)
        };
    p && f || (p = function (e) {
        for (var t = [], i = 1; arguments.length > i;) t.push(arguments[i++]);
        return v[++m] = function () {
            s("function" == typeof e ? e : Function(e), t)
        }, n(m), m
    }, f = function (e) {
        delete v[e]
    }, "process" == i(27)(u) ? n = function (e) {
        u.nextTick(o(y, e, 1))
    } : g && g.now ? n = function (e) {
        g.now(o(y, e, 1))
    } : h ? (a = new h, r = a.port2, a.port1.onmessage = b, n = o(r.postMessage, r, 1)) : d.addEventListener && "function" == typeof postMessage && !d.importScripts ? (n = function (e) {
        d.postMessage(e + "", "*")
    }, d.addEventListener("message", b, !1)) : n = "onreadystatechange" in c("script") ? function (e) {
        l.appendChild(c("script")).onreadystatechange = function () {
            l.removeChild(this), y.call(e)
        }
    } : function (e) {
        setTimeout(o(y, e, 1), 0)
    }), e.exports = {set: p, clear: f}
}, function (e, t) {
    e.exports = function (e) {
        try {
            return {e: !1, v: e()}
        } catch (e) {
            return {e: !0, v: e}
        }
    }
}, function (e, t, i) {
    var n = i(9), a = i(16), r = i(83);
    e.exports = function (e, t) {
        if (n(e), a(t) && t.constructor === e) return t;
        var i = r.f(e);
        return (0, i.resolve)(t), i.promise
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        if (1 === arguments.length) {
            for (var i = e[0], a = 1; a < e.length; a++) i = n(i, e[a]);
            return i
        }
        for (var r in t) if ("class" === r) {
            var o = e[r] || [];
            e[r] = (Array.isArray(o) ? o : [o]).concat(t[r] || [])
        } else if ("style" === r) {
            var o = s(e[r]), l = s(t[r]);
            e[r] = o + l
        } else e[r] = t[r];
        return e
    }

    function a(e, t) {
        for (var i, n = "", a = "", r = Array.isArray(t), s = 0; s < e.length; s++) (i = o(e[s])) && (r && t[s] && (i = d(i)), n = n + a + i, a = " ");
        return n
    }

    function r(e) {
        var t = "", i = "";
        for (var n in e) n && e[n] && p.call(e, n) && (t = t + i + n, i = " ");
        return t
    }

    function o(e, t) {
        return Array.isArray(e) ? a(e, t) : e && "object" == typeof e ? r(e) : e || ""
    }

    function s(e) {
        if (!e) return "";
        if ("object" == typeof e) {
            var t = "";
            for (var i in e) p.call(e, i) && (t = t + i + ":" + e[i] + ";");
            return t
        }
        return e += "", ";" !== e[e.length - 1] ? e + ";" : e
    }

    function l(e, t, i, n) {
        return t !== !1 && null != t && (t || "class" !== e && "style" !== e) ? t === !0 ? " " + (n ? e : e + '="' + e + '"') : ("function" == typeof t.toJSON && (t = t.toJSON()), "string" == typeof t || (t = JSON.stringify(t), i || t.indexOf('"') === -1) ? (i && (t = d(t)), " " + e + '="' + t + '"') : " " + e + "='" + t.replace(/'/g, "&#39;") + "'") : ""
    }

    function c(e, t) {
        var i = "";
        for (var n in e) if (p.call(e, n)) {
            var a = e[n];
            if ("class" === n) {
                a = o(a), i = l(n, a, !1, t) + i;
                continue
            }
            "style" === n && (a = s(a)), i += l(n, a, !1, t)
        }
        return i
    }

    function d(e) {
        var t = "" + e, i = f.exec(t);
        if (!i) return e;
        var n, a, r, o = "";
        for (n = i.index, a = 0; n < t.length; n++) {
            switch (t.charCodeAt(n)) {
                case 34:
                    r = "&quot;";
                    break;
                case 38:
                    r = "&amp;";
                    break;
                case 60:
                    r = "&lt;";
                    break;
                case 62:
                    r = "&gt;";
                    break;
                default:
                    continue
            }
            a !== n && (o += t.substring(a, n)), a = n + 1, o += r
        }
        return a !== n ? o + t.substring(a, n) : o
    }

    function u(e, t, n, a) {
        if (!(e instanceof Error)) throw e;
        if (!("undefined" == typeof window && t || a)) throw e.message += " on line " + n, e;
        try {
            a = a || i(168).readFileSync(t, "utf8")
        } catch (t) {
            u(e, null, n)
        }
        var r = 3, o = a.split("\n"), s = Math.max(n - r, 0), l = Math.min(o.length, n + r),
            r = o.slice(s, l).map(function (e, t) {
                var i = t + s + 1;
                return (i == n ? "  > " : "    ") + i + "| " + e
            }).join("\n");
        throw e.path = t, e.message = (t || "Pug") + ":" + n + "\n" + r + "\n\n" + e.message, e
    }

    var p = Object.prototype.hasOwnProperty;
    t.merge = n, t.classes = o, t.style = s, t.attr = l, t.attrs = c;
    var f = /["&<>]/;
    t.escape = d, t.rethrow = u
}, function (e, t, i) {
    i(101), i(104), i(115), i(119), e.exports = i(22).Promise
}, function (e, t, i) {
    "use strict";
    var n = i(42), a = {};
    a[i(0)("toStringTag")] = "z", a + "" != "[object z]" && i(18)(Object.prototype, "toString", function () {
        return "[object " + n(this) + "]"
    }, !0)
}, function (e, t, i) {
    e.exports = !i(20) && !i(67)(function () {
        return 7 != Object.defineProperty(i(44)("div"), "a", {
            get: function () {
                return 7
            }
        }).a
    })
}, function (e, t, i) {
    var n = i(19);
    e.exports = function (e, t) {
        if (!n(e)) return e;
        var i, a;
        if (t && "function" == typeof(i = e.toString) && !n(a = i.call(e))) return a;
        if ("function" == typeof(i = e.valueOf) && !n(a = i.call(e))) return a;
        if (!t && "function" == typeof(i = e.toString) && !n(a = i.call(e))) return a;
        throw TypeError("Can't convert object to primitive value")
    }
}, function (e, t, i) {
    "use strict";
    var n = i(105)(!0);
    i(69)(String, "String", function (e) {
        this._t = String(e), this._i = 0
    }, function () {
        var e, t = this._t, i = this._i;
        return i >= t.length ? {value: void 0, done: !0} : (e = n(t, i), this._i += e.length, {value: e, done: !1})
    })
}, function (e, t, i) {
    var n = i(45), a = i(46);
    e.exports = function (e) {
        return function (t, i) {
            var r, o, s = String(a(t)), l = n(i), c = s.length;
            return l < 0 || l >= c ? e ? "" : void 0 : (r = s.charCodeAt(l), r < 55296 || r > 56319 || l + 1 === c || (o = s.charCodeAt(l + 1)) < 56320 || o > 57343 ? e ? s.charAt(l) : r : e ? s.slice(l, l + 2) : o - 56320 + (r - 55296 << 10) + 65536)
        }
    }
}, function (e, t, i) {
    "use strict";
    var n = i(107), a = i(68), r = i(49), o = {};
    i(15)(o, i(0)("iterator"), function () {
        return this
    }), e.exports = function (e, t, i) {
        e.prototype = n(o, {next: a(1, i)}), r(e, t + " Iterator")
    }
}, function (e, t, i) {
    var n = i(8), a = i(108), r = i(74), o = i(48)("IE_PROTO"), s = function () {
    }, l = function () {
        var e, t = i(44)("iframe"), n = r.length;
        for (t.style.display = "none", i(75).appendChild(t), t.src = "javascript:", e = t.contentWindow.document, e.open(), e.write("<script>document.F=Object</script>"), e.close(), l = e.F; n--;) delete l.prototype[r[n]];
        return l()
    };
    e.exports = Object.create || function (e, t) {
        var i;
        return null !== e ? (s.prototype = n(e), i = new s, s.prototype = null, i[o] = e) : i = l(), void 0 === t ? i : a(i, t)
    }
}, function (e, t, i) {
    var n = i(29), a = i(8), r = i(72);
    e.exports = i(20) ? Object.defineProperties : function (e, t) {
        a(e);
        for (var i, o = r(t), s = o.length, l = 0; s > l;) n.f(e, i = o[l++], t[i]);
        return e
    }
}, function (e, t, i) {
    var n = i(21), a = i(47), r = i(111)(!1), o = i(48)("IE_PROTO");
    e.exports = function (e, t) {
        var i, s = a(e), l = 0, c = [];
        for (i in s) i != o && n(s, i) && c.push(i);
        for (; t.length > l;) n(s, i = t[l++]) && (~r(c, i) || c.push(i));
        return c
    }
}, function (e, t, i) {
    var n = i(28);
    e.exports = Object("z").propertyIsEnumerable(0) ? Object : function (e) {
        return "String" == n(e) ? e.split("") : Object(e)
    }
}, function (e, t, i) {
    var n = i(47), a = i(73), r = i(112);
    e.exports = function (e) {
        return function (t, i, o) {
            var s, l = n(t), c = a(l.length), d = r(o, c);
            if (e && i != i) {
                for (; c > d;) if ((s = l[d++]) != s) return !0
            } else for (; c > d; d++) if ((e || d in l) && l[d] === i) return e || d || 0;
            return !e && -1
        }
    }
}, function (e, t, i) {
    var n = i(45), a = Math.max, r = Math.min;
    e.exports = function (e, t) {
        return e = n(e), e < 0 ? a(e + t, 0) : r(e, t)
    }
}, function (e, t, i) {
    var n = i(21), a = i(114), r = i(48)("IE_PROTO"), o = Object.prototype;
    e.exports = Object.getPrototypeOf || function (e) {
        return e = a(e), n(e, r) ? e[r] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? o : null
    }
}, function (e, t, i) {
    var n = i(46);
    e.exports = function (e) {
        return Object(n(e))
    }
}, function (e, t, i) {
    for (var n = i(116), a = i(72), r = i(18), o = i(4), s = i(15), l = i(23), c = i(0), d = c("iterator"), u = c("toStringTag"), p = l.Array, f = {
        CSSRuleList: !0,
        CSSStyleDeclaration: !1,
        CSSValueList: !1,
        ClientRectList: !1,
        DOMRectList: !1,
        DOMStringList: !1,
        DOMTokenList: !0,
        DataTransferItemList: !1,
        FileList: !1,
        HTMLAllCollection: !1,
        HTMLCollection: !1,
        HTMLFormElement: !1,
        HTMLSelectElement: !1,
        MediaList: !0,
        MimeTypeArray: !1,
        NamedNodeMap: !1,
        NodeList: !0,
        PaintRequestList: !1,
        Plugin: !1,
        PluginArray: !1,
        SVGLengthList: !1,
        SVGNumberList: !1,
        SVGPathSegList: !1,
        SVGPointList: !1,
        SVGStringList: !1,
        SVGTransformList: !1,
        SourceBufferList: !1,
        StyleSheetList: !0,
        TextTrackCueList: !1,
        TextTrackList: !1,
        TouchList: !1
    }, h = a(f), g = 0; g < h.length; g++) {
        var m, v = h[g], y = f[v], b = o[v], _ = b && b.prototype;
        if (_ && (_[d] || s(_, d, p), _[u] || s(_, u, v), l[v] = p, y)) for (m in n) _[m] || r(_, m, n[m], !0)
    }
}, function (e, t, i) {
    "use strict";
    var n = i(117), a = i(118), r = i(23), o = i(47);
    e.exports = i(69)(Array, "Array", function (e, t) {
        this._t = o(e), this._i = 0, this._k = t
    }, function () {
        var e = this._t, t = this._k, i = this._i++;
        return !e || i >= e.length ? (this._t = void 0, a(1)) : "keys" == t ? a(0, i) : "values" == t ? a(0, e[i]) : a(0, [i, e[i]])
    }, "values"), r.Arguments = r.Array, n("keys"), n("values"), n("entries")
}, function (e, t, i) {
    var n = i(0)("unscopables"), a = Array.prototype;
    void 0 == a[n] && i(15)(a, n, {}), e.exports = function (e) {
        a[n][e] = !0
    }
}, function (e, t) {
    e.exports = function (e, t) {
        return {value: t, done: !!e}
    }
}, function (e, t, i) {
    "use strict";
    var n, a, r, o, s = i(70), l = i(4), c = i(30), d = i(42), u = i(71), p = i(19), f = i(31), h = i(120), g = i(121),
        m = i(125), v = i(76).set, y = i(127)(), b = i(77), _ = i(128), w = i(129), x = l.TypeError, C = l.process,
        k = l.Promise, S = "process" == d(C), T = function () {
        }, D = a = b.f, L = !!function () {
            try {
                var e = k.resolve(1), t = (e.constructor = {})[i(0)("species")] = function (e) {
                    e(T, T)
                };
                return (S || "function" == typeof PromiseRejectionEvent) && e.then(T) instanceof t
            } catch (e) {
            }
        }(), A = function (e) {
            var t;
            return !(!p(e) || "function" != typeof(t = e.then)) && t
        }, E = function (e, t) {
            if (!e._n) {
                e._n = !0;
                var i = e._c;
                y(function () {
                    for (var n = e._v, a = 1 == e._s, r = 0; i.length > r;) !function (t) {
                        var i, r, o = a ? t.ok : t.fail, s = t.resolve, l = t.reject, c = t.domain;
                        try {
                            o ? (a || (2 == e._h && F(e), e._h = 1), o === !0 ? i = n : (c && c.enter(), i = o(n), c && c.exit()), i === t.promise ? l(x("Promise-chain cycle")) : (r = A(i)) ? r.call(i, s, l) : s(i)) : l(n)
                        } catch (e) {
                            l(e)
                        }
                    }(i[r++]);
                    e._c = [], e._n = !1, t && !e._h && $(e)
                })
            }
        }, $ = function (e) {
            v.call(l, function () {
                var t, i, n, a = e._v, r = I(e);
                if (r && (t = _(function () {
                    S ? C.emit("unhandledRejection", a, e) : (i = l.onunhandledrejection) ? i({
                        promise: e,
                        reason: a
                    }) : (n = l.console) && n.error && n.error("Unhandled promise rejection", a)
                }), e._h = S || I(e) ? 2 : 1), e._a = void 0, r && t.e) throw t.v
            })
        }, I = function (e) {
            if (1 == e._h) return !1;
            for (var t, i = e._a || e._c, n = 0; i.length > n;) if (t = i[n++], t.fail || !I(t.promise)) return !1;
            return !0
        }, F = function (e) {
            v.call(l, function () {
                var t;
                S ? C.emit("rejectionHandled", e) : (t = l.onrejectionhandled) && t({promise: e, reason: e._v})
            })
        }, O = function (e) {
            var t = this;
            t._d || (t._d = !0, t = t._w || t, t._v = e, t._s = 2, t._a || (t._a = t._c.slice()), E(t, !0))
        }, M = function (e) {
            var t, i = this;
            if (!i._d) {
                i._d = !0, i = i._w || i;
                try {
                    if (i === e) throw x("Promise can't be resolved itself");
                    (t = A(e)) ? y(function () {
                        var n = {_w: i, _d: !1};
                        try {
                            t.call(e, c(M, n, 1), c(O, n, 1))
                        } catch (e) {
                            O.call(n, e)
                        }
                    }) : (i._v = e, i._s = 1, E(i, !1))
                } catch (e) {
                    O.call({_w: i, _d: !1}, e)
                }
            }
        };
    L || (k = function (e) {
        h(this, k, "Promise", "_h"), f(e), n.call(this);
        try {
            e(c(M, this, 1), c(O, this, 1))
        } catch (e) {
            O.call(this, e)
        }
    }, n = function (e) {
        this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1
    }, n.prototype = i(130)(k.prototype, {
        then: function (e, t) {
            var i = D(m(this, k));
            return i.ok = "function" != typeof e || e, i.fail = "function" == typeof t && t, i.domain = S ? C.domain : void 0, this._c.push(i), this._a && this._a.push(i), this._s && E(this, !1), i.promise
        }, catch: function (e) {
            return this.then(void 0, e)
        }
    }), r = function () {
        var e = new n;
        this.promise = e, this.resolve = c(M, e, 1), this.reject = c(O, e, 1)
    }, b.f = D = function (e) {
        return e === k || e === o ? new r(e) : a(e)
    }), u(u.G + u.W + u.F * !L, {Promise: k}), i(49)(k, "Promise"), i(131)("Promise"), o = i(22).Promise, u(u.S + u.F * !L, "Promise", {
        reject: function (e) {
            var t = D(this);
            return (0, t.reject)(e), t.promise
        }
    }), u(u.S + u.F * (s || !L), "Promise", {
        resolve: function (e) {
            return w(s && this === o ? k : this, e)
        }
    }), u(u.S + u.F * !(L && i(132)(function (e) {
        k.all(e).catch(T)
    })), "Promise", {
        all: function (e) {
            var t = this, i = D(t), n = i.resolve, a = i.reject, r = _(function () {
                var i = [], r = 0, o = 1;
                g(e, !1, function (e) {
                    var s = r++, l = !1;
                    i.push(void 0), o++, t.resolve(e).then(function (e) {
                        l || (l = !0, i[s] = e, --o || n(i))
                    }, a)
                }), --o || n(i)
            });
            return r.e && a(r.v), i.promise
        }, race: function (e) {
            var t = this, i = D(t), n = i.reject, a = _(function () {
                g(e, !1, function (e) {
                    t.resolve(e).then(i.resolve, n)
                })
            });
            return a.e && n(a.v), i.promise
        }
    })
}, function (e, t) {
    e.exports = function (e, t, i, n) {
        if (!(e instanceof t) || void 0 !== n && n in e) throw TypeError(i + ": incorrect invocation!");
        return e
    }
}, function (e, t, i) {
    var n = i(30), a = i(122), r = i(123), o = i(8), s = i(73), l = i(124), c = {}, d = {},
        t = e.exports = function (e, t, i, u, p) {
            var f, h, g, m, v = p ? function () {
                return e
            } : l(e), y = n(i, u, t ? 2 : 1), b = 0;
            if ("function" != typeof v) throw TypeError(e + " is not iterable!");
            if (r(v)) {
                for (f = s(e.length); f > b; b++) if ((m = t ? y(o(h = e[b])[0], h[1]) : y(e[b])) === c || m === d) return m
            } else for (g = v.call(e); !(h = g.next()).done;) if ((m = a(g, y, h.value, t)) === c || m === d) return m
        };
    t.BREAK = c, t.RETURN = d
}, function (e, t, i) {
    var n = i(8);
    e.exports = function (e, t, i, a) {
        try {
            return a ? t(n(i)[0], i[1]) : t(i)
        } catch (t) {
            var r = e.return;
            throw void 0 !== r && n(r.call(e)), t
        }
    }
}, function (e, t, i) {
    var n = i(23), a = i(0)("iterator"), r = Array.prototype;
    e.exports = function (e) {
        return void 0 !== e && (n.Array === e || r[a] === e)
    }
}, function (e, t, i) {
    var n = i(42), a = i(0)("iterator"), r = i(23);
    e.exports = i(22).getIteratorMethod = function (e) {
        if (void 0 != e) return e[a] || e["@@iterator"] || r[n(e)]
    }
}, function (e, t, i) {
    var n = i(8), a = i(31), r = i(0)("species");
    e.exports = function (e, t) {
        var i, o = n(e).constructor;
        return void 0 === o || void 0 == (i = n(o)[r]) ? t : a(i)
    }
}, function (e, t) {
    e.exports = function (e, t, i) {
        var n = void 0 === i;
        switch (t.length) {
            case 0:
                return n ? e() : e.call(i);
            case 1:
                return n ? e(t[0]) : e.call(i, t[0]);
            case 2:
                return n ? e(t[0], t[1]) : e.call(i, t[0], t[1]);
            case 3:
                return n ? e(t[0], t[1], t[2]) : e.call(i, t[0], t[1], t[2]);
            case 4:
                return n ? e(t[0], t[1], t[2], t[3]) : e.call(i, t[0], t[1], t[2], t[3])
        }
        return e.apply(i, t)
    }
}, function (e, t, i) {
    var n = i(4), a = i(76).set, r = n.MutationObserver || n.WebKitMutationObserver, o = n.process, s = n.Promise,
        l = "process" == i(28)(o);
    e.exports = function () {
        var e, t, i, c = function () {
            var n, a;
            for (l && (n = o.domain) && n.exit(); e;) {
                a = e.fn, e = e.next;
                try {
                    a()
                } catch (n) {
                    throw e ? i() : t = void 0, n
                }
            }
            t = void 0, n && n.enter()
        };
        if (l) i = function () {
            o.nextTick(c)
        }; else if (r) {
            var d = !0, u = document.createTextNode("");
            new r(c).observe(u, {characterData: !0}), i = function () {
                u.data = d = !d
            }
        } else if (s && s.resolve) {
            var p = s.resolve();
            i = function () {
                p.then(c)
            }
        } else i = function () {
            a.call(n, c)
        };
        return function (n) {
            var a = {fn: n, next: void 0};
            t && (t.next = a), e || (e = a, i()), t = a
        }
    }
}, function (e, t) {
    e.exports = function (e) {
        try {
            return {e: !1, v: e()}
        } catch (e) {
            return {e: !0, v: e}
        }
    }
}, function (e, t, i) {
    var n = i(8), a = i(19), r = i(77);
    e.exports = function (e, t) {
        if (n(e), a(t) && t.constructor === e) return t;
        var i = r.f(e);
        return (0, i.resolve)(t), i.promise
    }
}, function (e, t, i) {
    var n = i(18);
    e.exports = function (e, t, i) {
        for (var a in t) n(e, a, t[a], i);
        return e
    }
}, function (e, t, i) {
    "use strict";
    var n = i(4), a = i(29), r = i(20), o = i(0)("species");
    e.exports = function (e) {
        var t = n[e];
        r && t && !t[o] && a.f(t, o, {
            configurable: !0, get: function () {
                return this
            }
        })
    }
}, function (e, t, i) {
    var n = i(0)("iterator"), a = !1;
    try {
        var r = [7][n]();
        r.return = function () {
            a = !0
        }, Array.from(r, function () {
            throw 2
        })
    } catch (e) {
    }
    e.exports = function (e, t) {
        if (!t && !a) return !1;
        var i = !1;
        try {
            var r = [7], o = r[n]();
            o.next = function () {
                return {done: i = !0}
            }, r[n] = function () {
                return o
            }, e(r)
        } catch (e) {
        }
        return i
    }
}, function (e, t, i) {
    var n = i(50), a = i(51);
    e.exports = function (e) {
        return function (t, i) {
            var r, o, s = String(a(t)), l = n(i), c = s.length;
            return l < 0 || l >= c ? e ? "" : void 0 : (r = s.charCodeAt(l), r < 55296 || r > 56319 || l + 1 === c || (o = s.charCodeAt(l + 1)) < 56320 || o > 57343 ? e ? s.charAt(l) : r : e ? s.slice(l, l + 2) : o - 56320 + (r - 55296 << 10) + 65536)
        }
    }
}, function (e, t, i) {
    "use strict";
    var n = i(62), a = i(25), r = i(36), o = {};
    i(12)(o, i(5)("iterator"), function () {
        return this
    }), e.exports = function (e, t, i) {
        e.prototype = n(o, {next: a(1, i)}), r(e, t + " Iterator")
    }
}, function (e, t, i) {
    var n = i(6), a = i(9), r = i(32);
    e.exports = i(7) ? Object.defineProperties : function (e, t) {
        a(e);
        for (var i, o = r(t), s = o.length, l = 0; s > l;) n.f(e, i = o[l++], t[i]);
        return e
    }
}, function (e, t, i) {
    var n = i(14), a = i(61), r = i(137);
    e.exports = function (e) {
        return function (t, i, o) {
            var s, l = n(t), c = a(l.length), d = r(o, c);
            if (e && i != i) {
                for (; c > d;) if ((s = l[d++]) != s) return !0
            } else for (; c > d; d++) if ((e || d in l) && l[d] === i) return e || d || 0;
            return !e && -1
        }
    }
}, function (e, t, i) {
    var n = i(50), a = Math.max, r = Math.min;
    e.exports = function (e, t) {
        return e = n(e), e < 0 ? a(e + t, 0) : r(e, t)
    }
}, function (e, t, i) {
    "use strict";
    var n = i(139), a = i(140), r = i(26), o = i(14);
    e.exports = i(78)(Array, "Array", function (e, t) {
        this._t = o(e), this._i = 0, this._k = t
    }, function () {
        var e = this._t, t = this._k, i = this._i++;
        return !e || i >= e.length ? (this._t = void 0, a(1)) : "keys" == t ? a(0, i) : "values" == t ? a(0, e[i]) : a(0, [i, e[i]])
    }, "values"), r.Arguments = r.Array, n("keys"), n("values"), n("entries")
}, function (e, t) {
    e.exports = function () {
    }
}, function (e, t) {
    e.exports = function (e, t) {
        return {value: t, done: !!e}
    }
}, function (e, t, i) {
    var n = i(9);
    e.exports = function (e, t, i, a) {
        try {
            return a ? t(n(i)[0], i[1]) : t(i)
        } catch (t) {
            var r = e.return;
            throw void 0 !== r && n(r.call(e)), t
        }
    }
}, function (e, t, i) {
    var n = i(26), a = i(5)("iterator"), r = Array.prototype;
    e.exports = function (e) {
        return void 0 !== e && (n.Array === e || r[a] === e)
    }
}, function (e, t, i) {
    var n = i(94), a = i(5)("iterator"), r = i(26);
    e.exports = i(3).getIteratorMethod = function (e) {
        if (void 0 != e) return e[a] || e["@@iterator"] || r[n(e)]
    }
}, function (e, t, i) {
    var n = i(5)("iterator"), a = !1;
    try {
        var r = [7][n]();
        r.return = function () {
            a = !0
        }, Array.from(r, function () {
            throw 2
        })
    } catch (e) {
    }
    e.exports = function (e, t) {
        if (!t && !a) return !1;
        var i = !1;
        try {
            var r = [7], o = r[n]();
            o.next = function () {
                return {done: i = !0}
            }, r[n] = function () {
                return o
            }, e(r)
        } catch (e) {
        }
        return i
    }
}, function (e, t, i) {
    var n = i(3), a = n.JSON || (n.JSON = {stringify: JSON.stringify});
    e.exports = function (e) {
        return a.stringify.apply(a, arguments)
    }
}, function (e, t, i) {
    e.exports = {default: i(147), __esModule: !0}
}, function (e, t, i) {
    i(60), i(88), e.exports = i(56).f("iterator")
}, function (e, t, i) {
    e.exports = {default: i(149), __esModule: !0}
}, function (e, t, i) {
    i(150), i(86), i(155), i(156), e.exports = i(3).Symbol
}, function (e, t, i) {
    "use strict";
    var n = i(2), a = i(10), r = i(7), o = i(11), s = i(80), l = i(151).KEY, c = i(24), d = i(54), u = i(36), p = i(33),
        f = i(5), h = i(56), g = i(57), m = i(152), v = i(153), y = i(9), b = i(14), _ = i(52), w = i(25), x = i(62),
        C = i(154), k = i(90), S = i(6), T = i(32), D = k.f, L = S.f, A = C.f, E = n.Symbol, $ = n.JSON,
        I = $ && $.stringify, F = f("_hidden"), O = f("toPrimitive"), M = {}.propertyIsEnumerable,
        N = d("symbol-registry"), j = d("symbols"), P = d("op-symbols"), R = Object.prototype,
        B = "function" == typeof E, z = n.QObject, H = !z || !z.prototype || !z.prototype.findChild,
        W = r && c(function () {
            return 7 != x(L({}, "a", {
                get: function () {
                    return L(this, "a", {value: 7}).a
                }
            })).a
        }) ? function (e, t, i) {
            var n = D(R, t);
            n && delete R[t], L(e, t, i), n && e !== R && L(R, t, n)
        } : L, q = function (e) {
            var t = j[e] = x(E.prototype);
            return t._k = e, t
        }, V = B && "symbol" == typeof E.iterator ? function (e) {
            return "symbol" == typeof e
        } : function (e) {
            return e instanceof E
        }, U = function (e, t, i) {
            return e === R && U(P, t, i), y(e), t = _(t, !0), y(i), a(j, t) ? (i.enumerable ? (a(e, F) && e[F][t] && (e[F][t] = !1), i = x(i, {enumerable: w(0, !1)})) : (a(e, F) || L(e, F, w(1, {})), e[F][t] = !0), W(e, t, i)) : L(e, t, i)
        }, G = function (e, t) {
            y(e);
            for (var i, n = m(t = b(t)), a = 0, r = n.length; r > a;) U(e, i = n[a++], t[i]);
            return e
        }, J = function (e, t) {
            return void 0 === t ? x(e) : G(x(e), t)
        }, Y = function (e) {
            var t = M.call(this, e = _(e, !0));
            return !(this === R && a(j, e) && !a(P, e)) && (!(t || !a(this, e) || !a(j, e) || a(this, F) && this[F][e]) || t)
        }, X = function (e, t) {
            if (e = b(e), t = _(t, !0), e !== R || !a(j, t) || a(P, t)) {
                var i = D(e, t);
                return !i || !a(j, t) || a(e, F) && e[F][t] || (i.enumerable = !0), i
            }
        }, K = function (e) {
            for (var t, i = A(b(e)), n = [], r = 0; i.length > r;) a(j, t = i[r++]) || t == F || t == l || n.push(t);
            return n
        }, Q = function (e) {
            for (var t, i = e === R, n = A(i ? P : b(e)), r = [], o = 0; n.length > o;) !a(j, t = n[o++]) || i && !a(R, t) || r.push(j[t]);
            return r
        };
    B || (E = function () {
        if (this instanceof E) throw TypeError("Symbol is not a constructor!");
        var e = p(arguments.length > 0 ? arguments[0] : void 0), t = function (i) {
            this === R && t.call(P, i), a(this, F) && a(this[F], e) && (this[F][e] = !1), W(this, e, w(1, i))
        };
        return r && H && W(R, e, {configurable: !0, set: t}), q(e)
    }, s(E.prototype, "toString", function () {
        return this._k
    }), k.f = X, S.f = U, i(82).f = C.f = K, i(39).f = Y, i(63).f = Q, r && !i(35) && s(R, "propertyIsEnumerable", Y, !0), h.f = function (e) {
        return q(f(e))
    }), o(o.G + o.W + o.F * !B, {Symbol: E});
    for (var Z = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), ee = 0; Z.length > ee;) f(Z[ee++]);
    for (var te = T(f.store), ie = 0; te.length > ie;) g(te[ie++]);
    o(o.S + o.F * !B, "Symbol", {
        for: function (e) {
            return a(N, e += "") ? N[e] : N[e] = E(e)
        }, keyFor: function (e) {
            if (!V(e)) throw TypeError(e + " is not a symbol!");
            for (var t in N) if (N[t] === e) return t
        }, useSetter: function () {
            H = !0
        }, useSimple: function () {
            H = !1
        }
    }), o(o.S + o.F * !B, "Object", {
        create: J,
        defineProperty: U,
        defineProperties: G,
        getOwnPropertyDescriptor: X,
        getOwnPropertyNames: K,
        getOwnPropertySymbols: Q
    }), $ && o(o.S + o.F * (!B || c(function () {
        var e = E();
        return "[null]" != I([e]) || "{}" != I({a: e}) || "{}" != I(Object(e))
    })), "JSON", {
        stringify: function (e) {
            if (void 0 !== e && !V(e)) {
                for (var t, i, n = [e], a = 1; arguments.length > a;) n.push(arguments[a++]);
                return t = n[1], "function" == typeof t && (i = t), !i && v(t) || (t = function (e, t) {
                    if (i && (t = i.call(this, e, t)), !V(t)) return t
                }), n[1] = t, I.apply($, n)
            }
        }
    }), E.prototype[O] || i(12)(E.prototype, O, E.prototype.valueOf), u(E, "Symbol"), u(Math, "Math", !0), u(n.JSON, "JSON", !0)
}, function (e, t, i) {
    var n = i(33)("meta"), a = i(16), r = i(10), o = i(6).f, s = 0, l = Object.isExtensible || function () {
        return !0
    }, c = !i(24)(function () {
        return l(Object.preventExtensions({}))
    }), d = function (e) {
        o(e, n, {value: {i: "O" + ++s, w: {}}})
    }, u = function (e, t) {
        if (!a(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
        if (!r(e, n)) {
            if (!l(e)) return "F";
            if (!t) return "E";
            d(e)
        }
        return e[n].i
    }, p = function (e, t) {
        if (!r(e, n)) {
            if (!l(e)) return !0;
            if (!t) return !1;
            d(e)
        }
        return e[n].w
    }, f = function (e) {
        return c && h.NEED && l(e) && !r(e, n) && d(e), e
    }, h = e.exports = {KEY: n, NEED: !1, fastKey: u, getWeak: p, onFreeze: f}
}, function (e, t, i) {
    var n = i(32), a = i(63), r = i(39);
    e.exports = function (e) {
        var t = n(e), i = a.f;
        if (i) for (var o, s = i(e), l = r.f, c = 0; s.length > c;) l.call(e, o = s[c++]) && t.push(o);
        return t
    }
}, function (e, t, i) {
    var n = i(27);
    e.exports = Array.isArray || function (e) {
        return "Array" == n(e)
    }
}, function (e, t, i) {
    var n = i(14), a = i(82).f, r = {}.toString,
        o = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],
        s = function (e) {
            try {
                return a(e)
            } catch (e) {
                return o.slice()
            }
        };
    e.exports.f = function (e) {
        return o && "[object Window]" == r.call(e) ? s(e) : a(n(e))
    }
}, function (e, t, i) {
    i(57)("asyncIterator")
}, function (e, t, i) {
    i(57)("observable")
}, function (e, t, i) {
    var n = i(11), a = i(3), r = i(24);
    e.exports = function (e, t) {
        var i = (a.Object || {})[e] || Object[e], o = {};
        o[e] = t(i), n(n.S + n.F * r(function () {
            i(1)
        }), "Object", o)
    }
}, , function (e, t, i) {
    i(160);
    var n = i(3).Object;
    e.exports = function (e, t, i) {
        return n.defineProperty(e, t, i)
    }
}, function (e, t, i) {
    var n = i(11);
    n(n.S + n.F * !i(7), "Object", {defineProperty: i(6).f})
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.common").directive("selectSearchList", ["$rootScope", "$timeout", "$jsTipTranslate", "chooseAdminService", function (e, t, i, n) {
            return {
                restrict: "A",
                templateUrl: "/static/common/tpl/selectSearchList.html",
                replace: !0,
                scope: {
                    selectData: "=",
                    searchList: "=",
                    noSearch: "=",
                    defaultPlaceHolder: "=",
                    valChange: "&",
                    selectClick: "&",
                    showListLoading: "=",
                    workSheetFlag: "=",
                    selectDataObj: "=",
                    ordinaryUser: "="
                },
                link: function (e, a, r) {
                    function o() {
                        var t = e.viewData.modeType;
                        switch (e.viewData.originalList = angular.copy(e.searchList), e.viewData.searchList = angular.copy(e.searchList), t) {
                            case"tableFilter":
                            case"ruleFilterField":
                                c = "fid", d = "name";
                                break;
                            case"joinSelect":
                                c = "fid", d = "original_nick_name";
                                break;
                            case"mlModelSelector":
                                c = "ml_id", d = "name";
                                break;
                            case"queryAccount":
                                c = "userid", d = "name";
                                break;
                            case"projManager":
                            case"dashManager":
                            case"queryManager":
                                c = "userid", d = "name";
                                break;
                            case"opLog":
                                c = "id", d = "name";
                                break;
                            case"schemeList":
                                c = "scheme_id", d = "name";
                                break;
                            case"ruleCreator":
                                c = "user_id", d = "creator";
                                break;
                            case"ruleFilterTb":
                                c = "tb_id", d = "name";
                                break;
                            case"ruleFilterOpt":
                            case"warnFilterOpt":
                                c = "value", d = "name";
                                break;
                            case"paramType":
                                c = "key", d = "name";
                                break;
                            case"warnFilterField":
                                c = "fidUniqId", d = "name";
                                break;
                            default:
                                c = "key", d = "value"
                        }
                        e.viewData.displayKey = d
                    }

                    function s(e, t) {
                        return e.toLowerCase().indexOf(t.toLowerCase()) >= 0
                    }

                    var l = $.cookie("locale") || "zh", c = "", d = "", u = "en" == l ? "Select" : "请选择";
                    !function () {
                        e.viewData = {
                            defaultPlaceHolder: e.defaultPlaceHolder || u,
                            selectedText: "",
                            selectedVal: "",
                            searchList: [],
                            originalList: [],
                            searchQuery: "",
                            showList: !1,
                            displayKey: "",
                            modeType: r.modeType,
                            queryBoxShow: !e.noSearch && "false" != r.queryBoxShow,
                            hitQueryNum: 0,
                            showListLoading: !1,
                            requestListFlag: !!r.requestList,
                            mode: r.mode,
                            needAsync: r.needAsync,
                            position: r.position,
                            dataSourcePlaceHolder: "全部数据源",
                            dataSourceList: [],
                            showDataSource: !1,
                            dataTypePlaceHolder: "全部工作表类型",
                            dataTypeList: [],
                            showDataType: !1
                        }, e.viewData.dataSourceList = [{dataSource: "全部数据来源", num: 0}, {
                            dataSource: "非授权数据",
                            num: 1
                        }, {dataSource: "授权数据", num: 2}], e.viewData.dataTypeList = [{
                            dataType: "全部工作表类型",
                            type: 0
                        }, {dataType: "基础表", type: 1}, {dataType: "合表", type: 2}, {
                            dataType: "excel、csv上传",
                            type: 3
                        }], e.selectDataObj && e.workSheetFlag && (e.selectDataObj = {
                            user_id: "all",
                            data_source: 0,
                            data_type: 0
                        }), e.workSheetFlag ? e.viewData.ordinaryUserFlag = !!e.ordinaryUser : e.viewData.ordinaryUserFlag = !0
                    }(), e.viewData.requestListFlag ? o() : e.$watch(function () {
                        return e.searchList
                    }, function (e) {
                        e && o()
                    }), e.$watch(function () {
                        return e.selectData
                    }, function (t) {
                        if (e.viewData.selectedVal = "", e.viewData.selectedText = "", e.viewData.needAsync && 0 == e.viewData.searchList.length) return void(e.viewData.selectedText = t);
                        for (var i = e.viewData.searchList || [], n = 0, a = i.length; n < a; n++) switch (e.viewData.modeType) {
                            case"tableFilter":
                                e.selectData.field && e.selectData.field.fid == i[n][c] && (e.viewData.selectedVal = i[n][c], e.viewData.selectedText = i[n][d]);
                                break;
                            case"mlModelSelector":
                                e.selectData == i[n][c] && (e.viewData.selectedVal = i[n][c], e.viewData.selectedText = i[n][d], e.viewData.iconClass = i[n].iconClass, e.viewData.iconId = i[n].iconId);
                                break;
                            default:
                                e.selectData == i[n][c] && (e.viewData.selectedVal = i[n][c], e.viewData.selectedText = i[n][d])
                        }
                    }), e.toggleList = function (i) {
                        function a() {
                            e.viewData.searchQuery = "", angular.forEach(e.viewData.searchList, function (e) {
                                e.selectHit = !0
                            }), e.viewData.hitQueryNum = e.viewData.searchList.length
                        }

                        if ("disabled" != e.viewData.mode) {
                            var r = angular.element(i.target);
                            r = r.hasClass("bdp-icon") ? r.parents(".select-search-value:first") : r;
                            var o = r.parents(".select-search-value:first");
                            o = 0 == o.length ? r : o;
                            var s = r.offset(), l = o.next(".search-list-box");
                            if (e.viewData.showList = !e.viewData.showList, "relative" !== e.viewData.position) if (e.viewData.showList) {
                                var c = s.top + r.closest(".select-search-list-wrap").height();
                                l.css({position: "fixed", top: c, left: s.left, width: o.width() + 16}), t(function () {
                                    var e = document.documentElement.clientHeight || document.body.clientHeight,
                                        t = l[0].getBoundingClientRect().height;
                                    t + s.top > e && l.css("top", s.top - t)
                                })
                            } else l.css({top: "-9999px", left: "-9999px"});
                            var d = e.viewData.modeType;
                            if (e.viewData.showList && e.viewData.requestListFlag && ["projManager", "dashManager", "queryManager"].indexOf(d) >= 0) if (n.getUserListCache()) {
                                var u = n.getUserListCache();
                                e.viewData.originalList = angular.copy(u), e.viewData.searchList = u, e.viewData.showListLoading = !1
                            } else {
                                e.viewData.showListLoading = !0;
                                var p = ["dashManager", "queryManager"].indexOf(d) >= 0;
                                n.getUserList(p).then(function (t) {
                                    e.viewData.originalList = t.originWholeList, e.viewData.searchList = t.wholeList, a()
                                }).finally(function () {
                                    e.viewData.showListLoading = !1
                                })
                            } else a();
                            e.selectClick && e.selectClick()
                        }
                    }, e.doQuery = function () {
                        var t = 0;
                        angular.forEach(e.viewData.searchList, function (i) {
                            e.viewData.searchQuery ? (i.selectHit = s(i[d], e.viewData.searchQuery), i.selectHit && t++) : (i.selectHit = !0, t++)
                        }), e.viewData.hitQueryNum = t
                    }, e.formatSelectDataByType = function (t) {
                        switch (e.viewData.modeType) {
                            case"tableFilter":
                                e.selectData.field ? e.selectData.field.fid = t : e.selectData.field = {fid: t}, d = "name";
                                break;
                            default:
                                e.selectData = t
                        }
                    }, e.selectItem = function (i) {
                        e.viewData.selectedVal = i[c], e.viewData.selectedText = i[d], e.viewData.iconClass = i.iconClass, e.viewData.iconId = i.iconId, e.viewData.showList = !1, e.workSheetFlag ? e.selectDataObj.user_id = e.viewData.selectedVal : e.formatSelectDataByType(e.viewData.selectedVal), e.valChange && !e.workSheetFlag && t(function () {
                            e.valChange({field: e.selectData})
                        }, 0)
                    }, e.$on("broadcastHideSelectList", function (i, n) {
                        n && t(function () {
                            e.viewData.showList = !1
                        }, 0)
                    }), e.$on("broadcastReloadSelectList", function (i, n) {
                        n && t(function () {
                            e.viewData.originalList = angular.copy(n), e.viewData.searchList = angular.copy(n)
                        }, 0)
                    }), e.dataSourceSelect = function (t) {
                        e.viewData.dataSourcePlaceHolder = t.dataSource, e.viewData.showDataSource = !1, e.selectDataObj.data_source = t.num
                    }, e.dataTypeSelect = function (t) {
                        e.viewData.dataTypePlaceHolder = t.dataType, e.viewData.showDataType = !1, e.selectDataObj.data_type = t.type
                    }, e.findWorkSheet = function () {
                        e.valChange()
                    }, i(["wb.selectField"], e)
                }
            }
        }])
    }()
}, function (e, t, i) {
    i(163), e.exports = i(3).Object.keys
}, function (e, t, i) {
    var n = i(59), a = i(32);
    i(157)("keys", function () {
        return function (e) {
            return a(n(e))
        }
    })
}, function (e, t, i) {
    e.exports = i(165)
}, function (e, t, i) {
    var n, a;
    !function (r, o) {
        n = r, void 0 !== (a = "function" == typeof n ? n.call(t, i, t, e) : n) && (e.exports = a)
    }(function () {
        function e(e, t) {
            var i = typeof e[t];
            return i == _ || !(i != b || !e[t]) || "unknown" == i
        }

        function t(e, t) {
            return !(typeof e[t] != b || !e[t])
        }

        function i(e, t) {
            return typeof e[t] != w
        }

        function n(e) {
            return function (t, i) {
                for (var n = i.length; n--;) if (!e(t, i[n])) return !1;
                return !0
            }
        }

        function a(e) {
            return e && T(e, S) && L(e, k)
        }

        function r(e) {
            return t(e, "body") ? e.body : e.getElementsByTagName("body")[0]
        }

        function o(t) {
            typeof console != w && e(console, "log") && console.log(t)
        }

        function s(e, t) {
            $ && t ? alert(e) : o(e)
        }

        function l(e) {
            F.initialized = !0, F.supported = !1, s("Rangy is not supported in this environment. Reason: " + e, F.config.alertOnFail)
        }

        function c(e) {
            s("Rangy warning: " + e, F.config.alertOnWarn)
        }

        function d(e) {
            return e.message || e.description || String(e)
        }

        function u() {
            if ($ && !F.initialized) {
                var t, i = !1, n = !1;
                e(document, "createRange") && (t = document.createRange(), T(t, C) && L(t, x) && (i = !0));
                var s = r(document);
                if (!s || "body" != s.nodeName.toLowerCase()) return void l("No body element found");
                if (s && e(s, "createTextRange") && (t = s.createTextRange(), a(t) && (n = !0)), !i && !n) return void l("Neither Range nor TextRange are available");
                F.initialized = !0, F.features = {implementsDomRange: i, implementsTextRange: n}
                ;var c, u;
                for (var p in E) (c = E[p]) instanceof g && c.init(c, F);
                for (var f = 0, h = N.length; f < h; ++f) try {
                    N[f](F)
                } catch (e) {
                    u = "Rangy init listener threw an exception. Continuing. Detail: " + d(e), o(u)
                }
            }
        }

        function p(e, t, i) {
            i && (e += " in module " + i.name), F.warn("DEPRECATED: " + e + " is deprecated. Please use " + t + " instead.")
        }

        function f(e, t, i, n) {
            e[t] = function () {
                return p(t, i, n), e[i].apply(e, I.toArray(arguments))
            }
        }

        function h(e) {
            e = e || window, u();
            for (var t = 0, i = j.length; t < i; ++t) j[t](e)
        }

        function g(e, t, i) {
            this.name = e, this.dependencies = t, this.initialized = !1, this.supported = !1, this.initializer = i
        }

        function m(e, t, i) {
            var n = new g(e, t, function (t) {
                if (!t.initialized) {
                    t.initialized = !0;
                    try {
                        i(F, t), t.supported = !0
                    } catch (t) {
                        var n = "Module '" + e + "' failed to load: " + d(t);
                        o(n), t.stack && o(t.stack)
                    }
                }
            });
            return E[e] = n, n
        }

        function v() {
        }

        function y() {
        }

        var b = "object", _ = "function", w = "undefined",
            x = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed", "commonAncestorContainer"],
            C = ["setStart", "setStartBefore", "setStartAfter", "setEnd", "setEndBefore", "setEndAfter", "collapse", "selectNode", "selectNodeContents", "compareBoundaryPoints", "deleteContents", "extractContents", "cloneContents", "insertNode", "surroundContents", "cloneRange", "toString", "detach"],
            k = ["boundingHeight", "boundingLeft", "boundingTop", "boundingWidth", "htmlText", "text"],
            S = ["collapse", "compareEndPoints", "duplicate", "moveToElementText", "parentElement", "select", "setEndPoint", "getBoundingClientRect"],
            T = n(e), D = n(t), L = n(i), A = [].forEach ? function (e, t) {
                e.forEach(t)
            } : function (e, t) {
                for (var i = 0, n = e.length; i < n; ++i) t(e[i], i)
            }, E = {}, $ = typeof window != w && typeof document != w, I = {
                isHostMethod: e,
                isHostObject: t,
                isHostProperty: i,
                areHostMethods: T,
                areHostObjects: D,
                areHostProperties: L,
                isTextRange: a,
                getBody: r,
                forEach: A
            }, F = {
                version: "1.3.0",
                initialized: !1,
                isBrowser: $,
                supported: !0,
                util: I,
                features: {},
                modules: E,
                config: {
                    alertOnFail: !1,
                    alertOnWarn: !1,
                    preferTextRange: !1,
                    autoInitialize: typeof rangyAutoInitialize == w || rangyAutoInitialize
                }
            };
        F.fail = l, F.warn = c;
        var O;
        !{}.hasOwnProperty ? l("hasOwnProperty not supported") : (I.extend = O = function (e, t, i) {
            var n, a;
            for (var r in t) t.hasOwnProperty(r) && (n = e[r], a = t[r], i && null !== n && "object" == typeof n && null !== a && "object" == typeof a && O(n, a, !0), e[r] = a);
            return t.hasOwnProperty("toString") && (e.toString = t.toString), e
        }, I.createOptions = function (e, t) {
            var i = {};
            return O(i, t), e && O(i, e), i
        }), $ || l("Rangy can only run in a browser"), function () {
            var e;
            if ($) {
                var t = document.createElement("div");
                t.appendChild(document.createElement("span"));
                var i = [].slice;
                try {
                    1 == i.call(t.childNodes, 0)[0].nodeType && (e = function (e) {
                        return i.call(e, 0)
                    })
                } catch (e) {
                }
            }
            e || (e = function (e) {
                for (var t = [], i = 0, n = e.length; i < n; ++i) t[i] = e[i];
                return t
            }), I.toArray = e
        }();
        var M;
        $ && (e(document, "addEventListener") ? M = function (e, t, i) {
            e.addEventListener(t, i, !1)
        } : e(document, "attachEvent") ? M = function (e, t, i) {
            e.attachEvent("on" + t, i)
        } : l("Document does not have required addEventListener or attachEvent method"), I.addListener = M);
        var N = [];
        I.deprecationNotice = p, I.createAliasForDeprecatedMethod = f, F.init = u, F.addInitListener = function (e) {
            F.initialized ? e(F) : N.push(e)
        };
        var j = [];
        F.addShimListener = function (e) {
            j.push(e)
        }, $ && (F.shim = F.createMissingNativeApi = h, f(F, "createMissingNativeApi", "shim")), g.prototype = {
            init: function () {
                for (var e, t, i = this.dependencies || [], n = 0, a = i.length; n < a; ++n) {
                    if (t = i[n], !((e = E[t]) && e instanceof g)) throw new Error("required module '" + t + "' not found");
                    if (e.init(), !e.supported) throw new Error("required module '" + t + "' not supported")
                }
                this.initializer(this)
            }, fail: function (e) {
                throw this.initialized = !0, this.supported = !1, new Error(e)
            }, warn: function (e) {
                F.warn("Module " + this.name + ": " + e)
            }, deprecationNotice: function (e, t) {
                F.warn("DEPRECATED: " + e + " in module " + this.name + " is deprecated. Please use " + t + " instead")
            }, createError: function (e) {
                return new Error("Error in Rangy " + this.name + " module: " + e)
            }
        }, F.createModule = function (e) {
            var t, i;
            2 == arguments.length ? (t = arguments[1], i = []) : (t = arguments[2], i = arguments[1]);
            var n = m(e, i, t);
            F.initialized && F.supported && n.init()
        }, F.createCoreModule = function (e, t, i) {
            m(e, t, i)
        }, F.RangePrototype = v, F.rangePrototype = new v, F.selectionPrototype = new y, F.createCoreModule("DomUtil", [], function (e, t) {
            function i(e) {
                var t;
                return typeof e.namespaceURI == $ || null === (t = e.namespaceURI) || "http://www.w3.org/1999/xhtml" == t
            }

            function n(e) {
                var t = e.parentNode;
                return 1 == t.nodeType ? t : null
            }

            function a(e) {
                for (var t = 0; e = e.previousSibling;) ++t;
                return t
            }

            function r(e) {
                switch (e.nodeType) {
                    case 7:
                    case 10:
                        return 0;
                    case 3:
                    case 8:
                        return e.length;
                    default:
                        return e.childNodes.length
                }
            }

            function o(e, t) {
                var i, n = [];
                for (i = e; i; i = i.parentNode) n.push(i);
                for (i = t; i; i = i.parentNode) if (N(n, i)) return i;
                return null
            }

            function s(e, t, i) {
                for (var n = i ? t : t.parentNode; n;) {
                    if (n === e) return !0;
                    n = n.parentNode
                }
                return !1
            }

            function l(e, t) {
                return s(e, t, !0)
            }

            function c(e, t, i) {
                for (var n, a = i ? e : e.parentNode; a;) {
                    if ((n = a.parentNode) === t) return a;
                    a = n
                }
                return null
            }

            function d(e) {
                var t = e.nodeType;
                return 3 == t || 4 == t || 8 == t
            }

            function u(e) {
                if (!e) return !1;
                var t = e.nodeType;
                return 3 == t || 8 == t
            }

            function p(e, t) {
                var i = t.nextSibling, n = t.parentNode;
                return i ? n.insertBefore(e, i) : n.appendChild(e), e
            }

            function f(e, t, i) {
                var n = e.cloneNode(!1);
                if (n.deleteData(0, t), e.deleteData(t, e.length - t), p(n, e), i) for (var r, o = 0; r = i[o++];) r.node == e && r.offset > t ? (r.node = n, r.offset -= t) : r.node == e.parentNode && r.offset > a(e) && ++r.offset;
                return n
            }

            function h(e) {
                if (9 == e.nodeType) return e;
                if (typeof e.ownerDocument != $) return e.ownerDocument;
                if (typeof e.document != $) return e.document;
                if (e.parentNode) return h(e.parentNode);
                throw t.createError("getDocument: no document found for node")
            }

            function g(e) {
                var i = h(e);
                if (typeof i.defaultView != $) return i.defaultView;
                if (typeof i.parentWindow != $) return i.parentWindow;
                throw t.createError("Cannot get a window object for node")
            }

            function m(e) {
                if (typeof e.contentDocument != $) return e.contentDocument;
                if (typeof e.contentWindow != $) return e.contentWindow.document;
                throw t.createError("getIframeDocument: No Document object found for iframe element")
            }

            function v(e) {
                if (typeof e.contentWindow != $) return e.contentWindow;
                if (typeof e.contentDocument != $) return e.contentDocument.defaultView;
                throw t.createError("getIframeWindow: No Window object found for iframe element")
            }

            function y(e) {
                return e && I.isHostMethod(e, "setTimeout") && I.isHostObject(e, "document")
            }

            function b(e, t, i) {
                var n;
                if (e ? I.isHostProperty(e, "nodeType") ? n = 1 == e.nodeType && "iframe" == e.tagName.toLowerCase() ? m(e) : h(e) : y(e) && (n = e.document) : n = document, !n) throw t.createError(i + "(): Parameter must be a Window object or DOM node");
                return n
            }

            function _(e) {
                for (var t; t = e.parentNode;) e = t;
                return e
            }

            function w(e, i, n, r) {
                var s, l, d, u, p;
                if (e == n) return i === r ? 0 : i < r ? -1 : 1;
                if (s = c(n, e, !0)) return i <= a(s) ? -1 : 1;
                if (s = c(e, n, !0)) return a(s) < r ? -1 : 1;
                if (!(l = o(e, n))) throw new Error("comparePoints error: nodes have no common ancestor");
                if (d = e === l ? l : c(e, l, !0), u = n === l ? l : c(n, l, !0), d === u) throw t.createError("comparePoints got to case 4 and childA and childB are the same!");
                for (p = l.firstChild; p;) {
                    if (p === d) return -1;
                    if (p === u) return 1;
                    p = p.nextSibling
                }
            }

            function x(e) {
                try {
                    return e.parentNode, !1
                } catch (e) {
                    return !0
                }
            }

            function C(e) {
                if (!e) return "[No node]";
                if (j && x(e)) return "[Broken node]";
                if (d(e)) return '"' + e.data + '"';
                if (1 == e.nodeType) {
                    var t = e.id ? ' id="' + e.id + '"' : "";
                    return "<" + e.nodeName + t + ">[index:" + a(e) + ",length:" + e.childNodes.length + "][" + (e.innerHTML || "[innerHTML not supported]").slice(0, 25) + "]"
                }
                return e.nodeName
            }

            function k(e) {
                for (var t, i = h(e).createDocumentFragment(); t = e.firstChild;) i.appendChild(t);
                return i
            }

            function S(e, t, i) {
                var n = F(e), a = e.createElement("div");
                a.contentEditable = "" + !!i, t && (a.innerHTML = t);
                var r = n.firstChild;
                return r ? n.insertBefore(a, r) : n.appendChild(a), a
            }

            function T(e) {
                return e.parentNode.removeChild(e)
            }

            function D(e) {
                this.root = e, this._next = e
            }

            function L(e) {
                return new D(e)
            }

            function A(e, t) {
                this.node = e, this.offset = t
            }

            function E(e) {
                this.code = this[e], this.codeName = e, this.message = "DOMException: " + this.codeName
            }

            var $ = "undefined", I = e.util, F = I.getBody;
            I.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"]) || t.fail("document missing a Node creation method"), I.isHostMethod(document, "getElementsByTagName") || t.fail("document missing getElementsByTagName method");
            var O = document.createElement("div");
            I.areHostMethods(O, ["insertBefore", "appendChild", "cloneNode"] || !I.areHostObjects(O, ["previousSibling", "nextSibling", "childNodes", "parentNode"])) || t.fail("Incomplete Element implementation"), I.isHostProperty(O, "innerHTML") || t.fail("Element is missing innerHTML property");
            var M = document.createTextNode("test");
            I.areHostMethods(M, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"] || !I.areHostObjects(O, ["previousSibling", "nextSibling", "childNodes", "parentNode"]) || !I.areHostProperties(M, ["data"])) || t.fail("Incomplete Text Node implementation");
            var N = function (e, t) {
                for (var i = e.length; i--;) if (e[i] === t) return !0;
                return !1
            }, j = !1;
            !function () {
                var t = document.createElement("b");
                t.innerHTML = "1";
                var i = t.firstChild;
                t.innerHTML = "<br />", j = x(i), e.features.crashyTextNodes = j
            }();
            var P;
            typeof window.getComputedStyle != $ ? P = function (e, t) {
                return g(e).getComputedStyle(e, null)[t]
            } : typeof document.documentElement.currentStyle != $ ? P = function (e, t) {
                return e.currentStyle ? e.currentStyle[t] : ""
            } : t.fail("No means of obtaining computed style properties found"), D.prototype = {
                _current: null,
                hasNext: function () {
                    return !!this._next
                },
                next: function () {
                    var e, t, i = this._current = this._next;
                    if (this._current) if (e = i.firstChild) this._next = e; else {
                        for (t = null; i !== this.root && !(t = i.nextSibling);) i = i.parentNode;
                        this._next = t
                    }
                    return this._current
                },
                detach: function () {
                    this._current = this._next = this.root = null
                }
            }, A.prototype = {
                equals: function (e) {
                    return !!e && this.node === e.node && this.offset == e.offset
                }, inspect: function () {
                    return "[DomPosition(" + C(this.node) + ":" + this.offset + ")]"
                }, toString: function () {
                    return this.inspect()
                }
            }, E.prototype = {
                INDEX_SIZE_ERR: 1,
                HIERARCHY_REQUEST_ERR: 3,
                WRONG_DOCUMENT_ERR: 4,
                NO_MODIFICATION_ALLOWED_ERR: 7,
                NOT_FOUND_ERR: 8,
                NOT_SUPPORTED_ERR: 9,
                INVALID_STATE_ERR: 11,
                INVALID_NODE_TYPE_ERR: 24
            }, E.prototype.toString = function () {
                return this.message
            }, e.dom = {
                arrayContains: N,
                isHtmlNamespace: i,
                parentElement: n,
                getNodeIndex: a,
                getNodeLength: r,
                getCommonAncestor: o,
                isAncestorOf: s,
                isOrIsAncestorOf: l,
                getClosestAncestorIn: c,
                isCharacterDataNode: d,
                isTextOrCommentNode: u,
                insertAfter: p,
                splitDataNode: f,
                getDocument: h,
                getWindow: g,
                getIframeWindow: v,
                getIframeDocument: m,
                getBody: F,
                isWindow: y,
                getContentDocument: b,
                getRootContainer: _,
                comparePoints: w,
                isBrokenNode: x,
                inspectNode: C,
                getComputedStyleProperty: P,
                createTestElement: S,
                removeNode: T,
                fragmentFromNodeChildren: k,
                createIterator: L,
                DomPosition: A
            }, e.DOMException = E
        }), F.createCoreModule("DomRange", ["DomUtil"], function (e, t) {
            function i(e, t) {
                return 3 != e.nodeType && (z(e, t.startContainer) || z(e, t.endContainer))
            }

            function n(e) {
                return e.document || H(e.startContainer)
            }

            function a(e) {
                return J(e.startContainer)
            }

            function r(e) {
                return new j(e.parentNode, B(e))
            }

            function o(e) {
                return new j(e.parentNode, B(e) + 1)
            }

            function s(e, t, i) {
                var n = 11 == e.nodeType ? e.firstChild : e;
                return R(t) ? i == t.length ? M.insertAfter(e, t) : t.parentNode.insertBefore(e, 0 == i ? t : q(t, i)) : i >= t.childNodes.length ? t.appendChild(e) : t.insertBefore(e, t.childNodes[i]), n
            }

            function l(e, t, i) {
                if (S(e), S(t), n(t) != n(e)) throw new P("WRONG_DOCUMENT_ERR");
                var a = W(e.startContainer, e.startOffset, t.endContainer, t.endOffset),
                    r = W(e.endContainer, e.endOffset, t.startContainer, t.startOffset);
                return i ? a <= 0 && r >= 0 : a < 0 && r > 0
            }

            function c(e) {
                for (var t, i, a, r = n(e.range).createDocumentFragment(); i = e.next();) {
                    if (t = e.isPartiallySelectedSubtree(), i = i.cloneNode(!t), t && (a = e.getSubtreeIterator(), i.appendChild(c(a)), a.detach()), 10 == i.nodeType) throw new P("HIERARCHY_REQUEST_ERR");
                    r.appendChild(i)
                }
                return r
            }

            function d(e, t, i) {
                var n, a;
                i = i || {stop: !1};
                for (var r, o; r = e.next();) if (e.isPartiallySelectedSubtree()) {
                    if (t(r) === !1) return void(i.stop = !0);
                    if (o = e.getSubtreeIterator(), d(o, t, i), o.detach(), i.stop) return
                } else for (n = M.createIterator(r); a = n.next();) if (t(a) === !1) return void(i.stop = !0)
            }

            function u(e) {
                for (var t; e.next();) e.isPartiallySelectedSubtree() ? (t = e.getSubtreeIterator(), u(t), t.detach()) : e.remove()
            }

            function p(e) {
                for (var t, i, a = n(e.range).createDocumentFragment(); t = e.next();) {
                    if (e.isPartiallySelectedSubtree() ? (t = t.cloneNode(!1), i = e.getSubtreeIterator(), t.appendChild(p(i)), i.detach()) : e.remove(), 10 == t.nodeType) throw new P("HIERARCHY_REQUEST_ERR");
                    a.appendChild(t)
                }
                return a
            }

            function f(e, t, i) {
                var n, a = !(!t || !t.length), r = !!i;
                a && (n = new RegExp("^(" + t.join("|") + ")$"));
                var o = [];
                return d(new g(e, !1), function (t) {
                    if ((!a || n.test(t.nodeType)) && (!r || i(t))) {
                        var s = e.startContainer;
                        if (t != s || !R(s) || e.startOffset != s.length) {
                            var l = e.endContainer;
                            t == l && R(l) && 0 == e.endOffset || o.push(t)
                        }
                    }
                }), o
            }

            function h(e) {
                return "[" + (void 0 === e.getName ? "Range" : e.getName()) + "(" + M.inspectNode(e.startContainer) + ":" + e.startOffset + ", " + M.inspectNode(e.endContainer) + ":" + e.endOffset + ")]"
            }

            function g(e, t) {
                if (this.range = e, this.clonePartiallySelectedTextNodes = t, !e.collapsed) {
                    this.sc = e.startContainer, this.so = e.startOffset, this.ec = e.endContainer, this.eo = e.endOffset;
                    var i = e.commonAncestorContainer;
                    this.sc === this.ec && R(this.sc) ? (this.isSingleCharacterDataNode = !0, this._first = this._last = this._next = this.sc) : (this._first = this._next = this.sc !== i || R(this.sc) ? V(this.sc, i, !0) : this.sc.childNodes[this.so], this._last = this.ec !== i || R(this.ec) ? V(this.ec, i, !0) : this.ec.childNodes[this.eo - 1])
                }
            }

            function m(e) {
                return function (t, i) {
                    for (var n, a = i ? t : t.parentNode; a;) {
                        if (n = a.nodeType, G(e, n)) return a;
                        a = a.parentNode
                    }
                    return null
                }
            }

            function v(e, t) {
                if (ae(e, t)) throw new P("INVALID_NODE_TYPE_ERR")
            }

            function y(e, t) {
                if (!G(t, e.nodeType)) throw new P("INVALID_NODE_TYPE_ERR")
            }

            function b(e, t) {
                if (t < 0 || t > (R(e) ? e.length : e.childNodes.length)) throw new P("INDEX_SIZE_ERR")
            }

            function _(e, t) {
                if (ie(e, !0) !== ie(t, !0)) throw new P("WRONG_DOCUMENT_ERR")
            }

            function w(e) {
                if (ne(e, !0)) throw new P("NO_MODIFICATION_ALLOWED_ERR")
            }

            function x(e, t) {
                if (!e) throw new P(t)
            }

            function C(e, t) {
                return t <= (R(e) ? e.length : e.childNodes.length)
            }

            function k(e) {
                return !!e.startContainer && !!e.endContainer && !(Y && (M.isBrokenNode(e.startContainer) || M.isBrokenNode(e.endContainer))) && J(e.startContainer) == J(e.endContainer) && C(e.startContainer, e.startOffset) && C(e.endContainer, e.endOffset)
            }

            function S(e) {
                if (!k(e)) throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: (" + e.inspect() + ")")
            }

            function T(e, t) {
                S(e);
                var i = e.startContainer, n = e.startOffset, a = e.endContainer, r = e.endOffset, o = i === a;
                R(a) && r > 0 && r < a.length && q(a, r, t), R(i) && n > 0 && n < i.length && (i = q(i, n, t), o ? (r -= n, a = i) : a == i.parentNode && r >= B(i) && r++, n = 0), e.setStartAndEnd(i, n, a, r)
            }

            function D(e) {
                S(e);
                var t = e.commonAncestorContainer.parentNode.cloneNode(!1);
                return t.appendChild(e.cloneContents()), t.innerHTML
            }

            function L(e) {
                e.START_TO_START = ce, e.START_TO_END = de, e.END_TO_END = ue, e.END_TO_START = pe, e.NODE_BEFORE = fe, e.NODE_AFTER = he, e.NODE_BEFORE_AND_AFTER = ge, e.NODE_INSIDE = me
            }

            function A(e) {
                L(e), L(e.prototype)
            }

            function E(e, t) {
                return function () {
                    S(this);
                    var i, n, a = this.startContainer, r = this.startOffset, s = this.commonAncestorContainer,
                        l = new g(this, !0);
                    a !== s && (i = V(a, s, !0), n = o(i), a = n.node, r = n.offset), d(l, w), l.reset();
                    var c = e(l);
                    return l.detach(), t(this, a, r, a, r), c
                }
            }

            function $(t, n) {
                function a(e, t) {
                    return function (i) {
                        y(i, K), y(J(i), Q);
                        var n = (e ? r : o)(i);
                        (t ? s : l)(this, n.node, n.offset)
                    }
                }

                function s(e, t, i) {
                    var a = e.endContainer, r = e.endOffset;
                    t === e.startContainer && i === e.startOffset || (J(t) == J(a) && 1 != W(t, i, a, r) || (a = t, r = i), n(e, t, i, a, r))
                }

                function l(e, t, i) {
                    var a = e.startContainer, r = e.startOffset;
                    t === e.endContainer && i === e.endOffset || (J(t) == J(a) && W(t, i, a, r) != -1 || (a = t, r = i), n(e, a, r, t, i))
                }

                var c = function () {
                };
                c.prototype = e.rangePrototype, t.prototype = new c, N.extend(t.prototype, {
                    setStart: function (e, t) {
                        v(e, !0), b(e, t), s(this, e, t)
                    },
                    setEnd: function (e, t) {
                        v(e, !0), b(e, t), l(this, e, t)
                    },
                    setStartAndEnd: function () {
                        var e = arguments, t = e[0], i = e[1], a = t, r = i;
                        switch (e.length) {
                            case 3:
                                r = e[2];
                                break;
                            case 4:
                                a = e[2], r = e[3]
                        }
                        n(this, t, i, a, r)
                    },
                    setBoundary: function (e, t, i) {
                        this["set" + (i ? "Start" : "End")](e, t)
                    },
                    setStartBefore: a(!0, !0),
                    setStartAfter: a(!1, !0),
                    setEndBefore: a(!0, !1),
                    setEndAfter: a(!1, !1),
                    collapse: function (e) {
                        S(this), e ? n(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset) : n(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset)
                    },
                    selectNodeContents: function (e) {
                        v(e, !0), n(this, e, 0, e, U(e))
                    },
                    selectNode: function (e) {
                        v(e, !1), y(e, K);
                        var t = r(e), i = o(e);
                        n(this, t.node, t.offset, i.node, i.offset)
                    },
                    extractContents: E(p, n),
                    deleteContents: E(u, n),
                    canSurroundContents: function () {
                        S(this), w(this.startContainer), w(this.endContainer);
                        var e = new g(this, !0), t = e._first && i(e._first, this) || e._last && i(e._last, this);
                        return e.detach(), !t
                    },
                    splitBoundaries: function () {
                        T(this)
                    },
                    splitBoundariesPreservingPositions: function (e) {
                        T(this, e)
                    },
                    normalizeBoundaries: function () {
                        S(this);
                        var e, t = this.startContainer, i = this.startOffset, a = this.endContainer, r = this.endOffset,
                            o = function (e) {
                                var t = e.nextSibling;
                                t && t.nodeType == e.nodeType && (a = e, r = e.length, e.appendData(t.data), X(t))
                            }, s = function (e) {
                                var n = e.previousSibling;
                                if (n && n.nodeType == e.nodeType) {
                                    t = e;
                                    var o = e.length;
                                    if (i = n.length, e.insertData(0, n.data), X(n), t == a) r += i, a = t; else if (a == e.parentNode) {
                                        var s = B(e);
                                        r == s ? (a = e, r = o) : r > s && r--
                                    }
                                }
                            }, l = !0;
                        if (R(a)) r == a.length ? o(a) : 0 == r && (e = a.previousSibling) && e.nodeType == a.nodeType && (r = e.length, t == a && (l = !1), e.appendData(a.data), X(a), a = e); else {
                            if (r > 0) {
                                var c = a.childNodes[r - 1];
                                c && R(c) && o(c)
                            }
                            l = !this.collapsed
                        }
                        if (l) {
                            if (R(t)) 0 == i ? s(t) : i == t.length && (e = t.nextSibling) && e.nodeType == t.nodeType && (a == e && (a = t, r += t.length), t.appendData(e.data), X(e)); else if (i < t.childNodes.length) {
                                var d = t.childNodes[i];
                                d && R(d) && s(d)
                            }
                        } else t = a, i = r;
                        n(this, t, i, a, r)
                    },
                    collapseToPoint: function (e, t) {
                        v(e, !0), b(e, t), this.setStartAndEnd(e, t)
                    }
                }), A(t)
            }

            function I(e) {
                e.collapsed = e.startContainer === e.endContainer && e.startOffset === e.endOffset, e.commonAncestorContainer = e.collapsed ? e.startContainer : M.getCommonAncestor(e.startContainer, e.endContainer)
            }

            function F(e, t, i, n, a) {
                e.startContainer = t, e.startOffset = i, e.endContainer = n, e.endOffset = a, e.document = M.getDocument(t), I(e)
            }

            function O(e) {
                this.startContainer = e, this.startOffset = 0, this.endContainer = e, this.endOffset = 0, this.document = e, I(this)
            }

            var M = e.dom, N = e.util, j = M.DomPosition, P = e.DOMException, R = M.isCharacterDataNode,
                B = M.getNodeIndex, z = M.isOrIsAncestorOf, H = M.getDocument, W = M.comparePoints, q = M.splitDataNode,
                V = M.getClosestAncestorIn, U = M.getNodeLength, G = M.arrayContains, J = M.getRootContainer,
                Y = e.features.crashyTextNodes, X = M.removeNode;
            g.prototype = {
                _current: null,
                _next: null,
                _first: null,
                _last: null,
                isSingleCharacterDataNode: !1,
                reset: function () {
                    this._current = null, this._next = this._first
                },
                hasNext: function () {
                    return !!this._next
                },
                next: function () {
                    var e = this._current = this._next;
                    return e && (this._next = e !== this._last ? e.nextSibling : null, R(e) && this.clonePartiallySelectedTextNodes && (e === this.ec && (e = e.cloneNode(!0)).deleteData(this.eo, e.length - this.eo), this._current === this.sc && (e = e.cloneNode(!0)).deleteData(0, this.so))), e
                },
                remove: function () {
                    var e, t, i = this._current;
                    !R(i) || i !== this.sc && i !== this.ec ? i.parentNode && X(i) : (e = i === this.sc ? this.so : 0, t = i === this.ec ? this.eo : i.length, e != t && i.deleteData(e, t - e))
                },
                isPartiallySelectedSubtree: function () {
                    return i(this._current, this.range)
                },
                getSubtreeIterator: function () {
                    var e;
                    if (this.isSingleCharacterDataNode) e = this.range.cloneRange(), e.collapse(!1); else {
                        e = new O(n(this.range));
                        var t = this._current, i = t, a = 0, r = t, o = U(t);
                        z(t, this.sc) && (i = this.sc, a = this.so), z(t, this.ec) && (r = this.ec, o = this.eo), F(e, i, a, r, o)
                    }
                    return new g(e, this.clonePartiallySelectedTextNodes)
                },
                detach: function () {
                    this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null
                }
            };
            var K = [1, 3, 4, 5, 7, 8, 10], Q = [2, 9, 11], Z = [5, 6, 10, 12], ee = [1, 3, 4, 5, 7, 8, 10, 11],
                te = [1, 3, 4, 5, 7, 8], ie = m([9, 11]), ne = m(Z), ae = m([6, 10, 12]),
                re = document.createElement("style"), oe = !1;
            try {
                re.innerHTML = "<b>x</b>", oe = 3 == re.firstChild.nodeType
            } catch (e) {
            }
            e.features.htmlParsingConforms = oe;
            var se = oe ? function (e) {
                    var t = this.startContainer, i = H(t);
                    if (!t) throw new P("INVALID_STATE_ERR");
                    var n = null;
                    return 1 == t.nodeType ? n = t : R(t) && (n = M.parentElement(t)), n = null === n || "HTML" == n.nodeName && M.isHtmlNamespace(H(n).documentElement) && M.isHtmlNamespace(n) ? i.createElement("body") : n.cloneNode(!1), n.innerHTML = e, M.fragmentFromNodeChildren(n)
                } : function (e) {
                    var t = n(this), i = t.createElement("body");
                    return i.innerHTML = e, M.fragmentFromNodeChildren(i)
                },
                le = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed", "commonAncestorContainer"],
                ce = 0, de = 1, ue = 2, pe = 3, fe = 0, he = 1, ge = 2, me = 3;
            N.extend(e.rangePrototype, {
                compareBoundaryPoints: function (e, t) {
                    S(this), _(this.startContainer, t.startContainer);
                    var i, n, a, r, o = e == pe || e == ce ? "start" : "end", s = e == de || e == ce ? "start" : "end";
                    return i = this[o + "Container"], n = this[o + "Offset"], a = t[s + "Container"], r = t[s + "Offset"], W(i, n, a, r)
                }, insertNode: function (e) {
                    if (S(this), y(e, ee), w(this.startContainer), z(e, this.startContainer)) throw new P("HIERARCHY_REQUEST_ERR");
                    var t = s(e, this.startContainer, this.startOffset);
                    this.setStartBefore(t)
                }, cloneContents: function () {
                    S(this);
                    var e, t;
                    if (this.collapsed) return n(this).createDocumentFragment();
                    if (this.startContainer === this.endContainer && R(this.startContainer)) return e = this.startContainer.cloneNode(!0), e.data = e.data.slice(this.startOffset, this.endOffset), t = n(this).createDocumentFragment(), t.appendChild(e), t;
                    var i = new g(this, !0);
                    return e = c(i), i.detach(), e
                }, canSurroundContents: function () {
                    S(this), w(this.startContainer), w(this.endContainer);
                    var e = new g(this, !0), t = e._first && i(e._first, this) || e._last && i(e._last, this);
                    return e.detach(), !t
                }, surroundContents: function (e) {
                    if (y(e, te), !this.canSurroundContents()) throw new P("INVALID_STATE_ERR");
                    var t = this.extractContents();
                    if (e.hasChildNodes()) for (; e.lastChild;) e.removeChild(e.lastChild);
                    s(e, this.startContainer, this.startOffset), e.appendChild(t), this.selectNode(e)
                }, cloneRange: function () {
                    S(this);
                    for (var e, t = new O(n(this)), i = le.length; i--;) e = le[i], t[e] = this[e];
                    return t
                }, toString: function () {
                    S(this);
                    var e = this.startContainer;
                    if (e === this.endContainer && R(e)) return 3 == e.nodeType || 4 == e.nodeType ? e.data.slice(this.startOffset, this.endOffset) : "";
                    var t = [], i = new g(this, !0);
                    return d(i, function (e) {
                        3 != e.nodeType && 4 != e.nodeType || t.push(e.data)
                    }), i.detach(), t.join("")
                }, compareNode: function (e) {
                    S(this);
                    var t = e.parentNode, i = B(e);
                    if (!t) throw new P("NOT_FOUND_ERR");
                    var n = this.comparePoint(t, i), a = this.comparePoint(t, i + 1);
                    return n < 0 ? a > 0 ? ge : fe : a > 0 ? he : me
                }, comparePoint: function (e, t) {
                    return S(this), x(e, "HIERARCHY_REQUEST_ERR"), _(e, this.startContainer), W(e, t, this.startContainer, this.startOffset) < 0 ? -1 : W(e, t, this.endContainer, this.endOffset) > 0 ? 1 : 0
                }, createContextualFragment: se, toHtml: function () {
                    return D(this)
                }, intersectsNode: function (e, t) {
                    if (S(this), J(e) != a(this)) return !1;
                    var i = e.parentNode, n = B(e);
                    if (!i) return !0;
                    var r = W(i, n, this.endContainer, this.endOffset),
                        o = W(i, n + 1, this.startContainer, this.startOffset);
                    return t ? r <= 0 && o >= 0 : r < 0 && o > 0
                }, isPointInRange: function (e, t) {
                    return S(this), x(e, "HIERARCHY_REQUEST_ERR"), _(e, this.startContainer), W(e, t, this.startContainer, this.startOffset) >= 0 && W(e, t, this.endContainer, this.endOffset) <= 0
                }, intersectsRange: function (e) {
                    return l(this, e, !1)
                }, intersectsOrTouchesRange: function (e) {
                    return l(this, e, !0)
                }, intersection: function (e) {
                    if (this.intersectsRange(e)) {
                        var t = W(this.startContainer, this.startOffset, e.startContainer, e.startOffset),
                            i = W(this.endContainer, this.endOffset, e.endContainer, e.endOffset),
                            n = this.cloneRange();
                        return t == -1 && n.setStart(e.startContainer, e.startOffset), 1 == i && n.setEnd(e.endContainer, e.endOffset), n
                    }
                    return null
                }, union: function (e) {
                    if (this.intersectsOrTouchesRange(e)) {
                        var t = this.cloneRange();
                        return W(e.startContainer, e.startOffset, this.startContainer, this.startOffset) == -1 && t.setStart(e.startContainer, e.startOffset), 1 == W(e.endContainer, e.endOffset, this.endContainer, this.endOffset) && t.setEnd(e.endContainer, e.endOffset), t
                    }
                    throw new P("Ranges do not intersect")
                }, containsNode: function (e, t) {
                    return t ? this.intersectsNode(e, !1) : this.compareNode(e) == me
                }, containsNodeContents: function (e) {
                    return this.comparePoint(e, 0) >= 0 && this.comparePoint(e, U(e)) <= 0
                }, containsRange: function (e) {
                    var t = this.intersection(e);
                    return null !== t && e.equals(t)
                }, containsNodeText: function (e) {
                    var t = this.cloneRange();
                    t.selectNode(e);
                    var i = t.getNodes([3]);
                    if (i.length > 0) {
                        t.setStart(i[0], 0);
                        var n = i.pop();
                        return t.setEnd(n, n.length), this.containsRange(t)
                    }
                    return this.containsNodeContents(e)
                }, getNodes: function (e, t) {
                    return S(this), f(this, e, t)
                }, getDocument: function () {
                    return n(this)
                }, collapseBefore: function (e) {
                    this.setEndBefore(e), this.collapse(!1)
                }, collapseAfter: function (e) {
                    this.setStartAfter(e), this.collapse(!0)
                }, getBookmark: function (t) {
                    var i = n(this), a = e.createRange(i);
                    t = t || M.getBody(i), a.selectNodeContents(t);
                    var r = this.intersection(a), o = 0, s = 0;
                    return r && (a.setEnd(r.startContainer, r.startOffset), o = a.toString().length, s = o + r.toString().length), {
                        start: o,
                        end: s,
                        containerNode: t
                    }
                }, moveToBookmark: function (e) {
                    var t = e.containerNode, i = 0;
                    this.setStart(t, 0), this.collapse(!0);
                    for (var n, a, r, o, s = [t], l = !1, c = !1; !c && (n = s.pop());) if (3 == n.nodeType) a = i + n.length, !l && e.start >= i && e.start <= a && (this.setStart(n, e.start - i), l = !0), l && e.end >= i && e.end <= a && (this.setEnd(n, e.end - i), c = !0), i = a; else for (o = n.childNodes, r = o.length; r--;) s.push(o[r])
                }, getName: function () {
                    return "DomRange"
                }, equals: function (e) {
                    return O.rangesEqual(this, e)
                }, isValid: function () {
                    return k(this)
                }, inspect: function () {
                    return h(this)
                }, detach: function () {
                }
            }), $(O, F), N.extend(O, {
                rangeProperties: le,
                RangeIterator: g,
                copyComparisonConstants: A,
                createPrototypeRange: $,
                inspect: h,
                toHtml: D,
                getRangeDocument: n,
                rangesEqual: function (e, t) {
                    return e.startContainer === t.startContainer && e.startOffset === t.startOffset && e.endContainer === t.endContainer && e.endOffset === t.endOffset
                }
            }), e.DomRange = O
        }), F.createCoreModule("WrappedRange", ["DomRange"], function (e, t) {
            var i, n, a = e.dom, r = e.util, o = a.DomPosition, s = e.DomRange, l = a.getBody, c = a.getContentDocument,
                d = a.isCharacterDataNode;
            if (e.features.implementsDomRange && function () {
                function n(e) {
                    for (var t, i = p.length; i--;) t = p[i], e[t] = e.nativeRange[t];
                    e.collapsed = e.startContainer === e.endContainer && e.startOffset === e.endOffset
                }

                function o(e, t, i, n, a) {
                    var r = e.startContainer !== t || e.startOffset != i, o = e.endContainer !== n || e.endOffset != a,
                        s = !e.equals(e.nativeRange);
                    (r || o || s) && (e.setEnd(n, a), e.setStart(t, i))
                }

                var d, u, p = s.rangeProperties;
                i = function (e) {
                    if (!e) throw t.createError("WrappedRange: Range must be specified");
                    this.nativeRange = e, n(this)
                }, s.createPrototypeRange(i, o), d = i.prototype, d.selectNode = function (e) {
                    this.nativeRange.selectNode(e), n(this)
                }, d.cloneContents = function () {
                    return this.nativeRange.cloneContents()
                }, d.surroundContents = function (e) {
                    this.nativeRange.surroundContents(e), n(this)
                }, d.collapse = function (e) {
                    this.nativeRange.collapse(e), n(this)
                }, d.cloneRange = function () {
                    return new i(this.nativeRange.cloneRange())
                }, d.refresh = function () {
                    n(this)
                }, d.toString = function () {
                    return this.nativeRange.toString()
                };
                var f = document.createTextNode("test");
                l(document).appendChild(f);
                var h = document.createRange();
                h.setStart(f, 0), h.setEnd(f, 0);
                try {
                    h.setStart(f, 1), d.setStart = function (e, t) {
                        this.nativeRange.setStart(e, t), n(this)
                    }, d.setEnd = function (e, t) {
                        this.nativeRange.setEnd(e, t), n(this)
                    }, u = function (e) {
                        return function (t) {
                            this.nativeRange[e](t), n(this)
                        }
                    }
                } catch (e) {
                    d.setStart = function (e, t) {
                        try {
                            this.nativeRange.setStart(e, t)
                        } catch (e) {
                            this.nativeRange.setEnd(e, t), this.nativeRange.setStart(e, t)
                        }
                        n(this)
                    }, d.setEnd = function (e, t) {
                        try {
                            this.nativeRange.setEnd(e, t)
                        } catch (e) {
                            this.nativeRange.setStart(e, t), this.nativeRange.setEnd(e, t)
                        }
                        n(this)
                    }, u = function (e, t) {
                        return function (i) {
                            try {
                                this.nativeRange[e](i)
                            } catch (e) {
                                this.nativeRange[t](i), this.nativeRange[e](i)
                            }
                            n(this)
                        }
                    }
                }
                d.setStartBefore = u("setStartBefore", "setEndBefore"), d.setStartAfter = u("setStartAfter", "setEndAfter"), d.setEndBefore = u("setEndBefore", "setStartBefore"), d.setEndAfter = u("setEndAfter", "setStartAfter"), d.selectNodeContents = function (e) {
                    this.setStartAndEnd(e, 0, a.getNodeLength(e))
                }, h.selectNodeContents(f), h.setEnd(f, 3);
                var g = document.createRange();
                g.selectNodeContents(f), g.setEnd(f, 4), g.setStart(f, 2), h.compareBoundaryPoints(h.START_TO_END, g) == -1 && 1 == h.compareBoundaryPoints(h.END_TO_START, g) ? d.compareBoundaryPoints = function (e, t) {
                    return t = t.nativeRange || t, e == t.START_TO_END ? e = t.END_TO_START : e == t.END_TO_START && (e = t.START_TO_END), this.nativeRange.compareBoundaryPoints(e, t)
                } : d.compareBoundaryPoints = function (e, t) {
                    return this.nativeRange.compareBoundaryPoints(e, t.nativeRange || t)
                };
                var m = document.createElement("div");
                m.innerHTML = "123";
                var v = m.firstChild, y = l(document);
                y.appendChild(m), h.setStart(v, 1), h.setEnd(v, 2), h.deleteContents(), "13" == v.data && (d.deleteContents = function () {
                    this.nativeRange.deleteContents(), n(this)
                }, d.extractContents = function () {
                    var e = this.nativeRange.extractContents();
                    return n(this), e
                }), y.removeChild(m), y = null, r.isHostMethod(h, "createContextualFragment") && (d.createContextualFragment = function (e) {
                    return this.nativeRange.createContextualFragment(e)
                }), l(document).removeChild(f), d.getName = function () {
                    return "WrappedRange"
                }, e.WrappedRange = i, e.createNativeRange = function (e) {
                    return e = c(e, t, "createNativeRange"), e.createRange()
                }
            }(), e.features.implementsTextRange) {
                var u = function (e) {
                    var t = e.parentElement(), i = e.duplicate();
                    i.collapse(!0);
                    var n = i.parentElement();
                    i = e.duplicate(), i.collapse(!1);
                    var r = i.parentElement(), o = n == r ? n : a.getCommonAncestor(n, r);
                    return o == t ? o : a.getCommonAncestor(t, o)
                }, p = function (e) {
                    return 0 == e.compareEndPoints("StartToEnd", e)
                }, f = function (e, t, i, n, r) {
                    var s = e.duplicate();
                    s.collapse(i);
                    var l = s.parentElement();
                    if (a.isOrIsAncestorOf(t, l) || (l = t), !l.canHaveHTML) {
                        var c = new o(l.parentNode, a.getNodeIndex(l));
                        return {boundaryPosition: c, nodeInfo: {nodeIndex: c.offset, containerElement: c.node}}
                    }
                    var u = a.getDocument(l).createElement("span");
                    u.parentNode && a.removeNode(u);
                    for (var p, f, h, g, m, v = i ? "StartToStart" : "StartToEnd", y = r && r.containerElement == l ? r.nodeIndex : 0, b = l.childNodes.length, _ = b, w = _; ;) {
                        if (w == b ? l.appendChild(u) : l.insertBefore(u, l.childNodes[w]), s.moveToElementText(u), 0 == (p = s.compareEndPoints(v, e)) || y == _) break;
                        if (p == -1) {
                            if (_ == y + 1) break;
                            y = w
                        } else _ = _ == y + 1 ? y : w;
                        w = Math.floor((y + _) / 2), l.removeChild(u)
                    }
                    if (m = u.nextSibling, p == -1 && m && d(m)) {
                        s.setEndPoint(i ? "EndToStart" : "EndToEnd", e);
                        var x;
                        if (/[\r\n]/.test(m.data)) {
                            var C = s.duplicate(), k = C.text.replace(/\r\n/g, "\r").length;
                            for (x = C.moveStart("character", k); (p = C.compareEndPoints("StartToEnd", C)) == -1;) x++, C.moveStart("character", 1)
                        } else x = s.text.length;
                        g = new o(m, x)
                    } else f = (n || !i) && u.previousSibling, h = (n || i) && u.nextSibling, g = h && d(h) ? new o(h, 0) : f && d(f) ? new o(f, f.data.length) : new o(l, a.getNodeIndex(u));
                    return a.removeNode(u), {boundaryPosition: g, nodeInfo: {nodeIndex: w, containerElement: l}}
                }, h = function (e, t) {
                    var i, n, r, o, s = e.offset, c = a.getDocument(e.node), u = l(c).createTextRange(), p = d(e.node);
                    return p ? (i = e.node, n = i.parentNode) : (o = e.node.childNodes, i = s < o.length ? o[s] : null, n = e.node), r = c.createElement("span"), r.innerHTML = "&#feff;", i ? n.insertBefore(r, i) : n.appendChild(r), u.moveToElementText(r), u.collapse(!t), n.removeChild(r), p && u[t ? "moveStart" : "moveEnd"]("character", s), u
                };
                n = function (e) {
                    this.textRange = e, this.refresh()
                }, n.prototype = new s(document), n.prototype.refresh = function () {
                    var e, t, i, n = u(this.textRange);
                    p(this.textRange) ? t = e = f(this.textRange, n, !0, !0).boundaryPosition : (i = f(this.textRange, n, !0, !1), e = i.boundaryPosition, t = f(this.textRange, n, !1, !1, i.nodeInfo).boundaryPosition), this.setStart(e.node, e.offset), this.setEnd(t.node, t.offset)
                }, n.prototype.getName = function () {
                    return "WrappedTextRange"
                }, s.copyComparisonConstants(n);
                var g = function (e) {
                    if (e.collapsed) return h(new o(e.startContainer, e.startOffset), !0);
                    var t = h(new o(e.startContainer, e.startOffset), !0),
                        i = h(new o(e.endContainer, e.endOffset), !1), n = l(s.getRangeDocument(e)).createTextRange();
                    return n.setEndPoint("StartToStart", t), n.setEndPoint("EndToEnd", i), n
                };
                if (n.rangeToTextRange = g, n.prototype.toTextRange = function () {
                    return g(this)
                }, e.WrappedTextRange = n, !e.features.implementsDomRange || e.config.preferTextRange) {
                    var m = function (e) {
                        return e("return this;")()
                    }(Function);
                    void 0 === m.Range && (m.Range = n), e.createNativeRange = function (e) {
                        return e = c(e, t, "createNativeRange"), l(e).createTextRange()
                    }, e.WrappedRange = n
                }
            }
            e.createRange = function (i) {
                return i = c(i, t, "createRange"), new e.WrappedRange(e.createNativeRange(i))
            }, e.createRangyRange = function (e) {
                return e = c(e, t, "createRangyRange"), new s(e)
            }, r.createAliasForDeprecatedMethod(e, "createIframeRange", "createRange"),
                r.createAliasForDeprecatedMethod(e, "createIframeRangyRange", "createRangyRange"), e.addShimListener(function (t) {
                var i = t.document;
                void 0 === i.createRange && (i.createRange = function () {
                    return e.createRange(i)
                }), i = t = null
            })
        }), F.createCoreModule("WrappedSelection", ["DomRange", "WrappedRange"], function (e, t) {
            function i(e) {
                return "string" == typeof e ? /^backward(s)?$/i.test(e) : !!e
            }

            function n(e, i) {
                if (e) {
                    if (T.isWindow(e)) return e;
                    if (e instanceof v) return e.win;
                    var n = T.getContentDocument(e, t, i);
                    return T.getWindow(n)
                }
                return window
            }

            function a(e) {
                return n(e, "getWinSelection").getSelection()
            }

            function r(e) {
                return n(e, "getDocSelection").document.selection
            }

            function o(e) {
                var t = !1;
                return e.anchorNode && (t = 1 == T.comparePoints(e.anchorNode, e.anchorOffset, e.focusNode, e.focusOffset)), t
            }

            function s(e, t, i) {
                var n = i ? "end" : "start", a = i ? "start" : "end";
                e.anchorNode = t[n + "Container"], e.anchorOffset = t[n + "Offset"], e.focusNode = t[a + "Container"], e.focusOffset = t[a + "Offset"]
            }

            function l(e) {
                var t = e.nativeSelection;
                e.anchorNode = t.anchorNode, e.anchorOffset = t.anchorOffset, e.focusNode = t.focusNode, e.focusOffset = t.focusOffset
            }

            function c(e) {
                e.anchorNode = e.focusNode = null, e.anchorOffset = e.focusOffset = 0, e.rangeCount = 0, e.isCollapsed = !0, e._ranges.length = 0
            }

            function d(t) {
                var i;
                return t instanceof A ? (i = e.createNativeRange(t.getDocument()), i.setEnd(t.endContainer, t.endOffset), i.setStart(t.startContainer, t.startOffset)) : t instanceof E ? i = t.nativeRange : F.implementsDomRange && t instanceof T.getWindow(t.startContainer).Range && (i = t), i
            }

            function u(e) {
                if (!e.length || 1 != e[0].nodeType) return !1;
                for (var t = 1, i = e.length; t < i; ++t) if (!T.isAncestorOf(e[0], e[t])) return !1;
                return !0
            }

            function p(e) {
                var i = e.getNodes();
                if (!u(i)) throw t.createError("getSingleElementFromRange: range " + e.inspect() + " did not consist of a single element");
                return i[0]
            }

            function f(e) {
                return !!e && void 0 !== e.text
            }

            function h(e, t) {
                var i = new E(t);
                e._ranges = [i], s(e, i, !1), e.rangeCount = 1, e.isCollapsed = i.collapsed
            }

            function g(t) {
                if (t._ranges.length = 0, "None" == t.docSelection.type) c(t); else {
                    var i = t.docSelection.createRange();
                    if (f(i)) h(t, i); else {
                        t.rangeCount = i.length;
                        for (var n, a = O(i.item(0)), r = 0; r < t.rangeCount; ++r) n = e.createRange(a), n.selectNode(i.item(r)), t._ranges.push(n);
                        t.isCollapsed = 1 == t.rangeCount && t._ranges[0].collapsed, s(t, t._ranges[t.rangeCount - 1], !1)
                    }
                }
            }

            function m(e, i) {
                for (var n = e.docSelection.createRange(), a = p(i), r = O(n.item(0)), o = M(r).createControlRange(), s = 0, l = n.length; s < l; ++s) o.add(n.item(s));
                try {
                    o.add(a)
                } catch (e) {
                    throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")
                }
                o.select(), g(e)
            }

            function v(e, t, i) {
                this.nativeSelection = e, this.docSelection = t, this._ranges = [], this.win = i, this.refresh()
            }

            function y(e) {
                e.win = e.anchorNode = e.focusNode = e._ranges = null, e.rangeCount = e.anchorOffset = e.focusOffset = 0, e.detached = !0
            }

            function b(e, t) {
                for (var i, n, a = Q.length; a--;) if (i = Q[a], n = i.selection, "deleteAll" == t) y(n); else if (i.win == e) return "delete" == t ? (Q.splice(a, 1), !0) : n;
                return "deleteAll" == t && (Q.length = 0), null
            }

            function _(e, i) {
                for (var n, a = O(i[0].startContainer), r = M(a).createControlRange(), o = 0, s = i.length; o < s; ++o) {
                    n = p(i[o]);
                    try {
                        r.add(n)
                    } catch (e) {
                        throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")
                    }
                }
                r.select(), g(e)
            }

            function w(e, t) {
                if (e.win.document != O(t)) throw new $("WRONG_DOCUMENT_ERR")
            }

            function x(t) {
                return function (i, n) {
                    var a;
                    this.rangeCount ? (a = this.getRangeAt(0), a["set" + (t ? "Start" : "End")](i, n)) : (a = e.createRange(this.win.document), a.setStartAndEnd(i, n)), this.setSingleRange(a, this.isBackward())
                }
            }

            function C(e) {
                var t = [], i = new I(e.anchorNode, e.anchorOffset), n = new I(e.focusNode, e.focusOffset),
                    a = "function" == typeof e.getName ? e.getName() : "Selection";
                if (void 0 !== e.rangeCount) for (var r = 0, o = e.rangeCount; r < o; ++r) t[r] = A.inspect(e.getRangeAt(r));
                return "[" + a + "(Ranges: " + t.join(", ") + ")(anchor: " + i.inspect() + ", focus: " + n.inspect() + "]"
            }

            e.config.checkSelectionRanges = !0;
            var k, S, T = e.dom, D = e.util, L = D.isHostMethod, A = e.DomRange, E = e.WrappedRange, $ = e.DOMException,
                I = T.DomPosition, F = e.features, O = T.getDocument, M = T.getBody, N = A.rangesEqual,
                j = L(window, "getSelection"), P = D.isHostObject(document, "selection");
            F.implementsWinGetSelection = j, F.implementsDocSelection = P;
            var R = P && (!j || e.config.preferTextRange);
            if (R) k = r, e.isSelectionValid = function (e) {
                var t = n(e, "isSelectionValid").document, i = t.selection;
                return "None" != i.type || O(i.createRange().parentElement()) == t
            }; else {
                if (!j) return t.fail("Neither document.selection or window.getSelection() detected."), !1;
                k = a, e.isSelectionValid = function () {
                    return !0
                }
            }
            e.getNativeSelection = k;
            var B = k();
            if (!B) return t.fail("Native selection was null (possibly issue 138?)"), !1;
            var z = e.createNativeRange(document), H = M(document),
                W = D.areHostProperties(B, ["anchorNode", "focusNode", "anchorOffset", "focusOffset"]);
            F.selectionHasAnchorAndFocus = W;
            var q = L(B, "extend");
            F.selectionHasExtend = q;
            var V = "number" == typeof B.rangeCount;
            F.selectionHasRangeCount = V;
            var U = !1, G = !0, J = q ? function (t, i) {
                var n = A.getRangeDocument(i), a = e.createRange(n);
                a.collapseToPoint(i.endContainer, i.endOffset), t.addRange(d(a)), t.extend(i.startContainer, i.startOffset)
            } : null;
            D.areHostMethods(B, ["addRange", "getRangeAt", "removeAllRanges"]) && "number" == typeof B.rangeCount && F.implementsDomRange && function () {
                var t = window.getSelection();
                if (t) {
                    for (var i = t.rangeCount, n = i > 1, a = [], r = o(t), s = 0; s < i; ++s) a[s] = t.getRangeAt(s);
                    var l = T.createTestElement(document, "", !1), c = l.appendChild(document.createTextNode("   ")),
                        d = document.createRange();
                    if (d.setStart(c, 1), d.collapse(!0), t.removeAllRanges(), t.addRange(d), G = 1 == t.rangeCount, t.removeAllRanges(), !n) {
                        var u = window.navigator.appVersion.match(/Chrome\/(.*?) /);
                        if (u && parseInt(u[1]) >= 36) U = !1; else {
                            var p = d.cloneRange();
                            d.setStart(c, 0), p.setEnd(c, 3), p.setStart(c, 2), t.addRange(d), t.addRange(p), U = 2 == t.rangeCount
                        }
                    }
                    for (T.removeNode(l), t.removeAllRanges(), s = 0; s < i; ++s) 0 == s && r ? J ? J(t, a[s]) : (e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"), t.addRange(a[s])) : t.addRange(a[s])
                }
            }(), F.selectionSupportsMultipleRanges = U, F.collapsedNonEditableSelectionsSupported = G;
            var Y, X = !1;
            H && L(H, "createControlRange") && (Y = H.createControlRange(), D.areHostProperties(Y, ["item", "add"]) && (X = !0)), F.implementsControlRange = X, S = W ? function (e) {
                return e.anchorNode === e.focusNode && e.anchorOffset === e.focusOffset
            } : function (e) {
                return !!e.rangeCount && e.getRangeAt(e.rangeCount - 1).collapsed
            };
            var K;
            L(B, "getRangeAt") ? K = function (e, t) {
                try {
                    return e.getRangeAt(t)
                } catch (e) {
                    return null
                }
            } : W && (K = function (t) {
                var i = O(t.anchorNode), n = e.createRange(i);
                return n.setStartAndEnd(t.anchorNode, t.anchorOffset, t.focusNode, t.focusOffset), n.collapsed !== this.isCollapsed && n.setStartAndEnd(t.focusNode, t.focusOffset, t.anchorNode, t.anchorOffset), n
            }), v.prototype = e.selectionPrototype;
            var Q = [], Z = function (e) {
                if (e && e instanceof v) return e.refresh(), e;
                e = n(e, "getNativeSelection");
                var t = b(e), i = k(e), a = P ? r(e) : null;
                return t ? (t.nativeSelection = i, t.docSelection = a, t.refresh()) : (t = new v(i, a, e), Q.push({
                    win: e,
                    selection: t
                })), t
            };
            e.getSelection = Z, D.createAliasForDeprecatedMethod(e, "getIframeSelection", "getSelection");
            var ee = v.prototype;
            if (!R && W && D.areHostMethods(B, ["removeAllRanges", "addRange"])) {
                ee.removeAllRanges = function () {
                    this.nativeSelection.removeAllRanges(), c(this)
                };
                var te = function (e, t) {
                    J(e.nativeSelection, t), e.refresh()
                };
                ee.addRange = V ? function (t, n) {
                    if (X && P && "Control" == this.docSelection.type) m(this, t); else if (i(n) && q) te(this, t); else {
                        var a;
                        U ? a = this.rangeCount : (this.removeAllRanges(), a = 0);
                        var r = d(t).cloneRange();
                        try {
                            this.nativeSelection.addRange(r)
                        } catch (e) {
                        }
                        if (this.rangeCount = this.nativeSelection.rangeCount, this.rangeCount == a + 1) {
                            if (e.config.checkSelectionRanges) {
                                var o = K(this.nativeSelection, this.rangeCount - 1);
                                o && !N(o, t) && (t = new E(o))
                            }
                            this._ranges[this.rangeCount - 1] = t, s(this, t, ae(this.nativeSelection)), this.isCollapsed = S(this)
                        } else this.refresh()
                    }
                } : function (e, t) {
                    i(t) && q ? te(this, e) : (this.nativeSelection.addRange(d(e)), this.refresh())
                }, ee.setRanges = function (e) {
                    if (X && P && e.length > 1) _(this, e); else {
                        this.removeAllRanges();
                        for (var t = 0, i = e.length; t < i; ++t) this.addRange(e[t])
                    }
                }
            } else {
                if (!(L(B, "empty") && L(z, "select") && X && R)) return t.fail("No means of selecting a Range or TextRange was found"), !1;
                ee.removeAllRanges = function () {
                    try {
                        if (this.docSelection.empty(), "None" != this.docSelection.type) {
                            var e;
                            if (this.anchorNode) e = O(this.anchorNode); else if ("Control" == this.docSelection.type) {
                                var t = this.docSelection.createRange();
                                t.length && (e = O(t.item(0)))
                            }
                            if (e) {
                                M(e).createTextRange().select(), this.docSelection.empty()
                            }
                        }
                    } catch (e) {
                    }
                    c(this)
                }, ee.addRange = function (t) {
                    "Control" == this.docSelection.type ? m(this, t) : (e.WrappedTextRange.rangeToTextRange(t).select(), this._ranges[0] = t, this.rangeCount = 1, this.isCollapsed = this._ranges[0].collapsed, s(this, t, !1))
                }, ee.setRanges = function (e) {
                    this.removeAllRanges();
                    var t = e.length;
                    t > 1 ? _(this, e) : t && this.addRange(e[0])
                }
            }
            ee.getRangeAt = function (e) {
                if (e < 0 || e >= this.rangeCount) throw new $("INDEX_SIZE_ERR");
                return this._ranges[e].cloneRange()
            };
            var ie;
            if (R) ie = function (t) {
                var i;
                e.isSelectionValid(t.win) ? i = t.docSelection.createRange() : (i = M(t.win.document).createTextRange(), i.collapse(!0)), "Control" == t.docSelection.type ? g(t) : f(i) ? h(t, i) : c(t)
            }; else if (L(B, "getRangeAt") && "number" == typeof B.rangeCount) ie = function (t) {
                if (X && P && "Control" == t.docSelection.type) g(t); else if (t._ranges.length = t.rangeCount = t.nativeSelection.rangeCount, t.rangeCount) {
                    for (var i = 0, n = t.rangeCount; i < n; ++i) t._ranges[i] = new e.WrappedRange(t.nativeSelection.getRangeAt(i));
                    s(t, t._ranges[t.rangeCount - 1], ae(t.nativeSelection)), t.isCollapsed = S(t)
                } else c(t)
            }; else {
                if (!W || "boolean" != typeof B.isCollapsed || "boolean" != typeof z.collapsed || !F.implementsDomRange) return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"), !1;
                ie = function (e) {
                    var t, i = e.nativeSelection;
                    i.anchorNode ? (t = K(i, 0), e._ranges = [t], e.rangeCount = 1, l(e), e.isCollapsed = S(e)) : c(e)
                }
            }
            ee.refresh = function (e) {
                var t = e ? this._ranges.slice(0) : null, i = this.anchorNode, n = this.anchorOffset;
                if (ie(this), e) {
                    var a = t.length;
                    if (a != this._ranges.length) return !0;
                    if (this.anchorNode != i || this.anchorOffset != n) return !0;
                    for (; a--;) if (!N(t[a], this._ranges[a])) return !0;
                    return !1
                }
            };
            var ne = function (e, t) {
                var i = e.getAllRanges();
                e.removeAllRanges();
                for (var n = 0, a = i.length; n < a; ++n) N(t, i[n]) || e.addRange(i[n]);
                e.rangeCount || c(e)
            };
            ee.removeRange = X && P ? function (e) {
                if ("Control" == this.docSelection.type) {
                    for (var t, i = this.docSelection.createRange(), n = p(e), a = O(i.item(0)), r = M(a).createControlRange(), o = !1, s = 0, l = i.length; s < l; ++s) t = i.item(s), t !== n || o ? r.add(i.item(s)) : o = !0;
                    r.select(), g(this)
                } else ne(this, e)
            } : function (e) {
                ne(this, e)
            };
            var ae;
            !R && W && F.implementsDomRange ? (ae = o, ee.isBackward = function () {
                return ae(this)
            }) : ae = ee.isBackward = function () {
                return !1
            }, ee.isBackwards = ee.isBackward, ee.toString = function () {
                for (var e = [], t = 0, i = this.rangeCount; t < i; ++t) e[t] = "" + this._ranges[t];
                return e.join("")
            }, ee.collapse = function (t, i) {
                w(this, t);
                var n = e.createRange(t);
                n.collapseToPoint(t, i), this.setSingleRange(n), this.isCollapsed = !0
            }, ee.collapseToStart = function () {
                if (!this.rangeCount) throw new $("INVALID_STATE_ERR");
                var e = this._ranges[0];
                this.collapse(e.startContainer, e.startOffset)
            }, ee.collapseToEnd = function () {
                if (!this.rangeCount) throw new $("INVALID_STATE_ERR");
                var e = this._ranges[this.rangeCount - 1];
                this.collapse(e.endContainer, e.endOffset)
            }, ee.selectAllChildren = function (t) {
                w(this, t);
                var i = e.createRange(t);
                i.selectNodeContents(t), this.setSingleRange(i)
            }, ee.deleteFromDocument = function () {
                if (X && P && "Control" == this.docSelection.type) {
                    for (var e, t = this.docSelection.createRange(); t.length;) e = t.item(0), t.remove(e), T.removeNode(e);
                    this.refresh()
                } else if (this.rangeCount) {
                    var i = this.getAllRanges();
                    if (i.length) {
                        this.removeAllRanges();
                        for (var n = 0, a = i.length; n < a; ++n) i[n].deleteContents();
                        this.addRange(i[a - 1])
                    }
                }
            }, ee.eachRange = function (e, t) {
                for (var i = 0, n = this._ranges.length; i < n; ++i) if (e(this.getRangeAt(i))) return t
            }, ee.getAllRanges = function () {
                var e = [];
                return this.eachRange(function (t) {
                    e.push(t)
                }), e
            }, ee.setSingleRange = function (e, t) {
                this.removeAllRanges(), this.addRange(e, t)
            }, ee.callMethodOnEachRange = function (e, t) {
                var i = [];
                return this.eachRange(function (n) {
                    i.push(n[e].apply(n, t || []))
                }), i
            }, ee.setStart = x(!0), ee.setEnd = x(!1), e.rangePrototype.select = function (e) {
                Z(this.getDocument()).setSingleRange(this, e)
            }, ee.changeEachRange = function (e) {
                var t = [], i = this.isBackward();
                this.eachRange(function (i) {
                    e(i), t.push(i)
                }), this.removeAllRanges(), i && 1 == t.length ? this.addRange(t[0], "backward") : this.setRanges(t)
            }, ee.containsNode = function (e, t) {
                return this.eachRange(function (i) {
                    return i.containsNode(e, t)
                }, !0) || !1
            }, ee.getBookmark = function (e) {
                return {backward: this.isBackward(), rangeBookmarks: this.callMethodOnEachRange("getBookmark", [e])}
            }, ee.moveToBookmark = function (t) {
                for (var i, n, a = [], r = 0; i = t.rangeBookmarks[r++];) n = e.createRange(this.win), n.moveToBookmark(i), a.push(n);
                t.backward ? this.setSingleRange(a[0], "backward") : this.setRanges(a)
            }, ee.saveRanges = function () {
                return {backward: this.isBackward(), ranges: this.callMethodOnEachRange("cloneRange")}
            }, ee.restoreRanges = function (e) {
                this.removeAllRanges();
                for (var t, i = 0; t = e.ranges[i]; ++i) this.addRange(t, e.backward && 0 == i)
            }, ee.toHtml = function () {
                var e = [];
                return this.eachRange(function (t) {
                    e.push(A.toHtml(t))
                }), e.join("")
            }, F.implementsTextRange && (ee.getNativeTextRange = function () {
                var i;
                if (i = this.docSelection) {
                    var n = i.createRange();
                    if (f(n)) return n;
                    throw t.createError("getNativeTextRange: selection is a control selection")
                }
                if (this.rangeCount > 0) return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));
                throw t.createError("getNativeTextRange: selection contains no range")
            }), ee.getName = function () {
                return "WrappedSelection"
            }, ee.inspect = function () {
                return C(this)
            }, ee.detach = function () {
                b(this.win, "delete"), y(this)
            }, v.detachAll = function () {
                b(null, "deleteAll")
            }, v.inspect = C, v.isDirectionBackward = i, e.Selection = v, e.selectionPrototype = ee, e.addShimListener(function (e) {
                void 0 === e.getSelection && (e.getSelection = function () {
                    return Z(e)
                }), e = null
            })
        });
        var P = !1, R = function (e) {
            P || (P = !0, !F.initialized && F.config.autoInitialize && u())
        };
        return $ && ("complete" == document.readyState ? R() : (e(document, "addEventListener") && document.addEventListener("DOMContentLoaded", R, !1), M(window, "load", R))), F
    })
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = i(167), a = ["year", "quarter", "month", "week", "day", "hour", "minute", "second"], r = {}, o = {
        objs: {
            init: function () {
            }, getHint: function (e) {
                switch (e) {
                    case"drill":
                        return "zh" == bdpChart.language ? "请选择下钻维度" : "Select dimension to drill-down";
                    case"toggle":
                        return "zh" == bdpChart.language ? "请选择切换维度" : "Select dimension to toggle";
                    case"link":
                        return "zh" == bdpChart.language ? "请选择联动字段" : "Select field to Interactive"
                }
            }, getText: function (e) {
                return bdpChart.language = bdpChart.language || "zh", {
                    hint: o.objs.getHint(e.type),
                    dataMap: "zh" == bdpChart.language ? {
                        year: "按年",
                        quarter: "按季",
                        month: "按月",
                        week: "按周",
                        day: "按日",
                        hour: "按时",
                        minute: "按分",
                        second: "按秒"
                    } : {
                        year: "by Year",
                        quarter: "by Quarter",
                        month: "by Month",
                        week: "by Week",
                        day: "by Day",
                        hour: "by Hour",
                        minute: "by Minute",
                        second: "by Second"
                    },
                    nodataText: "zh" == bdpChart.language ? "无维度可用" : "No available field"
                }
            }, handleData: function (e) {
                if (e.isAllField) return o.objs.handleAllData(e.fields);
                var t = e.chart.info, i = t.free_drill_fields.slice(0) || [], n = o.objs.getText(e).dataMap, r = !1;
                return i.forEach(function (e, t) {
                    e.subDate = [], "date" == e.data_type && a.forEach(function (t) {
                        e.subDate.push({key: t, name: n[t]}), r = !0
                    })
                }), {availableDrillFields: i, hasDateField: r, isAllField: !1}
            }, handleAllData: function (e) {
                if ($.isArray(e) < 0) throw"you should give an array as param.";
                return {availableDrillFields: e, hasDateField: !0, isAllField: !0}
            }, getOuter: function () {
                return $(".J-drill-fields-wrap")
            }, show: function (e) {
                var t = e.objs, i = o.objs.handleData(e), a = o.objs.getText(e), r = a.hint, s = a.nodataText, l = n({
                    hint: r,
                    nodataText: s,
                    fieldList: i.availableDrillFields,
                    hasDateField: i.hasDateField,
                    isAllField: i.isAllField
                }), c = null;
                return (e.container || $("body")).append(l), c = o.objs.getOuter(), t && t.handleThemeStyleClass ? t.handleThemeStyleClass(c, e.chart) : o.objs.handleGlobalThemeStyle(c, 2 === window.usedThemeId ? "default" : "dark"), o.bindDomFuns($.extend({}, e, i)), o.objs.setPos(e.hook, c, {
                    isRight: e.isRight,
                    position: e.isNotAbs ? "" : "absolute"
                }), c
            }, setPos: function (e, t, i) {
                var n = e.offset(), t = o.objs.getOuter();
                t.find(".J-drilll-fields-list");
                t.css({position: i.position, left: n.left, top: n.top + e.height() - 42})
            }, handleGlobalThemeStyle: function (e, t) {
                return e.removeClass("chart-theme-dark chart-theme-default").addClass("chart-theme-" + t), e.removeClass("display-theme-dark display-theme-light").addClass("display-theme-" + ("default" == t ? "light" : "dark")), e.removeClass("display-device-pc display-device-projector display-device-tv").addClass("display-device-pc"), e
            }, remove: function () {
                o.objs.getOuter().remove()
            }, destroy: function (e) {
                e && ("display" == $(e.target).attr("action-type") || $(e.target).hasClass("J-int-text") || $(e.target).hasClass("J-add-field")) || o.objs.remove()
            }, isShow: function () {
                var e = o.objs.getOuter();
                return e.length > 0 && "none" != e[0].style.display
            }
        }, eventFuns: {
            handleDrill: function (e, t) {
                var i = "", n = $(e.target), a = n.parents(".J-field-drill-item");
                switch (i = n.attr("action-type"), i || (n = a.length > 0 ? a : n, i = n.attr("action-type")), i) {
                    case"fieldItem":
                        var r = 1 * n.attr("data-index"), s = angular.copy(t.availableDrillFields[r]),
                            l = n.attr("data-granularity");
                        "date" == s.data_type && (s.granularity = l || "day"), t.callback && t.callback(s), delete s.subDate, o.objs.remove();
                        break;
                    case"subFieldItem":
                        var c = n.attr("parent-index"), d = (n.attr("data-index"), n.attr("data-granularity")),
                            u = angular.copy(t.availableDrillFields[c]);
                        "date" == u.data_type && (u.granularity = d || "day"), delete u.subDate, t.callback && t.callback(u), o.objs.remove();
                        break;
                    case"display":
                        var p = (a.find(".J-sub-item-wrap"), a.find(".J-sub-icon"));
                        a.toggleClass("show-sub-list"), a.hasClass("show-sub-list") ? (p.removeClass("ico-triangle-right"), p.addClass("ico-triangle-down")) : (p.removeClass("ico-triangle-down"), p.addClass("ico-triangle-right"))
                }
                return e.preventDefault(), !1
            }
        }, bindDomFuns: function (e) {
            var t = o.objs.getOuter(), i = t.find(".J-query-search");
            t.off("click.drillDownLayer").on("click.drillDownLayer", function (t) {
                o.eventFuns.handleDrill(t, e)
            }), i.change(function (e) {
                var i = $(this).val();
                if (i) {
                    var n = t.find(".item-content-wrap:not(.sub-item):not(:contains(" + i + "))").parent(),
                        a = t.find(".J-item-content-wrap:contains(" + i + ")").parent();
                    n.hide(), a.show()
                } else t.find(".field-item").show()
            }).keyup($.debounce(100, function () {
                $(this).change()
            })).click(function (e) {
                return !1
            })
        }
    };
    !function () {
        o.objs.init()
    }(), r.show = o.objs.show, r.remove = o.objs.remove, r.destroy = o.objs.destroy, r.isShow = o.objs.isShow, t.default = r
}, function (e, t, i) {
    function n(e) {
        var t, i = "", n = e || {};
        return function (e, n, r, o, s) {
            var l = n ? " need-more-pl" : " ";
            i = i + '<div class="drill-fields-wrap J-drill-fields-wrap selected-tooltip"><div class="toolbar" style="cursor: pointer;"><div' + a.attr("class", a.classes(["dropdown-list", "J-dropdown-list", l], [!1, !1, !0]), !1, !0) + ">", i = e.length > 5 ? i + '<div class="query-text-wrap"><i class="bdp-icon ico-search"></i><input class="query-text J-query-search" type="text"' + a.attr("placeholder", r, !0, !0) + ' action-type="search"></div>' : 0 == e.length ? i + '<div class="nodata-text nowrap J-int-text">' + a.escape(null == (t = s) ? "" : t) + "</div>" : i + '<div class="hint nowrap J-int-text">' + a.escape(null == (t = r) ? "" : t) + "</div>", i += '<ul class="list-bd J-drilll-fields-list">', function () {
                var n = e;
                if ("number" == typeof n.length) for (var r = 0, s = n.length; r < s; r++) {
                    var l = n[r];
                    i = i + '<li class="field-item item-content-wrap J-field-drill-item"' + a.attr("title", l.name, !0, !0) + a.attr("data-index", r, !0, !0) + ' action-type="fieldItem"' + a.attr("data-granularity", l.granularity, !0, !0) + ">", "date" !== l.data_type || o ? i = i + '<div class="nowrap J-item-content-wrap">' + a.escape(null == (t = l.name) ? "" : t) + "</div>" : (i = i + '<div class="item-content-wrap nowrap J-item-content-wrap"><i class="bdp-icon ico-triangle-right J-sub-icon" action-type="display"></i>' + a.escape(null == (t = l.name) ? "" : t) + '</div><div class="sub-item-list nowrap J-sub-item-wrap">', function () {
                        var e = l.subDate;
                        if ("number" == typeof e.length) for (var n = 0, o = e.length; n < o; n++) {
                            var s = e[n];
                            i = i + '<div class="field-item sub-item item-content-wrap nowrap"' + a.attr("title", s.name, !0, !0) + a.attr("data-granularity", s.key, !0, !0) + a.attr("data-index", n, !0, !0) + a.attr("parent-index", r, !0, !0) + ' action-type="subFieldItem">' + a.escape(null == (t = s.name) ? "" : t) + "</div>"
                        } else {
                            var o = 0;
                            for (var n in e) {
                                o++;
                                var s = e[n];
                                i = i + '<div class="field-item sub-item item-content-wrap nowrap"' + a.attr("title", s.name, !0, !0) + a.attr("data-granularity", s.key, !0, !0) + a.attr("data-index", n, !0, !0) + a.attr("parent-index", r, !0, !0) + ' action-type="subFieldItem">' + a.escape(null == (t = s.name) ? "" : t) + "</div>"
                            }
                        }
                    }.call(this), i += "</div>"), i += "</li>"
                } else {
                    var s = 0;
                    for (var r in n) {
                        s++;
                        var l = n[r];
                        i = i + '<li class="field-item item-content-wrap J-field-drill-item"' + a.attr("title", l.name, !0, !0) + a.attr("data-index", r, !0, !0) + ' action-type="fieldItem"' + a.attr("data-granularity", l.granularity, !0, !0) + ">", "date" !== l.data_type || o ? i = i + '<div class="nowrap J-item-content-wrap">' + a.escape(null == (t = l.name) ? "" : t) + "</div>" : (i = i + '<div class="item-content-wrap nowrap J-item-content-wrap"><i class="bdp-icon ico-triangle-right J-sub-icon" action-type="display"></i>' + a.escape(null == (t = l.name) ? "" : t) + '</div><div class="sub-item-list nowrap J-sub-item-wrap">', function () {
                            var e = l.subDate;
                            if ("number" == typeof e.length) for (var n = 0, o = e.length; n < o; n++) {
                                var s = e[n];
                                i = i + '<div class="field-item sub-item item-content-wrap nowrap"' + a.attr("title", s.name, !0, !0) + a.attr("data-granularity", s.key, !0, !0) + a.attr("data-index", n, !0, !0) + a.attr("parent-index", r, !0, !0) + ' action-type="subFieldItem">' + a.escape(null == (t = s.name) ? "" : t) + "</div>"
                            } else {
                                var o = 0;
                                for (var n in e) {
                                    o++;
                                    var s = e[n];
                                    i = i + '<div class="field-item sub-item item-content-wrap nowrap"' + a.attr("title", s.name, !0, !0) + a.attr("data-granularity", s.key, !0, !0) + a.attr("data-index", n, !0, !0) + a.attr("parent-index", r, !0, !0) + ' action-type="subFieldItem">' + a.escape(null == (t = s.name) ? "" : t) + "</div>"
                                }
                            }
                        }.call(this), i += "</div>"), i += "</li>"
                    }
                }
            }.call(this), i += "</ul></div></div></div>"
        }.call(this, "fieldList" in n ? n.fieldList : "undefined" != typeof fieldList ? fieldList : void 0, "hasDateField" in n ? n.hasDateField : "undefined" != typeof hasDateField ? hasDateField : void 0, "hint" in n ? n.hint : "undefined" != typeof hint ? hint : void 0, "isAllField" in n ? n.isAllField : "undefined" != typeof isAllField ? isAllField : void 0, "nodataText" in n ? n.nodataText : "undefined" != typeof nodataText ? nodataText : void 0), i
    }

    var a = i(99);
    e.exports = n
}, function (e, t) {
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = {
        instant: function (e) {
            return bdpI18N[e] || e
        }
    };
    t.default = n
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), function (e, n, a) {
        function r(e, t) {
            function i() {
                this.constructor = e
            }

            li(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i)
        }

        function o(e, t) {
            var i = "function" == typeof Symbol && e[Symbol.iterator];
            if (!i) return e;
            var n, a, r = i.call(e), o = [];
            try {
                for (; (void 0 === t || t-- > 0) && !(n = r.next()).done;) o.push(n.value)
            } catch (e) {
                a = {error: e}
            } finally {
                try {
                    n && !n.done && (i = r.return) && i.call(r)
                } finally {
                    if (a) throw a.error
                }
            }
            return o
        }

        function s() {
            for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
            return e
        }

        function l(e, t) {
            var i = t ? di : ui;
            return i[e] || (i[e] = {
                configurable: !0, enumerable: t, get: function () {
                    return c(this), this[e]
                }, set: function (t) {
                    c(this), this[e] = t
                }
            })
        }

        function c(e) {
            if (e.__mobxDidRunLazyInitializers !== !0) {
                var t = e.__mobxDecorators;
                if (t) {
                    Ue(e, "__mobxDidRunLazyInitializers", !0);
                    for (var i in t) {
                        var n = t[i];
                        n.propertyCreator(e, n.prop, n.descriptor, n.decoratorTarget, n.decoratorArguments)
                    }
                }
            }
        }

        function d(t, i) {
            return function () {
                var n, a = function (a, r, o, s) {
                    if (s === !0) return i(a, r, o, a, n), null;
                    if ("production" === e.env.NODE_ENV || u(arguments) || Re("This function is a decorator, but it wasn't invoked like a decorator"), !Object.prototype.hasOwnProperty.call(a, "__mobxDecorators")) {
                        var c = a.__mobxDecorators;
                        Ue(a, "__mobxDecorators", ci({}, c))
                    }
                    return a.__mobxDecorators[r] = {
                        prop: r,
                        propertyCreator: i,
                        descriptor: o,
                        decoratorTarget: a,
                        decoratorArguments: n
                    }, l(r, t)
                };
                return u(arguments) ? (n = Xi, a.apply(null, arguments)) : (n = Array.prototype.slice.call(arguments), a)
            }
        }

        function u(e) {
            return (2 === e.length || 3 === e.length) && "string" == typeof e[1] || 4 === e.length && e[3] === !0
        }

        function p() {
            return !!nn.spyListeners.length
        }

        function f(e) {
            if (nn.spyListeners.length) for (var t = nn.spyListeners, i = 0, n = t.length; i < n; i++) t[i](e)
        }

        function h(e) {
            f(ci({}, e, {spyReportStart: !0}))
        }

        function g(e) {
            f(e ? ci({}, e, {spyReportEnd: !0}) : pi)
        }

        function m(e) {
            return nn.spyListeners.push(e), He(function () {
                nn.spyListeners = nn.spyListeners.filter(function (t) {
                    return t !== e
                })
            })
        }

        function v(t, i) {
            "production" !== e.env.NODE_ENV && (Be("function" == typeof i, "`action` can only be invoked on functions"), "string" == typeof t && t || Re("actions should have valid names, got: '" + t + "'"));
            var n = function () {
                return y(t, i, this, arguments)
            };
            return n.isMobxAction = !0, n
        }

        function y(e, t, i, n) {
            var a = b(e, t, i, n);
            try {
                return t.apply(i, n)
            } finally {
                _(a)
            }
        }

        function b(e, t, i, n) {
            var a = p() && !!e, r = 0;
            if (a) {
                r = Date.now();
                var o = n && n.length || 0, s = new Array(o);
                if (o > 0) for (var l = 0; l < o; l++) s[l] = n[l];
                h({type: "action", name: e, object: i, arguments: s})
            }
            var c = It();
            return mt(), {prevDerivation: c, prevAllowStateChanges: x(!0), notifySpy: a, startTime: r}
        }

        function _(e) {
            C(e.prevAllowStateChanges), vt(), Ft(e.prevDerivation), e.notifySpy && g({time: Date.now() - e.startTime})
        }

        function w(e, t) {
            var i, n = x(e);
            try {
                i = t()
            } finally {
                C(n)
            }
            return i
        }

        function x(e) {
            var t = nn.allowStateChanges;
            return nn.allowStateChanges = e, t
        }

        function C(e) {
            nn.allowStateChanges = e
        }

        function k() {
            Re("production" !== e.env.NODE_ENV && "@action fields are not reassignable")
        }

        function S(t) {
            return function (i, n, a) {
                if (a) {
                    if ("production" !== e.env.NODE_ENV && void 0 !== a.get) return Re("@action cannot be used with getters");
                    if (a.value) return {value: v(t, a.value), enumerable: !1, configurable: !0, writable: !0};
                    var r = a.initializer;
                    return {
                        enumerable: !1, configurable: !0, writable: !0, initializer: function () {
                            return v(t, r.call(this))
                        }
                    }
                }
                return T(t).apply(this, arguments)
            }
        }

        function T(e) {
            return function (t, i, n) {
                Object.defineProperty(t, i, {
                    configurable: !0, enumerable: !1, get: function () {
                    }, set: function (t) {
                        Ge(this, i, fi(e, t))
                    }
                })
            }
        }

        function D(e, t, i, n) {
            return n === !0 ? (E(e, t, i.value), null) : i ? {
                configurable: !0, enumerable: !1, get: function () {
                    return E(this, t, i.value || i.initializer.call(this)), this[t]
                }, set: k
            } : {
                enumerable: !1, configurable: !0, set: function (e) {
                    E(this, t, e)
                }, get: function () {
                }
            }
        }

        function L(t, i) {
            var n = "string" == typeof t ? t : t.name || "<unnamed action>", a = "function" == typeof t ? t : i;
            return "production" !== e.env.NODE_ENV && (Be("function" == typeof a && 0 === a.length, "`runInAction` expects a function without arguments"), "string" == typeof n && n || Re("actions should have valid names, got: '" + n + "'")), y(n, a, this, void 0)
        }

        function A(e) {
            return "function" == typeof e && e.isMobxAction === !0
        }

        function E(e, t, i) {
            Ue(e, t, v(t, i.bind(e)))
        }

        function $(e, t) {
            return I(e, t)
        }

        function I(e, t, i, n) {
            if (e === t) return 0 !== e || 1 / e == 1 / t;
            if (null == e || null == t) return !1;
            if (e !== e) return t !== t;
            var a = typeof e;
            return ("function" === a || "object" === a || "object" == typeof t) && F(e, t, i, n)
        }

        function F(e, t, i, n) {
            e = O(e), t = O(t);
            var a = hi.call(e);
            if (a !== hi.call(t)) return !1;
            switch (a) {
                case"[object RegExp]":
                case"[object String]":
                    return "" + e == "" + t;
                case"[object Number]":
                    return +e != +e ? +t != +t : 0 == +e ? 1 / +e == 1 / t : +e == +t;
                case"[object Date]":
                case"[object Boolean]":
                    return +e == +t;
                case"[object Symbol]":
                    return "undefined" != typeof Symbol && Symbol.valueOf.call(e) === Symbol.valueOf.call(t)
            }
            var r = "[object Array]" === a;
            if (!r) {
                if ("object" != typeof e || "object" != typeof t) return !1;
                var o = e.constructor, s = t.constructor;
                if (o !== s && !("function" == typeof o && o instanceof o && "function" == typeof s && s instanceof s) && "constructor" in e && "constructor" in t) return !1
            }
            i = i || [], n = n || [];
            for (var l = i.length; l--;) if (i[l] === e) return n[l] === t;
            if (i.push(e), n.push(t), r) {
                if ((l = e.length) !== t.length) return !1;
                for (; l--;) if (!I(e[l], t[l], i, n)) return !1
            } else {
                var c, d = Object.keys(e);
                if (l = d.length, Object.keys(t).length !== l) return !1;
                for (; l--;) if (c = d[l], !M(t, c) || !I(e[c], t[c], i, n)) return !1
            }
            return i.pop(), n.pop(), !0
        }

        function O(e) {
            return Ne(e) ? e.peek() : Ze(e) || zi(e) ? tt(e.entries()) : e
        }

        function M(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
        }

        function N(e, t) {
            return e === t
        }

        function j(e, t) {
            return $(e, t)
        }

        function P(e, t) {
            return Ke(e, t) || N(e, t)
        }

        function R(t, i) {
            function n() {
                t(a)
            }

            void 0 === i && (i = Ki), "production" !== e.env.NODE_ENV && (Be("function" == typeof t, "Autorun expects a function as first argument"), Be(A(t) === !1, "Autorun does not accept actions since actions are untrackable"));
            var a, r = i && i.name || t.name || "Autorun@" + Pe(), o = !i.scheduler && !i.delay;
            if (o) a = new cn(r, function () {
                this.track(n)
            }, i.onError); else {
                var s = B(i), l = !1;
                a = new cn(r, function () {
                    l || (l = !0, s(function () {
                        l = !1, a.isDisposed || a.track(n)
                    }))
                }, i.onError)
            }
            return a.schedule(), a.getDisposer()
        }

        function B(e) {
            return e.scheduler ? e.scheduler : e.delay ? function (t) {
                return setTimeout(t, e.delay)
            } : mi
        }

        function z(t, i, n) {
            function a() {
                if (u = !1, !f.isDisposed) {
                    var e = !1;
                    f.track(function () {
                        var i = t(f);
                        e = d || !p(r, i), r = i
                    }), d && n.fireImmediately && s(r, f), d || e !== !0 || s(r, f), d && (d = !1)
                }
            }

            void 0 === n && (n = Ki), "boolean" == typeof n && (n = {fireImmediately: n}, ze("Using fireImmediately as argument is deprecated. Use '{ fireImmediately: true }' instead")), "production" !== e.env.NODE_ENV && (Be("function" == typeof t, "First argument to reaction should be a function"), Be("object" == typeof n, "Third argument of reactions should be an object"));
            var r, o = n.name || "Reaction@" + Pe(), s = fi(o, n.onError ? H(n.onError, i) : i),
                l = !n.scheduler && !n.delay, c = B(n), d = !0, u = !1,
                p = n.compareStructural ? gi.structural : n.equals || gi.default, f = new cn(o, function () {
                    d || l ? a() : u || (u = !0, c(a))
                }, n.onError);
            return f.schedule(), f.getDisposer()
        }

        function H(e, t) {
            return function () {
                try {
                    return t.apply(this, arguments)
                } catch (t) {
                    e.call(this, t)
                }
            }
        }

        function W(e) {
            return void 0 !== e.interceptors && e.interceptors.length > 0
        }

        function q(e, t) {
            var i = e.interceptors || (e.interceptors = []);
            return i.push(t), He(function () {
                var e = i.indexOf(t);
                e !== -1 && i.splice(e, 1)
            })
        }

        function V(e, t) {
            var i = It();
            try {
                var n = e.interceptors;
                if (n) for (var a = 0, r = n.length; a < r && (t = n[a](t), Be(!t || t.type, "Intercept handlers should return nothing or a change object"), t); a++) ;
                return t
            } finally {
                Ft(i)
            }
        }

        function U(e) {
            return void 0 !== e.changeListeners && e.changeListeners.length > 0
        }

        function G(e, t) {
            var i = e.changeListeners || (e.changeListeners = []);
            return i.push(t), He(function () {
                var e = i.indexOf(t);
                e !== -1 && i.splice(e, 1)
            })
        }

        function J(e, t) {
            var i = It(), n = e.changeListeners;
            if (n) {
                n = n.slice();
                for (var a = 0, r = n.length; a < r; a++) n[a](t);
                Ft(i)
            }
        }

        function Y(t, i, n) {
            void 0 === i && (i = ""), void 0 === n && (n = ve);
            var a = t.$mobx;
            return a || ("production" !== e.env.NODE_ENV && Be(Object.isExtensible(t), "Cannot make the designated object observable; it is not extensible"), Ve(t) || (i = (t.constructor.name || "ObservableObject") + "@" + Pe()), i || (i = "ObservableObject@" + Pe()), a = new xi(t, i, n), Ge(t, "$mobx", a), a)
        }

        function X(e, t, i, n) {
            var a = Y(e);
            if (Ye(e, t), W(a)) {
                var r = V(a, {object: e, name: t, type: "add", newValue: i});
                if (!r) return;
                i = r.newValue
            }
            i = (a.values[t] = new _i(i, n, a.name + "." + t, !1)).value, Object.defineProperty(e, t, Q(t)), a.keys && a.keys.push(t), te(a, e, t, i)
        }

        function K(e, t, i) {
            var n = Y(e);
            i.name = n.name + "." + t, i.context = e, n.values[t] = new vi(i), Object.defineProperty(e, t, ee(t))
        }

        function Q(e) {
            return Ci[e] || (Ci[e] = {
                configurable: !0, enumerable: !0, get: function () {
                    return this.$mobx.read(this, e)
                }, set: function (t) {
                    this.$mobx.write(this, e, t)
                }
            })
        }

        function Z(e) {
            var t = e.$mobx;
            return t || (c(e), e.$mobx)
        }

        function ee(e) {
            return ki[e] || (ki[e] = {
                configurable: !0, enumerable: !1, get: function () {
                    return Z(this).read(this, e)
                }, set: function (t) {
                    Z(this).write(this, e, t)
                }
            })
        }

        function te(e, t, i, n) {
            var a = U(e), r = p(), o = a || r ? {type: "add", object: t, name: i, newValue: n} : null;
            r && h(ci({}, o, {name: e.name, key: i})), a && J(e, o), r && g()
        }

        function ie(e) {
            return !!qe(e) && (c(e), Si(e.$mobx))
        }

        function ne(t) {
            var i = d(!0, function (e, i, n, a, r) {
                X(e, i, n ? n.initializer ? n.initializer.call(e) : n.value : void 0, t)
            }), n = void 0 !== e && e.env && "production" !== e.env.NODE_ENV ? function () {
                return arguments.length < 2 ? Re("Incorrect decorator invocation. @observable decorator doesn't expect any arguments") : i.apply(null, arguments)
            } : i;
            return n.enhancer = t, n
        }

        function ae(t, i) {
            if (null === t || void 0 === t) return !1;
            if (void 0 !== i) {
                if ("production" !== e.env.NODE_ENV && (zi(t) || Ne(t))) return Re("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.");
                if (ie(t)) {
                    var n = t.$mobx;
                    return n.values && !!n.values[i]
                }
                return !1
            }
            return ie(t) || !!t.$mobx || Bi(t) || pn(t) || yi(t)
        }

        function re(t) {
            return 1 !== arguments.length && Re("production" !== e.env.NODE_ENV && "isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"), ae(t)
        }

        function oe(t, i) {
            return "string" != typeof i ? Re("production" !== e.env.NODE_ENV && "expected a property name as second argument") : ae(t, i)
        }

        function se(e, t) {
            if (null === e || void 0 === e) return !1;
            if (void 0 !== t) {
                if (ie(e) === !1) return !1;
                if (!e.$mobx.values[t]) return !1;
                var i = Te(e, t);
                return yi(i)
            }
            return yi(e)
        }

        function le(t) {
            return arguments.length > 1 ? Re("production" !== e.env.NODE_ENV && "isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property") : se(t)
        }

        function ce(t, i) {
            return "string" != typeof i ? Re("production" !== e.env.NODE_ENV && "isComputed expected a property name as second argument") : se(t, i)
        }

        function de(e, t, i) {
            return ze("'extendShallowObservable' is deprecated, use 'extendObservable(target, props, { deep: false })' instead"), ue(e, t, i, Ei)
        }

        function ue(t, i, n, a) {
            if ("production" !== e.env.NODE_ENV && (Be(arguments.length >= 2 && arguments.length <= 4, "'extendObservable' expected 2-4 arguments"), Be("object" == typeof t, "'extendObservable' expects an object as first argument"), Be(!zi(t), "'extendObservable' should not be used on maps, use map.merge instead"), Be(!re(i), "Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540"), n)) for (var r in n) r in i || Re("Trying to declare a decorator for unspecified property '" + r + "'");
            a = fe(a);
            var o = a.defaultDecorator || (a.deep === !1 ? Fi : $i);
            Y(t, a.name, o.enhancer), mt();
            try {
                for (var r in i) {
                    var s = Object.getOwnPropertyDescriptor(i, r);
                    "production" !== e.env.NODE_ENV && (Object.getOwnPropertyDescriptor(t, r) && Re("'extendObservable' can only be used to introduce new properties. Use 'set' or 'decorate' instead. The property '" + r + "' already exists on '" + t + "'"), le(s.value) && Re("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead"));
                    var l = n && r in n ? n[r] : s.get ? Ti : o;
                    if ("production" !== e.env.NODE_ENV && "function" != typeof l) return Re("Not a valid decorator for '" + r + "', got: " + l);
                    var c = l(t, r, s, !0);
                    c && Object.defineProperty(t, r, c)
                }
            } finally {
                vt()
            }
            return t
        }

        function pe(e) {
            /^(deep|name|defaultDecorator)$/.test(e) || Re("invalid option for (extend)observable: " + e)
        }

        function fe(t) {
            if (null === t || void 0 === t) return Ai;
            if ("string" == typeof t) return {name: t, deep: !0};
            if ("production" !== e.env.NODE_ENV) {
                if ("object" != typeof t) return Re("expected options object");
                Object.keys(t).forEach(pe)
            }
            return t
        }

        function he(e) {
            return e.defaultDecorator ? e.defaultDecorator.enhancer : e.deep === !1 ? be : ve
        }

        function ge(t, i, n) {
            if ("string" == typeof arguments[1]) return $i.apply(null, arguments);
            if (re(t)) return t;
            var a = Ve(t) ? Ni.object(t, i, n) : Array.isArray(t) ? Ni.array(t, i) : Ze(t) ? Ni.map(t, i) : t;
            if (a !== t) return a;
            Re("production" !== e.env.NODE_ENV && "The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'")
        }

        function me(e) {
            Re("Expected one or two arguments to observable." + e + ". Did you accidentally try to use observable." + e + " as decorator?")
        }

        function ve(e, t, i) {
            return re(e) ? e : Array.isArray(e) ? Ni.array(e, {name: i}) : Ve(e) ? Ni.object(e, void 0, {name: i}) : Ze(e) ? Ni.map(e, {name: i}) : e
        }

        function ye(t, i, n) {
            return void 0 === t || null === t ? t : ie(t) || Ne(t) || zi(t) ? t : Array.isArray(t) ? Ni.array(t, {
                name: n,
                deep: !1
            }) : Ve(t) ? Ni.object(t, void 0, {name: n, deep: !1}) : Ze(t) ? Ni.map(t, {
                name: n,
                deep: !1
            }) : Re("production" !== e.env.NODE_ENV && "The shallow modifier / decorator can only used in combination with arrays, objects and maps")
        }

        function be(e) {
            return e
        }

        function _e(t, i, n) {
            if ("production" !== e.env.NODE_ENV && re(t)) throw"observable.struct should not be used with observable values";
            return $(t, i) ? i : t
        }

        function we() {
            return "function" == typeof Symbol && Symbol.iterator || "@@iterator"
        }

        function xe(e, t) {
            Ge(e, we(), t)
        }

        function Ce(e) {
            return e[we()] = ke, e
        }

        function ke() {
            return this
        }

        function Se(e, t) {
            void 0 === t && (t = void 0), mt();
            try {
                return e.apply(t)
            } finally {
                vt()
            }
        }

        function Te(t, i) {
            if ("object" == typeof t && null !== t) {
                if (Ne(t)) return void 0 !== i && Re("production" !== e.env.NODE_ENV && "It is not possible to get index atoms from arrays"), t.$mobx.atom;
                if (zi(t)) {
                    var n = t;
                    if (void 0 === i) return Te(n._keys);
                    var a = n._data.get(i) || n._hasMap.get(i);
                    return a || Re("production" !== e.env.NODE_ENV && "the entry '" + i + "' does not exist in the observable map '" + Le(t) + "'"), a
                }
                if (c(t), i && !t.$mobx && t[i], ie(t)) {
                    if (!i) return Re("production" !== e.env.NODE_ENV && "please specify a property");
                    var a = t.$mobx.values[i];
                    return a || Re("production" !== e.env.NODE_ENV && "no observable property '" + i + "' found on the observable object '" + Le(t) + "'"), a
                }
                if (Bi(t) || yi(t) || pn(t)) return t
            } else if ("function" == typeof t && pn(t.$mobx)) return t.$mobx;
            return Re("production" !== e.env.NODE_ENV && "Cannot obtain atom from " + t)
        }

        function De(t, i) {
            return t || Re("Expecting some object"), void 0 !== i ? De(Te(t, i)) : Bi(t) || yi(t) || pn(t) ? t : zi(t) ? t : (c(t), t.$mobx ? t.$mobx : void Re("production" !== e.env.NODE_ENV && "Cannot obtain administration from " + t))
        }

        function Le(e, t) {
            var i;
            return i = void 0 !== t ? Te(e, t) : ie(e) || zi(e) ? De(e) : Te(e), i.name
        }

        function Ae(e, t, i) {
            return $e("onBecomeObserved", e, t, i)
        }

        function Ee(e, t, i) {
            return $e("onBecomeUnobserved", e, t, i)
        }

        function $e(t, i, n, a) {
            var r = "string" == typeof n ? Te(i, n) : Te(i), o = "string" == typeof n ? a : n, s = r[t];
            return "function" != typeof s ? Re("production" !== e.env.NODE_ENV && "Not an atom that can be (un)observed") : (r[t] = function () {
                s.call(this), o.call(this)
            }, function () {
                r[t] = s
            })
        }

        function Ie(e, t, i) {
            void 0 === t && (t = Zi), void 0 === i && (i = Zi);
            var n = new Ri(e);
            return Ae(n, t), Ee(n, i), n
        }

        function Fe(e) {
            return {
                enumerable: !1, configurable: !1, get: function () {
                    return this.get(e)
                }, set: function (t) {
                    this.set(e, t)
                }
            }
        }

        function Oe(e) {
            Object.defineProperty(Ui.prototype, "" + e, Fe(e))
        }

        function Me(e) {
            for (var t = Wi; t < e; t++) Oe(t);
            Wi = e
        }

        function Ne(e) {
            return qe(e) && Ji(e.$mobx)
        }

        function je() {
            return "undefined" != typeof window ? window : n
        }

        function Pe() {
            return ++nn.mobxGuid
        }

        function Re(e) {
            throw Be(!1, e), "X"
        }

        function Be(e, t) {
            if (!e) throw new Error("[mobx] " + (t || Yi))
        }

        function ze(t, i) {
            return "production" !== e.env.NODE_ENV && (i ? ze("'" + t + "', use '" + i + "' instead.") : Qi.indexOf(t) === -1 && (Qi.push(t), console.error("[mobx] Deprecated: " + t), !0))
        }

        function He(e) {
            var t = !1;
            return function () {
                if (!t) return t = !0, e.apply(this, arguments)
            }
        }

        function We(e) {
            var t = [];
            return e.forEach(function (e) {
                t.indexOf(e) === -1 && t.push(e)
            }), t
        }

        function qe(e) {
            return null !== e && "object" == typeof e
        }

        function Ve(e) {
            if (null === e || "object" != typeof e) return !1;
            var t = Object.getPrototypeOf(e);
            return t === Object.prototype || null === t
        }

        function Ue(e, t, i) {
            Object.defineProperty(e, t, {enumerable: !1, writable: !0, configurable: !0, value: i})
        }

        function Ge(e, t, i) {
            Object.defineProperty(e, t, {enumerable: !1, writable: !1, configurable: !0, value: i})
        }

        function Je(e, t) {
            var i = Object.getOwnPropertyDescriptor(e, t);
            return !i || i.configurable !== !1 && i.writable !== !1
        }

        function Ye(t, i) {
            "production" === e.env.NODE_ENV || Je(t, i) || Re("Cannot make property '" + i + "' observable, it is not configurable and writable in the target object")
        }

        function Xe(e, t) {
            var i = "isMobX" + e;
            return t.prototype[i] = !0, function (e) {
                return qe(e) && e[i] === !0
            }
        }

        function Ke(e, t) {
            return "number" == typeof e && "number" == typeof t && isNaN(e) && isNaN(t)
        }

        function Qe(e) {
            return Array.isArray(e) || Ne(e)
        }

        function Ze(e) {
            return void 0 !== je().Map && e instanceof je().Map
        }

        function et(e) {
            return Ve(e) ? Object.keys(e) : Array.isArray(e) ? e.map(function (e) {
                return o(e, 1)[0]
            }) : Ze(e) || zi(e) ? tt(e.keys()) : Re("Cannot get keys from '" + e + "'")
        }

        function tt(e) {
            for (var t = []; ;) {
                var i = e.next();
                if (i.done) break;
                t.push(i.value)
            }
            return t
        }

        function it() {
            return "function" == typeof Symbol && Symbol.toPrimitive || "@@toPrimitive"
        }

        function nt(e) {
            return null === e ? null : "object" == typeof e ? "" + e : e
        }

        function at() {
            an = !0, je().__mobxInstanceCount--
        }

        function rt() {
            return nn
        }

        function ot() {
            var e = new tn;
            for (var t in e) en.indexOf(t) === -1 && (nn[t] = e[t]);
            nn.allowStateChanges = !nn.enforceActions
        }

        function st(e, t) {
            return lt(Te(e, t))
        }

        function lt(e) {
            var t = {name: e.name};
            return e.observing && e.observing.length > 0 && (t.dependencies = We(e.observing).map(lt)), t
        }

        function ct(e, t) {
            return dt(Te(e, t))
        }

        function dt(e) {
            var t = {name: e.name};
            return ut(e) && (t.observers = pt(e).map(dt)), t
        }

        function ut(e) {
            return e.observers && e.observers.length > 0
        }

        function pt(e) {
            return e.observers
        }

        function ft(e, t) {
            var i = e.observers.length;
            i && (e.observersIndexes[t.__mapid] = i), e.observers[i] = t, e.lowestObserverState > t.dependenciesState && (e.lowestObserverState = t.dependenciesState)
        }

        function ht(e, t) {
            if (1 === e.observers.length) e.observers.length = 0, gt(e); else {
                var i = e.observers, n = e.observersIndexes, a = i.pop();
                if (a !== t) {
                    var r = n[t.__mapid] || 0;
                    r ? n[a.__mapid] = r : delete n[a.__mapid], i[r] = a
                }
                delete n[t.__mapid]
            }
        }

        function gt(e) {
            e.isPendingUnobservation === !1 && (e.isPendingUnobservation = !0, nn.pendingUnobservations.push(e))
        }

        function mt() {
            nn.inBatch++
        }

        function vt() {
            if (0 == --nn.inBatch) {
                Pt();
                for (var e = nn.pendingUnobservations, t = 0; t < e.length; t++) {
                    var i = e[t];
                    i.isPendingUnobservation = !1, 0 === i.observers.length && (i.isBeingObserved && (i.isBeingObserved = !1, i.onBecomeUnobserved()), i instanceof vi && i.suspend())
                }
                nn.pendingUnobservations = []
            }
        }

        function yt(e) {
            var t = nn.trackingDerivation;
            return null !== t ? (t.runId !== e.lastAccessedBy && (e.lastAccessedBy = t.runId, t.newObserving[t.unboundDepsCount++] = e, e.isBeingObserved || (e.isBeingObserved = !0, e.onBecomeObserved())), !0) : (0 === e.observers.length && nn.inBatch > 0 && gt(e), !1)
        }

        function bt(e) {
            if (e.lowestObserverState !== on.STALE) {
                e.lowestObserverState = on.STALE;
                for (var t = e.observers, i = t.length; i--;) {
                    var n = t[i];
                    n.dependenciesState === on.UP_TO_DATE && (n.isTracing !== sn.NONE && xt(n, e), n.onBecomeStale()), n.dependenciesState = on.STALE
                }
            }
        }

        function _t(e) {
            if (e.lowestObserverState !== on.STALE) {
                e.lowestObserverState = on.STALE;
                for (var t = e.observers, i = t.length; i--;) {
                    var n = t[i];
                    n.dependenciesState === on.POSSIBLY_STALE ? n.dependenciesState = on.STALE : n.dependenciesState === on.UP_TO_DATE && (e.lowestObserverState = on.UP_TO_DATE)
                }
            }
        }

        function wt(e) {
            if (e.lowestObserverState === on.UP_TO_DATE) {
                e.lowestObserverState = on.POSSIBLY_STALE;
                for (var t = e.observers, i = t.length; i--;) {
                    var n = t[i];
                    n.dependenciesState === on.UP_TO_DATE && (n.dependenciesState = on.POSSIBLY_STALE, n.isTracing !== sn.NONE && xt(n, e), n.onBecomeStale())
                }
            }
        }

        function xt(e, t) {
            if (console.log("[mobx.trace] '" + e.name + "' is invalidated due to a change in: '" + t.name + "'"), e.isTracing === sn.BREAK) {
                var i = [];
                Ct(st(e), i, 1), new Function("debugger;\n/*\nTracing '" + e.name + "'\n\nYou are entering this break point because derivation '" + e.name + "' is being traced and '" + t.name + "' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n" + (e instanceof vi ? e.derivation.toString() : "") + "\n\nThe dependencies for this derivation are:\n\n" + i.join("\n") + "\n*/\n    ")()
            }
        }

        function Ct(e, t, i) {
            if (t.length >= 1e3) return void t.push("(and many more)");
            t.push("" + new Array(i).join("\t") + e.name), e.dependencies && e.dependencies.forEach(function (e) {
                return Ct(e, t, i + 1)
            })
        }

        function kt(e) {
            return e instanceof ln
        }

        function St(e) {
            switch (e.dependenciesState) {
                case on.UP_TO_DATE:
                    return !1;
                case on.NOT_TRACKING:
                case on.STALE:
                    return !0;
                case on.POSSIBLY_STALE:
                    for (var t = It(), i = e.observing, n = i.length, a = 0; a < n; a++) {
                        var r = i[a];
                        if (yi(r)) {
                            if (nn.disableErrorBoundaries) r.get(); else try {
                                r.get()
                            } catch (e) {
                                return Ft(t), !0
                            }
                            if (e.dependenciesState === on.STALE) return Ft(t), !0
                        }
                    }
                    return Ot(e), Ft(t), !1
            }
        }

        function Tt() {
            return null !== nn.trackingDerivation
        }

        function Dt(t) {
            var i = t.observers.length > 0;
            nn.computationDepth > 0 && i && Re("production" !== e.env.NODE_ENV && "Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: " + t.name), nn.allowStateChanges || !i && "strict" !== nn.enforceActions || Re("production" !== e.env.NODE_ENV && (nn.enforceActions ? "Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: " : "Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ") + t.name)
        }

        function Lt(e, t, i) {
            Ot(e), e.newObserving = new Array(e.observing.length + 100), e.unboundDepsCount = 0, e.runId = ++nn.runId;
            var n = nn.trackingDerivation;
            nn.trackingDerivation = e;
            var a;
            if (nn.disableErrorBoundaries === !0) a = t.call(i); else try {
                a = t.call(i)
            } catch (e) {
                a = new ln(e)
            }
            return nn.trackingDerivation = n, At(e), a
        }

        function At(e) {
            for (var t = e.observing, i = e.observing = e.newObserving, n = on.UP_TO_DATE, a = 0, r = e.unboundDepsCount, o = 0; o < r; o++) {
                var s = i[o];
                0 === s.diffValue && (s.diffValue = 1, a !== o && (i[a] = s), a++), s.dependenciesState > n && (n = s.dependenciesState)
            }
            for (i.length = a, e.newObserving = null, r = t.length; r--;) {
                var s = t[r];
                0 === s.diffValue && ht(s, e), s.diffValue = 0
            }
            for (; a--;) {
                var s = i[a];
                1 === s.diffValue && (s.diffValue = 0, ft(s, e))
            }
            n !== on.UP_TO_DATE && (e.dependenciesState = n, e.onBecomeStale())
        }

        function Et(e) {
            var t = e.observing;
            e.observing = [];
            for (var i = t.length; i--;) ht(t[i], e);
            e.dependenciesState = on.NOT_TRACKING
        }

        function $t(e) {
            var t = It(), i = e();
            return Ft(t), i
        }

        function It() {
            var e = nn.trackingDerivation;
            return nn.trackingDerivation = null, e
        }

        function Ft(e) {
            nn.trackingDerivation = e
        }

        function Ot(e) {
            if (e.dependenciesState !== on.UP_TO_DATE) {
                e.dependenciesState = on.UP_TO_DATE;
                for (var t = e.observing, i = t.length; i--;) t[i].lowestObserverState = on.UP_TO_DATE
            }
        }

        function Mt() {
            for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
            var n = !1;
            "boolean" == typeof t[t.length - 1] && (n = t.pop());
            var a = Nt(t);
            if (!a) return Re("production" !== e.env.NODE_ENV && "'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");
            a.isTracing === sn.NONE && console.log("[mobx.trace] '" + a.name + "' tracing enabled"), a.isTracing = n ? sn.BREAK : sn.LOG
        }

        function Nt(e) {
            switch (e.length) {
                case 0:
                    return nn.trackingDerivation;
                case 1:
                    return Te(e[0]);
                case 2:
                    return Te(e[0], e[1])
            }
        }

        function jt(e) {
            return nn.globalReactionErrorHandlers.push(e), function () {
                var t = nn.globalReactionErrorHandlers.indexOf(e);
                t >= 0 && nn.globalReactionErrorHandlers.splice(t, 1)
            }
        }

        function Pt() {
            nn.inBatch > 0 || nn.isRunningReactions || un(Rt)
        }

        function Rt() {
            nn.isRunningReactions = !0;
            for (var e = nn.pendingReactions, t = 0; e.length > 0;) {
                ++t === dn && (console.error("Reaction doesn't converge to a stable state after " + dn + " iterations. Probably there is a cycle in the reactive function: " + e[0]), e.splice(0));
                for (var i = e.splice(0), n = 0, a = i.length; n < a; n++) i[n].runReaction()
            }
            nn.isRunningReactions = !1
        }

        function Bt(e) {
            var t = un;
            un = function (i) {
                return e(function () {
                    return t(i)
                })
            }
        }

        function zt(e, t, i, n) {
            return "function" == typeof i ? Wt(e, t, i, n) : Ht(e, t, i)
        }

        function Ht(e, t, i) {
            return De(e).observe(t, i)
        }

        function Wt(e, t, i, n) {
            return De(e, t).observe(i, n)
        }

        function qt(e, t, i) {
            return "function" == typeof i ? Ut(e, t, i) : Vt(e, t)
        }

        function Vt(e, t) {
            return De(e).intercept(t)
        }

        function Ut(e, t, i) {
            return De(e, t).intercept(i)
        }

        function Gt(e, t, i) {
            return 1 === arguments.length || t && "object" == typeof t ? Yt(e, t) : Jt(e, t, i || {})
        }

        function Jt(e, t, i) {
            var n;
            "number" == typeof i.timeout && (n = setTimeout(function () {
                if (!r.$mobx.isDisposed) {
                    r();
                    var e = new Error("WHEN_TIMEOUT");
                    if (!i.onError) throw e;
                    i.onError(e)
                }
            }, i.timeout)), i.name = i.name || "When@" + Pe();
            var a = v(i.name + "-effect", t), r = R(function (t) {
                e() && (t.dispose(), n && clearTimeout(n), a())
            }, i);
            return r
        }

        function Yt(t, i) {
            if ("production" !== e.env.NODE_ENV && i && i.onError) return Re("the options 'onError' and 'promise' cannot be combined");
            var n, a = new Promise(function (e, a) {
                var r = Jt(t, e, ci({}, i, {onError: a}));
                n = function () {
                    r(), a("WHEN_CANCELLED")
                }
            });
            return a.cancel = n, a
        }

        function Xt(t) {
            return ie(t) ? t.$mobx.getKeys() : zi(t) ? t._keys.slice() : Re("production" !== e.env.NODE_ENV && "'keys()' can only be used on observable objects and maps")
        }

        function Kt(t) {
            return ie(t) ? Xt(t).map(function (e) {
                return t[e]
            }) : zi(t) ? Xt(t).map(function (e) {
                return t.get(e)
            }) : Ne(t) ? t.slice() : Re("production" !== e.env.NODE_ENV && "'values()' can only be used on observable objects, arrays and maps")
        }

        function Qt(t, i, n) {
            if (2 !== arguments.length) if (ie(t)) {
                var a = t.$mobx, r = a.values[i];
                r ? r.set(n) : X(t, i, n, a.defaultEnhancer)
            } else if (zi(t)) t.set(i, n); else {
                if (!Ne(t)) return Re("production" !== e.env.NODE_ENV && "'set()' can only be used on observable objects, arrays and maps");
                "number" != typeof i && (i = parseInt(i, 10)), Be(i >= 0, "Not a valid index: '" + i + "'"), mt(), i >= t.length && (t.length = i + 1), t[i] = n, vt()
            } else {
                mt();
                var o = i;
                try {
                    for (var s in o) Qt(t, s, o[s])
                } finally {
                    vt()
                }
            }
        }

        function Zt(t, i) {
            if (ie(t)) t.$mobx.remove(i); else if (zi(t)) t.delete(i); else {
                if (!Ne(t)) return Re("production" !== e.env.NODE_ENV && "'remove()' can only be used on observable objects, arrays and maps");
                "number" != typeof i && (i = parseInt(i, 10)), Be(i >= 0, "Not a valid index: '" + i + "'"), t.splice(i, 1)
            }
        }

        function ei(t, i) {
            if (ie(t)) {
                var n = De(t);
                return n.getKeys(), n.values[i] instanceof _i
            }
            return zi(t) ? t.has(i) : Ne(t) ? i >= 0 && i < t.length : Re("production" !== e.env.NODE_ENV && "'has()' can only be used on observable objects, arrays and maps")
        }

        function ti(t, i) {
            if (ei(t, i)) return ie(t) ? t[i] : zi(t) ? t.get(i) : Ne(t) ? t[i] : Re("production" !== e.env.NODE_ENV && "'get()' can only be used on observable objects, arrays and maps")
        }

        function ii(t, i) {
            "production" !== e.env.NODE_ENV && Be(Ve(i), "Decorators should be a key value map");
            var n = "function" == typeof t ? t.prototype : t;
            for (var a in i) {
                var r = i[a];
                "production" !== e.env.NODE_ENV && Be("function" == typeof r, "Decorate: expected a decorator function for '" + a + "'");
                var o = Object.getOwnPropertyDescriptor(n, a), s = r(n, a, o);
                s && Object.defineProperty(n, a, s)
            }
            return t
        }

        function ni(e) {
            var t = e.enforceActions, i = e.computedRequiresReaction, n = e.disableErrorBoundaries, a = e.arrayBuffer,
                r = e.reactionScheduler;
            if (void 0 !== t) {
                if ("boolean" != typeof t && "strict" !== t) return fail("Invalid configuration for 'enforceActions': " + t);
                nn.enforceActions = t, nn.allowStateChanges = t !== !0 && "strict" !== t
            }
            void 0 !== i && (nn.computedRequiresReaction = !!i), e.isolateGlobalState === !0 && at(), void 0 !== n && (n === !0 && console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."), nn.disableErrorBoundaries = !!n), "number" == typeof a && Me(a), r && Bt(r)
        }

        function ai(t) {
            1 !== arguments.length && Re(e.env.NODE_ENV && "Flow expects one 1 argument and cannot be used as decorator");
            var i = t.name || "<unnamed flow>";
            return function () {
                var e, n = this, a = arguments, r = ++fn, o = fi(i + " - runid: " + r + " - init", t).apply(n, a),
                    s = void 0, l = new Promise(function (t, n) {
                        function a(e) {
                            s = void 0;
                            var t;
                            try {
                                t = fi(i + " - runid: " + r + " - yield " + d++, o.next).call(o, e)
                            } catch (e) {
                                return n(e)
                            }
                            c(t)
                        }

                        function l(e) {
                            s = void 0;
                            var t;
                            try {
                                t = fi(i + " - runid: " + r + " - yield " + d++, o.throw).call(o, e)
                            } catch (e) {
                                return n(e)
                            }
                            c(t)
                        }

                        function c(e) {
                            return e && "function" == typeof e.then ? void e.then(c, n) : e.done ? t(e.value) : (s = Promise.resolve(e.value), s.then(a, l))
                        }

                        var d = 0;
                        e = n, a(void 0)
                    });
                return l.cancel = fi(i + " - runid: " + r + " - cancel", function () {
                    try {
                        s && ri(s);
                        var t = o.return(), i = Promise.resolve(t.value);
                        i.then(Zi, Zi), ri(i), e(new Error("FLOW_CANCELLED"))
                    } catch (t) {
                        e(t)
                    }
                }), l
            }
        }

        function ri(e) {
            "function" == typeof e.cancel && e.cancel()
        }

        function oi(e, t, i) {
            function n(t) {
                return a && i.push([e, t]), t
            }

            void 0 === i && (i = []), "boolean" == typeof t && (t = {detectCycles: t}), t || (t = hn);
            var a = t.detectCycles === !0;
            if (re(e)) {
                if (a && null === i && (i = []), a && null !== e && "object" == typeof e) for (var r = 0, o = i.length; r < o; r++) if (i[r][0] === e) return i[r][1];
                if (Ne(e)) {
                    var s = n([]), l = e.map(function (e) {
                        return oi(e, t, i)
                    });
                    s.length = l.length;
                    for (var r = 0, o = l.length; r < o; r++) s[r] = l[r];
                    return s
                }
                if (ie(e)) {
                    var s = n({});
                    Xt(e);
                    for (var c in e) s[c] = oi(e[c], t, i);
                    return s
                }
                if (zi(e)) {
                    if (t.exportMapsAsObjects === !1) {
                        var d = n(new Map);
                        return e.forEach(function (e, n) {
                            d.set(n, oi(e, t, i))
                        }), d
                    }
                    var u = n({});
                    return e.forEach(function (e, n) {
                        u[n] = oi(e, t, i)
                    }), u
                }
                if (wi(e)) return oi(e.get(), t, i)
            }
            return e
        }

        function si(t, i, n) {
            var a;
            if (zi(t) || Ne(t) || wi(t)) a = De(t); else {
                if (!ie(t)) return Re("production" !== e.env.NODE_ENV && "Expected observable map, object or array as first array");
                if ("string" != typeof i) return Re("production" !== e.env.NODE_ENV && "InterceptReads can only be used with a specific property, not with an object in general");
                a = De(t, i)
            }
            return void 0 !== a.dehancer ? Re("production" !== e.env.NODE_ENV && "An intercept reader was already established") : (a.dehancer = "function" == typeof i ? i : n, function () {
                a.dehancer = void 0
            })
        }

        i.d(t, "Reaction", function () {
            return cn
        }), i.d(t, "untracked", function () {
            return $t
        }), i.d(t, "IDerivationState", function () {
            return on
        }), i.d(t, "createAtom", function () {
            return Ie
        }), i.d(t, "spy", function () {
            return m
        }), i.d(t, "comparer", function () {
            return gi
        }), i.d(t, "isObservableObject", function () {
            return ie
        }), i.d(t, "isBoxedObservable", function () {
            return wi
        }), i.d(t, "isObservableArray", function () {
            return Ne
        }), i.d(t, "ObservableMap", function () {
            return Pi
        }), i.d(t, "isObservableMap", function () {
            return zi
        }), i.d(t, "transaction", function () {
            return Se
        }), i.d(t, "observable", function () {
            return Ni
        }), i.d(t, "computed", function () {
            return Li
        }), i.d(t, "isObservable", function () {
            return re
        }), i.d(t, "isObservableProp", function () {
            return oe
        }), i.d(t, "isComputed", function () {
            return le
        }), i.d(t, "isComputedProp", function () {
            return ce
        }), i.d(t, "extendObservable", function () {
            return ue
        }), i.d(t, "extendShallowObservable", function () {
            return de
        }), i.d(t, "observe", function () {
            return zt
        }), i.d(t, "intercept", function () {
            return qt
        }), i.d(t, "autorun", function () {
            return R
        }), i.d(t, "reaction", function () {
            return z
        }), i.d(t, "when", function () {
            return Gt
        }), i.d(t, "action", function () {
            return fi
        }), i.d(t, "isAction", function () {
            return A
        }), i.d(t, "runInAction", function () {
            return L
        }), i.d(t, "keys", function () {
            return Xt
        }), i.d(t, "values", function () {
            return Kt
        }), i.d(t, "set", function () {
            return Qt
        }), i.d(t, "remove", function () {
            return Zt
        }), i.d(t, "has", function () {
            return ei
        }), i.d(t, "get", function () {
            return ti
        }), i.d(t, "decorate", function () {
            return ii
        }), i.d(t, "configure", function () {
            return ni
        }), i.d(t, "onBecomeObserved", function () {
            return Ae
        }), i.d(t, "onBecomeUnobserved", function () {
            return Ee
        }), i.d(t, "flow", function () {
            return ai
        }), i.d(t, "toJS", function () {
            return oi
        }), i.d(t, "trace", function () {
            return Mt
        }), i.d(t, "getDependencyTree", function () {
            return st
        }), i.d(t, "getObserverTree", function () {
            return ct
        }), i.d(t, "_resetGlobalState", function () {
            return ot
        }), i.d(t, "_getGlobalState", function () {
            return rt
        }), i.d(t, "getDebugName", function () {
            return Le
        }), i.d(t, "getAtom", function () {
            return Te
        }), i.d(t, "_getAdministration", function () {
            return De
        }), i.d(t, "_allowStateChanges", function () {
            return w
        }), i.d(t, "isArrayLike", function () {
            return Qe
        }), i.d(t, "_isComputingDerivation", function () {
            return Tt
        }), i.d(t, "onReactionError", function () {
            return jt
        }), i.d(t, "_interceptReads", function () {
            return si
        });
        var li = Object.setPrototypeOf || {__proto__: []} instanceof Array && function (e, t) {
            e.__proto__ = t
        } || function (e, t) {
            for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
        }, ci = Object.assign || function (e) {
            for (var t, i = 1, n = arguments.length; i < n; i++) {
                t = arguments[i];
                for (var a in t) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a])
            }
            return e
        }, di = {}, ui = {}, pi = {spyReportEnd: !0}, fi = function (e, t, i, n) {
            return 1 === arguments.length && "function" == typeof e ? v(e.name || "<unnamed action>", e) : 2 === arguments.length && "function" == typeof t ? v(e, t) : 1 === arguments.length && "string" == typeof e ? S(e) : n !== !0 ? S(t).apply(null, arguments) : void(e[t] = v(e.name || t, i.value))
        };
        fi.bound = D;
        var hi = Object.prototype.toString, gi = {identity: N, structural: j, default: P}, mi = function (e) {
            return e()
        }, vi = function () {
            function t(t) {
                var i = this;
                if (this.dependenciesState = on.NOT_TRACKING, this.observing = [], this.newObserving = null, this.isBeingObserved = !1, this.isPendingUnobservation = !1, this.observers = [], this.observersIndexes = {}, this.diffValue = 0, this.runId = 0, this.lastAccessedBy = 0, this.lowestObserverState = on.UP_TO_DATE, this.unboundDepsCount = 0, this.__mapid = "#" + Pe(), this.value = new ln(null), this.isComputing = !1, this.isRunningSetter = !1, this.isTracing = sn.NONE, "production" === e.env.NODE_ENV && !t.get) return Re("missing option for computed: get");
                this.derivation = t.get, this.name = t.name || "ComputedValue@" + Pe(), t.set && (this.setter = v(this.name + "-setter", t.set)), this.equals = t.equals || (t.compareStructural || t.struct ? gi.structural : gi.default), this.scope = t.context, this.requiresReaction = !!t.requiresReaction, t.keepAlive === !0 && R(function () {
                    return i.get()
                })
            }

            return t.prototype.onBecomeStale = function () {
                wt(this)
            }, t.prototype.onBecomeUnobserved = function () {
            }, t.prototype.onBecomeObserved = function () {
            }, t.prototype.get = function () {
                this.isComputing && Re("Cycle detected in computation " + this.name + ": " + this.derivation), 0 === nn.inBatch ? St(this) && (this.warnAboutUntrackedRead(), mt(), this.value = this.computeValue(!1), vt()) : (yt(this), St(this) && this.trackAndCompute() && _t(this));
                var e = this.value;
                if (kt(e)) throw e.cause;
                return e
            }, t.prototype.peek = function () {
                var e = this.computeValue(!1);
                if (kt(e)) throw e.cause;
                return e
            }, t.prototype.set = function (t) {
                if (this.setter) {
                    Be(!this.isRunningSetter, "The setter of computed value '" + this.name + "' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"), this.isRunningSetter = !0;
                    try {
                        this.setter.call(this.scope, t)
                    } finally {
                        this.isRunningSetter = !1
                    }
                } else Be(!1, "production" !== e.env.NODE_ENV && "[ComputedValue '" + this.name + "'] It is not possible to assign a new value to a computed value.")
            }, t.prototype.trackAndCompute = function () {
                p() && f({object: this.scope, type: "compute", name: this.name});
                var e = this.value, t = this.dependenciesState === on.NOT_TRACKING, i = this.computeValue(!0),
                    n = t || kt(e) || kt(i) || !this.equals(e, i);
                return n && (this.value = i), n
            }, t.prototype.computeValue = function (e) {
                this.isComputing = !0, nn.computationDepth++;
                var t;
                if (e) t = Lt(this, this.derivation, this.scope); else if (nn.disableErrorBoundaries === !0) t = this.derivation.call(this.scope); else try {
                    t = this.derivation.call(this.scope)
                } catch (e) {
                    t = new ln(e)
                }
                return nn.computationDepth--, this.isComputing = !1, t
            }, t.prototype.suspend = function () {
                Et(this), this.value = void 0
            }, t.prototype.observe = function (e, t) {
                var i = this, n = !0, a = void 0;
                return R(function () {
                    var r = i.get();
                    if (!n || t) {
                        var o = It();
                        e({type: "update", object: i, newValue: r, oldValue: a}), Ft(o)
                    }
                    n = !1, a = r
                })
            }, t.prototype.warnAboutUntrackedRead = function () {
                "production" !== e.env.NODE_ENV && (this.requiresReaction === !0 && Re("[mobx] Computed value " + this.name + " is read outside a reactive context"), this.isTracing !== sn.NONE && console.log("[mobx.trace] '" + this.name + "' is being read outside a reactive context. Doing a full recompute"), nn.computedRequiresReaction && console.warn("[mobx] Computed value " + this.name + " is being read outside a reactive context. Doing a full recompute"))
            }, t.prototype.toJSON = function () {
                return this.get()
            }, t.prototype.toString = function () {
                return this.name + "[" + this.derivation.toString() + "]"
            }, t.prototype.valueOf = function () {
                return nt(this.get())
            }, t
        }();
        vi.prototype[it()] = vi.prototype.valueOf;
        var yi = Xe("ComputedValue", vi), bi = {};
        !function () {
            Ri || (Ri = function () {
                function e(e) {
                    void 0 === e && (e = "Atom@" + Pe()), this.name = e, this.isPendingUnobservation = !1, this.isBeingObserved = !1, this.observers = [], this.observersIndexes = {}, this.diffValue = 0, this.lastAccessedBy = 0, this.lowestObserverState = on.NOT_TRACKING
                }

                return e.prototype.onBecomeUnobserved = function () {
                }, e.prototype.onBecomeObserved = function () {
                }, e.prototype.reportObserved = function () {
                    return yt(this)
                }, e.prototype.reportChanged = function () {
                    mt(), bt(this), vt()
                }, e.prototype.toString = function () {
                    return this.name
                }, e
            }(), Bi = Xe("Atom", Ri))
        }();
        var _i = function (e) {
            function t(t, i, n, a) {
                void 0 === n && (n = "ObservableValue@" + Pe()), void 0 === a && (a = !0);
                var r = e.call(this, n) || this;
                return r.enhancer = i, r.hasUnreportedChange = !1, r.value = i(t, void 0, n), a && p() && f({
                    type: "create",
                    name: r.name,
                    newValue: "" + r.value
                }), r
            }

            return r(t, e), t.prototype.dehanceValue = function (e) {
                return void 0 !== this.dehancer ? this.dehancer(e) : e
            }, t.prototype.set = function (e) {
                var t = this.value;
                if ((e = this.prepareNewValue(e)) !== bi) {
                    var i = p();
                    i && h({type: "update", name: this.name, newValue: e, oldValue: t}), this.setNewValue(e), i && g()
                }
            }, t.prototype.prepareNewValue = function (e) {
                if (Dt(this), W(this)) {
                    var t = V(this, {object: this, type: "update", newValue: e});
                    if (!t) return bi;
                    e = t.newValue
                }
                return e = this.enhancer(e, this.value, this.name), this.value !== e ? e : bi
            }, t.prototype.setNewValue = function (e) {
                var t = this.value;
                this.value = e, this.reportChanged(), U(this) && J(this, {
                    type: "update",
                    object: this,
                    newValue: e,
                    oldValue: t
                })
            }, t.prototype.get = function () {
                return this.reportObserved(), this.dehanceValue(this.value)
            }, t.prototype.intercept = function (e) {
                return q(this, e)
            }, t.prototype.observe = function (e, t) {
                return t && e({object: this, type: "update", newValue: this.value, oldValue: void 0}), G(this, e)
            }, t.prototype.toJSON = function () {
                return this.get()
            }, t.prototype.toString = function () {
                return this.name + "[" + this.value + "]"
            }, t.prototype.valueOf = function () {
                return nt(this.get())
            }, t
        }(Ri);
        _i.prototype[it()] = _i.prototype.valueOf;
        var wi = Xe("ObservableValue", _i), xi = function () {
            function t(e, t, i) {
                this.target = e, this.name = t, this.defaultEnhancer = i, this.values = {}
            }

            return t.prototype.read = function (e, t) {
                return this.target !== e ? void this.illegalAccess(e, t) : this.values[t].get()
            }, t.prototype.write = function (e, t, i) {
                var n = this.target;
                if (n !== e) return void this.illegalAccess(e, t);
                var a = this.values[t];
                if (a instanceof vi) return void a.set(i);
                if (W(this)) {
                    var r = V(this, {type: "update", object: n, name: t, newValue: i});
                    if (!r) return;
                    i = r.newValue
                }
                if ((i = a.prepareNewValue(i)) !== bi) {
                    var o = U(this), s = p(),
                        r = o || s ? {type: "update", object: n, oldValue: a.value, name: t, newValue: i} : null;
                    s && h(ci({}, r, {name: this.name, key: t})), a.setNewValue(i), o && J(this, r), s && g()
                }
            }, t.prototype.remove = function (e) {
                if (this.values[e]) {
                    var t = this.target;
                    if (W(this)) {
                        var i = V(this, {object: t, name: e, type: "remove"});
                        if (!i) return
                    }
                    try {
                        mt();
                        var n = U(this), a = p(), r = this.values[e].get();
                        this.keys && this.keys.remove(e), delete this.values[e], delete this.target[e];
                        var i = n || a ? {type: "remove", object: t, oldValue: r, name: e} : null;
                        a && h(ci({}, i, {name: this.name, key: e})), n && J(this, i), a && g()
                    } finally {
                        vt()
                    }
                }
            }, t.prototype.illegalAccess = function (e, t) {
                return Re("Property '" + t + "' of '" + e + "' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")
            }, t.prototype.observe = function (t, i) {
                return "production" !== e.env.NODE_ENV && Be(i !== !0, "`observe` doesn't support the fire immediately property for observable objects."), G(this, t)
            }, t.prototype.intercept = function (e) {
                return q(this, e)
            }, t.prototype.getKeys = function () {
                var e = this;
                return void 0 === this.keys && (this.keys = new Ui(Object.keys(this.values).filter(function (t) {
                    return e.values[t] instanceof _i
                }), be, "keys(" + this.name + ")", !0)), this.keys.slice()
            }, t
        }(), Ci = {}, ki = {}, Si = Xe("ObservableObjectAdministration", xi), Ti = d(!1, function (e, t, i, n, a) {
            var r = i.get, o = i.set, s = a[0] || {};
            K(e, t, ci({}, s, {get: r, set: o}))
        }), Di = Ti({equals: gi.structural}), Li = function (t, i, n) {
            if ("string" == typeof i) return Ti.apply(null, arguments);
            if (null !== t && "object" == typeof t && 1 === arguments.length) return Ti.apply(null, arguments);
            "production" !== e.env.NODE_ENV && (Be("function" == typeof t, "First argument to `computed` should be an expression."), Be(arguments.length < 3, "Computed takes one or two arguments if used as function"));
            var a = "object" == typeof i ? i : {};
            return a.get = t, a.set = "function" == typeof i ? i : a.set, a.name = a.name || t.name || "", new vi(a)
        };
        Li.struct = Di;
        var Ai = {deep: !0, name: void 0, defaultDecorator: void 0},
            Ei = {deep: !1, name: void 0, defaultDecorator: void 0};
        Object.freeze(Ai), Object.freeze(Ei);
        var $i = ne(ve), Ii = ne(ye), Fi = ne(be), Oi = ne(_e), Mi = {
            box: function (e, t) {
                arguments.length > 2 && me("box");
                var i = fe(t);
                return new _i(e, he(i), i.name)
            }, shallowBox: function (e, t) {
                return arguments.length > 2 && me("shallowBox"), ze("observable.shallowBox", "observable.box(value, { deep: false })"), Ni.box(e, {
                    name: t,
                    deep: !1
                })
            }, array: function (e, t) {
                arguments.length > 2 && me("array");
                var i = fe(t);
                return new Ui(e, he(i), i.name)
            }, shallowArray: function (e, t) {
                return arguments.length > 2 && me("shallowArray"), ze("observable.shallowArray", "observable.array(values, { deep: false })"), Ni.array(e, {
                    name: t,
                    deep: !1
                })
            }, map: function (e, t) {
                arguments.length > 2 && me("map");
                var i = fe(t);
                return new Pi(e, he(i), i.name)
            },
            shallowMap: function (e, t) {
                return arguments.length > 2 && me("shallowMap"), ze("observable.shallowMap", "observable.map(values, { deep: false })"), Ni.map(e, {
                    name: t,
                    deep: !1
                })
            }, object: function (e, t, i) {
                return "string" == typeof arguments[1] && me("object"), ue({}, e, t, fe(i))
            }, shallowObject: function (e, t) {
                return "string" == typeof arguments[1] && me("shallowObject"), ze("observable.shallowObject", "observable.object(values, {}, { deep: false })"), Ni.object(e, {}, {
                    name: t,
                    deep: !1
                })
            }, ref: Fi, shallow: Ii, deep: $i, struct: Oi
        }, Ni = ge;
        Object.keys(Mi).forEach(function (e) {
            return Ni[e] = Mi[e]
        });
        var ji = {}, Pi = function () {
            function t(e, t, i) {
                if (void 0 === t && (t = ve), void 0 === i && (i = "ObservableMap@" + Pe()), this.enhancer = t, this.name = i, this.$mobx = ji, this._keys = new Ui(void 0, be, this.name + ".keys()", !0), "function" != typeof Map) throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");
                this._data = new Map, this._hasMap = new Map, this.merge(e)
            }

            return t.prototype._has = function (e) {
                return this._data.has(e)
            }, t.prototype.has = function (e) {
                return this._hasMap.has(e) ? this._hasMap.get(e).get() : this._updateHasMapEntry(e, !1).get()
            }, t.prototype.set = function (e, t) {
                var i = this._has(e);
                if (W(this)) {
                    var n = V(this, {type: i ? "update" : "add", object: this, newValue: t, name: e});
                    if (!n) return this;
                    t = n.newValue
                }
                return i ? this._updateValue(e, t) : this._addValue(e, t), this
            }, t.prototype.delete = function (e) {
                var t = this;
                if (W(this)) {
                    var i = V(this, {type: "delete", object: this, name: e});
                    if (!i) return !1
                }
                if (this._has(e)) {
                    var n = p(), a = U(this),
                        i = a || n ? {type: "delete", object: this, oldValue: this._data.get(e).value, name: e} : null;
                    return n && h(ci({}, i, {name: this.name, key: e})), Se(function () {
                        t._keys.remove(e), t._updateHasMapEntry(e, !1), t._data.get(e).setNewValue(void 0), t._data.delete(e)
                    }), a && J(this, i), n && g(), !0
                }
                return !1
            }, t.prototype._updateHasMapEntry = function (e, t) {
                var i = this._hasMap.get(e);
                return i ? i.setNewValue(t) : (i = new _i(t, be, this.name + "." + e + "?", !1), this._hasMap.set(e, i)), i
            }, t.prototype._updateValue = function (e, t) {
                var i = this._data.get(e);
                if ((t = i.prepareNewValue(t)) !== bi) {
                    var n = p(), a = U(this),
                        r = a || n ? {type: "update", object: this, oldValue: i.value, name: e, newValue: t} : null;
                    n && h(ci({}, r, {name: this.name, key: e})), i.setNewValue(t), a && J(this, r), n && g()
                }
            }, t.prototype._addValue = function (e, t) {
                var i = this;
                Se(function () {
                    var n = new _i(t, i.enhancer, i.name + "." + e, !1);
                    i._data.set(e, n), t = n.value, i._updateHasMapEntry(e, !0), i._keys.push(e)
                });
                var n = p(), a = U(this), r = a || n ? {type: "add", object: this, name: e, newValue: t} : null;
                n && h(ci({}, r, {name: this.name, key: e})), a && J(this, r), n && g()
            }, t.prototype.get = function (e) {
                return this.has(e) ? this.dehanceValue(this._data.get(e).get()) : this.dehanceValue(void 0)
            }, t.prototype.dehanceValue = function (e) {
                return void 0 !== this.dehancer ? this.dehancer(e) : e
            }, t.prototype.keys = function () {
                return this._keys[we()]()
            }, t.prototype.values = function () {
                var e = this, t = 0;
                return Ce({
                    next: function () {
                        return t < e._keys.length ? {value: e.get(e._keys[t++]), done: !1} : {value: void 0, done: !0}
                    }
                })
            }, t.prototype.entries = function () {
                var e = this, t = 0;
                return Ce({
                    next: function () {
                        if (t < e._keys.length) {
                            var i = e._keys[t++];
                            return {value: [i, e.get(i)], done: !1}
                        }
                        return {done: !0}
                    }
                })
            }, t.prototype.forEach = function (e, t) {
                var i = this;
                this._keys.forEach(function (n) {
                    return e.call(t, i.get(n), n, i)
                })
            }, t.prototype.merge = function (e) {
                var t = this;
                return zi(e) && (e = e.toJS()), Se(function () {
                    Ve(e) ? Object.keys(e).forEach(function (i) {
                        return t.set(i, e[i])
                    }) : Array.isArray(e) ? e.forEach(function (e) {
                        var i = o(e, 2), n = i[0], a = i[1];
                        return t.set(n, a)
                    }) : Ze(e) ? e.forEach(function (e, i) {
                        return t.set(i, e)
                    }) : null !== e && void 0 !== e && Re("Cannot initialize map from " + e)
                }), this
            }, t.prototype.clear = function () {
                var e = this;
                Se(function () {
                    $t(function () {
                        e._keys.slice().forEach(function (t) {
                            return e.delete(t)
                        })
                    })
                })
            }, t.prototype.replace = function (e) {
                var t = this;
                return Se(function () {
                    var i = et(e);
                    t._keys.filter(function (e) {
                        return i.indexOf(e) === -1
                    }).forEach(function (e) {
                        return t.delete(e)
                    }), t.merge(e)
                }), this
            }, Object.defineProperty(t.prototype, "size", {
                get: function () {
                    return this._keys.length
                }, enumerable: !0, configurable: !0
            }), t.prototype.toPOJO = function () {
                var e = this, t = {};
                return this._keys.forEach(function (i) {
                    return t["" + i] = e.get(i)
                }), t
            }, t.prototype.toJS = function () {
                var e = this, t = new Map;
                return this._keys.forEach(function (i) {
                    return t.set(i, e.get(i))
                }), t
            }, t.prototype.toJSON = function () {
                return this.toPOJO()
            }, t.prototype.toString = function () {
                var e = this;
                return this.name + "[{ " + this._keys.map(function (t) {
                    return t + ": " + e.get(t)
                }).join(", ") + " }]"
            }, t.prototype.observe = function (t, i) {
                return "production" !== e.env.NODE_ENV && Be(i !== !0, "`observe` doesn't support fireImmediately=true in combination with maps."), G(this, t)
            }, t.prototype.intercept = function (e) {
                return q(this, e)
            }, t
        }();
        xe(Pi.prototype, function () {
            return this.entries()
        }), Ge(Pi.prototype, "undefined" != typeof Symbol ? Symbol.toStringTag : "@@toStringTag", "Map");
        var Ri, Bi, zi = Xe("ObservableMap", Pi), Hi = function () {
            var e = !1, t = {};
            return Object.defineProperty(t, "0", {
                set: function () {
                    e = !0
                }
            }), Object.create(t)[0] = 1, e === !1
        }(), Wi = 0, qi = function () {
            function e() {
            }

            return e
        }();
        !function (e, t) {
            void 0 !== Object.setPrototypeOf ? Object.setPrototypeOf(e.prototype, t) : void 0 !== e.prototype.__proto__ ? e.prototype.__proto__ = t : e.prototype = t
        }(qi, Array.prototype), Object.isFrozen(Array) && ["constructor", "push", "shift", "concat", "pop", "unshift", "replace", "find", "findIndex", "splice", "reverse", "sort"].forEach(function (e) {
            Object.defineProperty(qi.prototype, e, {configurable: !0, writable: !0, value: Array.prototype[e]})
        });
        var Vi = function () {
            function e(e, t, i, n) {
                this.array = i, this.owned = n, this.values = [], this.lastKnownLength = 0, this.atom = new Ri(e || "ObservableArray@" + Pe()), this.enhancer = function (i, n) {
                    return t(i, n, e + "[..]")
                }
            }

            return e.prototype.dehanceValue = function (e) {
                return void 0 !== this.dehancer ? this.dehancer(e) : e
            }, e.prototype.dehanceValues = function (e) {
                return void 0 !== this.dehancer && this.values.length > 0 ? e.map(this.dehancer) : e
            }, e.prototype.intercept = function (e) {
                return q(this, e)
            }, e.prototype.observe = function (e, t) {
                return void 0 === t && (t = !1), t && e({
                    object: this.array,
                    type: "splice",
                    index: 0,
                    added: this.values.slice(),
                    addedCount: this.values.length,
                    removed: [],
                    removedCount: 0
                }), G(this, e)
            }, e.prototype.getArrayLength = function () {
                return this.atom.reportObserved(), this.values.length
            }, e.prototype.setArrayLength = function (e) {
                if ("number" != typeof e || e < 0) throw new Error("[mobx.array] Out of range: " + e);
                var t = this.values.length;
                if (e !== t) if (e > t) {
                    for (var i = new Array(e - t), n = 0; n < e - t; n++) i[n] = void 0;
                    this.spliceWithArray(t, 0, i)
                } else this.spliceWithArray(e, t - e)
            }, e.prototype.updateArrayLength = function (e, t) {
                if (e !== this.lastKnownLength) throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");
                this.lastKnownLength += t, t > 0 && e + t + 1 > Wi && Me(e + t + 1)
            }, e.prototype.spliceWithArray = function (e, t, i) {
                var n = this;
                Dt(this.atom);
                var a = this.values.length;
                if (void 0 === e ? e = 0 : e > a ? e = a : e < 0 && (e = Math.max(0, a + e)), t = 1 === arguments.length ? a - e : void 0 === t || null === t ? 0 : Math.max(0, Math.min(t, a - e)), void 0 === i && (i = Xi), W(this)) {
                    var r = V(this, {object: this.array, type: "splice", index: e, removedCount: t, added: i});
                    if (!r) return Xi;
                    t = r.removedCount, i = r.added
                }
                i = 0 === i.length ? i : i.map(function (e) {
                    return n.enhancer(e, void 0)
                });
                var o = i.length - t;
                this.updateArrayLength(a, o);
                var s = this.spliceItemsIntoValues(e, t, i);
                return 0 === t && 0 === i.length || this.notifyArraySplice(e, i, s), this.dehanceValues(s)
            }, e.prototype.spliceItemsIntoValues = function (e, t, i) {
                if (i.length < 1e4) return (a = this.values).splice.apply(a, s([e, t], i));
                var n = this.values.slice(e, e + t);
                return this.values = this.values.slice(0, e).concat(i, this.values.slice(e + t)), n;
                var a
            }, e.prototype.notifyArrayChildUpdate = function (e, t, i) {
                var n = !this.owned && p(), a = U(this),
                    r = a || n ? {object: this.array, type: "update", index: e, newValue: t, oldValue: i} : null;
                n && h(ci({}, r, {name: this.atom.name})), this.atom.reportChanged(), a && J(this, r), n && g()
            }, e.prototype.notifyArraySplice = function (e, t, i) {
                var n = !this.owned && p(), a = U(this), r = a || n ? {
                    object: this.array,
                    type: "splice",
                    index: e,
                    removed: i,
                    added: t,
                    removedCount: i.length,
                    addedCount: t.length
                } : null;
                n && h(ci({}, r, {name: this.atom.name})), this.atom.reportChanged(), a && J(this, r), n && g()
            }, e
        }(), Ui = function (e) {
            function t(t, i, n, a) {
                void 0 === n && (n = "ObservableArray@" + Pe()), void 0 === a && (a = !1);
                var r = e.call(this) || this, o = new Vi(n, i, r, a);
                return Ge(r, "$mobx", o), t && t.length && r.spliceWithArray(0, 0, t), Hi && Object.defineProperty(o.array, "0", Gi), r
            }

            return r(t, e), t.prototype.intercept = function (e) {
                return this.$mobx.intercept(e)
            }, t.prototype.observe = function (e, t) {
                return void 0 === t && (t = !1), this.$mobx.observe(e, t)
            }, t.prototype.clear = function () {
                return this.splice(0)
            }, t.prototype.concat = function () {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                return this.$mobx.atom.reportObserved(), Array.prototype.concat.apply(this.peek(), e.map(function (e) {
                    return Ne(e) ? e.peek() : e
                }))
            }, t.prototype.replace = function (e) {
                return this.$mobx.spliceWithArray(0, this.$mobx.values.length, e)
            }, t.prototype.toJS = function () {
                return this.slice()
            }, t.prototype.toJSON = function () {
                return this.toJS()
            }, t.prototype.peek = function () {
                return this.$mobx.atom.reportObserved(), this.$mobx.dehanceValues(this.$mobx.values)
            }, t.prototype.find = function (e, t, i) {
                void 0 === i && (i = 0), 3 === arguments.length && ze("The array.find fromIndex argument to find will not be supported anymore in the next major");
                var n = this.findIndex.apply(this, arguments);
                return n === -1 ? void 0 : this.get(n)
            }, t.prototype.findIndex = function (e, t, i) {
                void 0 === i && (i = 0), 3 === arguments.length && ze("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");
                for (var n = this.peek(), a = n.length, r = i; r < a; r++) if (e.call(t, n[r], r, this)) return r;
                return -1
            }, t.prototype.splice = function (e, t) {
                for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
                switch (arguments.length) {
                    case 0:
                        return [];
                    case 1:
                        return this.$mobx.spliceWithArray(e);
                    case 2:
                        return this.$mobx.spliceWithArray(e, t)
                }
                return this.$mobx.spliceWithArray(e, t, i)
            }, t.prototype.spliceWithArray = function (e, t, i) {
                return this.$mobx.spliceWithArray(e, t, i)
            }, t.prototype.push = function () {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                var i = this.$mobx;
                return i.spliceWithArray(i.values.length, 0, e), i.values.length
            }, t.prototype.pop = function () {
                return this.splice(Math.max(this.$mobx.values.length - 1, 0), 1)[0]
            }, t.prototype.shift = function () {
                return this.splice(0, 1)[0]
            }, t.prototype.unshift = function () {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                var i = this.$mobx;
                return i.spliceWithArray(0, 0, e), i.values.length
            }, t.prototype.reverse = function () {
                var e = this.slice();
                return e.reverse.apply(e, arguments)
            }, t.prototype.sort = function (e) {
                var t = this.slice();
                return t.sort.apply(t, arguments)
            }, t.prototype.remove = function (e) {
                var t = this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);
                return t > -1 && (this.splice(t, 1), !0)
            }, t.prototype.move = function (e, t) {
                function i(e) {
                    if (e < 0) throw new Error("[mobx.array] Index out of bounds: " + e + " is negative");
                    var t = this.$mobx.values.length;
                    if (e >= t) throw new Error("[mobx.array] Index out of bounds: " + e + " is not smaller than " + t)
                }

                if (ze("observableArray.move is deprecated, use .slice() & .replace() instead"), i.call(this, e), i.call(this, t), e !== t) {
                    var n, a = this.$mobx.values;
                    n = e < t ? s(a.slice(0, e), a.slice(e + 1, t + 1), [a[e]], a.slice(t + 1)) : s(a.slice(0, t), [a[e]], a.slice(t, e), a.slice(e + 1)), this.replace(n)
                }
            }, t.prototype.get = function (e) {
                var t = this.$mobx;
                if (t) {
                    if (e < t.values.length) return t.atom.reportObserved(), t.dehanceValue(t.values[e]);
                    console.warn("[mobx.array] Attempt to read an array index (" + e + ") that is out of bounds (" + t.values.length + "). Please check length first. Out of bound indices will not be tracked by MobX")
                }
            }, t.prototype.set = function (e, t) {
                var i = this.$mobx, n = i.values;
                if (e < n.length) {
                    Dt(i.atom);
                    var a = n[e];
                    if (W(i)) {
                        var r = V(i, {type: "update", object: this, index: e, newValue: t});
                        if (!r) return;
                        t = r.newValue
                    }
                    t = i.enhancer(t, a);
                    t !== a && (n[e] = t, i.notifyArrayChildUpdate(e, t, a))
                } else {
                    if (e !== n.length) throw new Error("[mobx.array] Index out of bounds, " + e + " is larger than " + n.length);
                    i.spliceWithArray(e, 0, [t])
                }
            }, t
        }(qi);
        xe(Ui.prototype, function () {
            this.$mobx.atom.reportObserved();
            var e = this, t = 0;
            return Ce({
                next: function () {
                    return t < e.length ? {value: e[t++], done: !1} : {done: !0, value: void 0}
                }
            })
        }), Object.defineProperty(Ui.prototype, "length", {
            enumerable: !1, configurable: !0, get: function () {
                return this.$mobx.getArrayLength()
            }, set: function (e) {
                this.$mobx.setArrayLength(e)
            }
        }), "undefined" != typeof Symbol && Symbol.toStringTag && Ue(Ui.prototype, "undefined" != typeof Symbol ? Symbol.toStringTag : "@@toStringTag", "Array"), ["every", "filter", "forEach", "indexOf", "join", "lastIndexOf", "map", "reduce", "reduceRight", "slice", "some", "toString", "toLocaleString"].forEach(function (e) {
            var t = Array.prototype[e];
            Be("function" == typeof t, "Base function not defined on Array prototype: '" + e + "'"), Ue(Ui.prototype, e, function () {
                return t.apply(this.peek(), arguments)
            })
        }), function (e, t) {
            for (var i = 0; i < t.length; i++) Ue(e, t[i], e[t[i]])
        }(Ui.prototype, ["constructor", "intercept", "observe", "clear", "concat", "get", "replace", "toJS", "toJSON", "peek", "find", "findIndex", "splice", "spliceWithArray", "push", "pop", "set", "shift", "unshift", "reverse", "sort", "remove", "move", "toString", "toLocaleString"]);
        var Gi = Fe(0);
        Me(1e3);
        var Ji = Xe("ObservableArrayAdministration", Vi),
            Yi = "An invariant failed, however the error is obfuscated because this is an production build.", Xi = [];
        Object.freeze(Xi);
        var Ki = {};
        Object.freeze(Ki);
        var Qi = [], Zi = function () {
            },
            en = ["mobxGuid", "spyListeners", "enforceActions", "computedRequiresReaction", "disableErrorBoundaries", "runId"],
            tn = function () {
                function e() {
                    this.version = 5, this.trackingDerivation = null, this.computationDepth = 0, this.runId = 0, this.mobxGuid = 0, this.inBatch = 0, this.pendingUnobservations = [], this.pendingReactions = [], this.isRunningReactions = !1, this.allowStateChanges = !0, this.enforceActions = !1, this.spyListeners = [], this.globalReactionErrorHandlers = [], this.computedRequiresReaction = !1, this.disableErrorBoundaries = !1
                }

                return e
            }(), nn = new tn, an = !1, rn = je();
        rn.__mobxInstanceCount ? (rn.__mobxInstanceCount++, setTimeout(function () {
            an || Re("production" !== e.env.NODE_ENV && "There are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details.")
        }, 1)) : rn.__mobxInstanceCount = 1;
        var on;
        !function (e) {
            e[e.NOT_TRACKING = -1] = "NOT_TRACKING", e[e.UP_TO_DATE = 0] = "UP_TO_DATE", e[e.POSSIBLY_STALE = 1] = "POSSIBLY_STALE", e[e.STALE = 2] = "STALE"
        }(on || (on = {}));
        var sn;
        !function (e) {
            e[e.NONE = 0] = "NONE", e[e.LOG = 1] = "LOG", e[e.BREAK = 2] = "BREAK"
        }(sn || (sn = {}));
        var ln = function () {
            function e(e) {
                this.cause = e
            }

            return e
        }(), cn = function () {
            function e(e, t, i) {
                void 0 === e && (e = "Reaction@" + Pe()), this.name = e, this.onInvalidate = t, this.errorHandler = i, this.observing = [], this.newObserving = [], this.dependenciesState = on.NOT_TRACKING, this.diffValue = 0, this.runId = 0, this.unboundDepsCount = 0, this.__mapid = "#" + Pe(), this.isDisposed = !1, this._isScheduled = !1, this._isTrackPending = !1, this._isRunning = !1, this.isTracing = sn.NONE
            }

            return e.prototype.onBecomeStale = function () {
                this.schedule()
            }, e.prototype.schedule = function () {
                this._isScheduled || (this._isScheduled = !0, nn.pendingReactions.push(this), Pt())
            }, e.prototype.isScheduled = function () {
                return this._isScheduled
            }, e.prototype.runReaction = function () {
                if (!this.isDisposed) {
                    if (mt(), this._isScheduled = !1, St(this)) {
                        this._isTrackPending = !0;
                        try {
                            this.onInvalidate(), this._isTrackPending && p() && f({
                                name: this.name,
                                type: "scheduled-reaction"
                            })
                        } catch (e) {
                            this.reportExceptionInDerivation(e)
                        }
                    }
                    vt()
                }
            }, e.prototype.track = function (e) {
                mt();
                var t, i = p();
                i && (t = Date.now(), h({name: this.name, type: "reaction"})), this._isRunning = !0;
                var n = Lt(this, e, void 0);
                this._isRunning = !1, this._isTrackPending = !1, this.isDisposed && Et(this), kt(n) && this.reportExceptionInDerivation(n.cause), i && g({time: Date.now() - t}), vt()
            }, e.prototype.reportExceptionInDerivation = function (e) {
                var t = this;
                if (this.errorHandler) return void this.errorHandler(e, this);
                if (nn.disableErrorBoundaries) throw e;
                var i = "[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '" + this;
                console.error(i, e), p() && f({
                    type: "error",
                    name: this.name,
                    message: i,
                    error: "" + e
                }), nn.globalReactionErrorHandlers.forEach(function (i) {
                    return i(e, t)
                })
            }, e.prototype.dispose = function () {
                this.isDisposed || (this.isDisposed = !0, this._isRunning || (mt(), Et(this), vt()))
            }, e.prototype.getDisposer = function () {
                var e = this.dispose.bind(this);
                return e.$mobx = this, e
            }, e.prototype.toString = function () {
                return "Reaction[" + this.name + "]"
            }, e.prototype.trace = function (e) {
                void 0 === e && (e = !1), Mt(this, e)
            }, e
        }(), dn = 100, un = function (e) {
            return e()
        }, pn = Xe("Reaction", cn), fn = 0, hn = {detectCycles: !0, exportMapsAsObjects: !0};
        try {
            e.env.NODE_ENV
        } catch (t) {
            var gn = "undefined" != typeof window ? window : n;
            void 0 === e && (gn.process = {}), gn.process.env = {}
        }
        if (function () {
            function t() {
            }

            "testCodeMinification" !== t.name && "production" !== e.env.NODE_ENV && console.warn("[mobx] you are running a minified build, but 'process.env.NODE_ENV' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle")
        }(), "object" == typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ && __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({
            spy: m,
            extras: {getDebugName: Le}
        }), "production" !== e.env.NODE_ENV && void 0 !== a && void 0 !== a.exports) {
            var mn = !1;
            Object.defineProperty(a.exports, "default", {
                enumerable: !1, get: function () {
                    mn || (mn = !0, console.warn('The MobX package does not have a default export. Use \'import { thing } from "mobx"\' (recommended) or \'import * as mobx from "mobx"\' instead."'))
                }
            }), ["extras", "Atom", "BaseAtom", "asFlat", "asMap", "asReference", "asStructure", "autorunAsync", "createTranformer", "expr", "isModifierDescriptor", "isStrictModeEnabled", "map", "useStrict", "whyRun"].forEach(function (e) {
                Object.defineProperty(a.exports, e, {
                    enumerable: !1, get: function () {
                        Re("'" + e + "' is no longer part of the public MobX api. Please consult the changelog to find out where this functionality went")
                    }, set: function () {
                    }
                })
            })
        }
    }.call(t, i(621), i(622), i(623)(e))
}, function (e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(89), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    t.default = function (e, t, i) {
        return t in e ? (0, a.default)(e, t, {value: i, enumerable: !0, configurable: !0, writable: !0}) : e[t] = i, e
    }
}, function (e, t, i) {
    i(86), i(60), i(88), i(173), i(180), i(181), e.exports = i(3).Promise
}, function (e, t, i) {
    "use strict";
    var n, a, r, o, s = i(35), l = i(2), c = i(34), d = i(94), u = i(11), p = i(16), f = i(38), h = i(174), g = i(175),
        m = i(95), v = i(96).set, y = i(177)(), b = i(83), _ = i(97), w = i(98), x = l.TypeError, C = l.process,
        k = l.Promise, S = "process" == d(C), T = function () {
        }, D = a = b.f, L = !!function () {
            try {
                var e = k.resolve(1), t = (e.constructor = {})[i(5)("species")] = function (e) {
                    e(T, T)
                };
                return (S || "function" == typeof PromiseRejectionEvent) && e.then(T) instanceof t
            } catch (e) {
            }
        }(), A = function (e) {
            var t;
            return !(!p(e) || "function" != typeof(t = e.then)) && t
        }, E = function (e, t) {
            if (!e._n) {
                e._n = !0;
                var i = e._c;
                y(function () {
                    for (var n = e._v, a = 1 == e._s, r = 0; i.length > r;) !function (t) {
                        var i, r, o = a ? t.ok : t.fail, s = t.resolve, l = t.reject, c = t.domain;
                        try {
                            o ? (a || (2 == e._h && F(e), e._h = 1), o === !0 ? i = n : (c && c.enter(), i = o(n), c && c.exit()), i === t.promise ? l(x("Promise-chain cycle")) : (r = A(i)) ? r.call(i, s, l) : s(i)) : l(n)
                        } catch (e) {
                            l(e)
                        }
                    }(i[r++]);
                    e._c = [], e._n = !1, t && !e._h && $(e)
                })
            }
        }, $ = function (e) {
            v.call(l, function () {
                var t, i, n, a = e._v, r = I(e);
                if (r && (t = _(function () {
                    S ? C.emit("unhandledRejection", a, e) : (i = l.onunhandledrejection) ? i({
                        promise: e,
                        reason: a
                    }) : (n = l.console) && n.error && n.error("Unhandled promise rejection", a)
                }), e._h = S || I(e) ? 2 : 1), e._a = void 0, r && t.e) throw t.v
            })
        }, I = function (e) {
            if (1 == e._h) return !1;
            for (var t, i = e._a || e._c, n = 0; i.length > n;) if (t = i[n++], t.fail || !I(t.promise)) return !1;
            return !0
        }, F = function (e) {
            v.call(l, function () {
                var t;
                S ? C.emit("rejectionHandled", e) : (t = l.onrejectionhandled) && t({promise: e, reason: e._v})
            })
        }, O = function (e) {
            var t = this;
            t._d || (t._d = !0, t = t._w || t, t._v = e, t._s = 2, t._a || (t._a = t._c.slice()), E(t, !0))
        }, M = function (e) {
            var t, i = this;
            if (!i._d) {
                i._d = !0, i = i._w || i;
                try {
                    if (i === e) throw x("Promise can't be resolved itself");
                    (t = A(e)) ? y(function () {
                        var n = {_w: i, _d: !1};
                        try {
                            t.call(e, c(M, n, 1), c(O, n, 1))
                        } catch (e) {
                            O.call(n, e)
                        }
                    }) : (i._v = e, i._s = 1, E(i, !1))
                } catch (e) {
                    O.call({_w: i, _d: !1}, e)
                }
            }
        };
    L || (k = function (e) {
        h(this, k, "Promise", "_h"), f(e), n.call(this);
        try {
            e(c(M, this, 1), c(O, this, 1))
        } catch (e) {
            O.call(this, e)
        }
    }, n = function (e) {
        this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1
    }, n.prototype = i(178)(k.prototype, {
        then: function (e, t) {
            var i = D(m(this, k));
            return i.ok = "function" != typeof e || e, i.fail = "function" == typeof t && t, i.domain = S ? C.domain : void 0, this._c.push(i), this._a && this._a.push(i), this._s && E(this, !1), i.promise
        }, catch: function (e) {
            return this.then(void 0, e)
        }
    }), r = function () {
        var e = new n;
        this.promise = e, this.resolve = c(M, e, 1), this.reject = c(O, e, 1)
    }, b.f = D = function (e) {
        return e === k || e === o ? new r(e) : a(e)
    }), u(u.G + u.W + u.F * !L, {Promise: k}), i(36)(k, "Promise"), i(179)("Promise"), o = i(3).Promise, u(u.S + u.F * !L, "Promise", {
        reject: function (e) {
            var t = D(this);
            return (0, t.reject)(e), t.promise
        }
    }), u(u.S + u.F * (s || !L), "Promise", {
        resolve: function (e) {
            return w(s && this === o ? k : this, e)
        }
    }), u(u.S + u.F * !(L && i(144)(function (e) {
        k.all(e).catch(T)
    })), "Promise", {
        all: function (e) {
            var t = this, i = D(t), n = i.resolve, a = i.reject, r = _(function () {
                var i = [], r = 0, o = 1;
                g(e, !1, function (e) {
                    var s = r++, l = !1;
                    i.push(void 0), o++, t.resolve(e).then(function (e) {
                        l || (l = !0, i[s] = e, --o || n(i))
                    }, a)
                }), --o || n(i)
            });
            return r.e && a(r.v), i.promise
        }, race: function (e) {
            var t = this, i = D(t), n = i.reject, a = _(function () {
                g(e, !1, function (e) {
                    t.resolve(e).then(i.resolve, n)
                })
            });
            return a.e && n(a.v), i.promise
        }
    })
}, function (e, t) {
    e.exports = function (e, t, i, n) {
        if (!(e instanceof t) || void 0 !== n && n in e) throw TypeError(i + ": incorrect invocation!");
        return e
    }
}, function (e, t, i) {
    var n = i(34), a = i(141), r = i(142), o = i(9), s = i(61), l = i(143), c = {}, d = {},
        t = e.exports = function (e, t, i, u, p) {
            var f, h, g, m, v = p ? function () {
                return e
            } : l(e), y = n(i, u, t ? 2 : 1), b = 0;
            if ("function" != typeof v) throw TypeError(e + " is not iterable!");
            if (r(v)) {
                for (f = s(e.length); f > b; b++) if ((m = t ? y(o(h = e[b])[0], h[1]) : y(e[b])) === c || m === d) return m
            } else for (g = v.call(e); !(h = g.next()).done;) if ((m = a(g, y, h.value, t)) === c || m === d) return m
        };
    t.BREAK = c, t.RETURN = d
}, function (e, t) {
    e.exports = function (e, t, i) {
        var n = void 0 === i;
        switch (t.length) {
            case 0:
                return n ? e() : e.call(i);
            case 1:
                return n ? e(t[0]) : e.call(i, t[0]);
            case 2:
                return n ? e(t[0], t[1]) : e.call(i, t[0], t[1]);
            case 3:
                return n ? e(t[0], t[1], t[2]) : e.call(i, t[0], t[1], t[2]);
            case 4:
                return n ? e(t[0], t[1], t[2], t[3]) : e.call(i, t[0], t[1], t[2], t[3])
        }
        return e.apply(i, t)
    }
}, function (e, t, i) {
    var n = i(2), a = i(96).set, r = n.MutationObserver || n.WebKitMutationObserver, o = n.process, s = n.Promise,
        l = "process" == i(27)(o);
    e.exports = function () {
        var e, t, i, c = function () {
            var n, a;
            for (l && (n = o.domain) && n.exit(); e;) {
                a = e.fn, e = e.next;
                try {
                    a()
                } catch (n) {
                    throw e ? i() : t = void 0, n
                }
            }
            t = void 0, n && n.enter()
        };
        if (l) i = function () {
            o.nextTick(c)
        }; else if (r) {
            var d = !0, u = document.createTextNode("");
            new r(c).observe(u, {characterData: !0}), i = function () {
                u.data = d = !d
            }
        } else if (s && s.resolve) {
            var p = s.resolve();
            i = function () {
                p.then(c)
            }
        } else i = function () {
            a.call(n, c)
        };
        return function (n) {
            var a = {fn: n, next: void 0};
            t && (t.next = a), e || (e = a, i()), t = a
        }
    }
}, function (e, t, i) {
    var n = i(12);
    e.exports = function (e, t, i) {
        for (var a in t) i && e[a] ? e[a] = t[a] : n(e, a, t[a]);
        return e
    }
}, function (e, t, i) {
    "use strict";
    var n = i(2), a = i(3), r = i(6), o = i(7), s = i(5)("species");
    e.exports = function (e) {
        var t = "function" == typeof a[e] ? a[e] : n[e];
        o && t && !t[s] && r.f(t, s, {
            configurable: !0, get: function () {
                return this
            }
        })
    }
}, function (e, t, i) {
    "use strict";
    var n = i(11), a = i(3), r = i(2), o = i(95), s = i(98);
    n(n.P + n.R, "Promise", {
        finally: function (e) {
            var t = o(this, a.Promise || r.Promise), i = "function" == typeof e;
            return this.then(i ? function (i) {
                return s(t, e()).then(function () {
                    return i
                })
            } : e, i ? function (i) {
                return s(t, e()).then(function () {
                    throw i
                })
            } : e)
        }
    })
}, function (e, t, i) {
    "use strict";
    var n = i(11), a = i(83), r = i(97);
    n(n.S, "Promise", {
        try: function (e) {
            var t = a.f(this), i = r(e);
            return (i.e ? t.reject : t.resolve)(i.v), t.promise
        }
    })
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.markPoint", []).directive("markPoint", function () {
            return {
                link: function (e) {
                    e.addMarkPoint = function () {
                        e.checkYAxisUniqId().then(function () {
                            e.inAddingMarkPoint = !0, setTimeout(function () {
                                $(document).on("click.cancelMarkPoint", function () {
                                    e.endAddMarkPoint(), e.$$phase || e.$apply()
                                });
                                var t = $(".chart-args").height(),
                                    i = $(".chart-left").width() + $(".chart-left-side").width() + 10;
                                $(".add-point-mask .mask-top").css({
                                    height: t,
                                    lineHeight: t + "px"
                                }), $(".add-point-mask .mask-left").css({width: i})
                            }, 0)
                        })
                    }, e.endAddMarkPoint = function () {
                        e.inAddingMarkPoint = !1, $(document).off("click.cancelMarkPoint")
                    }
                }, controller: ["$scope", "$q", "commonService", "ngDialog", function (e, t, i, n) {
                    var a = !1;
                    e.checkYAxisUniqId = function () {
                        var i = t.defer();
                        if (a) i.resolve(); else {
                            var n = e.chart_ops.meta.level[e.drill_level], r = n.y[0] || n.y_optional[0];
                            if (r && !r.uniq_id) {
                                var o = +new Date;
                                angular.forEach(n.y, function (e) {
                                    e.uniq_id = o++
                                }), angular.forEach(n.y_optional, function (e) {
                                    e.uniq_id = o++
                                }), e.saveChartImmediate().then(i.resolve, i.reject)
                            } else i.resolve()
                        }
                        return a = !0, i.promise
                    }, e.editMarkPoint = function (t, i, a) {
                        a && a.stopPropagation(), n.open({
                            template: "/static/chart-edit/mark-point/mark-point-modal.html",
                            className: "ngdialog-theme-default ngdialog-small",
                            scope: e,
                            data: {point: angular.extend({}, t, {ct_id: i}), type: "modify"},
                            controller: "EditMarkPointCtrl"
                        })
                    }, e.removeMarkPoint = function (t, n) {
                        return i.fieldComment.del(t, n.fc_id).then(function () {
                            e.saveChartImmediate()
                        })
                    }, e.removeMarkPointById = function (t, n, a) {
                        return a.stopPropagation(), i.fieldComment.del(t, n).then(function () {
                            e.saveChartImmediate()
                        })
                    }, e.markPoint_conf = [], e.show_makePoint_model = function (t) {
                        e.$broadcast("displayMarkPointModel", t)
                    }
                }]
            }
        }).directive("chartMarkPoints", function () {
            return {
                replace: !0,
                templateUrl: "/static/chart-edit/mark-point/mark-point-tooltip.html",
                link: function (e) {
                    e.setTooltipPos = function (t, i) {
                        i.show = !0, i.popover = {}, i.pos.top < 15 || "edit" === e.mode && i.pos.top < 40 ? i.popover.pos = "bottom" : i.popover.pos = "top"
                    }
                }
            }
        })
    }()
}, function (e, t, i) {
    "use strict";
    angular.module("BC.common").service("pendingRequests", [function () {
        var e = [];
        this.get = function () {
            return e
        }, this.add = function (t) {
            e.push(t)
        }, this.remove = function (t) {
            var i = e.indexOf(t);
            i > -1 && e.splice(i, 1)
        }, this.cancelAll = function () {
            angular.forEach(e, function (e) {
                e.canceller.resolve()
            }), e.length = 0
        }, this.cancelOne = function (t) {
            if (t && e) for (var i = 0, n = e.length; i < n; i++) if (e[i].url == t) {
                e[i].canceller.resolve(), this.remove(e[i]);
                break
            }
        }
    }]).config(["$httpProvider", function (e) {
        e.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded;charset=utf-8", e.defaults.headers.common.Accept = "application/json";
        var t = function e(t) {
            var i, n, a, r, o, s, l, c = "";
            for (i in t) if ((n = t[i]) instanceof Array) for (l = 0; l < n.length; ++l) o = n[l], a = i + "[" + l + "]", s = {}, s[a] = o, c += e(s) + "&"; else if (n instanceof Object) for (r in n) o = n[r], a = i + "[" + r + "]", s = {}, s[a] = o, c += e(s) + "&"; else void 0 !== n && null !== n && (c += encodeURIComponent(i) + "=" + encodeURIComponent(n) + "&");
            return c.length ? c.substr(0, c.length - 1) : c
        }, i = function (e) {
            var t = "; " + document.cookie, i = t.split("; " + e + "=");
            if (2 == i.length) return i.pop().split(";").shift()
        }("locale") || "zh";
        e.defaults.transformRequest = function (e) {
            if (angular.isObject(e) && String(e)) {
                var i = {};
                return angular.copy(e, i), t(i)
            }
            return e
        }, e.interceptors.push(["$templateCache", function (e) {
            return {
                request: function (t) {
                    return "GET" === t.method && void 0 === e.get(t.url) && t.url.match(/\.html$/) && (t.url = t.url + "?lang=" + i), t
                }
            }
        }])
    }]).factory("chartType", ["$rootScope", "$translate", function (e, t) {
        var i = [{cate: "C20", type: "C200", name: "表格", status: !1}, {
            cate: "C31",
            type: "C310",
            name: "指标卡",
            status: !1
        }, {cate: "C26", type: "C261", name: "计量图", status: !1}, {
            cate: "C22",
            type: "C220",
            name: "折线图",
            status: !1
        }, {cate: "C21", type: "C210", name: "簇状柱形图", status: !1}, {
            cate: "C21",
            type: "C211",
            name: "堆积柱形图",
            status: !1
        }, {cate: "C21", type: "C212", name: "百分比堆积柱形图", status: !1}, {
            cate: "C32",
            type: "C320",
            name: "瀑布图",
            status: !1
        }, {cate: "C24", type: "C240", name: "条形图", status: !1}, {
            cate: "C24",
            type: "C241",
            name: "堆积条形图",
            status: !1
        }, {cate: "C24", type: "C242", name: "百分比堆积条形图", status: !1}, {
            cate: "C24",
            type: "C243",
            name: "对比条形图",
            status: !1
        }, {cate: "C35", type: "C350", name: "面积图", status: !1}, {
            cate: "C35",
            type: "C351",
            name: "堆积面积图",
            status: !1
        }, {cate: "C35", type: "C352", name: "百分比堆积面积图", status: !1}, {
            cate: "C28",
            type: "C280",
            name: "散点图",
            status: !1
        }, {cate: "C23", type: "C230", name: "普通饼图", status: !1}, {
            cate: "C36",
            type: "C360",
            name: "旭日图",
            status: !1
        }, {cate: "C37", type: "C370", name: "树图", status: !1}, {
            cate: "C33",
            type: "C330",
            name: "漏斗图",
            status: !1
        }, {cate: "C27", type: "C271", name: "地图", status: !1}, {
            cate: "C25",
            type: "C250",
            name: "双轴",
            status: !1
        }, {cate: "C340", type: "C340", name: "词云", status: !1}, {
            cate: "C30",
            type: "C301",
            name: "平行集图",
            status: !1
        }, {cate: "C29", type: "C290", name: "雷达图", status: !1}, {cate: "C28", type: "C281", name: "箱线图", status: !1}];
        return i.forEach(function (e) {
            e.name = t.instant(e.type)
        }), i
    }]).factory("chartTypeTip", ["$rootScope", "$translate", function (e, t) {
        var i = [{
            type: "C200",
            name: "表格",
            dimension: "0orMore",
            metric: "0orMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C310",
            name: "指标卡",
            dimension: "only0",
            metric: "OneOrTwo",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C261",
            name: "计量图",
            dimension: "only0",
            metric: "onlyOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C220",
            name: "折线图",
            dimension: "OneOrTwo",
            metric: "OneorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C210",
            name: "簇状柱形图",
            dimension: "NoMoreThanTwo",
            metric: "OneorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C211",
            name: "堆积柱形图",
            dimension: "OneOrTwo",
            metric: "TwoorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C212",
            name: "百分比堆积柱形图",
            dimension: "OneOrTwo",
            metric: "TwoorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C320",
            name: "瀑布图",
            dimension: "",
            metric: "",
            combination: ["OneOrTwoDOneV", "0DMoreV"],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C240",
            name: "条形图",
            dimension: "NoMoreThanTwo",
            metric: "OneorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C241",
            name: "堆积条形图",
            dimension: "OneOrTwo",
            metric: "TwoorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C242",
            name: "百分比堆积条形图",
            dimension: "OneOrTwo",
            metric: "TwoorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C243",
            name: "对比条形图",
            dimension: "",
            metric: "",
            combination: ["OneDTwoV", "OneDOneCOneV"],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C300",
            name: "桑基图",
            dimension: "onlyTwo",
            metric: "onlyOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C301",
            name: "平行集图",
            dimension: "TwotoTwenty",
            metric: "onlyOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C230",
            name: "普通饼图",
            dimension: "",
            metric: "",
            combination: ["OneDOneV", "0DMoreV"],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C271",
            name: "地图",
            dimension: "onlyOne",
            metric: "onlyOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C272",
            name: "地图(气泡)",
            dimension: "onlyOne",
            metric: "onlyOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C273",
            name: "地图(标签云)",
            dimension: "onlyOne",
            metric: "onlyOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C290",
            name: "雷达图",
            dimension: "",
            metric: "",
            combination: ["OneDMoreV", "0andMoreC3andMoreV"],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C250",
            name: "双轴",
            dimension: "NoMoreThanTwo",
            metric: "onlyMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C280",
            name: "散点图",
            dimension: "0orMore",
            metric: "onlyTwo",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C281",
            name: "箱线图",
            dimension: "OneOrTwo",
            metric: "onlyOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C330",
            name: "漏斗图",
            dimension: "",
            metric: "",
            combination: ["OneDOneV", "0DMoreV"],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C340",
            name: "词云",
            dimension: "onlyOne",
            metric: "only0",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C350", name: "面积图", dimension: "0orOne", metric: "OneorMore", combination: [],
            showDimension: "", showMetric: "", showCombination: [], needComparison: !0
        }, {
            type: "C351",
            name: "堆积面积图",
            dimension: "onlyOne",
            metric: "TwoorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C352",
            name: "百分比堆积面积图",
            dimension: "onlyOne",
            metric: "TwoorMore",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !0
        }, {
            type: "C360",
            name: "旭日图",
            dimension: "TwoorMore",
            metric: "onlyOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }, {
            type: "C370",
            name: "树图",
            dimension: "OneorMore",
            metric: "0orOne",
            combination: [],
            showDimension: "",
            showMetric: "",
            showCombination: [],
            needComparison: !1
        }];
        return i.forEach(function (e) {
            e.name = t.instant(e.type), 0 == e.combination.length ? (e.showDimension = t.instant(e.dimension), e.showMetric = t.instant(e.metric)) : (e.showCombination[0] = t.instant(e.combination[0]), e.showCombination[1] = t.instant(e.combination[1]))
        }), i
    }]).factory("doubleYaxisChartTypes", [function () {
        return ["C220", "C210", "C211", "C212"]
    }]).factory("operatorHelpLink", ["$rootScope", "$translate", function (e, t) {
        var i = "";
        return function (e) {
            switch (e) {
                case"globalFilter":
                    i = "https://help.bdp.cn/index.php?title=%E5%85%A8%E5%B1%80%E7%AD%9B%E9%80%89%E5%99%A8";
                    break;
                case"tableFormatting":
                    i = "https://help.bdp.cn/index.php?title=%E9%A2%9C%E8%89%B2%E4%B8%8E%E6%9D%A1%E4%BB%B6%E6%A0%BC%E5%BC%8F#.E8.A1.A8.E6.A0.BC";
                    break;
                case"plotLine":
                    i = "https://help.bdp.cn/index.php?title=%E9%A2%84%E8%AD%A6%E4%B8%8E%E8%BE%85%E5%8A%A9%E7%BA%BF#.E8.BE.85.E5.8A.A9.E7.BA.BF";
                    break;
                case"chartWarn":
                    i = "https://help.bdp.cn/index.php?title=%E9%A2%84%E8%AD%A6%E4%B8%8E%E8%BE%85%E5%8A%A9%E7%BA%BF#.E9.A2.84.E8.AD.A6";
                    break;
                case"dateYoy":
                    i = "https://help.bdp.cn/index.php?title=%E9%AB%98%E7%BA%A7%E8%AE%A1%E7%AE%97#.E7.BB.B4.E5.BA.A6.E4.B8.BA.E9.9D.9E.E6.97.A5.E6.9C.9F.E5.AD.97.E6.AE.B5";
                    break;
                case"customYoy":
                    i = "https://help.bdp.cn/index.php?title=%E9%AB%98%E7%BA%A7%E8%AE%A1%E7%AE%97#.E7.BB.B4.E5.BA.A6.E4.B8.BA.E6.97.A5.E6.9C.9F.E5.AD.97.E6.AE.B5";
                    break;
                case"advanceDateFilter":
                    i = "https://help.bdp.cn/index.php?title=%E7%AD%9B%E9%80%89%E5%99%A8#.E6.97.A5.E6.9C.9F.E5.AD.97.E6.AE.B5";
                    break;
                case"innerFilter":
                    i = "https://help.bdp.cn/index.php?title=%E7%AD%9B%E9%80%89%E5%99%A8#.E5.9B.BE.E5.86.85.E7.AD.9B.E9.80.89.E5.99.A8";
                    break;
                case"colorSettingByNum":
                    i = "https://help.bdp.cn/index.php?title=%E9%A2%9C%E8%89%B2%E4%B8%8E%E6%9D%A1%E4%BB%B6%E6%A0%BC%E5%BC%8F#.E6.B8.90.E5.8F.98.E9.A2.9C.E8.89.B2";
                    break;
                case"colorSettingByField":
                    i = "https://help.bdp.cn/index.php?title=%E9%A2%9C%E8%89%B2%E4%B8%8E%E6%9D%A1%E4%BB%B6%E6%A0%BC%E5%BC%8F#.E6.9E.9A.E4.B8.BE.E9.A2.9C.E8.89.B2";
                    break;
                case"resultFilter":
                    i = "https://help.bdp.cn/index.php?title=%E7%AD%9B%E9%80%89%E5%99%A8#.E7.BB.93.E6.9E.9C.E7.AD.9B.E9.80.89.E5.99.A8";
                    break;
                case"chartChain":
                    i = "https://help.bdp.cn/index.php?title=%E5%9B%BE%E8%A1%A8%E8%81%94%E5%8A%A8";
                    break;
                case"chartMoveCalc":
                    i = "https://help.bdp.cn/index.php?title=%E9%AB%98%E7%BA%A7%E8%AE%A1%E7%AE%97#.E7.A7.BB.E5.8A.A8.E8.AE.A1.E7.AE.97";
                    break;
                case"chartRepetition":
                    i = "https://help.bdp.cn/index.php?title=%E9%AB%98%E7%BA%A7%E8%AE%A1%E7%AE%97#.E9.87.8D.E5.A4.8D.E7.8E.87";
                    break;
                case"chartRetention":
                    i = "https://help.bdp.cn/index.php?title=%E9%AB%98%E7%BA%A7%E8%AE%A1%E7%AE%97#.E7.95.99.E5.AD.98.E7.8E.87";
                    break;
                case"chartRunning":
                    i = "https://help.bdp.cn/index.php?title=%E9%AB%98%E7%BA%A7%E8%AE%A1%E7%AE%97#.E7.B4.AF.E8.AE.A1.E8.AE.A1.E7.AE.97";
                    break;
                case"chartActivity":
                    i = "https://help.bdp.cn/index.php?title=%E9%AB%98%E7%BA%A7%E8%AE%A1%E7%AE%97#.E6.B4.BB.E8.B7.83.E7.8E.87";
                    break;
                case"csv":
                    i = "https://help.bdp.cn/index.php?title=%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0#.E4.B8.8A.E4.BC.A0CSV.E6.96.87.E4.BB.B6";
                    break;
                case"fileUpload":
                    i = "https://help.bdp.cn/index.php?title=%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0#.E4.B8.8A.E4.BC.A0Excel.E6.96.87.E4.BB.B6";
                    break;
                case"fileAppend":
                    i = "https://help.bdp.cn/index.php?title=%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0#.E8.BF.BD.E5.8A.A0.E6.95.B0.E6.8D.AE";
                    break;
                case"fileReplace":
                    i = "https://help.bdp.cn/index.php?title=%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0#.E6.9B.BF.E6.8D.A2.E6.95.B0.E6.8D.AE";
                    break;
                case"chartArgs":
                    i = "https://help.bdp.cn/index.php?title=%E5%8F%82%E6%95%B0";
                    break;
                default:
                    i = ""
            }
            i && window.open(i)
        }
    }]).factory("formula", ["$rootScope", "$translate", function (e, t) {
        var i = [{name: "求和", type: "SUM", show: "number"}, {name: "平均值", type: "AVERAGE", show: "number"}, {
            name: "计数",
            type: "COUNT",
            show: "all"
        }, {name: "去重计数", type: "COUNT_DISTINCT", show: "all"}, {
            name: "更多计数方式",
            type: "more",
            show: "number",
            list: [{name: "最大值", type: "MAX", show: "number"}, {name: "最小值", type: "MIN", show: "number"}, {
                name: "中位数",
                type: "MED",
                show: "number"
            }, {
                name: "百分位",
                type: "PERCENTILE",
                show: "number",
                list: [{name: "5", type: "PERCENT_5", show: "number", percent: .05}, {
                    name: "10",
                    type: "PERCENT_10",
                    show: "number",
                    percent: .1
                }, {name: "25", type: "PERCENT_25", show: "number", percent: .25}, {
                    name: "50",
                    type: "PERCENT_50",
                    show: "number",
                    percent: .5
                }, {name: "75", type: "PERCENT_75", show: "number", percent: .75}, {
                    name: "90",
                    type: "PERCENT_90",
                    show: "number",
                    percent: .9
                }, {name: "95", type: "PERCENT_95", show: "number", percent: .95}]
            }]
        }];
        return i.forEach(function (e) {
            e.list ? (e.name = t.instant("more"), e.list.forEach(function (e) {
                e.list ? (e.name = t.instant("PERCENTILE"), e.list.forEach(function (e) {
                    e.name = t.instant(e.type)
                })) : e.name = t.instant(e.type)
            })) : e.name = t.instant(e.type)
        }), i
    }]).factory("formulaFunc", function () {
        return [{name: "求和", type: "SUM", show: "number"}, {name: "平均值", type: "AVG", show: "number"}, {
            name: "最大值",
            type: "MAX",
            show: "number"
        }, {name: "最小值", type: "MIN", show: "number"}, {name: "计数", type: "COUNT", show: "all"}, {
            name: "去重计数",
            type: "COUNT(DISTINCT())",
            show: "all"
        }]
    }).factory("verifyTbName", ["$translate", function (e) {
        return function (e) {
            return !0
        }
    }]).factory("dateTimeByHalfHour", ["$rootScope", function (e) {
        return [{value: "00:00:00", label: "00:00"}, {value: "01:00:00", label: "01:00"}, {
            value: "02:00:00",
            label: "02:00"
        }, {value: "03:00:00", label: "03:00"}, {value: "04:00:00", label: "04:00"}, {
            value: "05:00:00",
            label: "05:00"
        }, {value: "06:00:00", label: "06:00"}, {value: "07:00:00", label: "07:00"}, {
            value: "08:00:00",
            label: "08:00"
        }, {value: "09:00:00", label: "09:00"}, {value: "10:00:00", label: "10:00"}, {
            value: "11:00:00",
            label: "11:00"
        }, {value: "12:00:00", label: "12:00"}, {value: "13:00:00", label: "13:00"}, {
            value: "14:00:00",
            label: "14:00"
        }, {value: "15:00:00", label: "15:00"}, {value: "16:00:00", label: "16:00"}, {
            value: "17:00:00",
            label: "17:00"
        }, {value: "18:00:00", label: "18:00"}, {value: "19:00:00", label: "19:00"}, {
            value: "20:00:00",
            label: "20:00"
        }, {value: "21:00:00", label: "21:00"}, {value: "22:00:00", label: "22:00"}, {
            value: "23:00:00",
            label: "23:00"
        }]
    }]).factory("capacityHint", ["ngDialog", "$rootScope", function (e, t) {
        return function () {
            e.closeAll(), t.maxSize = t.personalInfo.capacity_info.capacity, e.open({
                template: "/static/partials/dialogTemplates/capacityHint.html",
                className: "ngdialog-theme-default ngDialog-width-330",
                scope: t
            })
        }
    }]).factory("upgradeLevelTip", ["ngDialog", function (e) {
        return function (t) {
            var i = {
                title: "API同步提示",
                vipLevel0Text: "目前您最多可接入3个第三方API，您可自定义设置需要同步的API，其他API将停止同步，升级会员可同步更多API哦~",
                vipLevel1Text: "目前您最多可接入8个第三方API，您可自定义设置需要同步的API，其他API将停止同步，升级金钻可同步更多API哦~",
                vipLevel2Text: "如需更多，请联系BDP商务热线400-063-9966"
            };
            angular.extend(i, t), e.open({
                template: "/static/partials/dialogTemplates/upgrade_level_tip.html",
                className: "ngdialog-theme-default ngDialog-width-330",
                data: i
            })
        }
    }]).factory("errHint", ["$rootScope", "$timeout", "$location", "$translate", function (e, t, i, n) {
        var a = 0, r = null, o = !1;
        return function (i, s) {
            var l, c = "/login.html", d = e.language;
            s = s || {}, window.isThirdIframe || (window.isThirdIframe = e.isThirdIframe = !1);
            var u = !1;
            if ("number" != typeof i && isNaN(Number(i))) l = i; else {
                switch (1 * i) {
                    case 1:
                        $.cookie("token", ""), $.cookie("token_invalid", 1, {path: "/"}), o || (o = !0, c = bdp.bdpLogin.checkPartnerLogin(), location.href = c);
                        break;
                    case 2:
                        l = n.instant("error.API");
                        break;
                    case 3:
                        return 0 == a && (l = n.instant("error.noExistOrAccess"), alert(l), a += 1), void(window.location.href = "/");
                    case 4:
                        l = n.instant("error.unManager");
                        break;
                    case 10:
                        l = n.instant("error.serverFail");
                        break;
                    case 11:
                        l = n.instant("error.paramError");
                        break;
                    case 12:
                        l = n.instant("error.internetOutRange"), setTimeout(function () {
                            c = bdp.bdpLogin.checkPartnerLogin(), location.href = c
                        }, 1e3);
                        break;
                    case 13:
                        0 == a && (l = n.instant("error.haveLogin"), alert(l), a += 1), $.cookie("token", ""), $.cookie("token_invalid", 1, {path: "/"}), c = bdp.bdpLogin.checkPartnerLogin(), location.href = c;
                        break;
                    case 14:
                        c = bdp.bdpLogin.checkPartnerLogin(), location.href = c;
                        break;
                    case 15:
                        0 == a && (l = n.instant("error.noPermission"), alert(l), a += 1), c = bdp.bdpLogin.checkPartnerLogin(), location.href = c;
                        break;
                    case 18:
                        l = n.instant("error.noBind"), l = "";
                        break;
                    case 19:
                        l = n.instant("error.confirmed"), c = bdp.bdpLogin.checkPartnerLogin(), location.href = c, l = "";
                        break;
                    case 20:
                        l = "", $.cookie("password_changed", 1, {path: "/"}), c = bdp.bdpLogin.checkPartnerLogin(), window.location.href = c;
                        break;
                    case 21:
                        l = n.instant("error.noChartOrnoAccess");
                        break;
                    case 22:
                        l = n.instant("error.dashMetaTooLarge");
                        break;
                    case 102:
                        l = n.instant("error.datasourceNotExist");
                        break;
                    case 103:
                        l = n.instant("error.noDelete");
                        break;
                    case 104:
                        l = n.instant("ds.connectFail");
                        break;
                    case 126:
                        l = n.instant("error.apiTimesLimit");
                        break;
                    case 106:
                        l = n.instant("error.saveSuccessAndSync");
                        break;
                    case 110:
                        l = n.instant("error.dsRepeat");
                        break;
                    case 111:
                        l = n.instant("error.captchaSendError");
                        break;
                    case 112:
                        l = n.instant("error.captchaError");
                        break;
                    case 113:
                        l = n.instant("error.captchaOutOfLimit");
                        break;
                    case 114:
                        l = n.instant("error.kstRepeat");
                        break;
                    case 115:
                        l = n.instant("error.kstError");
                        break;
                    case 116:
                        l = n.instant("error.jinyiweiConnFail");
                        break;
                    case 117:
                        l = n.instant("error.loginInfoErrorOrUserLock");
                        break;
                    case 118:
                        l = n.instant("error.dsConfigError");
                        break;
                    case 119:
                        l = n.instant("error.loginFrequently");
                        break;
                    case 120:
                        l = n.instant("error.phoneVerifyFail");
                        break;
                    case 121:
                        l = n.instant("error.serviceException");
                        break;
                    case 122:
                        l = n.instant("error.accountFail");
                        break;
                    case 124:
                        l = n.instant("error.passworkWrong");
                        break;
                    case 125:
                        l = n.instant("error.usernameWrong");
                        break;
                    case 128:
                        l = n.instant("ds.baiduTaskExist");
                        break;
                    case 129:
                        l = n.instant("error.tokenWrong");
                        break;
                    case 201:
                        l = n.instant("wb.isUpdatingThen");
                        break;
                    case 1001:
                        l = n.instant("error.userForbidden");
                        break;
                    case 1002:
                        l = n.instant("error.password");
                        break;
                    case 1004:
                        l = n.instant("error.noAuthorizationInfo");
                        break;
                    case 1009:
                        l = n.instant("error.noUser");
                        break;
                    case 1012:
                        l = n.instant("error.limitNumber");
                        break;
                    case 1014:
                        l = "", $.cookie("password_reset", 1, {path: "/"}), c = bdp.bdpLogin.checkPartnerLogin(), window.location.href = c;
                        break;
                    case 1015:
                        l = n.instant("error.accountActived");
                        break;
                    case 1016:
                        l = n.instant("error.accoutLimit");
                        break;
                    case 1018:
                        l = n.instant("error.codeError");
                        break;
                    case 1023:
                        l = n.instant("error.mobileExisted");
                        break;
                    case 3003:
                        l = n.instant("error.noId");
                        break;
                    case 3005:
                        l = n.instant("error.needCtId");
                        break;
                    case 3008:
                        l = n.instant("error.needId");
                        break;
                    case 3009:
                        l = n.instant("error.missId");
                        break;
                    case 3011:
                        l = n.instant("error.fidId");
                        break;
                    case 3204:
                        l = n.instant("error.dashboardOccupied");
                        break;
                    case 3210:
                        l = n.instant("error.dashboardNotbelong");
                        break;
                    case 3211:
                        l = n.instant("error.noChart");
                        break;
                    case 3212:
                        l = n.instant("error.noFolder");
                        break;
                    case 3216:
                        l = n.instant("error.infoErrorInTable");
                        break;
                    case 3219:
                        l = n.instant("error.tplNotExist");
                        break;
                    case 3220:
                        l = n.instant("error.noDashboard");
                        break;
                    case 3221:
                        l = n.instant("error.noBelong");
                        break;
                    case 3222:
                        l = n.instant("error.chartsNumMismatch");
                        break;
                    case 3223:
                        l = n.instant("error.noSelect");
                        break;
                    case 3224:
                        l = n.instant("error.noLinkage");
                        break;
                    case 3231:
                        l = n.instant("error.needConfigList");
                        break;
                    case 3232:
                        l = n.instant("error.infoErrorInTable");
                        break;
                    case 7001:
                        l = n.instant("error.needFormula");
                        break;
                    case 7024:
                        l = n.instant("error.stringAbove");
                        break;
                    case 7200:
                        l = n.instant("error.errorFormula");
                        break;
                    case 7300:
                        l = n.instant("error.unknow");
                        break;
                    case 7400:
                        l = n.instant("error.fieldNull");
                        break;
                    case 7500:
                        l = n.instant("error.fieldRepeat");
                        break;
                    case 7590:
                        l = n.instant("error.fieldUsing");
                        break;
                    case 7601:
                        l = n.instant("error.dataNameRepeat");
                        break;
                    case 7700:
                        l = n.instant("error.errorFormula");
                        break;
                    case 8003:
                        l = n.instant("error.accoutRepeat");
                        break;
                    case 9003:
                        l = n.instant("error.info");
                        break;
                    case 10004:
                        l = n.instant("error.datasourceSyncing");
                        break;
                    case 10005:
                        l = n.instant("error.dsAmountOutOfLimit");
                        break;
                    case 10006:
                        l = s.warn_msg;
                        break;
                    case 10007:
                        l = n.instant("error.noDelete");
                        break;
                    case 10100:
                        l = n.instant("error.noDianJingAccess");
                        break;
                    case 10115:
                        l = n.instant("error.startDateError");
                        break;
                    case 10116:
                        l = n.instant("error.endDateError");
                        break;
                    case 10117:
                        l = n.instant("ds.baiduTaskDomainExit");
                        break;
                    case 10118:
                        l = n.instant("ds.baiduTaskDomainNotExit");
                        break;
                    case 10119:
                        l = n.instant("ds.baiduTaskCompanyError");
                        break;
                    case 10120:
                        l = n.instant("ds.baiduTaskDomainError");
                        break;
                    case 10121:
                    case 10122:
                    case 10123:
                        l = s.warn_msg;
                        break;
                    case 10124:
                        l = n.instant("ds.baiduTaskWeekError");
                        break;
                    case 10625:
                    case 10626:
                        l = n.instant("error.changeFileEncode");
                        break;
                    case 12002:
                        l = n.instant("error.groupRepeat");
                        break;
                    case 12008:
                        l = n.instant("error.contactManager");
                        break;
                    case 12010:
                        l = n.instant("error.noActivateCode");
                        break;
                    case 12011:
                        l = n.instant("error.errorActivateCode");
                        break;
                    case 12111:
                        l = s.warn_msg, setTimeout(function () {
                            $.cookie("token", ""), $.cookie("token_invalid", 1, {path: "/"}), c = bdp.bdpLogin.checkPartnerLogin(), location.href = c
                        }, 1e3);
                        break;
                    case 13001:
                        l = n.instant("error.noSelectId");
                        break;
                    case 13004:
                        l = n.instant("error.selectRepeat");
                        break;
                    case 16004:
                        l = n.instant("error.noPermissionToPreview");
                        break;
                    case 16005:
                        l = n.instant("error.replacingExcelFailed");
                        break;
                    case 16006:
                        l = n.instant("error.exceptionInExcel");
                        break;
                    case 16007:
                        l = n.instant("error.excelNotExist");
                        break;
                    case 16008:
                        l = n.instant("error.excelIsUpdating");
                        break;
                    case 16009:
                        l = n.instant("error.deletingExcelFailed");
                        break;
                    case 16010:
                        l = n.instant("error.excelCanNotBeEmpty");
                        break;
                    case 16011:
                        l = n.instant("error.appendingExcelFailed");
                        break;
                    case 16012:
                        l = n.instant("error.fieldsInExcelMismatch");
                        break;
                    case 16013:
                        l = n.instant("error.sameFieldsWhileAppending");
                        break;
                    case 16014:
                        l = n.instant("error.fieldsNotInTable");
                        break;
                    case 16015:
                        l = n.instant("error.sheetNotExist");
                        break;
                    case 16016:
                        l = n.instant("error.sheetCanNotBeIgnored");
                        break;
                    case 16017:
                        l = n.instant("error.uploadingExcelFailed");
                        break;
                    case 16018:
                    case 16019:
                        l = n.instant("error.fieldsInExcelMismatch");
                        break;
                    case 16025:
                        l = n.instant("error.csvEncodeNotSupport");
                        break;
                    case 16026:
                        l = n.instant("error.changeFileEncode");
                        break;
                    case 19001:
                        l = n.instant("error.selectRely");
                        break;
                    case 19002:
                        l = n.instant("wb.noWorksheets");
                        break;
                    case 19005:
                        l = "聚类字段名称不能为空";
                        break;
                    case 21007:
                        l = n.instant("error.dbCannotBeDeleted");
                        break;
                    case 22001:
                        l = n.instant("error.aggregationsRepeat");
                        break;
                    case 22002:
                        l = n.instant("error.aggregationsNull");
                        break;
                    case 23023:
                        l = n.instant("error.accoutExisted");
                        break;
                    case 23002:
                        l = n.instant("error.captchaError");
                        break;
                    case 23003:
                        l = n.instant("error.personalAccountNotExist");
                        break;
                    case 23008:
                        l = n.instant("error.nicknameExisted");
                        break;
                    case 23009:
                        l = n.instant("error.emailError");
                        break;
                    case 23010:
                        l = n.instant("error.captchaCounts");
                        break;
                    case 23013:
                        l = n.instant("error.formatError");
                        break;
                    case 23014:
                        l = n.instant("error.oneHourLater");
                        break;
                    case 23016:
                        l = n.instant("error.twentyFourHourLater");
                        break;
                    case 23019:
                        l = n.instant("error.emailExisted");
                        break;
                    case 23020:
                        l = n.instant("error.phoneExisted");
                        break;
                    case 23023:
                        l = n.instant("error.personalUserExisted");
                        break;
                    case 23030:
                        l = n.instant("error.sensitiveWord");
                        break;
                    case 24007:
                        l = n.instant("error.chartUnremove");
                        break;
                    case 24008:
                        l = n.instant("error.userLimit");
                        break;
                    case 24009:
                        l = n.instant("error.haveDeleted");
                        break;
                    case 24010:
                        l = n.instant("error.haveRule");
                        break;
                    case 24011:
                        l = n.instant("error.haveChart");
                        break;
                    case 25001:
                        l = n.instant("error.folderExisted");
                        break;
                    case 25004:
                        l = n.instant("wb.cannotMoveToSubFolder");
                        break;
                    case 25005:
                        l = n.instant("wb.cannotMoveTwoLevelsToSubFolder");
                        break;
                    case 26003:
                        l = n.instant("error.nameExisted");
                        break;
                    case 26007:
                        l = n.instant("error.exceedTasks");
                        break;
                    case 26008:
                        l = "分享表暂不支持聚类模型";
                        break;
                    case 29e3:
                        l = s.warn_msg;
                        break;
                    case 30001:
                        l = n.instant("error.tableIsBeingUsed");
                        break;
                    case 30003:
                        l = s.warn_msg;
                        break;
                    case 30004:
                        l = n.instant("error.tableMustBeBasetable");
                        break;
                    case 30007:
                        l = n.instant("error.fieldsInExcelMismatch");
                        break;
                    case 30009:
                        l = n.instant("error.sameTitleExistInExcel");
                        break;
                    case 31e3:
                        l = n.instant("error.existRely");
                        break;
                    case 31005:
                    case 31006:
                        l = s.warn_msg;
                        break;
                    case 31007:
                        l = n.instant("error.viewGeneratorRuleNotExist");
                        break;
                    case 31008:
                        l = n.instant("error.canNotModifyThisViewType");
                        break;
                    case 31009:
                        l = n.instant("error.viewGeneratorTypeNotExist");
                        break;
                    case 32001:
                        l = n.instant("error.openDsTokenError");
                        break;
                    case 32002:
                        l = n.instant("error.ipNotInWhiteList");
                        break;
                    case 40001:
                        l = n.instant("error.noPermissionToDelete");
                        break;
                    case 40005:
                        l = s.warn_msg;
                        break;
                    case 40007:
                        l = n.instant("error.dataTooLong");
                        break;
                    case 40008:
                        l = n.instant("error.changeToAggregatorFunc");
                        break;
                    case 40009:
                        l = n.instant("error.titleHasInvalidCharacter");
                        break;
                    case 40010:
                        l = n.instant("error.contentHasInvalidCharacter");
                        break;
                    case 40011:
                        l = n.instant("error.functionNeedBrackets");
                        break;
                    case 40012:
                        l = n.instant("error.mapCanNotBeEmpty");
                        break;
                    case 41001:
                        l = n.instant("error.LdapTokenIsError");
                        break;
                    case 41002:
                        l = n.instant("error.LdapTokenIsDestroyed");
                        break;
                    case 41003:
                        l = n.instant("error.LdapUserNotExist");
                        break;
                    case 70001:
                        l = n.instant("ds.auxiliaryFieldHasExist");
                        break;
                    case 70002:
                        l = n.instant("error.fieldNameUsing");
                        break;
                    case 81001:
                        var p = "";
                        s.warn_msg && (p = "：" + s.warn_msg), l = n.instant("error.illegalFilter") + p;
                        break;
                    case 81002:
                        var p = "";
                        s.warn_msg && (p = "：" + s.warn_msg), l = n.instant("error.illegalSortField") + p;
                        break;
                    case 9e4:
                        l = n.instant("error.partitionExceed");
                        break;
                    case 90001:
                        l = n.instant("error.partitionNotEnough");
                        break;
                    case 90002:
                        l = n.instant("error.intermediateTableNoPartition");
                        break;
                    case 90003:
                        l = n.instant("error.unionTableNoPartition");
                        break;
                    case 90006:
                        l = n.instant("error.childTbBeingCreated");
                        break;
                    case 90100:
                        s.result && s.result.map && (l = s.result.map(function (e) {
                            return e.name
                        }).join()), l = n.instant("chartTemplate.tplUnusable") + "[" + l + "]";
                        break;
                    case 90007:
                        l = n.instant("error.tableTypeNotSupportOpt");
                        break;
                    case 90008:
                        l = n.instant("error.updateModeNotChanged");
                        break;
                    case 90009:
                        l = n.instant("error.canNotChangeToRealTimeUpdateMode");
                        break;
                    case 90010:
                        l = n.instant("error.canNotSetPartitionField");
                        break;
                    case 90011:
                        l = n.instant("error.canNotMergeThisTable");
                        break;
                    case 90012:
                        l = n.instant("error.updatedSoFrequentlyPleaseWait");
                        break;
                    case 100001:
                        l = n.instant("error.failedGetOperatorInfo");
                        break;
                    case 100002:
                        l = n.instant("error.authorizationExpired");
                        break;
                    case 100003:
                        l = n.instant("error.authorizationRecordNotExist");
                        break;
                    case 100004:
                        l = n.instant("error.failedAddOperator");
                        break;
                    case 100005:
                        l = n.instant("error.failedCreateAuthorization");
                        break;
                    case 100006:
                        l = n.instant("error.failedUpdateLdapToken");
                        break;
                    case 100007:
                        l = n.instant("error.failedCreateLdapToken");
                        break;
                    case 100008:
                        l = n.instant("error.failedDeleteLdapToken");
                        break;
                    case 110001:
                        l = n.instant("error.mobileOSorVersionRequired");
                        break;
                    case 110002:
                        l = n.instant("error.unknownMobileOS");
                        break;
                    case 110003:
                        l = n.instant("error.mobileVersionFormatError");
                        break;
                    case 120001:
                        l = n.instant("error.srcDashIdRequiredWhenMovingChart");
                        break;
                    case 120002:
                        l = n.instant("error.targetDashIdRequiredWhenMovingChart");
                        break;
                    case 120003:
                        l = n.instant("error.dashFolderIdRequiredWhenMovingChart");
                        break;
                    case 120004:
                        l = n.instant("error.forbiddenMovingChart");
                        break;
                    case 120005:
                        l = n.instant("error.movedChartExist");
                        break;
                    default:
                        l = s && s.warn_msg ? s.warn_msg : "en" == d ? "Something Wrong~" : "出错啦", u = !0
                }
            }
            return s.dialog ? e.global.dialog_hint = l : 1 == Number(l) && 20 == Number(l) && 1014 == Number(l) || (e.global.hint = l, e.$$phase || e.$digest()), s.always_show || (r && (t.cancel(r.$$timeoutId), r = null), r = t(function () {
                e.global.dialog_hint = "", e.global.hint = ""
            }, s.delay_time || 5e3)), u
        }
    }]).factory("tbList", ["$rootScope", "$http", "errHint", function (e, t, i) {
        return function () {
            t.get("/api/tb/list", {params: {access_token: $.cookie("token")}}).success(function (t) {
                if (0 == t.status) t.result ? e.tbList = t.result.self : e.tbList = []; else {
                    var n = parseInt(t.status);
                    i(n)
                }
            })
        }
    }]).factory("formatFieldPercentile", ["formulaKeyMap", function (e) {
        return function (e) {
            if (!e) return e;
            if ("PERCENT" != e.aggregator) return e.percent = "", e;
            var t = new RegExp("^(\\d|[1-9]\\d|100)$");
            if ("中位数" == e.aggregator_name || "Median" == e.aggregator_name) e.aggregator = "MED", e.percent = "0.5"; else if (t.test(parseInt(e.aggregator_name))) {
                var i = parseInt(e.aggregator_name);
                e.aggregator = "PERCENT_" + i, e.percent = String(i / 100)
            }
            return e
        }
    }]).factory("setAdvanceAggregatorName", ["formulaKeyMap", function (e) {
        function t(e) {
            var t = bdpChart.language || "zh", i = "";
            if (e.hasOwnProperty("yoyQoqType")) {
                var n = e.yoyQoqType;
                e.hasOwnProperty("YoY") && "rate" == n && function (e) {
                    switch (e) {
                        case"year":
                            i = "zh" == t ? "去年同比率" : "Compare to last year(rate)";
                            break;
                        case"quarter":
                            i = "zh" == t ? "上季同比率" : "Compare to last quarter(rate)";
                            break;
                        case"month":
                            i = "zh" == t ? "上月同比率" : "Compare to last month(rate)";
                            break;
                        case"week":
                            i = "zh" == t ? "上周同比率" : "Compare to last week(rate)";
                            break;
                        case"day":
                            i = "zh" == t ? "上日同比率" : "Compare to last day(rate)"
                    }
                }(e.YoY), e.hasOwnProperty("YoY") && "value" == n && function (e) {
                    switch (e) {
                        case"year":
                            i = "zh" == t ? "去年同比值" : "Compare to last year(value)";
                            break;
                        case"quarter":
                            i = "zh" == t ? "上季同比值" : "Compare to last quarter(value)";
                            break;
                        case"month":
                            i = "zh" == t ? "上月同比值" : "Compare to last month(value)";
                            break;
                        case"week":
                            i = "zh" == t ? "上周同比值" : "Compare to last week(value)";
                            break;
                        case"day":
                            i = "zh" == t ? "上日同比值" : "Compare to last day(value)"
                    }
                }(e.YoY), e.hasOwnProperty("QoQ") && function (e) {
                    switch (e) {
                        case"rate":
                            i = "zh" == t ? "环比增长率" : "Day on Day(rate)";
                            break;
                        case"value":
                            i = "zh" == t ? "环比增长值" : "Day on Day(value)"
                    }
                }(n)
            }
            if (e.hasOwnProperty("yoyQoqSetting")) {
                var a = e.yoyQoqSetting;
                "qoq" == a.type ? function (e) {
                    switch (e) {
                        case"year":
                            i = "zh" == t ? "按年环比增长" : "Year on Year";
                            break;
                        case"quarter":
                            i = "zh" == t ? "按季环比增长" : "Quarter on Quarter";
                            break;
                        case"month":
                            i = "zh" == t ? "按月环比增长" : "Month on Month";
                            break;
                        case"week":
                            i = "zh" == t ? "按周环比增长" : "Week on Week";
                            break;
                        case"day":
                            i = "zh" == t ? "按日环比增长" : "Day on Day"
                    }
                }(a.date_field_type) : "filter" == a.type ? function (e) {
                    if (1 == e.aggregator || 2 == e.aggregator) {
                        if (0 == e.compare_method) "filter_yoy_month" == e.filter_type ? i = "zh" == t ? "同比上月增长值" : "Compare to last month year on year increase value" : "filter_yoy_year" == e.filter_type ? i = "zh" == t ? "同比去年增长值" : "Compare to last year year on year increase value" : "filter_yoy_week" == e.filter_type && (i = "zh" == t ? "同比上周增长值" : "Compare to last week year on year increase value"); else if (1 == e.compare_method) i = "zh" == t ? "环比增长值" : "Month on month increase value"; else if (2 == e.compare_method) if ("zh" == t) {
                            switch (i = "对比" + (0 == e.relative_type ? "前移" : "后移") + e.relative_value, e.date_field_type) {
                                case"year":
                                    i += "年";
                                    break;
                                case"quarter":
                                    i += "季";
                                    break;
                                case"month":
                                    i += "月";
                                    break;
                                case"week":
                                    i += "周";
                                    break;
                                case"day":
                                    i += "天"
                            }
                            i += "增长值"
                        } else i = "Compare to " + (0 == e.relative_type ? "Move forward " : "Backward shift ") + e.relative_value + " " + e.date_field_type; else 3 == e.compare_method && (i = "zh" == t ? "对比自定义日期增长值" : "Compare custom date increase value");
                        2 == e.aggregator && (i = i.replace(/值/g, "率").replace(/value/gi, "rate"))
                    } else if (3 == e.aggregator) if (0 == e.compare_method) "filter_yoy_month" == e.filter_type ? i = "zh" == t ? "上月同期值" : "Last month same period value" : "filter_yoy_year" == e.filter_type ? i = "zh" == t ? "去年同期值" : "Last year same period value" : "filter_yoy_week" == e.filter_type && (i = "zh" == t ? "上周同期值" : "Last week same period value"); else if (1 == e.compare_method) i = "zh" == t ? "环比对比日期值" : "Month on month compare date value"; else if (2 == e.compare_method) if ("zh" == t) {
                        switch (i = (0 == e.relative_type ? "前移 " : "后移 ") + e.relative_value, e.date_field_type) {
                            case"year":
                                i += "年";
                                break;
                            case"quarter":
                                i += "季";
                                break;
                            case"month":
                                i += "月";
                                break;
                            case"week":
                                i += "周";
                                break;
                            case"day":
                                i += "天"
                        }
                        i += "值"
                    } else i = (0 == e.relative_type ? "Move forward" : "Backward shift") + e.relative_value + e.date_field_type; else 3 == e.compare_method && (i = "zh" == t ? "自定义日期值" : "Custom date value")
                }(a) : function (e) {
                    switch (e) {
                        case"yoy_week":
                            i = "zh" == t ? "上周同比" : "Compare to last week";
                            break;
                        case"yoy_month":
                            i = "zh" == t ? "上月同比" : "Compare to last month";
                            break;
                        case"yoy_quarter":
                            i = "zh" == t ? "上季同比" : "Compare to last quarter";
                            break;
                        case"yoy_year":
                            i = "zh" == t ? "去年同比" : "Compare to last year";
                            break;
                        case"custom":
                        case"nodate_custom":
                            i = "zh" == t ? "自定义对比" : "Custom Comparison"
                    }
                }(a.type)
            }
            return i
        }

        function i(e) {
            var t = bdpChart.language || "zh", i = "1", n = "";
            if (e.hasOwnProperty("advance_aggregator")) {
                var a = e.advance_aggregator.type;
                "percentage" == a ? (n = "zh" == t ? "百分比" : "Percentage", i = "1") : "retention" == a ? (n = "zh" == t ? "留存率" : "Retention", i = "0") : "activity" == a ? (n = "zh" == t ? "活跃率" : "Active Rate", i = "0") : "repetition" == a ? (n = "zh" == t ? "重复率" : "Repetition", i = "0") : "running" == a ? (n = "zh" == t ? "累计计算" : "Cumulative Calculation", i = "1") : "moving" == a && (n = "zh" == t ? "移动计算" : "Moving Calculation", i = "1")
            }
            var r = [];
            return r.push(i), r.push(n), r
        }

        return function (n, a) {
            var r = bdpChart.language || "zh", o = "", s = "", l = "", c = [];
            if (n.hasOwnProperty("aggregator")) {
                if (o = e[n.aggregator], Number(n.aggregator_name) <= 100 && Number(n.aggregator_name) > 0) if ("zh" == r) o = "百分位" + parseInt(n.aggregator_name); else {
                    var d = "";
                    d = parseInt(n.aggregator_name) % 10 == 1 && 11 != parseInt(n.aggregator_name) ? "st percentile" : parseInt(n.aggregator_name) % 10 == 2 && 12 != parseInt(n.aggregator_name) ? "nd percentile" : parseInt(n.aggregator_name) % 10 == 3 && 13 != parseInt(n.aggregator_name) ? "rd percentile" : "th percentile", o = parseInt(n.aggregator_name) + d
                }
                1 == n.is_build_aggregated && (o = "")
            }
            n.hasOwnProperty("advance_aggregator") && (c = i(n), s = c[1], "0" == c[0] && (o = ""));
            var u = t(n);
            return u && (s = u), a ? l = s : o ? (l += "(" + o, s && (l += " - " + s), l += ")") : s && (l += "(", l += s, l += ")"), l
        }
    }]).factory("getFunctionList", ["$rootScope", "commonService", function (e, t) {
        var i = {base: [], all: []};
        t.getFunctionList().then(function (t) {
            if (0 == t.status) {
                var n = t.result.classification, a = {};
                angular.forEach(n, function (e, t) {
                    a[t] = [], angular.forEach(n[t], function (e, i) {
                        a[t].push({usage: e.usage, description: e.desc, example: e.demo, type: e.name})
                    })
                }), i.base = a[2].concat(a[3]).concat(a[4]).concat(a[5]).concat(a[6]), e.global.funcList = i
            }
        })
    }]).service("commonHttp", ["$http", "$rootScope", "errHint", "pendingRequests", "$q", function (e, t, i, n, a) {
        function r(e, t) {
            return o = {}, o._t = (new Date).getTime(), angular.extend(o, e), s.errHint = !0, t ? angular.extend(s, t) : t = {}, o
        }

        var o = {}, s = {errHint: !0}, l = function (e) {
            if (e = e.data, "0" == e.status) return e;
            if (s.errHint) {
                var t = parseInt(e.status), n = null;
                e.errstr && (n = {warn_msg: e.errstr, result: e.result}), i(t || e.errstr, n)
            }
            return e
        }, c = ["/api/warn/amount"], d = /^\//;
        return {
            get: function (t, i, s) {
                var u = a.defer();
                o = r(i, s);
                var p = {url: t, canceller: u};
                d.test(t) || (t = "/" + t), $.inArray(t, c) < 0 && n.add(p);
                var f = e.get(t, {params: o, timeout: u.promise}).then(l);
                return f.finally(function () {
                    n.remove(p)
                }), f.success = function (e) {
                    f.then(e)
                }, f.error = function (e) {
                    f.then(null, e)
                }, f
            }, post: function (t, i, n) {
                d.test(t) || (t = "/" + t), o = r(i, n);
                var s = a.when(e.post(t, o), l);
                return s.success = function (e) {
                    s.then(e)
                }, s.error = function (e) {
                    s.then(null, e)
                }, s
            }
        }
    }]).factory("webSocket", [function () {
        function e() {
            return !a && o > 0
        }

        var t = {}, i = null, n = null, a = !1, r = location.protocol, o = 30, s = 0, l = 0, c = !1, d = {
            timeout: 12e4, timeoutObj: null, reset: function (e, t) {
                clearTimeout(this.timeoutObj), this.start(e, t)
            }, start: function (e, i) {
                this.timeoutObj = setTimeout(function () {
                    c = !0, o = 30, t.reConnect(e, i), BDPLogger.log("feStatistics", {
                        category: "websocket",
                        action: "reconnect",
                        opt_label: "heartbeat",
                        opt_value: 1
                    })
                }, this.timeout)
            }
        };
        if (!SockJS) throw"Please add socketjs to your app.";
        return t.connect = function (n, u) {
            u = u || {};
            var p = ["opened", "received", "closed"], f = $.cookie("token");
            return /^http(s)?:\/\//.test(n) || (n = r + "//" + location.host + n), i = new SockJS(n + "?token=" + f), d.reset(n, u), i.addEventListener("heartbeat", function (e) {
                d.reset(n, u)
            }), i.onopen = function () {
                u.onOpen && u.onOpen({status: p[0]})
            }, i.onmessage = function (e) {
                var t = "string" == typeof e.data ? $.parseJSON(e.data) : e.data;
                if (0 == t.state && (a = !0, o < 30 && BDPLogger.log("feStatistics", {
                    category: "websocket",
                    action: "reconnect",
                    opt_label: "onsuccess",
                    opt_value: 1
                }), o = 30, s > 0 && BDPLogger.log("feStatistics", {
                    category: "websocket",
                    action: "reconnectSuc",
                    opt_label: s,
                    opt_value: 1
                }), s++), 0 == t.state) {
                    if (!u.onMessage) throw"Please give the func of onMessage.";
                    u.onMessage({status: p[1], data: t}), c && (BDPLogger.log("feStatistics", {
                        category: "websocket",
                        action: "reconnect",
                        opt_label: "heartbeatSuc",
                        opt_value: 1
                    }), c = !1), d.reset(n, u)
                }
            }, i.onclose = function (r) {
                new Date;
                a = !1, l != s && (l = s, BDPLogger.log("feStatistics", {
                    category: "websocket",
                    action: "reconnectSucClose",
                    opt_label: s,
                    opt_value: 1
                })), BDPLogger.log("feStatistics", {
                    category: "websocket",
                    action: "connect",
                    opt_label: "onerror",
                    opt_value: 1
                }), 0 == o && (BDPLogger.log("feStatistics", {
                    category: "websocket",
                    action: "reconnect",
                    opt_label: "onfail",
                    opt_value: 1
                }), BDPLogger.log("webSocket30FailMsg", {token: f}), 0 == s && BDPLogger.log("feStatistics", {
                    category: "websocket",
                    action: "reconnectFirst",
                    opt_label: "onfail",
                    opt_value: 1
                })), e() && t.reConnect(n, u), u.onClose && (u.onClose({status: p[2]}), i = null)
            }, t
        }, t.reConnect = function (e, i) {
            t.disconnect(), n = setTimeout(function () {
                t.connect(e, i), o--
            }, 2e3)
        }, t.disconnect = function () {
            null != i && (i.close(), i = null), clearTimeout(n), a = !1
        }, t.send = function (e) {
            i && i.send(e)
        }, t.socket = i, t
    }]).factory("autoRefreshChart", ["$timeout", function (e) {
        var t = {};
        return t.visibilityChartOptions = [], t.refresh = function (e) {
            var i = ["data-ctid", "data-scrolling", "data-drill-status"], n = e.drawChartUrl, a = e.type || "dashboard",
                r = e.scope, o = e.ret, s = "string" == typeof o.data ? $.parseJSON(o.data) : o.data,
                l = (o.status, o._t), c = null;
            if (!r) throw"Please give param scope.";
            if (!r.dashEditMode && !r.autoPlaying && n && (c = s.ct_id || [], c.length)) {
                for (var d in r.draw_chart_url) {
                    var u = r.draw_chart_url[d].options.ct_id;
                    if ($.inArray(u, c) > -1) {
                        var p = $("[" + i[0] + "=" + u + "]"), f = p.attr(i[1]), h = p.attr(i[2]), g = f && "true" == f,
                            m = h && "true" == h;
                        if (g || m) continue;
                        if (p.attr("data-from-websocket", "1"), window.BDP_visibilityChangeFlag && (p.attr("data-page-active", window.BDP_visibilityChangePageActive), !window.BDP_visibilityChangePageActive)) {
                            "dashboard" == a ? t.visibilityChartOptions.push(n[d].options) : t.visibilityChartOptions.push(n.options);
                            continue
                        }
                        "dashboard" == a ? n[d].options._t = l : n.options._t = l, r.draw_chart_url[d].options.read_cache = !1
                    }
                }
                r.$$phase || r.$digest()
            }
        }, t.refreshWaitChart = function () {
            var i = ["data-ctid", "data-scrolling", "data-drill-status"];
            t.visibilityChartOptions.length > 0 && e(function () {
                for (var e = new Date, n = 0, a = t.visibilityChartOptions.length; n < a; n++) {
                    $("[" + i[0] + "=" + t.visibilityChartOptions[n].ct_id + "]").attr("data-from-websocket", 2), t.visibilityChartOptions[n] && (t.visibilityChartOptions[n]._t = e)
                }
                t.visibilityChartOptions = []
            }, 0)
        }, t
    }]).factory("projectTreeCache", ["$timeout", function (e) {
        return {
            treeCache: null, clearTreeCache: function () {
                this.treeCache = null
            }, setTreeCache: function (e) {
                this.treeCache = angular.copy(e)
            }, getTreeCache: function (e) {
                return this.treeCache
            }
        }
    }]).factory("queryTextFunc", function () {
        return {
            existText: function (e, t) {
                return !!e && e.toString().toLowerCase().indexOf(t.toLowerCase()) >= 0
            }
        }
    }).factory("permissionWhitelist", [function () {
        return {
            customChart: ["zjhyxx", "qiyangdemo", "bdp_tpl", "yjzg", "ICBC_SH", "bdp_dev", "szsaiwei", "Weimeizi", "HNYOUA", "haizhi", "zhytest", "mcyp", "demo", "bdp_autotest", "jodo", "chunyu.me", "renrenche", "gzqixiu", "shiji", "dotcunited", "qdsj", "shiyong", "tujia", "CZHB", "HKCTSHOTELS", "uxintest", "HRXX", "ylzc", "wfnz", "qddemo", "howbuy", "datatest", "duxin_gsgz", "haizhi_test", "renrenche_test", "qa_autotest", "bdp_autotest", "baihe"],
            dataScreen: ["zjhyxx", "qiyangdemo", "haizhi", "demo", "shiyong", "tujia", "CZHB", "uxintest", "DFV", "ICBC_SH", "whwd", "datatest", "duxin_gsgz", "haizhi_test", "qa_autotest", "bdp_autotest"],
            tableImg: ["wanli", "haizhi", "demo", "hofan", "szkushang", "datatest", "duxin_gsgz", "haizhi_test", "qa_autotest", "bdp_autotest"],
            multiDimension: ["boldseas", "haizhi", "demo", "mcyp", "bdp_autotest", "maimaiche", "HNYOUA", "datatest", "duxin_gsgz", "haizhi_test", "qa_autotest"],
            newTraining: [null, "GJHJ", "kmf", "ktm", "duxin_gsgz", "duxin_gsgz2", "haizhi", "demo", "bdp_autotest", "comjia", "data center", "hofan", "CXJQAS", "tujia", "CZHB", "oBike", "uxintest", "shiyong", "ylzc", "shaks", "qddemo", "shnewl", "zxzq", "kaishu", "howbuy", "mcyp", "p2peye", "baihe", "Eaju", "datatest", "zh_gsgz", "zh_gsgz2", "haizhi_test", "qa_autotest", "aitouzi"]
        }
    }]).service("formulaService", ["$translate", "ngDialog", "commonService", "$timeout", "$q", function (e, t, i, n, a) {
        this.isTooLong = function (e) {
            return i.field.getAggregatorLen(e).then(function (e) {
                var t = !1;
                return 0 == e.status ? e.result.formula_length > 1e3 && (t = !0) : t = "error", t
            })
        }, this.confirmModify = function (i, n) {
            var a;
            a = isObjectEmpty(n) ? e.instant("chart.calcFieldTooLongConfirm") : e.instant("chart.groupFieldTooLongConfirm"), t.openConfirm({
                templateUrl: "/static/partials/dialogTemplates/confirm-dialog.html",
                className: "ngdialog-theme-default ngdialog-width-340",
                data: {title: e.instant("tips"), message: a, okClick: i}
            })
        }, this.alertSuccess = function (e) {
            var i = t.open({
                template: "/static/partials/dialogTemplates/alert-success.html",
                className: "ngdialog-theme-default ngDialog-width-300",
                data: {message: e},
                preCloseCallback: function () {
                    n.cancel(a)
                }
            }), a = n(function () {
                t.close(i.id)
            }, 3e3)
        }
    }]).service("userInfoService", ["commonService", "$q", "pendingRequests", function (e, t, i) {
        var n = null, a = t.defer();
        this.get = function (t) {
            if (!t && n) a.resolve(n); else {
                var r = i.get(), o = !1;
                angular.forEach(r, function (e) {
                    "/api/user/info" == e.url && (o = !0)
                }), o && !t || e.user.getUserInfo().then(function (e) {
                    n = e, a.resolve(e)
                })
            }
            return a.promise
        }, this.get().then(function (e) {
        })
    }]).service("globalFilterService", ["$timeout", function (e) {
        var t = {};
        return {
            setAttr: function (e, i) {
                t[e] = i
            }, getAttr: function (e) {
                return t.hasOwnProperty(e) ? t[e] : function () {
                }
            }
        }
    }]).service("bdpConfirm", ["ngDialog", "$translate", "$timeout", function (e, t, i) {
        var n = {title: t.instant("tips")};
        this.default = function (t) {
            return e.openConfirm({
                template: "/static/partials/dialogTemplates/confirm-dialog.html",
                className: "ngdialog-theme-default ngDialog-width-300",
                data: $.extend({}, n, t)
            })
        }, this.alert = function (t) {
            var n = e.open({
                template: "/static/partials/dialogTemplates/alert-success.html",
                className: "ngdialog-theme-default ngDialog-width-300",
                closeByDocument: !0,
                data: t,
                preCloseCallback: function () {
                    i.cancel(a)
                }
            }), a = i(function () {
                e.close(n)
            }, 3e3);
            return n
        }
    }])
}, function (e, t, i) {
    "use strict";
    angular.module("BC.common").value("operatorTranslateIds", ["equal", "notEqual", "greatThan", "lessThan", "GTE", "LTE", "contain", "notContain", "isEmpty", "isNotEmpty", "selectDateRange", "isIn", "isNotIn", "beginWith", "endWith"]).factory("filterOperatorMap", ["$translate", "operatorTranslateIds", function (e, t) {
        var i = [];
        return t.forEach(function (t) {
            i.push(e.instant(t))
        }), i
    }]).factory("filterOperatorMapWithType", ["$translate", "operatorTranslateIds", function (e, t) {
        var i = [0, 1, 6, 7, 8, 9], n = [0, 1, 2, 3, 4, 5, 8, 9], a = [0, 1, 2, 3, 4, 5, 8, 9, 10],
            r = {string: [], number: [], date: []};
        return i.forEach(function (i) {
            r.string.push({value: i, name: e.instant(t[i])})
        }), n.forEach(function (i) {
            r.number.push({value: i, name: e.instant(t[i])})
        }), a.forEach(function (i) {
            r.date.push({value: i, name: e.instant(t[i])})
        }), r
    }]).factory("filterOperatorMapWithTypeSpecial", ["$translate", "operatorTranslateIds", function (e, t) {
        var i = [0, 1, 6, 7, 8, 9, 11, 12], n = [0, 1, 2, 3, 4, 5, 8, 9, 11, 12], a = [0, 1, 2, 3, 4, 5, 8, 9, 10],
            r = {string: [], number: [], date: []};
        return i.forEach(function (i) {
            r.string.push({value: i, name: e.instant(t[i])})
        }), n.forEach(function (i) {
            r.number.push({value: i, name: e.instant(t[i])})
        }), a.forEach(function (i) {
            r.date.push({value: i, name: e.instant(t[i])})
        }), r
    }]).factory("dsStatusMap", ["$translate", function (e) {
        var t = ["ds.status.normal", "ds.status.disconnect", "ds.status.updating", "ds.updateStatus.fail", "ds.updateStatus.updating"],
            i = [t[0], t[0], t[1], t[2]], n = [t[0], t[0], t[3], t[4]], a = {statusMap: [], updateStatusMap: []};
        return i.forEach(function (t) {
            a.statusMap.push(e.instant(t))
        }), n.forEach(function (t) {
            a.updateStatusMap.push(e.instant(t))
        }), a
    }]).factory("conditionType", ["$translate", function (e) {
        return [{value: 0, text: e.instant("tableFilter.andType")}, {value: 1, text: e.instant("tableFilter.orType")}]
    }]).factory("dataTypeList", ["$translate", function (e) {
        return [{value: "string", text: e.instant("string")}, {
            value: "number",
            text: e.instant("number")
        }, {value: "date", text: e.instant("date")}]
    }]).factory("dataTypeMap", ["$translate", function (e) {
        return {string: e.instant("string"), number: e.instant("number"), date: e.instant("date")}
    }]).factory("alphaOrderType", ["$translate", function (e) {
        return [{value: "ascending", text: e.instant("ascending")}, {
            value: "descending",
            text: e.instant("descending")
        }]
    }]).factory("chartLineType", ["$translate", function (e) {
        return [{type: "constant", name: e.instant("chart.constantValue")}, {
            type: "calculate",
            name: e.instant("chart.calculateValue")
        }]
    }]).factory("chartMetricOpt", ["$translate", function (e) {
        var t = $.cookie("locale") || "zh",
            i = [{unit: "", text: e.instant("auto")}, {unit: 1e3, text: "K"}, {unit: 1e6, text: "M"}, {
                unit: 1e9,
                text: "G"
            }], n = [{unit: "", text: e.instant("auto")}, {unit: 1e4, text: "万"}, {unit: 1e8, text: "亿"}, {
                unit: 1e3,
                text: "K"
            }, {unit: 1e6, text: "M"}, {unit: 1e9, text: "G"}];
        return console.log(i), "en" == t ? i : n
    }]).factory("$getCustomFormula", ["$rootScope", "$translate", function (e, t) {
        function i(e) {
            var i = [];
            return e.forEach(function (e) {
                i.push({type: e, name: t.instant(e)})
            }), i
        }

        return i
    }]).factory("formulaKeyMap", ["$translate", function (e) {
        var t = {};
        return ["TOTAL", "SUM", "AVERAGE", "AVG", "MIN", "MAX", "COUNT", "COUNT_DISTINCT", "YoY", "QoQ", "MED", "PERCENT_5", "PERCENT_10", "PERCENT_25", "PERCENT_50", "PERCENT_75", "PERCENT_90", "PERCENT_95", "LAST"].forEach(function (i) {
            t[i] = e.instant(i)
        }), t
    }]).factory("dateNameMap", ["$translate", function (e) {
        var t = {};
        return ["day", "week", "month", "quarter", "year", "hour", "minute", "second"].forEach(function (i) {
            t[i] = e.instant(i)
        }), t
    }]).factory("dataShowTypeMap", ["$translate", function (e) {
        var t = {};
        return ["chart.byText", "chart.byImg"].forEach(function (i) {
            t[i] = e.instant(i)
        }), t
    }]).factory("granularityMap", ["$translate", function (e) {
        var t = {};
        return ["chart.byDay", "chart.byWeek", "chart.byMonth", "chart.byQuarter", "chart.byYear", "chart.byHour", "chart.byMinute", "chart.bySecond", "normal"].forEach(function (i) {
            t[i] = e.instant(i)
        }), t
    }]).factory("AdvfilterOperatorMap", ["$translate", function (e) {
        var t = ["equal", "notEqual", "contain", "notContain", "beginWith", "endWith", "isNotEmpty", "isEmpty"], i = [],
            n = {0: 0, 1: 1, 2: 6, 3: 7, 4: 10, 5: 11, 6: 9, 7: 8};
        return t.forEach(function (t, a) {
            i.push({value: n[a], name: e.instant(t)})
        }), i
    }]).factory("AdvfilterOperatorNumberMap", ["$translate", function (e) {
        var t = ["equal", "notEqual", "greatThan", "lessThan", "GTE", "LTE", "between", "isNotEmpty", "isEmpty"],
            i = [], n = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 12, 7: 9, 8: 8};
        return t.forEach(function (t, a) {
            i.push({value: n[a], name: e.instant(t)})
        }), i
    }]).factory("AdvfilterOperatorList", ["$translate", function (e) {
        var t = ["equal", "notEqual", "greatThan", "lessThan", "GTE", "LTE", "contain", "notContain", "beginWith", "endWith", "between", "isEmpty", "isNotEmpty"],
            i = {}, n = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 10, 9: 11, 10: 12, 11: 8, 12: 9};
        return t.forEach(function (t, a) {
            i[n[a]] = e.instant(t)
        }), i
    }]).factory("warnOperatorMap", ["$translate", function (e) {
        var t = ["equal", "notEqual", "greatThan", "GTE", "lessThan", "LTE", "between"], i = {},
            n = {0: 3, 1: 4, 2: 1, 3: 6, 4: 2, 5: 5, 6: 7};
        return t.forEach(function (t, a) {
            i[n[a]] = e.instant(t)
        }), i
    }]).factory("warnOperatorMapByType", ["$translate", function (e) {
        var t = ["equal", "notEqual", "greatThan", "lessThan", "GTE", "LTE", "contain", "notContain", "isEmpty", "isNotEmpty", "beginWith", "endWith", "between"],
            i = [0, 1, 6, 7, 10, 11, 8, 9], n = [0, 1, 2, 3, 4, 5, 8, 9, 12], a = {string: [], number: []};
        return i.forEach(function (i) {
            a.string.push({value: i, name: e.instant(t[i])})
        }), n.forEach(function (i) {
            a.number.push({value: i, name: e.instant(t[i])})
        }), angular.copy(a)
    }]).factory("warnFieldFormulaList", ["$translate", function (e) {
        var t = [{name: "求和", type: "SUM", show: "number"}, {
            name: "平均值",
            type: "AVERAGE",
            show: "number"
        }, {name: "最大值", type: "MAX", show: "number"}, {name: "最小值", type: "MIN", show: "number"}, {
            name: "中位数",
            type: "MED",
            show: "number"
        }, {name: "计数", type: "COUNT", show: "all"}, {name: "去重计数", type: "COUNT_DISTINCT", show: "all"}];
        return t.forEach(function (t) {
            t.name = e.instant(t.type)
        }), t
    }]).factory("dayOfWeekList", ["$rootScope", function (e) {
        for (var t = e.language, i = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"], n = ["星期一", "星期二", "星期三", "星期四", "星期五", "星期六", "星期日"], a = [], r = 0; r <= 6;) a.push({
            name: "en" === t ? i[r] : n[r],
            value: ++r
        });
        return a
    }]).factory("dateOfMonthList", ["$rootScope", function (e) {
        for (var t = e.language, i = 0, n = []; i < 31;) i++, n.push({name: i + ("en" === t ? "" : "日"), value: i});
        return n.push({name: "en" === t ? "Last Day" : "最后一天", value: -1}), n
    }]).factory("numberInnerFilterMap", ["$translate", function (e) {
        var t = ["all", "equal", "notEqual", "greatThan", "GTE", "lessThan", "LTE", "between", "isEmpty", "isNotEmpty"],
            i = [], n = {0: -1, 1: 0, 2: 1, 3: 2, 4: 4, 5: 3, 6: 5, 7: 12, 8: 8, 9: 9};
        return t.forEach(function (t, a) {
            i.push({value: n[a], text: e.instant(t)})
        }), i
    }]).factory("conditionTypeVal", ["$translate", function (e) {
        return function (t) {
            return 0 == t ? e.instant("template.all") : e.instant("template.any")
        }
    }]).factory("dbTypeMap", ["$rootScope", function (e) {
        return {
            1: "MySQL",
            2: "Oracle",
            3: "MSSQL",
            4: "OpenDS",
            5: "Baidu Sem",
            7: "Sogou Sem",
            8: "en" == e.language ? "4D Pocket" : "四次元空间袋",
            10: "Umeng",
            11: "360 Sem",
            12: "Shenma Sem",
            13: "Shopex",
            15: "53KF",
            16: "快商通",
            18: "en" == e.language ? "Baidu ads ranking" : "百度推广实况",
            19: "JinYiWei",
            21: "百度网盟",
            22: "SEM数据管理系统",
            23: "Live800"
        }
    }]).factory("databaseType", ["$translate", function (e) {
        var t = [{dbType: 1, typeName: "MySQL", dbLabel: "ds", category: "ds"}, {
            dbType: 2,
            typeName: "Oracle",
            dbLabel: "ds",
            category: "ds"
        }, {dbType: 3, typeName: "MSSQL", dbLabel: "ds", category: "ds"}, {
            dbType: 4,
            typeName: "OpenDS",
            dbLabel: "opends",
            category: "opends"
        }, {
            dbType: 8,
            typeName: e.instant("dsType.4dPocket"),
            dbLabel: "public",
            category: "public",
            translateName: "dsType.4dPocket"
        }, {dbType: 13, typeName: "Shopex", dbLabel: "shopex"}, {
            dbType: 18,
            typeName: e.instant("dsType.baiduAdsRank"),
            dbLabel: "baiduAds",
            translateName: "dsType.baiduAdsRank"
        }, {dbType: 22, typeName: "SEM数据管理系统", dbLabel: "sem", category: "sem"}, {
            dbType: 5,
            typeName: e.instant("dsType.baiduSem"),
            dbLabel: "api",
            category: "api_0",
            translateName: "dsType.baiduSem"
        }, {
            dbType: 11,
            typeName: e.instant("dsType.360Sem"),
            dbLabel: "api",
            category: "api_1",
            translateName: "dsType.360Sem"
        }, {
            dbType: 7,
            typeName: e.instant("dsType.sougouSem"),
            dbLabel: "api",
            category: "api_0",
            translateName: "dsType.sougouSem"
        }, {
            dbType: 39,
            typeName: e.instant("dsType.sougouSmall"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.sougouSmallTip",
            translateName: "dsType.sougouSmall"
        }, {
            dbType: 12,
            typeName: e.instant("dsType.shenmaSem"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.ShenmaTip",
            translateName: "dsType.shenmaSem"
        }, {
            dbType: 21,
            typeName: e.instant("dsType.baiduUnion"),
            dbLabel: "api",
            category: "api_0",
            tip: "ds.WMTip",
            translateName: "dsType.baiduUnion"
        }, {
            dbType: 30,
            typeName: e.instant("dsType.sougouUnion"),
            dbLabel: "api",
            category: "api_0",
            tip: "",
            translateName: "dsType.sougouUnion"
        }, {
            dbType: 27,
            typeName: e.instant("dsType.youdaoSpread"),
            dbLabel: "api",
            category: "api_1",
            translateName: "dsType.youdaoSpread"
        }, {
            dbType: 31,
            typeName: e.instant("dsType.weiboSpread"),
            dbLabel: "api",
            category: "api_1",
            tip: "",
            translateName: "dsType.weiboSpread"
        }, {
            dbType: 29,
            typeName: e.instant("dsType.tencentSpread"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.tencentSpreadTip",
            syncTip: !0,
            translateName: "dsType.tencentSpread"
        }, {
            dbType: 36,
            typeName: e.instant("dsType.tencentgdt"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.tencentgdtTip",
            translateName: "dsType.tencentgdt"
        }, {
            dbType: 33,
            typeName: e.instant("dsType.sinaFuyi"),
            dbLabel: "api",
            category: "api_1",
            tip: "",
            translateName: "dsType.sinaFuyi"
        }, {
            dbType: 25,
            typeName: e.instant("dsType.toutiaoAds"),
            dbLabel: "api",
            category: "api_1",
            translateName: "dsType.toutiaoAds"
        }, {
            dbType: 37,
            typeName: e.instant("dsType.youkuDSP"),
            dbLabel: "api",
            category: "api_1",
            translateName: "dsType.youkuDSP"
        }, {
            dbType: 9,
            typeName: e.instant("dsType.baiduAnalytics"),
            dbLabel: "api",
            category: "api_5",
            tip: "ds.baiduStatisticsTip",
            syncTip: !0,
            translateName: "dsType.baiduAnalytics"
        }, {
            dbType: 24,
            typeName: e.instant("dsType.cnzz"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.cnzzTip",
            syncTip: !0,
            translateName: "dsType.cnzz"
        }, {
            dbType: 10,
            typeName: e.instant("dsType.umeng"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.umengTip",
            translateName: "dsType.umeng"
        }, {
            dbType: 17,
            typeName: e.instant("dsType.baiduBridge"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.baiduBridgeTip",
            translateName: "dsType.baiduBridge"
        }, {
            dbType: 20,
            typeName: e.instant("dsType.tq"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.TQTip",
            translateName: "dsType.tq"
        }, {
            dbType: 15,
            typeName: e.instant("dsType.53kf"),
            dbLabel: "api",
            category: "api_1",
            translateName: "dsType.53kf"
        }, {
            dbType: 23,
            typeName: e.instant("dsType.live800"),
            dbLabel: "api",
            category: "api_0",
            tip: "ds.live800Tip",
            syncTip: !0,
            translateName: "dsType.live800"
        }, {
            dbType: 32,
            typeName: e.instant("dsType.shangwutong"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.shangwutongTip",
            translateName: "dsType.shangwutong"
        }, {
            dbType: 28,
            typeName: e.instant("dsType.chengxintong"),
            dbLabel: "api",
            category: "api_1",
            translateName: "dsType.chengxintong"
        }, {
            dbType: 19,
            typeName: e.instant("dsType.jinyiwei"),
            dbLabel: "api",
            category: "api_3",
            translateName: "dsType.jinyiwei"
        }, {
            dbType: 16,
            typeName: e.instant("dsType.kuaishangtong"),
            dbLabel: "api",
            category: "api_2",
            translateName: "dsType.kuaishangtong"
        }, {
            dbType: 34,
            typeName: e.instant("dsType.jinshuju"),
            dbLabel: "api",
            category: "api_1",
            translateName: "dsType.jinshuju"
        }, {
            dbType: 35,
            typeName: e.instant("dsType.EC"),
            dbLabel: "api",
            category: "api_0",
            tip: "ds.ECTip",
            translateName: "dsType.EC"
        }, {
            dbType: 38,
            typeName: e.instant("dsType.md"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.mdTip",
            syncTip: !0,
            translateName: "dsType.md"
        }, {
            dbType: 41,
            typeName: e.instant("dsType.CM"),
            dbLabel: "api",
            category: "api_1",
            tip: "ds.CMTip",
            translateName: "dsType.CM"
        }, {
            dbType: 26,
            typeName: e.instant("ba.bdpAnalysis"),
            dbLabel: "ba",
            category: "",
            translateName: "ba.bdpAnalysis"
        }];
        return t.forEach(function (t) {
            t.typeName = t.translateName ? e.instant(t.translateName) : t.typeName
        }), t
    }]).factory("databaseSyncTime", [function () {
        return {
            hourOptions: ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23"],
            minuteOptions: ["00", "05", "10", "15", "20", "25", "30", "35", "40", "45", "50", "55"]
        }
    }]).factory("dateTimesMap", [function () {
        return [{name: "00", value: "00"}, {name: "01", value: "01"}, {name: "02", value: "02"}, {
            name: "03",
            value: "03"
        }, {name: "04", value: "04"}, {name: "05", value: "05"}, {name: "06", value: "06"}, {
            name: "07",
            value: "07"
        }, {name: "08", value: "08"}, {name: "09", value: "09"}, {name: "10", value: "10"}, {
            name: "11",
            value: "11"
        }, {name: "12", value: "12"}, {name: "13", value: "13"}, {name: "14", value: "14"}, {
            name: "15",
            value: "15"
        }, {name: "16", value: "16"}, {name: "17", value: "17"}, {name: "18", value: "18"}, {
            name: "19",
            value: "19"
        }, {name: "20", value: "20"}, {name: "21", value: "21"}, {name: "22", value: "22"}, {
            name: "23",
            value: "23"
        }, {name: "24", value: "24"}]
    }]).factory("databaseParamTip", [function () {
        return {
            1: {
                connect: [{key: "host", name: "服务器", desc: "数据库的公网访问地址，如IP、域名等。"}, {
                    key: "port",
                    name: "端口",
                    desc: "数据库的公网访问端口号。"
                }, {key: "username", name: "用户名", desc: "数据库的公网访问用户名"}, {
                    key: "password",
                    name: "密码",
                    desc: "数据库的公网访问密码"
                }, {key: "database", name: "数据库", desc: "目标数据库名称"}]
            }
        }
    }]).constant("formulaDocument", {
        SUM: {
            usage: "SUM(表达式/数值字段)",
            description: "返回表达式或数值字段所有值的合计，只适用于数值字段，空值不会计算",
            example: 'SUM(销售额)，返回"销售额"字段对应的所有非空值的总和',
            type: "SUM",
            aggregate: 1
        },
        AVG: {
            usage: "AVG(表达式/数值字段)",
            description: "返回表达式或数值字段所有值的平均值，只适用于数值字段，空值不会计算",
            example: 'AVG(销售额)，返回"销售额"字段对应的所有非空值的平均值',
            type: "AVG",
            aggregate: 1
        },
        MAX: {
            usage: "MAX(表达式/数值字段)",
            description: "返回表达式或数值字段中的最大值，只适用于数值字段",
            example: 'MAX(销售额)，返回"销售额"字段对应值的最大值',
            type: "MAX",
            aggregate: 1
        },
        MIN: {
            usage: "MIN(表达式/数值字段)",
            description: "返回表达式或数值字段中的最小值，只适用于数值字段",
            example: 'MIN(销售额)，返回"销售额"字段对应值的最小值',
            type: "MIN",
            aggregate: 1
        },
        COUNT: {
            usage: "COUNT(表达式/字段)",
            description: "返回表达式所有有效字段的数据条目数，空值不会计算",
            example: 'COUNT(销售额)，返回"销售额"字段对应的所有非空值的数据条目数',
            type: "COUNT",
            aggregate: 1
        },
        COUNT_DISTINCT: {
            usage: "COUNT(DISTINCT(表达式/字段))",
            description: "去重计数，返回表达式所有有效字段的不同数据条目数，空值不会计算",
            example: 'COUNT(DISTINCT(销售额))，返回"销售额"字段对应的所有非空值的不同数据条目数',
            type: "COUNT_DISTINCT",
            aggregate: 1
        },
        ROUND: {
            usage: "ROUND(表达式／数值字段,自然数)",
            description: "按指定的位数对数值进行四舍五入",
            example: "ROUND([销售额],1) 将销售额四舍五入至小数点后一位",
            type: "ROUND",
            aggregate: 0
        },
        FLOOR: {
            usage: "FLOOR(表达式／数值字段)",
            description: "对指定数值向下取整数",
            example: "FLOOR([销售额]) 将销售额向下取整数",
            type: "FLOOR",
            aggregate: 0
        },
        CEIL: {
            usage: "CEIL(表达式／数值字段)",
            description: "对指定数值向上取整数",
            example: "CEIL([销售额]) 将销售额向下取整数",
            type: "CEIL",
            aggregate: 0
        },
        ABS: {usage: "ABS（表达式／数值字段）", description: "对指定数值取绝对值", example: "ABS(利润)取利润的绝对值", type: "ABS", aggregate: 0},
        PMOD: {
            usage: "PMOD(表达式1／数值字段1,表达式2／数值字段2)",
            description: "取数值1除数值2的余数的绝对值",
            example: "PMOD([销售额],[员工数])取销售额除员工数的的余数的绝对值",
            type: "PMOD",
            aggregate: 0
        },
        UNIX_TIMESTAMP: {
            usage: "UNIX_TIMESTAMP(日期字段)",
            description: "返回‘1970-01-01 00:00:00’到日期字段的秒数",
            example: "UNIX_TIMESTAMP([数据获取日期])，返回‘1970-01-01 00:00:00’到[数据获取日期]的秒数",
            type: "UNIX_TIMESTAMP",
            aggregate: 0
        },
        ROW_MAX: {
            usage: "ROW_MAX(表达式1/字段1,表达式2/字段2……)",
            description: "对比同行中各列的值，返回值最大的，可传入2～8个数值型参数",
            example: "ROW_MAX([部门1销售额],[部门2销售额])，返回该行中部门1销售额与部门1销售额两个字段中的最大值",
            type: "ROW_MAX",
            aggregate: 0
        },
        ROW_MIN: {
            usage: "ROW_MIN(表达式1/字段1,表达式2/字段2……)",
            description: "对比同行中各列的值，返回值最小的，可传入2～8个数值型参数",
            example: "ROW_MIN([部门1销售额],[部门2销售额],345)，返回该行中部门1销售额、部门1销售额两个字段以及值345中的最大值",
            type: "ROW_MIN",
            aggregate: 0
        },
        MAX_DATE: {
            type: "MAX_DATE",
            usage: "MAX_DATE(日期字段)",
            description: "返回该字段所有日期数据中最大值",
            example: "MAX_DATE([登陆时间])，返回该字段中最大的日期",
            aggregate: 1
        },
        MIN_DATE: {
            type: "MIN_DATE",
            usage: "MIN_DATE(日期字段)",
            description: "返回该字段所有日期数据中最小值",
            example: "MIN_DATE([登陆时间])，返回该字段中离当前时间最远的日期",
            aggregate: 1
        },
        HOUR_DIFF: {
            type: "HOUR_DIFF",
            usage: "HOUR_DIFF(日期字段1，日期字段2)",
            description: "返回两个日期相差的小时数，只允许传入日期型字段",
            example: "HOUR_DIFF([登陆时间],[离线时间] )，返回同一行上“登陆时间”至“离线时间”间隔小时数",
            aggregate: 0
        },
        MINUTE_DIFF: {
            type: "MINUTE_DIFF",
            usage: "MINUTE_DIFF(日期字段1，日期字段2)",
            description: "返回两个日期相差的分钟数，只允许传入日期型字段",
            example: "MINUTE_DIFF([登陆时间],[离线时间] )，返回同一行上“登陆时间”至“离线时间”间隔分钟数",
            aggregate: 0
        },
        SECOND_DIFF: {
            type: "SECOND_DIFF",
            usage: "SECOND_DIFF(日期字段1，日期字段2)",
            description: "返回两个日期相差的秒钟数，只允许传入日期型字段",
            example: "SECOND_DIFF([登陆时间],[离线时间] )，返回同一行上“登陆时间”至“离线时间”间隔秒钟数",
            aggregate: 0
        },
        DAY_DIFF: {
            usage: "DAY_DIFF(日期字段1,日期字段2)",
            description: "返回两个日期相差的天数，只允许传入日期型字段",
            example: 'DAY_DIFF([离职日期],[入职日期] )，返回同一行上"离职日期"至"入职日期"间隔天数',
            type: "DAY_DIFF",
            aggregate: 0
        },
        MONTH_DIFF: {
            usage: "MONTH_DIFF(日期字段1,日期字段2)",
            description: "返回两个日期相差的月数，只允许传入日期型字段",
            example: 'MONTH_DIFF([离职日期],[入职日期] )，返回同一行上"离职日期"至"入职日期"间隔月数',
            type: "MONTH_DIFF",
            aggregate: 0
        },
        YEAR_DIFF: {
            usage: "YEAR_DIFF(日期字段1,日期字段2)",
            description: "返回两个日期相差的年数，只允许传入日期型字段",
            example: 'YEAR_DIFF([离职日期],[入职日期] )，返回同一行上"离职日期"至"入职日期"间隔年数',
            type: "YEAR_DIFF",
            aggregate: 0
        },
        WEEK: {
            usage: "WEEK(日期字段)",
            description: "返回该日期在当年的第几周，只允许传入日期型字段",
            example: "WEEK([入职日期])，返回入职日期为该年的第几周",
            type: "WEEK",
            aggregate: 0
        },
        QUARTER: {
            usage: "QUARTER(日期字段)",
            description: "返回该日期在当年的第几个季度，只允许传入日期型字段",
            example: "QUARTER([入职日期])，返回入职日期为该年的第几个季度",
            type: "QUARTER",
            aggregate: 0
        },
        NOW: {usage: "NOW()", description: "返回当前系统时间，无需参数", type: "NOW", aggregate: 0},
        FIRST_DAY_OF_MONTH: {
            usage: "FIRST_DAY_OF_MONTH(表达式1/字段1,表达式2/字段2)",
            description: "返回某月第一天，函数参数为数值型字段，依次代表年，月",
            example: 'FIRST_DAY_OF_MONTH(2015,1)，返回"2015年1月1日 00:00:00"',
            type: "FIRST_DAY_OF_MONTH",
            aggregate: 0
        },
        LAST_DAY_OF_MONTH: {
            usage: "LAST_DAY_OF_MONTH(表达式1/字段1,表达式2/字段2)",
            description: "返回某月最后一天，函数参数为数值型字段，依次代表年，月",
            example: 'LAST_DAY_OF_MONTH(2015,1)，返回"2015年1月31日 00:00:00"',
            type: "LAST_DAY_OF_MONTH",
            aggregate: 0
        },
        WORK_DAY_OF_MONTH: {
            usage: "WORK_DAY_OF_MONTH(表达式1/字段1,表达式2/字段2)",
            description: "返回某月工作天数，函数参数为数值型字段，依次代表年，月",
            example: "WORK_DAY_OF_MONTH(2015,1)，返回2015年1月工作日天数",
            type: "WORK_DAY_OF_MONTH"
        },
        DAY_OF_WEEK: {
            usage: "DAY_OF_WEEK(日期字段)",
            description: "返回该日期对应该周的天数",
            example: "DAY_OF_WEEK([下单时间])",
            type: "DAY_OF_WEEK",
            aggregate: 0
        },
        IF: {
            usage: "IF(表达式，结果1，结果2)",
            description: 'IF为判断函数，表达式为比较型或计算型语句。若表达式的计算结果正确，则返回"结果1"，否则，返回"结果2"',
            example: 'IF([订单数]  > 500, "合格", "不合格")。结果为若该行"订单数"字段对应值大于500，则返回"合格"，否则返回"不合格"',
            type: "IF",
            aggregate: 0
        },
        YEAR: {
            usage: "YEAR(日期字段)",
            description: "返回该日期对应的年份。只允许传入日期型字段",
            example: 'YEAR([下单时间])，返回该行"下单时间"字段对应的年份',
            type: "YEAR",
            aggregate: 0
        },
        MONTH: {
            usage: "MONTH(日期字段)",
            description: "返回该日期对应的月份。只允许传入日期型字段",
            example: 'MONTH([下单时间])，返回该行"下单时间"字段对应的年份',
            type: "MONTH",
            aggregate: 0
        },
        DAY: {
            usage: "DAY(日期字段)",
            description: "返回该日期对应的日的值。只允许传入日期型字段",
            example: 'DAY([下单时间])，返回该行"下单时间"字段对应的日的值',
            type: "DAY",
            aggregate: 0
        },
        HOUR: {
            usage: "HOUR(日期字段)",
            description: "返回该日期对应的小时的值。只允许传入日期型字段",
            example: 'HOUR([下单时间])，返回该行"下单时间"字段对应的小时的值',
            type: "HOUR",
            aggregate: 0
        },
        MINUTE: {
            usage: "MINUTE([时间字段])",
            description: "返回该日期对应的分钟的值。只允许传入日期型字段",
            example: "MINUTE([下单时间])，返回该行下单时间字段对应的分钟的值",
            type: "MINUTE",
            aggregate: 0
        },
        SECOND: {
            usage: "SECOND([时间字段])",
            description: "返回该日期对应的秒的值。只允许传入日期型字段",
            example: "SECOND([下单时间])，返回该行下单时间字段对应的秒的值",
            type: "SECOND",
            aggregate: 0
        },
        TO_DATE: {
            type: "TO_DATE",
            usage: "TO_DATE(日期字段)",
            description: "返回日期字段的年月日部分",
            example: "TO_DATE([入库日期])，返回入库日期的年月日时间",
            aggregate: 0
        },
        DATE_ADD: {
            type: "DATE_ADD",
            usage: "DATE_ADD(起始日期, 数值字段)",
            description: "返回从起始日期算起，数值字段对应天数之后的日期",
            example: "DATE_ADD([入库日期], 1)，返回货品入库第二天的日期",
            aggregate: 0
        },
        DATE_SUB: {
            type: "DATE_SUB",
            usage: "DATE_SUB(起始日期, 数值字段)",
            description: "返回从起始日期算起，数值字段对应天数之前的日期",
            example: "DATE_SUB([出库日期], 1)，返回货品出库前一天的日期",
            aggregate: 0
        },
        CONCAT: {
            type: "CONCAT",
            usage: "CONCAT(字段1, 字段2...)",
            description: "返回顺序联结各参数的字符串",
            example: "CONCAT([货品编号], [类型编号])，返回货品编号和类型编号联结后的字符串",
            aggregate: 0
        },
        INSTRING: {
            type: "INSTRING",
            usage: "INSTRING(字符串1, 字符串2[, 起始位置])",
            description: "返回字符串2在字符串1的起始位置后第一次出现时的位置，其中起始位置可选",
            example: 'INSTRING([名字],"尔”)，返回“尔”在名字字段中第一次出现时的位置',
            aggregate: 0
        },
        LENGTH: {
            type: "LENGTH",
            usage: "LENGTH(字符串)",
            description: "返回字符串的长度",
            example: "LENGTH([货品名])，返回货品名的长度",
            aggregate: 0
        },
        REPEAT: {
            type: "REPEAT",
            usage: "REPEAT(字符串, 数值)",
            description: "返回字符串重复对应数值次数后的新字符串结果",
            example: "REPEAT([货品名], 2)，返回货品名重复2次得到字符串",
            aggregate: 0
        },
        REVERSE: {
            type: "REVERSE",
            usage: "REVERSE(字符串)",
            description: "返回字符串倒转后的新字符串结果",
            example: "REVERSE([类型编号])，返回类型编号倒转后的字符串",
            aggregate: 0
        },
        SUBSTR: {
            type: "SUBSTR",
            usage: "SUBSTR(字符串, 起始位置[, 长度])",
            description: "返回从起始位置起对应长度的字符串的子字符串，长度为可选项",
            example: "SUBSTR([商品类型], 4)，返回商品类型的索引为4起至末尾的子字符串",
            aggregate: 0
        },
        REGEXP_EXTRACT: {
            type: "REGEXP_EXTRACT",
            usage: "REGEXP_EXTRACT(字符串, 正则表达式[, 索引])",
            description: "返回字符串正则表达式解析结果,需要注意的是正则表达式的\\需要使用\\进行转义，即\\\\d)，'索引'是返回结果(0表示返回全部结果，1表示返回正则表达式中第一个() 对应的结果)",
            example: "REGEXP_EXTRACT([货品ID],'[\\\\d+\\\\-]+', 0)，返回货品ID中的数字部分",
            aggregate: 0
        },
        REGEXP_REPLACE: {
            type: "REGEXP_REPLACE",
            usage: "REGEXP_REPLACE(字符串A, 正则表达式, 字符串B)",
            description: "返回将字符串A中符合正则表达式的部分替换成字符串B后的结果",
            example: "REGEXP_REPLACE([货品名], '[\\\\d＋]+', '')，返回将货品名中数字部分替换成空字符串后的结果",
            aggregate: 0
        },
        TIME_CONVERT: {
            type: "TIME_CONVERT",
            usage: "TIME_CONVERT(时间戳字段[, 类型])",
            description: "UNIX时间戳转日期，支持秒级，毫秒级，传入参数为unix时间戳，如果时间戳精确到毫秒级，第二个参数传1",
            example: "TIME_CONVERT([时间戳字段])；TIME_CONVERT(1441509383)；TIME_CONVERT([时间戳字段]，1)；TIME_CONVERT(1441509383000，1)",
            aggregate: 0
        },
        PERCENT: {
            type: "PERCENT",
            usage: "PERCENT([数值字段], 百分位)",
            description: "求数值类型字段的中位数及百分位数, 传入参数为数值字段;第二个参数范围是0<p<1,例如0.1，0.25，0.75，0.95",
            example: "PERCENT([数学考试分数], 0.5)，返回考试分数的中位数",
            aggregate: 1
        },
        IP_LOCATION: {
            type: "IP_LOCATION",
            usage: "IP_LOCATION([IP字段], 位置类型)",
            description: "返回IP对应的地理信息，第一个参数为ip字段或者具体ip，第二个参数为返回类型，0代表国家，1代表地区，2代表城市",
            example: 'IP_LOCATION("111.207.151.66", 2)，返回北京市',
            aggregate: 0
        },
        COALESCE: {
            type: "COALESCE",
            usage: "COALESCE([字段1], [字段2], '默认')",
            description: "返回参数中的第一个非空值；如果所有值都为NULL，那么返回NULL",
            example: "COALESCE(null, '100', '50')",
            aggregate: 0
        },
        TLD: {
            type: "TLD",
            usage: "TLD(合法的URL链接/字段)",
            description: "返回合法URL链接的一级域名，注意需带有协议部分，如http。对于不合法的链接均范围null",
            example: "TLD('https://www.bdp.cn'), 返回'bdp.cn",
            aggregate: 0
        }
    })
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        angular.module("BC.common").service("commonService", ["$http", "errHint", "commonHttp", function (e, t, i) {
            var n = function (e) {
                if (e = e.data || e, "0" == e.status) return e.result;
                var i = null;
                return e.errstr && (i = {warn_msg: e.errstr}), t(Number(e.status), i), null
            }, r = {
                modify: function (e) {
                    return i.post("/api/global_config/modify", {data: e}).then(n)
                }, themeModify: function (e) {
                    return i.post("/api/user/modify_theme", {theme_id: e})
                }
            }, o = {
                create: function (e, t, n) {
                    return i.post("/api/project/create", {name: e, parent_id: t || "", category: n})
                }, getTree: function (e) {
                    return i.get("/api/project/tree", e).then(n)
                }, getTreeNoProcess: function (e) {
                    return i.get("/api/project/tree", e)
                }, modify: function (e, t) {
                    return i.get("/api/project/modify", {proj_id: e, data: {name: t}})
                }, del: function (e) {
                    return i.post("/api/project/delete", {proj_id: e})
                }, move: function (e) {
                    return i.post("/api/project/move", {
                        sort: angular.toJson(e.sort),
                        parent_id: e.parent_id,
                        proj_id: e.proj_id,
                        type: e.type,
                        category: e.category
                    })
                }
            }, s = {
                getList: function (e) {
                    return i.get("/api/dashboard/list", e).then(n)
                }, getInfo: function (e) {
                    var t = {};
                    return e = angular.extend(t, e), i.get("/api/dashboard/info", e)
                }, create: function (e) {
                    return i.post("/api/dashboard/create", {
                        name: e.name,
                        proj_id: e.proj_id,
                        label: e.label || "",
                        comment: e.comment || "",
                        meta: angular.toJson({show_block: !0}),
                        category: e.category,
                        resolution: e.resolution
                    })
                }, modify: function (e) {
                    return e.access_token = $.cookie("token"), i.post("/api/dashboard/modify", e)
                }, del: function (e) {
                    return i.post("/api/dashboard/delete", {dsh_id: e})
                }, move: function (e) {
                    return i.post("/api/dashboard/move", {
                        sort: angular.toJson(e.sort),
                        dsh_id: e.dsh_id,
                        parent_id: e.parent_id,
                        type: e.type,
                        rule_id: e.rule_id,
                        category: e.category
                    })
                }, hide: function (e) {
                    return i.post("/api/dashboard/hide", e)
                }, dashDisplay: {
                    create: function (e) {
                        return i.post("/api/dash_display/create", e)
                    }, delete: function (e) {
                        return i.post("/api/dash_display/delete", e)
                    }
                }, dshAssign: function (e) {
                    return i.post("/api/dsh_assign/dsh_assign", e)
                }, dashLogList: function (e) {
                    return i.post("/api/dash_log/list", e)
                }, dashManage: {
                    projTree: function (e) {
                        return i.post("/api/dash_manage/proj_tree", e)
                    }, projInfo: function (e) {
                        return i.post("/api/dash_manage/proj_info", e)
                    }, projDshTree: function (e) {
                        return i.post("/api/dash_manage/proj_dsh_tree", e)
                    }
                }, getSnapshotPreviewTable: function (e) {
                    return i.post("/api/chart/snapshot_preview", e)
                }, saveChartSnapshot: function (e) {
                    return i.post("/api/chart/snapshot", e)
                }, networkSegment: {
                    getList: function (e) {
                        return i.get("/api/net_segment/list", e)
                    }, infoModify: function (e) {
                        return i.post("/api/net_segment/info_modify", e)
                    }, delInfo: function (e) {
                        return i.post("/api/net_segment/info_del", e)
                    }, modify: function (e) {
                        return i.post("/api/net_segment/modify", e)
                    }
                }
            }, l = {
                getInfo: function (e) {
                    var t = {};
                    return "string" == typeof e ? t.ct_id = e : t = angular.extend(e, t), i.post("/api/chart/info", t)
                }, getData: function (t) {
                    return e.post("/api/chart/data", {ct_id: t})
                }, create: function (e) {
                    var t = {dsh_id: e.dsh_id, category: e.category},
                        n = {normal: 0, gis: 1, text: 2, view: 7, custom: 8}, a = n[e.type];
                    return t.ct_type = a || 0, e.ct_type && (t.ct_type = e.ct_type), t.name = e.name, "view" == e.type ? (t.parent_id = e.parent_id, t.tb_id = e.tb_id, "number" == typeof e.ct_type && (t.ct_type = e.ct_type)) : "custom" == e.type || "gis" == e.type ? t.tb_ids = angular.toJson(e.tb_id) : t.tb_id = e.tb_id, e.dsh_meta && (t.dsh_meta = angular.toJson(e.dsh_meta)), i.post("/api/chart/create", t)
                }, copy: function (e) {
                    return i.get("/api/chart/copy", e)
                }, del: function (e) {
                    return e.dsh_meta && (e.dsh_meta = angular.toJson(e.dsh_meta)), i.post("/api/chart/delete", e)
                }, modify: function (e) {
                    return i.post("/api/chart/modify", e)
                }, getDbInfo: function (e) {
                    return i.get("/api/chart/database_info", {ct_id: e})
                }, modifyTb: function (e, t) {
                    return i.get("/api/chart/modify_tb", {ct_id: e, tb_id: t})
                }, search: function (e) {
                    return i.post("/api/chart/search", e).then(n)
                }, getSizeGroups: function (e) {
                    return e.drill_value = e.drill_value ? angular.toJson(e.drill_value) : void 0, i.post("/api/chart/size_groups", e).then(n)
                }, getGisSizeGroups: function (e, t, a) {
                    return i.post("/api/chart/size_groups", {
                        ct_id: e,
                        bubble_setting: angular.toJson(t),
                        layer_level: a
                    }).then(n)
                }, addRelaTb: function (e, t) {
                    return i.post("/api/chart/add_rela_tb", {ct_id: e, tb_id: t})
                }, delRelaTb: function (e, t) {
                    return i.post("/api/chart/del_rela_tb", {ct_id: e, tb_id: t})
                }, exportExcelType: function (e) {
                    return i.post("/api/export/get_file_type", e)
                }, exportLargeExcel: function (e) {
                    return i.post("/api/export/large_file", e)
                }, wholeRelaChain: function (e) {
                    return i.post("/api/chart/whole_rela_chain", {tb_id: e.tb_id})
                }, tableUnion: function (e) {
                    return i.post("/api/chart/table_union", e)
                }, cmpDateRange: function (e) {
                    return i.post("/api/chart/filter_cmp_date_range", e)
                }
            }, c = {
                getField: function (e) {
                    var t = {dstb_id: e};
                    return i.get("/api/dstb/info", t).then(n)
                }, del: function (e) {
                    var t = {dstb_id: e};
                    return i.get("/api/dstb/delete", t)
                }, getList: function () {
                    return i.get("/api/dstb/list").then(n)
                }, modify: function (e, t) {
                    var a = {dstb_id: e, data: t};
                    return i.get("/api/dstb/modify", a).then(n)
                }, getUpdateRecord: function (e) {
                    return i.get("/api/excel/list?time=" + (new Date).getTime(), e).then(n)
                }, deleteFile: function (e, t) {
                    var a = {dstb_id: e, filetbname: t};
                    return i.get("/api/dstb/delete_file", a).then(n)
                }, excelCreate: function (e) {
                    return i.post("/api/excel/create", e, {errHint: !1})
                }, excelAppend: function (e) {
                    return i.post("/api/excel/append", e, {errHint: !1})
                }, excelReplace: function (e) {
                    return i.post("/api/excel/replace", e, {errHint: !1})
                }, excelHistoryReplace: function (e) {
                    return i.post("/api/excel/replace_one", e, {errHint: !1})
                }, excelDelete: function (e) {
                    return i.get("/api/excel/delete", e)
                }, startTask: function (t, i) {
                    return e.post("/api/dstb/start", {job_id: t, sheet_name: angular.toJson(i)})
                }, excelCheck: function (e) {
                    return i.post("/api/excel/check", e, {errHint: !1})
                }, excelModify: function (e) {
                    return i.post("/api/excel/modify", e, {errHint: !1})
                }, uploadPreview: function (e, t) {
                    return i.post("/api/excel/preview", e, {errHint: t})
                }, uploadParser: function (e) {
                    return i.post("/api/excel/parser", e)
                }, getSchema: function (e) {
                    return i.post("/api/tb/schema", {tb_id: e})
                }, checkFieldDependency: function (e) {
                    return i.post("/api/tb/check_field_dependency", e)
                }, adjustTable: function (e) {
                    return i.post("/api/", e)
                }, previewAdjustTable: function (e) {
                    return i.post("/api/excel/replace_preview", e)
                }, excelRepeatCheck: function (e) {
                    return i.post("/api/excel/title_check", e)
                }
            }, d = {
                modify: function (e) {
                    return i.post("/api/tb/modify", {data: e})
                }, modifyFieldStatus: function (e, t) {
                    return i.post("/api/tb/field_selected/modify", {tb_id: e, field_ids: t})
                }, getStatusData: function (e) {
                    return i.post("/api/tb/field_selected/query", {tb_id: e})
                }, getList: function () {
                    return i.get("/api/tb/list").then(n)
                }, copy: function (e) {
                    return i.post("/api/data_union/union_copy", e)
                }, getInfo: function (e) {
                    return i.get("/api/tb/info", e)
                }, getMultiInfo: function (e) {
                    return i.get("/api/tb/multi_info", e)
                }, preview: function (e) {
                    return i.post("/api/tb/preview", e).then(n)
                }, del: function (e) {
                    return i.post("/api/tb/delete", {tb_id: e})
                }, delTableWithChart: function (e, t, n) {
                    return i.post("/api/tb/delete", {tb_id: e, session_id: t, verify_code: n})
                }, getJoinInfo: function (e) {
                    return i.get("/api/tb/join_info", {tb_id: e}).then(n)
                }, getJoinErrorReport: function (e) {
                    return i.post("/api/wb/profile", e)
                }, getJoinProfileReport: function (e) {
                    return i.post("/api/wb/profile_report", {tb_id: e})
                }, getModelStruct: function (e) {
                    return i.get("/api/tb/model_struct", {tb_id: e})
                }, getStatus: function (e, t) {
                    return i.get("/api/tb/status", {tb_id: e, view_status_read: t})
                }, getStorageAccount: function () {
                    return i.get("/api/tb/stat").then(n)
                }, modifyTag: function (e) {
                    return i.post("/api/tb/modify_tag", {data: (0, a.default)(e)})
                }, getTbsField: function (e) {
                    return i.post("/api/dstb/infos", e)
                }, partitionSet: function (e) {
                    return i.post("/api/tb/partition/set", {
                        tb_id: e.tb_id,
                        base_field: e.base_field,
                        param: e.param,
                        is_vfield: e.is_vfield
                    })
                }, partitionDel: function (e) {
                    return i.post("/api/tb/partition/remove", {tb_id: e.tb_id})
                }, wholeJoinChain: function (e) {
                    return i.post("/api/tb/whole_join_chain", {tb_id: e.tb_id})
                }, sqlTrans: function (e) {
                    return i.post("/api/tb/sql_trans", e)
                }, sqlScript: function (e) {
                    return i.post("/api/sql_script/check", e)
                }, sqlFormat: function (e) {
                    return i.post("/api/sql_script/format", e)
                }, tableFieldFilter: function (e) {
                    return i.post("/api/field/filter", e)
                }, batchMove: function (e) {
                    return i.post("/api/folder/change_batch", e)
                }, batchDeleteTables: function (e) {
                    return i.post("/api/tb/delete_batch", e)
                }, checkTablesRely: function (e) {
                    return i.post("/api/tb/list_check_rely", e)
                }, gisTransfer: function (e) {
                    return i.post("/api/gis/transfer", e)
                }, gisModify: function (e) {
                    return i.post("/api/gis/modify", e)
                }, updateModeCheck: function (e) {
                    return i.post("/api/tb/update_mode/check", e)
                }, updateModeModify: function (e) {
                    return i.post("/api/tb/update_mode/modify", e)
                }, getPartitionNum: function (e) {
                    return i.post("/api/tb/partition/num", e)
                }, triggerFullUpdate: function (e) {
                    return i.post("/api/tb/update", e)
                }, replaceCheck: function (e) {
                    return i.post("/api/wb/replace_check", e)
                }, getTplExcel: function (e) {
                    return i.get("/api/personal/tpl_excel", e)
                }, tplExport: function (e) {
                    return i.get("/api/personal/export", e)
                }, modelCheck: function (e) {
                    return i.get("/api/data_aggr/model_check", e)
                }, viewExec: function (e) {
                    return i.get("/api/view/exec", e)
                }, uploadRenameFields: function (e) {
                    return i.post("/api/field/upload_templete", e)
                }, exportSmallTbFile: function (e) {
                    return i.post("/api/tb/export_tb", e)
                }, exportTbFile: function (e) {
                    return i.post("/api/export/tb_file", e)
                }, exportTbTupu: function (e) {
                    return i.post("/api/tb/export_to_tp", e)
                }, getTbCapacity: function (e) {
                    return i.post("/api/tb/list_info", e)
                }, parseCode: function (e) {
                    return i.post("/api/general/create", e)
                }, getFieldParseCode: function (e) {
                    return i.get("/api/general/info", e)
                }, joinTbInfo: function (e) {
                    return i.post("/api/dstb/info", e)
                }, getRelationList: function (e) {
                    return i.get("/api/tb/rela_list", {tb_id: e}).then(n)
                }, delTbCheck: function (e) {
                    return i.post("/api/tb/chart_check", {tb_id: e})
                }, copyTbCheck: function (e) {
                    return i.post("/api/view/check", {tb_id: e})
                }, createProcessTb: function (e) {
                    return i.post("/api/view/allcreate", e)
                }, modifyProcessTb: function (e) {
                    return i.post("/api/view/allmodify", e)
                }, previewProcessTb: function (e, t) {
                    return i.post("/api/view/allpreview", e, t)
                }, schedulerModify: function (e) {
                    return i.post("/api/view/scheduler/modify", e)
                }, mergeModle: function (e) {
                    return i.post("/api/tb/merge_mode/modify", e)
                }, permission: {
                    list: function (e) {
                        return i.post("/api/tb/permission/list", e)
                    }, modify_batch: function (e) {
                        return i.post("/api/tb/permission/modify_batch", e)
                    }, delete: function (e) {
                        return i.post("/api/tb/permission/delete", e)
                    }, modify: function (e) {
                        return i.post("/api/tb/permission/modify", e)
                    }, allList: function (e) {
                        var t = {};
                        return t = angular.extend(e, t), i.get("/api/tb/permission/all_list", t)
                    }
                }
            }, u = {
                getList: function (e) {
                    return i.get("/api/tb/info", e)
                }, getEditableSchema: function (e) {
                    return i.get("/api/tb/editable_schema", {tb_id: e})
                }, create: function (e) {
                    return i.post("/api/field/create", e)
                }, modify: function (e) {
                    return i.post("/api/field/modify", e)
                }, del: function (e) {
                    return i.post("/api/field/delete", e)
                }, dependency: function (e) {
                    return i.post("/api/field/dependency", e)
                }, getRange: function (e) {
                    return i.post("/api/field/range", e)
                }, getFilteredRange: function (e, t, n, a) {
                    return void 0 === a ? i.post("/api/enum_color/field_range", {
                        ct_id: e,
                        tb_id: t,
                        field: angular.toJson(n)
                    }) : i.post("/api/enum_color/gis_field_range", {
                        ct_id: e,
                        tb_id: t,
                        field: angular.toJson(n),
                        layer_level: a
                    })
                }, url_preview: function (e, t) {
                    return i.post("/api/field/url_preview", {tb_id: e, field_ids: angular.toJson(t)}).then(n)
                }, extract_preview: function (e, t) {
                    return i.post("/api/field/extract_preview", {tb_id: e, fields: angular.toJson(t)}).then(n)
                }, extract_url: function (e, t) {
                    return i.post("/api/field/extract_url", {tb_id: e, fields: angular.toJson(t)}).then(n)
                }, merge: function (e, t) {
                    return i.post("/api/field/merge", {tb_id: e, info: angular.toJson(t)}).then(n)
                }, getAggregatorLen: function (e) {
                    return i.post("/api/field/get_length", e)
                }, tbInfoByTitle: function (e) {
                    return i.post("/api/field/infobytitle", e)
                }
            }, p = {
                getList: function (e) {
                    var t = {};
                    return t = angular.extend(e, t), i.get("/api/share/list", t)
                }, share: function (e) {
                    var t = {};
                    return t = angular.extend(e, t), i.post("/api/share/commit", t)
                }
            }, f = {
                rename: function (e) {
                    return i.post("/api/ds/rename", e)
                }, getConnStatus: function (e) {
                    return i.post("/api/ds/conn", e)
                }, connNopwd: function (e) {
                    return i.post("/api/ds/nopawd", e)
                }, createApi: function (e) {
                    return i.post("/api/ds/create", e)
                }, getNameAndTag: function () {
                    return i.get("/api/ds/list").then(n)
                }, getList: function (e) {
                    return i.get("/api/ds/list").then(n)
                }, getListForDataSource: function (e) {
                    return i.get("/api/ds/nslist", e)
                }, pureList: function (e) {
                    return i.get("/api/ds/purelist", e)
                }, getTree: function () {
                    return i.get("/api/ds/tree").then(n)
                }, info: function (e) {
                    return i.get("/api/ds/info", e)
                }, modify: function (e) {
                    return e = e || {}, i.post("/api/ds/modify", e)
                }, startSyncTask: function (e, t, n) {
                    return i.get("/api/ds/sync", {ds_id: e, new_table: t, db_type: n})
                }, startBaiduSyncCost: function (e) {
                    return i.get("/api/rtapi/single_cost", {ds_id: e})
                }, del: function (e) {
                    return i.post("/api/ds/delete", {ds_id: e})
                }, getInitInfo: function () {
                    return i.get("/api/ds/all")
                }, getResultForSearch: function (e, t) {
                    return i.get("api/ds/search", {stype: t, content: e})
                }, getTables: function (t) {
                    return e.get("/api/ds/mdstb", {params: {ds_id: t}})
                }, getJsjTables: function (t) {
                    return e.post("/api/ds/cdstb", t)
                }, modifytb: function (t, i, n) {
                    return e.get("/api/ds/modifytb", {params: {ds_id: t, name: i, check_tables: angular.toJson(n)}})
                }, openDataList: function () {
                    return i.get("/api/ds/publiclist")
                }, create: function (e) {
                    return i.post("/api/ds/create", e)
                }, conn: function (e) {
                    return i.post("/api/ds/conn", e)
                }, tbList: function () {
                    return i.get("/api/ds/tblist")
                }, username_verify: function (e) {
                    return i.post("/api/ds/verify", e)
                }, jyw_klist: function () {
                    return i.post("/api/jyw/klist")
                }, set_sync: function (e) {
                    return i.post("/api/ds/sync", e)
                }, mobile_default_bind: function (e) {
                    return i.post("/api/sms/defaultbind", e)
                }, mobile_unbind_all: function (e) {
                    return i.post("/api/sms/unbindall", e)
                }, warn_mobile_list: function (e) {
                    return i.post("/api/sms/list")
                }, warn_mobile_del: function (e) {
                    return i.post("/api/sms/delete", {phone: e.phone})
                }, warn_mobile_vcode: function (e) {
                    return i.post("/api/sms/vcode", {phone: e.phone, new_phone: e.new_phone})
                }, warn_mobile_verify: function (e) {
                    return i.post("/api/sms/verify", {phone: e.phone, new_phone: e.new_phone, vcode: e.vcode})
                }, ds_amount: function () {
                    return i.get("/api/ds/stat")
                }, kstList: function (e) {
                    return i.post("/api/kst/list", e)
                }, kstConn: function (e) {
                    return i.post("/api/kst/conn", e)
                }, kstCreate: function (e) {
                    return i.post("/api/kst/create", e)
                }, kstInfo: function (e) {
                    return i.post("/api/kst/info", e)
                }, kstModify: function (e) {
                    return i.post("/api/kst/modify", e)
                }, baiduRegion: function () {
                    return i.get("/api/rtapi/city")
                }, baiduIndex: function () {
                    return i.get("/api/inapi/city")
                }, baiduIndexCheckKeyWords: function (e) {
                    return i.post("/api/inapi/check", e)
                }, modifyDbBaiduSearchTask: function (e) {
                    return i.post("/api/rtapi/control", e)
                }, modifyDbBaiduIndexTask: function (e) {
                    return i.post("/api/inapi/control", e)
                }, baiduSearchConfig: function (e) {
                    return i.post("/api/rtapi/config", e)
                }, baiduIndexConfig: function (e) {
                    return i.post("/api/inapi/config", e)
                }, modifyDbBaiduSearch: function (e) {
                    return i.post("/api/rtapi/modify", e)
                }, modifyDbBaiduIndex: function (e) {
                    return i.post("/api/inapi/modify", e)
                }, createDbBaiduSearch: function (e) {
                    return i.post("/api/ds/create", e)
                }, createDbBaiduSearchTask: function (e) {
                    return i.post("/api/rtapi/create", e)
                }, createDbBaiduIndexTask: function (e) {
                    return i.post("/api/inapi/create", e)
                }, deleteDbBaiduSearchTask: function (e) {
                    return i.post("/api/rtapi/delete", e)
                }, deleteDbBaiduIndexTask: function (e) {
                    return i.post("/api/inapi/delete", e)
                }, getDbBaiduSearchTaskList: function (e) {
                    return i.post("/api/rtapi/rtlist", e)
                }, getDbBaiduIndexTaskList: function (e) {
                    return i.post("/api/inapi/inlist", e)
                }, startBaiduTaskSyncCost: function (e) {
                    return i.get("/api/rtapi/single_cost", e)
                }, startBaiduIndexTaskSyncCost: function (e) {
                    return i.get("/api/inapi/single_cost", e)
                }, startBaiduSyncTask: function (e) {
                    return i.post("/api/rtapi/sync", e)
                }, startBaiduIndexSyncTask: function (e) {
                    return i.post("/api/inapi/sync", e)
                }, baiduCompanySetting: function (e) {
                    return i.post("/api/rtapi/field_info", e)
                }, modifyCompanySetting: function (e) {
                    return i.post("/api/rtapi/field_modify", e)
                }, indexSync: function (e) {
                    return i.get("/api/ds/usersyncindex", e)
                }, wechatDs: {
                    createWechatIndex: function (e) {
                        return i.post("/api/ds/create", e)
                    }, deleteWechatTask: function (e) {
                        return i.post("/api/wechat/delete", e)
                    }, getTaskList: function (e) {
                        return i.post("/api/wechat/inlist", e)
                    }, modifyWechatTask: function (e) {
                        return i.post("/api/wechat/modify", e)
                    }, createWechatTask: function (e) {
                        return i.post("/api/wechat/create", e)
                    }, wechatIndexConfig: function (e) {
                        return i.post("/api/wechat/config", e)
                    }, wechatTaskSwitchControl: function (e) {
                        return i.post("/api/wechat/control", e)
                    }
                }, toutiaoDs: {
                    createToutiaoIndex: function (e) {
                        return i.post("/api/ds/create", e)
                    }, deleteToutiaoTask: function (e) {
                        return i.post("/api/toutiao/delete", e)
                    }, getTaskList: function (e) {
                        return i.post("/api/toutiao/inlist", e)
                    }, modifyToutiaoTask: function (e) {
                        return i.post("/api/toutiao/modify", e)
                    }, createToutiaoTask: function (e) {
                        return i.post("/api/toutiao/create", e)
                    }, toutiaoIndexConfig: function (e) {
                        return i.post("/api/toutiao/config", e)
                    }, toutiaoTaskSwitchControl: function (e) {
                        return i.post("/api/toutiao/control", e)
                    }
                }, indexDs: {
                    getUrl: function (e, t) {
                        var i;
                        switch (e + "_" + t) {
                            case"70_create":
                                i = "/api/web/create";
                                break;
                            case"70_inlist":
                                i = "/api/web/inlist";
                                break;
                            case"70_control":
                                i = "/api/web/control";
                                break;
                            case"70_delete":
                                i = "/api/web/delete";
                                break;
                            case"70_config":
                                i = "/api/web/config";
                                break;
                            case"70_modify":
                                i = "/api/web/modify"
                        }
                        return i
                    }, getTaskList: function (e) {
                        return i.post("/api/index/inlist", e)
                    }, createTask: function (e) {
                        return i.post("/api/index/create", e)
                    }, switchTask: function (e) {
                        return i.post("/api/index/control", e)
                    }, deleteTask: function (e) {
                        return i.post("/api/index/delete", e)
                    }, getTaskInfo: function (e) {
                        return i.post("/api/index/config", e)
                    }, modifyTask: function (e) {
                        return i.post("/api/index/modify", e)
                    }, checkKeyWords: function (e) {
                        return i.post("/api/index/check", e)
                    }, areaList: function (e) {
                        return i.get("/api/index/city", e)
                    }
                }, weiboDs: {
                    deleteTask: function (e) {
                        return i.post("/api/toutiao/delete", e)
                    }, getTaskList: function (e) {
                        return i.post("/api/web/inlist", e)
                    }, modifyTask: function (e) {
                        return i.post("/api/toutiao/modify", e)
                    }, createToutiaoTask: function (e) {
                        return i.post("/api/toutiao/create", e)
                    }, toutiaoIndexConfig: function (e) {
                        return i.post("/api/toutiao/config", e)
                    }, toutiaoTaskSwitchControl: function (e) {
                        return i.post("/api/toutiao/control", e)
                    }
                }, dbTypeInfo: function (e) {
                    return i.get("/api/ds/category", e)
                }, getCTableList: function (e) {
                    return i.post("/api/ds/cdstb", e)
                }, getTbInfo: function (e) {
                    return i.post("/api/ds/tbinfo", e)
                }, getDsSheet: function (e) {
                    return i.post("/api/ds/sheet", e)
                }, getDsTask: function (e) {
                    return i.post("/api/ds/task", e)
                }, delete: function (e) {
                    return i.post("/api/ds/delete", e)
                }, getGaReports: function (e) {
                    return i.get("/api/ga/dreports", e)
                }, getGaInfo: function (e) {
                    return i.post("/api/ga/info", e)
                }, previewGa: function (e) {
                    return i.post("/api/ga/preview", e)
                }, getBdpDeployCodeToken: function (e) {
                    return i.post("/api/journal/token", e)
                }, pwdBatchPreview: function (e) {
                    return i.post("/api/ds_batch/preview", e)
                }, pwdBatchModify: function (e) {
                    return i.post("/api/ds_batch/modify", e)
                }, saveUserSync: function (e) {
                    return i.post("/api/ds/usersync", e)
                }, getJumpInfo: function (e) {
                    return i.get("/api/chart/jump_info", e)
                }, saveJumpInfo: function (e) {
                    return i.post("/api/chart/jump_save", e)
                }, delJumpInfo: function (e) {
                    return i.post("/api/chart/jump_delete", e)
                }, checkJumpInfo: function (e) {
                    return i.get("/api/chart/jump_check", e)
                }, getCodeImg: function (e) {
                    return i.get("/api/ds/specialsync", e)
                }, superModify: function (e) {
                    return i.get("/api/ds/supermodify", e)
                }, setAllot: function (e) {
                    return i.post("/api/ds/dsallot", e)
                }, getOwerList: function (e) {
                    return i.post("/api/ds/dsadmin", e)
                }, jumpWorktable: function (e) {
                    return i.get("/api/ds/dstotable", e)
                }
            }, h = {
                field_list: function (e) {
                    return i.post("/api/ds_field/field_list", e)
                }, field_del: function (e) {
                    return i.post("/api/ds_field/field_del", e)
                }, field_modify: function (e) {
                    return i.post("/api/ds_field/field_modify", e)
                }
            }, g = {
                del: function (e) {
                    return i.post("/api/adv_date/del", {opt_id: e})
                }, global_del: function (e, t) {
                    return i.post("/api/adv_date/del", {opt_id: e, df_id: t})
                }, modify: function (e, t, n, a) {
                    return i.post("/api/adv_date/modify", {ct_id: e, opt_id: t, scheme_id: n, data: a})
                }, global_modify: function (e, t, n, a, r) {
                    return i.post("/api/adv_date/modify", {dsh_id: e, opt_id: t, df_id: n, scheme_id: a, data: r})
                }, list: function (e, t) {
                    return i.post("/api/adv_date/list", {ct_id: e, scheme_id: t})
                }, info: function (e) {
                    return i.post("/api/adv_date/info", {opt_id: e})
                }, order: function (e, t) {
                    return i.post("/api/adv_date/order", {ct_id: e, options: t})
                }
            }, m = {
                create: function (e) {
                    return i.post("/api/adv_date_scheme/create", e)
                }, delete: function (e) {
                    return i.post("/api/adv_date_scheme/delete", e)
                }, modify: function (e) {
                    return i.post("/api/adv_date_scheme/modify", e)
                }, list: function (e) {
                    return i.post("/api/adv_date_scheme/list", e)
                }
            }, v = {
                add: function (e) {
                    return i.post("/api/warn/add", {ct_id: e.ct_id, rule_id: e.rule_id, data: angular.toJson(e.data)})
                }, modify: function (e) {
                    return i.post("/api/warn/modify", {
                        ct_id: e.ct_id,
                        rule_id: e.rule_id,
                        data: angular.toJson(e.data),
                        warn_id: e.warn_id
                    })
                }, del: function (e) {
                    return i.post("/api/warn/delete", {ct_id: e.ct_id, rule_id: e.rule_id, warn_id: e.warn_id})
                }, warnSwitch: function (e) {
                    return i.post("/api/warn/switch", {
                        ct_id: e.ct_id,
                        rule_id: e.rule_id,
                        open_warn_ids: e.open_warn_ids,
                        off_warn_ids: e.off_warn_ids,
                        all_switch: e.all_switch,
                        need_all_switch: e.need_all_switch
                    })
                }
            }, y = {
                modify: function (e) {
                    return i.post("/api/model/modify", e)
                }, preview: function (e) {
                    return i.post("/api/model/train_set_preview", e)
                }, result: function (e) {
                    return i.post("/api/model/result", e)
                }, list: function (e) {
                    return i.post("/api/model/list", e)
                }, info: function (e) {
                    return i.post("/api/model/info", e)
                }, del: function (e) {
                    return i.post("/api/model/delete", e)
                }, saveClusterRs: function (e) {
                    return i.post("/api/model/result_commit", e)
                }, fieldNullValue: function (e) {
                    return i.get("/api/ml/field_null_value", e)
                }
            }, b = {
                getList: function () {
                    return i.post("/api/folder/list").then(n)
                }, getListAll: function () {
                    return i.post("/api/tb/permission/all_tb").then(n)
                }, del: function (e, t) {
                    return i.get("/api/folder/delete", {folder_id: e, mode: t})
                }, modify: function (e) {
                    return i.post("/api/folder/modify", e)
                }, create: function (e) {
                    return i.post("/api/folder/create", e)
                }, change: function (e) {
                    return i.post("/api/folder/change", {
                        tb_id: e.tb_id,
                        to_folder: e.to_folder,
                        to_seq: e.to_seq,
                        tb_index: e.tb_index
                    })
                }, change_batch: function (e) {
                    return i.post("/api/folder/change_batch", {change_folders: e})
                }, modify_folder_rel: function (e) {
                    return i.post("/api/folder/modify_folder_rel", {tb_id: e.tb_id, folder_rels: e.tb_status})
                }, modify_seq: function (e) {
                    return i.post("/api/folder/modify_seq", {seq_no: e.seq_no, folder_id: e.folder_id})
                }, modify_parent: function (e) {
                    return i.post("/api/folder/modify_parent", {
                        seq_no: e.seq_no,
                        folder_id: e.folder_id,
                        parent_id: e.parent_id
                    })
                }, getStructure: function () {
                    return i.post("/api/folder/get_tree")
                }, getStructureWithParam: function (e) {
                    return i.post("/api/folder/get_tree_with_tblist", e)
                }, getWorktable: function (e) {
                    return i.get("/api/folder/list_only_tb", e)
                }, getTableSiblings: function (e) {
                    return i.get("/api/folder/get_current_tb", e)
                }, getTableFolderInfo: function (e) {
                    return i.post("/api/folder/info", e)
                }, searchFolderAndTable: function (e) {
                    return i.get("/api/folder/search", e)
                }, filterFolderAndTable: function (e) {
                    return i.get("/api/folder/filter", e)
                }
            }, _ = {
                create: function (e) {
                    return i.get("/api/field_comment/create", e)
                }, modify: function (e) {
                    return i.get("/api/field_comment/modify", {ct_id: e.ct_id, fc_id: e.fc_id, comment: e.comment})
                }, del: function (e, t) {
                    return i.get("/api/field_comment/delete", {ct_id: e, fc_id: t})
                }
            }, w = {
                list: function (e) {
                    return i.post("/api/dsh_filter/list", {dsh_id: e.dash_id, rule_id: e.rule_id})
                }, modify: function (e) {
                    return i.post("/api/dsh_filter/commit", {dsh_id: e.dash_id, data: e.dash_filter_list})
                }, item: function (e) {
                    return i.post("/api/dsh_filter/item", {
                        dsh_id: e.dash_id,
                        sdo_id: e.sdo_id,
                        rule_id: e.rule_id,
                        is_tpl: e.is_tpl
                    })
                }, range: function (e) {
                    return i.post("/api/dsh_filter/range", {
                        dsh_id: e.dash_id,
                        scheme_id: e.scheme_id,
                        df_id: e.df_id,
                        rule_id: e.rule_id,
                        selected_tables: e.selected_tables,
                        granularity: e.granularity,
                        parent_range: e.range
                    })
                }
            }, x = {
                userList: function (e) {
                    return i.post("/api/sub/list", e)
                }, modifyPersonal: function (e) {
                    return i.post("/api/user/modify_personal", e)
                }, checkPwd: function (e) {
                    return i.post("/api/user/verify_pwd", e)
                }, checkPhoneCode: function (e) {
                    return i.post("/api/user/verify_captcha", e)
                }, sendPhoneCode: function (e) {
                    return i.post("/api/user/gen_captcha", e)
                }, sendModifyPwdEmail: function (e) {
                    return i.post("/api/user/send_mod_pwd_notice", e)
                }, modifyInfo: function (e) {
                    return i.post("/api/user/modify_info", e)
                }, groupList: function (e) {
                    return i.post("/api/group/list", e)
                }, modify: function (e) {
                    return i.post("/api/sub/modify", e)
                }, setFrozen: function (e) {
                    return i.post("/api/user/set_frozen", e)
                }, exportFileList: function (e) {
                    return i.post("/api/export/file_list", e)
                }, exportDelTask: function (e) {
                    return i.post("/api/export/delete", e)
                }, hideNotification: function () {
                    return i.post("/api/export/hide_notification")
                }, logout: function (e) {
                    return i.post("/api/user/logout", e)
                }, modifyPassword: function (e) {
                    return i.post("/api/user/modify_pwd", e)
                }, getUserInfo: function () {
                    return i.get("/api/user/info")
                }, unreadNewFeatures: function () {
                    return i.post("/api/log/unread")
                }, readNewFeatures: function () {
                    return i.get("/api/log/read")
                }, getMobileCode: function (e) {
                    return i.post("/api/user/gen_captcha", e)
                }, personalConpon: function () {
                    return i.get("/api/coupon/list")
                }
            }, C = {
                getOrderInfo: function (e) {
                    return i.get("/api/enum_order/info", {
                        _t: (new Date).getTime(),
                        tb_id: e.tb_id,
                        fid: e.fid,
                        ct_id: e.ct_id || "",
                        query_for_ct: e.query_for_ct || void 0
                    }).then(n)
                }, updateOrder: function (e) {
                    return i.post("/api/enum_order/update", e)
                }, getFilteredOrderInfo: function (e) {
                    return i.get("/api/enum_order/filter_info", {
                        _t: (new Date).getTime(),
                        tb_id: e.tb_id,
                        fid: e.fid,
                        ct_id: e.ct_id || "",
                        index: e.index || 0,
                        drill_level: e.drill_level || 0,
                        axis: e.axis || ""
                    }).then(n)
                }
            }, k = {
                checkIncrease: function (e) {
                    return i.post("/api/sql_script/check_tb_increment", e)
                }
            }, S = {
                ruleTbInfo: function (e) {
                    return i.post("/api/tb/rule_tb_info", e)
                }, getFieldRule: function (e) {
                    return i.post("/api/rule/search_filter", e)
                }, saveBatchRule: function (e) {
                    return i.post("/api/rule/create_filter_batch", e)
                }, chartList: function (e) {
                    return i.post("/api/chart/list", e)
                }, tplCommit: function (e) {
                    return i.post("/api/template/commit", e)
                }, relaDshTb: function (e) {
                    return i.post("/api/template/rela_dsh_tb", e)
                }, tplListByPage: function (e) {
                    return i.post("/api/template/list_by_page", e)
                }
            }, T = {
                list: function (e) {
                    return i.post("/api/sem/list", {ds_id: e.ds_id, ds_type: e.ds_type})
                }, merge: function (e) {
                    return i.post("/api/sem/merge", {link_list: e.link_list})
                }, tbrefer: function (e) {
                    return i.post("/api/sem/tbrefer", {ds_id: e.ds_id, tmp_ds_id: e.tmp_ds_id})
                }
            }, D = {
                guideSet: function (e) {
                    return i.post("/api/user/guide_set", e)
                }, getDashDemo: function () {
                    return i.post("/api/personal/demo")
                }
            }, L = {
                getListByType: function (e) {
                    return i.post("/api/message/list", e)
                }, setNoticeReaded: function (e) {
                    return i.post("/api/message/read", e)
                }, getNoticeType: function () {
                    return i.post("/api/message/purpose")
                }, setNoticeReadAll: function (e) {
                    return i.post("/api/message/read_all", {purpose: e})
                }, delNotice: function (e) {
                    return i.post("/api/message/delete", {log_id: e})
                }
            };
            return {
                global_config: r,
                project: o,
                dashboard: s,
                chart: l,
                db: c,
                tb: d,
                field: u,
                fieldComment: _,
                ds: f,
                ds_field: h,
                share: p,
                adv_date: g,
                adv_date_scheme: m,
                warn: v,
                model: y,
                folder: b,
                enumField: C,
                tpl: S,
                sql_script: k,
                dash_global_filter: w,
                user: x,
                sem: T,
                guide: D,
                authority: {
                    info: function (e) {
                        return i.post("/api/auth/info", e)
                    }, create: function (e) {
                        return i.post("/api/auth/create", e)
                    }, modify: function (e) {
                        return i.post("/api/auth/modify", e)
                    }, stop: function (e) {
                        return i.post("/api/auth/stop", e)
                    }, oplog: function (e) {
                        return i.post("/api/auth/oplog", e)
                    }
                },
                account: {
                    userInfo: function (e) {
                        return i.post("/api/sub/info", e)
                    }, userList: function (e) {
                        return i.post("/api/sub/list", e)
                    }, userCreate: function (e) {
                        return i.post("/api/sub/create", e)
                    }, userModify: function (e) {
                        return i.post("/api/sub/modify", e)
                    }, userDelete: function (e) {
                        return i.post("/api/sub/delete", e)
                    }, searchUsersByName: function (e) {
                        return i.get("/api/sub/list_by_page", e)
                    }, usersByPage: function (e) {
                        return i.get("/api/sub/list_new", e)
                    }, setFrozen: function (e) {
                        return i.post("/api/user/set_frozen", e)
                    }, resetPwd: function (e) {
                        return i.get("/api/user/reset_pwd", e)
                    }, sentNotice: function (e) {
                        return i.post("/api/sub/send_notice", e)
                    }, accountLimit: function (e) {
                        return i.get("/api/account/limit", e)
                    }, groupList: function (e) {
                        return i.get("/api/group/list", e)
                    }, groupOrder: function (e) {
                        return i.post("/api/group/order", e)
                    }, groupInfo: function (e) {
                        return i.post("/api/group/info", e)
                    }, groupCreate: function (e) {
                        return i.post("/api/group/create", e)
                    }, removeAdminCheck: function (e) {
                        return i.post("/api/group/check_remove_admin", e)
                    }, groupModify: function (e) {
                        return i.post("/api/group/modify", e)
                    }, groupDelete: function (e) {
                        return i.post("/api/group/delete", e)
                    }, securityInfo: function (e) {
                        return i.post("/api/security/info", e)
                    }, securityCreate: function (e) {
                        return i.post("/api/security/create", e)
                    }, securityDelete: function (e) {
                        return i.post("/api/security/delete", e)
                    }, securityList: function (e) {
                        return i.get("/api/security/list", e)
                    }, securityPreCheck: function (e) {
                        return i.post("/api/security/pre_check", e)
                    }, securityModify: function (e) {
                        return i.post("/api/security/modify", e)
                    }, tbShareFieldCheck: function (e) {
                        return i.post("/api/share/cancel_fields_check", e)
                    }, tbShareFilterCheck: function (e) {
                        return i.post("/api/share/check", e)
                    }, getGroupCustomFields: function (e) {
                        return i.post("/api/group/list_fields", e)
                    }, updateGroupCustomFields: function (e) {
                        return i.post("/api/group/update_fields", e)
                    }, accountAssignInfo: function (e) {
                        return i.post("/api/sub_account/assign_info", e)
                    }, groupMutiOpt: function (e) {
                        return i.post("/api/group/muti_opt", e)
                    }, userFuncModify: function (e) {
                        return i.post("/api/sub/func_modify", e)
                    }, groupWorktbInfo: function (e) {
                        return i.post("/api/group/worktb_info", e)
                    }, userWorktbInfo: function (e) {
                        return i.post("/api/sub/worktb_info", e)
                    }, individuationInfo: function (e) {
                        return i.post("/api/personalization/info", e)
                    }, individuationModify: function (e) {
                        return i.post("/api/personalization/modify", e)
                    }
                },
                chart_tpl: {
                    info: function (e) {
                        return i.post("/api/chart_tpl/info", {tpl_id: e})
                    }, createChart: function (e) {
                        var t = {
                            dsh_id: e.dsh_id,
                            tb_id: e.tb_id,
                            tpl_id: e.tpl_id,
                            used_origin_fids_map: angular.toJson(e.used_origin_fids_map),
                            dsh_meta: angular.toJson(e.dsh_meta),
                            category: e.category
                        };
                        return i.post("/api/chart_tpl_apply/create", t)
                    }, create: function (e) {
                        var t = {proj_id: e.proj_id, ct_id: e.ct_id, name: e.name, type: e.type, explain: e.explain};
                        return angular.isArray(e.fid_explain) ? t.fid_explain = angular.toJson(e.fid_explain) : t.fid_explain = e.fid_explain, i.post("/api/chart_tpl/create", t)
                    }, delete: function (e) {
                        return i.post("/api/chart_tpl/delete", {tpl_id: e})
                    }, modify: function (e) {
                        var t = {
                            tpl_id: e.tpl_id,
                            proj_id: e.proj_id,
                            ct_id: e.ct_id,
                            name: e.name,
                            type: e.type,
                            explain: e.explain
                        };
                        return angular.isArray(e.fid_explain) ? t.fid_explain = angular.toJson(e.fid_explain) : t.fid_explain = e.fid_explain, i.post("/api/chart_tpl/modify", t)
                    }, applyList: function (e) {
                        var t = {type: e.type};
                        return i.post("/api/chart_tpl_apply/list", t)
                    }, typeList: function (e) {
                        return i.post("/api/chart_tpl/type_list", e)
                    }
                },
                chart_tpl_project: {
                    getTree: function (e) {
                        return i.post("/api/chart_tpl_proj/tree", e)
                    }, create: function (e) {
                        return i.post("/api/chart_tpl_proj/create", {name: e})
                    }, modify: function (e, t) {
                        return i.post("/api/chart_tpl_proj/modify", {proj_id: e, name: t})
                    }, del: function (e) {
                        return i.post("/api/chart_tpl_proj/delete", {proj_id: e})
                    }, order: function (e, t, n) {
                        return i.post("/api/chart_template/order", {proj_id: e, type: t || 0, sort: angular.toJson(n)})
                    }, move: function (e, t, n, a) {
                        return i.post("/api/chart_template/move", {
                            dsh_id: a,
                            proj_id: e,
                            type: t,
                            sort: angular.toJson(n)
                        })
                    }
                },
                chartTplRule: {
                    info: function (e) {
                        return i.get("/api/chart_tpl_rule/info", {rule_id: e})
                    }, industryList: function (e) {
                        return i.get("/api/industry/list", e)
                    }, domainList: function (e) {
                        return i.get("/api/domain/list", e)
                    }, domainSearch: function (e) {
                        return i.get("/api/domain/search", e)
                    }, create: function (e) {
                        return i.post("/api/chart_tpl_rule/create", e)
                    }, list: function (e) {
                        return i.post("/api/chart_tpl_rule/list", e)
                    }, delete: function (e) {
                        return i.post("/api/chart_tpl_rule/delete", {rule_id: e})
                    }, modify: function (e) {
                        return i.post("/api/chart_tpl_rule/modify", e)
                    }, issued: function (e) {
                        var t = {rule_id: e.rule_id, issued_status: e.issued_status};
                        return i.post("/api/chart_tpl_rule/issued", t)
                    }
                },
                pay: {
                    personalVipInfo: function () {
                        return i.post("/api/pay/personal_vip_info")
                    }, personalOrderHistory: function () {
                        return i.get("/api/pay/order_history")
                    }, getMemberRightData: function () {
                        return i.get("/pmresources/personal-config/member.json")
                    }, personalInvoice: function (e) {
                        return i.post("/api/receipt/create", e)
                    }, personalInvoiceHistory: function () {
                        return i.get("/api/receipt/list")
                    }
                },
                notice: L,
                view: {
                    info: function (e) {
                        return i.post("/api/view/info", e)
                    }
                },
                natural: {
                    searchQuery: function (e) {
                        return i.post("/api/prodigy/query", e, {errHint: !1})
                    }
                },
                editMeta: {
                    modify: function (e) {
                        return i.post("/api/edit_meta/modify", e)
                    }, info: function (e) {
                        return i.get("/api/edit_meta/info", e)
                    }
                },
                dsh_tpl: {
                    publish: function (e) {
                        return i.post("/api/dsh_tpl/publish", e)
                    }, list: function () {
                        return i.get("/api/dsh_tpl/list")
                    }, delete: function (e) {
                        return i.post("/api/dsh_tpl/delete", e)
                    }, create: function (e) {
                        return i.post("/api/dsh_tpl/create", e)
                    }, replace: function (e) {
                        return i.post("/api/dsh_tpl/replace", e)
                    }
                },
                getJobStatus: function (e) {
                    return i.post("/api/job/status", {job_id: e})
                },
                getTaskStatus: function (e) {
                    return i.get("/api/task/status", {task_id: e}, {errHint: !1})
                },
                getFunctionList: function () {
                    return i.get("/api/function/list")
                }
            }
        }]).service("baService", ["$http", "errHint", "commonHttp", function (e, t, i) {
            return {
                list: function (e) {
                    return i.post("/api/sta/list", e)
                }, addDomain: function (e) {
                    return i.post("/api/sta/add", e)
                }, delDomain: function (e) {
                    return i.post("/api/sta/del", e)
                }, updateConfig: function (e) {
                    return i.post("/api/sta/update", e)
                }, checkDeploy: function (e) {
                    return i.post("/api/sta/ref", e)
                }, getToken: function (e) {
                    return i.post("/api/sta/token", e)
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.common").service("globalDateSchemeService", ["commonService", "$q", function (e, t) {
            function i(e, t) {
                for (var i = {}, n = 0, a = e.length; n < a; n++) if (e[n].scheme_id == t) {
                    i = e[n];
                    break
                }
                return i
            }

            function n() {
                return e.adv_date_scheme.list().then(function (e) {
                    return 0 == e.status ? e.result.adv_date_schs || [] : []
                })
            }

            function a(e, t) {
                var i = e.applySchemeId, n = e.schemeList;
                if (t) e.selectedScheme = n[0]; else for (var a = 0, r = n.length; a < r; a++) {
                    var o = n[a];
                    if (i) {
                        if (o.scheme_id == i) {
                            e.selectedScheme = o;
                            break
                        }
                    } else if (1 == o.is_default) {
                        e.selectedScheme = o, e.applySchemeId = o.scheme_id;
                        break
                    }
                }
                if (!e.selectedScheme) for (var a = 0, r = n.length; a < r; a++) {
                    var o = n[a];
                    if (1 == n[a].is_default) {
                        e.selectedScheme = o, e.applySchemeId = o.scheme_id;
                        break
                    }
                }
            }

            function r(e) {
                for (var t = "", i = 0, n = e.length; i < n; i++) {
                    var a = e[i];
                    if (1 == a.is_default) {
                        t = a;
                        break
                    }
                }
                return t
            }

            function o(e) {
                var t = {name: e.name};
                return e.scheme_id && (t.scheme_id = e.scheme_id), t
            }

            function s() {
                return localStorage ? localStorage.getItem(C) || "" : $.cookie(C) || ""
            }

            function l(e) {
                localStorage ? localStorage.setItem(C, e) : $.cookie(C, e)
            }

            function c() {
                localStorage ? localStorage.removeItem(C) : $.cookie(C, "")
            }

            function d(e) {
                return !!k && k[e]
            }

            function u(e, t) {
                k && k[e] || (k[e] = []), k[e] = t
            }

            function p() {
                k[ct_scheme] && delete k[ct_scheme]
            }

            function f(e) {
                if (k) for (var t in k) t.indexOf("_" + e) >= 0 && delete k[t]
            }

            function h(e, t) {
                var i = !1;
                return t.map(function (t) {
                    t.name == e.name && t.scheme_id != e.scheme_id && (i = !0)
                }), i
            }

            function g(e) {
                var t = !1;
                for (var i in e) e[i] && (t = !0);
                return t
            }

            function m(e, t, i) {
                angular.forEach(e, function (e) {
                    e.fid == t && "date" == e.data_type && (e.scheme_id = i)
                })
            }

            function v(e, t, i, n) {
                function a(e, t) {
                    angular.forEach(e, function (e) {
                        r(e, t), e.items && e.items.length > 0 && a(e.items, t)
                    })
                }

                function r(e, i) {
                    e.fid != t || "date" != e.data_type || "" != e.granularity || e.hasOwnProperty("aggregator") || (e.scheme_id = i, e.range = n || [])
                }

                if (e && !(e instanceof Array)) for (var o in e) a(e[o], i)
            }

            function y(e, t) {
                var i = "";
                return angular.forEach(e, function (e) {
                    e.fid == t && "date" == e.data_type && (i = e.scheme_id)
                }), i
            }

            function b(t, i, n) {
                angular.forEach(t, function (t) {
                    var a = t.fid;
                    n[a] && "date" == t.data_type && e.adv_date.list(i, t.scheme_id).then(function (e) {
                        0 == e.status && (n[a].list = e.result, u(i + "_" + t.scheme_id, e.result))
                    })
                })
            }

            function _(i, n, a) {
                var r = d(i + "_" + n);
                if (r && a) {
                    var o = t.defer(), s = {result: r};
                    return o.resolve(s), o.promise
                }
                return e.adv_date.list(i, n).then(function (e) {
                    return 0 == +e.status ? (u(i + "_" + n, e.result), e) : {result: []}
                })
            }

            function w(e) {
                var t = {}, i = [];
                return angular.forEach(e, function (e) {
                    t[e.opt_id] || (i.push(e), t[e.opt_id] = !0)
                }), i
            }

            var x = $.cookie("user_id"), C = "BDP_globalDateScheme_" + x, k = {};
            this.getSchemeObj = i, this.getSchemeList = n, this.getDefaultSchemeObj = r, this.getDefaultSchemeInList = a, this.getSchemeModifyParam = o, this.getLatestScheme = s, this.setLatestScheme = l, this.clearLatestScheme = c, this.getChartSchemeCache = d, this.setChartSchemeCache = u, this.clearChartSchemeCache = p, this.removeChartSchemeCache = f, this.checkRepeatScheme = h, this.hasEditingScheme = g, this.addSchemeToFilterList = m, this.addSchemeToFilterListInner = v, this.findSchemeInFilterList = y, this.reLoadDateFilterRangeList = b, this.getAdvDateList = _, this.advDateListUnique = w
        }])
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(40), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.common").filter("null_date", ["$rootScope", "$translate", function (e, t) {
        var i = t.instant("chart.notLimit");
        return function (e) {
            return e || i
        }
    }]).filter("format_date", ["$rootScope", "$translate", function (e, t) {
        var i = t.instant("dash.allTime"), n = t.instant("chart.notLimit"), a = /^opt_[0-9a-zA-Z]{32}$/;
        return function (e, t, r) {
            if (1 == e.length && !a.test(e[0])) return e[0];
            if (!e) return r || i;
            var o = e.length, s = "test";
            switch (o) {
                case 0:
                    s = r || i;
                    break;
                case 1:
                    s = a.test(e[0]) ? function () {
                        var n = "";
                        return angular.forEach(t, function (t, i) {
                            t.opt_id === e[0] && (n = t.name)
                        }), n = n || (r || i)
                    }() : e[0];
                    break;
                case 2:
                    s = (e[0] ? e[0] : n) + "~" + (e[1] ? e[1] : n);
                    break;
                default:
                    s = r || i
            }
            return s
        }
    }]).filter("inner_range_date_format", function () {
        return function (e, t) {
            var i = t.granularity, n = t.granularity_name || "", a = t.month_start_day || 0;
            return e.length ? e.map(function (e) {
                return bdpChart.helper.checkGranularity(i, e, n, a)
            }).join(",") : e
        }
    }).filter("granularity", ["granularityMap", function (e) {
        return function (t) {
            var i = t;
            return t && (i = "chart.by" + t.charAt(0).toUpperCase() + t.substring(1)), e[i] || e["chart.byDay"]
        }
    }]).filter("dataShowType", ["dataShowTypeMap", function (e) {
        return function (t) {
            var i = t;
            return t && (i = "chart.by" + t.charAt(0).toUpperCase() + t.substring(1)), e[i] || e["chart.byText"]
        }
    }]).filter("empty", function () {
        return function (e) {
            return "NULL" == e && (e = ""), e
        }
    }).filter("query_inner", function () {
        return function (e, t, i, n) {
            if (!e || !t) return e;
            var a = [];
            if ("string" == typeof e[0]) n && "sub_date" == n.data_type && (t = parseInt(t).toString()), angular.forEach(e, function (e) {
                e.toLowerCase().indexOf(t.toLowerCase()) > -1 && a.push(e)
            }); else {
                var r;
                angular.forEach(e, function (e) {
                    r = bdpChart.helper.checkGranularity(i, e), r.toLowerCase().indexOf(t.toLowerCase()) > -1 && a.push(e)
                })
            }
            return a
        }
    }).filter("query_fields", function () {
        return function (e, t, i) {
            if (!t) return e;
            i = i || "fuzzy";
            var n = [];
            return angular.forEach(e, function (e) {
                "number" != typeof e.name && "number" != typeof e.original_name || (e.name = e.name.toString(), e.original_name = e.original_name.toString()), e.original_name ? (e.original_name.toLowerCase().indexOf(t.toLowerCase()) > -1 || e.name.toLowerCase().indexOf(t.toLowerCase()) > -1) && n.push(e) : "fuzzy" == i && e.name.toLowerCase().indexOf(t.toLowerCase()) > -1 ? n.push(e) : "exactly" == i && e.name.toLowerCase() == t.toLowerCase() && n.push(e)
            }), n
        }
    }).filter("queryFieldsAsTitle", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                "number" == typeof e.name && (e.title = e.title.toString()), e.title.toLowerCase().indexOf(t.toLowerCase()) > -1 && i.push(e)
            }), i
        }
    }).filter("query_tables", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                "number" == typeof e.name && (e.name = e.name.toString()), (e.name.toLowerCase().indexOf(t.toLowerCase()) > -1 || e.label && e.label.toLowerCase().indexOf(t.toLowerCase()) > -1) && i.push(e)
            }), i
        }
    }).filter("categoryFilter", ["$rootScope", function (e) {
        return function (t, i) {
            if (!i) return t;
            for (var n = [], a = e.language, r = 0, o = t.length; r < o; r++) t[r].db_name[a].toLowerCase().indexOf(i.toLowerCase()) == -1 && t[r].category_name[a].toLowerCase().indexOf(i.toLowerCase()) == -1 || n.push(t[r]);
            return n
        }
    }]).filter("nameFilter", function () {
        return function (e, t) {
            if (!t) return e;
            for (var i = [], n = 0; n < e.length; n++) e[n].original_name ? e[n].name.toLowerCase().indexOf(t.toLowerCase()) == -1 && e[n].original_name.toLowerCase().indexOf(t.toLowerCase()) == -1 || i.push(e[n]) : e[n].name.toLowerCase().indexOf(t.toLowerCase()) != -1 && i.push(e[n]);
            return i
        }
    }).filter("titleFilter", function () {
        return function (e, t) {
            if (!t) return e;
            for (var i = [], n = 0; n < e.length; n++) e[n].title.toLowerCase().indexOf(t.toLowerCase()) != -1 && i.push(e[n]);
            return i
        }
    }).filter("query_models", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                "number" == typeof e.name && (e.name = e.name.toString()), e.name.toLowerCase().indexOf(t.toLowerCase()) > -1 && i.push(e)
            }), i
        }
    }).filter("query_fields_nick_name", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                "number" != typeof e.nick_name && "number" != typeof e.name || (e.nick_name = e.nick_name.toString(), e.name = e.name.toString()), (e.nick_name.toLowerCase().indexOf(t.toLowerCase()) > -1 || e.name.toLowerCase().indexOf(t.toLowerCase()) > -1) && i.push(e)
            }), i
        }
    }).filter("query_baiduSearch", function () {
        return function (e, t) {
            var i = [];
            return t ? "暂未设置" === t ? (angular.forEach(e, function (e, t) {
                "" === e.companyName && i.push(e)
            }), i) : (angular.forEach(e, function (e, n) {
                "number" == typeof e.companyName && (e.companyName = e.companyName.toString()), (e.companyName.toLowerCase().indexOf(t.toLowerCase()) > -1 || 0 == n) && i.push(e)
            }), i) : e
        }
    }).filter("cutLength", function () {
        return function (e, t) {
            if (!t) return e;
            var i = e;
            return e.length > t && (i = e.slice(0, t) + "……"), i
        }
    }).filter("query_updateRecord_fileLlist", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                (e.excel_name + "-" + e.sheet_name).toLowerCase().indexOf(t.toLowerCase()) > -1 && i.push(e)
            }), i
        }
    }).filter("queryByTagorDstype", ["$rootScope", function (e) {
        return function (t, i) {
            function n(e) {
                return e.tag && e.tag.toLowerCase().indexOf(i.toLowerCase()) > -1
            }

            function a(t) {
                var n = t.ds_type_name[e.language];
                return n && n.toLowerCase().indexOf(i.toLowerCase()) > -1
            }

            if (!i) return t;
            var r = [];
            return angular.forEach(t, function (e) {
                (n(e) || a(e)) && r.push(e)
            }), r
        }
    }]).filter("query_ds_names_or_tags", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [], n = [];
            angular.forEach(e, function (e) {
                e.hasOwnProperty("tag") && null != e.tag && e.tag.toLowerCase().indexOf(t.toLowerCase()) > -1 ? i.push(e) : e.hasOwnProperty("ds_name") && null != e.ds_name && e.ds_name.toLowerCase().indexOf(t.toLowerCase()) > -1 && n.push(e)
            });
            return i.concat(n)
        }
    }).filter("query_user", function () {
        return function (e, t, i) {
            if (!t && !i) return e;
            var n = [];
            return t && i ? angular.forEach(e, function (e) {
                e.name.toLowerCase().indexOf(t.toLowerCase()) > -1 && e.username && e.username.toLowerCase().indexOf(i.toLowerCase()) > -1 && n.push(e)
            }) : t ? angular.forEach(e, function (e) {
                e.name.toLowerCase().indexOf(t.toLowerCase()) > -1 && n.push(e)
            }) : angular.forEach(e, function (e) {
                e.username && e.username.toLowerCase().indexOf(i.toLowerCase()) > -1 && n.push(e)
            }), n
        }
    }).filter("query_group", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                e.group_name.toLowerCase().indexOf(t.toLowerCase()) > -1 && i.push(e)
            }), i
        }
    }).filter("query_parse_param", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [], n = [];
            return angular.forEach(e, function (e) {
                n = [], angular.forEach(e.keys, function (e) {
                    e.name.toLowerCase().indexOf(t.toLowerCase()) > -1 && n.push(e)
                }), n.length > 0 && i.push({
                    original_field_id: e.original_field_id,
                    original_field_name: e.original_field_name,
                    keys: n
                })
            }), i
        }
    }).filter("filter_compare", ["$rootScope", "$translate", function (e, t) {
        var i = t.instant("warn.higher"), n = t.instant("warn.lower");
        return function (e) {
            return 1 == e ? i : n
        }
    }]).filter("warnSwitch", ["$translate", function (e) {
        var t = e.instant("warn.open"), i = e.instant("warn.close");
        return function (e) {
            return 1 == e ? i : t
        }
    }]).filter("sub_date", function () {
        return function (e, t) {
            var i = t.data_type, n = t.config ? t.config.granularity : t.granularity, r = t.name;
            return void 0 === e || "" === e || 0 == e.length ? r : "string" == i ? "object" !== (void 0 === e ? "undefined" : (0, a.default)(e)) ? e : e.join("，") : "date" == i ? "object" !== (void 0 === e ? "undefined" : (0, a.default)(e)) ? bdpChart.helper.checkGranularity(n, e) : e.map(function (e) {
                return bdpChart.helper.checkGranularity(n, e)
            }).join("，") : (n = t.fid.split("_")[1], bdpChart.helper.subDateFormat(n, e))
        }
    }).filter("dash_sub_date", ["$rootScope", "$translate", function (e, t) {
        var i = t.instant("all");
        return function (e, t) {
            var n = t.data_type, r = t.granularity;
            return void 0 === e || "" === e || 0 == e.length ? i : "string" == n ? "object" !== (void 0 === e ? "undefined" : (0, a.default)(e)) ? e : e.join("，") : "date" == n ? "object" !== (void 0 === e ? "undefined" : (0, a.default)(e)) ? bdpChart.helper.checkGranularity(r, e) : e.map(function (e) {
                return bdpChart.helper.checkGranularity(r, e)
            }).join("，") : (r = t.fid.split("_")[1], "object" !== (void 0 === e ? "undefined" : (0, a.default)(e)) ? bdpChart.helper.subDateFormat(r, e) : e.map(function (e) {
                return bdpChart.helper.subDateFormat(r, e)
            }).join(","))
        }
    }]).filter("plot_line_calc", ["formulaKeyMap", function (e) {
        return function (t) {
            return e[t]
        }
    }]).filter("adv_formula", [function () {
        return function (e, t) {
            var i = [];
            return angular.forEach(e, function (e) {
                "all" != e.show && e.show != t || i.push(e)
            }), i
        }
    }]).filter("date_gran_to_name", ["dateNameMap", function (e) {
        return function (t) {
            return e[t] || e.day
        }
    }]).filter("tb_type_hint", function () {
        return function (e, t) {
            var i;
            switch (e) {
                case"excel":
                    i = "Excel";
                    break;
                case"join":
                    i = "多表合并";
                    break;
                case"aggr":
                    i = "数据聚合";
                    break;
                case"ds":
                    i = "数据库表";
                    break;
                case"public":
                    i = "公共数据表";
                    break;
                default:
                    i = "工作表"
            }
            return i
        }
    }).filter("userStatus", ["$translate", "$rootScope", function (e, t) {
        var i = e.instant("user.base_info.unactive"), n = e.instant("user.base_info.pwd");
        return function (e) {
            return 1 == e ? i : n
        }
    }]).filter("fieldType", function () {
        return function (e) {
            switch (e = Number(e)) {
                case 0:
                case 1:
                    return "数值";
                case 2:
                    return "字符串";
                case 3:
                    return "日期"
            }
        }
    }).filter("granularityName", ["granularityMap", function (e) {
        return function (t) {
            var i = t;
            return t && (i = "chart.by" + t.charAt(0).toUpperCase() + t.substring(1)), e[i] || e.normal
        }
    }]).filter("buildAggregator", function () {
        return function (e) {
            return e ? e.filter(function (e) {
                return 1 !== e.is_build_aggregated
            }) : []
        }
    }).filter("db_type", ["$rootScope", "databaseType", function (e, t) {
        return function (e) {
            for (var i = "", n = 0; n < t.length; n++) if (t[n].dbType == e) {
                i = t[n].typeName;
                break
            }
            return i
        }
    }]).filter("weekFormat", function () {
        return function (e) {
            "number" != typeof e && (e = new Date(e).getTime());
            return Highcharts.dateFormat("%b/%e", e) + "~" + Highcharts.dateFormat("%b/%e", e + 5184e5)
        }
    }).filter("dateFormat", function () {
        return function (e) {
            return Highcharts.dateFormat("%Y-%m-%d", new Date(e))
        }
    }).filter("workTbName", function () {
        return function (e) {
            return e || "请选择工作表"
        }
    }).filter("workFieldName", function () {
        return function (e) {
            return e || "请选择字段"
        }
    }).filter("filterOperator", ["filterOperatorMap", function (e) {
        return function (t) {
            return "" === t ? "" : e[t] || e[0]
        }
    }]).filter("conditionType", function () {
        return function (e) {
            return 0 == e ? "全部" : "任一"
        }
    }).filter("timestamp2LocaleDate", [function () {
        return function (e, t) {
            return bdpChart.helper.checkGranularity(t, e)
        }
    }]).filter("t2Date", [function () {
        return function (e, t) {
            var i = t.granularity, n = t.granularity_name || "", a = t.month_start_day || 0;
            return "week" === i && (a = t.week_start_day_of_week), bdpChart.helper.checkGranularity(i, e, n, a)
        }
    }]).filter("yoyTypeTranslate", ["$rootScope", "dateNameMap", function (e, t) {
        return function (i, n) {
            var a, r;
            return "zh" == e.language ? (a = "环比增长", r = "value" == n ? "值" : "率") : (a = t[i] + " on " + t[i], r = n ? "(" + n + ")" : ""), n ? a + r : a
        }
    }]).filter("thisCaptain", function () {
        return function (e) {
            return e.substring(0, 4) + e.charAt(4).toUpperCase() + e.substring(5)
        }
    }).filter("i18nMonth", ["$rootScope", function (e) {
        var t = e.language,
            i = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        return function (e) {
            return "zh" === t ? e + "月" : "en" === t ? i[e - 1] : void 0
        }
    }]).filter("i18nWeek", ["$rootScope", function (e) {
        var t = e.language, i = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
            n = ["星期一", "星期二", "星期三", "星期四", "星期五", "星期六", "星期日"];
        return function (e) {
            return "zh" === t ? n[e - 1] : "en" === t ? i[e - 1] : void 0
        }
    }]).filter("i18nDay", ["$rootScope", function (e) {
        var t = e.language;
        return function (e) {
            if ("zh" === t) return e + "日";
            if ("en" === t) switch (e) {
                case 1:
                    return e + "st";
                case 2:
                    return e + "nd";
                case 3:
                    return e + "rd";
                default:
                    return e + "th"
            }
        }
    }]).filter("timestamp2DayInWeek", ["$rootScope", function (e) {
        var t = e.language, i = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
            n = ["星期一", "星期二", "星期三", "星期四", "星期五", "星期六", "星期日"];
        return function (e) {
            var a = new Date(e), r = a.getDay();
            return r = 0 === r ? 7 : r, "zh" === t ? n[r - 1] : "en" === t ? i[r - 1] : void 0
        }
    }]).filter("query_union_table", function () {
        return function (e, t) {
            var i = [];
            return t ? (angular.forEach(e, function (e) {
                e.hasOwnProperty("tag") && e.tag.toLowerCase().indexOf(t.toLowerCase()) > -1 ? i.push(e) : e.hasOwnProperty("name") && e.name.toLowerCase().indexOf(t.toLowerCase()) > -1 && i.push(e)
            }), i) : e
        }
    }).filter("timestampToHoursFormat", ["$translate", function (e) {
        return function (t) {
            t /= 1e3;
            var i = Math.floor(t / 3600), n = Math.floor((t - 3600 * i) / 60), a = Math.floor(t - 3600 * i - 60 * n);
            return i + e.instant("author.hour") + n + e.instant("author.minute") + a + e.instant("author.second")
        }
    }]).filter("fieldFilter", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                "number" == typeof e.name && (e.name = e.name.toString()), e.name.toLowerCase().indexOf(t.toLowerCase()) > -1 && i.push(e)
            }), i
        }
    }).filter("ruleListQuery", function () {
        return function (e, t) {
            var i = t.creator, n = t.name;
            if (!t || "all" == i && !n) return e;
            var a = [];
            return angular.forEach(e, function (e) {
                "number" == typeof e.name && (e.name = e.name.toString()), "all" == i || n || e.user_id == i && a.push(e), "all" == i && n && e.name.toLowerCase().indexOf(n.toLowerCase()) >= 0 && a.push(e), "all" != i && n && e.name.toLowerCase().indexOf(n.toLowerCase()) >= 0 && e.user_id == i && a.push(e)
            }), a
        }
    }).filter("dbLogSheetStatus", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                e.status != t && "all" != t || i.push(e)
            }), i
        }
    }).filter("dbLogSheetQuery", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                e.title.toLowerCase().indexOf(t.toLowerCase()) > -1 && i.push(e)
            }), i
        }
    }).filter("dbLogTaskStatus", function () {
        return function (e, t) {
            if (!t) return e;
            var i = [];
            return angular.forEach(e, function (e) {
                e.status != t && "all" != t || i.push(e)
            }), i
        }
    }).filter("htmlFilter", ["$sce", function (e) {
        return function (t) {
            return e.trustAsHtml(t)
        }
    }]).filter("getFieldsByDataType", function () {
        return function (e, t) {
            var i = [];
            return angular.forEach(e, function (e, n) {
                e.data_type == t && i.push(e)
            }), i
        }
    }).filter("trustUrl", ["$sce", function (e) {
        return function (t) {
            return e.trustAsResourceUrl(t)
        }
    }]).filter("toSce", ["$sce", function (e) {
        return function (t) {
            return e.trustAsHtml(t)
        }
    }]).filter("handleRowSummary", function () {
        return function (e) {
            var t = bdpChart.language || "zh", i = "zh" == t ? "行总计" : "Row Summary";
            return $.inArray(e.originName, ["行总计", "Row Summary"]) > -1 ? i : e.name
        }
    }).filter("formatStorageAccount", function () {
        return function (e) {
            var t = bdp.utils.formatStorageAccount(1024 * e * 1024), i = t.indexOf(".");
            return t.slice(0, i) + t.slice(i + 3)
        }
    }).filter("projDashSearchName", ["queryTextFunc", "multipleProService", function (e, t) {
        return function (i, n, a) {
            function r(t, n) {
                t.map(function (t) {
                    t.queryHit = !1, t.queryShow = !1, "project" == t.attribute && (t.queryHit = !!e.existText(t.name, i), t.queryShow = !!t.queryHit || !!n, t.queryShow && (d.push(t), u.push(t.proj_id), c.push(t.proj_id), p++), t.queryShow && !h && (h = t)), t.subs && r(t.subs, t.queryShow)
                })
            }

            function o(t) {
                t.map(function (t) {
                    "project" == t.attribute && t.subs && t.subs.map(function (n) {
                        "dashboard" == n.attribute && (n.queryHit = !!e.existText(n.name, i), "cat" == a && !n.choose && n.queryHit && (n.queryHit = !1), n.queryShow = t.queryHit || n.queryHit, n.queryShow && u.indexOf(t.proj_id) < 0 && (d.push(t), u.push(t.proj_id), c.push(t.proj_id), p++), n.queryShow && !h && (h = t))
                    }), t.subs && o(t.subs)
                })
            }

            function s(e) {
                e.map(function (e) {
                    "project" == e.attribute && g.indexOf(e.proj_id) >= 0 && !e.queryShow && (e.queryShow = !0, c.push(e.proj_id), p++), e.subs && s(e.subs)
                })
            }

            function l(e) {
                e.subs && !h && e.subs.map(function (e) {
                    "dashboard" == e.attribute && e.queryHit ? h = f : "project" == e.attribute && (e.queryHit ? h = e : l(e))
                })
            }

            var c = [], d = [], u = [], p = 0, f = null, h = null;
            r(n), o(n), u = bdp.utils.arrayUnique(u);
            var g = [];
            return angular.forEach(d, function (e) {
                t.findParId(e, g), u = u.concat(g)
            }), s(n), function (e) {
                e.some(function (e) {
                    if ("project" == e.attribute && e.queryShow) return f = e, !0
                })
            }(n), f && l(f), {showList: n, showNum: p, showProjIdList: c, firstHitProjObj: i ? h : ""}
        }
    }]).filter("translate", ["$parse", "$translate", function (e, t) {
        return function (e) {
            return void 0 == bdpI18N[e] ? e : bdpI18N[e]
        }
    }]).factory("$jsTipTranslate", ["$rootScope", "$translate", function (e, t) {
        return function (e, t) {
            t.tips = t.tips || {}, function () {
                angular.forEach(e, function (e, i) {
                    t.tips[e] = bdpI18N[e]
                })
            }()
        }
    }]).service("$translate", ["$timeout", function (e) {
        this.instant = function (e) {
            return void 0 == bdpI18N[e] ? e : bdpI18N[e]
        }
    }]).filter("tplListNameQuery", ["queryTextFunc", function (e) {
        return function (t, i) {
            var n = 0;
            return i.map(function (i) {
                t ? (i.queryShow = !!e.existText(i.name, t), n = i.queryShow ? ++n : n) : (i.queryShow = !0, n++)
            }), {showList: i, showNum: n}
        }
    }]).filter("tableDateValue", [function () {
        return function (e, t) {
            var i, n = "", a = t.data_type;
            if (!e) return "";
            if ("date" === a) {
                n = t.granularity || "day";
                var r = t.granularity_name || "", o = t.month_start_day || 0;
                "hour" !== n && "minute" !== n && "second" !== n || (n = "g_" + n), "week" === n && (o = t.week_start_day_of_week || 1), ["(空白)", "(Blank)"].indexOf(e) > -1 ? i = e : (i = bdpChart.helper.checkGranularity(n, e, r, o), "week" === n && (i += "（" + Highcharts.dateFormat("%b/%e", new Date(e)) + "~" + Highcharts.dateFormat("%b/%e", new Date(e + 5184e5)) + "）"))
            } else "sub_date" == a ? (n = t.fid.split("_")[1], i = bdpChart.helper.subDateFormat(n, e)) : i = e;
            return i = i ? i.toString() : ""
        }
    }])
}, function (e, t, i) {
    "use strict";
    angular.module("BC.common").directive("bdpLocalQuery", function () {
        function e(e, t) {
            if (t.indexOf(".") < 0) return e[t];
            for (var i = t.split("."), n = e; i.length;) n = n[i.shift()];
            return n
        }

        function t(e, i, n, a, r) {
            a(e);
            var o = [];
            i[0].forEach(function (s, l) {
                var c = e, d = e[s.key];
                "" === s.key ? (c = {}, d = e) : d = d || [], "$" === s.flag ? d.forEach(function (e, s) {
                    t(e, i, n, a, r), n(e, c), o.push(e)
                }) : "=" === s.flag ? d.forEach(function (e, t) {
                    n(e, c, "isLeaf"), o.push(e)
                }) : s.flag || d.forEach(function (e, o) {
                    t(e, i.slice(1), n, a, r)
                })
            }), r(e, o)
        }

        function i(e) {
            return e.split(",").map(function (e, t) {
                var i = e.match(/\[([\$=])?\]$/);
                if (!i) throw new Error("struct parse error: [] not found! ");
                return {key: e.replace(i[0], ""), flag: i[1]}
            })
        }

        return {
            restrict: "A",
            scope: {tree: "=bdpLocalQuery", query: "=?ngModel", struct: "=?queryStruct", key: "=?queryKey"},
            link: function (n, a, r) {
                function o() {
                    n.query && "" != n.query ? a.addClass("has-text") : a.removeClass("has-text")
                }

                n.struct = n.struct || ["[]"];
                var s = n.struct.map(i), l = s[s.length - 1];
                l[0].flag || (l[0].flag = "=");
                var c = function () {
                    function i(t) {
                        var i = e(t, r);
                        return "number" == typeof i && (i = i.toString()), "fuzzy" == o && i.toLowerCase().indexOf(a.toLowerCase()) > -1 || "exactly" == o && i.toLowerCase() == a.toLowerCase()
                    }

                    var a = void 0 == n.query ? "" : String(n.query), r = n.key || "name", o = "fuzzy";
                    "" === a && (i = function () {
                        return !0
                    }), t(n.tree, s, function (e, t, n) {
                        n && (e.hide_by_query = !i(e)), t.hide_by_query &= e.hide_by_query
                    }, function (e) {
                        e.hide_by_query = !0
                    }, function (e, t) {
                        "" === a && 0 === t.length && (e.hide_by_query = !1)
                    })
                };
                n.$watch("query", function (e, t) {
                    (e || t) && e != t && c()
                }), n.$watch("tree", function (e, t) {
                    e && (n.query = "", setTimeout(function () {
                        a.blur()
                    }, 10), o(), c())
                }), a.on("keyup.localQuery", function (e) {
                    27 == e.which && (n.$apply('query=""'), a.blur()), o()
                }), o()
            }
        }
    }).directive("bdpNgRepeatComplete", function () {
        return function (e, t, i) {
            if (e.$first) {
                var n = e.$eval(i.start);
                "[object Function]" === Object.prototype.toString.call(n) && n()
            }
            if (e.$last) {
                var a = e.$eval(i.end);
                "[object Function]" === Object.prototype.toString.call(a) && a()
            }
        }
    }).directive("focusMe", ["$timeout", function (e) {
        return {
            link: function (t, i, n) {
                t.$watch(n.focusMe, function (t) {
                    t === !0 && e(function () {
                        i[0].focus()
                    })
                })
            }
        }
    }]).directive("fixMore", [function () {
        return {
            restrict: "A", scope: !0, link: function (e, t, i) {
                $(t).on("mouseover", function (e) {
                    var t = $(this), i = t.next("ul.more-list");
                    if (i.length) {
                        var n = e.pageY, a = i.height(), r = $(".J-chart-right");
                        if (r[0]) {
                            var o = i && i.css("width") ? i.css("width").substr(0, i.css("width").indexOf("px")) : null,
                                s = o || t.outerWidth();
                            r[0].getBoundingClientRect().left - t[0].getBoundingClientRect().right < s - 6 ? i.css("left", "-" + s + "px") : t.parent().parent().hasClass("more-list") ? "-" == t.parent().parent().css("left").substr(0, 1) ? i.css("left", "-" + s + "px") : r[0].getBoundingClientRect().left - t.parent()[0].getBoundingClientRect().right < s ? i.css("left", "-" + s + "px") : i.css("left", "100%") : i.css("left", "100%")
                        }
                        n + a > document.body.clientHeight ? i.css({top: 24 - a}) : i.css({top: 0})
                    }
                })
            }
        }
    }]).directive("exportWorksheet", ["$http", "$rootScope", "commonService", "ngDialog", "errHint", "$translate", function (e, t, i, n, a, r) {
        return {
            restrict: "A", scope: !0, link: function (e, o, s) {
                function l(i) {
                    var a = i.export_max_num || 0, r = e.previewData.field_data_total;
                    t.language;
                    e.exportData = r, e.export_max_num = a, r > a ? (e.exportData = a, n.open({
                        template: "/static/partials/dialogTemplates/export_worksheet_large_limit_tip.html",
                        className: "ngdialog-theme-default ngDialog-width-400",
                        scope: e
                    })) : c()
                }

                function c() {
                    var r = e.selected.tb_id, o = e.filterCondition;
                    t.language;
                    n.open({
                        template: "/static/partials/dialogTemplates/export_worksheet_large_tip.html",
                        className: "ngdialog-theme-default ngDialog-width-400",
                        scope: e
                    }), "excel" == s.exportType ? i.tb.exportTbFile({
                        tb_id: r,
                        row_filter: angular.toJson(o)
                    }).then(function (e) {
                        0 == e.status || 27009 == e.status && a(e.errstr)
                    }) : (e.loading = !0, i.tb.exportTbTupu({
                        tb_id: r,
                        row_filter: angular.toJson(o)
                    }).then(function (t) {
                        if (e.loading = !1, 0 == t.status) {
                            var i = t.result.login_url;
                            window.open(i, "_blank")
                        }
                    }))
                }

                function d() {
                    var i = "";
                    i = 3 == t.enterprise_type ? '<p>该功能只对付费会员开放，<a class="link" href="/member-pay.html#?vipLevel=2" target="_blank">立即升级</a>，即可使用</p>' : "<p>" + r.instant("wb.exportWorksheet.noPermission0"), n.openConfirm({
                        template: "/static/partials/dialogTemplates/confirm-dialog.html",
                        className: "ngdialog-theme-default ngDialog-width-300",
                        scope: e,
                        data: {
                            title: r.instant("downloadTitleTip"),
                            cancelValue: r.instant("iKnow"),
                            hideConfirm: !0,
                            trustHtmlStr: !0,
                            message: i
                        }
                    })
                }

                e.openOfflineList = function () {
                    t.fireOfflineTaskList = !t.fireOfflineTaskList
                }, o.on("click", function () {
                    var e = s.exportType, i = null;
                    if (i = "tupu" == e ? t.global.tpExportDataSeting : t.global.tbExportDataSetting, !i.is_export) return void d();
                    l(i)
                }), e.goOnExport = function () {
                    c()
                }
            }
        }
    }]).directive("showOnload", function () {
        return {
            restrict: "A", link: function (e, t, i) {
                function n() {
                    t.hide()
                }

                t.hide(), t.on("loadeddata", function () {
                    t[0].readyState >= 2 && (t.show(), t.off("loadeddata"))
                }), $(window).on("beforeunload", n), e.$on("$destroy", function () {
                    $(window).off("beforeunload", n)
                })
            }
        }
    }).directive("warningAmount", [function () {
        return {
            restrict: "A", controller: ["$scope", "commonHttp", "$rootScope", "$timeout", function (e, t, i, n) {
                var a = function () {
                    t.get("/api/warn/amount").then(function (e) {
                        "0" === e.status && (i.unread = e.result.unread)
                    })
                };
                n(function () {
                    a()
                }, 500);
                e.$on("_websocketChartMessage_", function (e, t) {
                    var n = "string" == typeof t.data ? $.parseJSON(t.data) : t.data;
                    5 == n.type && (i.unread = n.count)
                })
            }]
        }
    }]).directive("fixedWithDom", ["$position", function (e) {
        return {
            scope: !0, link: function (t, i, n, a) {
                function r(t, i, n, a) {
                    var r = e.positionElements(t, i, n, a), o = f[0] || 0, s = f[1] || 0;
                    i.css({top: r.top + s + "px", left: r.left + o + "px"})
                }

                var o = n.fixedWithDom, s = $(n.fixedDomSelector)[0] ? $(n.fixedDomSelector) : $(i).parent(),
                    l = e.scrollParent(s), c = n.fixedScrollHide, d = bdp.utils.guid(), u = $(l).scrollTop(),
                    p = void 0 != n.fixedDelayRender ? Number(n.fixedDelayRender) : 0,
                    f = n.fixedPosOffset ? t.$eval(n.fixedPosOffset) : [0, 0];
                i.css("visibility", "hidden"), setTimeout(function () {
                    r(s, i, o, !0), i.css("visibility", "visible")
                }, p), void 0 !== c && ($(l).off("scroll" + d).on("scroll." + d, function (e) {
                    Math.abs(u - $(e.target).scrollTop()) > 8 && t.$apply(c)
                }), t.$on("$destroy", function () {
                    $(l).off("scroll" + d)
                }))
            }
        }
    }]).directive("rippleButton", [function () {
        return {
            restrict: "A", template: function (e, t) {
                var i = t.rippleButton,
                    n = '\n                <div ng-transclude></div>\n                <svg style="position:absolute;top:0;left:0;width:100%;height:100%;">\n\t\t\t\t\t[template]\n                </svg>\n                <div style="position:absolute;top:0;left:0;width:100%;height:100%;" ng-click="rippleAnimation($event)" class="eventWrap"></div>\n                ',
                    a = {
                        circle: function () {
                            return '\n                        <g class="animateWrap" style="opacity:0;">\n                            <circle fill="#5182E4" cx="1" cy="1" r="1" />\n                        </g>\n                        '
                        }, radialCircle: function () {
                            return '\n                        <defs>\n                            <radialGradient id="gradient">\n                                <stop offset="0" stop-color="#5182E4" />\n                                <stop offset="0.25" stop-color="#73A1FF" />\n                                <stop offset="0.35" stop-color="#5182E4" />\n                                <stop offset="0.50" stop-color="#73A1FF" />\n                                <stop offset="0.60" stop-color="#5182E4" />\n                                <stop offset="0.85" stop-color="#73A1FF" />\n                                <stop offset="1" stop-color="#5182E4" />\n                            </radialGradient>\n                        </defs>\n                        <g class="animateWrap" style="opacity:0;">\n                            <circle cx="1" cy="1" r="1" fill="url(#gradient)" />\n                        </g>\n                        '
                        }
                    }, r = a[i];
                void 0 === r && (r = a.circle);
                var o = r();
                return n.replace(/\[template\]/, o)
            }, transclude: !0, link: function (e, t, i) {
                function n() {
                    r = function (e, t) {
                        var i = new TimelineMax, n = e.offsetX, r = e.offsetY, o = e.target.offsetWidth,
                            s = e.target.offsetHeight, l = Math.abs(o / 2 - n), c = Math.abs(s / 2 - r), d = o / 2 + l,
                            u = s / 2 + c, p = Math.sqrt(Math.pow(d, 2) + Math.pow(u, 2));
                        return i.fromTo(a, t, {
                            x: n,
                            y: r,
                            transformOrigin: "50% 50%",
                            scale: 0,
                            opacity: 1,
                            ease: Linear.easeIn
                        }, {scale: p, opacity: 0}), i
                    }
                }

                t.css("position", "relative");
                var a = t.find(".animateWrap"), r = void 0;
                e.rippleAnimation = function (e) {
                    r && r(e, .75)
                };
                bdp.loadjs({callback: n, src: "//m1.bdp.cn/static/js/lib/TweenMax.min_1d4514e.js"})
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = function () {
        function e(e, t, i, n, a) {
            this.$http = e, this.$q = t, this.commonHttp = i, this.ngDialog = n, this.$translate = a, this.cacheObj = {argList: []}, this.argInfoMap = {}, this.listState = "ready", this.dataTypeMap = {
                number: 1,
                string: 2,
                date: 3
            }, this.formatParams = function (e, t) {
                var i = angular.copy(e);
                return i.forEach(function (e) {
                    "edit" != t || e.is_current || (e.disable = !0), ("edit" != t && e.display || "edit" == t) && (e.show = !0), "number" == e.type && (e.value = Number(e.value), e.default_value = Number(e.default_value)), "number" == e.type && "percent" == e.config.number_type && (e.value = e.value.mul(100), e.originValue = e.value.mul(100), e.defaultValDisplay = e.default_value = e.default_value.mul(100) + "%", e.config.minDisplay = e.config.min = e.config.range[0] || 0 == e.config.range[0] ? Number(e.config.range[0]).mul(100) + "%" : "不限", e.config.maxDisplay = e.config.range[1] || 0 == e.config.range[1] ? Number(e.config.range[1]).mul(100) + "%" : "不限"), ("date" == e.type || "number" == e.type && "percent" != e.config.number_type) && (e.config.minDisplay = e.config.min = e.config.range[0] || 0 == e.config.range[0] ? e.config.range[0] : "不限", e.config.maxDisplay = e.config.max = e.config.range[1] || 0 == e.config.range[1] ? e.config.range[1] : "不限", e.defaultValDisplay = e.default_value, e.originValue = e.value), "date" == e.type && "date" == e.config.date_type && (e.defaultValDisplay = e.default_value.replace(/.{8}$/, ""), e.config.minDisplay = e.config.minDisplay.replace(/.{8}$/, ""), e.config.maxDisplay = e.config.maxDisplay.replace(/.{8}$/, "")), "string" == e.type && (e.defaultValDisplay = e.default_value)
                }), angular.copy(i)
            }
        }

        return e.prototype.list = function (e) {
            var t = this;
            return this.listState = "loading", this.commonHttp.post("/api/param/list", {
                tb_id: e.tableId,
                ct_id: e.chartId
            }).then(function (e) {
                return t.listState = "ready", 0 == e.status && (t.cacheObj.argList = t.formatParams(t.generateIconType(e.result.param_list || []), "edit")), t.cacheObj.argList
            })
        }, e.prototype.del = function (e, t) {
            var i = this;
            this.ngDialog.openConfirm({
                template: "/static/partials/dialogTemplates/confirm-dialog.html",
                className: "ngdialog-theme-default ngDialog-width-300",
                data: {title: this.$translate.instant("tips"), message: this.$translate.instant("param.deleteParamTip")}
            }).then(function () {
                i.commonHttp.post("/api/param/delete", {tb_id: e.tableId, param_id: e.paramId}).then(function (e) {
                    0 == e.status && i.cacheObj.argList.splice(t, 1)
                })
            })
        }, e.prototype.info = function (e) {
            var t = this.$q.defer();
            return this.commonHttp.get("/api/param/info", e).then(function (e) {
                0 == e.status ? t.resolve(e.result) : t.reject("error")
            }), t.promise
        }, e.prototype.save = function (e, t) {
            var i = this.$q.defer(), n = "modify" == t ? "/api/param/modify" : "/api/param/create";
            return this.commonHttp.post(n, e).then(function (e) {
                0 == e.status ? i.resolve("success") : i.reject("error")
            }), i.promise
        }, e.prototype.getParamInfo = function (e) {
            var t = this;
            return this.commonHttp.post("/api/param/info", {param_id: e}).then(function (i) {
                0 == i.status && (t.argInfoMap[e] = i.result.config.range || [])
            })
        }, e.prototype.generateIconType = function (e) {
            var t = this;
            return void 0 === e && (e = []), e.forEach(function (e, i) {
                e.ico_type = t.dataTypeMap[e.type]
            }), e
        }, e
    }();
    t.chartArgsService = n
}, function (e, t, i) {
    "use strict";
    var n = i(37), a = i(191);
    i(198), i(200), i(202), i(203), i(182), i(205), i(207), i(209), i(211), i(212), i(213), i(215), i(217), i(219), i(221), i(223), i(225), i(227), i(229), i(231), i(238), i(240), angular.module("BC.common", ["ngDragDrop", "BC.chartWarning", "BC.enumOrder", "BC.advanceSort", "BC.markPoint", "BC.chartArgsUse", "BC.setDateValue", "BC.createField", "BC.chartInfoSummary"]), i(183), i(184), i(185), i(241), i(186), i(242), i(243), i(244), i(187), i(250), i(161), i(252), i(253), i(255), i(256), i(188), i(161), i(257), i(259), i(260), i(261), i(263), i(264), (0, n.extendNgModule)({
        name: "BC.common",
        directive: {BrowserCheckComponent: a.BrowserCheckComponent}
    })
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.BrowserCheckComponent = void 0;
    var a, r, o = i(64), s = n(o), l = i(65), c = n(l), d = i(13), u = n(d), p = i(17), f = n(p), h = i(37);
    i(194);
    var g = t.BrowserCheckComponent = (a = (0, h.ngComponent)(function () {
        "ngInject";
        return {
            scope: {},
            controller: g,
            controllerAs: "browserCheckCtrl",
            restrict: "E",
            replace: !0,
            transclude: !0,
            templateUrl: i(196),
            link: function (e, t, i, n) {
                var a = false, r = !1;
                a && (a = JSON.parse(a), r = !!a.HIDE_BROWSER_CHECK), e.browserCheckCtrl.ngOnInit({options: {disabled: r}})
            }
        }
    }))(r = function () {
        function e(t, i, n, a) {
            "ngInject";
            (0, u.default)(this, e), this.viewData = {}, this.$rootScope = t, this.$scope = i, this.$timeout = n, this.ngDialog = a
        }

        return e.$inject = ["$rootScope", "$scope", "$timeout", "ngDialog"], (0, f.default)(e, [{
            key: "ngOnInit",
            value: function () {
                function e() {
                    return t.apply(this, arguments)
                }

                var t = (0, c.default)(s.default.mark(function e() {
                    var t, i, n, a, r, o = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                        l = o.options, c = void 0 === l ? {} : l;
                    return s.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                if (this.viewData = {
                                    showCheckTip: !1,
                                    ua: navigator.userAgent,
                                    vendor: navigator.vendor,
                                    disabled: c.disabled
                                }, !this.viewData.disabled) {
                                    e.next = 3;
                                    break
                                }
                                return e.abrupt("return");
                            case 3:
                                if (t = navigator.userAgent, i = navigator.vendor, n = t.match(/(Android)\s+([\d.]+)/), a = t.match(/(iPad).*OS\s([\d_]+)/), r = !a && t.match(/(iPhone\sOS)\s([\d_]+)/), !(n || a || r)) {
                                    e.next = 10;
                                    break
                                }
                                return e.abrupt("return", !1);
                            case 10:
                                t.indexOf("Chrome") >= 0 && !this.checkBrowserFunc("chrome") && (this.viewData.showCheckTip = !0), t.indexOf("Firefox") >= 0 && !this.checkBrowserFunc("firefox") && (this.viewData.showCheckTip = !0), i.indexOf("Apple") >= 0 && t.indexOf("Chrome") < 0 && !this.checkBrowserFunc("safari") && (this.viewData.showCheckTip = !0);
                            case 13:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "checkBrowserFunc", value: function (e) {
                var t = this.viewData.ua.toString().toLocaleLowerCase(), i = {
                    chrome: function () {
                        var e = t.match(/chrome\/(\d*)\./);
                        return !e || !!e && !!e.length && e[1] >= 49
                    }, firefox: function () {
                        var e = t.match(/firefox\/(\d*)\./);
                        return !e || !!e && !!e.length && e[1] >= 41
                    }, safari: function () {
                        var e = t.match(/version\/(\d*)\./);
                        return !e || !!e && !!e.length && e[1] >= 10
                    }
                };
                return !i.hasOwnProperty(e) || i[e]()
            }
        }, {
            key: "closeTip", value: function () {
                this.viewData.showCheckTip = !1
            }
        }, {
            key: "openRecommendDialog", value: function () {
                this.ngDialog.open({
                    template: i(197),
                    className: "ngdialog-theme-default ngdialog-width-712 browser-recommend-dialog",
                    showClose: !1,
                    scope: !0
                })
            }
        }]), e
    }()) || r
}, function (e, t, i) {
    var n = function () {
            return this
        }() || Function("return this")(),
        a = n.regeneratorRuntime && Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime") >= 0,
        r = a && n.regeneratorRuntime;
    if (n.regeneratorRuntime = void 0, e.exports = i(193), a) n.regeneratorRuntime = r; else try {
        delete n.regeneratorRuntime
    } catch (e) {
        n.regeneratorRuntime = void 0
    }
}, function (e, t) {
    !function (t) {
        "use strict";

        function i(e, t, i, n) {
            var r = t && t.prototype instanceof a ? t : a, o = Object.create(r.prototype), s = new f(n || []);
            return o._invoke = c(e, i, s), o
        }

        function n(e, t, i) {
            try {
                return {type: "normal", arg: e.call(t, i)}
            } catch (e) {
                return {type: "throw", arg: e}
            }
        }

        function a() {
        }

        function r() {
        }

        function o() {
        }

        function s(e) {
            ["next", "throw", "return"].forEach(function (t) {
                e[t] = function (e) {
                    return this._invoke(t, e)
                }
            })
        }

        function l(e) {
            function t(i, a, r, o) {
                var s = n(e[i], e, a);
                if ("throw" !== s.type) {
                    var l = s.arg, c = l.value;
                    return c && "object" == typeof c && y.call(c, "__await") ? Promise.resolve(c.__await).then(function (e) {
                        t("next", e, r, o)
                    }, function (e) {
                        t("throw", e, r, o)
                    }) : Promise.resolve(c).then(function (e) {
                        l.value = e, r(l)
                    }, o)
                }
                o(s.arg)
            }

            function i(e, i) {
                function n() {
                    return new Promise(function (n, a) {
                        t(e, i, n, a)
                    })
                }

                return a = a ? a.then(n, n) : n()
            }

            var a;
            this._invoke = i
        }

        function c(e, t, i) {
            var a = S;
            return function (r, o) {
                if (a === D) throw new Error("Generator is already running");
                if (a === L) {
                    if ("throw" === r) throw o;
                    return g()
                }
                for (i.method = r, i.arg = o; ;) {
                    var s = i.delegate;
                    if (s) {
                        var l = d(s, i);
                        if (l) {
                            if (l === A) continue;
                            return l
                        }
                    }
                    if ("next" === i.method) i.sent = i._sent = i.arg; else if ("throw" === i.method) {
                        if (a === S) throw a = L, i.arg;
                        i.dispatchException(i.arg)
                    } else "return" === i.method && i.abrupt("return", i.arg);
                    a = D;
                    var c = n(e, t, i);
                    if ("normal" === c.type) {
                        if (a = i.done ? L : T, c.arg === A) continue;
                        return {value: c.arg, done: i.done}
                    }
                    "throw" === c.type && (a = L, i.method = "throw", i.arg = c.arg)
                }
            }
        }

        function d(e, t) {
            var i = e.iterator[t.method];
            if (i === m) {
                if (t.delegate = null, "throw" === t.method) {
                    if (e.iterator.return && (t.method = "return", t.arg = m, d(e, t), "throw" === t.method)) return A;
                    t.method = "throw", t.arg = new TypeError("The iterator does not provide a 'throw' method")
                }
                return A
            }
            var a = n(i, e.iterator, t.arg);
            if ("throw" === a.type) return t.method = "throw", t.arg = a.arg, t.delegate = null, A;
            var r = a.arg;
            return r ? r.done ? (t[e.resultName] = r.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = m), t.delegate = null, A) : r : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, A)
        }

        function u(e) {
            var t = {tryLoc: e[0]};
            1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t)
        }

        function p(e) {
            var t = e.completion || {};
            t.type = "normal", delete t.arg, e.completion = t
        }

        function f(e) {
            this.tryEntries = [{tryLoc: "root"}], e.forEach(u, this), this.reset(!0)
        }

        function h(e) {
            if (e) {
                var t = e[_];
                if (t) return t.call(e);
                if ("function" == typeof e.next) return e;
                if (!isNaN(e.length)) {
                    var i = -1, n = function t() {
                        for (; ++i < e.length;) if (y.call(e, i)) return t.value = e[i], t.done = !1, t;
                        return t.value = m, t.done = !0, t
                    };
                    return n.next = n
                }
            }
            return {next: g}
        }

        function g() {
            return {value: m, done: !0}
        }

        var m, v = Object.prototype, y = v.hasOwnProperty, b = "function" == typeof Symbol ? Symbol : {},
            _ = b.iterator || "@@iterator", w = b.asyncIterator || "@@asyncIterator",
            x = b.toStringTag || "@@toStringTag", C = "object" == typeof e, k = t.regeneratorRuntime;
        if (k) return void(C && (e.exports = k));
        k = t.regeneratorRuntime = C ? e.exports : {}, k.wrap = i;
        var S = "suspendedStart", T = "suspendedYield", D = "executing", L = "completed", A = {}, E = {};
        E[_] = function () {
            return this
        };
        var $ = Object.getPrototypeOf, I = $ && $($(h([])));
        I && I !== v && y.call(I, _) && (E = I);
        var F = o.prototype = a.prototype = Object.create(E);
        r.prototype = F.constructor = o, o.constructor = r, o[x] = r.displayName = "GeneratorFunction", k.isGeneratorFunction = function (e) {
            var t = "function" == typeof e && e.constructor;
            return !!t && (t === r || "GeneratorFunction" === (t.displayName || t.name))
        }, k.mark = function (e) {
            return Object.setPrototypeOf ? Object.setPrototypeOf(e, o) : (e.__proto__ = o, x in e || (e[x] = "GeneratorFunction")), e.prototype = Object.create(F), e
        }, k.awrap = function (e) {
            return {__await: e}
        }, s(l.prototype), l.prototype[w] = function () {
            return this
        }, k.AsyncIterator = l, k.async = function (e, t, n, a) {
            var r = new l(i(e, t, n, a));
            return k.isGeneratorFunction(t) ? r : r.next().then(function (e) {
                return e.done ? e.value : r.next()
            })
        }, s(F), F[x] = "Generator", F[_] = function () {
            return this
        }, F.toString = function () {
            return "[object Generator]"
        }, k.keys = function (e) {
            var t = [];
            for (var i in e) t.push(i);
            return t.reverse(), function i() {
                for (; t.length;) {
                    var n = t.pop();
                    if (n in e) return i.value = n, i.done = !1, i
                }
                return i.done = !0, i
            }
        }, k.values = h, f.prototype = {
            constructor: f, reset: function (e) {
                if (this.prev = 0, this.next = 0, this.sent = this._sent = m, this.done = !1, this.delegate = null, this.method = "next", this.arg = m, this.tryEntries.forEach(p), !e) for (var t in this) "t" === t.charAt(0) && y.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = m)
            }, stop: function () {
                this.done = !0;
                var e = this.tryEntries[0], t = e.completion;
                if ("throw" === t.type) throw t.arg;
                return this.rval
            }, dispatchException: function (e) {
                function t(t, n) {
                    return r.type = "throw", r.arg = e, i.next = t, n && (i.method = "next", i.arg = m), !!n
                }

                if (this.done) throw e;
                for (var i = this, n = this.tryEntries.length - 1; n >= 0; --n) {
                    var a = this.tryEntries[n], r = a.completion;
                    if ("root" === a.tryLoc) return t("end");
                    if (a.tryLoc <= this.prev) {
                        var o = y.call(a, "catchLoc"), s = y.call(a, "finallyLoc");
                        if (o && s) {
                            if (this.prev < a.catchLoc) return t(a.catchLoc, !0);
                            if (this.prev < a.finallyLoc) return t(a.finallyLoc)
                        } else if (o) {
                            if (this.prev < a.catchLoc) return t(a.catchLoc, !0)
                        } else {
                            if (!s) throw new Error("try statement without catch or finally");
                            if (this.prev < a.finallyLoc) return t(a.finallyLoc)
                        }
                    }
                }
            }, abrupt: function (e, t) {
                for (var i = this.tryEntries.length - 1; i >= 0; --i) {
                    var n = this.tryEntries[i];
                    if (n.tryLoc <= this.prev && y.call(n, "finallyLoc") && this.prev < n.finallyLoc) {
                        var a = n;
                        break
                    }
                }
                a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null)
                ;var r = a ? a.completion : {};
                return r.type = e, r.arg = t, a ? (this.method = "next", this.next = a.finallyLoc, A) : this.complete(r)
            }, complete: function (e, t) {
                if ("throw" === e.type) throw e.arg;
                return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), A
            }, finish: function (e) {
                for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                    var i = this.tryEntries[t];
                    if (i.finallyLoc === e) return this.complete(i.completion, i.afterLoc), p(i), A
                }
            }, catch: function (e) {
                for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                    var i = this.tryEntries[t];
                    if (i.tryLoc === e) {
                        var n = i.completion;
                        if ("throw" === n.type) {
                            var a = n.arg;
                            p(i)
                        }
                        return a
                    }
                }
                throw new Error("illegal catch attempt")
            }, delegateYield: function (e, t, i) {
                return this.delegate = {
                    iterator: h(e),
                    resultName: t,
                    nextLoc: i
                }, "next" === this.method && (this.arg = m), A
            }
        }
    }(function () {
        return this
    }() || Function("return this")())
}, function (e, t, i) {
    i(195).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "browser-check.component_efe14bb0.css"
}, function (e, t) {
    e.exports = "/dist/static/common/browser-check/browser-check.component.html"
}, function (e, t) {
    e.exports = "/dist/static/common/browser-check/browser-recommend-dialog.html"
}, function (e, t, i) {
    e.exports = "angular-dragdrop", i(199)
}, function (e, t) {
    !function (e, t, i, n) {
        "use strict";
        var a = t.module("ngDragDrop", []).service("ngDragDropService", ["$timeout", "$parse", function (n, r) {
            this.draggableScope = null, this.droppableScope = null, this.callEventCallback = function (e, t, n, a) {
                if (t) {
                    var o = function (t) {
                        var n = t.indexOf("(") !== -1 ? t.indexOf("(") : t.length,
                            a = t.lastIndexOf(")") !== -1 ? t.lastIndexOf(")") : t.length, o = t.substring(n + 1, a),
                            s = t.match(/^[^.]+.\s*/)[0].slice(0, -1);
                        return s = e[s] && "function" == typeof e[s].constructor ? s : null, {
                            callback: t.substring(s && s.length + 1 || 0, n),
                            args: i.map(o && o.split(",") || [], function (t) {
                                return [r(t)(e)]
                            }),
                            constructor: s
                        }
                    }(t), s = o.callback, l = o.constructor, c = [n, a].concat(o.args);
                    return (e[s] || e[l][s]).apply(e, c)
                }
            }, this.invokeDrop = function (e, i, r, o) {
                var s, l, c = "", d = "", u = {}, p = {}, f = null, h = {}, g = {}, m = null, v = this.droppableScope,
                    y = this.draggableScope;
                c = e.ngattr("ng-model"), d = i.ngattr("ng-model"), s = y.$eval(c), l = v.$eval(d), m = i.find("[jqyoui-draggable]:last,[data-jqyoui-draggable]:last"), p = v.$eval(i.attr("jqyoui-droppable") || i.attr("data-jqyoui-droppable")) || [], u = y.$eval(e.attr("jqyoui-draggable") || e.attr("data-jqyoui-draggable")) || [], u.index = this.fixIndex(y, u, s), p.index = this.fixIndex(v, p, l), f = t.isArray(s) ? u.index : null, h = t.isArray(s) ? s[f] : s, u.deepCopy && (h = t.copy(h)), g = t.isArray(l) && p && void 0 !== p.index ? l[p.index] : t.isArray(l) ? {} : l, p.deepCopy && (g = t.copy(g)), u.animate === !0 ? (this.move(e, m.length > 0 ? m : i, null, "fast", p, null), this.move(m.length > 0 && !p.multiple ? m : [], e.parent("[jqyoui-droppable],[data-jqyoui-droppable]"), a.startXY, "fast", p, t.bind(this, function () {
                    n(t.bind(this, function () {
                        e.css({position: "relative", left: "", top: ""}), m.css({
                            position: "relative",
                            left: "",
                            top: "",
                            display: "none" === m.css("display") ? "" : m.css("display")
                        }), this.mutateDraggable(y, p, u, c, d, g, e), this.mutateDroppable(v, p, u, d, h, f), this.callEventCallback(v, p.onDrop, r, o)
                    }))
                }))) : n(t.bind(this, function () {
                    this.mutateDraggable(y, p, u, c, d, g, e), this.mutateDroppable(v, p, u, d, h, f), this.callEventCallback(v, p.onDrop, r, o)
                }))
            }, this.move = function (t, i, n, a, r, o) {
                if (0 === t.length) return o && e.setTimeout(function () {
                    o()
                }, 300), !1;
                var s = t.css("z-index"), l = t[r.containment || "offset"](), c = i.css("display"),
                    d = i.hasClass("ng-hide");
                null === n && i.length > 0 && (void 0 !== (i.attr("jqyoui-draggable") || i.attr("data-jqyoui-draggable")) && void 0 !== i.ngattr("ng-model") && i.is(":visible") && r && r.multiple ? (n = i[r.containment || "offset"](), r.stack === !1 ? n.left += i.outerWidth(!0) : n.top += i.outerHeight(!0)) : (d && i.removeClass("ng-hide"), n = i.css({
                    visibility: "hidden",
                    display: "block"
                })[r.containment || "offset"](), i.css({visibility: "", display: c}))), t.css({
                    position: "absolute",
                    "z-index": 9999
                }).css(l).animate(n, a, function () {
                    d && i.addClass("ng-hide"), t.css("z-index", s), o && o()
                })
            }, this.mutateDroppable = function (e, i, n, a, o, s) {
                var l = e.$eval(a);
                e.dndDragItem = o, t.isArray(l) ? (i && i.index >= 0 ? l[i.index] = o : l.push(o), n && n.placeholder === !0 && (l[l.length - 1].jqyoui_pos = s)) : (r(a + " = dndDragItem")(e), n && n.placeholder === !0 && (l.jqyoui_pos = s))
            }, this.mutateDraggable = function (e, i, n, a, o, s, l) {
                var c = t.equals(s, {}) || !s, d = e.$eval(a);
                e.dndDropItem = s, n && n.placeholder ? "keep" != n.placeholder && (t.isArray(d) && void 0 !== n.index ? d[n.index] = s : r(a + " = dndDropItem")(e)) : t.isArray(d) ? c ? n && n.placeholder !== !0 && "keep" !== n.placeholder && d.splice(n.index, 1) : d[n.index] = s : (r(a + " = dndDropItem")(e), e.$parent && r(a + " = dndDropItem")(e.$parent)), l.css({
                    "z-index": "",
                    left: "",
                    top: ""
                })
            }, this.fixIndex = function (e, i, n) {
                if (i.applyFilter && t.isArray(n) && n.length > 0) {
                    var a = e[i.applyFilter](), r = a[i.index], o = void 0;
                    return n.forEach(function (e, i) {
                        t.equals(e, r) && (o = i)
                    }), o
                }
                return i.index
            }
        }]).directive("jqyouiDraggable", ["ngDragDropService", function (e) {
            return {
                require: "?jqyouiDroppable", restrict: "A", link: function (i, n, r) {
                    var o, s, l, c = function (c, d) {
                        c ? (o = i.$eval(n.attr("jqyoui-draggable") || n.attr("data-jqyoui-draggable")) || {}, s = i.$eval(r.jqyouiOptions) || {}, n.draggable({disabled: !1}).draggable(s).draggable({
                            start: function (n, r) {
                                e.draggableScope = i, l = t.element(s.helper ? r.helper : this).css("z-index"), t.element(s.helper ? r.helper : this).css("z-index", 9999), a.startXY = t.element(this)[o.containment || "offset"](), e.callEventCallback(i, o.onStart, n, r)
                            }, stop: function (n, a) {
                                t.element(s.helper ? a.helper : this).css("z-index", l), e.callEventCallback(i, o.onStop, n, a)
                            }, drag: function (t, n) {
                                e.callEventCallback(i, o.onDrag, t, n)
                            }
                        })) : n.draggable({disabled: !0})
                    };
                    i.$watch(function () {
                        return i.$eval(r.drag)
                    }, c), c(), n.on("$destroy", function () {
                        n.draggable({disabled: !0}).draggable("destroy")
                    })
                }
            }
        }]).directive("jqyouiDroppable", ["ngDragDropService", "$q", function (e, i) {
            return {
                restrict: "A", priority: 1, link: function (n, a, r) {
                    var o, s = function (s, l) {
                        s ? (o = n.$eval(t.element(a).attr("jqyoui-droppable") || t.element(a).attr("data-jqyoui-droppable")) || {}, a.droppable({disabled: !1}).droppable(n.$eval(r.jqyouiOptions) || {}).droppable({
                            over: function (t, i) {
                                e.callEventCallback(n, o.onOver, t, i)
                            }, out: function (t, i) {
                                e.callEventCallback(n, o.onOut, t, i)
                            }, drop: function (a, s) {
                                var l = null;
                                l = o.beforeDrop ? e.callEventCallback(n, o.beforeDrop, a, s) : function () {
                                    var e = i.defer();
                                    return e.resolve(), e.promise
                                }(), l.then(t.bind(this, function () {
                                    t.element(s.draggable).ngattr("ng-model") && r.ngModel ? (e.droppableScope = n, e.invokeDrop(t.element(s.draggable), t.element(this), a, s)) : e.callEventCallback(n, o.onDrop, a, s)
                                }), function () {
                                    s.draggable.css({left: "", top: ""})
                                })
                            }
                        })) : a.droppable({disabled: !0})
                    };
                    n.$watch(function () {
                        return n.$eval(r.drop)
                    }, s), s(), a.on("$destroy", function () {
                        a.droppable({disabled: !0}).droppable("destroy")
                    })
                }
            }
        }]);
        t.element.prototype.ngattr = function (e, i) {
            var n = t.element(this).get(0);
            return n.getAttribute(e) || n.getAttribute("data-" + e)
        }
    }(window, window.angular, window.jQuery)
}, function (e, t, i) {
    i(201).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "common-core_be8e80ec.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.enumOrder", []).controller("enumOrderCtrl", ["$scope", "commonService", "errHint", "alphaOrderType", "$rootScope", function (e, t, i, n, a) {
            function r(e) {
                return "source" === e ? "template" : "filter_template"
            }

            function o(t, i, n) {
                var a;
                "x" === t && (a = i[t][m], i.sort = {
                    type: "custom",
                    fid: n,
                    axis: "x",
                    uniq_id: a.uniq_id
                }), i.is_advanced_sort = 0, i.compare_axis && "compare_axis" === t && (a = i[t][m], i.compare_axis.forEach(function (e) {
                    e.fid === n && (e.compare_sort ? e.compare_sort.type = "custom" : e.compare_sort = {
                        type: "custom",
                        fid: n,
                        axis: "compare_axis",
                        uniq_id: a.uniq_id
                    })
                })), e.onSaveEnumOrder(n)
            }

            function s() {
                var t;
                return e.ngDialogData.items.forEach(function (i) {
                    i.uniq_id === e.ngDialogData.uniqId && (t = i)
                }), t
            }

            function l() {
                var t = r(v);
                return {range: e.viewData[t].range, total: e.viewData[t].total}
            }

            function c(e) {
                var t = angular.extend({}, e);
                return 2 == e.type && (t.type = "ascending" == e.alpha_order_type ? 2 : 3, delete t.alpha_order_type), t
            }

            function d(e) {
                var t = angular.extend({}, e);
                return t.alpha_order_type = 3 == e.type ? "descending" : "ascending", t.type = 3 == e.type ? 2 : e.type, t
            }

            function u(t) {
                e.originOrder = t, g && (t.type = 4), e.viewData = d(t), e.viewData.displayTemplate = l()
            }

            var p = e.ngDialogData.fid, f = (e.ngDialogData.uniq_id, e.ngDialogData.tb_id), h = e.ngDialogData.ct_id,
                g = e.ngDialogData.isCustomOrder, m = e.ngDialogData.fieldIndex || 0, v = e.ngDialogData.source,
                y = e.ngDialogData.orderModule, b = e.ngDialogData.drillLevel, _ = e.ngDialogData.meta,
                w = _.chart_type, x = m;
            "C200" === w && "compare_axis" === v && _.compare_axis.forEach(function (e, t) {
                "virtual" === e.data_type && t < m && x--
            });
            var C = {template: null, filter_template: null};
            e.alpha_order_types = n, e.sortEnumField = {
                start: function () {
                }, stop: function () {
                    var t = e.viewData, i = r(v);
                    C[i] = t.displayTemplate.range
                }
            }, e.incOnePos = function (t) {
                var i = e.viewData.template;
                if (t > 0) {
                    var n = i[t];
                    i[t] = i[t - 1], i[t - 1] = n
                }
            }, e.descOnePos = function (t) {
                var i = e.viewData.template;
                if (t < i.length - 1) {
                    var n = i[t];
                    i[t] = i[t + 1], i[t + 1] = n
                }
            }, e.save = function (n, r) {
                var l = c(e.viewData);
                if ("source" !== v) {
                    if ("advanced_sort" === y) {
                        s().sort_items.filter_sort_list = l.displayTemplate.range, e.closeThisDialog()
                    } else {
                        _[v][m].filter_sort_list = l.displayTemplate.range;
                        var d = _[r][m];
                        a.setOperateRecord("chart.op.sort.custom", [d.name]), o(r, _, n)
                    }
                    return !1
                }
                var u = {config_list: []},
                    p = {tb_id: f, fid: n, type: l.type, query_for_ct: 1, template: l.displayTemplate.range};
                4 != l.type && delete p.template, u.config_list.push(p), u.config_list = angular.toJson(u.config_list), t.enumField.updateOrder(u).then(function (t) {
                    var a = t;
                    0 == a.status ? (o(r, _, n), e.closeThisDialog()) : i(a.errstr, {dialog: !0})
                })
            }, function (i, n, a, r, o) {
                if ("source" !== v && "advanced_sort" === y) {
                    var l = s();
                    if (l.sort_items.filter_sort_list && l.sort_items.filter_sort_list.length > 0) {
                        var c = angular.copy(l.sort_items.filter_sort_list);
                        return u({filter_template: {range: c, total: c.length}}), void(e.loading = !1)
                    }
                }
                e.loading = !0;
                var d = "source" === v ? "getOrderInfo" : "getFilteredOrderInfo",
                    p = {tb_id: i, fid: n, ct_id: "source" !== v ? h : "", query_for_ct: 1};
                "source" !== v && (p.index = x || 0, p.drill_level = o || 0, p.axis = v), t.enumField[d](p).then(function (t) {
                    e.loading = !1, t && u(t)
                }, function () {
                    e.loading = !1
                })
            }(f, p, 0, 0, b)
        }])
    }()
}, function (e, t, i) {
    i(204).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "enum_order_32a1e895.css"
}, function (e, t, i) {
    i(206).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "markpoint_3c16d0fd.css"
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.advanceSort", []).directive("advanceSort", ["$rootScope", "ngDialog", "setAdvanceAggregatorName", "$jsTipTranslate", "$timeout", "$translate", "commonService", "formula", "errHint", function (e, t, n, r, o, s, l, c, d) {
        return {
            scope: {
                chartOptions: "=",
                chartMeta: "=",
                drillLevel: "=",
                bdpChartObj: "=",
                chartMode: "@",
                saveChartFun: "&"
            },
            restrict: "EA",
            templateUrl: "/static/chart-edit/advance-sort/advance-sort.html",
            transclude: !0,
            link: function (u, p, f, h) {
                function g(e) {
                    var t = [];
                    return e.map(function (e) {
                        if ("y" === e.axis) {
                            var i = angular.copy(e);
                            i.sort_item_type = 1, t.push(i)
                        }
                    }), t
                }

                function m(e, t) {
                    return 0 == e ? "date" === t ? u.tips.date : u.tips.letter : 2 == e ? u.tips.custom : 3 == e ? u.tips.percentage : void 0
                }

                u.setAdvanceAggregatorName = n, u.$on("chart_data_load", function (e, t) {
                    u.advanceSortData.isGraftTb = "graft" == t.info.tb_type, u.canSetAdvancedSort()
                });
                var v = {
                    show: function (e, n, a) {
                        var r = e.tips.rowSummary, o = "zh" == bdpChart.language ? "行总计" : "Row Total",
                            s = e.tips["chart.totalOfMeasures"], l = i(208), c = "edit" == a.chartMode, a = a, d = [],
                            u = a.x, p = a.y, f = a.compare_axis, h = a.y_optional || [], g = a.chart_type, m = this;
                        v.getTbInfo(a).then(function () {
                            if (d = d.concat(v.preHandleData(u, "x", e)), d = d.concat(v.preHandleData(f, "compare_axis", e)), d = d.concat(v.preHandleData(p, "y", e)), d = d.concat(v.preHandleData(h, "y_optional", e)), !c) {
                                var i = [];
                                if (p.forEach(function (e) {
                                    if (e.row_setting && !$.isEmptyObject(e.row_setting)) {
                                        var t = angular.copy(e.row_setting);
                                        t.name += "(" + o + ")", i.push(t)
                                    }
                                }), d = d.concat(v.preHandleData(i, "y", e)), a.tb_statistic && angular.isObject(a.tb_statistic.row_setting) && a.tb_statistic.row) {
                                    var y = a.tb_statistic.row_setting;
                                    y.name = y.nick_name || r, y.axis = "y", y.type = "asc", d.push(y)
                                }
                            }
                            ["C200", "C250", "C310"].indexOf(g) < 0 && a.x.length && "date" !== a.x[0].data_type && a.y.length >= 2 && d.push({
                                name: s,
                                data_type: "number",
                                axis: "y",
                                type: "asc",
                                fid: "sum",
                                uniq_id: "uniqIdForSum"
                            }), v.initScopeFuns(e, d, n, a, c), m.dia = t.open({
                                template: l,
                                className: "ngdialog-theme-default table-adv-wrap",
                                scope: e
                            })
                        })
                    }, initScopeFuns: function (i, n, a, r, l) {
                        function u() {
                            for (var e = !0, t = {}, n = 0, a = i.sortRuleInfo.length; n < a; n++) if ((t = i.sortRuleInfo[n].sort_items) && 4 == t.sort_item_type) {
                                if (!t.aggregator_sort.fid) {
                                    d(s.instant("a0dad2c3")), e = !1;
                                    break
                                }
                                if (!t.aggregator_sort.aggregator) {
                                    d(s.instant("59aedb6d")), e = !1;
                                    break
                                }
                            }
                            return e
                        }

                        var p = this, f = i.bdpChartObj, h = r.advanced_sort = r.advanced_sort || [];
                        i.formulaList = _.slice(c, 0, 4), v.initData(i, h, n, r, l), i.addAdvSortField = function (e) {
                            var t = angular.copy(i.fieldListInfo.splice(e, 1)[0]);
                            i.sortRuleInfo.push(t)
                        }, i.addAllAdvSortFields = function () {
                            i.fieldListInfo = [], n.forEach(function (e) {
                                var t = !1;
                                i.sortRuleInfo.forEach(function (i) {
                                    i.uniq_id === e.uniq_id && (t = !0)
                                }), t || i.sortRuleInfo.push(angular.copy(e))
                            })
                        }, i.clearAllRuleFields = function () {
                            i.fieldListInfo = angular.copy(n), i.sortRuleInfo = []
                        }, i.deleteRuleField = function (e) {
                            var t = i.sortRuleInfo.splice(e, 1);
                            i.fieldListInfo.push(t[0])
                        }, i.tableAdvSortOk = function () {
                            u() && (l ? (r.advanced_sort.length ? i.sortRuleInfo.length ? e.setOperateRecord("chart.op.advSort.edit") : e.setOperateRecord("chart.op.advSort.remove") : i.sortRuleInfo.length && e.setOperateRecord("chart.op.advSort.add"), r.advanced_sort = angular.copy(i.sortRuleInfo), r.is_advanced_sort = 0 == r.advanced_sort.length ? 0 : 1, a({
                                closeDialog: !0,
                                is_advanced_sort: r.advanced_sort.length > 0 ? 1 : 0
                            })) : (i.chartOptions.optional.advanced_sort = angular.toJson(i.sortRuleInfo), i.chartOptions.optional.is_advanced_sort = i.sortRuleInfo.length > 0 ? 1 : 0, p.dia.close()))
                        }, i.cancelsetAdvSort = function () {
                            i.clearAllRuleFields(), p.dia.close()
                        }, i.sortRuleFields = {
                            items: ".J-sortable-adv-sort", start: function () {
                            }, update: function (e, t) {
                            }, stop: function (e, t) {
                                var n = t.item.sortable.index, a = t.item.sortable.dropindex, r = i.sortRuleInfo[a],
                                    o = i.sortRuleInfo[n];
                                i.sortRuleInfo[n] = o, i.sortRuleInfo[a] = r
                            }
                        }, i.showDropdown = function (e, t) {
                            t.showDropdown = !t.showDropdown;
                            var n = e.currentTarget.getBoundingClientRect(), a = n.bottom, r = n.left;
                            i.sortItemDropdownStyle = {top: a, left: r}
                        }, i.changeSortItem = function (e, t, i) {
                            var n = e.sort_items;
                            n.sort_item_type = t, 0 == t || 3 == t ? (e.type = "asc", n.selectedName = m(t, e.data_type), delete n.filter_sort_list, delete n.aggregator_sort) : 1 == t ? (e.type = "asc", e.parent_uniq_id = i.parent_uniq_id, n.selectedName = i.name, n.aggregator_sort = {
                                uniq_id: i.uniq_id,
                                parent_uniq_id: i.parent_uniq_id
                            }, delete n.filter_sort_list) : 2 == t ? (e.type = "custom", n.selectedName = m(t), n.filter_sort_list = [], delete n.aggregator_sort) : 4 == t && (e.type = "asc", n.selectedName = s.instant("9c4d5b9f"), n.aggregator_sort || (n.aggregator_sort = {}))
                        }, i.changeTbInfoSchema = function (e, t) {
                            var n = e.sort_items, a = _.find(i.tbInfo.schema, {fid: t});
                            n.aggregator_sort.schame_name = a.name, n.aggregator_sort.schame_data_type = a.data_type
                        }, i.changeTbInfoSchemaFormula = function (e, t) {
                            e.sort_items.aggregator_sort.formula_name = _.find(i.formulaList, {type: t}).name
                        }, i.showEnumOrderInAdv = function (e) {
                            var n, a, o = i.$parent, s = o.view;
                            "chart_edit" == s ? (n = o.tb_id, a = o.ct_id) : "dashboard" == s ? (n = r.tb_id, a = r.ct_id) : "custom_chart_edit" == s && (n = o.currentView.tb_id, a = o.currentView.ct_id), t.open({
                                template: "/static/chart-edit/enum-order/enum-order.html",
                                data: {
                                    fid: e.fid,
                                    tb_id: n,
                                    ct_id: a,
                                    isCustomOrder: !0,
                                    source: e.axis,
                                    fieldIndex: e.originIndex,
                                    drillLevel: i.drillLevel || 0,
                                    orderModule: "advanced_sort",
                                    uniqId: e.uniq_id,
                                    items: i.sortRuleInfo,
                                    meta: r
                                },
                                scope: i,
                                controller: "enumOrderCtrl",
                                className: "ngdialog-theme-default enum-order-dialog"
                            })
                        }, f && f.off("dashboard_click_sort").on("dashboard_click_sort", function () {
                            o(function () {
                                r.is_advanced_sort = 0
                            })
                        })
                    }, initData: function (e, t, i, n, a) {
                        var r = n.chart_type || n.type;
                        if (e.metricFields = g(i), "C200" !== r && n.x.length && "date" === n.x[0].data_type) for (var o = i.length - 1; o >= 0; o--) {
                            var l = i[o];
                            "y" === l.axis && i.splice(o, 1)
                        }
                        if (t.length < 1) e.sortRuleInfo = [], e.fieldListInfo = angular.copy(i) || []; else {
                            for (var c = [], o = 0, d = i.length; o < d; o++) {
                                for (var l = i[o], u = l.fid, p = l.uniq_id, f = !1, h = l.axis, v = 0, y = t.length; v < y; v++) {
                                    var b = t[v], _ = b.fid, w = b.uniq_id, x = b.axis, C = b.type;
                                    if (h == x && (p && w === p || !p && _ === u)) {
                                        f = !0, l.type = C, b.name = l.name, b.data_type = l.data_type, b.originIndex = l.originIndex, void 0 === b.sort_items && ("x" === x || "compare_axis" === x ? b.sort_items = {sort_item_type: 0} : "y" === x && (b.sort_items = {
                                            sort_item_type: 1,
                                            aggregator_sort: {uniq_id: b.uniq_id}
                                        }));
                                        break
                                    }
                                }
                                f || c.push(l)
                            }
                            e.fieldListInfo = angular.copy(c), e.sortRuleInfo = angular.copy(t), e.sortRuleInfo.map(function (t) {
                                if ("y" !== t.axis) {
                                    var i = t.sort_items.sort_item_type;
                                    if (0 == i) t.sort_items.selectedName = m(i, t.data_type); else if (1 == i) {
                                        var n = t.sort_items.aggregator_sort.uniq_id;
                                        "uniqIdForSum" === n ? t.sort_items.selectedName = e.tips["chart.totalOfMeasures"] : e.metricFields.forEach(function (e) {
                                            e.uniq_id === n && (t.sort_items.selectedName = e.name)
                                        })
                                    } else 2 == i ? t.sort_items.selectedName = m(i, t.data_type) : 4 == i && (t.sort_items.selectedName = s.instant("9c4d5b9f"))
                                }
                            })
                        }
                    }, preHandleData: function (e, t, i) {
                        var n = [], a = [];
                        if ($.isArray(e)) for (var r = 0, o = e.length; r < o; r++) {
                            var s = e[r],
                                l = "x" === t || "compare_axis" === t ? s.name : s.name + i.setAdvanceAggregatorName(s),
                                c = s.nick_name || l, d = {
                                    data_type: s.data_type,
                                    fid: s.fid,
                                    axis: "y_optional" == t ? "y" : t,
                                    name: c,
                                    originName: l,
                                    originIndex: r,
                                    parent_uniq_id: s.parent_uniq_id,
                                    type: "asc"
                                };
                            "compare_axis" === t && "virtual" === s.data_type || "date" === s.data_type && "C200" !== i.chartMeta.chart_type || ("x" === t || "compare_axis" === t ? d.sort_items = {
                                sort_item_type: 0,
                                selectedName: m(0, s.data_type)
                            } : "y" === t && (d.sort_items = {
                                sort_item_type: 1,
                                aggregator_sort: {uniq_id: s.uniq_id, parent_uniq_id: s.parent_uniq_id}
                            }), s.uniq_id ? (d.uniq_id = s.uniq_id, $.inArray(s.uniq_id, n) == -1 && (n.push(s.uniq_id), a.push(d))) : a.push(d))
                        }
                        return a
                    }, getTbInfo: function (e) {
                        var t, i = u.$parent, n = i.view;
                        "chart_edit" == n ? t = i.tb_id : "dashboard" == n ? t = e.tb_id : "custom_chart_edit" == n && (t = i.currentView.tb_id);
                        var a = {tb_id: t, query_for_ct: 1, need_param: 1};
                        return l.field.getList(a).then(function (e) {
                            "0" == e.status && (u.tbInfo = e.result)
                        })
                    }
                };
                u.showTableAdvSort = function (e) {
                    $.isEmptyObject(e.advanced_sort) && (e.advanced_sort = []), "edit" !== u.chartMode && (e.chart_type = e.chart_type || e.type), e.chartMode = u.chartMode, v.show(u, u.saveChartFun, e), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "adv_sort", ct_id: e.ct_id})
                    })
                }, u.canSetAdvancedSort = function () {
                    u.advanceSortData.canSetAdvancedSort = u.chartMeta && !u.advanceSortData.isGraftTb && bdpChart.helper.canSetAdvancedSort(u.chartMeta, u.chartMeta.chart_type || u.chartMeta.type)
                }, function () {
                    u.advanceSortData = {}
                }(), r(["date", "letter", "custom", "percentage", "rowSummary", "chart.totalOfMeasures"], u)
            }
        }
    }])
}, function (e, t) {
    e.exports = "/dist/static/chart-edit/advance-sort/advance-sort-config.html"
}, function (e, t, i) {
    i(210).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "table-adv-sort_175710d4.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r) {
            function o(t) {
                if (!e.warnConfigData.pageStatus.isPreview && "filter" == e.warnConfigData.pageStatus.subView) return !1;
                e.warnConfigData.pageStatus.isPreview = t ? "show" == t : !e.warnConfigData.pageStatus.isPreview, e.warnConfigData.pageStatus.isPreview ? angular.element(".J-chart-warning-dialog").addClass("preview-mode") : angular.element(".J-chart-warning-dialog").removeClass("preview-mode")
            }

            function s(t, i) {
                e.warnConfigData.editWarnInfo = null;
                var n = "";
                switch (t) {
                    case"list":
                        n = r.instant("warn.warningSetting");
                        break;
                    case"add":
                        n = r.instant("warn.addWarn");
                        break;
                    case"edit":
                        n = r.instant("warn.editWarn"), e.warnConfigData.editWarnInfo = i;
                        break;
                    default:
                        n = r.instant("warn.warningSetting")
                }
                e.warnConfigData.pageStatus.title = n, e.warnConfigData.pageStatus.view = t;
                var o = angular.element(".J-chart-warning-dialog");
                "list" == t ? o.removeClass("edit-mode") : o.length ? o.addClass("edit-mode") : a(function () {
                    angular.element(".J-chart-warning-dialog").addClass("edit-mode")
                }, 200)
            }

            function l() {
                var t = e.warnConfigData.chartBaseInfo.isDash;
                if (t) t && (e.$emit("refreshChartForWarn", !0), n.closeAll()); else {
                    if (!$(".drill-crumbs").length) {
                        if ([bdpChart.ChartType.Table, bdpChart.ChartType.BubbleMap, bdpChart.ChartType.AreaMap, bdpChart.ChartType.TextMap].indexOf(e.$bdpChart.getChartType()) > -1) ; else {
                            var i = e.$bdpChart.info, a = e.warnConfigData.warnList;
                            i.warn_info = a
                        }
                        !function () {
                            e.saveChartImmediate({only_refresh_data: !0})
                        }()
                    }
                    n.closeAll()
                }
            }

            function c() {
                var n = e.warnConfigData.chartBaseInfo, a = e.warnConfigData.warnList || [], o = i.getSwitchWarnTask(a);
                if (a.length > 0) {
                    var s = {
                        ct_id: n.ct_id,
                        open_warn_ids: angular.toJson(o.open),
                        off_warn_ids: angular.toJson(o.off),
                        rule_id: n.rule_id
                    };
                    e.warnConfigData.pageStatus.loading = !0, i.switchWarnTaskAPI(s).then(function (i) {
                        e.warnConfigData.pageStatus.loading = !1, i && (t(r.instant("chart.saveSuccess")), l())
                    })
                } else l()
            }

            function d() {
                e.warnConfigData.chartBaseInfo.isDash ? l() : (e.draw_chart_url && (e.draw_chart_url.options._t = (new Date).getTime(), e.draw_chart_url.options.optional = {}), n.closeAll()), n.closeAll()
            }

            function u() {
                e.$broadcast("broadcastWarnConfigSave", !0)
            }

            function p() {
                e.warnConfigData.pageStatus.onlyEdit ? n.closeAll() : (o("hide"), s("list", {}))
            }

            e.init = function () {
                function t() {
                    e.warnConfigData = {
                        pageStatus: {
                            loading: !1,
                            title: r.instant("warn.warningSetting"),
                            view: h ? "edit" : "list",
                            subView: "condition",
                            isPreview: !1,
                            onlyEdit: !!h,
                            ctTbPermission: g
                        }, chartBaseInfo: n, metaFields: l, chartTbFields: f, warnList: a
                    }, e.warnConfigFunc = {
                        togglePreview: o,
                        changeView: s,
                        configSave: c,
                        configCancel: d,
                        editSave: u,
                        editCancel: p
                    }, h && s("edit", h)
                }

                var n = e.ngDialogData.chartBaseInfo, a = e.ngDialogData.warnList, l = e.ngDialogData.metaFields,
                    f = e.ngDialogData.chartTbFields, h = e.ngDialogData.onlyEditTask, g = !0;
                e.warnConfigData = {pageStatus: {loading: !1}}, n.isDash && 0 == f.length || n.isWarnCenter ? (e.warnConfigData.pageStatus.loading = !0, i.getChartTbFieldList(n.tb_id).then(function (i) {
                    e.warnConfigData.pageStatus.loading = !1, i.canEdit ? f = i.canEdit ? i.list : l : (f = l, g = !1), t()
                })) : t()
            }, e.init(), e.$on("emitWarnChangeView", function (t, i) {
                if (i) {
                    var a = i.view;
                    if ("list" == a && ("add" == e.warnConfigData.pageStatus.view ? e.warnConfigData.warnList.push(i.data) : e.warnConfigData.warnList.forEach(function (e) {
                        e.warn_id == i.data.warn_id && (i.data.is_trigger = 0, $.extend(e, i.data))
                    })), e.warnConfigData.pageStatus.onlyEdit) return n.closeAll(), !1;
                    o("hide"), s(a, {})
                }
            }), e.$on("emitWarnChangeSubView", function (t, i) {
                i && (e.warnConfigData.pageStatus.subView = i.view)
            })
        }

        angular.module("BC.chartWarning", []).controller("chartWarnConfigCtrl", e), e.$inject = ["$scope", "errHint", "chartWarnService", "ngDialog", "$timeout", "$translate"]
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.chartWarning").constant("defaultWarnSettingTime", {
            weekend: 0,
            no_repeat: 0,
            warn_time: "00:00",
            warn_date: [],
            warn_time_for_month: "",
            warn_time_for_week: ""
        }).constant("defaultWarnFilter", {
            fid: "",
            fidUniqId: "",
            opt: "",
            val: "",
            string: {range: [], val: ""},
            num: {type: "", fid: "", val: "", valRange: [], field: {}, formula: {type: "", name: ""}},
            comment: ""
        }).constant("defaultWarnCondition", {
            logic: "and",
            latestDate: {},
            filters: [{
                fid: "",
                fidUniqId: "",
                opt: "",
                val: "",
                string: {range: [], val: ""},
                num: {type: "", fid: "", val: "", valRange: [], field: {}, formula: {type: "", name: ""}},
                comment: ""
            }]
        }).constant("defaultWarnInfo", {
            warn_name: "",
            warn_condition_list: [],
            warn_time_type: "0",
            warn_time_setting: {
                weekend: 0,
                no_repeat: 0,
                warn_time: "00:00",
                warn_date: [],
                warn_time_for_month: "",
                warn_time_for_week: ""
            },
            type: 0,
            switch: 1
        })
    }()
}, function (e, t, i) {
    "use strict";
    angular.module("BC.chartWarning").service("chartWarnService", ["commonService", "setAdvanceAggregatorName", "ngDialog", "$translate", "$q", "$filter", function (e, t, n, a, r, o) {
        function s(e, t, a, r, o, s) {
            n.open({
                template: i(214),
                className: "ngdialog-theme-default ngDialog-width-640 chart-warning-dialog J-chart-warning-dialog",
                scope: e,
                disableAnimation: !0,
                data: {chartBaseInfo: t, warnList: a, metaFields: r, chartTbFields: o, onlyEditTask: s},
                controller: "chartWarnConfigCtrl"
            })
        }

        function l(e, t) {
            var i = {};
            return t.some(function (t) {
                if (t.fidUniqId == e) return i = t, !0
            }), i
        }

        function c(t, i, n) {
            var a = r.defer(), o = {fid: t, ct_id: i, tb_id: n};
            return e.field.getRange(o).then(function (e) {
                0 == e.status ? (e = e.result, a.resolve(e)) : a.reject(!0)
            }), a.promise
        }

        function d(t) {
            var i = {tb_id: t, query_for_ct: 1, need_param: 1};
            return e.field.getList(i).then(function (e) {
                var t = [];
                return 0 == e.status && (e = e.result, t = bdp.utils.addSpecParamsToFields(e.schema || [])), {
                    list: t,
                    canEdit: e.can_edit
                }
            })
        }

        function u(e, t) {
            return {
                name: t,
                fid: e.fid,
                uniq_id: e.uniq_id,
                fidUniqId: e.fid + (e.uniq_id || ""),
                data_type: e.data_type,
                field_type: "number",
                axisType: "y",
                is_build_aggregated: e.is_build_aggregated
            }
        }

        function p(e) {
            var i = angular.copy(e), n = i.x || [];
            if (_.map(n, function (e) {
                e.axisType = "x"
            }), i.compare_axis) {
                _.map(i.compare_axis, function (e) {
                    e.axisType = "compare"
                });
                var a = _.filter(i.compare_axis, function (e) {
                    return "virtual" != e.data_type && "date" != e.data_type
                });
                n = n.concat(a || [])
            }
            angular.forEach(n, function (e) {
                e.fidUniqId = e.fid + (e.uniq_id || ""), e.field_type = e.data_type, e.name = e.nick_name || e.name, "sub_date" == e.data_type && (e.field_type = "string"), "date" == e.data_type && (e.originName = e.name, e.name += "(" + o("granularity")(e.granularity) + ")")
            });
            var r = i.y || [];
            "C250" == i.chart_type && (r = r.concat(i.y_optional || [])), "C280" == i.chart_type && (r = r.concat(i.y_scatter || []));
            var s = [], l = "";
            return angular.forEach(r, function (e) {
                if ("row_summary" != e.fid) if (e.nick_name) l = e.nick_name, s.push(u(e, l)); else {
                    l = e.name;
                    var i = t(e);
                    i ? s.push(u(e, l + i)) : s.push(u(e, l))
                }
            }), n = n.concat(s)
        }

        function f(e) {
            var t = [], i = [];
            return _(e).filter({switch: 1}).forEach(function (e) {
                t.push({warn_id: e.warn_id, type: e.type})
            }), _(e).filter({switch: 0}).forEach(function (e) {
                i.push({warn_id: e.warn_id, type: e.type})
            }), {open: t, off: i}
        }

        function h(e) {
            var t = "";
            return e.meta.forEach(function (e) {
                e.options.forEach(function (i, n) {
                    var a = "and" == e.logic ? " 且 " : " 或 ";
                    t += n == e.options.length - 1 ? i.comment : i.comment + a
                })
            }), t
        }

        function g(e, t, i, n, a) {
            !i || i.warn_time_setting instanceof Object || (i.warn_time_setting = JSON.parse(i.warn_time_setting)), !i || i.meta instanceof Object || (i.meta = JSON.parse(i.meta));
            var r = $.extend({}, e, i);
            if (!i) return r = $.extend({}, e, {});
            var r = $.extend({}, e, i), o = i.warn_time_setting;
            switch (r.warn_time_type = String(r.warn_time_type), r.warn_time_setting.weekend = !(1 != o.weekend), r.warn_time_setting.no_repeat = !(1 != o.no_repeat), r.warn_time_type) {
                case"3":
                    r.warn_time_setting.warn_time_for_week = r.warn_time_setting.warn_date;
                    break;
                case"4":
                    r.warn_time_setting.warn_time_for_month = r.warn_time_setting.warn_date
            }
            return r.meta.forEach(function (e) {
                var i = {tmpId: bdp.utils.guid(), comment: "", filters: [], logic: "", latestDate: {}}, o = "", s = "";
                i.logic = e.logic, e.latest_date && "" != e.latest_date && (i.latestDate = $.extend({checked: !0}, e.latest_date), s = e.latest_date.comment + " "), e.options.forEach(function (r, s) {
                    var l = $.extend({}, angular.copy(t), {
                        fid: r.fid,
                        fidUniqId: r.fid + r.uniq_id,
                        opt: r.compare_type,
                        comment: r.comment
                    });
                    n.forEach(function (e) {
                        e.fid != r.fid || e.uniq_id && e.uniq_id != r.uniq_id || (l.field = angular.copy(e))
                    });
                    var c = l.opt, d = l.field.field_type, u = r.range || [], p = r.compare_value;
                    switch (d) {
                        case"string":
                            l.string.val = c == -1 ? u : u.join(";");
                            break;
                        case"number":
                            !p && u && u.length && (12 != c ? l.num.val = u[0] : l.num.valRange = u || [], l.num.type = "0"), p && !$.isEmptyObject(p) && (l.num.fid = p.fid, l.num.field = {}, l.num.type = "1", l.num.formula = {
                                type: p.aggregator || "",
                                name: p.aggregator_name || ""
                            }, "PERCENT" == p.aggregator && (l.num.formula.type = "MED"), l.num.field = w(p.fid, a), l.num.showName = b(l.num))
                    }
                    i.filters.push(l);
                    var f = "and" == i.logic ? " 且 " : " 或 ";
                    o += s == e.options.length - 1 ? l.comment : l.comment + f
                }), i.latestDate && (i.comment += i.latestDate.comment), i.comment = s + "当 " + o + " 时触发预警", r.warn_condition_list.push(i)
            }), r
        }

        function m(e) {
            var t = {
                fid: e.fid,
                uniq_id: e.field.uniq_id,
                data_type: e.field.data_type,
                compare_type: Number(e.opt),
                comment: e.comment,
                type: "condition"
            }, i = e.opt, n = e.field.field_type, a = null, r = +new Date;
            switch (n) {
                case"string":
                    var o = e.string;
                    a = null, i == -1 ? (a = o.val, t.type = "exact") : [8, 9].indexOf(i) < 0 && (a = o.val.indexOf(";") >= 0 ? o.val.split(";") : o.val.split("；")), t.range = a;
                    break;
                case"number":
                    var s = e.num;
                    switch (a = null, s.type) {
                        case"0":
                            t.range = 12 != i ? [s.val] : s.valRange || [];
                            break;
                        case"1":
                            t.compare_value = {
                                data_type: s.field.data_type,
                                fid_name: s.field.name,
                                alias_name: s.showName,
                                uniq_id: s.field.uniq_id || r++,
                                fid: s.field.fid,
                                is_build_aggregated: s.field.is_build_aggregated,
                                aggregator: s.formula.type || "",
                                aggregator_name: s.formula.name || ""
                            }, "MED" == s.formula.type && (t.compare_value.aggregator = "PERCENT", t.compare_value.percent = "0.5")
                    }
            }
            return t
        }

        function v(e) {
            var t = e.warn_time_type, i = e.warn_time_setting, n = e.warn_condition_list;
            switch (i.weekend = i.weekend ? 1 : 0, i.no_repeat = i.no_repeat ? 1 : 0, t) {
                case"1":
                    i.warn_time = "-1";
                    break;
                case"3":
                    i.warn_date = i.warn_time_for_week;
                    break;
                case"4":
                    i.warn_date = i.warn_time_for_month
            }
            var a = i.warn_time || "", r = a.split(":");
            return r.length >= 2 && (i.warn_time = r[0] + ":" + r[1]), e.meta = [], n.forEach(function (t) {
                var i = [];
                t.filters.forEach(function (e) {
                    var t = m(e);
                    i.push(t)
                });
                var n = t.logic || "and";
                1 == t.filters.length && (n = "and");
                var a = t.latestDate, r = a && a.checked ? {fid: a.fid, uniq_id: a.uniq_id, comment: a.comment} : "";
                e.meta.push({options: i, logic: n, latest_date: r})
            }), e
        }

        function y(e, t) {
            var i = "", n = e.filters, r = e.latestDate;
            return r && r.checked && (r.comment = "(" + (r.originName || r.name) + " 为最新日期)", i += r.comment), i += " 当 ", n.forEach(function (r, o) {
                var s = r.field, l = r.field.field_type, c = r.opt, d = t[l], u = _.filter(d, {value: c})[0] || {},
                    p = (s.nick_name || s.name) + " ";
                switch (l) {
                    case"string":
                        if (c == -1) p += "为 " + r.string.val.join("、"); else if ([8, 9].indexOf(c) >= 0) p += a.instant("f90f1930"); else {
                            var f = "";
                            f = r.string.val.indexOf(";") >= 0 ? r.string.val.split(";") : r.string.val.split("；"), p += u.name + " " + f.join("、")
                        }
                        break;
                    case"number":
                        if (p += u.name + " ", [8, 9].indexOf(c) >= 0) break;
                        "0" == r.num.type ? p += 12 == c ? "为 " + r.num.valRange[0] + "~" + r.num.valRange[1] : r.num.val : "1" == r.num.type && (p += r.num.showName)
                }
                r.comment = p;
                var h = "and" == e.logic ? " 且 " : " 或 ";
                i += o == n.length - 1 ? p : p + h
            }), i += " 时触发预警"
        }

        function b(e) {
            var t = "";
            return e.fid && (t += e.field.name, e.formula && e.formula.type && (t += "(" + e.formula.name + ")")), t
        }

        function w(e, t) {
            var i = null;
            return _.forEach(t, function (t) {
                t.fid == e && (i = t)
            }), i
        }

        function x(e) {
            var t = angular.copy(e);
            return delete t.warn_id, delete t.id, delete t.triggerInfo, delete t.warn_condition_list, delete t.warn_time_setting.warn_time_for_month, delete t.warn_time_setting.warn_time_for_week, t
        }

        function C(e, t) {
            "base" == t && (e.val = "", e.string.val = "", e.num = {
                type: "0",
                fid: "",
                val: "",
                valRange: [],
                formula: ""
            })
        }

        function k(e, t) {
            _.map(e, function (e) {
                e.selected = t || !1
            })
        }

        function S(e) {
            for (var t = !0, i = "", n = this, a = {}, r = 0, o = e.length; r < o && (a = function (e) {
                var t = e.opt, i = !0, a = "";
                if (e.fid || (i = !1, a = n.errStrObj.field), "" === e.opt && (i = !1, a = n.errStrObj.opt), !i) return {
                    flag: i,
                    errStr: a
                };
                switch (e.field.field_type) {
                    case"string":
                        t != -1 || e.string.val && 0 != e.string.val.length ? [-1, 8, 9].indexOf(t) < 0 && !e.string.val && (i = !1, a = n.errStrObj.value) : (i = !1, a = n.errStrObj.value);
                        break;
                    case"number":
                        if ([8, 9].indexOf(t) >= 0) break;
                        "" === e.num.type ? (i = !1, a = n.errStrObj.opt) : "0" == e.num.type ? (12 == t || void 0 != e.num.val && null != e.num.val && "" !== e.num.val || (i = !1, a = n.errStrObj.value), 12 == t && (void 0 == e.num.valRange[0] || null == e.num.valRange[0] || "" === e.num.valRange[0] || void 0 == e.num.valRange[1] || null == e.num.valRange[1] || "" === e.num.valRange[1] ? (i = !1, a = n.errStrObj.valueRange) : e.num.valRange[0] >= e.num.valRange[1] && (i = !1, a = n.errStrObj.compare))) : "1" == e.num.type && (e.num.fid ? e.num.field.isAggr || "" !== e.num.formula || (i = !1, a = n.errStrObj.formula) : (i = !1, a = n.errStrObj.field))
                }
                return {flag: i, errStr: a}
            }(e[r]), t = a.flag, i = a.errStr, t); r++) ;
            return {flag: t, errStr: i}
        }

        function T(e, t) {
            var i = !1, n = _.filter(t || [], {warn_name: e.warn_name, type: e.type});
            return n.length > 1 ? i = !0 : 1 == n.length && n[0].warn_id != e.warn_id && (i = !0), i
        }

        function D(e, t) {
            var i = !0, n = "", a = this, r = e.warn_name, o = e.warn_time_type, s = e.warn_time_setting;
            if (!r) return {flag: !1, errStr: a.errStrObj.name};
            if (T(e, t)) return {flag: !1, errStr: a.errStrObj.repeat};
            if (["2", "3", "4"].indexOf(o) >= 0) if (s.warn_time && s.warn_time.indexOf(":") >= 0) {
                var l = s.warn_time.split(":")[0], c = s.warn_time.split(":")[1];
                (l >= "24" || c >= "60") && (i = !1, n = a.errStrObj.hour)
            } else i = !1, n = a.errStrObj.hour;
            switch (o) {
                case"3":
                    0 == s.warn_time_for_week.length && (i = !1, n = a.errStrObj.week);
                    break;
                case"4":
                    0 == s.warn_time_for_month.length && (i = !1, n = a.errStrObj.month)
            }
            return 0 == e.warn_condition_list.length && (i = !1, n = a.errStrObj.condition), {flag: i, errStr: n}
        }

        function L(t) {
            return e.warn.warnSwitch(t).then(function (e) {
                return 0 == Number(e.status) && (e.result || !0)
            })
        }

        function A(t) {
            return e.warn.del(t).then(function (e) {
                return 0 == Number(e.status)
            })
        }

        function E(e, t) {
            return t && angular.forEach(e, function (e) {
                e.selected = !!t[e.val]
            }), e
        }

        function I(t) {
            return e.user.modifyInfo(t).then(function (e) {
                return 0 == Number(e.status)
            })
        }

        this.fieldRangeMapCache = {
            obj: {}, getCache: function (e) {
                var t = this.obj[e] || [];
                return angular.copy(t)
            }, setCache: function (e, t) {
                this.obj[e] = t
            }, clearCache: function () {
                this.obj = null
            }
        }, this.openWarnConfigDialog = s, this.getFieldInfoByFidUniqId = l, this.getFieldRange = c, this.getChartTbFieldList = d, this.getYAxisBaseInfo = u, this.getMetaAxisFields = p, this.getWarnCommentText = h, this.getSwitchWarnTask = f, this.formatRequestData = g, this.formatSaveData = v, this.formatConditionComment = y, this.formatNumMatchShowName = b, this.clearWarnInfo = x, this.resetFilterVal = C, this.resetSelectedStatus = k, this.checkWarnFilterValid = S, this.checkWarnInfoValid = D, this.switchWarnTaskAPI = L, this.delWarnTaskAPI = A, this.formatWarnModeData = E, this.saveWarnModeAPI = I, this.errStrObj = {
            name: a.instant("warn.inputWarnName"),
            repeat: a.instant("warn.repeatWarnName"),
            field: a.instant("a0dad2c3"),
            opt: a.instant("540b7cea"),
            value: a.instant("5248b357"),
            valueRange: a.instant("0d57e5d5"),
            week: a.instant("ffe39ba4"),
            month: a.instant("8c4f4e50"),
            hour: a.instant("321b97da"),
            predict: a.instant("732ce8ef"),
            config: a.instant("17f060d8"),
            condition: a.instant("8e7b5821"),
            formula: a.instant("1d66362e"),
            compare: a.instant("a3a1e8c2")
        }
    }])
}, function (e, t) {
    e.exports = "/dist/static/chart-edit/chart-warning/view/chart-warn-config-dialog.html"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, n, a, r, o) {
            return {
                restrict: "A",
                templateUrl: i(216),
                replace: !1,
                scope: {chartBaseInfo: "=", warnList: "=", warnConfigData: "=", changeViewFunc: "&"},
                link: function (e, t, i) {
                    function s() {
                        var t = e.warnTaskListData.taskLimit;
                        if (e.warnTaskListData.list.length >= t) return r(e.warnTaskListData.tips.maxLimit + t + e.warnTaskListData.tips.taskLimit), !1;
                        e.warnTaskListData.changeViewFunc({view: "add", data: {}})
                    }

                    function l(t) {
                        e.warnTaskListData.changeViewFunc({view: "edit", data: t})
                    }

                    function c(t, i) {
                        a.openConfirm({
                            template: "/static/partials/dialogTemplates/confirm-dialog.html",
                            className: "ngdialog-theme-default ngDialog-width-300",
                            scope: e,
                            data: {title: n.instant("tips"), message: n.instant("0ce31b56")}
                        }).then(function () {
                            var a = {
                                ct_id: e.warnTaskListData.chartBaseInfo.ct_id,
                                rule_id: e.warnTaskListData.chartBaseInfo.rule_id,
                                warn_id: i.warn_id
                            };
                            e.warnTaskListData.pageLoading = !0, o.delWarnTaskAPI(a).then(function (i) {
                                e.warnTaskListData.pageLoading = !1, i && (r(n.instant("chart.warnDelSuccess")), e.warnTaskListData.list.splice(t, 1))
                            })
                        })
                    }

                    function d(e) {
                        e.switch = e.switch ? 0 : 1
                    }

                    e.initView = function () {
                        var t = e.warnList, i = e.warnConfigData, a = e.changeViewFunc, r = e.chartBaseInfo;
                        e.warnTaskListData = {
                            taskLimit: 50,
                            tips: {maxLimit: n.instant("9b83abfc"), taskLimit: n.instant("4bf3a740")},
                            chartBaseInfo: r,
                            pageLoading: !1,
                            list: t,
                            configData: i,
                            addTask: s,
                            editTask: l,
                            delTask: c,
                            switchTask: d,
                            changeViewFunc: a
                        }
                    }, e.initView()
                }
            }
        }

        angular.module("BC.chartWarning").directive("chartWarnTaskList", e), e.$inject = ["$rootScope", "$timeout", "$translate", "ngDialog", "errHint", "chartWarnService"]
    }()
}, function (e, t) {
    e.exports = "/dist/static/chart-edit/chart-warning/view/chart-warn-task-list.html"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, n, a, r, o, s, l, c, d, u, p, f, h, g, m, v) {
            return {
                restrict: "A",
                templateUrl: i(218),
                replace: !1,
                scope: {
                    pageStatus: "=",
                    chartBaseInfo: "=",
                    warnInfo: "=",
                    warnList: "=",
                    fieldList: "=",
                    tbFields: "=",
                    togglePreviewFunc: "&"
                },
                link: function (e, t, i) {
                    function y(t) {
                        var i = e.warnTaskEditData.warnInfo.warn_condition_list;
                        if (i.length >= z) return r(e.warnTaskEditData.tips.maxLimit + z + e.warnTaskEditData.tips.conditionLimit), !1;
                        var a = angular.copy(P);
                        a.latestDate = $.extend({checked: !1}, e.warnTaskEditData.xFirstDate), a.tmpId = bdp.utils.guid(), a.name = n.instant("b3ba0609") + (i.length + 1), e.warnTaskEditData.curCondition = a, e.warnTaskEditData.subView = "filter", e.warnTaskEditData.conditionSubView = "add", x()
                    }

                    function b(t, i) {
                        if (t && t.stopPropagation(), $(".J-chart-warn-task-edit-wrap").find(".bdp-chart-loading").length) return r(n.instant("d4b97284")), !1;
                        o.openConfirm({
                            template: "/static/partials/dialogTemplates/confirm-dialog.html",
                            className: "ngdialog-theme-default ngDialog-width-300",
                            scope: e,
                            data: {title: n.instant("tips"), message: n.instant("52b87262")}
                        }).then(function () {
                            e.warnTaskEditData.warnInfo.warn_condition_list.splice(i, 1), e.warnTaskEditData.pageStatus.isPreview && e.$broadcast("broadcastReloadUpdateReview", !0)
                        })
                    }

                    function w(t, i, a) {
                        t && t.stopPropagation(), e.warnTaskEditData.conditionSubView = "edit", e.warnTaskEditData.subView = "filter", e.warnTaskEditData.curCondition = angular.copy(a);
                        var r = e.warnTaskEditData.curCondition;
                        r.name = n.instant("b3ba0609") + (i + 1), r.logic = r.logic || "and", r.latestDate = $.extend(r.latestDate || {checked: !1}, e.warnTaskEditData.xFirstDate), x()
                    }

                    function x() {
                        e.$emit("emitWarnChangeSubView", {view: e.warnTaskEditData.subView}), e.warnTaskEditData.pageStatus.onlyEdit || e.$emit("emitWarnChangeView", {view: e.warnTaskEditData.pageStatus.view})
                    }

                    function C(t, i) {
                        t && t.stopPropagation();
                        var n = e.warnTaskEditData.curCondition;
                        if (n.filters.length >= B) return r(e.warnTaskEditData.tips.maxLimit + B + e.warnTaskEditData.tips.filterLimit), !1;
                        _.filter(n.filters, function (e) {
                            e.showFieldList = !1, e.showFormulaList = !1
                        }), n.filters.push(angular.copy(j));
                        var a = $(t.target).parents(".J-warn-filter-list");
                        scrollToBottom(a)
                    }

                    function k(t, i) {
                        if (t && t.stopPropagation(), e.warnTaskEditData.curCondition.filters.length < 2) return !1;
                        o.openConfirm({
                            template: "/static/partials/dialogTemplates/confirm-dialog.html",
                            className: "ngdialog-theme-default ngDialog-width-300",
                            scope: e,
                            data: {title: n.instant("tips"), message: n.instant("52b87262")}
                        }).then(function () {
                            e.warnTaskEditData.curCondition.filters.splice(i, 1)
                        })
                    }

                    function S(t) {
                        var i = e.warnTaskEditData.conditionSubView, n = e.warnTaskEditData.curCondition,
                            a = e.warnTaskEditData.warnInfo, o = l.checkWarnFilterValid(n.filters);
                        if (!o.flag) return r(o.errStr), !1;
                        n.comment = l.formatConditionComment(n, e.warnTaskEditData.operatorList), "add" == i ? a.warn_condition_list.push({
                            tmpId: n.tmpId,
                            comment: n.comment,
                            filters: n.filters,
                            logic: n.logic,
                            latestDate: n.latestDate
                        }) : a.warn_condition_list.forEach(function (e) {
                            e.tmpId == n.tmpId && (e.comment = n.comment, e.filters = n.filters, e.logic = n.logic, e.latestDate = n.latestDate)
                        }), l.formatSaveData(a), e.warnTaskEditData.subView = "condition", e.$emit("emitWarnChangeSubView", {view: e.warnTaskEditData.subView})
                    }

                    function T(t) {
                        e.warnTaskEditData.subView = "condition", e.$emit("emitWarnChangeSubView", {view: e.warnTaskEditData.subView})
                    }

                    function D(t) {
                        var i = e.warnTaskEditData.pageStatus.ctTbPermission, n = e.warnTaskEditData.fieldListForFilter,
                            a = l.getFieldInfoByFidUniqId(t.fidUniqId, n);
                        if (t.field && t.field.fidUniqId == t.fidUniqId) return !1;
                        switch (t.fid = a.fid, t.field = a, a.field_type) {
                            case"string":
                                t.opt = i ? -1 : 0, t.string.range = [];
                                break;
                            case"number":
                                t.opt = 0;
                                break;
                            default:
                                t.opt = ""
                        }
                        l.resetFilterVal(t, "base")
                    }

                    function L(e) {
                        l.resetFilterVal(e, "base"), "number" == e.field.field_type && "" === e.num.type && (e.num.type = "0")
                    }

                    function A(t) {
                        function i(e) {
                            var t = {range: [], total: e.total};
                            return e.range.forEach(function (e) {
                                t.range.push({_multi_list_id_: e, _multi_list_text_: e})
                            }), t
                        }

                        var n = l.fieldRangeMapCache.getCache(t.fid);
                        if (n && 0 != n.length) {
                            var a = s.defer();
                            return a.resolve(i(n)), a.promise
                        }
                        var r = e.warnTaskEditData.chartBaseInfo;
                        return l.getFieldRange(t.fid, r.ct_id, r.tb_id).then(function (e) {
                            return l.fieldRangeMapCache.setCache(t.fid, e), i(e)
                        })
                    }

                    function E(t) {
                        t.showFieldList = !t.showFieldList, t.showFormulaList = !1, e.warnTaskEditData.numSubView = "field"
                    }

                    function I(t, i) {
                        var n = !1;
                        1 === i.is_build_aggregated && (n = "date" != i.data_type || !i.formula || !(i.formula.indexOf("MAX_DATE") >= 0 || i.formula.indexOf("max_date") >= 0 || i.formula.indexOf("MIN_DATE") >= 0 || i.formula.indexOf("min_date") >= 0)), i.isAggr = n, t.num.fid = i.fid, t.num.field = i, t.num.formula = "", n ? (t.showFieldList = !1, t.showFormulaList = !1) : (t.showFormulaList = !0, e.warnTaskEditData.numSubView = "formula"), t.num.showName = l.formatNumMatchShowName(t.num)
                    }

                    function F(e, t) {
                        e.num.formula = {
                            name: t.name,
                            type: t.type
                        }, e.num.showName = l.formatNumMatchShowName(e.num), e.showFieldList = !1, e.showFormulaList = !1
                    }

                    function O() {
                        e.warnTaskEditData.warnInfo.warn_time_setting = angular.copy(N), l.resetSelectedStatus(e.warnTaskEditData.dayOfWeekList), l.resetSelectedStatus(e.warnTaskEditData.dateOfMonthList)
                    }

                    function M() {
                        function t(t) {
                            p.warn_id = t || d, e.$emit("emitWarnChangeView", {view: "list", data: p})
                        }

                        var i = e.warnTaskEditData.pageStatus, o = e.warnTaskEditData.warnList,
                            s = e.warnTaskEditData.warnInfo, c = e.warnTaskEditData.chartBaseInfo,
                            d = "add" == i.view ? "" : e.warnTaskEditData.warnInfo.warn_id;
                        s = angular.copy(s);
                        var u = l.checkWarnInfoValid(s, o);
                        if (!u.flag) return r(u.errStr), !1;
                        s.type = c.role_type;
                        var c = e.warnTaskEditData.chartBaseInfo, p = l.formatSaveData(s);
                        p = l.clearWarnInfo(p);
                        var f = {
                            ct_id: e.warnTaskEditData.chartBaseInfo.ct_id || "",
                            rule_id: e.warnTaskEditData.chartBaseInfo.rule_id || "",
                            data: p
                        };
                        e.warnTaskEditData.pageLoading = !0, "add" == i.view ? a.warn.add(f).then(function (i) {
                            e.warnTaskEditData.pageLoading = !1, 0 == Number(i.status) && (r(n.instant("chart.warnAddSuccess")), t(i.result))
                        }) : "edit" == i.view && (f.warn_id = d, a.warn.modify(f).then(function (e) {
                            0 == Number(e.status) && (r(n.instant("chart.warnModifySuccess")), t())
                        }))
                    }

                    var N = angular.copy(h), j = angular.copy(g), P = angular.copy(m), R = angular.copy(v), B = 50,
                        z = 50;
                    e.dateTimeByHalfHour = f, e.init = function () {
                        var i = e.pageStatus.ctTbPermission, a = angular.copy(c);
                        i && (a.string = [{value: -1, name: n.instant("exactly")}].concat(a.string));
                        var r = angular.copy(u);
                        r.map(function (e) {
                            e._multi_list_id_ = e.value, e._multi_list_text_ = e.name
                        });
                        var o = angular.copy(p);
                        o.map(function (e) {
                            e._multi_list_id_ = e.value, e._multi_list_text_ = e.name
                        });
                        var s = null, f = e.fieldList, h = [];
                        ["C271", "C272", "C273"].indexOf(e.chartBaseInfo.chart_type) >= 0 ? h = _.filter(f, function (e) {
                            if ("x" != e.axisType && "compare" != e.axisType) return !0
                        }) : _.map(f, function (e) {
                            "x" == e.axisType && "date" == e.data_type ? s || (s = e) : h.push(e)
                        }), e.warnTaskEditData = {
                            dayOfWeekList: r,
                            dateOfMonthList: o,
                            formulaList: d,
                            operatorList: a,
                            tips: {
                                conditionTitle: [n.instant("c66063dc"), n.instant("2ec8e26e"), n.instant("40c353c3"), n.instant("dbde7d1f")],
                                placeHolder: [n.instant("afebb9eb"), n.instant("35c137f7")],
                                maxLimit: n.instant("9b83abfc"),
                                conditionLimit: n.instant("a8f8c7b8"),
                                filterLimit: n.instant("0285425d")
                            },
                            viewMode: e.viewMode,
                            subView: "condition",
                            pageLoading: !1,
                            pageStatus: e.pageStatus,
                            numSubView: "field",
                            conditionSubView: "",
                            chartBaseInfo: e.chartBaseInfo,
                            warnList: e.warnList,
                            fieldList: f,
                            fieldListForFilter: h,
                            tbFields: e.tbFields,
                            warnInfo: null,
                            curCondition: null,
                            xFirstDate: s
                        }, e.warnTaskEditFunc = {
                            addCondition: y,
                            delCondition: b,
                            editCondition: w,
                            addFilter: C,
                            delFilter: k,
                            saveFilter: S,
                            cancelFilter: T,
                            changeFilterField: D,
                            changeFilterOpt: L,
                            getFieldRange: A,
                            toggleNumMatchLayer: E,
                            chooseNumField: I,
                            chooseNumFormula: F,
                            changeWarnType: O,
                            togglePreviewFunc: e.togglePreviewFunc
                        }, e.warnTaskEditData.warnInfo = l.formatRequestData(R, g, e.warnInfo, e.fieldList, e.tbFields), e.warnTaskEditData.warnInfo.warn_condition_list.length || $(t).find(".J-warn-name-input").focus()
                    }, e.init(), e.$on("broadcastWarnConfigSave", function (e, t) {
                        t && M()
                    })
                }
            }
        }

        angular.module("BC.chartWarning").directive("chartWarnTaskEdit", e), e.$inject = ["$rootScope", "$timeout", "$translate", "commonService", "errHint", "ngDialog", "$q", "chartWarnService", "warnOperatorMapByType", "warnFieldFormulaList", "dayOfWeekList", "dateOfMonthList", "dateTimeByHalfHour", "defaultWarnSettingTime", "defaultWarnFilter", "defaultWarnCondition", "defaultWarnInfo"]
    }()
}, function (e, t) {
    e.exports = "/dist/static/chart-edit/chart-warning/view/chart-warn-task-edit.html"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, n, a, r) {
            return {
                restrict: "A", templateUrl: i(220), replace: !1, link: function (i, o, s) {
                    function l(e) {
                        a.chart.getInfo(e).success(function (e) {
                            "0" == e.status ? c(e.result) : errorHandle(e)
                        })
                    }

                    function c(e) {
                        var t = e, n = {
                            name: t.name || void 0,
                            description: t.description,
                            tb_id: t.tb_id || "",
                            meta: {level_fields: [], level: [], filter_list: [], filter_list_inner: []}
                        };
                        i.chart_ops = n, n.meta = $.extend(!0, {}, n.meta, angular.fromJson(t.meta));
                        var a = n.meta.level[i.drill_level];
                        i.viewMeta = a, d(i.previewData.ct_id)
                    }

                    function d(t) {
                        var a = angular.copy(r), o = i.$parent.warnTaskEditData.warnInfo;
                        o = angular.copy(o), o ? (!o || o.warn_time_setting instanceof Object || (o.warn_time_setting = JSON.parse(o.warn_time_setting)), o.meta = o.meta || "[]", !o || o.meta instanceof Object || (o.meta = JSON.parse(o.meta))) : o = $.extend({}, a, {});
                        var s = n.formatSaveData(o);
                        i.previewData.draw_chart_url = {
                            options: {
                                theme: 1 == +e.usedThemeId ? "dark" : "default",
                                ct_id: t,
                                optional: {_t: +new Date, read_cache: !1, warn_filter: s.meta},
                                isWarnPreview: !0
                            }, lazyload: !1
                        }
                    }

                    i.initView = function () {
                        var e = i.$parent.chartBaseInfo.ct_id;
                        i.global = {}, i.chart_ops = {}, i.previewData = {ct_id: e}, t(function () {
                            l(e)
                        }, 400)
                    }, i.initView(), i.$on("broadcastReloadUpdateReview", function (e, t) {
                        t && d(i.$parent.chartBaseInfo.ct_id)
                    })
                }
            }
        }

        angular.module("BC.chartWarning").directive("chartWarnDataPreview", e), e.$inject = ["$rootScope", "$timeout", "chartWarnService", "commonService", "defaultWarnInfo"]
    }()
}, function (e, t) {
    e.exports = "/dist/static/chart-edit/chart-warning/view/chart-warn-data-preview.html"
}, function (e, t, i) {
    i(222).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "chart-warn_06567f47.css"
}, function (e, t, i) {
    i(224).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "index_f8b9ef65.css"
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = i(226);
    angular.module("BC.setDateValue", []).directive("setDateValue", ["ngDialog", "$filter", "dateTimeByHalfHour", "$timeout", function (e, t, i, a) {
        return new n.setDateValueDirective(e, t, i, a)
    }])
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = function () {
        function e(e, t, i, n) {
            var a = this;
            this.ngDialog = e, this.$filter = t, this.dateTimeByHalfHour = i, this.$timeout = n, this.innerHourChange = !1, this.restrict = "E", this.scope = {
                date: "=",
                dateType: "=",
                dateVerify: "=",
                setDateBack: "&",
                defaultVal: "=?"
            }, this.templateUrl = "/static/common/set-date-value/set-date-value.html", this.link = function (e, t, i) {
                var n = a;
                n.init = function () {
                    e.dateVm = {
                        value: "",
                        dateVal: e.date ? e.date.replace(/.{9}$/, "") : "",
                        hour: e.date ? e.date.replace(/^.{11}/, "") : "",
                        unlimited: !1,
                        dateTimeByHalfHour: a.dateTimeByHalfHour,
                        showStartTime: !1,
                        unlimitedShow: "false" == i.unlimitedShow,
                        verifydate: !0,
                        verifytime: !0,
                        position: i.position,
                        mode: i.mode,
                        setDate: !1
                    }, n.initDatePickerPos()
                }, n.initDatePickerPos = function () {
                    i.datePickerPosition && "top" == i.datePickerPosition && $(t).find(".date-picker").css({bottom: 32})
                }, n.init(), e.dateVm.change = function () {
                    var t = e.dateVm;
                    t.disable = t.unlimited, t.unlimited ? e.date = null : e.date = $.trim(e.dateVm.dateVal + " " + e.dateVm.hour), e.setDateBack()
                }, e.dateVm.timeChange = function () {
                    e.dateVm.disable || (e.dateVm.showStartTime = !e.dateVm.showStartTime)
                }, e.$watch("date", function (t) {
                    t ? (t.length <= 10 ? (e.dateVm.dateVal = t, e.dateVm.hour = "00:00:00") : (e.dateVm.dateVal = t.replace(/.{9}$/, ""), e.dateVm.hour = t.replace(/^.{11}/, "") || "00:00:00"), e.dateVm.disable = e.dateVm.unlimited = !1) : null === t && (e.dateVm.disable = e.dateVm.unlimited = !0, e.defaultVal && (e.dateVm.dateVal = e.defaultVal.replace(/.{9}$/, ""), e.dateVm.hour = e.defaultVal.replace(/^.{11}/, "") || "00:00:00"))
                }), e.dateVm.selectDate = function (t) {
                    var i = e.dateVm;
                    i.unlimited || (i.showStartPicker = !i.showStartPicker, i.showStartPicker ? a.$timeout(function () {
                        if (i.showStartPicker && "fixed" == e.dateVm.position) {
                            var n = $(t.currentTarget).parent().find(".date-picker"), a = $(t.currentTarget).offset();
                            n.css({
                                position: "fixed",
                                left: a.left - 315 + 72 + "px",
                                top: a.top + 25 + "px",
                                width: "321px",
                                "z-index": 1e3
                            }), "edit" == e.dateVm.mode && $(".J-chart-right").css({"z-index": 9999})
                        } else "edit" == e.dateVm.mode && $(".J-chart-right").css({"z-index": 101});
                        r()
                    }, 10) : o())
                }, e.$on("setDate", function (t, i) {
                    t.stopPropagation(), a.$timeout(function () {
                        e.dateVm.dateVal = a.formatDate(i), e.date = $.trim(e.dateVm.dateVal + " " + e.dateVm.hour), e.dateVm.verifydate = !0, e.dateVerify = e.dateVm.verifydate && e.dateVm.verifytime, e.dateVm.setDate = !0, e.setDateBack()
                    }, 0)
                }), a.formatDate = function (e) {
                    return a.$filter("date")(e, "yyyy-MM-dd")
                }, e.selectTime = function (t) {
                    e.dateVm.hour = t.value, e.dateVm.verifytime = !0, e.dateVm.showStartTime = !1, e.dateVerify = e.dateVm.verifydate && e.dateVm.verifytime, e.date = $.trim(e.dateVm.dateVal + " " + e.dateVm.hour), e.setDateBack()
                }, e.checkInputDateKeyup = function (t, i) {
                    var a = "";
                    a = "date" == i ? $.trim(e.dateVm.dateVal) : $.trim(e.dateVm.hour), "date" === i && 10 === a.length ? (e.dateVm["verify" + i] = "" == a || n.reg.isDate(a), e.dateVm.verifydate && e.checkInputDate()) : "time" === i && 8 === a.length && (e.dateVm["verify" + i] = "" == a || n.reg.isTime(a), e.dateVm.verifytime && e.checkInputDate())
                }, e.checkInputDate = function (t, i) {
                    a.$timeout(function () {
                        var t = "";
                        if (e.dateVm.setDate || e.dateVm.timeList) return e.dateVm.setDate = !1, void(e.dateVm.timeList = !1);
                        t = "date" == i ? $.trim(e.dateVm.dateVal) : $.trim(e.dateVm.hour), "date" === i ? e.dateVm["verify" + i] = "" == t || n.reg.isDate(t) : "time" === i && (e.dateVm["verify" + i] = "" == t || n.reg.isTime(t)), e.dateVm.verifydate && e.dateVm.verifytime ? (e.dateVerify = !0, e.date = $.trim(e.dateVm.dateVal + " " + e.dateVm.hour), e.setDateBack()) : e.dateVerify = !1
                    }, 10)
                };
                var r = function () {
                    angular.element(document).off("click.datepicker" + e.$id).on("click.datepicker" + e.$id, function (t) {
                        var i = angular.element(t.target), a = i.parents(".trigger-datepicker").length > 0;
                        i.hasClass("datepicker-" + e.$id) || a || (n.$timeout(function () {
                            e.dateVm.showStartPicker = !1, "edit" == e.dateVm.mode && $(".J-chart-right").css({"z-index": 101})
                        }), o())
                    })
                }, o = function () {
                    angular.element(document).off("click.datepicker" + e.$id)
                };
                e.$on("$destroy", function () {
                    angular.element(document).off("click.datepicker" + e.$id)
                })
            }, this.ngDialog = e, this.$filter = t, this.$timeout = n, this.reg = {
                isDate: function (e) {
                    return /^\d{4}-(0?[1-9]|1[0-2])-(0?[1-9]|[1-2]\d|3[0-1])$/.test(e)
                }, isTime: function (e) {
                    return /^(((0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9])|(00:00:00))$/.test(e)
                }
            }
        }

        return e
    }();
    t.setDateValueDirective = n
}, function (e, t, i) {
    i(228).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "index_80491320.css"
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = i(230), a = i(189);
    angular.module("BC.chartArgsUse", []).service("chartArgsService", ["$http", "$q", "commonHttp", "ngDialog", "$translate", function (e, t, i, n, r) {
        return new a.chartArgsService(e, t, i, n, r)
    }]).directive("chartArgsUse", ["chartArgsService", "errHint", "$timeout", "$translate", "$rootScope", function (e, t, i, a, r) {
        return new n.chartArgsUseDirective(e, t, i, a, r)
    }])
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = function () {
        function e(e, t, i, n, a) {
            var r = this;
            this.chartArgsService = e, this.errHint = t, this.$timeout = i, this.$translate = n, this.$rootScope = a, this.restrict = "A", this.scope = {
                chartOptions: "=",
                chartMode: "@",
                argViewMeta: "=",
                argSave: "="
            }, this.template = '\n        <div class="pr">\n        <div class="chart-arg-wrap row" ng-repeat="param in argList track by $index" ng-if="param.show" flash-guide="chartArgsEditInnerGuide" fg-show="guideApi.chartArgsEditInnerGuide && $index == 0 && chartMode == \'edit\'">\n            <span class="label-head nowrap">{{param.name}}</span>\n            <div class="display-inline-block" ng-if="param.type === \'number\'">\n                <input type="number" ng-model="param.value" ng-keyup="enterKeyDown($event,param)" ng-blur="enterBlur(param)"/> <span ng-if="param.config.number_type == \'percent\'">%</span>\n            </div>\n            <div class="display-inline-block" ng-if="param.type === \'string\'">\n                <div class="vt" \n                    select-search-list \n                    search-list="argInfoMap[param.param_id]" \n                    select-data="param.value" \n                    need-async="true"\n                    position="relative"\n                    select-click="getParamValues(param.param_id)"\n                    val-change="modifyInnerArg(param)" \n                    show-list-loading="showListLoading"\n                    mode-type="paramType"></div>\n            </div>\n            <div class="display-inline-block" ng-if="param.type === \'date\'">\n                <set-date-value date="param.value" class="display-inline-block" date-verify="dateVerify" mode="{{chartMode}}" position="{{chartMode == \'edit\' ? \'fixed\' : \'\'}}" unlimited-show="false" date-type="param.config.date_type" set-date-back="toSaveArg(param)"></set-date-value>\n            </div>\n            <a class="cursor-pointer pr">\n                <i class="bdp-icon ico-info-sign" ng-mouseover="displayDetail($event, param, true)" ng-mouseleave="displayDetail($event, param, false)"></i>\n            </a>\n        </div>\n        </div>\n    ', this.link = function (e, t, i) {
                var n = function (e, t) {
                    if (13 == e.keyCode) {
                        if (t.originValue == t.value) return;
                        l(t)
                    }
                }, a = function (e) {
                    e.originValue != e.value && l(e)
                }, o = function (e) {
                    if ("date" == e.type || "number" == e.type && "percent" != e.config.number_type) {
                        var t = e.config.range || [];
                        if ("" != t[0] && e.value < t[0]) return r.errHint("参数值需在最大值最小值之间"), !1;
                        if ("" != t[1] && e.value > t[1]) return r.errHint("参数值需在最大值最小值之间"), !1
                    } else if ("number" == e.type && "percent" == e.config.number_type) {
                        var t = e.config.range || [];
                        if ("" != t[0] && e.value < 100 * t[0]) return r.errHint("参数值需在最大值最小值之间"), !1;
                        if ("" != t[1] && e.value > 100 * t[1]) return r.errHint("参数值需在最大值最小值之间"), !1
                    }
                    return !0
                }, s = function () {
                    var t = angular.copy(e.argList), i = [];
                    return t.forEach(function (e) {
                        "string" != e.type && "number" == e.type && "percent" == e.config.number_type && (e.value = Number(e.value), e.value = e.value.div(100));
                        var t = {
                            name: e.name,
                            param_id: e.param_id,
                            value: e.value,
                            display: e.display,
                            type: e.type,
                            is_current: e.is_current,
                            comment: e.comment,
                            default_value: e.default_value
                        };
                        "number" == e.type && (t.config = {
                            range: e.config.range,
                            number_type: e.config.number_type
                        }), "date" == e.type && (t.config = {
                            range: e.config.range,
                            date_type: e.config.date_type
                        }), i.push(t)
                    }), i
                }, l = function (t) {
                    if (o(t)) {
                        var i = s();
                        "edit" === e.chartMode ? (e.argViewMeta.param_setting = i, r.$rootScope.setOperateRecord("chart.op.config.set", [r.$translate.instant("param.chartConfigParam") + "-" + t.name]), console.log("编辑页保存了参数"), e.argSave()) : "dashboard" === e.chartMode ? (e.chartOptions.optional.param_setting = angular.toJson(i), console.log("仪表盘页保存了参数", e.chartOptions.optional)) : "fullscreen" === e.chartMode && (e.chartOptions.optional.param_setting = angular.toJson(i), console.log("单图全屏页保存了参数", e.chartOptions.optional)), window.BDPLogger.log("para_modify", {
                            category: "user_interact",
                            action: "chart_interact",
                            opt_label: JSON.stringify({para_type: t.type, page: e.chartMode})
                        })
                    }
                }, c = function (e) {
                    r.$timeout(function () {
                        e.originValue != e.value && l(e)
                    }, 10)
                }, d = function (e) {
                    var t = [];
                    return e.forEach(function (e) {
                        t.push({key: e, name: e})
                    }), t
                }, u = function (t) {
                    e.argInfoMap[t] || (e.showListLoading = !0, r.chartArgsService.getParamInfo(t).then(function () {
                        e.argInfoMap[t] = d(r.chartArgsService.argInfoMap[t]), e.showListLoading = !1
                    }))
                }, p = function (t, i, n) {
                    if (!n) return void $("#paramInfoPopup").remove();
                    var a = t.currentTarget.getBoundingClientRect(),
                        o = "position:fixed;left:" + (a.left - 260) + "px;top:" + (a.top + 30) + "px;z-index:99999;display:block;";
                    "edit" != e.chartMode ? o = "position:absolute;top:27px;right:0;z-index:99999;display:block" : $(".J-chart-right").css({"z-index": 1e3});
                    var s = "", l = r.$translate.instant("param.default");
                    s = "\n                <div id='paramInfoPopup' style=" + o + ' class="body-func-tip func-tip">\n                    <h5>' + i.name + '</h5>\n                    <div class="offset-top clearfix"><span class="key">' + l + '</span><p class="text">' + i.defaultValDisplay + "</p></div>\n                    " + function (e) {
                        var t = "", i = r.$translate.instant("param.commont"), n = r.$translate.instant("param.minVal"),
                            a = r.$translate.instant("param.maxVal");
                        return e.comment && (t = '<div class="offset-top clearfix"><span class="key">' + i + '</span><p class="text">' + e.comment + "</p></div>"), "string" !== e.type && (t += '\n                        <div class="offset-top clearfix"><span class="key">' + n + '</span><p class="text">' + e.config.minDisplay + '</p></div>\n                        <div class="offset-top clearfix"><span class="key">' + a + '</span><p class="text">' + e.config.maxDisplay + "</p></div>\n                    "), t
                    }(i) + "\n                </div>\n            ", $(t.currentTarget).parent().append(s)
                };
                e.$watch("argViewMeta.param_setting", function (t) {
                    t && t.length > 0 && (e.argList = r.chartArgsService.formatParams(t, e.chartMode))
                }, !0), e.argList = [], e.argInfoMap = {}, e.enterKeyDown = n, e.enterBlur = a, e.modifyInnerArg = l, e.toSaveArg = c, e.getParamValues = u, e.displayDetail = p, e.mode = i.mode, e.dateVerify = !0
            }
        }

        return e
    }();
    t.chartArgsUseDirective = n
}, function (e, t, i) {
    "use strict";
    i(232), i(233), i(234), i(236), angular.module("BC.createField", ["BC.addGroupField", "BC.addCalcField"])
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o, s, l, c) {
            function d(e, t) {
                return "number" == e && "fixed" == t ? 0 : "number" == e && "custom" == t ? 1 : "string" == e && "condition" == t ? 21 : "string" == e && "item" == t ? 22 : "date" == e && "custom" == t ? 3 : "date" == e && "group_year" == t ? 4 : "date" == e && "group_month" == t ? 5 : "date" == e && "group_week" == t ? 6 : "date" == e && "fixed" == t ? 7 : "expression" == t ? 8 : -1
            }

            function u() {
                var t = k[e.selected.field.fid] || [];
                t.length > 0 || e.showLoading ? (e.searchList = t, e.searchListAll = t) : e.fieldRangeMap[e.selected.field.fid] || (e.showLoading = !0, n.post("/api/field/item_search", {
                    tb_id: (e.currentView ? e.currentView.tb_id : e.tb_id) || e.ngDialogData.tb_id,
                    field: angular.toJson(e.selected.field),
                    keyword: ""
                }).then(function (t) {
                    var i = t.result;
                    e.fieldTotalItems = i.total, e.searchList = e.fieldRangeMap[e.selected.field.fid] = i.items, e.searchListAll = e.fieldRangeMap[e.selected.field.fid] = i.items, k[e.selected.field.fid] = i.items, e.showLoading = !1, e.itemEvent.noSearchList()
                }))
            }

            function p(t, i) {
                var n, r = {default_name: e.defaultGroupName};
                if ("expression" === i) n = {type: i, groups: []}; else if ("number" == t) if ("fixed" == i) {
                    n = {type: i, range: []};
                    var o = {
                        fid: e.selected.field.fid,
                        ct_id: e.newField.ct_id,
                        tb_id: e.newField.tb_id,
                        query_for_ct: 1
                    };
                    a.field.getRange(o).success(function (e) {
                        0 == e.status && (n.range[0] = e.result.range[0], n.range[1] = e.result.range[1])
                    })
                } else "custom" == i && (n = {
                    type: i,
                    groups: []
                }); else "string" == t ? ("item" === i && u(), n = {
                    type: i,
                    groups: [],
                    default_name: e.defaultGroupName
                }) : "date" == t && (n = "custom" == i || v(i, "group_") ? {type: i, groups: []} : {
                    type: i,
                    aggregator: "year",
                    start: [],
                    step: ""
                });
                return n && n.groups && n.groups.push(f(t, i)), angular.extend(r, n)
            }

            function f(t, i) {
                var n = {name: e.newGroupPrefix + 1};
                return "expression" === i ? n.expression = "" : "number" == t && "custom" == i ? (n.range = [], n.boundary = [0, 0]) : "string" == t ? i && "condition" !== i || (n.logic = "AND", n.conditions = [], "condition" === i && (n.conditions = [{
                    operator: "0",
                    value: ""
                }])) : "date" == t && (n.range = "group_year" == i ? [1, 1, 1, 1] : "group_month" == i ? [1, 1] : "group_week" == i ? [1, 1] : []), n
            }

            function h() {
                if (e.groupData.info.groups) {
                    for (var t = e.groupData.info.groups, i = 0; i < t.length; i++) if ("" == t[i].name || !t[i].name) return !0;
                    return !1
                }
            }

            function g() {
                if (e.groupData.info.groups) {
                    var t, i = e.groupData.info.groups, n = [];
                    for (t = 0; t < i.length; t++) n.push(i[t].name);
                    for (n = n.sort(), t = 0; t < n.length; t++) if (n[t] == n[t + 1]) return !0;
                    return !1
                }
            }

            function m(e) {
                return e < 10 ? "0" + e : e + ""
            }

            function v(e, t) {
                return !(null == t || "" == t || 0 == e.length || t.length > e.length) && e.substr(0, t.length) == t
            }

            function y(e, t) {
                var i = {"M+": e.getMonth() + 1, "d+": e.getDate()};
                /(y+)/.test(t) && (t = t.replace(RegExp.$1, (e.getFullYear() + "").substr(4 - RegExp.$1.length)));
                for (var n in i) new RegExp("(" + n + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[n] : ("00" + i[n]).substr(("" + i[n]).length)));
                return t
            }

            function b(t, i) {
                if ("pickStart" == t) {
                    for (var n in e.pickStart) n != i && (e.pickStart[n] = !1);
                    e.pickStart[i] = !e.pickStart[i], e.pickEnd = {}
                }
                if ("pickEnd" == t) {
                    for (var a in e.pickEnd) a != i && (e.pickEnd[a] = !1);
                    e.pickEnd[i] = !e.pickEnd[i], e.pickStart = {}
                }
            }

            var _ = e.groupData = angular.copy(e.newField.param) || {type: "group", info: {groups: []}};
            !_.info.default_name && _.info.default && (_.info.default_name = _.info.default, delete _.info.default), "string" === _.data_type && void 0 === _.info.type && (_.info.type = "condition");
            var w = "", x = [], C = "create" == e.newField.type;
            e.LessThen = [{value: 0, text: "<"}, {
                value: 1,
                text: "≤"
            }], e.selectedlist = !0, e.addmanually = !1, e.select = {}, e.selected = {
                field: null,
                dateGroupType: null
            }, e.fieldRangeMap = {}, e.searchList = [], e.searchListAll = [], e.field_list = e.ngDialogData.fieldList, e.fieldList = e.field_list, e.dateList = {
                monthList: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                weekDayList: [1, 2, 3, 4, 5, 6, 7],
                dayList: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31]
            }, e.dayList1 = e.dateList.dayList, e.dayList2 = e.dateList.dayList;
            var k = (e.dateList.dayList, {});
            e.initGroupInfo = function (t) {
                e.itemEvent && (e.itemEvent.keyword = "");
                var i = e.selected.field.data_type;
                t = "date" == i ? t || e.selected.dateGroupType && e.selected.dateGroupType.type || "custom" : "string" == i ? t || "condition" : t || "fixed", _.info.type = t;
                var n = d(i, t);
                e.select = {}, (C || n != e.groupType) && (e.groupType = n, _.info = p(i, t)), _.info.groups && e.selectGroup(_.info.groups[0], i, t)
            }, e.$watch("groupData.info.aggregator", function (t) {
                if ("date" == e.selected.field.data_type && "fixed" == _.info.type) {
                    var i = {
                        fid: e.selected.field.fid,
                        ct_id: e.newField.ct_id,
                        tb_id: e.newField.tb_id,
                        granularity: t,
                        adv_enum_display: 0,
                        query_for_ct: 1
                    };
                    a.field.getRange(i).then(function (i) {
                        0 == i.status && (e.dateRanges = i.result.range, C || w && w != t ? "day" == t ? e.groupData.info.start[1] = e.dateRanges[e.dateRanges.length - 1] : e.groupData.info.start[0] = bdpChart.helper.checkGranularity(t, e.dateRanges[e.dateRanges.length - 1]) : w && w == t && x.length && ("day" == t ? e.groupData.info.start[1] = x[1] : e.groupData.info.start[0] = x[0]))
                    }).finally(function () {
                        e.showLoading = !1
                    })
                }
            }), e.getAggreName = function () {
                for (var t = 0; t < e.aggregators.length; t++) if (e.aggregators[t].type == e.groupData.info.aggregator) return "en" == e.lang && e.groupData.info.step > 1 ? e.aggregators[t].name + "s" : e.aggregators[t].name
            };
            var S = [];
            if (e.checkInvalidNumber = function (t, n) {
                var a = t.target;
                angular.element(a).hasClass("ng-invalid-number") ? (S[n] = !0, i(e.tips["field.invalidNumber"])) : S[n] = !1
            }, e.operatorMap = {
                0: r.instant("equal"),
                1: r.instant("contain"),
                2: r.instant("notContain")
            }, e.logicMap = {
                AND: r.instant("field.meetAll"),
                OR: r.instant("field.meetAny")
            }, e.dateGroupTypeList = [{type: "custom", name: r.instant("field.general")}, {
                type: "group_year",
                name: r.instant("field.yearsGroup")
            }, {type: "group_month", name: r.instant("field.monthsGroup")}, {
                type: "group_week",
                name: r.instant("field.weeksGroup")
            }, {type: "fixed", name: r.instant("field.fixedStep")}, {
                type: "expression",
                name: r.instant("chart.dateFilterExpression")
            }].filter(function (t) {
                return e.isGraftTb ? $.inArray(t.type, ["custom", "expression"]) > -1 : t
            }), e.lang = r.instant("lang"), e.aggregators = [{type: "year", name: r.instant("year")}, {
                type: "quarter",
                name: r.instant("quarter")
            }, {type: "month", name: r.instant("month")}, {type: "week", name: r.instant("week")}, {
                type: "day",
                name: r.instant("day")
            }], e.to = r.instant("field.to"), e.newGroupPrefix = r.instant("field.groupPrefix"), e.itemWithoutGroup = r.instant("field.itemWithoutGroup"), e.defaultGroupName = r.instant("field.defaultGroup"), e.addNewNumberGroup = function (t) {
                for (var t, n = e.groupData.info.groups, a = 0; a < n.length; a++) {
                    var r = n[a];
                    if (r.name || (r.name = e.newGroupPrefix + n.length), 0 == r.range.length || void 0 == r.range[0] && void 0 == r.range[1] || S[0] || S[1]) return void i(e.tips["field.mustBeNumber"]);
                    if (r.range[0] > r.range[1]) return void i(e.tips["field.numberRangeErr"]);
                    void 0 == r.range[0] ? r.range[0] = null : void 0 == r.range[1] && (r.range[1] = null)
                }
                t = {
                    name: e.newGroupPrefix + (_.info.groups.length + 1),
                    range: [],
                    boundary: [0, 0]
                }, _.info.groups.push(t), S = []
            }, e.addNewStringGroup = function () {
                if (!function () {
                    var t = !0;
                    return angular.forEach(e.groupData.info.groups, function (e) {
                        e.name || (t = !1)
                    }), t
                }()) return void i(e.tips["field.nameRequired"]);
                var t = _.info.type, n = _.info.groups, a = {name: e.newGroupPrefix + (n.length + 1), conditions: []};
                if ("condition" === t) {
                    for (var r = 0; r < n.length; r++) for (var o = n[r].conditions, s = 0; s < o.length; s++) {
                        var l = o[s];
                        if (!l.value) return void i(e.tips["field.conditionRequired"])
                    }
                    a.logic = "AND", a.conditions.push({operator: "0", value: ""})
                } else if ("item" === t) for (var r = 0; r < n.length; r++) {
                    var o = n[r].conditions;
                    if (!o.length) return void i(e.tips["field.conditionRequired"])
                }
                n.push(a), e.selectGroup(a, "string", t)
            }, e.addNewDateGroup = function (t) {
                var n, a = e.groupData.info.groups;
                if ("custom" == t) {
                    for (var r = 0; r < a.length; r++) {
                        var o = a[r];
                        if (o.name || (o.name = e.newGroupPrefix + a.length), 0 == o.range.length || void 0 == o.range[0] && void 0 == o.range[1]) return i(e.tips["field.plzChooseLeastOneOfStart_endDate"]), !1
                    }
                    n = {name: e.newGroupPrefix + (_.info.groups.length + 1), range: []}
                } else if ("group_year" == t) {
                    for (var r = 0; r < a.length; r++) {
                        var o = a[r];
                        if (o.name || (o.name = e.newGroupPrefix + a.length), o.range[0] > o.range[2] || o.range[0] == o.range[2] && o.range[1] > o.range[3]) return i(e.tips["field.endDateGtStartDate"]), void(o.range = [1, 1, 1, 1])
                    }
                    n = {name: e.newGroupPrefix + (_.info.groups.length + 1), range: [1, 1, 1, 1]}
                } else if ("group_month" == t) {
                    for (var r = 0; r < a.length; r++) {
                        var o = a[r];
                        if (o.name || (o.name = e.newGroupPrefix + a.length), o.range[0] > o.range[1]) return i(e.tips["field.endDateGtStartDate"]), void(o.range = [1, 1])
                    }
                    n = {name: e.newGroupPrefix + (_.info.groups.length + 1), range: [1, 1]}
                } else if ("group_week" == t) {
                    for (var r = 0; r < a.length; r++) {
                        var o = a[r];
                        if (o.name || (o.name = e.newGroupPrefix + a.length), o.range[0] > o.range[1]) return i(e.tips["field.endDateGtStartDate"]), void(o.range = [1, 1])
                    }
                    n = {name: e.newGroupPrefix + (_.info.groups.length + 1), range: [1, 1]}
                }
                _.info.groups.push(n)
            }, e.addNewExpressionGroup = function () {
                if ("default" !== e.select.group.type && e.select.group && !e.select.group.expression) return void i(e.tips["filter.checkFailed"]);
                var t = {name: e.newGroupPrefix + (_.info.groups.length + 1), expression: ""};
                _.info.groups.push(t), e.selectGroup(t, e.selected.field.data_type, "expression")
            }, e.removeGroup = function (t) {
                var i = e.groupData.info.groups.splice(t, 1);
                i = i[0], angular.toJson(i) == angular.toJson(e.select.group) && (e.groupData.info.groups.length ? e.selectGroup(e.groupData.info.groups[0], e.groupData.data_type, e.groupData.info.type) : e.selectGroup("default"))
            }, e.selectGroup = function (t, n, a) {
                if (e.select.group != t) {
                    if (e.select.group && !e.select.group.name && "default" != e.select.group.type) return void i(e.tips["field.nameRequired"]);
                    if ("default" === t) return e.select.group = {}, e.select.group.name = _.info.default_name, void(e.select.group.type = "default");
                    e.select.group = t;
                    var r = d(n, a);
                    if (21 == r) e.select.group.conditions || (e.select.group.conditions = [], e.select.group.logic = "AND", e.select.group.conditions.push({
                        operator: "0",
                        value: ""
                    })); else if (22 == r) u(), e.select.group.conditions || (e.select.group.conditions = []); else if (8 == r) {
                        e.select.group.expression || (e.select.group.expression = "");
                        var o = new RegExp("\\[_field_id_\\]", "g");
                        e.select.group.expression = e.select.group.expression.replace(o, "[" + e.selected.field.name + "]"), c(function () {
                            e.$broadcast("changeDateExpression", e.select.group.expression)
                        })
                    }
                    e.itemEvent.noSearchList(), e.selectgroup = !1, e.selectedlist = !0
                }
            }, e.addCondition = function (t, n) {
                for (var n, a = t.conditions, r = 0; r < a.length; r++) {
                    if (!a[r].value) return void i(e.tips["field.conditionRequired"])
                }
                n = {operator: "0"}, t.conditions.push(n)
            }, e.sortGroupField = {
                start: function () {
                }, stop: function () {
                }, items: "li:not(.default-group-name)"
            }, e.showDefaultGroup = function () {
                return e.select.group && "default" === e.select.group.type
            }, e.showConditionList = function () {
                return e.select.group && !e.showDefaultGroup()
            }, e.removeCondition = function (e, t) {
                e.splice(t, 1)
            }, e.commit = function () {
                if (o.global.clickComplete = !1, !e.selected.field) return o.global.clickComplete = !0, !1;
                if (0 == e.newField.name.length) return i(e.tips["field.nameRequired"]), void(o.global.clickComplete = !0);
                if (e.newField.name.length > 200) return i(e.tips["field.newFieldNameTooLong"]), void(o.global.clickComplete = !0);
                for (var t = 0; t < e.field_list.length; t++) if (e.field_list[t].name === e.newField.name && e.field_list[t].fid !== e.newField.fid) return i(e.tips["error.fieldRepeat"]), o.global.clickComplete = !0, !1;
                if (h()) return i(e.tips["field.plzCommitAfterCheckGroupName"]), void(o.global.clickComplete = !0);
                if (g()) return i(e.tips["field.groupNameRepeated"]), void(o.global.clickComplete = !0);
                e.groupData.info.default_name || (e.groupData.info.default_name = "zh" == o.language ? "未分组" : "Ungrouped");
                var n, a = function () {
                    return n && 0 != n.length ? n : (i(e.tips["field.atLeastOneGroup"]), !1)
                };
                e.groupData.fid = e.selected.field.fid, e.groupData.data_type = e.selected.field.data_type;
                var r = d(e.groupData.data_type, e.groupData.info.type);
                angular.copy(e.groupData.info);
                switch (n = angular.copy(e.groupData.info.groups), r) {
                    case 0:
                        var s = e.groupData.info.range, l = e.groupData.info.step;
                        if (void 0 == s[0] || void 0 == s[1]) return i(e.tips["field.stepStartAndEnd"]), o.global.clickComplete = !0, !1;
                        if (!l) return i(e.tips["field.stepValueInvalid1"]), o.global.clickComplete = !0, !1;
                        if (!/^-?\d+(\.\d{1,5})?$/.test(+l)) return i(e.tips["field.stepValueInvalid2"]), o.global.clickComplete = !0, !1;
                        break;
                    case 1:
                        if (!n || 0 == n.length) return i(e.tips["field.atLeastOneGroup"]), o.global.clickComplete = !0, !1;
                        for (var t = 0; t < n.length; t++) {
                            var c = n[t];
                            if (0 == c.range.length || void 0 == c.range[0] && void 0 == c.range[1] || S[0] || S[1]) return i(e.tips["field.mustBeNumber"]), void(o.global.clickComplete = !0);
                            if (void 0 != c.range[0] && void 0 != c.range[1] && c.range[0] > c.range[1]) return i(e.tips["field.numberRangeErr"]), void(o.global.clickComplete = !0);
                            void 0 == c.range[0] ? c.range[0] = null : void 0 == c.range[1] && (c.range[1] = null)
                        }
                        break;
                    case 21:
                    case 22:
                        if (!n || 0 == n.length) return i(e.tips["field.atLeastOneGroupItem"]), o.global.clickComplete = !0, !1;
                        for (var u, t = 0, p = n.length; t < p; t++) {
                            if (u = n[t], 0 == u.conditions.length) return i(u.name + " " + e.tips["field.groupConditionRequired"]), o.global.clickComplete = !0, !1;
                            if (u.conditions.length > 1e3) return i(u.name + " " + e.tips["filter.groupItemOver1000"]), o.global.clickComplete = !0, !1
                        }
                        if (21 === r) for (var t = 0, p = n.length; t < p; t++) for (var f = n[t].conditions, v = 0; v < f.length; v++) {
                            var c = f[v];
                            if (!c.value) return i(e.tips["field.conditionRequired"]), void(o.global.clickComplete = !0)
                        }
                        break;
                    case 3:
                        for (var t = 0; t < n.length; t++) {
                            var c = n[t];
                            if (0 == c.range.length || void 0 == c.range[0] && void 0 == c.range[1]) return i(e.tips["field.plzChooseLeastOneOfStart_endDate"]), o.global.clickComplete = !0, !1;
                            if (void 0 != c.range[0] && void 0 != c.range[1] && c.range[0] > c.range[1]) return i(e.tips["field.endDateGtStartDate"]), void(o.global.clickComplete = !0);
                            void 0 == c.range[0] ? c.range[0] = null : c.range[0] = y(new Date(c.range[0]), "yyyy-MM-dd"), void 0 == c.range[1] ? c.range[1] = null : c.range[1] = y(new Date(c.range[1]), "yyyy-MM-dd")
                        }
                        break;
                    case 4:
                        n = a();
                        for (var t = 0; t < n.length; t++) n[t].range[0] = m(n[t].range[0]) + m(n[t].range[1]), n[t].range[1] = m(n[t].range[2]) + m(n[t].range[3]), n[t].range.splice(2, 2);
                        break;
                    case 7:
                        var l = e.groupData.info.step, b = e.groupData.info.aggregator, _ = e.groupData.info.start;
                        if (!l) return i(e.tips["field.stepValueRequired"]), o.global.clickComplete = !0, !1;
                        if (l < 1) return i(e.tips["field.stepValueGtOne"]), o.global.clickComplete = !0, !1;
                        if (!_.length) return i(e.tips["field.plzChooseAStartDate"]), o.global.clickComplete = !0, !1;
                        if ("year" == b || "quarter" == b || "month" == b || "week" == b) {
                            if (!_[0]) return i(e.tips["field.plzChooseAStartDate"]), o.global.clickComplete = !0, !1;
                            _.length > 1 && _.splice(1, 1);
                            var w = _[0].match(/\d+/g);
                            "zh" == e.lang ? angular.extend(_, w) : angular.extend(_, w.reverse())
                        } else {
                            if (!_[1]) return i(e.tips["field.plzChooseAStartDate"]), o.global.clickComplete = !0, !1;
                            _[0] = y(new Date(_[1]), "yyyy-MM-dd"), _.splice(1, 1)
                        }
                        break;
                    case 8:
                    default:
                        if (!(n = a())) return o.global.clickComplete = !0, !1
                }
                var x = angular.copy(e.groupData);
                x.info.groups = n;
                var C = angular.extend(e.newField, {param: x, data_type: "string"});
                e.addCalcField(C)
            }, e.pickStart = {}, e.pickEnd = {}, e.$on("setDate", function (t, i, n) {
                i && "date" == n && (e.pickStart = {}, e.pickEnd = {})
            }), e.fixDatePickerPos = function (t, i, n) {
                b(i, n);
                var a = {left: t.clientX, top: t.clientY}, r = $(t.target).closest(".J-show-date-picker");
                r.length < 1 && $(t.target).hasClass(".J-show-date-picker") && (r = $(t.target)), r.length && (a.left = r.offset().left + 32, a.top = r.offset().top + 24), e.datePickerPos = {
                    left: a.left,
                    top: a.top
                }
            }, e.groupExpression = {
                setExpression: function (t) {
                    e.groupData.info.groups && e.select.group && (e.select.group.expression = t)
                }, expressionChanged: function (t, i) {
                    e.expressionChangedFlag = t, e.groupExpression.setExpression(i)
                }, insertFieldNameToExpression: function (t) {
                    e.expressionChangedFlag = !0, e.$broadcast("insertFieldNameToExpression", t)
                }, checkFormulaGrammar: function (t, a, r) {
                    "" == t && (t = e.selected.field.name), t = bdp.utils.requote(t);
                    var o = new RegExp("\\[" + t + "\\]", "g");
                    e.select.group.expression = e.select.group.expression.replace(o, "[_field_id_]");
                    var s = {
                        tb_id: e.currentView ? e.currentView.tb_id : e.tb_id,
                        fid: a,
                        expression: e.select.group.expression
                    };
                    return e.expressionChangedFlag = !1, n.post("/api/field/group_expr_verify", s, {errHint: !1}).then(function (t) {
                        return 0 == t.status ? (i(e.tips["filter.checkSuccess"]), e.checkFormulaGrammarFlag = !0, !0) : (i(e.tips["filter.checkFailed"]), e.checkFormulaGrammarFlag = !1, !1)
                    })
                }
            }, e.itemEvent = {
                addItem: function (t) {
                    var n = !1, a = $(".add-manually");
                    return $.inArray(t, e.select.group.conditions) > -1 && (n = !0), n ? void i(e.tips["filter.itemExist"]) : e.select.group.conditions.length >= 1e3 ? (i(e.tips["filter.groupItemOver1000"], {dialog: !0}), !1) : (e.select.group.conditions.push(t), "" === a.val() ? a.val(a.val() + t) : a.val(a.val() + "\n" + t), void c(function () {
                        var e = $(".add-list").find("ul"), t = e[0].scrollHeight;
                        e.animate({scrollTop: t}), a.focus()
                    }, 300))
                }, delItem: function (t) {
                    e.select.group.conditions.splice(t, 1), e.nosearch_list = [], e.itemEvent.noSearchList()
                }, addAll: function () {
                    if (e.select.group.conditions.length >= 1e3) return i(e.tips["filter.groupItemOver1000"], {dialog: !0}), !1;
                    angular.forEach(e.searchList, function (t, i) {
                        e.select.group.conditions.indexOf(t) < 0 && e.select.group.conditions.push(t)
                    })
                }, delAll: function () {
                    e.select.group.conditions.length = 0, e.nosearch_list = []
                }, search: function (t) {
                    var i = {
                        tb_id: e.currentView ? e.currentView.tb_id : e.tb_id,
                        field: angular.toJson(e.selected.field),
                        rule_id: o.global.rule_id || "",
                        keyword: t
                    };
                    n.post("/api/field/item_search", i).then(function (t) {
                        0 == t.status && (e.searchList = t.result.items, e.show = !0)
                    })
                }, keyupEvent: function (t, i) {
                    13 === t.keyCode && e.itemEvent.search(i)
                }, mouseLeave: function () {
                    e.show = !1
                }, itemEdit: function () {
                    e.selectedlist = !1, e.addmanually = !0, e.selectgroup = !0;
                    var t = e.select.group.conditions, i = $(".add-manually");
                    i.val(""), setTimeout(function () {
                        i.focus()
                    }, 300);
                    var n = i.val(), a = n.split("\n"), r = 0, o = "";
                    if ("" == n) o += t.join("\n"); else for (var s = 0; s < t.length; s++) {
                        for (var l = 0; l < a.length; l++) a[l] == t[s] && (r = 1);
                        0 === r && (o += "\n" + t[s])
                    }
                    i.val(n + o)
                }, addDone: function () {
                    var t = $(".add-manually").val().split("\n");
                    e.select.group.conditions;
                    if (e.select.group.conditions = [], angular.forEach(t, function (i, n) {
                        e.select.group.conditions.indexOf(i) < 0 && "" !== t[n] && e.select.group.conditions.push(i)
                    }), !(e.select.group.conditions.length <= 1e3)) return i(e.tips["filter.groupItemOver1000"], {dialog: !0}), !1;
                    e.itemEvent.noSearchList(), e.selectedlist = !0, e.addmanually = !1
                }, noSearchList: function () {
                    if (e.nosearch_list = [], "item" === e.groupData.info.type && e.select.group.conditions.length > 0) {
                        if (e.select.group.conditions.length > 1e3) return i(e.tips["filter.groupItemOver1000"], {dialog: !0}), !1;
                        n.post("/api/field/item_validate", {
                            tb_id: e.currentView ? e.currentView.tb_id : e.tb_id,
                            field: angular.toJson(e.selected.field),
                            items: angular.toJson(e.select.group.conditions)
                        }).then(function (t) {
                            var i = t.result;
                            "0" == t.status && angular.forEach(e.select.group.conditions, function (t, n) {
                                i[t] || e.nosearch_list.push(n)
                            })
                        })
                    }
                }
            }, C) {
                e.selected.field = e.fieldList[0];
                var T = e.selected.field.data_type;
                "date" == T && (e.selected.dateGroupType = e.dateGroupTypeList[0]), "string" === T ? e.initGroupInfo("condition") : e.initGroupInfo("custom")
            } else {
                e.groupType = d(_.data_type, _.info.type);
                for (var D = 0, L = e.fieldList.length; D < L; D++) if (_.fid == e.fieldList[D].fid) {
                    e.selected.field = e.fieldList[D];
                    break
                }
                if ("date" == e.selected.field.data_type) {
                    for (var A = 0; A < e.dateGroupTypeList.length; A++) if (e.dateGroupTypeList[A].type == _.info.type) {
                        e.selected.dateGroupType = e.dateGroupTypeList[A];
                        break
                    }
                    var E = _.info.groups;
                    if ("fixed" == _.info.type) {
                        var I = _.info.aggregator, F = _.info.start;
                        if (w = angular.copy(I), "day" !== I && "week" != I) {
                            var O = new Date(F[0] + "-01-01 00:00:00");
                            "quarter" == I ? O.setMonth(3 * F[1] - 1) : "month" == I && O.setMonth(F[1] - 1), F[0] = bdpChart.helper.checkGranularity(I, O.getTime())
                        } else "week" == I ? "zh" == e.lang ? F[0] = F[0] + "年第" + F[1] + "周" : F[0] = "Week " + F[1] + "-" + F[0] : "day" == I && (F[1] = F[0]);
                        x = angular.copy(F)
                    } else if ("group_year" == _.info.type) for (var D = 0; D < E.length; D++) E[D].range[3] = Number(E[D].range[1].substr(2, 2)), E[D].range[2] = Number(E[D].range[1].substr(0, 2)), E[D].range[1] = Number(E[D].range[0].substr(2, 2)), E[D].range[0] = Number(E[D].range[0].substr(0, 2)); else if ("group_month" == _.info.type) for (var D = 0; D < E.length; D++) E[D].range[0] = Number(E[D].range[0]), E[D].range[1] = Number(E[D].range[1])
                }
                e.initGroupInfo(_.info.type)
            }
            s(["field.numberRangeErr", "field.invalidNumber", "field.mustBeNumber", "field.conditionRequired", "field.nameRequired", "field.stepStartAndEnd", "field.stepValueRequired", "field.atLeastOneGroup", "field.atLeastOneGroupItem", "field.groupConditionRequired", "field.newFieldNameTooLong", "field.plzCommitAfterCheckGroupName", "field.groupNameRepeated", "field.stepValueInvalid1", "field.stepValueInvalid2", "field.stepValueGtOne", "field.plzChooseAStartDate", "field.plzChooseLeastOneOfStart_endDate", "field.endDateGtStartDate", "filter.itemExist", "filter.groupItemOver1000", "error.fieldRepeat"], e)
        }

        angular.module("BC.addGroupField", []).controller("FieldGroupController", e), e.$inject = ["$scope", "$stateParams", "errHint", "commonHttp", "commonService", "$translate", "$rootScope", "$jsTipTranslate", "$filter", "$timeout"]
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.addCalcField", []).controller("FormulaEditController", ["$rootScope", "$scope", "dataTypeList", "commonHttp", "chartArgsService", function (e, t, i, n, a) {
            t.func_list = [];
            t.data = {editor: null}, t.fieldArgsList = {active: 0, argsQuery: ""}, t.typeList = i;
            var r = t.field_list = t.ngDialogData.fieldList;
            t.fieldListResult = angular.copy(t.ngDialogData.fieldList), t.fieldListResult = bdp.utils.addSpecParamsToFields(t.fieldListResult), t.fields = [];
            for (var o = 0, s = r.length; o < s; o++) r[o].name && (t.fields[o] = r[o].name);
            t.showLoading = !0, n.get("/api/function/list").then(function (e) {
                if ("0" === e.status) {
                    var i = e.result.classification;
                    t.func_list_result = angular.copy(i[0]), t.func_list = angular.copy(i);
                    var n = {};
                    angular.forEach(i, function (e, t) {
                        n[t] = [], angular.forEach(i[t], function (e, i) {
                            n[t].push({usage: e.usage, description: e.desc, example: e.demo, type: e.name})
                        })
                    }), "wb" == t.newField.module && (n[1] = [], n[0] = [], n[0] = n[0].concat(n[2]).concat(n[3]).concat(n[4]).concat(n[5]).concat(n[6])), t.func_list_result = angular.copy(n[0]), t.func_list = angular.copy(n), t.showLoading = !1
                }
            }), t.paramListLoaded = "chart_edit" !== e.view, t.argListResult = [], a.list({tableId: t.ngDialogData.tableId}).then(function (e) {
                t.argListResult = a.cacheObj.argList, t.paramListLoaded = !0
            }), t.switchFieldAndArgs = function (e) {
                t.fieldArgsList.active = e
            }, t.isClassify = !0, t.search_formula = function (e) {
                if (t.isClassify = !1, t.formula_query) {
                    var i = [];
                    angular.forEach(t.func_list[0], function (e) {
                        e.type.indexOf(t.formula_query) >= 0 || e.type.indexOf(t.formula_query.toUpperCase()) >= 0 ? i.push(e) : (e.description.indexOf(t.formula_query) >= 0 || e.description.indexOf(t.formula_query.toUpperCase()) >= 0) && i.push(e)
                    }), t.func_list_result = i
                } else t.func_list_result = angular.copy(t.func_list[0]);
                t.$$phase || t.$digest()
            }, t.formula_query = "en" == $.cookie("locale") ? "All" : "全部", t.show_classify_list = !1, t.inputQuery = function () {
                t.show_classify_list = !1, t.show_top = !1, angular.element("#function_query").addClass("long")
            }, t.clearContent = function () {
                t.isClassify && (t.formula_query = "", t.isClassify = !1)
            }, t.cancelQuery = function () {
                angular.element("#function_query").removeClass("long"), "" == t.formula_query && (t.formula_query = "en" == $.cookie("locale") ? "All" : "全部", t.isClassify = !0, t.func_list_result = t.func_list[0])
            }, t.showClassify = function (e) {
                t.show_classify_list = !t.show_classify_list, t.show_top = !t.show_top, t.show_classify_list ? angular.element("#function_query").focus() : angular.element("#function_query").blur()
            }, t.selectClassifyItem = function (e) {
                switch (t.isClassify = !0, t.show_classify_list = !1, t.show_top = !1, e) {
                    case 0:
                        t.formula_query = "en" == $.cookie("locale") ? "All" : "全部";
                        break;
                    case 1:
                        t.formula_query = "en" == $.cookie("locale") ? "Aggregate" : "聚合统计";
                        break;
                    case 2:
                        t.formula_query = "en" == $.cookie("locale") ? "Not Aggregate" : "非聚合统计";
                        break;
                    case 3:
                        t.formula_query = "en" == $.cookie("locale") ? "Date and Time" : "日期和时间";
                        break;
                    case 4:
                        t.formula_query = "en" == $.cookie("locale") ? "String" : "字符串";
                        break;
                    case 5:
                        t.formula_query = "en" == $.cookie("locale") ? "Logic" : "逻辑";
                        break;
                    case 6:
                        t.formula_query = "en" == $.cookie("locale") ? "Number" : "数值"
                }
                t.func_list_result = t.func_list[e]
            }, t.cancelSearch = function () {
                t.show_classify_list = !1, t.show_top = !1, angular.element("#function_query").blur()
            }, t.search_field = function (e) {
                if (t.field_query) {
                    var i = [];
                    angular.forEach(t.field_list, function (e) {
                        (e.name.indexOf(t.field_query) >= 0 || e.name.indexOf(t.field_query.toUpperCase()) >= 0) && i.push(e)
                    }), t.fieldListResult = i
                } else t.fieldListResult = angular.copy(t.field_list);
                t.fieldListResult = bdp.utils.addSpecParamsToFields(t.fieldListResult), t.$$phase || t.$digest()
            }, t.add_func_to_formula = function (e) {
                if (!t.data.editor) return !1;
                var i = t.data.editor.getCursor(),
                    n = "COUNT_DISTINCT" === e.type ? "COUNT(DISTINCT())" : e.type + "()",
                    a = i.ch + n.length - ("COUNT_DISTINCT" == e.type ? 2 : 1);
                t.data.editor.replaceSelection(n), t.data.editor.setCursor(i.line, a), t.data.editor.focus()
            }, t.add_field_to_formula = function (e, i) {
                if (!t.data.editor) return !1;
                i ? t.data.editor.replaceSelection("{" + e.name + "}") : t.data.editor.replaceSelection("[" + e.name + "]"), t.data.editor.focus()
            }, t.$on("getFuncByKeyword", function (e, i) {
                t.currFunc = i, t.$$phase || t.$digest()
            }), t.$on("getFuncByArgName", function (e, i) {
                t.currArg = i, t.$$phase || t.$digest()
            })
        }]).directive("bdpFormula", ["formulaDocument", "$timeout", function (e, t) {
            return {
                restrict: "A",
                scope: {editor: "=", fields: "=", argListResult: "=", newField: "="},
                link: function (i, n, a) {
                    function r(t) {
                        return t = t.toUpperCase(), "WHEN" == t ? t = "CASE_WHEN" : "DISTINCT" == t && (t = "COUNT_DISTINCT"), e[t]
                    }

                    function o(e) {
                        for (var t = {}, n = 0; n < i.argListResult.length; n++) if (e === "{" + i.argListResult[n].name + "}") {
                            t = i.argListResult[n];
                            break
                        }
                        return t
                    }

                    function s() {
                        i.editor = l = CodeMirror.fromTextArea(n[0], {
                            mode: "text/x-bdp-formula",
                            indentWithTabs: !0,
                            smartIndent: !0,
                            lineWrapping: !0,
                            matchBrackets: !0,
                            theme: "paraiso-light",
                            fields: i.fields,
                            chartArgsList: i.argListResult.map(function (e) {
                                return e.name
                            }),
                            placeholder: a.p ? "" : "SUM([A]) + SUM([B])"
                        }), l.on("change", function () {
                            i.newField.aggregator = l.getValue().replace(/0xa0/, "")
                        }), c = bdp.utils.throttle(function () {
                            for (var e = l.getCursor(), t = e.ch, n = 0, a = t; a > -1;) {
                                var s = l.getTokenAt({line: e.line, ch: a});
                                if (!s.string) break;
                                if (null == s.type) for (var c = s.string.length; --c > -1;) ")" == s.string.charAt(c) && n++; else if ("keyword" == s.type) {
                                    if (0 == n) {
                                        var d = s.string;
                                        i.$emit("getFuncByKeyword", r(d));
                                        break
                                    }
                                    n--
                                } else if ("chart-args" == s.type) {
                                    if (0 == n) {
                                        i.$emit("getFuncByArgName", o(s.string));
                                        break
                                    }
                                    n--
                                }
                                a -= s.string.length
                            }
                        }, 300), l.on("cursorActivity", c)
                    }

                    var l, c;
                    t(function () {
                        bdp.loadbdpFormula(s)
                    }, 0)
                }
            }
        }]).directive("funcTip", [function () {
            return {
                restrict: "A", link: function (e, t, i) {
                    var n = i.funcTip ? t.closest(i.funcTip)[0] : t.parent().parent()[0];
                    t.hover(function () {
                        if (n) {
                            var e = t[0].offsetTop, i = n.scrollTop, a = $(this).find(".func-tip");
                            a.css({top: e - i - a.outerHeight() / 2 + 14})
                        }
                    })
                }
            }
        }])
    }()
}, function (e, t, i) {
    i(235).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "add-field_762d56c0.css"
}, function (e, t, i) {
    i(237).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "field-list_8e004b0b.css"
}, function (e, t, i) {
    i(239).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "chart-config_7e5d7ac2.css"
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e) {
            return {
                scope: !0, link: function (t, i, n) {
                    i.hover(function (e) {
                        var n = i.find(".chart-info-summary"), r = $(".J-scroll-project").width(), o = e.clientX,
                            s = "-25px";
                        i.parents(".chart-edit-layer").length > 0 && (s = "-8px"), o - r < 200 ? n.css({right: "-200px"}) : n.css({right: s}), BDPLogger.log("chart_operation", {
                            category: "user_interact",
                            action: "chart_interact",
                            opt_label: (0, a.default)({operation_type: "info", ct_id: t.ct_id || ""})
                        })
                    }), t.$on("chart_data_load", function (i, n) {
                        var a = bdpChart.language || "zh", r = n.info;
                        n.data;
                        if (e(function () {
                            "C500" == n.getChartType() ? t.tb_update_time = 1e3 * (Math.max.apply(null, n.views.map(function (e) {
                                return e.info.tb_update_time
                            })) || r.update_time) : t.tb_update_time = 1e3 * r.tb_update_time
                        }), t.width = 50, r.xAxis && (t.xAxis = r.xAxis), r.yAxis) {
                            var o = r.yAxis.concat(r.yAxisOptional || []);
                            if (o.forEach(function (e) {
                                e.row_setting && !$.isEmptyObject(e.row_setting) && o.push(angular.copy(e.row_setting))
                            }), r.tb_statistic && angular.isObject(r.tb_statistic.row_setting) && r.tb_statistic.row) {
                                var s = r.tb_statistic.row_setting;
                                s.name = s.nick_name || ("zh" == a ? "行总计" : "Row Summary"), o.splice(s.pos, 0, s)
                            }
                            t.yAxis = o, angular.forEach(o, function (e) {
                                var i = hz.cutString.getP(e.nick_name || e.name);
                                i > t.width && (t.width = i)
                            })
                        }
                        t.width = Math.min(t.width, 96)
                    })
                }
            }
        }

        angular.module("BC.chartInfoSummary", []).directive("chartInfoSummary", e), e.$inject = ["$timeout"]
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        angular.module("BC.common").service("logService", [function () {
            function e(e, t) {
                n[e] = t || +new Date
            }

            function t(e, t) {
                if (n[e]) {
                    var a = function () {
                        var e = r;
                        e.time = +new Date - o, e.page += "_render", console.log(e), i(e)
                    }, r = t || {}, o = n[e];
                    r.time = +new Date - o, delete n[e], console.log(r), i(r), window.requestAnimFrame(a)
                }
            }

            function i(e) {
                BDPLogger.log("ctrl_first_time", {
                    category: "performance",
                    action: "loading",
                    opt_label: (0, a.default)(e)
                })
            }

            var n = {};
            this.speedTimeLog = {start: e, end: t}
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.common").service("multipleProService", ["commonService", "$q", function (e, t) {
            function i(e, t) {
                var i = {projList: [], dashList: []};
                return angular.forEach(e.subs, function (e) {
                    "project" != e.attribute || !t && e.hidden || i.projList.push(e), "dashboard" != e.attribute || !t && e.hidden || i.dashList.push(e)
                }), i
            }

            function n(e, t) {
                for (var i = t.length - 1; i >= 0; i--) {
                    var a = t[i];
                    if ("project" === a.attribute && a.proj_id === e) return a;
                    if (a.subs && a.subs.length > 0) {
                        var r = n(e, a.subs);
                        if (r) return a.openType = !0, r
                    }
                }
                return null
            }

            function a(e, t, i) {
                for (var n = {mostDeep: t, showDashLen: 0, showProjLen: 0}, r = 0, o = 0, s = 0; s < e.length; s++) {
                    var l, c = e[s];
                    c.deep = t, c.styleVal = {"padding-left": 36 * c.deep + "px"}, c.openType = !1, c.parentId = i, c.subs && c.subs.length > 0 && (l = a(c.subs, t + 1, c.proj_id), n.mostDeep = l.mostDeep > n.mostDeep ? l.mostDeep : n.mostDeep, c.showDashLen = l.showDashLen, c.showProjLen = l.showProjLen), "project" == c.attribute && (c.hidden && (n.showProjLen += 1), r += 1), "dashboard" == c.attribute && (c.hidden && (n.showDashLen += 1), o += 1)
                }
                return n.showProjLen = r - n.showProjLen, n.showDashLen = o - n.showDashLen, n
            }

            function r(e, t) {
                e.forEach(function (e, i, n) {
                    t && (e.parent = t), ("project" == e.attribute || e.subs) && e.subs && e.subs.length > 0 && r(e.subs, e)
                })
            }

            function o(e) {
                function t(e) {
                    delete e.parent, e.subs && e.subs.map(function (e) {
                        t(e)
                    })
                }

                e.map(function (e) {
                    t(e)
                })
            }

            function s(e, t) {
                var i = e.subs;
                e.dsh_id ? t.push(e.dsh_id) : i && angular.forEach(i, function (e) {
                    s(e, t)
                })
            }

            function l(e, t) {
                function i(e, t) {
                    var n = {};
                    return "project" == e.attribute ? ("projLen" == t && a.push(1), angular.forEach(e.subs, function (e) {
                        n.depth = i(e, t)
                    })) : "depth" == t && (n.depth = e.deep), n
                }

                var n;
                if ("depth" == t) n = i(e).depth - e.deep + 1; else if ("projLen" == t) {
                    var a = [];
                    angular.forEach(e, function (e) {
                        i(e, t)
                    }), n = a.length
                }
                return n
            }

            function c(e, t) {
                t[e.proj_id + e.type] = 0, e.parent && c(e.parent, t)
            }

            function d(e, t) {
                var i = e.proj_id;
                if (i && t.push(i), !e.parent) return t;
                d(e.parent, t)
            }

            function u(e, t) {
                var i = e;
                if (i && !$.isEmptyObject(i) && t.push(i), !e.parent) return t;
                u(e.parent, t)
            }

            function p(e, t, i, n) {
                e.proj_id == t && i && i.splice(n, 1);
                var a = e.subs;
                a && a.forEach(function (e, i, n) {
                    p(e, t, n, i)
                })
            }

            function f(e, t) {
                var i;
                if (e) {
                    for (var n = 0; n < t.length; n++) {
                        if (t[n].proj_id == e || t[n].dsh_id == e) {
                            i = t[n];
                            break
                        }
                        if (t[n].subs && (i = f(e, t[n].subs))) return i
                    }
                    return i
                }
            }

            function h(e, t, i) {
                var n;
                if (e) {
                    for (var a = 0; a < t.length; a++) {
                        if (t[a].proj_id == e || t[a].dsh_id == e) {
                            if ("project" == t[a].attribute && (t[a].rule_id && i == t[a].rule_id || !t[a].rule_id && !i)) {
                                n = t[a];
                                break
                            }
                            if ("dashboard" == t[a].attribute && t[a].parent && (t[a].parent.rule_id && i == t[a].parent.rule_id || !t[a].parent.rule_id && !i)) {
                                n = t[a];
                                break
                            }
                        }
                        if (t[a].subs && (n = h(e, t[a].subs, i))) return n
                    }
                    return n
                }
            }

            function g(e, t, i, n, a, r, o) {
                var s = 0, l = t, c = 0;
                !function e(t, n) {
                    for (var a = 0; a < t.length; a++) {
                        var r = t[a];
                        if ("project" === r.attribute) {
                            if (r.proj_id === i) {
                                s = null === n ? a : n;
                                break
                            }
                            r.subs && r.subs.length > 0 && e(r.subs, null !== n ? n : a)
                        }
                    }
                }(l, null), $(".own-project-list > .project-item").each(function (e, t) {
                    e < s && (c += $(t).height())
                }), c += 0, 1 == o && (c = 0), e($(".project-list"), c)
            }

            function m(e, t) {
                var i = "J-folder-icon bdp-icon fl";
                return 0 != e.type || e.property ? e.property || 2 == e.type ? t[e.proj_id + e.type] ? i += " ico-folder-rule" : i += " ico-folder-rule-open" : 1 == e.type && (t[e.proj_id + e.type] ? i += " ico-folder-shared" : i += " ico-folder-shared-open") : t[e.proj_id + e.type] ? i += " ico-folder1" : i += " ico-folder2-open", i
            }

            function v(e, t) {
                e.subs && e.subs.length > 0 && function e(i) {
                    for (var n = 0; n < i.length; n++) {
                        var a = i[n];
                        a.hasOwnProperty("handler_more_show") && (a.handler_more_show = t), "project" === a.attribute && a.subs && a.subs.length > 0 && e(a.subs)
                    }
                }(e.subs)
            }

            this.delPar = o, this.initDeep = a, this.findItem = f, this.findItemWithRuleId = h, this.findParId = d, this.findParObj = u, this.deleteItem = p, this.makeParent = r, this.pushChooseDsh = s, this.openCurFolder = c, this.getSubsByType = i, this.getProjObjById = n, this.getRecursiveParam = l, this.jumpToTargetDashPos = g, this.getChangedFolderIconClassName = m, this.resetChildrenHandlerMoreShow = v
        }]).filter("dashParentsPath", [function (e) {
            return function (e, t) {
                if (!angular.isArray(e)) throw new Error("list must be array.");
                for (var i = 0, n = e.length; i < n; i++) {
                    for (var a = e[i].parents, r = [], o = 0, s = a.length; o < s; o++) r.push(a[o].name);
                    e[i].proj_id && e[i].dsh_id && r.push(e[i].proj_name), e[i].dsh_id && e[i].ct_id && r.push(e[i].dsh_name), e[i].path = r.join(" / ")
                }
                return e
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.common").service("styleService", [function () {
            function e(e) {
                var t = document.createElement("link");
                return t.setAttribute("rel", "stylesheet"), t.setAttribute("type", "text/css"), t.setAttribute("href", e), t
            }

            function t(t, n) {
                for (var a = document.getElementsByTagName("link"), r = !0, o = a.length - 1; o >= 0; o--) if (a[o] && null != a[o].getAttribute("href") && a[o].getAttribute("href") === t) {
                    var s = e(n);
                    a[o].parentNode.replaceChild(s, a[o]), r = !1
                }
                r && i(n)
            }

            function i(t) {
                var i = e(t);
                console.log(t, i), void 0 !== i && document.getElementsByTagName("head")[0].appendChild(i)
            }

            function n(e) {
                for (var t = document.getElementsByTagName("link"), i = t.length - 1; i >= 0; i--) t[i] && null != t[i].getAttribute("href") && t[i].getAttribute("href") === e && t[i].parentNode.removeChild(t[i])
            }

            return {createCssFile: e, replaceCssFile: t, addCssFile: i, deleteCssFile: n}
        }])
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    var a = i(245), r = n(a), o = i(13), s = n(o), l = i(17), c = n(l);
    angular.module("BC.common").factory("ChartOperateStack", ["$q", "commonService", function (e, t) {
        var i = {maxStep: 100, initFrom: "config", undoStack: [], redoStack: [], initialChartData: null};
        return function () {
            function e() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : i;
                (0, s.default)(this, e), t = _.extend(i, t), this.storageKey = "chart_operate_stack_storage", this.undoStack = [], this.redoStack = [], this.maxStep = t.maxStep, this.initialChartData = null, this.initData(t)
            }

            return (0, c.default)(e, [{
                key: "initData", value: function (e) {
                    if ("config" === e.initFrom) this.undoStack = [].concat((0, r.default)(e.undoStack)), this.redoStack = [].concat((0, r.default)(e.redoStack)), this.initialChartData = angular.copy(e.initialChartData); else if (e.initFrom.indexOf("localStorage") > -1) {
                        var t = localStorage.getItem(this.storageKey);
                        if (t) {
                            var i = angular.fromJson(t);
                            this.maxStep = i.maxStep, this.undoStack = i.undoStack, this.redoStack = i.redoStack, this.initialChartData = i.initialChartData, this.firstStepData = i.firstStepData, this.notRecordFirstStep = i.notRecordFirstStep, "localStorage_then_delete" === e.initFrom && localStorage.removeItem(this.storageKey)
                        }
                    }
                }
            }, {
                key: "storage", value: function () {
                    var e = {
                        undoStack: this.undoStack,
                        redoStack: this.redoStack,
                        initialChartData: this.initialChartData,
                        maxStep: this.maxStep,
                        firstStepData: this.firstStepData,
                        notRecordFirstStep: this.notRecordFirstStep
                    };
                    localStorage.setItem(this.storageKey, angular.toJson(e))
                }
            }, {
                key: "redo", value: function () {
                    var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                        i = this.redoStack.slice(this.redoStack.length - t, this.redoStack.length);
                    return this.redoStack.splice(this.redoStack.length - t), Array.prototype.push.apply(this.undoStack, i.reverse().map(function (t, i) {
                        return t.order = e.undoStack.length + i, t
                    })), $.extend({}, this.undoStack[this.undoStack.length - 1], {chartData: angular.fromJson(this.undoStack[this.undoStack.length - 1].chartData)})
                }
            }, {
                key: "undo", value: function () {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                        t = this.undoStack.slice(this.undoStack.length - e, this.undoStack.length);
                    this.undoStack.splice(this.undoStack.length - e), Array.prototype.push.apply(this.redoStack, t.reverse());
                    var i = this.undoStack.length ? this.undoStack[this.undoStack.length - 1] : this.initialChartData;
                    return $.extend({}, i, {chartData: angular.fromJson(i.chartData)})
                }
            }, {
                key: "clearRedoStack", value: function () {
                    this.redoStack.splice(0)
                }
            }, {
                key: "clearUndoStack", value: function () {
                    this.undoStack.splice(0)
                }
            }, {
                key: "clearStack", value: function () {
                    this.clearRedoStack(), this.clearUndoStack()
                }
            }, {
                key: "setInitialData", value: function (e) {
                    this.initialChartData = $.extend({}, {type: ""}, e)
                }
            }, {
                key: "pushUndoStack", value: function (e, t) {
                    if (this.initialChartData) {
                        if (this.undoStack.length + 1 > this.maxStep) {
                            var i = this.undoStack.shift(), n = i.dataInfo;
                            n = angular.fromJson(n), !i.unionInfo && n.length > 1 && this.initialChartData.unionInfo && (i.unionInfo = this.initialChartData.unionInfo), this.initialChartData = i
                        }
                        this.undoStack.push($.extend({}, {
                            order: this.undoStack.length ? this.undoStack[this.undoStack.length - 1].order + 1 : 0,
                            type: e
                        }, t))
                    } else this.initialChartData = $.extend({}, {type: e}, t);
                    this.clearRedoStack()
                }
            }], [{
                key: "replaceMeta", value: function (e, t) {
                    angular.forEach(e, function (t, i) {
                        delete e[i]
                    }), angular.forEach(t, function (t, i) {
                        e[i] = t
                    })
                }
            }, {
                key: "replaceChartData", value: function (t, i) {
                    angular.forEach(t, function (n, a) {
                        "[object Object]" === Object.prototype.toString.call(n) ? angular.isDefined(i[a]) ? e.replaceMeta(t[a], i[a]) : delete t[a] : angular.isArray(n) ? angular.isDefined(i[a]) ? (t[a].splice(0), Array.prototype.push.apply(t[a], i[a])) : delete t[a] : angular.isDefined(i[a]) ? t[a] = i[a] : delete t[a]
                    }), angular.forEach(i, function (e, n) {
                        angular.isDefined(t[n]) || (t[n] = i[n])
                    })
                }
            }]), e
        }()
    }])
}, function (e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(246), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    t.default = function (e) {
        if (Array.isArray(e)) {
            for (var t = 0, i = Array(e.length); t < e.length; t++) i[t] = e[t];
            return i
        }
        return (0, a.default)(e)
    }
}, function (e, t, i) {
    e.exports = {default: i(247), __esModule: !0}
}, function (e, t, i) {
    i(60), i(248), e.exports = i(3).Array.from
}, function (e, t, i) {
    "use strict";
    var n = i(34), a = i(11), r = i(59), o = i(141), s = i(142), l = i(61), c = i(249), d = i(143);
    a(a.S + a.F * !i(144)(function (e) {
        Array.from(e)
    }), "Array", {
        from: function (e) {
            var t, i, a, u, p = r(e), f = "function" == typeof this ? this : Array, h = arguments.length,
                g = h > 1 ? arguments[1] : void 0, m = void 0 !== g, v = 0, y = d(p);
            if (m && (g = n(g, h > 2 ? arguments[2] : void 0, 2)), void 0 == y || f == Array && s(y)) for (t = l(p.length), i = new f(t); t > v; v++) c(i, v, m ? g(p[v], v) : p[v]); else for (u = y.call(p), i = new f; !(a = u.next()).done; v++) c(i, v, m ? o(u, g, [a.value, v], !0) : a.value);
            return i.length = v, i
        }
    })
}, function (e, t, i) {
    "use strict";
    var n = i(6), a = i(25);
    e.exports = function (e, t, i) {
        t in e ? n.f(e, t, a(0, i)) : e[t] = i
    }
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, n) {
            return {
                restrict: "EA",
                templateUrl: i(251),
                replace: !0,
                scope: {
                    mode: "=",
                    position: "=",
                    ableOptBtn: "=",
                    ableSearch: "=",
                    ableSelectAll: "=",
                    ableSelectOnly: "=",
                    ableListApi: "=",
                    checkBox: "=",
                    radioBox: "=",
                    defaultPlaceHolder: "=",
                    matchWith: "=",
                    saveData: "=",
                    valList: "=",
                    loadingAni: "=",
                    okCallback: "&",
                    cancelCallback: "&",
                    itemCallback: "&",
                    isDisabled: "=",
                    listQueryApi: "&",
                    listItemApi: "&",
                    parentData: "="
                },
                link: function (i, a, r) {
                    function o(e, t) {
                        if (i.layerViewData.isDisabled) return !1;
                        i.layerViewData.showLayerFlag = void 0 != t ? t : !i.layerViewData.showLayerFlag, l(), d(e)
                    }

                    function s(e) {
                        var t = [], n = 0, a = "id" == i.layerViewData.matchWith ? C : k, r = [];
                        r = "string" == typeof i.layerViewData.saveData.ids ? i.layerViewData.saveData.ids.split(",") : i.layerViewData.saveData.ids, (r || []).forEach(function (i) {
                            e.forEach(function (e) {
                                i == e[a] && (e.selected = !0, n++, t.push(e[C]))
                            })
                        }), i.layerViewData.selectAll = e.length == n, i.layerViewData.displayData.id = t
                    }

                    function l() {
                        i.layerViewData.searchQueryText = "", i.layerViewData.isDoingQuery = !1, i.layerViewData.showSelected = !1, c(s), m()
                    }

                    function c(e) {
                        if (i.layerViewData.showLayerFlag) if (i.layerViewFunc.hasOwnProperty("listItemApi") && i.layerViewData.parentData) i.layerViewData.loadingAni = !0, i.layerViewFunc.listItemApi({data: i.layerViewData.parentData}).then(function (t) {
                            i.layerViewData.loadingAni = !1;
                            var n = t.range;
                            e(n), i.layerViewData.valList = n, i.layerViewData.valListTotal = t.total, i.layerViewData.valListBackup = angular.copy(n), i.layerViewData.showLen = t.length
                        }); else {
                            var t = i.valList;
                            e(t), i.layerViewData.valList = t, i.layerViewData.valListBackup = angular.copy(t), i.layerViewData.showLen = t.length
                        }
                    }

                    function d(t) {
                        var n = i.layerViewData.position, a = i.layerViewData.showLayerFlag;
                        if ("fixed" == n) {
                            var r = angular.element(t.target);
                            r = r.hasClass("bdp-icon") ? r.parents(".select-search-value:first") : r;
                            var o = r.parents(".select-search-value:first");
                            o = 0 == o.length ? r : o;
                            var s = r.offset(), l = o.next(".search-list-box");
                            if (a) {
                                var c = s.top + r.closest(".select-search-list-wrap").height();
                                l.css({position: "fixed", top: c, left: s.left, width: o.width() + 16}), e(function () {
                                    var e = document.documentElement.clientHeight || document.body.clientHeight,
                                        t = l[0].getBoundingClientRect().height;
                                    t + s.top > e && l.css("top", s.top - t)
                                })
                            } else l.css({top: "-9999px", left: "-9999px"})
                        }
                    }

                    function u(e) {
                        function t(e, t) {
                            return e.toLowerCase().indexOf(t.toLowerCase()) >= 0
                        }

                        var n = i.layerViewData.searchQueryText, a = i.layerViewData.valList, r = 0;
                        _.forEach(a, function (i) {
                            e && "showSelected" == e.mode ? i.show = n ? t(i[k], n) && i.selected : i.selected : (i.show = !n || t(i[k], n), i.show = t(i[k], n)), r = i.show ? ++r : r
                        }), i.layerViewData.showLen = r, i.layerViewData.selectAll = !!r && r == a.length, m()
                    }

                    function p() {
                        var e = i.layerViewData.searchQueryText, t = i.layerViewData.valList,
                            n = i.layerViewData.selectAll;
                        t.forEach(function (t) {
                            t.selected = e ? t.show ? n : t.selected : n
                        })
                    }

                    function f() {
                        var e = i.layerViewData.searchQueryText, n = i.layerViewData.valList, a = !1;
                        if (n.forEach(function (t) {
                            a = e ? !(!t.show || !t.selected) || a : !!t.selected || a
                        }), !a && !i.layerViewData.showSelected) return t("当前未选择任意一项"), !1;
                        i.layerViewData.showSelected = !i.layerViewData.showSelected, u({mode: i.layerViewData.showSelected ? "showSelected" : ""})
                    }

                    function h(e) {
                        if (!e) return !1;
                        13 === e.keyCode ? (u({mode: i.layerViewData.showSelected ? "showSelected" : ""}), i.layerViewData.isDoingQuery = !0) : "" === i.layerViewData.searchQueryText && (i.layerViewData.isDoingQuery = !1)
                    }

                    function g(t, n) {
                        t && t.stopPropagation();
                        var a = i.layerViewData.valList;
                        if (i.layerViewData.ableOptBtn && i.layerViewData.ableSelectAll) m(); else if (n.value) {
                            var a = i.layerViewData.valList;
                            a[a.length - 1].value || (a[a.length - 1].selected = !1), b(), i.saveData = i.layerViewData.displayData.id, i.layerViewData.saveData.ids = i.layerViewData.displayData.id
                        } else {
                            var r = [""];
                            _.forEach(a, function (e) {
                                e.value ? e.selected = !1 : e.selected = !0
                            }), i.layerViewData.saveData.ids = r, i.saveData = r, b()
                        }
                        i.layerViewData.itemCallback && e(function () {
                            i.layerViewData.itemCallback()
                        })
                    }

                    function m() {
                        var e = i.layerViewData.searchQueryText, t = i.layerViewData.valList,
                            n = i.layerViewData.showSelected, a = 0, r = 0;
                        i.layerViewData.selectAll = !1, _.forEach(t, function (t) {
                            e || n ? (r = t.selected && t.show ? ++r : r, a = t.show ? ++a : a) : (r = t.selected ? ++r : r, a++)
                        }), i.layerViewData.selectAll = !!a && a == r
                    }

                    function v() {
                        b(), i.saveData = i.layerViewData.displayData.id, i.layerViewData.saveData.ids = i.layerViewData.displayData.id, i.layerViewData.showLayerFlag = !i.layerViewData.showLayerFlag
                    }

                    function y() {
                        i.layerViewData.showLayerFlag = !i.layerViewData.showLayerFlag, w()
                    }

                    function b() {
                        var e = i.layerViewData.valList, t = _.filter(e, function (e) {
                            return !!e.selected
                        });
                        i.layerViewData.displayData = {id: _.map(t, C), text: _.map(t, k).join(";")}
                    }

                    function w() {
                        i.layerViewData.valList = angular.copy(i.layerViewData.valListBackup)
                    }

                    var x = $.cookie("locale") || "zh", C = "_multi_list_id_", k = "_multi_list_text_",
                        S = "en" == x ? "Select" : "请选择";
                    !function () {
                        i.layerViewData = {
                            customID: C,
                            customText: k,
                            defaultPlaceHolder: i.defaultPlaceHolder || S,
                            mode: i.mode,
                            isDisabled: i.isDisabled,
                            ableOptBtn: i.ableOptBtn,
                            ableSearch: i.ableSearch,
                            ableSelectAll: i.ableSelectAll,
                            ableSelectOnly: i.ableSelectOnly,
                            ableListApi: i.ableListApi,
                            position: i.position,
                            checkBox: i.checkBox,
                            radioBox: i.radioBox,
                            matchWith: i.matchWith,
                            parentData: i.parentData,
                            loadingAni: i.showLoading,
                            saveData: {ids: i.saveData || []},
                            valList: [],
                            valListTotal: 0,
                            valListBackup: angular.copy(i.valList),
                            valListSelected: [],
                            okCallback: i.okCallback,
                            cancelCallback: i.cancelCallback,
                            itemCallback: i.itemCallback,
                            searchQueryText: "",
                            showLayerFlag: !1,
                            displayData: {id: "", text: ""},
                            showLen: i.valList.length || 0,
                            selectAll: !1,
                            showSelected: !1,
                            isDoingQuery: !1
                        }, i.layerViewFunc = {
                            listQueryApi: i.listQueryApi,
                            listItemApi: i.listItemApi,
                            toggleList: o,
                            doQuery: h,
                            chooseItem: g,
                            okFunc: v,
                            cancelFunc: y,
                            selectAllItems: p,
                            showSelectedItems: f
                        }
                    }(), i.$watch(function () {
                        return i.layerViewData.saveData
                    }, function (t) {
                        if (!t || !t.ids) return !1;
                        var a = [];
                        a = "string" == typeof t.ids ? t.ids.split(",") : t.ids;
                        var r = n.instant("chart.noneOfCol");
                        switch (a = _.uniq(a), i.layerViewData.mode) {
                            case"field-item":
                                e(function () {
                                    i.layerViewData.displayData.text = a.join(";")
                                });
                            default:
                                var o = [], s = i.layerViewData.valList;
                                s.length || (s = i.valList), s.forEach(function (e) {
                                    a.forEach(function (t) {
                                        e[C] && e[C] == t && o.push(e[k])
                                    })
                                }), i.layerViewData.displayData.text = o.join(";") || r
                        }
                    }), i.$watch(function () {
                        return i.isDisabled
                    }, function (e) {
                        void 0 != e && (i.layerViewData.isDisabled = e)
                    })
                }
            }
        }

        angular.module("BC.common").directive("multiSelectListLayer", e), e.$inject = ["$timeout", "errHint", "$translate"]
    }()
}, function (e, t) {
    e.exports = "/dist/static/common/tpl/multi-select-list-layer.html"
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        angular.module("BC.common").directive("dependeceList", ["$rootScope", "$timeout", "$jsTipTranslate", "commonService", "ngDialog", function (e, t, i, n, a) {
            return {
                restrict: "A", replace: !1, scope: {tbId: "=", field: "="}, link: function (e, t, i) {
                    t.on("click.dependecceList", function (t) {
                        t.preventDefault(), a.open({
                            template: "/static/common/dependence/dependence.html",
                            className: "ngdialog-theme-default ngDialog-width-680",
                            scope: e,
                            controller: "dependeceCtr"
                        })
                    })
                }
            }
        }]).controller("dependeceCtr", ["$scope", "commonService", "ngDialog", "errHint", function (e, t, i, n) {
            function r() {
                var i = {field_id: e.field.fid, title: e.field.title ? e.field.title : "title"},
                    r = {check_field: (0, a.default)(i), tb_id: e.tbId};
                t.field.dependency(r).then(function (t) {
                    0 == t.status ? t.result.length > 0 ? (e.dependenceChart = t.result[0].chart, e.dependenceWb = t.result[0].tbs, e.dependenceMl = t.result[0].ml) : e.noDepnedece = !0 : n(t.errstr)
                })
            }

            !function () {
                e.noDepnedece = !1, r()
            }(), e.close = function () {
                i.closeAll()
            }
        }])
    }()
}, function (e, t, i) {
    i(254).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "dependence_c8c7f577.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.common").service("chooseAdminService", ["$rootScope", "commonService", "$translate", function (e, t, i) {
            function n(e) {
                var t = e, i = {}, n = [];
                return t.map(function (e) {
                    e.user_id = e.user_id ? e.user_id : e.userid, i[e.user_id] = !0, n.push(e.user_id)
                }), {
                    addList: t,
                    originAddList: angular.copy(t),
                    addUserMap: i,
                    originalAddList: n,
                    showAddNum: t.length
                }
            }

            function a(e) {
                return t.account.userList().then(function (t) {
                    if (0 == t.status) {
                        var n = [];
                        e && (n = [{
                            name: i.instant("ownership.allUser"),
                            user_id: "all",
                            userid: "all",
                            username: "all"
                        }]);
                        var a = [];
                        return t.result && t.result.length > 0 && (a = n.concat(t.result), a.map(function (e) {
                            e.user_id = e.user_id ? e.user_id : e.userid
                        })), l(a), {wholeList: a, originWholeList: angular.copy(a), showWholeNum: a.length}
                    }
                })
            }

            function r(e, t) {
                var i = [];
                return e.map(function (e) {
                    t[e.user_id] || i.push(e)
                }), {wholeList: i, originWholeList: angular.copy(i), showWholeNum: i.length}
            }

            function o(e, t, i) {
                var n = e.wholeList;
                "del" == i && angular.forEach(n, function (e, i) {
                    e.user_id == t.user_id && n.splice(i, 1)
                }), "del_all" == i && (n = []), "del_query_all" == i && angular.forEach(t, function (e) {
                    angular.forEach(n, function (t, i) {
                        t.user_id == e && n.splice(i, 1)
                    })
                }), "add" == i && n.push(t), "add_all" != i && "add_query_all" != i || (n = n.concat(t)), e.wholeList = n, e.originWholeList = angular.copy(n), e.showWholeNum = n.length
            }

            function s() {
                return angular.copy(d)
            }

            function l(e) {
                d = e
            }

            function c() {
                d = null
            }

            var d = null;
            this.prepareData = n, this.getPrevClearList = r, this.getUserList = a, this.getUserListCache = s, this.clearUserListCache = c, this.updateWholeList = o
        }]).filter("chooseAdminSearch", [function () {
            return function (e, t) {
                function i(e, t) {
                    return !!e && e.toString().toLowerCase().indexOf(t.toLowerCase()) >= 0
                }

                var n = 0;
                return angular.forEach(t, function (t) {
                    e ? (t.queryShow = !!i(t.name, e) || !!i(t.username, e), n = t.queryShow ? ++n : n) : (t.queryShow = !0, n++)
                }), {list: t, showNum: n}
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    var a = i(40), r = n(a), o = i(13), s = n(o), l = i(17), c = n(l);
    !function () {
        angular.module("BC.common").service("bdpOuterParamService", ["$rootScope", "commonService", "$translate", function (e, t, i) {
            return function () {
                function e(t) {
                    (0, s.default)(this, e), this.mode = t, this.paramExtendObj = {}, this.updateTimes = {}
                }

                return (0, c.default)(e, [{
                    key: "_setUrlObj", value: function (e) {
                        if (e && e.toString().length > 1) {
                            e = e.split("#/")[0];
                            try {
                                this.paramExtendObj = JSON.parse(e)
                            } catch (t) {
                                e = e.substring(1, e.length - 1), this.paramExtendObj = JSON.parse(e)
                            }
                            this.mode = "url", console.log(this.paramExtendObj)
                        }
                    }
                }, {
                    key: "getUrlObj", value: function () {
                        return this.paramExtendObj
                    }
                }, {
                    key: "isHit", value: function () {
                        return !!this.paramExtendObj && !$.isEmptyObject(this.paramExtendObj)
                    }
                }, {
                    key: "parseUrlParam", value: function () {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "extend",
                            t = new RegExp("([?]|&)" + e + "=([^&]*)(&|$)"), i = window.location.href.match(t);
                        if (i) {
                            var n = decodeURIComponent(i[2]);
                            return this._setUrlObj(n), n
                        }
                        return null
                    }
                }, {
                    key: "setUpdateTimes", value: function (e, t) {
                        this.updateTimes[e] = t
                    }
                }, {
                    key: "getUpdateTimes", value: function (e) {
                        return this.updateTimes[e] || 0
                    }
                }, {
                    key: "matchGlobalFilter", value: function (e) {
                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = [],
                            n = this.paramExtendObj.filter_list || [];
                        return e && e == this.paramExtendObj.dsh_id && _.forEach(n, function (e) {
                            t.df_id == e.df_id && (t.range = e.range, i.push(t.df_id))
                        }), i
                    }
                }, {
                    key: "matchDashFilter", value: function (e, t) {
                        var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [], n = this, a = [],
                            r = this.paramExtendObj.filter_list || [];
                        return this.paramExtendObj.ct_id == t && _.forEach(r, function (e) {
                            _.forEach(i, function (t) {
                                if (e.fid == t.fid && e.uniq_id == t.uniq_id) {
                                    var i = n._combineFilterData(t, e);
                                    a.push(i)
                                }
                            })
                        }), {ct_id: a.length ? t : "", list: a}
                    }
                }, {
                    key: "findGlobalFilter", value: function (e) {
                        this.mode = "websocket", this.paramExtendObj = e.paramData;
                        var t = e.globalFilters, i = e.param, n = [];
                        _.forEach(t, function (e) {
                            _.forEach(i.filter_list, function (t) {
                                e.df_id == t.df_id && i.is_df && (e.range = t.range, n.push(e.df_id))
                            })
                        }), e.callback(n)
                    }
                }, {
                    key: "findDashFilter", value: function (e) {
                        var t = this, i = !1;
                        this.mode = "websocket", this.paramExtendObj = e.paramData;
                        var n = e.param, a = e.dashItems, r = e.drawChartUrl;
                        _.forEach(a, function (e) {
                            var a = e.children[0].meta, o = e.children[0].dom_id, s = r[o] && r[o].options;
                            if (s && a.ct_id == n.ct_id) {
                                var l;
                                !function () {
                                    var e = a.filter_list_inner || [], r = [];
                                    _.forEach(e, function (e) {
                                        _.forEach(n.filter_list, function (i) {
                                            if (i.fid == e.fid && i.uniq_id == e.uniq_id) {
                                                var n = t._combineFilterData(e, i);
                                                r.push(n)
                                            }
                                        })
                                    }), r.length && ("C500" == a.chart_type ? (l = {}, r.forEach(function (e) {
                                        l[e.ct_id] || (l[e.ct_id] = []), l[e.ct_id].push(e)
                                    }), s.optional.filter_list_map = l) : s.optional.filter_list = r, i = !0)
                                }()
                            }
                        }), e.callback(i)
                    }
                }, {
                    key: "_combineFilterData", value: function (e, t) {
                        var i = $.extend({}, e, {range: t.range, granularity: t.granularity || ""}), n = t.range;
                        if ("string" == t.data_type && (n.length >= 2 && (i.inner_adv_type = "exact", i.is_defined = !0), 1 == n.length)) try {
                            if ("object" == (0, r.default)(JSON.parse(n[0]))) {
                                JSON.parse(n[0]) instanceof Array && (i.inner_adv_type = "exact", i.is_defined = !0)
                            }
                        } catch (e) {
                        }
                        return i
                    }
                }]), e
            }()
        }])
    }()
}, function (e, t, i) {
    "use strict";
    angular.module("BC.common").directive("pagination", ["commonService", "errHint", "$jsTipTranslate", function (e, t, n) {
        return {
            restrict: "A",
            templateUrl: i(258),
            scope: {currPage: "=", totalPage: "=", onCommit: "&"},
            link: function (e) {
                e.pageListPos = function (e) {
                    var t = $(e.target).offset(), i = $(window).height(), n = 30;
                    i - t.top < 110 && (n = -80), $(".page-list").css({top: n}), e.stopPropagation()
                }, e.goToFirstPage = function () {
                    1 == e.currPage ? t(e.tips["pagination.isAlreadyFirstPage"]) : (e.currPage = 1, e.onCommit({page: e.currPage}))
                }, e.goToLastPage = function () {
                    e.currPage == e.totalPage ? t(e.tips["pagination.isAlreadyLastPage"]) : (e.currPage = e.totalPage, e.onCommit({page: e.currPage}))
                }, e.goToPrevPage = function () {
                    1 == e.currPage ? t(e.tips["pagination.isAlreadyFirstPage"]) : (e.currPage--, e.onCommit({page: e.currPage}))
                }, e.goToNextPage = function () {
                    e.currPage == e.totalPage ? t(e.tips["pagination.isAlreadyLastPage"]) : (e.currPage++, e.onCommit({page: e.currPage}))
                }, n(["pagination.isAlreadyFirstPage", "pagination.isAlreadyLastPage"], e)
            }
        }
    }])
}, function (e, t) {
    e.exports = "/dist/static/common/tpl/pagination.html"
}, function (e, t, i) {
    "use strict";
    angular.module("BC.common").directive("resizeWidthChartSidebar", [function () {
        return {
            restrict: "A",
            replace: !1,
            scope: !0,
            template: '\n                 <span class="drag-btn-wrap">\n                    <i class="bdp-icon ico-triangle-right ico-no-opacity" ng-if="!!isHidden"></i>\n                    <i class="bdp-icon ico-triangle-left ico-no-opacity" ng-if="!isHidden"></i>\n                 </span>   \n            ',
            link: function (e, t, i) {
                var n = i.mode;
                e.isHidden = !1, t.off("click.resizeWidthChartSideBar-" + n).on("click.resizeWidthChartSideBar-" + n, function (i) {
                    var a = $(".chart-left"), r = $(".chart-main"), o = $(".J-chart-right"), s = 0;
                    if (t.parent().find(".bdp-chart-error").length) return !1;
                    e.isHidden = !e.isHidden, "left" == n ? (s = e.isHidden ? 0 : 220, a.css({width: s + "px"}), r.css({"margin-left": s + "px"}), t.css({
                        left: s + "px",
                        right: "auto"
                    })) : "right" == n && (s = e.isHidden ? 0 : 320, o.css({width: s + "px"}), r.css({"margin-right": s + "px"}), t.css({
                        left: "auto",
                        right: s + "px"
                    })), e.$apply(function () {
                        e.draw_chart_url.options._t = (new Date).getTime()
                    })
                })
            }
        }
    }]).directive("resizeWidthFilterList", [function () {
        return {
            restrict: "A", replace: !1, link: function (e, t, i) {
                t.on("mousedown", function (i) {
                    var n = $(".chart-left-side"), a = $("#chartBox"), r = i.pageX - n.outerWidth();
                    i.preventDefault(), $(document).on("mousemove", function (e) {
                        var i = e.pageX - r;
                        i = Math.max(172, i), i = Math.min(300, i), n.css("width", i + "px"), a.css("left", i + "px"), t.css("left", i + "px")
                    }), $(document).on("mouseup", function (t) {
                        $(document).off("mousemove"), $(document).off("mouseup"), e.$apply(function () {
                            e.draw_chart_url.options._t = (new Date).getTime()
                        })
                    })
                })
            }
        }
    }]).directive("resizeProjectList", ["$timeout", function (e) {
        return {
            link: function (t, i, n) {
                var a = t.$eval(n.isDashManage);
                if (localStorage) {
                    var r = localStorage.getItem("project_width");
                    a && (r = 220), r && !a && e(function () {
                        $(".J_dash_sidebar").css("width", r + "px"), $(".J_dash_edit_content").css("padding-left", r + "px"), angular.element(".item-chart").each(function () {
                            reflowChart(angular.element(this), !0)
                        })
                    }, 0)
                }
                i.on("mousedown", function (i) {
                    var n = $(".J_dash_sidebar"), r = $(".J_dash_edit_content"), o = i.pageX - n.outerWidth();
                    a && (n = $(".J-tree-wrapper"), r = $(".J-project-info-wrapper"), o = i.pageX - n.outerWidth()), i.preventDefault(), $(document).on("mousemove.drag_project", function (e) {
                        var t = e.pageX - o;
                        t = Math.max(190, t), t = Math.min(300, t), n.css("width", t + "px"), a ? r.css("left", t + "px") : (r.css("padding-left", t + "px"), $(".global-filter-scroll").css("margin-left", t + 24 + "px"))
                    }), $(document).on("mouseup.drag_project", function (i) {
                        a && !t.$$phase && (t.$apply(), e(function () {
                            angular.element(".item-chart").each(function () {
                                reflowChart(angular.element(this), !0)
                            })
                        }, 0)), localStorage && localStorage.setItem("project_width", n.width()), $(document).off("mousemove.drag_project"), $(document).off("mouseup.drag_project")
                    })
                })
            }
        }
    }]).directive("resizeMergeTable", function () {
        return {
            restrict: "A", link: function (e, t, i) {
                var n = i.leftSelector, a = i.rightSelector;
                if (localStorage) {
                    var r = localStorage.getItem("ds_tree_width");
                    r && (r >>>= 0, setTimeout(function () {
                        $(n).css("width", r + "px"), $(a).css("margin-left", r + 1 + "px")
                    }, 10))
                }
                t.on("mousedown", function (e) {
                    var t = $(n), i = $(a), r = e.pageX - t.outerWidth();
                    e.preventDefault(), $(document).on("mousemove.drag_data_source", function (e) {
                        var n = e.pageX - r;
                        n = Math.max(100, n), n = Math.min(300, n), t.css("width", n + "px"), i.css("margin-left", n + 1 + "px")
                    }), $(document).on("mouseup.drag_data_source", function (e) {
                        localStorage && localStorage.setItem("ds_tree_width", t.width()), $(document).off("mousemove.drag_data_source"), $(document).off("mouseup.drag_data_source")
                    })
                })
            }
        }
    })
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.common").directive("advanceDataFormula", ["$timeout", function (e) {
            return {
                scope: {expressionContent: "=", onBlur: "&", onKeyUp: "&"}, link: function (t, i, n) {
                    function a() {
                        r = CodeMirror.fromTextArea(i[0], {
                            mode: "text/x-bdp-sql",
                            indentWithTabs: !0,
                            smartIndent: !0,
                            lineWrapping: !0,
                            matchBrackets: !0,
                            readOnly: !!o && "nocursor",
                            theme: "paraiso-light",
                            autofocus: !o,
                            extraKeys: {"Ctrl-Space": "autocomplete"}
                        }), e(function () {
                            void 0 != t.expressionContent && r.setValue(t.expressionContent)
                        }, 200), r.on("blur", function () {
                            var e = r.getValue().replace(/0xa0/, "");
                            t.onBlur({content: e})
                        }), r.on("keyup", function () {
                            var e = r.getValue().replace(/0xa0/, "");
                            t.onKeyUp({flag: !0, content: e})
                        })
                    }

                    var r, o = !!n.readonly;
                    bdp.loadbdpFormula(a), t.$on("changeDateExpression", function (e, t) {
                        r && r.setValue(t)
                    }), t.$on("insertFieldNameToExpression", function (e, t) {
                        if (defined(t)) {
                            var i = "[" + t + "]", n = r.getCursor();
                            r.replaceSelection(i), r.setCursor(n.line + 1, n.ch + i.length), r.focus()
                        }
                    })
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return {
            restrict: "A", link: function (e, t, i) {
                var n = i.funcTip ? t.closest(i.funcTip)[0] : t.parent().parent()[0];
                t.hover(function () {
                    if (n) {
                        var e = t.offset(), i = t.width(), a = (t.height(), $(this).find(".func-tip")),
                            r = (a.offset(), a.outerHeight()), o = $(window).height(), s = {left: e.left + i + 10};
                        e.top + r / 2 - 10 < o ? s.top = e.top - a.outerHeight() / 2 - 10 : s.top = o - a.outerHeight(), a.css(s)
                    }
                })
            }
        }
    }

    function a(e) {
        return {
            templateUrl: i(262),
            link: function (e, t) {
            },
            replace: !0,
            scope: {tbList: "=", expressionData: "=", hasBtn: "=", multipleTb: "="},
            controller: "expressionFilterCtrl"
        }
    }

    function r(e, t, i, n, a, r, o) {
        function s(e) {
            if (0 == t.tbList.length) h.curTb = void 0, h.sql = "", t.expressionData = {}, c(""); else {
                var i = [];
                angular.forEach(t.expressionData, function (n, a) {
                    l(a) ? e && e.isReplace && e.isReplace == a && delete t.expressionData[a] : (i.push(a), delete t.expressionData[a])
                }), i.indexOf(h.curTb) > -1 && (c(t.tbList[0].tb_id), t.tbList[0].open = !0)
            }
        }

        function l(e) {
            for (var i = t.tbList, n = !1, a = 0; a < i.length; a++) if (i[a].tb_id == e) {
                n = !0;
                break
            }
            return n
        }

        function c(e) {
            h.curTb = e, h.sql = t.expressionData[e] || "", t.updataSqlVal && t.updataSqlVal()
        }

        function d(e) {
            if (0 != t.tbList.length) return e ? void angular.forEach(t.tbList, function (t) {
                t.open = !1, t.tb_id == e && (t.open = !0)
            }) : void(t.tbList[0].open = !0)
        }

        var u;
        t.viewData = {tab: 1, funcList: [], sql: "", curTb: u || ""};
        var p = e.$watch("global.funcList", function (e) {
            e && (t.viewData.funcList = e.base)
        });
        t.$on("$destroy", function () {
            p()
        }), t.expressionData = t.expressionData || {}, t.$on("initTbList", function (e, i) {
            if (0 != t.tbList.length) {
                var n = i;
                i || (n = t.tbList[0].tb_id), c(n), d(n), t.$broadcast("updateTbList")
            }
        }), t.$on("updateTbList", function (e, i) {
            s(i), t.tbList && t.tbList.length > 0 && t.tbList.forEach(function (e, t) {
                e.fields = bdp.utils.addSpecParamsToFields(e.fields)
            })
        });
        var f = t.$watch("tbList", function (e) {
            e && (t.$broadcast("initTbList"), f())
        }), h = t.viewData;
        h.tbList = t.tbList, t.tbList && t.tbList.length > 0 && (u = t.tbList[0].tb_id, t.tbList[0].open = !0, h.curTb = t.tbList[0].tb_id), h.curTb && (h.sql = t.expressionData[u]), t.$on("initSql", function (e, t) {
            var i = t || h.curTb;
            c(i), d(i)
        }), t.tabTable = function (e, i) {
            e.open = !e.open, angular.forEach(t.tbList, function (t) {
                e.tb_id != t.tb_id && (t.open = !1)
            }), e.open && (h.curTb = e.tb_id, h.sql = t.expressionData[e.tb_id] || "", t.updataSqlVal())
        }, t.insertFieldName = function (e) {
            t.insert("[" + e + "]")
        }, t.insertFunc = function (e) {
            e = "COUNT_DISTINCT" === e ? "COUNT(DISTINCT())" : e + "()", t.insert(e), t.setCursor("COUNT(DISTINCT())" == e ? 2 : 1)
        }, t.previewFilterAction = function () {
            t.$emit("toFilter", "parent")
        }, t.sqlTrans = function () {
            if (0 != t.tbList.length && (1 != t.tbList.length || 0 != t.tbList[0].fields.length) && h.curTb) {
                if (!h.sql) return void o(t.tips["where.sqlScriptNull"]);
                if ("common" == h.curTb) return void t.$emit("toSqlTrans", h.sql);
                var e = h.curTb;
                t.tbList.map(function (t) {
                    t.tb_id == e && t.hasOwnProperty("tb_id_origin") && (e = t.tb_id_origin)
                }), a.tb.sqlTrans({tb_id: e, sql: h.sql}).then(function (e) {
                    0 == e.status && o(t.tips["filter.checkSuccess"])
                })
            }
        }, r(["filter.checkSuccess", "where.sqlScriptNull"], t)
    }

    function o(e) {
        function t(e, t, i) {
            function n() {
                a = CodeMirror.fromTextArea(t[0], {
                    mode: "text/x-bdp-sql",
                    indentWithTabs: !0,
                    smartIndent: !0,
                    lineWrapping: !0,
                    matchBrackets: !0,
                    readOnly: !!r && "nocursor",
                    theme: "paraiso-light",
                    fields: e.fields,
                    placeholder: i.expPlaceholder ? i.expPlaceholder : "SUM([A]) + SUM([B])"
                }), e.viewData.sql && a.setValue(e.viewData.sql), r || (a.on("change", function () {
                    e.expressionData[e.viewData.curTb] = e.viewData.sql = a.getValue().replace(/0xa0/, "")
                }), e.insert = function (e) {
                    a.replaceSelection(e), a.focus()
                }, e.setCursor = function (e) {
                    var t = a.getCursor(), i = t.ch - e;
                    a.setCursor(t.line, i)
                }), e.updataSqlVal = function () {
                    a.setValue(e.viewData.sql || "")
                }, e.updataSqlVal()
            }

            var a, r = !!i.readonly;
            bdp.loadbdpFormula(n)
        }

        return {restrict: "A", link: t}
    }

    function s() {
        function e(e, t, i) {
            function n() {
                a = CodeMirror.fromTextArea(t[0], {
                    mode: "text/x-bdp-sql",
                    indentWithTabs: !0,
                    smartIndent: !0,
                    lineWrapping: !0,
                    matchBrackets: !0,
                    readOnly: !!r && "nocursor",
                    theme: "paraiso-light",
                    fields: e.fields,
                    placeholder: i.p ? i.p : "SUM([A]) + SUM([B])"
                }), a.setValue(e.formulaData)
            }

            var a, r = !!i.readonly;
            bdp.loadbdpFormula(n)
        }

        return {restrict: "A", link: e, scope: {formulaData: "="}}
    }

    angular.module("BC.common").directive("expressionFilter", a).directive("expressionFuncTip", n).directive("formulaExpression", o).directive("formulaExpressionReadonly", s).controller("expressionFilterCtrl", r), n.$inject = ["$rootScope"], a.$inject = ["$rootScope"], r.$inject = ["$rootScope", "$scope", "getFunctionList", "$timeout", "commonService", "$jsTipTranslate", "errHint"], o.$inject = ["$rootScope"], s.$inject = []
}, function (e, t) {
    e.exports = "/dist/static/common/expression-filter/expression_filter.html"
}, function (e, t, i) {
    "use strict";
    angular.module("BC.common").directive("searchFolderTableCheckbox", function () {
        return {
            restrict: "A", link: function (e, t, i) {
                function n() {
                    var t = e.query;
                    t ? angular.forEach(e.folderList, function (e) {
                        e.hide = !e.name.match(t), e.hide ? (angular.forEach(e.tb_list, function (i) {
                            i.name.match(t) ? (i.hide = !1, e.hide = !1, e.open = !0) : i.hide = !0
                        }), angular.forEach(e.sub_folders, function (i) {
                            i.name.match(t) ? (i.hide = !1, i.open = !0, e.hide = !1, e.open = !0) : i.hide = !0, i.hide ? angular.forEach(i.tb_list, function (n) {
                                n.name.match(t) ? (n.hide = !1, i.hide = !1, i.open = !0, e.hide = !1, e.open = !0) : n.hide = !0
                            }) : angular.forEach(i.tb_list, function (e) {
                                e.hide = !1
                            })
                        })) : (angular.forEach(e.tb_list, function (e) {
                            e.hide = !1
                        }), angular.forEach(e.sub_folders, function (e) {
                            e.hide = !1, e.open = !1, angular.forEach(e.tb_list, function (e) {
                                e.hide = !1
                            })
                        }))
                    }) : angular.forEach(e.folderList, function (e) {
                        e.hide = !1, e.open = !1, angular.forEach(e.sub_folders, function (e) {
                            e.hide = !1, e.open = !1, angular.forEach(e.tb_list, function (e) {
                                e.hide = !1
                            })
                        }), angular.forEach(e.tb_list, function (e) {
                            e.hide = !1
                        })
                    }), e.$digest()
                }

                var a;
                t.bind("keyup", function () {
                    clearTimeout(a), a = setTimeout(n, 10)
                })
            }
        }
    })
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, n, a, r, o, s, l) {
            function c(e, t, s) {
                function c(t) {
                    for (var i = e.info[t], n = 0; n < i.length; n++) {
                        if ("" === i[n].name) return alert(e.tips["granularity.nullNameCheck"]), !1;
                        for (var a = n + 1; a < i.length; a++) if (i[n].name === i[a].name) return alert(e.tips["granularity.duplicatedNameCheck"] + '"' + i[a].name + '"'), !1
                    }
                    return !0
                }

                function d(e) {
                    for (var t in e) e.hasOwnProperty(t) && e[t].map(function (e, t) {
                        delete e.endDateInfo, delete e.granularityMap, delete e.granularityMapDay
                    });
                    return e
                }

                var u;
                e.selected = "year", e.granularityMap = {
                    month: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                    day: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
                    day_of_week: [1, 2, 3, 4, 5, 6, 7]
                }, e.updateDay = function (e) {
                    var t = e.month;
                    e.day;
                    2 == t ? e.granularityMapDay = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28] : [4, 6, 9, 11].indexOf(t) > -1 ? e.granularityMapDay = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30] : e.granularityMapDay = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31]
                }, a.post("/api/date_granularity/list", {tb_id: e.tbId}).then(function (t) {
                    0 == t.status && (e.info = t.result, e.getInitialData = !1, u = angular.copy(t.result))
                }), e.setting = {
                    open: function () {
                        e.preCloseDialog = !1, e.getInitialData = !e.info, n.open({
                            template: i(265),
                            className: "ngdialog-theme-default global-filter-model granularity-modal",
                            scope: e,
                            preCloseCallback: function (t) {
                                if (e.preCloseDialog) return !0;
                                var i = d(u), a = d(angular.copy(e.info));
                                if (angular.toJson(i) !== angular.toJson(a)) {
                                    return n.openConfirm({
                                        template: "/static/partials/dialogTemplates/confirm-dialog.html",
                                        className: "ngdialog-theme-default ngDialog-width-300",
                                        scope: e,
                                        data: {
                                            title: l.instant("tips"),
                                            message: e.tips["chart.notSave"],
                                            okClick: function () {
                                            }
                                        }
                                    }).then(function () {
                                        return e.info = angular.copy(u), !0
                                    })
                                }
                            }
                        })
                    }, getInfo: function (t) {
                        if (setTimeout(function () {
                            $(".date-granularity-rule-list").scrollTop(0)
                        }, 0), !c(e.selected)) return !1;
                        e.selected = t
                    }, add: function (t) {
                        if (e.info[t].length > 9) return void r(e.tips["granularity.tooMuchRules"]);
                        var i = {name: ""};
                        switch (t) {
                            case"year":
                                i.month = 1, i.day = 1;
                                break;
                            case"month":
                                i.day = 1;
                                break;
                            case"week":
                                i.day_of_week = 1
                        }
                        e.info[t].push(i), scrollToBottom($(".date-granularity-rule-list"))
                    }, del: function (t, i) {
                        e.info[t].splice(i, 1)
                    }, modify: function () {
                        if (e.preCloseDialog = !0, e.preCloseDialogSure = !0, !c(e.selected)) return !1;
                        e.info = d(e.info);
                        var t = !1;
                        for (var i in e.info) e.info[i].length > 10 && (t = !0);
                        if (t) return void r(e.tips["granularity.tooMuchRules"]);
                        a.post("/api/date_granularity/commit", {
                            tb_id: e.tbId,
                            data: angular.toJson(e.info)
                        }).then(function (t) {
                            0 == t.status && (u = angular.copy(e.info), n.closeAll())
                        })
                    }, reset: function () {
                        e.info = angular.copy(u)
                    }
                }, o(["chart.notSave", "granularity.nullNameCheck", "granularity.duplicatedNameCheck", "granularity.tooMuchRules"], e)
            }

            return {
                restrict: "A",
                templateUrl: i(266),
                scope: {tbId: "=", field: "=", axis: "=", setGranularity: "="},
                link: c
            }
        }

        angular.module("BC.common").directive("dateGranularity", e), e.$inject = ["$timeout", "$rootScope", "ngDialog", "commonHttp", "errHint", "$jsTipTranslate", "granularityMap", "$translate"]
    }()
}, function (e, t) {
    e.exports = "/dist/static/common/date-granularity/set-custom-granularity.html"
}, function (e, t) {
    e.exports = "/dist/static/common/date-granularity/granularity.html"
}, function (e, t, i) {
    i(268).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "common-main_3dff376d.css"
}, function (e, t, i) {
    "use strict";
    i(270), i(289), angular.module("BC.dashboard.core", ["slick", "gridster", "textAngular"]), i(291), i(296), i(297), i(302), i(303), i(304), i(305), i(306), i(307), i(308), i(309), i(310), i(331)
}, function (e, t, i) {
    "use strict";
    i(271), i(274), i(279), i(281), i(285), i(287)
}, function (e, t, i) {
    e.exports = "angular-gridster", i(272)
}, function (e, t, i) {
    var n, a, r;
    !function (o, s) {
        "use strict";
        a = [i(273)], n = s, void 0 !== (r = "function" == typeof n ? n.apply(t, a) : n) && (e.exports = r)
    }(0, function (e) {
        "use strict";
        return e.module("gridster", []).constant("gridsterConfig", {
            layoutStyle: 1,
            insideContainer: !1,
            columns: 6,
            pushing: !0,
            floating: !0,
            swapping: !1,
            width: "auto",
            colWidth: "auto",
            rowHeight: "match",
            margins: [10, 10],
            outerMargin: !0,
            sparse: !1,
            isMobile: !1,
            mobileBreakPoint: 600,
            mobileModeEnabled: !0,
            minColumns: 1,
            minRows: 1,
            maxRows: 100,
            defaultSizeX: 2,
            defaultSizeY: 1,
            minSizeX: 1,
            maxSizeX: null,
            minSizeY: 1,
            maxSizeY: null,
            saveGridItemCalculatedHeightInMobile: !1,
            resizable: {enabled: !0, handles: ["s", "e", "n", "w", "se", "ne", "sw", "nw"]},
            draggable: {enabled: !0, scrollSensitivity: 20, scrollSpeed: 15}
        }).controller("GridsterCtrl", ["gridsterConfig", "$timeout", function (t, i) {
            var n = this;
            e.extend(this, t), this.resizable = e.extend({}, t.resizable || {}), this.draggable = e.extend({}, t.draggable || {});
            var a = !1;
            this.layoutChanged = function () {
                a || (a = !0, i(function () {
                    a = !1, n.loaded && n.floatItemsUp(), n.updateHeight(n.movingItem ? n.movingItem.sizeY : 0)
                }, 30))
            }, this.grid = [], this.allItems = [], this.destroy = function () {
                this.grid && (this.grid = []), this.$element = null, this.allItems && (this.allItems.length = 0, this.allItems = null)
            }, this.setOptions = function (t) {
                if (t) if (t = e.extend({}, t), t.draggable && (e.extend(this.draggable, t.draggable), delete t.draggable), t.resizable && (e.extend(this.resizable, t.resizable), delete t.resizable), e.extend(this, t), this.margins && 2 === this.margins.length) for (var i = 0, n = this.margins.length; i < n; ++i) this.margins[i] = parseInt(this.margins[i], 10), isNaN(this.margins[i]) && (this.margins[i] = 0); else this.margins = [0, 0]
            }, this.canItemOccupy = function (e, t, i) {
                return t > -1 && i > -1 && e.sizeX + i <= this.columns && e.sizeY + t <= this.maxRows
            }, this.autoSetItemPosition = function (e) {
                for (var t = 0; t < this.maxRows; ++t) for (var i = 0; i < this.columns; ++i) {
                    var n = this.getItems(t, i, e.sizeX, e.sizeY, e);
                    if (0 === n.length && this.canItemOccupy(e, t, i)) return void this.putItem(e, t, i)
                }
                throw new Error("Unable to place item!")
            }, this.getItems = function (e, t, i, n, a) {
                var r = [];
                i && n || (i = n = 1), !a || a instanceof Array || (a = [a]);
                var o;
                if (this.sparse === !1) for (var s = 0; s < n; ++s) for (var l = 0; l < i; ++l) !(o = this.getItem(e + s, t + l, a)) || a && a.indexOf(o) !== -1 || r.indexOf(o) !== -1 || r.push(o); else for (var c = e + n - 1, d = t + i - 1, u = 0; u < this.allItems.length; ++u) !(o = this.allItems[u]) || a && a.indexOf(o) !== -1 || r.indexOf(o) !== -1 || !this.intersect(o, t, d, e, c) || r.push(o);
                return r
            }, this.getBoundingBox = function (e) {
                if (0 === e.length) return null;
                if (1 === e.length) return {row: e[0].row, col: e[0].col, sizeY: e[0].sizeY, sizeX: e[0].sizeX};
                for (var t = 0, i = 0, n = 9999, a = 9999, r = 0, o = e.length; r < o; ++r) {
                    var s = e[r];
                    n = Math.min(s.row, n), a = Math.min(s.col, a), t = Math.max(s.row + s.sizeY, t), i = Math.max(s.col + s.sizeX, i)
                }
                return {row: n, col: a, sizeY: t - n, sizeX: i - a}
            }, this.intersect = function (e, t, i, n, a) {
                return t <= e.col + e.sizeX - 1 && i >= e.col && n <= e.row + e.sizeY - 1 && a >= e.row
            }, this.removeItem = function (e) {
                for (var t, i = 0, n = this.grid.length; i < n; ++i) {
                    var a = this.grid[i];
                    if (a && (t = a.indexOf(e)) !== -1) {
                        a[t] = null;
                        break
                    }
                }
                this.sparse && (t = this.allItems.indexOf(e)) !== -1 && this.allItems.splice(t, 1), this.layoutChanged()
            }, this.getItem = function (e, t, i) {
                !i || i instanceof Array || (i = [i]);
                for (var n = 1; e > -1;) {
                    for (var a = 1, r = t; r > -1;) {
                        var o = this.grid[e];
                        if (o) {
                            var s = o[r];
                            if (s && (!i || i.indexOf(s) === -1) && s.sizeX >= a && s.sizeY >= n) return s
                        }
                        ++a, --r
                    }
                    --e, ++n
                }
                return null
            }, this.putItems = function (e) {
                for (var t = 0, i = e.length; t < i; ++t) this.putItem(e[t])
            }, this.putItem = function (e, t, i, n) {
                if ((void 0 === t || null === t) && (t = e.row, i = e.col, void 0 === t || null === t)) return void this.autoSetItemPosition(e);
                if (this.canItemOccupy(e, t, i) || (i = Math.min(this.columns - e.sizeX, Math.max(0, i)), t = Math.min(this.maxRows - e.sizeY, Math.max(0, t))), null !== e.oldRow && void 0 !== e.oldRow) {
                    var a = e.oldRow === t && e.oldColumn === i, r = this.grid[t] && this.grid[t][i] === e;
                    if (a && r) return e.row = t, void(e.col = i);
                    var o = this.grid[e.oldRow];
                    o && o[e.oldColumn] === e && delete o[e.oldColumn]
                }
                e.oldRow = e.row = t, e.oldColumn = e.col = i, this.moveOverlappingItems(e, n), this.grid[t] || (this.grid[t] = []), this.grid[t][i] = e, this.sparse && this.allItems.indexOf(e) === -1 && this.allItems.push(e), this.movingItem === e && this.floatItemUp(e), this.layoutChanged()
            }, this.swapItems = function (e, t) {
                this.grid[e.row][e.col] = t, this.grid[t.row][t.col] = e;
                var i = e.row, n = e.col;
                e.row = t.row, e.col = t.col, t.row = i, t.col = n
            }, this.moveOverlappingItems = function (e, t) {
                t ? t.indexOf(e) === -1 && (t = t.slice(0), t.push(e)) : t = [e];
                var i = this.getItems(e.row, e.col, e.sizeX, e.sizeY, t);
                this.moveItemsDown(i, e.row + e.sizeY, t)
            }, this.moveItemsDown = function (e, t, i) {
                if (e && 0 !== e.length) {
                    e.sort(function (e, t) {
                        return e.row - t.row
                    }), i = i ? i.slice(0) : [];
                    var n, a, r, o = {};
                    for (a = 0, r = e.length; a < r; ++a) {
                        n = e[a];
                        var s = o[n.col];
                        (void 0 === s || n.row < s) && (o[n.col] = n.row)
                    }
                    for (a = 0, r = e.length; a < r; ++a) {
                        n = e[a];
                        var l = t - o[n.col];
                        this.moveItemDown(n, n.row + l, i), i.push(n)
                    }
                }
            }, this.moveItemDown = function (e, t, i) {
                if (!(e.row >= t)) {
                    for (; e.row < t;) ++e.row, this.moveOverlappingItems(e, i);
                    this.putItem(e, e.row, e.col, i)
                }
            }, this.floatItemsUp = function () {
                if (this.floating !== !1) for (var e = 0, t = this.grid.length; e < t; ++e) {
                    var i = this.grid[e];
                    if (i) for (var n = 0, a = i.length; n < a; ++n) {
                        var r = i[n];
                        r && this.floatItemUp(r)
                    }
                }
            }, this.floatItemUp = function (e) {
                if (this.floating !== !1) {
                    for (var t = e.col, i = e.sizeY, n = e.sizeX, a = null, r = null, o = e.row - 1; o > -1;) {
                        if (0 !== this.getItems(o, t, n, i, e).length) break;
                        a = o, r = t, --o
                    }
                    null !== a && this.putItem(e, a, r)
                }
            }, this.updateHeight = function (e) {
                var t = this.minRows;
                e = e || 0;
                for (var i = this.grid.length; i >= 0; --i) {
                    var n = this.grid[i];
                    if (n) for (var a = 0, r = n.length; a < r; ++a) n[a] && (t = Math.max(t, i + e + n[a].sizeY))
                }
                this.gridHeight = this.maxRows - t > 0 ? Math.min(this.maxRows, t) : Math.max(this.maxRows, t)
            }, this.pixelsToRows = function (e, t) {
                return this.outerMargin || (e += this.margins[0] / 2), t === !0 ? Math.ceil(e / this.curRowHeight) : t === !1 ? Math.floor(e / this.curRowHeight) : Math.round(e / this.curRowHeight)
            }, this.pixelsToColumns = function (e, t) {
                return this.outerMargin || (e += this.margins[1] / 2), t === !0 ? Math.ceil(e / this.curColWidth) : t === !1 ? Math.floor(e / this.curColWidth) : Math.round(e / this.curColWidth)
            }
        }]).directive("gridsterPreview", function () {
            return {
                replace: !0,
                scope: !0,
                require: "^gridster",
                template: '<div ng-style="previewStyle()" class="gridster-preview-holder"></div>',
                link: function (e, t, i, n) {
                    e.previewStyle = function () {
                        return n.movingItem ? {
                            display: "block",
                            height: n.movingItem.sizeY * n.curRowHeight - n.margins[0] + "px",
                            width: n.movingItem.sizeX * n.curColWidth - n.margins[1] + "px",
                            top: n.movingItem.row * n.curRowHeight + (n.outerMargin ? n.margins[0] : 0) + "px",
                            left: n.movingItem.col * n.curColWidth + (n.outerMargin ? n.margins[1] : 0) + "px"
                        } : {display: "none"}
                    }
                }
            }
        }).directive("gridster", ["$timeout", "$window", "$rootScope", "gridsterDebounce", function (t, i, n, a) {
            return {
                scope: !0,
                restrict: "EAC",
                controller: "GridsterCtrl",
                controllerAs: "gridster",
                compile: function (r) {
                    return r.prepend('<div ng-if="gridster.movingItem" gridster-preview></div>'), function (r, o, s, l) {
                        function c() {
                            1 == l.layoutStyle ? o.css("height", l.gridHeight * l.curRowHeight + (l.outerMargin ? l.margins[0] : -l.margins[0]) + "px") : 2 == l.layoutStyle && o.css("height", l.wrapHeight)
                        }

                        function d(e) {
                            if (l.setOptions(e), u(o[0])) {
                                "auto" === l.width ? l.curWidth = o[0].offsetWidth || parseInt(o.css("width"), 10) : l.curWidth = l.width, "auto" === l.colWidth ? l.curColWidth = (l.curWidth + (l.outerMargin ? -l.margins[1] : l.margins[1])) / l.columns : l.curColWidth = l.colWidth, l.curRowHeight = l.rowHeight, "string" == typeof l.rowHeight && ("match" === l.rowHeight ? "match" === l.rowHeight ? l.curRowHeight = .9 * Math.round(l.curColWidth) : l.curRowHeight = .9 * Math.round(l.rowHeight) : l.rowHeight.indexOf("*") !== -1 ? l.curRowHeight = Math.round(l.curColWidth * l.rowHeight.replace("*", "").replace(" ", "")) : l.rowHeight.indexOf("/") !== -1 && (l.curRowHeight = Math.round(l.curColWidth / l.rowHeight.replace("/", "").replace(" ", ""))));
                                for (var t = 0, i = l.grid.length; t < i; ++t) {
                                    var n = l.grid[t];
                                    if (n) for (var a = 0, r = n.length; a < r; ++a) if (n[a]) {
                                        var s = n[a];
                                        s.setElementPosition(), s.setElementSizeY(), s.setElementSizeX()
                                    }
                                }
                                c()
                            }
                        }

                        l.loaded = !1, l.$element = o, r.gridster = l, o.addClass("gridster");
                        var u = function (e) {
                            return "hidden" !== e.style.visibility && "none" !== e.style.display
                        };
                        r.$watch(function () {
                            return l.gridHeight
                        }, c), r.$watch(function () {
                            return l.movingItem
                        }, function () {
                            l.updateHeight(l.movingItem ? l.movingItem.sizeY : 0)
                        });
                        var p = s.gridster;
                        p ? r.$parent.$watch(p, function (e) {
                            d(e)
                        }, !0) : d({}), r.$watch(function () {
                            return l.loaded
                        }, function () {
                            l.loaded ? (o.addClass("gridster-loaded"), n.$broadcast("gridster-loaded", l)) : o.removeClass("gridster-loaded")
                        }), r.$watch(function () {
                            return l.isMobile
                        }, function () {
                            l.isMobile ? o.addClass("gridster-mobile").removeClass("gridster-desktop") : o.removeClass("gridster-mobile").addClass("gridster-desktop"), n.$broadcast("gridster-mobile-changed", l)
                        }), r.$watch(function () {
                            return l.draggable
                        }, function () {
                            n.$broadcast("gridster-draggable-changed", l)
                        }, !0), r.$watch(function () {
                            return l.resizable
                        }, function () {
                            n.$broadcast("gridster-resizable-changed", l)
                        }, !0);
                        var f = o[0].offsetWidth || parseInt(o.css("width"), 10), h = function () {
                            var e = o[0].offsetWidth || parseInt(o.css("width"), 10);
                            e && e !== f && !l.movingItem && (f = e, l.loaded && o.removeClass("gridster-loaded"), d(), l.loaded && o.addClass("gridster-loaded"), n.$broadcast("gridster-resized", [e, o[0].offsetHeight], l))
                        }, g = a(function () {
                            h(), t(function () {
                                r.$apply()
                            })
                        }, 100);
                        r.$watch(function () {
                            return u(o[0])
                        }, g), "function" == typeof window.addResizeListener ? window.addResizeListener(o[0], g) : r.$watch(function () {
                            return o[0].offsetWidth || parseInt(o.css("width"), 10)
                        }, h);
                        var m = e.element(i);
                        m.on("resize", g), r.$on("$destroy", function () {
                            l.destroy(), m.off("resize", g), "function" == typeof window.removeResizeListener && window.removeResizeListener(o[0], g)
                        }), t(function () {
                            r.$watch("gridster.floating", function () {
                                l.floatItemsUp()
                            }), r.$watch("gridster.isBDP", function (e) {
                                e && (l.loaded = !0)
                            })
                        }, 100)
                    }
                }
            }
        }]).controller("GridsterItemCtrl", function () {
            this.$element = null, this.gridster = null, this.row = null, this.col = null, this.sizeX = null, this.sizeY = null, this.minSizeX = 0, this.minSizeY = 0, this.maxSizeX = null, this.maxSizeY = null, this.init = function (e, t) {
                this.$element = e, this.gridster = t, this.sizeX = t.defaultSizeX, this.sizeY = t.defaultSizeY
            }, this.destroy = function () {
                this.gridster = null, this.$element = null
            }, this.toJSON = function () {
                return {row: this.row, col: this.col, sizeY: this.sizeY, sizeX: this.sizeX}
            }, this.isMoving = function () {
                return this.gridster.movingItem === this
            }, this.setPosition = function (e, t) {
                this.gridster.putItem(this, e, t), this.isMoving() || this.setElementPosition()
            }, this.setSize = function (e, t, i) {
                e = e.toUpperCase();
                var n = "size" + e, a = "Size" + e;
                if ("" !== t) {
                    t = parseInt(t, 10), (isNaN(t) || 0 === t) && (t = this.gridster["default" + a]);
                    var r = "X" === e ? this.gridster.columns : this.gridster.maxRows;
                    this["max" + a] && (r = Math.min(this["max" + a], r)), this.gridster["max" + a] && (r = Math.min(this.gridster["max" + a], r)), "X" === e && this.cols ? r -= this.cols : "Y" === e && this.rows && (r -= this.rows);
                    var o = 0;
                    this["min" + a] && (o = Math.max(this["min" + a], o)), this.gridster["min" + a] && (o = Math.max(this.gridster["min" + a], o)), t = Math.max(Math.min(t, r), o);
                    var s = this[n] !== t || this["old" + a] && this["old" + a] !== t;
                    return this["old" + a] = this[n] = t, this.isMoving() || this["setElement" + a](), !i && s && (this.gridster.moveOverlappingItems(this), this.gridster.layoutChanged()), s
                }
            }, this.setSizeY = function (e, t) {
                return this.setSize("Y", e, t)
            }, this.setSizeX = function (e, t) {
                return e > this.gridster.columns && (e = this.gridster.columns), this.setSize("X", e, t)
            }, this.isFreedom = function () {
                return 2 == this.gridster.layoutStyle
            }, this.setElementPosition = function () {
                this.isFreedom() || (this.gridster.isMobile ? this.$element.css({
                    marginLeft: this.gridster.margins[0] + "px",
                    marginRight: this.gridster.margins[0] + "px",
                    marginTop: this.gridster.margins[1] + "px",
                    marginBottom: this.gridster.margins[1] + "px",
                    top: "",
                    left: ""
                }) : this.$element.css({
                    margin: 0,
                    top: this.row * this.gridster.curRowHeight + (this.gridster.outerMargin ? this.gridster.margins[0] : 0) + "px",
                    left: this.col * this.gridster.curColWidth + (this.gridster.outerMargin ? this.gridster.margins[1] : 0) + "px"
                }))
            }, this.setElementSizeY = function () {
                this.isFreedom() || (this.gridster.isMobile && !this.gridster.saveGridItemCalculatedHeightInMobile ? this.$element.css("height", "") : this.$element.css("height", this.sizeY * this.gridster.curRowHeight - this.gridster.margins[0] + "px"))
            }, this.setElementSizeX = function () {
                this.isFreedom() || (this.gridster.isMobile ? this.$element.css("width", "") : this.$element.css("width", this.sizeX * this.gridster.curColWidth - this.gridster.margins[1] + "px"))
            }, this.getElementSizeX = function () {
                return this.sizeX * this.gridster.curColWidth - this.gridster.margins[1]
            }, this.getElementSizeY = function () {
                return this.sizeY * this.gridster.curRowHeight - this.gridster.margins[0]
            }
        }).factory("GridsterTouch", [function () {
            return function (e, t, i, n) {
                var a, r, o = {}, s = function (e) {
                    if (Object.keys) return Object.keys(e).length;
                    var t, i = 0;
                    for (t in e) ++i;
                    return i
                }, l = function (e) {
                    for (var t = 0, i = 0, n = navigator.userAgent.match(/\bMSIE\b/), a = e; null != a; a = a.offsetParent) n && (!document.documentMode || document.documentMode < 8) && "relative" === a.currentStyle.position && a.offsetParent && "relative" === a.offsetParent.currentStyle.position && a.offsetLeft === a.offsetParent.offsetLeft ? i += a.offsetTop : (t += a.offsetLeft, i += a.offsetTop);
                    return {x: t, y: i}
                }, c = l(e), d = !1, u = function (a) {
                    if ("mousemove" !== a.type || 0 !== s(o)) {
                        for (var r = !0, p = a.changedTouches ? a.changedTouches : [a], f = 0; f < p.length; ++f) {
                            var h = p[f],
                                g = void 0 !== h.identifier ? h.identifier : void 0 !== h.pointerId ? h.pointerId : 1;
                            if (void 0 === h.pageX) if (h.pageX = h.offsetX + c.x, h.pageY = h.offsetY + c.y, h.srcElement.offsetParent === e && document.documentMode && 8 === document.documentMode && "mousedown" === h.type) h.pageX += h.srcElement.offsetLeft, h.pageY += h.srcElement.offsetTop; else if (h.srcElement !== e && !document.documentMode || document.documentMode < 8) {
                                for (var m = -2, v = -2, y = h.srcElement; null !== y; y = y.parentNode) m += y.scrollLeft ? y.scrollLeft : 0, v += y.scrollTop ? y.scrollTop : 0;
                                h.pageX = h.clientX + m, h.pageY = h.clientY + v
                            }
                            var b = h.pageX, _ = h.pageY;
                            a.type.match(/(start|down)$/i) ? (c = l(e), o[g] && (n && n({
                                target: a.target,
                                which: a.which,
                                pointerId: g,
                                pageX: b,
                                pageY: _
                            }), delete o[g]), t && r && (r = t({
                                target: a.target,
                                which: a.which,
                                pointerId: g,
                                pageX: b,
                                pageY: _
                            })), o[g] = {
                                x: b,
                                y: _
                            }, e.msSetPointerCapture && r ? e.msSetPointerCapture(g) : "mousedown" === a.type && 1 === s(o) && (d ? e.setCapture(!0) : (document.addEventListener("mousemove", u, !1), document.addEventListener("mouseup", u, !1)))) : a.type.match(/move$/i) ? !o[g] || o[g].x === b && o[g].y === _ || (i && r && (r = i({
                                target: a.target,
                                which: a.which,
                                pointerId: g,
                                pageX: b,
                                pageY: _
                            })), o[g].x = b, o[g].y = _) : o[g] && a.type.match(/(up|end|cancel)$/i) && (n && r && (r = n({
                                target: a.target,
                                which: a.which,
                                pointerId: g,
                                pageX: b,
                                pageY: _
                            })), delete o[g], e.msReleasePointerCapture ? e.msReleasePointerCapture(g) : "mouseup" === a.type && 0 === s(o) && (d ? e.releaseCapture() : (document.removeEventListener("mousemove", u, !1), document.removeEventListener("mouseup", u, !1))))
                        }
                        r && (a.preventDefault && a.preventDefault(), a.preventManipulation && a.preventManipulation(), a.preventMouseEvent && a.preventMouseEvent())
                    }
                };
                return this.enable = function () {
                    window.navigator.msPointerEnabled ? (e.addEventListener("MSPointerDown", u, !1), e.addEventListener("MSPointerMove", u, !1), e.addEventListener("MSPointerUp", u, !1), e.addEventListener("MSPointerCancel", u, !1), void 0 !== e.style.msContentZooming && (a = e.style.msContentZooming, e.style.msContentZooming = "none"), void 0 !== e.style.msTouchAction && (r = e.style.msTouchAction, e.style.msTouchAction = "none")) : e.addEventListener ? (e.addEventListener("touchstart", u, !1), e.addEventListener("touchmove", u, !1), e.addEventListener("touchend", u, !1), e.addEventListener("touchcancel", u, !1), e.addEventListener("mousedown", u, !1), e.setCapture && !window.navigator.userAgent.match(/\bGecko\b/) && (d = !0, e.addEventListener("mousemove", u, !1), e.addEventListener("mouseup", u, !1))) : e.attachEvent && e.setCapture && (d = !0, e.attachEvent("onmousedown", function () {
                        return u(window.event), window.event.returnValue = !1, !1
                    }), e.attachEvent("onmousemove", function () {
                        return u(window.event), window.event.returnValue = !1, !1
                    }), e.attachEvent("onmouseup", function () {
                        return u(window.event), window.event.returnValue = !1, !1
                    }))
                }, this.disable = function () {
                    window.navigator.msPointerEnabled ? (e.removeEventListener("MSPointerDown", u, !1), e.removeEventListener("MSPointerMove", u, !1), e.removeEventListener("MSPointerUp", u, !1), e.removeEventListener("MSPointerCancel", u, !1), a && (e.style.msContentZooming = a), r && (e.style.msTouchAction = r)) : e.removeEventListener ? (e.removeEventListener("touchstart", u, !1), e.removeEventListener("touchmove", u, !1), e.removeEventListener("touchend", u, !1), e.removeEventListener("touchcancel", u, !1), e.removeEventListener("mousedown", u, !1), e.setCapture && !window.navigator.userAgent.match(/\bGecko\b/) && (d = !0, e.removeEventListener("mousemove", u, !1), e.removeEventListener("mouseup", u, !1))) : e.detachEvent && e.setCapture && (d = !0, e.detachEvent("onmousedown"), e.detachEvent("onmousemove"), e.detachEvent("onmouseup"))
                }, this
            }
        }]).factory("GridsterDraggable", ["$document", "$window", "GridsterTouch", function (t, i, n) {
            function a(a, r, o, s, l) {
                function c(e) {
                    a.addClass("gridster-item-moving"), 2 != o.layoutStyle && (o.movingItem = s, o.updateHeight(s.sizeY)), r.$apply(function () {
                        o.draggable && o.draggable.start && o.draggable.start(e, a, l, s)
                    })
                }

                function d(e) {
                    var t = s.row, n = s.col, c = o.draggable && o.draggable.drag, d = o.draggable.scrollSensitivity,
                        u = o.draggable.scrollSpeed;
                    if (2 != o.layoutStyle) {
                        var p = Math.min(o.pixelsToRows(m), o.maxRows - 1),
                            f = Math.min(o.pixelsToColumns(g), o.columns - 1),
                            h = o.getItems(p, f, s.sizeX, s.sizeY, s), v = 0 !== h.length;
                        if (o.swapping === !0 && v) {
                            var y = o.getBoundingBox(h), b = y.sizeX === s.sizeX && y.sizeY === s.sizeY,
                                _ = y.row === t, w = y.col === n, x = y.row === p && y.col === f, C = _ || w;
                            if (b && 1 === h.length) {
                                if (x) o.swapItems(s, h[0]); else if (C) return
                            } else if (y.sizeX <= s.sizeX && y.sizeY <= s.sizeY && C) for (var k = s.row <= p ? s.row : p + s.sizeY, S = s.col <= f ? s.col : f + s.sizeX, T = k - y.row, D = S - y.col, L = 0, E = h.length; L < E; ++L) {
                                var $ = h[L], I = o.getItems($.row + T, $.col + D, $.sizeX, $.sizeY, s);
                                0 === I.length && o.putItem($, $.row + T, $.col + D)
                            }
                        }
                        o.pushing === !1 && v || (s.row = p, s.col = f)
                    }
                    e.pageY - A.body.scrollTop < d ? A.body.scrollTop = A.body.scrollTop - u : i.innerHeight - (e.pageY - A.body.scrollTop) < d && (A.body.scrollTop = A.body.scrollTop + u), e.pageX - A.body.scrollLeft < d ? A.body.scrollLeft = A.body.scrollLeft - u : i.innerWidth - (e.pageX - A.body.scrollLeft) < d && (A.body.scrollLeft = A.body.scrollLeft + u), (c || t !== s.row || n !== s.col) && r.$apply(function () {
                        c && o.draggable.drag(e, a, l, s)
                    })
                }

                function u(e) {
                    a.removeClass("gridster-item-moving");
                    var t = Math.min(o.pixelsToRows(m), o.maxRows - 1),
                        i = Math.min(o.pixelsToColumns(g), o.columns - 1);
                    2 != o.layoutStyle && (o.pushing === !1 && 0 !== o.getItems(t, i, s.sizeX, s.sizeY, s).length || (s.row = t, s.col = i)), o.movingItem = null, 2 != o.layoutStyle && s.setPosition(s.row, s.col), r.$apply(function () {
                        o.draggable && o.draggable.stop && o.draggable.stop(e, a, l, s)
                    })
                }

                function p(t) {
                    if (E.indexOf(t.target.nodeName.toLowerCase()) !== -1) return !1;
                    var i = e.element(t.target);
                    if (i.hasClass("gridster-item-resizable-handler")) return !1;
                    if (i.closest && i.closest(".gridster-no-drag").length) return !1;
                    if (o.draggable && o.draggable.handle) {
                        var n = e.element(a[0].querySelectorAll(o.draggable.handle)), r = !1;
                        e:for (var l = 0, d = n.length; l < d; ++l) {
                            var u = n[l];
                            if (u === t.target) {
                                r = !0;
                                break
                            }
                            for (var p = t.target, f = 0; f < 20; ++f) {
                                var h = p.parentNode;
                                if (h === a[0] || !h) break;
                                if (h === u) {
                                    r = !0;
                                    break e
                                }
                                p = h
                            }
                        }
                        if (!r) return !1
                    }
                    switch (t.which) {
                        case 1:
                            break;
                        case 2:
                        case 3:
                            return
                    }
                    return C = t.pageX, k = t.pageY, g = parseInt(a.css("left"), 10), m = parseInt(a.css("top"), 10), v = a[0].offsetWidth, y = a[0].offsetHeight, b = s.col, _ = s.row, c(t), !0
                }

                function f(e) {
                    if (!a.hasClass("gridster-item-moving") || a.hasClass("gridster-item-resizing")) return !1;
                    var t = o.curWidth - 1, i = o.curRowHeight * o.maxRows - 1;
                    w = e.pageX, x = e.pageY;
                    var n = w - C + S, r = x - k + T;
                    S = T = 0, C = w, k = x;
                    var s = o.insideContainer, l = o.$element.height(), c = n, u = r;
                    return g + c < L ? (n = L - g, S = c - n) : g + v + c > t && (n = t - g - v, S = c - n), m + u < D ? (r = D - m, T = u - r) : m + y + u > i && (r = i - m - y, T = u - r), g += n, m += r, s && y + m > l && (m = l - y), a.css({
                        top: m + "px",
                        left: g + "px"
                    }), d(e), !0
                }

                function h(e) {
                    return !(!a.hasClass("gridster-item-moving") || a.hasClass("gridster-item-resizing")) && (S = T = 0, u(e), !0)
                }

                var g, m, v, y, b, _, w = 0, x = 0, C = 0, k = 0, S = 0, T = 0, D = 0, L = 0, A = t[0],
                    E = ["select", "option", "input", "textarea", "button"], $ = null, I = null;
                this.enable = function () {
                    if ($ !== !0) {
                        if ($ = !0, I) return void I.enable();
                        I = new n(a[0], p, f, h), I.enable()
                    }
                }, this.disable = function () {
                    $ !== !1 && ($ = !1, I && I.disable())
                }, this.toggle = function (e) {
                    e ? this.enable() : this.disable()
                }, this.destroy = function () {
                    this.disable()
                }
            }

            return a
        }]).factory("GridsterResizable", ["GridsterTouch", function (t) {
            function i(i, n, a, r, o) {
                function s() {
                    var e = window.location.href.indexOf("data_screen") >= 0,
                        t = window.location.href.indexOf("/mode/adv") >= 0,
                        i = r.$element[0].getAttribute("data-chart-type"), n = !1;
                    switch (i) {
                        case"C230":
                        case"C261":
                        case"C271":
                        case"C272":
                        case"C273":
                        case"C290":
                            r.minSizeY = 3, r.minSizeX = 3;
                            break;
                        case"C310":
                            r.minSizeY = 2, r.minSizeX = 2;
                            break;
                        default:
                            r.minSizeY = 3, r.minSizeX = 3
                    }
                    (n = ["C101", "C102", "C103", "C105"].indexOf(i) > -1 || r.$element[0].getAttribute("data-is-special-chart") || e || t) && (r.minSizeX = .001, r.minSizeY = .001)
                }

                function l(l) {
                    function c(e) {
                        s(), i.addClass("gridster-item-moving"), i.addClass("gridster-item-resizing"), 2 != a.layoutStyle && (a.movingItem = r, r.setElementSizeX(), r.setElementSizeY(), r.setElementPosition(), a.updateHeight(1)), n.$apply(function () {
                            a.resizable && a.resizable.start && a.resizable.start(e, i, o, r)
                        })
                    }

                    function d(e) {
                        bdp.utils.throttle(function (e) {
                            var t = r.row, s = r.col, c = r.sizeX, d = r.sizeY, u = a.resizable && a.resizable.resize,
                                p = r.col;
                            ["w", "nw", "sw"].indexOf(l) !== -1 && (p = a.pixelsToColumns(g, !1));
                            var f = r.row;
                            ["n", "ne", "nw"].indexOf(l) !== -1 && (f = a.pixelsToRows(m, !1));
                            var h = r.sizeX;
                            ["n", "s"].indexOf(l) === -1 && (h = a.pixelsToColumns(v, !0));
                            var b = r.sizeY;
                            ["e", "w"].indexOf(l) === -1 && (b = a.pixelsToRows(y, !0)), !(f > -1 && p > -1 && h + p <= a.columns && b + f <= a.maxRows) || a.pushing === !1 && 0 !== a.getItems(f, p, h, b, r).length || (r.row = f, r.col = p, r.sizeX = h, r.sizeY = b);
                            var _ = r.row !== t || r.col !== s || r.sizeX !== c || r.sizeY !== d;
                            (u || _) && n.$apply(function () {
                                u && a.resizable.resize(e, i, o, r)
                            })
                        }, 30)()
                    }

                    function u(e) {
                        i.removeClass("gridster-item-moving"), i.removeClass("gridster-item-resizing"), a.movingItem = null, n.$apply(function () {
                            a.resizable && a.resizable.stop && a.resizable.stop(e, i, o, r)
                        }), 2 != a.layoutStyle && (r.setPosition(r.row, r.col), r.setSizeY(r.sizeY), r.setSizeX(r.sizeX))
                    }

                    function p(t) {
                        var o = e.element(t.target);
                        if (o.closest && o.closest(".gridster-no-resize").length) return !1;
                        switch (t.which) {
                            case 1:
                                break;
                            case 2:
                            case 3:
                                return
                        }
                        return w = a.draggable.enabled, w && (a.draggable.enabled = !1, n.$broadcast("gridster-draggable-changed", a)), T = t.pageX, D = t.pageY, g = parseInt(i.css("left"), 10), m = parseInt(i.css("top"), 10), v = i[0].offsetWidth, y = i[0].offsetHeight, b = r.sizeX, _ = r.sizeY, c(t), !0
                    }

                    function f(e) {
                        if (i.hasClass("gridster-no-resize")) return !1;
                        var t = a.curWidth - 1;
                        k = e.pageX, S = e.pageY;
                        var n = k - T + L, r = S - D + A;
                        L = A = 0, T = k, D = S;
                        var o = r, s = n, l = O(), c = F(), u = a.insideContainer, p = a.$element.height();
                        return C.indexOf("n") >= 0 && (y - o < c ? (r = y - c, A = o - r) : m + o < E && (r = E - m, A = o - r), m += r, y -= r), C.indexOf("s") >= 0 && (y + o < c ? (r = c - y, A = o - r) : m + y + o > $ && (r = $ - m - y, A = o - r), y += r, u && y + m > p && (y = p - m)), C.indexOf("w") >= 0 && (v - s < l ? (n = v - l, L = s - n) : g + s < I && (n = I - g, L = s - n), g += n, v -= n), C.indexOf("e") >= 0 && (v + s < l ? (n = l - v, L = s - n) : g + v + s > t && (n = t - g - v, L = s - n), v += n), i.css({
                            top: m + "px",
                            left: g + "px",
                            width: v + "px",
                            height: y + "px"
                        }), d(e), !0
                    }

                    function h(e) {
                        return a.draggable.enabled !== w && (a.draggable.enabled = w, n.$broadcast("gridster-draggable-changed", a)), L = A = 0, u(e), !0
                    }

                    var g, m, v, y, b, _, w, x, C = l, k = 0, S = 0, T = 0, D = 0, L = 0, A = 0, E = 0, $ = 9999, I = 0,
                        $ = a.curRowHeight * a.maxRows - 1, F = function () {
                            return (r.minSizeY ? r.minSizeY : 1) * a.curRowHeight - a.margins[0]
                        }, O = function () {
                            return (r.minSizeX ? r.minSizeX : 1) * a.curColWidth - a.margins[1]
                        }, M = null;
                    this.enable = function () {
                        M || (M = e.element('<div class="gridster-item-resizable-handler handle-' + C + '"></div>'), i.append(M)), x = new t(M[0], p, f, h), x.enable()
                    }, this.disable = function () {
                        M && (M.remove(), M = null), x.disable(), x = void 0
                    }, this.destroy = function () {
                        this.disable()
                    }
                }

                var c = [], d = a.resizable.handles;
                "string" == typeof d && (d = a.resizable.handles.split(","));
                for (var u = !1, p = 0, f = d.length; p < f; p++) c.push(new l(d[p]));
                this.enable = function () {
                    if (!u) {
                        for (var e = 0, t = c.length; e < t; e++) c[e].enable();
                        u = !0
                    }
                }, this.disable = function () {
                    if (u) {
                        for (var e = 0, t = c.length; e < t; e++) c[e].disable();
                        u = !1
                    }
                }, this.toggle = function (e) {
                    e ? this.enable() : this.disable()
                }, this.destroy = function () {
                    for (var e = 0, t = c.length; e < t; e++) c[e].destroy()
                }
            }

            return i
        }]).factory("gridsterDebounce", function () {
            return function (e, t, i) {
                var n;
                return function () {
                    var a = this, r = arguments, o = function () {
                        n = null, i || e.apply(a, r)
                    }, s = i && !n;
                    clearTimeout(n), n = setTimeout(o, t), s && e.apply(a, r)
                }
            }
        }).directive("gridsterItem", ["$parse", "GridsterDraggable", "GridsterResizable", "gridsterDebounce", function (e, t, i, n) {
            return {
                scope: !0,
                restrict: "EA",
                controller: "GridsterItemCtrl",
                controllerAs: "gridsterItem",
                require: ["^gridster", "gridsterItem"],
                link: function (a, r, o, s) {
                    function l() {
                        f.setPosition(f.row, f.col), m.row && m.row.assign && m.row.assign(a, f.row), m.col && m.col.assign && m.col.assign(a, f.col)
                    }

                    function c() {
                        var e = f.setSizeX(f.sizeX, !0);
                        e && m.sizeX && m.sizeX.assign && m.sizeX.assign(a, f.sizeX);
                        var t = f.setSizeY(f.sizeY, !0);
                        t && m.sizeY && m.sizeY.assign && m.sizeY.assign(a, f.sizeY), (e || t) && (f.gridster.moveOverlappingItems(f), p.layoutChanged(), a.$broadcast("gridster-item-resized", f))
                    }

                    var d, u = o.gridsterItem, p = s[0], f = s[1];
                    if (a.gridster = p, u) {
                        var h = e(u);
                        d = h(a) || {}, !d && h.assign && (d = {
                            row: f.row,
                            col: f.col,
                            sizeX: f.sizeX,
                            sizeY: f.sizeY,
                            minSizeX: 0,
                            minSizeY: 0,
                            maxSizeX: null,
                            maxSizeY: null
                        }, h.assign(a, d))
                    } else d = o;
                    f.init(r, p), r.addClass("gridster-item");
                    for (var g = ["minSizeX", "maxSizeX", "minSizeY", "maxSizeY", "sizeX", "sizeY", "row", "col"], m = {}, v = [], y = 0, b = g.length; y < b; ++y) !function (t) {
                        var i;
                        if ("string" == typeof d[t]) i = d[t]; else if ("string" == typeof d[t.toLowerCase()]) i = d[t.toLowerCase()]; else {
                            if (!u) return;
                            i = u + "." + t
                        }
                        v.push('"' + t + '":' + i), m[t] = e(i);
                        var n = m[t](a);
                        "number" == typeof n && (f[t] = n)
                    }(g[y]);
                    var _ = "{" + v.join(",") + "}";
                    a.$watchCollection(_, function (e, t) {
                        for (var i in e) {
                            var n = e[i];
                            t[i] !== n && (n = parseInt(n, 10), isNaN(n) || (f[i] = n))
                        }
                    }), a.$watch(function () {
                        return f.row + "," + f.col
                    }, l), a.$watch(function () {
                        return f.sizeY + "," + f.sizeX + "," + f.minSizeX + "," + f.maxSizeX + "," + f.minSizeY + "," + f.maxSizeY
                    }, c);
                    var w = new t(r, a, p, f, d), x = new i(r, a, p, f, d), C = function () {
                        x.toggle(!p.isMobile && p.resizable && p.resizable.enabled)
                    };
                    C();
                    var k = function () {
                        w.toggle(!p.isMobile && p.draggable && p.draggable.enabled)
                    };
                    k(), a.$on("gridster-draggable-changed", k), a.$on("gridster-resizable-changed", C), a.$on("gridster-resized", C), a.$on("gridster-mobile-changed", function () {
                        C(), k()
                    });
                    var S = n(function () {
                        a.$apply(function () {
                            a.$broadcast("gridster-item-transition-end", f)
                        })
                    }, 50);
                    return r.on(function () {
                        var e = document.createElement("div"), t = {
                            transition: "transitionend",
                            OTransition: "oTransitionEnd",
                            MozTransition: "transitionend",
                            WebkitTransition: "webkitTransitionEnd"
                        };
                        for (var i in t) if (void 0 !== e.style[i]) return t[i]
                    }(), S), a.$broadcast("gridster-item-initialized", f), a.$on("$destroy", function () {
                        try {
                            x.destroy(), w.destroy()
                        } catch (e) {
                        }
                        try {
                            p.removeItem(f)
                        } catch (e) {
                        }
                        try {
                            f.destroy()
                        } catch (e) {
                        }
                    })
                }
            }
        }]).directive("gridsterNoDrag", function () {
            return {
                restrict: "A", link: function (e, t) {
                    t.addClass("gridster-no-drag")
                }
            }
        })
    })
}, function (e, t) {
    e.exports = window.angular
}, function (e, t, i) {
    e.exports = "textAngular", i(275), i(276), i(278)
}, function (e, t) {
    !function (e, t, i) {
        "use strict";

        function n() {
            this.$get = ["$$sanitizeUri", function (e) {
                return function (t) {
                    void 0 !== arguments[1] && (arguments[1].version = "taSanitize");
                    var i = [];
                    return o(t, u(i, function (t, i) {
                        return !/^unsafe/.test(e(t, i))
                    })), i.join("")
                }
            }]
        }

        function a(e) {
            var i = [];
            return u(i, t.noop).chars(e), i.join("")
        }

        function r(e) {
            var t, i = {}, n = e.split(",");
            for (t = 0; t < n.length; t++) i[n[t]] = !0;
            return i
        }

        function o(e, i) {
            function n(e, n, r, o) {
                if (n = t.lowercase(n), D[n]) for (; d.last() && L[d.last()];) a("", d.last());
                T[n] && d.last() == n && a("", n), (o = C[n] || !!o) || d.push(n);
                var l = {};
                r.replace(g, function (e, t, i, n, a) {
                    var r = i || n || a || "";
                    l[t] = s(r)
                }), i.start && i.start(n, l, o)
            }

            function a(e, n) {
                var a, r = 0;
                if (n = t.lowercase(n)) for (r = d.length - 1; r >= 0 && d[r] != n; r--) ;
                if (r >= 0) {
                    for (a = d.length - 1; a >= r; a--) i.end && i.end(d[a]);
                    d.length = r
                }
            }

            "string" != typeof e && (e = null === e || void 0 === e ? "" : "" + e);
            var r, o, l, c, d = [], u = e;
            for (d.last = function () {
                return d[d.length - 1]
            }; e;) {
                if (c = "", o = !0, d.last() && E[d.last()] ? (e = e.replace(new RegExp("([^]*)<\\s*\\/\\s*" + d.last() + "[^>]*>", "i"), function (e, t) {
                    return t = t.replace(y, "$1").replace(_, "$1"), i.chars && i.chars(s(t)), ""
                }), a("", d.last())) : (0 === e.indexOf("<!--") ? (r = e.indexOf("--", 4)) >= 0 && e.lastIndexOf("-->", r) === r && (i.comment && i.comment(e.substring(4, r)), e = e.substring(r + 3), o = !1) : b.test(e) ? (l = e.match(b)) && (e = e.replace(l[0], ""), o = !1) : v.test(e) ? (l = e.match(h)) && (e = e.substring(l[0].length), l[0].replace(h, a), o = !1) : m.test(e) && (l = e.match(f), l ? (l[4] && (e = e.substring(l[0].length), l[0].replace(f, n)), o = !1) : (c += "<", e = e.substring(1))), o && (r = e.indexOf("<"), c += r < 0 ? e : e.substring(0, r), e = r < 0 ? "" : e.substring(r), i.chars && i.chars(s(c)))), e == u) throw p("badparse", "The sanitizer was unable to parse the following block of html: {0}", e);
                u = e
            }
            a()
        }

        function s(e) {
            if (!e) return "";
            var t = j.exec(e), i = t[1], n = t[3], a = t[2];
            return a && (N.innerHTML = a.replace(/</g, "&lt;"), a = "textContent" in N ? N.textContent : N.innerText), i + a + n
        }

        function l(e) {
            return e.replace(/&/g, "&amp;").replace(w, function (e) {
                return "&#" + (1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320) + 65536) + ";"
            }).replace(x, function (e) {
                var t = e.charCodeAt(0);
                return t <= 159 || 173 == t || t >= 1536 && t <= 1540 || 1807 == t || 6068 == t || 6069 == t || t >= 8204 && t <= 8207 || t >= 8232 && t <= 8239 || t >= 8288 && t <= 8303 || 65279 == t || t >= 65520 && t <= 65535 ? "&#" + t + ";" : e
            }).replace(/</g, "&lt;").replace(/>/g, "&gt;")
        }

        function c(e) {
            var i = "", n = e.split(";");
            return t.forEach(n, function (e) {
                var n = e.split(":");
                if (2 == n.length) {
                    var a = P(t.lowercase(n[0])), e = P(t.lowercase(n[1]));
                    (("color" === a || "background-color" === a) && (e.match(/^rgb\([0-9%,\. ]*\)$/i) || e.match(/^rgba\([0-9%,\. ]*\)$/i) || e.match(/^hsl\([0-9%,\. ]*\)$/i) || e.match(/^hsla\([0-9%,\. ]*\)$/i) || e.match(/^#[0-9a-f]{3,6}$/i) || e.match(/^[a-z]*$/i)) || "text-align" === a && ("left" === e || "right" === e || "center" === e || "justify" === e) || "float" === a && ("left" === e || "right" === e || "none" === e) || ("width" === a || "height" === a) && e.match(/[0-9\.]*(px|em|rem|%)/) || "direction" === a && e.match(/^ltr|rtl|initial|inherit$/) || "font-size" === a && e.match(/[0-9\.]*(px|em|rem)/)) && (i += a + ": " + e + ";")
                }
            }), i
        }

        function d(e, t, i, n) {
            return !("img" !== e || !t["ta-insert-video"] || "ta-insert-video" !== i && "allowfullscreen" !== i && "frameborder" !== i && ("contenteditable" !== i || "false" !== n))
        }

        function u(e, i) {
            var n = !1, a = t.bind(e, e.push);
            return {
                start: function (e, r, o) {
                    e = t.lowercase(e), !n && E[e] && (n = e), n || $[e] !== !0 || (a("<"), a(e), t.forEach(r, function (n, o) {
                        var s = t.lowercase(o), u = "img" === e && "src" === s || "background" === s;
                        ("style" === s && "" !== (n = c(n)) || d(e, r, s, n) || M[s] === !0 && (I[s] !== !0 || i(n, u))) && (a(" "), a(o), a('="'), a(l(n)), a('"'))
                    }), a(o ? "/>" : ">"))
                }, end: function (e) {
                    e = t.lowercase(e), n || $[e] !== !0 || (a("</"), a(e), a(">")), e == n && (n = !1)
                }, chars: function (e) {
                    n || a(l(e))
                }
            }
        }

        var p = t.$$minErr("$sanitize"),
            f = /^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,
            h = /^<\/\s*([\w:-]+)[^>]*>/, g = /([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,
            m = /^</, v = /^<\//, y = /<!--(.*?)-->/g, b = /<!DOCTYPE([^>]*?)>/i, _ = /<!\[CDATA\[(.*?)]]>/g,
            w = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g, x = /([^\#-~| |!])/g, C = r("area,br,col,hr,img,wbr,input"),
            k = r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"), S = r("rp,rt"), T = t.extend({}, S, k),
            D = t.extend({}, k, r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),
            L = t.extend({}, S, r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
            A = r("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),
            E = r("script,style"), $ = t.extend({}, C, D, L, T, A),
            I = r("background,cite,href,longdesc,src,usemap,xlink:href"),
            F = r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),
            O = r("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),
            M = t.extend({}, I, O, F), N = document.createElement("pre"), j = /^(\s*)([\s\S]*?)(\s*)$/,
            P = function () {
                return String.prototype.trim ? function (e) {
                    return t.isString(e) ? e.trim() : e
                } : function (e) {
                    return t.isString(e) ? e.replace(/^\s\s*/, "").replace(/\s\s*$/, "") : e
                }
            }();
        t.module("ngSanitize", []).provider("$sanitize", n), t.module("ngSanitize").filter("linky", ["$sanitize", function (e) {
            return function (i, n) {
                function r(e) {
                    e && d.push(a(e))
                }

                if (!i) return i;
                for (var o, s, l, c = i, d = []; o = c.match(/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/);) s = o[0], o[2] || o[4] || (s = (o[3] ? "http://" : "mailto:") + s), l = o.index, r(c.substr(0, l)), function (e, i) {
                    d.push("<a "), t.isDefined(n) && d.push('target="', n, '" '), d.push('href="', e.replace(/"/g, "&quot;"), '">'), r(i), d.push("</a>")
                }(s, o[0].replace(/^mailto:/, "")), c = c.substring(l + o[0].length);
                return r(c), e(d.join(""))
            }
        }])
    }(window, window.angular)
}, function (e, t, i) {
    var n;
    void 0 !== e && void 0 !== t && e.exports === t && (e.exports = "textAngular"), function () {
        "use strict";

        function a(e) {
            try {
                return 0 !== angular.element(e).length
            } catch (e) {
                return !1
            }
        }

        function r(e, t) {
            if (!e || "" === e || _.hasOwnProperty(e)) throw"textAngular Error: A unique name is required for a Tool Definition";
            if (t.display && ("" === t.display || !a(t.display)) || !t.display && !t.buttontext && !t.iconclass) throw'textAngular Error: Tool Definition for "' + e + '" does not have a valid display/iconclass/buttontext value';
            _[e] = t
        }

        var o = {
            ie: function () {
                for (var e = 3, t = document.createElement("div"), i = t.getElementsByTagName("i"); t.innerHTML = "<!--[if gt IE " + ++e + "]><i></i><![endif]-->", i[0];) ;
                return e > 4 ? e : void 0
            }(), webkit: /AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)
        }, s = !1;
        o.webkit && (document.addEventListener("mousedown", function (e) {
            var t = e || window.event, i = t.target;
            if (s && null !== i) {
                for (var n = !1, a = i; null !== a && "html" !== a.tagName.toLowerCase() && !n;) n = "true" === a.contentEditable, a = a.parentNode;
                n || (document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0, 0), i.focus(), i.select && i.select())
            }
            s = !1
        }, !1), angular.element(document).ready(function () {
            angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">').css({
                width: "1px",
                height: "1px",
                border: 0,
                margin: 0,
                padding: 0,
                position: "absolute",
                top: "-10000px",
                left: "-10000px",
                opacity: 0,
                overflow: "hidden"
            }))
        }));
        var l = /^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,
            c = /^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;
        String.prototype.trim || (String.prototype.trim = function () {
            return this.replace(/^\s+|\s+$/g, "")
        });
        var d, u, p, f, h, g;
        if (o.ie > 8 || void 0 === o.ie) {
            for (var m = document.styleSheets, v = 0; v < m.length; v++) if ((0 === m[v].media.length || m[v].media.mediaText.match(/(all|screen)/gi)) && m[v].href && m[v].href.match(/textangular\.(min\.|)css/gi)) {
                d = m[v];
                break
            }
            d || (d = function () {
                var e = document.createElement("style");
                return o.webkit && e.appendChild(document.createTextNode("")), document.getElementsByTagName("head")[0].appendChild(e), e.sheet
            }()), u = function (e, t) {
                return f(d, e, t)
            }, f = function (e, t, i) {
                var n, a;
                return e.cssRules ? n = Math.max(e.cssRules.length - 1, 0) : e.rules && (n = Math.max(e.rules.length - 1, 0)), e.insertRule ? e.insertRule(t + "{" + i + "}", n) : e.addRule(t, i, n), d.rules ? a = d.rules[n] : d.cssRules && (a = d.cssRules[n]), a
            }, g = function (e, t) {
                var i, n;
                for (i = 0; i < t.length; i++) if (t[i].cssText === e.cssText) {
                    n = i;
                    break
                }
                return n
            }, p = function (e) {
                h(d, e)
            }, h = function (e, t) {
                var i = e.cssRules || e.rules;
                if (i && 0 !== i.length) {
                    var n = g(t, i);
                    e.removeRule ? e.removeRule(n) : e.deleteRule(n)
                }
            }
        }
        angular.module("textAngular.factories", []).factory("taBrowserTag", [function () {
            return function (e) {
                return e ? "" === e ? void 0 === o.ie ? "div" : o.ie <= 8 ? "P" : "p" : o.ie <= 8 ? e.toUpperCase() : e : o.ie <= 8 ? "P" : "p"
            }
        }]).factory("taApplyCustomRenderers", ["taCustomRenderers", "taDOM", function (e, t) {
            return function (i) {
                var n = angular.element("<div></div>");
                return n[0].innerHTML = i, angular.forEach(e, function (e) {
                    var i = [];
                    e.selector && "" !== e.selector ? i = n.find(e.selector) : e.customAttribute && "" !== e.customAttribute && (i = t.getByAttribute(n, e.customAttribute)), angular.forEach(i, function (t) {
                        t = angular.element(t), e.selector && "" !== e.selector && e.customAttribute && "" !== e.customAttribute ? void 0 !== t.attr(e.customAttribute) && e.renderLogic(t) : e.renderLogic(t)
                    })
                }), n[0].innerHTML
            }
        }]).factory("taFixChrome", function () {
            return function (e) {
                if (!e || !angular.isString(e) || e.length <= 0) return e
                    ;
                for (var t, i, n, a = /<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi, r = "", o = 0; t = a.exec(e);) (i = t[3] || t[4]) && i.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i) && (i = i.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi, ""), n = "<" + t[1].trim(), i.trim().length > 0 && (n += " style=" + t[2].substring(0, 1) + i + t[2].substring(0, 1)), n += t[5].trim() + ">", r += e.substring(o, t.index) + n, o = t.index + t[0].length);
                return r += e.substring(o), o > 0 ? r.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi, "$1") : e
            }
        }).factory("taSanitize", ["$sanitize", function (e) {
            function t(e, t) {
                for (var i, n = 0, a = 0, r = /<[^>]*>/gi; i = r.exec(e);) if (a = i.index, "/" === i[0].substr(1, 1)) {
                    if (0 === n) break;
                    n--
                } else n++;
                return t + e.substring(0, a) + angular.element(t)[0].outerHTML.substring(t.length) + e.substring(a)
            }

            function i(e) {
                if (!e || !angular.isString(e) || e.length <= 0) return e;
                for (var n, r, o, s, l, d, u = /<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi, p = "", f = "", h = 0; r = u.exec(e);) {
                    s = r[3] || r[4];
                    var g = new RegExp(c, "i");
                    if (angular.isString(s) && g.test(s)) {
                        l = "";
                        for (var m = new RegExp(c, "ig"); o = m.exec(s);) for (n = 0; n < a.length; n++) o[2 * n + 2] && (l += "<" + a[n].tag + ">");
                        d = i(e.substring(h, r.index)), p.length > 0 ? f += t(d, p) : f += d, s = s.replace(new RegExp(c, "ig"), ""), f += "<" + r[1].trim(), s.length > 0 && (f += ' style="' + s + '"'), f += r[5] + ">", h = r.index + r[0].length, p = l
                    }
                }
                return p.length > 0 ? f += t(e.substring(h), p) : f += e.substring(h), f
            }

            function n(e) {
                if (!e || !angular.isString(e) || e.length <= 0) return e;
                for (var t, i = /<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi, n = "", a = 0; t = i.exec(e);) {
                    n += e.substring(a, t.index), a = t.index + t[0].length;
                    var r = "<" + t[1] + t[5];
                    /style=("([^"]+)"|'([^']+)')/gi.test(r) ? r = r.replace(/style=("([^"]+)"|'([^']+)')/i, 'style="$2$3 text-align:' + (t[3] || t[4]) + ';"') : r += ' style="text-align:' + (t[3] || t[4]) + ';"', r += ">", n += r
                }
                return n + e.substring(a)
            }

            for (var a = [{property: "font-weight", values: ["bold"], tag: "b"}, {
                property: "font-style",
                values: ["italic"],
                tag: "i"
            }], r = [], o = 0; o < a.length; o++) {
                for (var s = "(" + a[o].property + ":\\s*(", l = 0; l < a[o].values.length; l++) l > 0 && (s += "|"), s += a[o].values[l];
                s += ");)", r.push(s)
            }
            var c = "(" + r.join("|") + ")";
            return function (t, a, r) {
                if (!r) try {
                    t = i(t)
                } catch (e) {
                }
                t = n(t);
                var o;
                try {
                    o = e(t), r && (o = t)
                } catch (e) {
                    o = a || ""
                }
                var s, l = o.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi), c = o.replace(/(&#(9|10);)*/gi, ""),
                    d = /<pre[^>]*>.*?<\/pre[^>]*>/gi, u = 0, p = 0;
                for (o = ""; null !== (s = d.exec(c)) && u < l.length;) o += c.substring(p, s.index) + l[u], p = s.index + s[0].length, u++;
                return o + c.substring(p)
            }
        }]).factory("taToolExecuteAction", ["$q", "$log", function (e, t) {
            return function (i) {
                void 0 !== i && (this.$editor = function () {
                    return i
                });
                var n, a = e.defer(), r = a.promise, o = this.$editor();
                try {
                    n = this.action(a, o.startAction()), r.finally(function () {
                        o.endAction.call(o)
                    })
                } catch (e) {
                    t.error(e)
                }
                (n || void 0 === n) && a.resolve()
            }
        }]), angular.module("textAngular.DOM", ["textAngular.factories"]).factory("taExecCommand", ["taSelection", "taBrowserTag", "$document", function (e, t, i) {
            var n = function (t, i) {
                var n, a, r = t.find("li");
                for (a = r.length - 1; a >= 0; a--) n = angular.element("<" + i + ">" + r[a].innerHTML + "</" + i + ">"), t.after(n);
                t.remove(), e.setSelectionToElementEnd(n[0])
            }, a = function (t) {
                /(<br(|\/)>)$/i.test(t.innerHTML.trim()) ? e.setSelectionBeforeElement(angular.element(t).find("br")[0]) : e.setSelectionToElementEnd(t)
            }, r = function (e, t) {
                var i = angular.element("<" + t + ">" + e[0].innerHTML + "</" + t + ">");
                e.after(i), e.remove(), a(i.find("li")[0])
            }, o = function (e, i, n) {
                for (var r = "", o = 0; o < e.length; o++) r += "<" + t("li") + ">" + e[o].innerHTML + "</" + t("li") + ">";
                var s = angular.element("<" + n + ">" + r + "</" + n + ">");
                i.after(s), i.remove(), a(s.find("li")[0])
            };
            return function (a, s) {
                return a = t(a), function (c, d, u, p) {
                    var f, h, g, m, v, y, b, _ = angular.element("<" + a + ">");
                    try {
                        b = e.getSelectionElement()
                    } catch (e) {
                    }
                    var w = angular.element(b);
                    if (void 0 !== b) {
                        var x = b.tagName.toLowerCase();
                        if ("insertorderedlist" === c.toLowerCase() || "insertunorderedlist" === c.toLowerCase()) {
                            var C = t("insertorderedlist" === c.toLowerCase() ? "ol" : "ul");
                            if (x === C) return n(w, a);
                            if ("li" === x && w.parent()[0].tagName.toLowerCase() === C && 1 === w.parent().children().length) return n(w.parent(), a);
                            if ("li" === x && w.parent()[0].tagName.toLowerCase() !== C && 1 === w.parent().children().length) return r(w.parent(), C);
                            if (x.match(l) && !w.hasClass("ta-bind")) {
                                if ("ol" === x || "ul" === x) return r(w, C);
                                var k = !1;
                                return angular.forEach(w.children(), function (e) {
                                    e.tagName.match(l) && (k = !0)
                                }), k ? o(w.children(), w, C) : o([angular.element("<div>" + b.innerHTML + "</div>")[0]], w, C)
                            }
                            if (x.match(l)) {
                                if (m = e.getOnlySelectedElements(), 0 === m.length) h = angular.element("<" + C + "><li>" + b.innerHTML + "</li></" + C + ">"), w.html(""), w.append(h); else {
                                    if (1 === m.length && ("ol" === m[0].tagName.toLowerCase() || "ul" === m[0].tagName.toLowerCase())) return m[0].tagName.toLowerCase() === C ? n(angular.element(m[0]), a) : r(angular.element(m[0]), C);
                                    g = "";
                                    var S = [];
                                    for (f = 0; f < m.length; f++) if (3 !== m[f].nodeType) {
                                        var T = angular.element(m[f]);
                                        if ("li" === m[f].tagName.toLowerCase()) continue;
                                        "ol" === m[f].tagName.toLowerCase() || "ul" === m[f].tagName.toLowerCase() ? g += T[0].innerHTML : "span" !== m[f].tagName.toLowerCase() || "ol" !== m[f].childNodes[0].tagName.toLowerCase() && "ul" !== m[f].childNodes[0].tagName.toLowerCase() ? g += "<" + t("li") + ">" + T[0].innerHTML + "</" + t("li") + ">" : g += T[0].childNodes[0].innerHTML, S.unshift(T)
                                    }
                                    h = angular.element("<" + C + ">" + g + "</" + C + ">"), S.pop().replaceWith(h), angular.forEach(S, function (e) {
                                        e.remove()
                                    })
                                }
                                return void e.setSelectionToElementEnd(h[0])
                            }
                        } else {
                            if ("formatblock" === c.toLowerCase()) {
                                for (y = u.toLowerCase().replace(/[<>]/gi, ""), "default" === y.trim() && (y = a, u = "<" + a + ">"), h = "li" === x ? w.parent() : w; !h[0].tagName || !h[0].tagName.match(l) && !h.parent().attr("contenteditable");) h = h.parent(), x = (h[0].tagName || "").toLowerCase();
                                if (x === y) {
                                    m = h.children();
                                    var D = !1;
                                    for (f = 0; f < m.length; f++) D = D || m[f].tagName.match(l);
                                    D ? (h.after(m), v = h.next(), h.remove(), h = v) : (_.append(h[0].childNodes), h.after(_), h.remove(), h = _)
                                } else if (h.parent()[0].tagName.toLowerCase() !== y || h.parent().hasClass("ta-bind")) if (x.match(/^(ul|li|ol)$/i)) h.wrap(u); else {
                                    for (m = e.getOnlySelectedElements(), 0 === m.length && (m = [h[0]]), f = 0; f < m.length; f++) if (3 === m[f].nodeType || !m[f].tagName.match(l)) for (; 3 === m[f].nodeType || !m[f].tagName || !m[f].tagName.match(l);) m[f] = m[f].parentNode;
                                    if (angular.element(m[0]).hasClass("ta-bind")) h = angular.element(u), h[0].innerHTML = m[0].innerHTML, m[0].innerHTML = h[0].outerHTML; else if ("blockquote" === y) {
                                        for (g = "", f = 0; f < m.length; f++) g += m[f].outerHTML;
                                        for (h = angular.element(u), h[0].innerHTML = g, m[0].parentNode.insertBefore(h[0], m[0]), f = m.length - 1; f >= 0; f--) m[f].parentNode && m[f].parentNode.removeChild(m[f])
                                    } else for (f = 0; f < m.length; f++) h = angular.element(u), h[0].innerHTML = m[f].innerHTML, m[f].parentNode.insertBefore(h[0], m[f]), m[f].parentNode.removeChild(m[f])
                                } else {
                                    var L = h.parent(), A = L.contents();
                                    for (f = 0; f < A.length; f++) L.parent().hasClass("ta-bind") && 3 === A[f].nodeType && (_ = angular.element("<" + a + ">"), _[0].innerHTML = A[f].outerHTML, A[f] = _[0]), L.parent()[0].insertBefore(A[f], L[0]);
                                    L.remove()
                                }
                                return void e.setSelectionToElementEnd(h[0])
                            }
                            if ("createlink" === c.toLowerCase()) {
                                var E = '<a href="' + u + '" target="' + (p.a.target ? p.a.target : "") + '">';
                                if (e.getSelection().collapsed) e.insertHtml(E + u + "</a>", s); else if (rangy.getSelection().getRangeAt(0).canSurroundContents()) {
                                    var $ = angular.element(E + "</a>")[0];
                                    rangy.getSelection().getRangeAt(0).surroundContents($)
                                }
                                return
                            }
                            if ("inserthtml" === c.toLowerCase()) return void e.insertHtml(u, s)
                        }
                    }
                    try {
                        if (i[0].execCommand(c, d, u), "fontSize" == c) for (var I = document.getElementsByTagName("font"), f = 0, F = I.length; f < F; ++f) "8" == I[f].size && (I[f].removeAttribute("size"), I[f].style.fontSize = u)
                    } catch (e) {
                    }
                }
            }
        }]).service("taSelection", ["$window", "$document", "taDOM", function (e, t, n) {
            var a = t[0], r = i(164), o = function (e, t) {
                return e.tagName && e.tagName.match(/^br$/i) && 0 === t && !e.previousSibling ? {
                    element: e.parentNode,
                    offset: 0
                } : {element: e, offset: t}
            }, s = {
                getSelection: function () {
                    var e = r.getSelection().getRangeAt(0), t = e.commonAncestorContainer, i = {
                        start: o(e.startContainer, e.startOffset),
                        end: o(e.endContainer, e.endOffset),
                        collapsed: e.collapsed
                    };
                    return t = 3 === t.nodeType ? t.parentNode : t, t.parentNode === i.start.element || t.parentNode === i.end.element ? i.container = t.parentNode : i.container = t, i
                }, getOnlySelectedElements: function () {
                    var e = r.getSelection().getRangeAt(0), t = e.commonAncestorContainer;
                    return t = 3 === t.nodeType ? t.parentNode : t, e.getNodes([1], function (e) {
                        return e.parentNode === t
                    })
                }, getSelectionElement: function () {
                    return s.getSelection().container
                }, setSelection: function (e, t, i) {
                    var n = r.createRange();
                    n.setStart(e, t), n.setEnd(e, i), r.getSelection().setSingleRange(n)
                }, setSelectionBeforeElement: function (e) {
                    var t = r.createRange();
                    t.selectNode(e), t.collapse(!0), r.getSelection().setSingleRange(t)
                }, setSelectionAfterElement: function (e) {
                    var t = r.createRange();
                    t.selectNode(e), t.collapse(!1), r.getSelection().setSingleRange(t)
                }, setSelectionToElementStart: function (e) {
                    var t = r.createRange();
                    t.selectNodeContents(e), t.collapse(!0), r.getSelection().setSingleRange(t)
                }, setSelectionToElementEnd: function (e) {
                    var t = r.createRange();
                    t.selectNodeContents(e), t.collapse(!1), e.childNodes && e.childNodes[e.childNodes.length - 1] && "br" === e.childNodes[e.childNodes.length - 1].nodeName && (t.startOffset = t.endOffset = t.startOffset - 1), r.getSelection().setSingleRange(t)
                }, insertHtml: function (e, t) {
                    var i, o, d, u, p, f, h, g = angular.element("<div>" + e + "</div>"),
                        m = r.getSelection().getRangeAt(0), v = a.createDocumentFragment(), y = g[0].childNodes, b = !0;
                    if (y.length > 0) {
                        for (u = [], d = 0; d < y.length; d++) "p" === y[d].nodeName.toLowerCase() && "" === y[d].innerHTML.trim() || 3 === y[d].nodeType && "" === y[d].nodeValue.trim() || (b = b && !l.test(y[d].nodeName), u.push(y[d]));
                        for (var _ = 0; _ < u.length; _++) f = v.appendChild(u[_]);
                        !b && m.collapsed && /^(|<br(|\/)>)$/i.test(m.startContainer.innerHTML) && m.selectNode(m.startContainer)
                    } else b = !0, f = v = a.createTextNode(e);
                    if (b) m.deleteContents(); else if (m.collapsed && m.startContainer !== t) if (m.startContainer.innerHTML && m.startContainer.innerHTML.match(/^<[^>]*>$/i)) i = m.startContainer, 1 === m.startOffset ? (m.setStartAfter(i), m.setEndAfter(i)) : (m.setStartBefore(i), m.setEndBefore(i)); else {
                        if (3 === m.startContainer.nodeType && m.startContainer.parentNode !== t) for (i = m.startContainer.parentNode, o = i.cloneNode(), n.splitNodes(i.childNodes, i, o, m.startContainer, m.startOffset); !c.test(i.nodeName);) {
                            angular.element(i).after(o), i = i.parentNode;
                            var w = o;
                            o = i.cloneNode(), n.splitNodes(i.childNodes, i, o, w)
                        } else i = m.startContainer, o = i.cloneNode(), n.splitNodes(i.childNodes, i, o, void 0, void 0, m.startOffset);
                        if (angular.element(i).after(o), m.setStartAfter(i), m.setEndAfter(i), /^(|<br(|\/)>)$/i.test(i.innerHTML.trim()) && (m.setStartBefore(i), m.setEndBefore(i), angular.element(i).remove()), /^(|<br(|\/)>)$/i.test(o.innerHTML.trim()) && angular.element(o).remove(), "li" === i.nodeName.toLowerCase()) {
                            for (h = a.createDocumentFragment(), p = 0; p < v.childNodes.length; p++) g = angular.element("<li>"), n.transferChildNodes(v.childNodes[p], g[0]), n.transferNodeAttributes(v.childNodes[p], g[0]), h.appendChild(g[0]);
                            v = h, f && (f = v.childNodes[v.childNodes.length - 1], f = f.childNodes[f.childNodes.length - 1])
                        }
                    } else m.deleteContents();
                    m.insertNode(v), f && s.setSelectionToElementEnd(f)
                }
            };
            return s
        }]).service("taDOM", function () {
            var e = {
                getByAttribute: function (t, i) {
                    var n = [], a = t.children();
                    return a.length && angular.forEach(a, function (t) {
                        n = n.concat(e.getByAttribute(angular.element(t), i))
                    }), void 0 !== t.attr(i) && n.push(t), n
                }, transferChildNodes: function (e, t) {
                    for (t.innerHTML = ""; e.childNodes.length > 0;) t.appendChild(e.childNodes[0]);
                    return t
                }, splitNodes: function (t, i, n, a, r, o) {
                    if (!a && isNaN(o)) throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");
                    for (var s = document.createDocumentFragment(), l = document.createDocumentFragment(), c = 0; t.length > 0 && (isNaN(o) || o !== c) && t[0] !== a;) s.appendChild(t[0]), c++;
                    for (!isNaN(r) && r >= 0 && t[0] && (s.appendChild(document.createTextNode(t[0].nodeValue.substring(0, r))), t[0].nodeValue = t[0].nodeValue.substring(r)); t.length > 0;) l.appendChild(t[0]);
                    e.transferChildNodes(s, i), e.transferChildNodes(l, n)
                }, transferNodeAttributes: function (e, t) {
                    for (var i = 0; i < e.attributes.length; i++) t.setAttribute(e.attributes[i].name, e.attributes[i].value);
                    return t
                }
            };
            return e
        }), angular.module("textAngular.validators", []).directive("taMaxText", function () {
            return {
                restrict: "A", require: "ngModel", link: function (e, t, i, n) {
                    var a = parseInt(e.$eval(i.taMaxText));
                    if (isNaN(a)) throw"Max text must be an integer";
                    i.$observe("taMaxText", function (e) {
                        if (a = parseInt(e), isNaN(a)) throw"Max text must be an integer";
                        n.$dirty && n.$validate()
                    }), n.$validators.taMaxText = function (e) {
                        var t = angular.element("<div/>");
                        return t.html(e), t.text().length <= a
                    }
                }
            }
        }).directive("taMinText", function () {
            return {
                restrict: "A", require: "ngModel", link: function (e, t, i, n) {
                    var a = parseInt(e.$eval(i.taMinText));
                    if (isNaN(a)) throw"Min text must be an integer";
                    i.$observe("taMinText", function (e) {
                        if (a = parseInt(e), isNaN(a)) throw"Min text must be an integer";
                        n.$dirty && n.$validate()
                    }), n.$validators.taMinText = function (e) {
                        var t = angular.element("<div/>");
                        return t.html(e), !t.text().length || t.text().length >= a
                    }
                }
            }
        }), angular.module("textAngular.taBind", ["textAngular.factories", "textAngular.DOM"]).service("_taBlankTest", [function () {
            var e = /<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;
            return function (t) {
                return function (i) {
                    if (!i) return !0;
                    var n, a = /(^[^<]|>)[^<]/i.exec(i);
                    return a ? n = a.index : (i = i.toString().replace(/="[^"]*"/i, "").replace(/="[^"]*"/i, "").replace(/="[^"]*"/i, "").replace(/="[^"]*"/i, ""), n = i.indexOf(">")), i = i.trim().substring(n, n + 100), !/^[^<>]+$/i.test(i) && (!(0 !== i.length && i !== t && !/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(i)) || !/>\s*[^\s<]/i.test(i) && !e.test(i))
                }
            }
        }]).directive("taButton", [function () {
            return {
                link: function (e, t, i) {
                    t.attr("unselectable", "on"), t.on("mousedown", function (e, t) {
                        return t && angular.extend(e, t), e.preventDefault(), !1
                    })
                }
            }
        }]).directive("taBind", ["taSanitize", "$timeout", "$window", "$document", "taFixChrome", "taBrowserTag", "taSelection", "taSelectableElements", "taApplyCustomRenderers", "taOptions", "_taBlankTest", "$parse", "taDOM", "textAngularManager", function (e, t, i, n, a, r, d, f, h, g, m, v, b, _) {
            return {
                priority: 2, require: ["ngModel", "?ngModelOptions"], link: function (r, w, x, C) {
                    function k(e) {
                        var t;
                        return W.forEach(function (i) {
                            if (i.keyCode === e.keyCode) {
                                var n = (e.metaKey ? B : 0) + (e.ctrlKey ? R : 0) + (e.shiftKey ? H : 0) + (e.altKey ? z : 0);
                                if (i.forbiddenModifiers & n) return;
                                i.mustHaveModifiers.every(function (e) {
                                    return n & e
                                }) && (t = i.specialKey)
                            }
                        }), t
                    }

                    var S, T, D, L, A = C[0], E = C[1] || {},
                        $ = void 0 !== w.attr("contenteditable") && w.attr("contenteditable"),
                        I = $ || "textarea" === w[0].tagName.toLowerCase() || "input" === w[0].tagName.toLowerCase(),
                        F = !1, O = !1, M = !1, N = x.taUnsafeSanitizer || g.disableSanitizer,
                        j = /^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,
                        P = /^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i, R = 1,
                        B = 2, z = 4, H = 8, W = [{
                            specialKey: "UndoKey",
                            forbiddenModifiers: z + H,
                            mustHaveModifiers: [B + R],
                            keyCode: 90
                        }, {
                            specialKey: "RedoKey",
                            forbiddenModifiers: z,
                            mustHaveModifiers: [B + R, H],
                            keyCode: 90
                        }, {
                            specialKey: "RedoKey",
                            forbiddenModifiers: z + H,
                            mustHaveModifiers: [B + R],
                            keyCode: 89
                        }, {
                            specialKey: "TabKey",
                            forbiddenModifiers: B + H + z + R,
                            mustHaveModifiers: [],
                            keyCode: 9
                        }, {specialKey: "ShiftTabKey", forbiddenModifiers: B + z + R, mustHaveModifiers: [H], keyCode: 9}];
                    void 0 === x.taDefaultWrap && (x.taDefaultWrap = "p"), "" === x.taDefaultWrap ? (D = "", L = void 0 === o.ie ? "<div><br></div>" : o.ie >= 11 ? "<p><br></p>" : o.ie <= 8 ? "<P>&nbsp;</P>" : "<p>&nbsp;</p>") : (D = void 0 === o.ie || o.ie >= 11 ? "<" + x.taDefaultWrap + "><br></" + x.taDefaultWrap + ">" : o.ie <= 8 ? "<" + x.taDefaultWrap.toUpperCase() + "></" + x.taDefaultWrap.toUpperCase() + ">" : "<" + x.taDefaultWrap + "></" + x.taDefaultWrap + ">", L = void 0 === o.ie || o.ie >= 11 ? "<" + x.taDefaultWrap + "><br></" + x.taDefaultWrap + ">" : o.ie <= 8 ? "<" + x.taDefaultWrap.toUpperCase() + ">&nbsp;</" + x.taDefaultWrap.toUpperCase() + ">" : "<" + x.taDefaultWrap + ">&nbsp;</" + x.taDefaultWrap + ">"), E.$options || (E.$options = {});
                    var q = m(L), V = function (e) {
                        if (q(e)) return e;
                        var t = angular.element("<div>" + e + "</div>");
                        if (0 === t.children().length) e = "<" + x.taDefaultWrap + ">" + e + "</" + x.taDefaultWrap + ">"; else {
                            var i, n = t[0].childNodes, a = !1;
                            for (i = 0; i < n.length && !(a = n[i].nodeName.toLowerCase().match(l)); i++) ;
                            if (a) for (e = "", i = 0; i < n.length; i++) if (n[i].nodeName.toLowerCase().match(l)) e += n[i].outerHTML; else {
                                var r = n[i].outerHTML || n[i].nodeValue;
                                "" !== r.trim() ? e += "<" + x.taDefaultWrap + ">" + r + "</" + x.taDefaultWrap + ">" : e += r
                            } else e = "<" + x.taDefaultWrap + ">" + e + "</" + x.taDefaultWrap + ">"
                        }
                        return e
                    };
                    x.taPaste && (T = v(x.taPaste)), w.addClass("ta-bind");
                    var U;
                    r["$undoManager" + (x.id || "")] = A.$undoManager = {
                        _stack: [],
                        _index: 0,
                        _max: 1e3,
                        push: function (e) {
                            return void 0 === e || null === e || void 0 !== this.current() && null !== this.current() && e === this.current() ? e : (this._index < this._stack.length - 1 && (this._stack = this._stack.slice(0, this._index + 1)), this._stack.push(e), U && t.cancel(U), this._stack.length > this._max && this._stack.shift(), this._index = this._stack.length - 1, e)
                        },
                        undo: function () {
                            return this.setToIndex(this._index - 1)
                        },
                        redo: function () {
                            return this.setToIndex(this._index + 1)
                        },
                        setToIndex: function (e) {
                            if (!(e < 0 || e > this._stack.length - 1)) return this._index = e, this.current()
                        },
                        current: function () {
                            return this._stack[this._index]
                        }
                    };
                    var G, J = r["$undoTaBind" + (x.id || "")] = function () {
                        if (!F && $) {
                            var e = A.$undoManager.undo();
                            void 0 !== e && null !== e && (ce(e), K(e, !1), G && t.cancel(G), G = t(function () {
                                w[0].focus(), d.setSelectionToElementEnd(w[0])
                            }, 1))
                        }
                    }, Y = r["$redoTaBind" + (x.id || "")] = function () {
                        if (!F && $) {
                            var e = A.$undoManager.redo();
                            void 0 !== e && null !== e && (ce(e), K(e, !1), G && t.cancel(G), G = t(function () {
                                w[0].focus(), d.setSelectionToElementEnd(w[0])
                            }, 1))
                        }
                    }, X = function () {
                        if ($) return w[0].innerHTML;
                        if (I) return w.val();
                        throw"textAngular Error: attempting to update non-editable taBind"
                    }, K = function (e, t, i) {
                        M = i || !1, void 0 !== t && null !== t || (t = $), void 0 !== e && null !== e || (e = X()), q(e) ? ("" !== A.$viewValue && A.$setViewValue(""), t && "" !== A.$undoManager.current() && A.$undoManager.push("")) : (le(), A.$viewValue !== e && (A.$setViewValue(e), t && A.$undoManager.push(e))), A.$render()
                    };
                    r["updateTaBind" + (x.id || "")] = function () {
                        F || K(void 0, void 0, !0)
                    };
                    var Q = function (t) {
                        return A.$oldViewValue = e(a(t), A.$oldViewValue, N)
                    };
                    if (w.attr("required") && (A.$validators.required = function (e, t) {
                        return !q(e || t)
                    }), A.$parsers.push(Q), A.$parsers.unshift(V), A.$formatters.push(Q), A.$formatters.unshift(V), A.$formatters.unshift(function (e) {
                        return A.$undoManager.push(e || "")
                    }), I) if (r.events = {}, $) {
                        var Z = !1, ee = function (i) {
                            if (i && i.trim().length) {
                                if (i.match(/class=["']*Mso(Normal|List)/i)) {
                                    var n = i.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);
                                    n = n ? n[1] : i, n = n.replace(/<o:p>[\s\S]*?<\/o:p>/gi, "").replace(/class=(["']|)MsoNormal(["']|)/gi, "");
                                    var a = angular.element("<div>" + n + "</div>"), o = angular.element("<div></div>"),
                                        s = {element: null, lastIndent: [], lastLi: null, isUl: !1};
                                    s.lastIndent.peek = function () {
                                        var e = this.length;
                                        if (e > 0) return this[e - 1]
                                    };
                                    for (var l = function (e) {
                                        s.isUl = e, s.element = angular.element(e ? "<ul>" : "<ol>"), s.lastIndent = [], s.lastIndent.peek = function () {
                                            var e = this.length;
                                            if (e > 0) return this[e - 1]
                                        }, s.lastLevelMatch = null
                                    }, c = 0; c <= a[0].childNodes.length; c++) if (a[0].childNodes[c] && "#text" !== a[0].childNodes[c].nodeName && "p" === a[0].childNodes[c].tagName.toLowerCase()) {
                                        var u = angular.element(a[0].childNodes[c]),
                                            p = (u.attr("class") || "").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);
                                        if (p) {
                                            if (u[0].childNodes.length < 2 || u[0].childNodes[1].childNodes.length < 1) continue;
                                            var f = "bullet" === p[1].toLowerCase() || "number" !== p[1].toLowerCase() && !(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(u[0].childNodes[1].innerHTML) || /^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(u[0].childNodes[1].childNodes[0].innerHTML)),
                                                h = (u.attr("style") || "").match(/margin-left:([\-\.0-9]*)/i),
                                                g = parseFloat(h ? h[1] : 0),
                                                m = (u.attr("style") || "").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);
                                            if (m && m[2] && (g = parseInt(m[2])), m && (!s.lastLevelMatch || m[1] !== s.lastLevelMatch[1]) || !p[3] || "first" === p[3].toLowerCase() || null === s.lastIndent.peek() || s.isUl !== f && s.lastIndent.peek() === g) l(f), o.append(s.element); else if (null != s.lastIndent.peek() && s.lastIndent.peek() < g) s.element = angular.element(f ? "<ul>" : "<ol>"), s.lastLi.append(s.element); else if (null != s.lastIndent.peek() && s.lastIndent.peek() > g) {
                                                for (; null != s.lastIndent.peek() && s.lastIndent.peek() > g;) if ("li" !== s.element.parent()[0].tagName.toLowerCase()) {
                                                    if (!/[uo]l/i.test(s.element.parent()[0].tagName.toLowerCase())) break;
                                                    s.element = s.element.parent(), s.lastIndent.pop()
                                                } else s.element = s.element.parent();
                                                s.isUl = "ul" === s.element[0].tagName.toLowerCase(), f !== s.isUl && (l(f), o.append(s.element))
                                            }
                                            s.lastLevelMatch = m, g !== s.lastIndent.peek() && s.lastIndent.push(g), s.lastLi = angular.element("<li>"), s.element.append(s.lastLi), s.lastLi.html(u.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi, "")), u.remove()
                                        } else l(!1), o.append(u)
                                    }
                                    var v = function (e) {
                                        e = angular.element(e);
                                        for (var t = e[0].childNodes.length - 1; t >= 0; t--) e.after(e[0].childNodes[t]);
                                        e.remove()
                                    };
                                    angular.forEach(o.find("span"), function (e) {
                                        e.removeAttribute("lang"), e.attributes.length <= 0 && v(e)
                                    }), angular.forEach(o.find("font"), v), i = o.html()
                                } else {
                                    if (i = i.replace(/<(|\/)meta[^>]*?>/gi, ""), i.match(/<[^>]*?(ta-bind)[^>]*?>/)) {
                                        if (i.match(/<[^>]*?(text-angular)[^>]*?>/)) {
                                            var y = angular.element("<div>" + i + "</div>");
                                            y.find("textarea").remove();
                                            for (var _ = b.getByAttribute(y, "ta-bind"), x = 0; x < _.length; x++) {
                                                for (var C = _[x][0].parentNode.parentNode, k = 0; k < _[x][0].childNodes.length; k++) C.parentNode.insertBefore(_[x][0].childNodes[k], C);
                                                C.parentNode.removeChild(C)
                                            }
                                            i = y.html().replace('<br class="Apple-interchange-newline">', "")
                                        }
                                    } else i.match(/^<span/) && (i = i.replace(/<(|\/)span[^>]*?>/gi, ""));
                                    i = i.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi, "").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi, "&nbsp;")
                                }
                                /<li(\s.*)?>/i.test(i) && /(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(i) === !1 && (i = i.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i, "<ul>$&</ul>")), i = i.replace(/^[ |\u00A0]+/gm, function (e) {
                                    for (var t = "", i = 0; i < e.length; i++) t += "&nbsp;";
                                    return t
                                }).replace(/\n|\r\n|\r/g, "<br />").replace(/\t/g, "&nbsp;&nbsp;&nbsp;&nbsp;"), T && (i = T(r, {$html: i}) || i), i = e(i, "", N), d.insertHtml(i, w[0]), t(function () {
                                    A.$setViewValue(X()), Z = !1, w.removeClass("processing-paste")
                                }, 0)
                            } else Z = !1, w.removeClass("processing-paste")
                        };
                        w.on("paste", r.events.paste = function (e, a) {
                            if (a && angular.extend(e, a), F || Z) return e.stopPropagation(), e.preventDefault(), !1;
                            Z = !0, w.addClass("processing-paste");
                            var r, o = (e.originalEvent || e).clipboardData;
                            if (o && o.getData && o.types.length > 0) {
                                for (var s = "", l = 0; l < o.types.length; l++) s += " " + o.types[l];
                                return /text\/html/i.test(s) ? r = o.getData("text/html") : /text\/plain/i.test(s) && (r = o.getData("text/plain")), ee(r), e.stopPropagation(), e.preventDefault(), !1
                            }
                            var c = i.rangy.saveSelection(),
                                d = angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');
                            n.find("body").append(d), d[0].focus(), t(function () {
                                i.rangy.restoreSelection(c), ee(d[0].innerHTML), w[0].focus(), d.remove()
                            }, 0)
                        }), w.on("cut", r.events.cut = function (e) {
                            F ? e.preventDefault() : t(function () {
                                A.$setViewValue(X())
                            }, 0)
                        }), w.on("keydown", r.events.keydown = function (e, t) {
                            t && angular.extend(e, t), e.specialKey = k(e);
                            var i;
                            if (g.keyMappings.forEach(function (t) {
                                e.specialKey === t.commandKeyCode && (e.specialKey = void 0), t.testForKey(e) && (i = t.commandKeyCode), "UndoKey" !== t.commandKeyCode && "RedoKey" !== t.commandKeyCode || t.enablePropagation || e.preventDefault()
                            }), void 0 !== i && (e.specialKey = i), void 0 === e.specialKey || "UndoKey" === e.specialKey && "RedoKey" === e.specialKey || (e.preventDefault(), _.sendKeyCommand(r, e)), !F && ("UndoKey" === e.specialKey && (J(), e.preventDefault()), "RedoKey" === e.specialKey && (Y(), e.preventDefault()), 13 === e.keyCode && !e.shiftKey)) {
                                var n, a = d.getSelectionElement();
                                if (!a.tagName.match(c)) return;
                                var o = angular.element(D);
                                if (/^<br(|\/)>$/i.test(a.innerHTML.trim()) && "blockquote" === a.parentNode.tagName.toLowerCase() && !a.nextSibling) {
                                    n = angular.element(a);
                                    var s = n.parent();
                                    s.after(o), n.remove(), 0 === s.children().length && s.remove(), d.setSelectionToElementStart(o[0]), e.preventDefault()
                                } else /^<[^>]+><br(|\/)><\/[^>]+>$/i.test(a.innerHTML.trim()) && "blockquote" === a.tagName.toLowerCase() && (n = angular.element(a), n.after(o), n.remove(), d.setSelectionToElementStart(o[0]), e.preventDefault())
                            }
                        });
                        var te;
                        if (w.on("keyup", r.events.keyup = function (e, n) {
                            if (n && angular.extend(e, n), 9 === e.keyCode) {
                                return void(d.getSelection().start.element === w[0] && w.children().length && d.setSelectionToElementStart(w.children()[0]))
                            }
                            if (U && t.cancel(U), !F && !j.test(e.keyCode)) {
                                if ("" !== D && 13 === e.keyCode && !e.shiftKey) {
                                    for (var a = d.getSelectionElement(); !a.tagName.match(c) && a !== w[0];) a = a.parentNode;
                                    if (a.tagName.toLowerCase() !== x.taDefaultWrap && "li" !== a.tagName.toLowerCase() && ("" === a.innerHTML.trim() || "<br>" === a.innerHTML.trim())) {
                                        var r = angular.element(D);
                                        angular.element(a).replaceWith(r), d.setSelectionToElementStart(r[0])
                                    }
                                }
                                var o = X();
                                if ("" !== D && "" === o.trim()) ce(D), d.setSelectionToElementStart(w.children()[0]); else if ("<" !== o.substring(0, 1) && "" !== x.taDefaultWrap) {
                                    var s = i.rangy.saveSelection();
                                    o = X(), o = "<" + x.taDefaultWrap + ">" + o + "</" + x.taDefaultWrap + ">", ce(o), i.rangy.restoreSelection(s)
                                }
                                var l = S !== e.keyCode && P.test(e.keyCode);
                                te && t.cancel(te), te = t(function () {
                                    K(o, l, !0)
                                }, E.$options.debounce || 400), l || (U = t(function () {
                                    A.$undoManager.push(o)
                                }, 250)), S = e.keyCode
                            }
                        }), w.on("blur", r.events.blur = function () {
                            O = !1, F ? (M = !0, A.$render()) : K(void 0, void 0, !0)
                        }), x.placeholder && (o.ie > 8 || void 0 === o.ie)) {
                            var ie;
                            if (!x.id) throw"textAngular Error: An unique ID is required for placeholders to work";
                            ie = u("#" + x.id + ".placeholder-text:before", 'content: "' + x.placeholder + '"'), r.$on("$destroy", function () {
                                p(ie)
                            })
                        }
                        w.on("focus", r.events.focus = function () {
                            O = !0, w.removeClass("placeholder-text"), le()
                        });
                        w.on("mouseup", r.events.mouseup = function (e) {
                            d.getSelection().start.element === w[0] && w.children().length && d.setSelectionToElementStart(w.children()[0])
                        }), w.on("mousedown", r.events.mousedown = function (e, t) {
                            t && angular.extend(e, t), e.stopPropagation()
                        })
                    } else {
                        w.on("change blur", r.events.change = r.events.blur = function () {
                            F || A.$setViewValue(X())
                        }), w.on("keydown", r.events.keydown = function (e, t) {
                            if (t && angular.extend(e, t), 9 === e.keyCode) {
                                var i = this.selectionStart, n = this.selectionEnd, a = w.val();
                                if (e.shiftKey) {
                                    var r = a.lastIndexOf("\n", i), o = a.lastIndexOf("\t", i);
                                    o !== -1 && o >= r && (w.val(a.substring(0, o) + a.substring(o + 1)), this.selectionStart = this.selectionEnd = i - 1)
                                } else w.val(a.substring(0, i) + "\t" + a.substring(n)), this.selectionStart = this.selectionEnd = i + 1;
                                e.preventDefault()
                            }
                        });
                        var ne = function (e, t) {
                            for (var i = "", n = 0; n < t; n++) i += e;
                            return i
                        }, ae = function (e, t) {
                            var i = "", n = e.childNodes;
                            t++, i += ne("\t", t - 1) + e.outerHTML.substring(0, e.outerHTML.indexOf("<li"));
                            for (var a = 0; a < n.length; a++) n[a].outerHTML && ("ul" === n[a].nodeName.toLowerCase() || "ol" === n[a].nodeName.toLowerCase() ? i += "\n" + ae(n[a], t) : i += "\n" + ne("\t", t) + n[a].outerHTML);
                            return i += "\n" + ne("\t", t - 1) + e.outerHTML.substring(e.outerHTML.lastIndexOf("<"))
                        };
                        A.$formatters.unshift(function (e) {
                            var t = angular.element("<div>" + e + "</div>")[0].childNodes;
                            if (t.length > 0) {
                                e = "";
                                for (var i = 0; i < t.length; i++) t[i].outerHTML && (e.length > 0 && (e += "\n"), "ul" === t[i].nodeName.toLowerCase() || "ol" === t[i].nodeName.toLowerCase() ? e += "" + ae(t[i], 0) : e += "" + t[i].outerHTML)
                            }
                            return e
                        })
                    }
                    var re, oe = function (e) {
                        return r.$emit("ta-element-select", this), e.preventDefault(), !1
                    }, se = function (e, i) {
                        if (i && angular.extend(e, i), !y && !F) {
                            y = !0;
                            var n;
                            n = e.originalEvent ? e.originalEvent.dataTransfer : e.dataTransfer, r.$emit("ta-drop-event", this, e, n), t(function () {
                                y = !1, K(void 0, void 0, !0)
                            }, 100)
                        }
                    }, le = r["reApplyOnSelectorHandlers" + (x.id || "")] = function () {
                        F || angular.forEach(f, function (e) {
                            w.find(e).off("click", oe).on("click", oe)
                        })
                    }, ce = function (e) {
                        w[0].innerHTML = e
                    }, de = !1;
                    A.$render = function () {
                        if (!de) {
                            de = !0;
                            var e = A.$viewValue || "";
                            M || ($ && O && (w.removeClass("placeholder-text"), re && t.cancel(re), re = t(function () {
                                O || (w[0].focus(), d.setSelectionToElementEnd(w.children()[w.children().length - 1])), re = void 0
                            }, 1)), $ ? (ce(x.placeholder ? "" === e ? D : e : "" === e ? D : e), F ? w.off("drop", se) : (le(), w.on("drop", se))) : "textarea" !== w[0].tagName.toLowerCase() && "input" !== w[0].tagName.toLowerCase() ? ce(h(e)) : w.val(e)), $ && x.placeholder && ("" === e ? O ? w.removeClass("placeholder-text") : w.addClass("placeholder-text") : w.removeClass("placeholder-text")), de = M = !1
                        }
                    }, x.taReadonly && (F = r.$eval(x.taReadonly), F ? (w.addClass("ta-readonly"), "textarea" !== w[0].tagName.toLowerCase() && "input" !== w[0].tagName.toLowerCase() || w.attr("disabled", "disabled"), void 0 !== w.attr("contenteditable") && w.attr("contenteditable") && w.removeAttr("contenteditable")) : (w.removeClass("ta-readonly"), "textarea" === w[0].tagName.toLowerCase() || "input" === w[0].tagName.toLowerCase() ? w.removeAttr("disabled") : $ && w.attr("contenteditable", "true")), r.$watch(x.taReadonly, function (e, t) {
                        t !== e && (e ? (w.addClass("ta-readonly"), "textarea" !== w[0].tagName.toLowerCase() && "input" !== w[0].tagName.toLowerCase() || w.attr("disabled", "disabled"), void 0 !== w.attr("contenteditable") && w.attr("contenteditable") && w.removeAttr("contenteditable"), angular.forEach(f, function (e) {
                            w.find(e).on("click", oe)
                        }), w.off("drop", se)) : (w.removeClass("ta-readonly"), "textarea" === w[0].tagName.toLowerCase() || "input" === w[0].tagName.toLowerCase() ? w.removeAttr("disabled") : $ && w.attr("contenteditable", "true"), angular.forEach(f, function (e) {
                            w.find(e).off("click", oe)
                        }), w.on("drop", se)), F = e)
                    })), $ && !F && (angular.forEach(f, function (e) {
                        w.find(e).on("click", oe)
                    }), w.on("drop", se), w.on("blur", function () {
                        o.webkit && (s = !0)
                    }))
                }
            }
        }]);
        var y = !1,
            b = angular.module("textAngular", ["ngSanitize", "textAngularSetup", "textAngular.factories", "textAngular.DOM", "textAngular.validators", "textAngular.taBind"]),
            _ = {};
        b.constant("taRegisterTool", r), b.value("taTools", _), b.config([function () {
            angular.forEach(_, function (e, t) {
                delete _[t]
            })
        }]), b.run([function () {
            void 0 !== (n = function (e) {
                window.rangy = i(164), window.rangy.saveSelection = i(277)
            }.call(t, i, t, e)) && (e.exports = n)
        }]), b.directive("textAngular", ["$compile", "$timeout", "taOptions", "taSelection", "taExecCommand", "textAngularManager", "$window", "$document", "$animate", "$log", "$q", "$parse", function (e, t, i, n, a, r, o, s, l, c, d, u) {
            return {
                require: "?ngModel", scope: {}, restrict: "EA", priority: 2, link: function (p, f, h, g) {
                    var m, v, y, b, _, w, x, C, k, S, T, D = h.serial ? h.serial : Math.floor(1e16 * Math.random());
                    p._name = h.name ? h.name : "textAngularEditor" + D;
                    var L = function (e, i, n) {
                        t(function () {
                            var t = function () {
                                e.off(i, t), n.apply(this, arguments)
                            };
                            e.on(i, t)
                        }, 100)
                    };
                    if (k = a(h.taDefaultWrap), angular.extend(p, angular.copy(i), {
                        wrapSelection: function (e, t, i) {
                            "undo" === e.toLowerCase() ? p["$undoTaBindtaTextElement" + D]() : "redo" === e.toLowerCase() ? p["$redoTaBindtaTextElement" + D]() : (k(e, !1, t, p.defaultTagAttributes), i && p["reApplyOnSelectorHandlerstaTextElement" + D](), p.displayElements.text[0].focus())
                        }, showHtml: p.$eval(h.taShowHtml) || !1
                    }), h.taFocussedClass && (p.classes.focussed = h.taFocussedClass), h.taTextEditorClass && (p.classes.textEditor = h.taTextEditorClass), h.taHtmlEditorClass && (p.classes.htmlEditor = h.taHtmlEditorClass), h.taDefaultTagAttributes) try {
                        angular.extend(p.defaultTagAttributes, angular.fromJson(h.taDefaultTagAttributes))
                    } catch (e) {
                        c.error(e)
                    }
                    h.taTextEditorSetup && (p.setup.textEditorSetup = p.$parent.$eval(h.taTextEditorSetup)), h.taHtmlEditorSetup && (p.setup.htmlEditorSetup = p.$parent.$eval(h.taHtmlEditorSetup)), h.taFileDrop ? p.fileDropHandler = p.$parent.$eval(h.taFileDrop) : p.fileDropHandler = p.defaultFileDropHandler, x = f[0].innerHTML, f[0].innerHTML = "", p.displayElements = {
                        forminput: angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),
                        html: angular.element("<textarea></textarea>"),
                        text: angular.element("<div></div>"),
                        scrollWindow: angular.element("<div class='ta-scroll-window'></div>"),
                        popover: angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),
                        popoverArrow: angular.element('<div class="arrow"></div>'),
                        popoverContainer: angular.element('<div class="popover-content"></div>'),
                        resize: {
                            overlay: angular.element('<div class="ta-resizer-handle-overlay"></div>'),
                            background: angular.element('<div class="ta-resizer-handle-background"></div>'),
                            anchors: [angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'), angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'), angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'), angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],
                            info: angular.element('<div class="ta-resizer-handle-info"></div>')
                        }
                    }, p.displayElements.popover.append(p.displayElements.popoverArrow), p.displayElements.popover.append(p.displayElements.popoverContainer), p.displayElements.scrollWindow.append(p.displayElements.popover), p.displayElements.popover.on("mousedown", function (e, t) {
                        return t && angular.extend(e, t), e.preventDefault(), !1
                    }), p.showPopover = function (e) {
                        p.displayElements.popover.css("display", "block"), p.reflowPopover(e), l.addClass(p.displayElements.popover, "in"), L(s.find("body"), "click keyup", function () {
                            p.hidePopover()
                        })
                    }, p.reflowPopover = function (e) {
                        p.displayElements.text[0].offsetHeight - 51 > e[0].offsetTop ? (p.displayElements.popover.css("top", e[0].offsetTop + e[0].offsetHeight + p.displayElements.scrollWindow[0].scrollTop + "px"), p.displayElements.popover.removeClass("top").addClass("bottom")) : (p.displayElements.popover.css("top", e[0].offsetTop - 54 + p.displayElements.scrollWindow[0].scrollTop + "px"), p.displayElements.popover.removeClass("bottom").addClass("top"));
                        var t = p.displayElements.text[0].offsetWidth - p.displayElements.popover[0].offsetWidth,
                            i = e[0].offsetLeft + e[0].offsetWidth / 2 - p.displayElements.popover[0].offsetWidth / 2;
                        p.displayElements.popover.css("left", Math.max(0, Math.min(t, i)) + "px"), p.displayElements.popoverArrow.css("margin-left", Math.min(i, Math.max(0, i - t)) - 11 + "px")
                    }, p.hidePopover = function () {
                        p.displayElements.popover.css("display", ""), p.displayElements.popoverContainer.attr("style", ""), p.displayElements.popoverContainer.attr("class", "popover-content"), p.displayElements.popover.removeClass("in")
                    }, p.displayElements.resize.overlay.append(p.displayElements.resize.background), angular.forEach(p.displayElements.resize.anchors, function (e) {
                        p.displayElements.resize.overlay.append(e)
                    }), p.displayElements.resize.overlay.append(p.displayElements.resize.info), p.displayElements.scrollWindow.append(p.displayElements.resize.overlay), p.reflowResizeOverlay = function (e) {
                        e = angular.element(e)[0], p.displayElements.resize.overlay.css({
                            display: "block",
                            left: e.offsetLeft - 5 + "px",
                            top: e.offsetTop - 5 + "px",
                            width: e.offsetWidth + 10 + "px",
                            height: e.offsetHeight + 10 + "px"
                        }), p.displayElements.resize.info.text(e.offsetWidth + " x " + e.offsetHeight)
                    }, p.showResizeOverlay = function (e) {
                        var t = s.find("body");
                        S = function (i) {
                            var n = {
                                width: parseInt(e.attr("width")),
                                height: parseInt(e.attr("height")),
                                x: i.clientX,
                                y: i.clientY
                            };
                            (void 0 === n.width || isNaN(n.width)) && (n.width = e[0].offsetWidth), (void 0 === n.height || isNaN(n.height)) && (n.height = e[0].offsetHeight), p.hidePopover();
                            var a = n.height / n.width, r = function (t) {
                                function i(e) {
                                    return Math.round(Math.max(0, e))
                                }

                                var r = {
                                    x: Math.max(0, n.width + (t.clientX - n.x)),
                                    y: Math.max(0, n.height + (t.clientY - n.y))
                                }, o = void 0 !== h.taResizeForceAspectRatio, s = h.taResizeMaintainAspectRatio;
                                if (o || s && !t.shiftKey) {
                                    var l = r.y / r.x;
                                    r.x = a > l ? r.x : r.y / a, r.y = a > l ? r.x * a : r.y
                                }
                                var c = angular.element(e);
                                c.css("height", i(r.y) + "px"), c.css("width", i(r.x) + "px"), p.reflowResizeOverlay(e)
                            };
                            t.on("mousemove", r), L(t, "mouseup", function (i) {
                                i.preventDefault(), i.stopPropagation(), t.off("mousemove", r), p.showPopover(e)
                            }), i.stopPropagation(), i.preventDefault()
                        }, p.displayElements.resize.anchors[3].off("mousedown"), p.displayElements.resize.anchors[3].on("mousedown", S), p.reflowResizeOverlay(e), L(t, "click", function () {
                            p.hideResizeOverlay()
                        })
                    }, p.hideResizeOverlay = function () {
                        p.displayElements.resize.anchors[3].off("mousedown", S), p.displayElements.resize.overlay.css("display", "")
                    }, p.setup.htmlEditorSetup(p.displayElements.html), p.setup.textEditorSetup(p.displayElements.text), p.displayElements.html.attr({
                        id: "taHtmlElement" + D,
                        "ng-show": "showHtml",
                        "ta-bind": "ta-bind",
                        "ng-model": "html",
                        "ng-model-options": f.attr("ng-model-options")
                    }), p.displayElements.text.attr({
                        id: "taTextElement" + D,
                        contentEditable: "true",
                        "ta-bind": "ta-bind",
                        "ng-model": "html",
                        "ng-model-options": f.attr("ng-model-options")
                    }), p.displayElements.scrollWindow.attr({"ng-hide": "showHtml"}), h.taDefaultWrap && p.displayElements.text.attr("ta-default-wrap", h.taDefaultWrap), h.taUnsafeSanitizer && (p.displayElements.text.attr("ta-unsafe-sanitizer", h.taUnsafeSanitizer), p.displayElements.html.attr("ta-unsafe-sanitizer", h.taUnsafeSanitizer)), p.displayElements.scrollWindow.append(p.displayElements.text), f.append(p.displayElements.scrollWindow), f.append(p.displayElements.html), p.displayElements.forminput.attr("name", p._name), f.append(p.displayElements.forminput), h.tabindex && (f.removeAttr("tabindex"), p.displayElements.text.attr("tabindex", h.tabindex), p.displayElements.html.attr("tabindex", h.tabindex)), h.placeholder && (p.displayElements.text.attr("placeholder", h.placeholder), p.displayElements.html.attr("placeholder", h.placeholder)), h.taDisabled && (p.displayElements.text.attr("ta-readonly", "disabled"), p.displayElements.html.attr("ta-readonly", "disabled"), p.disabled = p.$parent.$eval(h.taDisabled), p.$parent.$watch(h.taDisabled, function (e) {
                        p.disabled = e, p.disabled ? f.addClass(p.classes.disabled) : f.removeClass(p.classes.disabled)
                    })), h.taPaste && (p._pasteHandler = function (e) {
                        return u(h.taPaste)(p.$parent, {$html: e})
                    }, p.displayElements.text.attr("ta-paste", "_pasteHandler($html)")), e(p.displayElements.scrollWindow)(p), e(p.displayElements.html)(p), p.updateTaBindtaTextElement = p["updateTaBindtaTextElement" + D], p.updateTaBindtaHtmlElement = p["updateTaBindtaHtmlElement" + D], f.addClass("ta-root"), p.displayElements.scrollWindow.addClass("ta-text ta-editor " + p.classes.textEditor), p.displayElements.html.addClass("ta-html ta-editor " + p.classes.htmlEditor), p._actionRunning = !1;
                    var A = !1;
                    if (p.startAction = function () {
                        return p._actionRunning = !0, A = o.rangy.saveSelection(), function () {
                            A && o.rangy.restoreSelection(A)
                        }
                    }, p.endAction = function () {
                        p._actionRunning = !1, A && (p.showHtml ? p.displayElements.html[0].focus() : p.displayElements.text[0].focus(), o.rangy.removeMarkers(A)), A = !1, p.updateSelectedStyles(), p.showHtml || p["updateTaBindtaTextElement" + D]()
                    }, _ = function () {
                        p.focussed = !0, f.addClass(p.classes.focussed), C.focus(), f.triggerHandler("focus")
                    }, p.displayElements.html.on("focus", _), p.displayElements.text.on("focus", _), w = function (e) {
                        return p._actionRunning || s[0].activeElement === p.displayElements.html[0] || s[0].activeElement === p.displayElements.text[0] || (f.removeClass(p.classes.focussed), C.unfocus(), t(function () {
                            p._bUpdateSelectedStyles = !1, f.triggerHandler("blur"), p.focussed = !1
                        }, 0)), e.preventDefault(), !1
                    }, p.displayElements.html.on("blur", w), p.displayElements.text.on("blur", w), p.displayElements.text.on("paste", function (e) {
                        f.triggerHandler("paste", e)
                    }), p.queryFormatBlockState = function (e) {
                        return !p.showHtml && e.toLowerCase() === s[0].queryCommandValue("formatBlock").toLowerCase()
                    }, p.queryCommandState = function (e) {
                        return p.showHtml ? "" : s[0].queryCommandState(e)
                    }, p.switchView = function () {
                        p.showHtml = !p.showHtml, l.enabled(!1, p.displayElements.html), l.enabled(!1, p.displayElements.text), p.showHtml ? t(function () {
                            return l.enabled(!0, p.displayElements.html), l.enabled(!0, p.displayElements.text), p.displayElements.html[0].focus()
                        }, 100) : t(function () {
                            return l.enabled(!0, p.displayElements.html), l.enabled(!0, p.displayElements.text), p.displayElements.text[0].focus()
                        }, 100)
                    }, h.ngModel) {
                        var E = !0;
                        g.$render = function () {
                            if (E) {
                                E = !1;
                                var e = p.$parent.$eval(h.ngModel);
                                void 0 !== e && null !== e || !x || "" === x || g.$setViewValue(x)
                            }
                            p.displayElements.forminput.val(g.$viewValue), p.html = g.$viewValue || ""
                        }, f.attr("required") && (g.$validators.required = function (e, t) {
                            var i = e || t;
                            return !(!i || "" === i.trim())
                        })
                    } else p.displayElements.forminput.val(x), p.html = x;
                    if (p.$watch("html", function (e, t) {
                        e !== t && (h.ngModel && g.$viewValue !== e && g.$setViewValue(e), p.displayElements.forminput.val(e))
                    }), h.taTargetToolbars) C = r.registerEditor(p._name, p, h.taTargetToolbars.split(",")); else {
                        var $ = angular.element('<div text-angular-toolbar name="textAngularToolbar' + D + '">');
                        h.taToolbar && $.attr("ta-toolbar", h.taToolbar), h.taToolbarClass && $.attr("ta-toolbar-class", h.taToolbarClass), h.taToolbarGroupClass && $.attr("ta-toolbar-group-class", h.taToolbarGroupClass), h.taToolbarButtonClass && $.attr("ta-toolbar-button-class", h.taToolbarButtonClass), h.taToolbarActiveButtonClass && $.attr("ta-toolbar-active-button-class", h.taToolbarActiveButtonClass), h.taFocussedClass && $.attr("ta-focussed-class", h.taFocussedClass), f.prepend($), e($)(p.$parent), C = r.registerEditor(p._name, p, ["textAngularToolbar" + D])
                    }
                    p.$on("$destroy", function () {
                        r.unregisterEditor(p._name), angular.element(window).off("blur")
                    }), p.$on("ta-element-select", function (e, t) {
                        C.triggerElementSelect(e, t) && p["reApplyOnSelectorHandlerstaTextElement" + D]()
                    }), p.$on("ta-drop-event", function (e, i, n, a) {
                        p.displayElements.text[0].focus(), a && a.files && a.files.length > 0 ? (angular.forEach(a.files, function (e) {
                            try {
                                d.when(p.fileDropHandler(e, p.wrapSelection) || p.fileDropHandler !== p.defaultFileDropHandler && d.when(p.defaultFileDropHandler(e, p.wrapSelection))).then(function () {
                                    p["updateTaBindtaTextElement" + D]()
                                })
                            } catch (e) {
                                c.error(e)
                            }
                        }), n.preventDefault(), n.stopPropagation()) : t(function () {
                            p["updateTaBindtaTextElement" + D]()
                        }, 0)
                    }), p._bUpdateSelectedStyles = !1, angular.element(window).on("blur", function () {
                        p._bUpdateSelectedStyles = !1, p.focussed = !1
                    }), p.updateSelectedStyles = function () {
                        var e;
                        T && t.cancel(T), void 0 !== (e = n.getSelectionElement()) && e.parentNode !== p.displayElements.text[0] ? C.updateSelectedStyles(angular.element(e)) : C.updateSelectedStyles(), p._bUpdateSelectedStyles && (T = t(p.updateSelectedStyles, 200))
                    }, m = function () {
                        if (!p.focussed) return void(p._bUpdateSelectedStyles = !1);
                        p._bUpdateSelectedStyles || (p._bUpdateSelectedStyles = !0, p.$apply(function () {
                            p.updateSelectedStyles()
                        }))
                    }, p.displayElements.html.on("keydown", m), p.displayElements.text.on("keydown", m), v = function () {
                        p._bUpdateSelectedStyles = !1
                    }, p.displayElements.html.on("keyup", v), p.displayElements.text.on("keyup", v), y = function (e, t) {
                        t && angular.extend(e, t), p.$apply(function () {
                            if (C.sendKeyCommand(e)) return p._bUpdateSelectedStyles || p.updateSelectedStyles(), e.preventDefault(), !1
                        })
                    }, p.displayElements.html.on("keypress", y), p.displayElements.text.on("keypress", y), b = function () {
                        p._bUpdateSelectedStyles = !1, p.$apply(function () {
                            p.updateSelectedStyles()
                        })
                    }, p.displayElements.html.on("mouseup", b), p.displayElements.text.on("mouseup", b)
                }
            }
        }]), b.service("textAngularManager", ["taToolExecuteAction", "taTools", "taRegisterTool", function (e, t, i) {
            var n = {}, a = {};
            return {
                registerEditor: function (i, r, o) {
                    if (!i || "" === i) throw"textAngular Error: An editor requires a name";
                    if (!r) throw"textAngular Error: An editor requires a scope";
                    if (a[i]) throw'textAngular Error: An Editor with name "' + i + '" already exists';
                    var s = [];
                    return angular.forEach(o, function (e) {
                        n[e] && s.push(n[e])
                    }), a[i] = {
                        scope: r, toolbars: o, _registerToolbar: function (e) {
                            this.toolbars.indexOf(e.name) >= 0 && s.push(e)
                        }, editorFunctions: {
                            disable: function () {
                                angular.forEach(s, function (e) {
                                    e.disabled = !0
                                })
                            }, enable: function () {
                                angular.forEach(s, function (e) {
                                    e.disabled = !1
                                })
                            }, focus: function () {
                                angular.forEach(s, function (e) {
                                    e._parent = r, e.disabled = !1, e.focussed = !0, r.focussed = !0
                                })
                            }, unfocus: function () {
                                angular.forEach(s, function (e) {
                                    e.disabled = !0, e.focussed = !1
                                }), r.focussed = !1
                            }, updateSelectedStyles: function (e) {
                                angular.forEach(s, function (t) {
                                    angular.forEach(t.tools, function (i) {
                                        i.activeState && (t._parent = r, i.active = i.activeState(e))
                                    })
                                })
                            }, sendKeyCommand: function (i) {
                                var n = !1;
                                return (i.ctrlKey || i.metaKey || i.specialKey) && angular.forEach(t, function (t, a) {
                                    if (t.commandKeyCode && (t.commandKeyCode === i.which || t.commandKeyCode === i.specialKey)) for (var o = 0; o < s.length; o++) if (void 0 !== s[o].tools[a]) {
                                        e.call(s[o].tools[a], r), n = !0;
                                        break
                                    }
                                }), n
                            }, triggerElementSelect: function (e, i) {
                                var n = function (e, t) {
                                    for (var i = !0, n = 0; n < t.length; n++) i = i && e.attr(t[n]);
                                    return i
                                }, a = [], o = {}, l = !1;
                                i = angular.element(i);
                                var c = !1;
                                if (angular.forEach(t, function (e, t) {
                                    e.onElementSelect && e.onElementSelect.element && e.onElementSelect.element.toLowerCase() === i[0].tagName.toLowerCase() && (!e.onElementSelect.filter || e.onElementSelect.filter(i)) && (c = c || angular.isArray(e.onElementSelect.onlyWithAttrs) && n(i, e.onElementSelect.onlyWithAttrs), e.onElementSelect.onlyWithAttrs && !n(i, e.onElementSelect.onlyWithAttrs) || (o[t] = e))
                                }), c ? (angular.forEach(o, function (e, t) {
                                    e.onElementSelect.onlyWithAttrs && n(i, e.onElementSelect.onlyWithAttrs) && a.push({
                                        name: t,
                                        tool: e
                                    })
                                }), a.sort(function (e, t) {
                                    return t.tool.onElementSelect.onlyWithAttrs.length - e.tool.onElementSelect.onlyWithAttrs.length
                                })) : angular.forEach(o, function (e, t) {
                                    a.push({name: t, tool: e})
                                }), a.length > 0) for (var d = 0; d < a.length; d++) {
                                    for (var u = a[d].tool, p = a[d].name, f = 0; f < s.length; f++) if (void 0 !== s[f].tools[p]) {
                                        u.onElementSelect.action.call(s[f].tools[p], e, i, r), l = !0;
                                        break
                                    }
                                    if (l) break
                                }
                                return l
                            }
                        }
                    }, a[i].editorFunctions
                }, retrieveEditor: function (e) {
                    return a[e]
                }, unregisterEditor: function (e) {
                    delete a[e]
                }, registerToolbar: function (e) {
                    if (!e) throw"textAngular Error: A toolbar requires a scope";
                    if (!e.name || "" === e.name) throw"textAngular Error: A toolbar requires a name";
                    if (n[e.name]) throw'textAngular Error: A toolbar with name "' + e.name + '" already exists';
                    n[e.name] = e, angular.forEach(a, function (t) {
                        t._registerToolbar(e)
                    })
                }, retrieveToolbar: function (e) {
                    return n[e]
                }, retrieveToolbarsViaEditor: function (e) {
                    var t = [], i = this;
                    return angular.forEach(this.retrieveEditor(e).toolbars, function (e) {
                        t.push(i.retrieveToolbar(e))
                    }), t
                }, unregisterToolbar: function (e) {
                    delete n[e]
                }, updateToolsDisplay: function (e) {
                    var t = this;
                    angular.forEach(e, function (e, i) {
                        t.updateToolDisplay(i, e)
                    })
                }, resetToolsDisplay: function () {
                    var e = this;
                    angular.forEach(t, function (t, i) {
                        e.resetToolDisplay(i)
                    })
                }, updateToolDisplay: function (e, t) {
                    var i = this;
                    angular.forEach(n, function (n, a) {
                        i.updateToolbarToolDisplay(a, e, t)
                    })
                }, resetToolDisplay: function (e) {
                    var t = this;
                    angular.forEach(n, function (i, n) {
                        t.resetToolbarToolDisplay(n, e)
                    })
                }, updateToolbarToolDisplay: function (e, t, i) {
                    if (!n[e]) throw'textAngular Error: No Toolbar with name "' + e + '" exists';
                    n[e].updateToolDisplay(t, i)
                }, resetToolbarToolDisplay: function (e, i) {
                    if (!n[e]) throw'textAngular Error: No Toolbar with name "' + e + '" exists';
                    n[e].updateToolDisplay(i, t[i], !0)
                }, removeTool: function (e) {
                    delete t[e], angular.forEach(n, function (t) {
                        delete t.tools[e];
                        for (var i = 0; i < t.toolbar.length; i++) {
                            for (var n, a = 0; a < t.toolbar[i].length; a++) {
                                if (t.toolbar[i][a] === e) {
                                    n = {group: i, index: a};
                                    break
                                }
                                if (void 0 !== n) break
                            }
                            void 0 !== n && (t.toolbar[n.group].slice(n.index, 1), t._$element.children().eq(n.group).children().eq(n.index).remove())
                        }
                    })
                }, addTool: function (e, t, a, r) {
                    i(e, t), angular.forEach(n, function (i) {
                        i.addTool(e, t, a, r)
                    })
                }, addToolToToolbar: function (e, t, a, r, o) {
                    i(e, t), n[a].addTool(e, t, r, o)
                }, refreshEditor: function (e) {
                    if (!a[e]) throw'textAngular Error: No Editor with name "' + e + '" exists';
                    a[e].scope.updateTaBindtaTextElement(), a[e].scope.$$phase || a[e].scope.$digest()
                }, sendKeyCommand: function (e, t) {
                    angular.forEach(a, function (i) {
                        if (i.editorFunctions.sendKeyCommand(t)) return e._bUpdateSelectedStyles || e.updateSelectedStyles(), t.preventDefault(), !1
                    })
                }
            }
        }]), b.directive("textAngularToolbar", ["$compile", "textAngularManager", "taOptions", "taTools", "taToolExecuteAction", "$window", function (e, t, i, n, a, r) {
            return {
                scope: {name: "@"}, restrict: "EA", link: function (o, s, l) {
                    if (!o.name || "" === o.name) throw"textAngular Error: A toolbar requires a name";
                    angular.extend(o, angular.copy(i)), l.taToolbar && (o.toolbar = o.$parent.$eval(l.taToolbar)), l.taToolbarClass && (o.classes.toolbar = l.taToolbarClass), l.taToolbarGroupClass && (o.classes.toolbarGroup = l.taToolbarGroupClass), l.taToolbarButtonClass && (o.classes.toolbarButton = l.taToolbarButtonClass), l.taToolbarActiveButtonClass && (o.classes.toolbarButtonActive = l.taToolbarActiveButtonClass), l.taFocussedClass && (o.classes.focussed = l.taFocussedClass), o.disabled = !0, o.focussed = !1, o._$element = s, s[0].innerHTML = "", s.addClass("ta-toolbar " + o.classes.toolbar), o.$watch("focussed", function () {
                        o.focussed ? s.addClass(o.classes.focussed) : s.removeClass(o.classes.focussed)
                    });
                    var c = function (t, i) {
                        var n;
                        if (n = t && t.display ? angular.element(t.display) : angular.element("<button type='button'>"), t && t.class ? n.addClass(t.class) : n.addClass(o.classes.toolbarButton), n.attr("name", i.name), n.attr("ta-button", "ta-button"), n.attr("ng-disabled", "isDisabled()"), n.attr("tabindex", "-1"), n.attr("ng-click", "executeAction()"), n.attr("ng-class", "displayActiveToolClass(active)"), t && t.tooltiptext && n.attr("title", t.tooltiptext), t && !t.display && !i._display && (n[0].innerHTML = "", t.buttontext && (n[0].innerHTML = t.buttontext), t.iconclass)) {
                            var a = angular.element("<i>"), r = n[0].innerHTML;
                            a.addClass(t.iconclass), n[0].innerHTML = "", n.append(a), r && "" !== r && n.append("&nbsp;" + r)
                        }
                        return i._lastToolDefinition = angular.copy(t), e(n)(i)
                    };
                    o.tools = {}, o._parent = {
                        disabled: !0, showHtml: !1, queryFormatBlockState: function () {
                            return !1
                        }, queryCommandState: function () {
                            return !1
                        }
                    };
                    var d = {
                        $window: r, $editor: function () {
                            return o._parent
                        }, isDisabled: function () {
                            return "function" != typeof this.$eval("disabled") && this.$eval("disabled") || this.$eval("disabled()") || "html" !== this.name && this.$editor().showHtml || this.$parent.disabled || this.$editor().disabled
                        }, displayActiveToolClass: function (e) {
                            return e ? o.classes.toolbarButtonActive : ""
                        }, executeAction: a
                    };
                    "BDP" === o.toolbar[0][0] ? angular.forEach(o.toolbar, function (e, t) {
                        if (t) {
                            var i = angular.element("<div>");
                            i.addClass(o.classes.toolbarGroup);
                            var a, r, l = angular.element('<i class="bdp-icon ico-triangle-down">');
                            "justifyLeft" === e[0] ? (a = angular.element('<div class="pr bdp-icon-wrap">'), a.append('<i class="bdp-icon ico-text-left">')) : "bold" === e[0] && (a = angular.element('<div class="pr bdp-icon-wrap">'), a.append('<i class="bdp-icon ico-text-bold">')), a && (a.append(l), r = angular.element('<ul class="pa dropdown-wrap">')), angular.forEach(e, function (e) {
                                if (o.tools[e] = angular.extend(o.$new(!0), n[e], d, {name: e}), o.tools[e].$element = c(n[e], o.tools[e]), a) {
                                    var t = angular.element('<li class="dropdown-item ta-dropdown">');
                                    t.append(o.tools[e].$element), r.append(t)
                                } else i.append(o.tools[e].$element)
                            }), a && (a.append(r), i.append(a)), s.append(i)
                        }
                    }) : angular.forEach(o.toolbar, function (e) {
                        var t = angular.element("<div>");
                        t.addClass(o.classes.toolbarGroup), angular.forEach(e, function (e) {
                            o.tools[e] = angular.extend(o.$new(!0), n[e], d, {name: e}), o.tools[e].$element = c(n[e], o.tools[e]), t.append(o.tools[e].$element)
                        }), s.append(t)
                    }), o.updateToolDisplay = function (e, t, i) {
                        var n = o.tools[e];
                        if (n) {
                            if (n._lastToolDefinition && !i && (t = angular.extend({}, n._lastToolDefinition, t)), null === t.buttontext && null === t.iconclass && null === t.display) throw'textAngular Error: Tool Definition for updating "' + e + '" does not have a valid display/iconclass/buttontext value';
                            null === t.buttontext && delete t.buttontext, null === t.iconclass && delete t.iconclass, null === t.display && delete t.display;
                            var a = c(t, n);
                            n.$element.replaceWith(a), n.$element = a
                        }
                    }, o.addTool = function (e, t, i, a) {
                        o.tools[e] = angular.extend(o.$new(!0), n[e], d, {name: e}), o.tools[e].$element = c(n[e], o.tools[e]);
                        var r;
                        void 0 === i && (i = o.toolbar.length - 1), r = angular.element(s.children()[i]), void 0 === a ? (r.append(o.tools[e].$element), o.toolbar[i][o.toolbar[i].length - 1] = e) : (r.children().eq(a).after(o.tools[e].$element), o.toolbar[i][a] = e)
                    }, t.registerToolbar(o), o.$on("$destroy", function () {
                        t.unregisterToolbar(o.name)
                    })
                }
            }
        }])
    }()
}, function (e, t, i) {
    var n, a, r;
    !function (o, s) {
        a = [i(165)], n = o, void 0 !== (r = "function" == typeof n ? n.apply(t, a) : n) && (e.exports = r)
    }(function (e) {
        return e.createModule("SaveRestore", ["WrappedRange"], function (e, t) {
            function i(e, t) {
                return (t || document).getElementById(e)
            }

            function n(e, t) {
                var i, n = "selectionBoundary_" + +new Date + "_" + ("" + Math.random()).slice(2),
                    a = h.getDocument(e.startContainer), r = e.cloneRange();
                return r.collapse(t), i = a.createElement("span"), i.id = n, i.style.lineHeight = "0", i.style.display = "none", i.className = "rangySelectionBoundary", i.appendChild(a.createTextNode(v)), r.insertNode(i), i
            }

            function a(e, n, a, r) {
                var o = i(a, e);
                o ? (n[r ? "setStartBefore" : "setEndBefore"](o), g(o)) : t.warn("Marker element has been removed. Cannot restore selection.")
            }

            function r(e, t) {
                return t.compareBoundaryPoints(e.START_TO_START, e)
            }

            function o(t, i) {
                var a, r, o = e.DomRange.getRangeDocument(t), s = t.toString(), l = m(i);
                return t.collapsed ? (r = n(t, !1), {
                    document: o,
                    markerId: r.id,
                    collapsed: !0
                }) : (r = n(t, !1), a = n(t, !0), {
                    document: o,
                    startMarkerId: a.id,
                    endMarkerId: r.id,
                    collapsed: !1,
                    backward: l,
                    toString: function () {
                        return "original text: '" + s + "', new text: '" + t.toString() + "'"
                    }
                })
            }

            function s(n, r) {
                var o = n.document;
                void 0 === r && (r = !0);
                var s = e.createRange(o);
                if (n.collapsed) {
                    var l = i(n.markerId, o);
                    if (l) {
                        l.style.display = "inline";
                        var c = l.previousSibling;
                        c && 3 == c.nodeType ? (g(l), s.collapseToPoint(c, c.length)) : (s.collapseBefore(l), g(l))
                    } else t.warn("Marker element has been removed. Cannot restore selection.")
                } else a(o, s, n.startMarkerId, !0), a(o, s, n.endMarkerId, !1);
                return r && s.normalizeBoundaries(), s
            }

            function l(t, n) {
                var a, s, l = [], c = m(n);
                t = t.slice(0), t.sort(r);
                for (var d = 0, u = t.length; d < u; ++d) l[d] = o(t[d], c);
                for (d = u - 1; d >= 0; --d) a = t[d], s = e.DomRange.getRangeDocument(a), a.collapsed ? a.collapseAfter(i(l[d].markerId, s)) : (a.setEndBefore(i(l[d].endMarkerId, s)), a.setStartAfter(i(l[d].startMarkerId, s)));
                return l
            }

            function c(i) {
                if (!e.isSelectionValid(i)) return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."), null;
                var n = e.getSelection(i), a = n.getAllRanges(), r = 1 == a.length && n.isBackward(), o = l(a, r);
                return r ? n.setSingleRange(a[0], r) : n.setRanges(a), {win: i, rangeInfos: o, restored: !1}
            }

            function d(e) {
                for (var t = [], i = e.length, n = i - 1; n >= 0; n--) t[n] = s(e[n], !0);
                return t
            }

            function u(t, i) {
                if (!t.restored) {
                    var n = t.rangeInfos, a = e.getSelection(t.win), r = d(n);
                    1 == n.length && i && e.features.selectionHasExtend && n[0].backward ? (a.removeAllRanges(), a.addRange(r[0], !0)) : a.setRanges(r), t.restored = !0
                }
            }

            function p(e, t) {
                var n = i(t, e);
                n && g(n)
            }

            function f(e) {
                for (var t, i = e.rangeInfos, n = 0, a = i.length; n < a; ++n) t = i[n], t.collapsed ? p(e.doc, t.markerId) : (p(e.doc, t.startMarkerId), p(e.doc, t.endMarkerId))
            }

            var h = e.dom, g = h.removeNode, m = e.Selection.isDirectionBackward, v = "\ufeff";
            e.util.extend(e, {
                saveRange: o,
                restoreRange: s,
                saveRanges: l,
                restoreRanges: d,
                saveSelection: c,
                restoreSelection: u,
                removeMarkerElement: p,
                removeMarkers: f
            })
        }), e
    })
}, function (e, t) {
    angular.module("textAngularSetup", []).value("taOptions", {
        forceTextAngularSanitize: !0,
        keyMappings: [],
        toolbar: [["h1", "h2", "h3", "h4", "h5", "h6", "p", "pre", "quote"], ["bold", "italics", "underline", "strikeThrough", "ul", "ol", "redo", "undo", "clear"], ["justifyLeft", "justifyCenter", "justifyRight", "justifyFull", "indent", "outdent"], ["html", "insertImage", "insertLink", "insertVideo", "wordcount", "charcount"]],
        classes: {
            focussed: "focussed",
            toolbar: "btn-toolbar",
            toolbarGroup: "btn-group",
            toolbarButton: "btn btn-default",
            toolbarButtonActive: "active",
            disabled: "disabled",
            textEditor: "form-control",
            htmlEditor: "form-control"
        },
        defaultTagAttributes: {a: {target: ""}},
        setup: {
            textEditorSetup: function (e) {
            }, htmlEditorSetup: function (e) {
            }
        },
        defaultFileDropHandler: function (e, t) {
            var i = new FileReader;
            return "image" === e.type.substring(0, 5) && (i.onload = function () {
                "" !== i.result && t("insertImage", i.result, !0)
            }, i.readAsDataURL(e), !0)
        }
    }).value("taSelectableElements", ["a", "img"]).value("taCustomRenderers", [{
        selector: "img",
        customAttribute: "ta-insert-video",
        renderLogic: function (e) {
            var t = angular.element("<iframe></iframe>"), i = e.prop("attributes");
            angular.forEach(i, function (e) {
                t.attr(e.name, e.value)
            }), t.attr("src", t.attr("ta-insert-video")), e.replaceWith(t)
        }
    }]).value("taTranslations", {
        zh: {
            color: "颜色",
            justify: "对齐",
            fontSize: "字号",
            style: "样式",
            html: {tooltip: "Toggle html / Rich Text"},
            heading: {tooltip: "Heading "},
            p: {tooltip: "段落"},
            pre: {tooltip: "预处理文本"},
            ul: {tooltip: "无序列表"},
            ol: {tooltip: "有序列表"},
            quote: {tooltip: "添加/取消引号"},
            undo: {tooltip: "撤销"},
            redo: {tooltip: "重做"},
            bold: {tooltip: "加粗"},
            italic: {tooltip: "斜体"},
            underline: {tooltip: "下划线"},
            strikeThrough: {tooltip: "删除线"},
            justifyLeft: {tooltip: "左对齐"},
            justifyRight: {tooltip: "右对齐"},
            justifyFull: {tooltip: "两端对齐"},
            justifyCenter: {tooltip: "居中对齐"},
            indent: {tooltip: "缩进"},
            outdent: {tooltip: "取消缩进"},
            clear: {tooltip: "清除格式"},
            insertImage: {
                dialogPrompt: "Please enter an image URL to insert",
                tooltip: "Insert image",
                hotkey: "the - possibly language dependent hotkey ... for some future implementation"
            },
            insertVideo: {tooltip: "Insert video", dialogPrompt: "Please enter a youtube URL to embed"},
            insertLink: {tooltip: "Insert / edit link", dialogPrompt: "Please enter a URL to insert"},
            editLink: {
                reLinkButton: {tooltip: "Relink"},
                unLinkButton: {tooltip: "Unlink"},
                targetToggle: {buttontext: "Open in New Window"}
            },
            wordcount: {tooltip: "展示词数统计"},
            charcount: {tooltip: "展示字符统计"}
        },
        en: {
            color: "Color",
            justify: "Justify",
            fontSize: "FontSize",
            style: "Style",
            html: {tooltip: "Toggle html / Rich Text"},
            heading: {tooltip: "Heading "},
            p: {tooltip: "Paragraph"},
            pre: {tooltip: "Preformatted text"},
            ul: {tooltip: "Unordered List"},
            ol: {tooltip: "Ordered List"},
            quote: {tooltip: "Quote/unquote selection or paragraph"},
            undo: {tooltip: "Undo"},
            redo: {tooltip: "Redo"},
            bold: {tooltip: "Bold"},
            italic: {tooltip: "Italic"},
            underline: {tooltip: "Underline"},
            strikeThrough: {tooltip: "Strikethrough"},
            justifyLeft: {tooltip: "Align text left"},
            justifyRight: {tooltip: "Align text right"},
            justifyFull: {tooltip: "Justify text"},
            justifyCenter: {tooltip: "Center"},
            indent: {tooltip: "Increase indent"},
            outdent: {tooltip: "Decrease indent"},
            clear: {tooltip: "Clear formatting"},
            insertImage: {
                dialogPrompt: "Please enter an image URL to insert",
                tooltip: "Insert image",
                hotkey: "the - possibly language dependent hotkey ... for some future implementation"
            },
            insertVideo: {tooltip: "Insert video", dialogPrompt: "Please enter a youtube URL to embed"},
            insertLink: {tooltip: "Insert / edit link", dialogPrompt: "Please enter a URL to insert"},
            editLink: {
                reLinkButton: {tooltip: "Relink"},
                unLinkButton: {tooltip: "Unlink"},
                targetToggle: {buttontext: "Open in New Window"}
            },
            wordcount: {tooltip: "Display words Count"},
            charcount: {tooltip: "Display characters Count"}
        }
    }).factory("taToolFunctions", ["$window", "taTranslations", function (e, t) {
        var i = $.cookie("locale") || "zh";
        return {
            imgOnSelectAction: function (e, t, i) {
                var n = function () {
                    i.updateTaBindtaTextElement(), i.hidePopover()
                };
                e.preventDefault(), i.displayElements.popover.css("width", "375px");
                var a = i.displayElements.popoverContainer;
                a.empty();
                var r = angular.element('<div class="btn-group" style="padding-right: 6px;">'),
                    o = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');
                o.on("click", function (e) {
                    e.preventDefault(), t.css({width: "100%", height: ""}), n()
                });
                var s = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');
                s.on("click", function (e) {
                    e.preventDefault(), t.css({width: "50%", height: ""}), n()
                });
                var l = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');
                l.on("click", function (e) {
                    e.preventDefault(), t.css({width: "25%", height: ""}), n()
                });
                var c = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');
                c.on("click", function (e) {
                    e.preventDefault(), t.css({width: "", height: ""}), n()
                }), r.append(o), r.append(s), r.append(l), r.append(c), a.append(r), r = angular.element('<div class="btn-group" style="padding-right: 6px;">');
                var d = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');
                d.on("click", function (e) {
                    e.preventDefault(), t.css("float", "left"), t.css("cssFloat", "left"), t.css("styleFloat", "left"), n()
                });
                var u = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');
                u.on("click", function (e) {
                    e.preventDefault(), t.css("float", "right"), t.css("cssFloat", "right"), t.css("styleFloat", "right"), n()
                });
                var p = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');
                p.on("click", function (e) {
                    e.preventDefault(), t.css("float", ""), t.css("cssFloat", ""), t.css("styleFloat", ""), n()
                }), r.append(d), r.append(p), r.append(u), a.append(r), r = angular.element('<div class="btn-group">');
                var f = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');
                f.on("click", function (e) {
                    e.preventDefault(), t.remove(), n()
                }), r.append(f), a.append(r), i.showPopover(t), i.showResizeOverlay(t)
            }, aOnSelectAction: function (n, a, r) {
                n.preventDefault(), r.displayElements.popover.css("width", "436px");
                var o = r.displayElements.popoverContainer;
                o.empty(), o.css("line-height", "28px");
                var s = angular.element('<a href="' + a.attr("href") + '" target="_blank">' + a.attr("href") + "</a>");
                s.css({
                    display: "inline-block",
                    "max-width": "200px",
                    overflow: "hidden",
                    "text-overflow": "ellipsis",
                    "white-space": "nowrap",
                    "vertical-align": "middle"
                }), o.append(s);
                var l = angular.element('<div class="btn-group pull-right">'),
                    c = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="' + t[i].editLink.reLinkButton.tooltip + '"><i class="fa fa-edit icon-edit"></i></button>');
                c.on("click", function (n) {
                    n.preventDefault();
                    var o = e.prompt(t[i].insertLink.dialogPrompt, a.attr("href"));
                    o && "" !== o && "http://" !== o && (a.attr("href", o), r.updateTaBindtaTextElement()), r.hidePopover()
                }), l.append(c);
                var d = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="' + t[i].editLink.unLinkButton.tooltip + '"><i class="fa fa-unlink icon-unlink"></i></button>');
                d.on("click", function (e) {
                    e.preventDefault(), a.replaceWith(a.contents()), r.updateTaBindtaTextElement(), r.hidePopover()
                }), l.append(d);
                var u = angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">' + t[i].editLink.targetToggle.buttontext + "</button>");
                "_blank" === a.attr("target") && u.addClass("active"), u.on("click", function (e) {
                    e.preventDefault(), a.attr("target", "_blank" === a.attr("target") ? "" : "_blank"), u.toggleClass("active"), r.updateTaBindtaTextElement()
                }), l.append(u), o.append(l), r.showPopover(a)
            }, extractYoutubeVideoId: function (e) {
                var t = e.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i);
                return t && t[1] || null
            }
        }
    }]).run(["taRegisterTool", "$window", "taTranslations", "taSelection", "taToolFunctions", "$sanitize", "taOptions", function (e, t, i, n, a, r, o) {
        var s = {};
        if (r("", s), o.forceTextAngularSanitize === !0 && "taSanitize" !== s.version) throw angular.$$minErr("textAngular")("textAngularSetup", "The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");
        var l = $.cookie("locale") || "zh";
        e("html", {
            iconclass: "fa fa-code", tooltiptext: i[l].html.tooltip, action: function () {
                this.$editor().switchView()
            }, activeState: function () {
                return this.$editor().showHtml
            }
        });
        var c = function (e) {
            return function () {
                return this.$editor().queryFormatBlockState(e)
            }
        }, d = function () {
            return this.$editor().wrapSelection("formatBlock", "<" + this.name.toUpperCase() + ">")
        };
        e("pre", {
            buttontext: "pre", tooltiptext: i[l].pre.tooltip, action: function () {
                return this.$editor().wrapSelection("formatBlock", "<PRE>")
            }, activeState: function () {
                return this.$editor().queryFormatBlockState("pre")
            }
        }), e("ul", {
            iconclass: "fa fa-list-ul", tooltiptext: i[l].ul.tooltip, action: function () {
                return this.$editor().wrapSelection("insertUnorderedList", null)
            }, activeState: function () {
                return this.$editor().queryCommandState("insertUnorderedList")
            }
        }), e("ol", {
            iconclass: "fa fa-list-ol", tooltiptext: i[l].ol.tooltip, action: function () {
                return this.$editor().wrapSelection("insertOrderedList", null)
            }, activeState: function () {
                return this.$editor().queryCommandState("insertOrderedList")
            }
        }), e("quote", {
            iconclass: "fa fa-quote-right", tooltiptext: i[l].quote.tooltip, action: function () {
                return this.$editor().wrapSelection("formatBlock", "<BLOCKQUOTE>")
            }, activeState: function () {
                return this.$editor().queryFormatBlockState("blockquote")
            }
        }), e("undo", {
            iconclass: "fa fa-undo", tooltiptext: i[l].undo.tooltip, action: function () {
                return this.$editor().wrapSelection("undo", null)
            }
        }), e("redo", {
            iconclass: "fa fa-repeat", tooltiptext: i[l].redo.tooltip, action: function () {
                return this.$editor().wrapSelection("redo", null)
            }
        }), e("indent", {
            iconclass: "fa fa-indent", tooltiptext: i[l].indent.tooltip, action: function () {
                return this.$editor().wrapSelection("indent", null)
            }, activeState: function () {
                return this.$editor().queryFormatBlockState("blockquote")
            }, commandKeyCode: "TabKey"
        }), e("outdent", {
            iconclass: "fa fa-outdent", tooltiptext: i[l].outdent.tooltip, action: function () {
                return this.$editor().wrapSelection("outdent", null)
            }, activeState: function () {
                return !1
            }, commandKeyCode: "ShiftTabKey"
        }), e("clear", {
            iconclass: "fa fa-ban", tooltiptext: i[l].clear.tooltip, action: function (e, t) {
                var i;
                this.$editor().wrapSelection("removeFormat", null);
                var a = angular.element(n.getSelectionElement()), r = function (e) {
                    e = angular.element(e);
                    var t = e;
                    angular.forEach(e.children(), function (e) {
                        var i = angular.element("<p></p>");
                        i.html(angular.element(e).html()), t.after(i), t = i
                    }), e.remove()
                };
                if (angular.forEach(a.find("ul"), r), angular.forEach(a.find("ol"), r), "li" === a[0].tagName.toLowerCase()) {
                    var o = a[0].parentNode.childNodes, s = [], l = [], c = !1;
                    for (i = 0; i < o.length; i++) o[i] === a[0] ? c = !0 : c ? l.push(o[i]) : s.push(o[i]);
                    var d = angular.element(a[0].parentNode), u = angular.element("<p></p>");
                    if (u.html(angular.element(a[0]).html()), 0 === s.length || 0 === l.length) 0 === l.length ? d.after(u) : d[0].parentNode.insertBefore(u[0], d[0]), 0 === s.length && 0 === l.length ? d.remove() : angular.element(a[0]).remove(); else {
                        var p = angular.element("<" + d[0].tagName + "></" + d[0].tagName + ">"),
                            f = angular.element("<" + d[0].tagName + "></" + d[0].tagName + ">");
                        for (i = 0; i < s.length; i++) p.append(angular.element(s[i]));
                        for (i = 0; i < l.length; i++) f.append(angular.element(l[i]));
                        d.after(f), d.after(u), d.after(p), d.remove()
                    }
                    n.setSelectionToElementEnd(u[0])
                }
                var h = this.$editor(), g = function (e) {
                    e = angular.element(e), e[0] !== h.displayElements.text[0] && e.removeAttr("class"), angular.forEach(e.children(), g)
                };
                angular.forEach(a, g), "li" !== a[0].tagName.toLowerCase() && "ol" !== a[0].tagName.toLowerCase() && "ul" !== a[0].tagName.toLowerCase() && this.$editor().wrapSelection("formatBlock", "default"), t()
            }
        }), e("insertImage", {
            iconclass: "fa fa-picture-o", tooltiptext: i[l].insertImage.tooltip, action: function () {
                var e;
                if ((e = t.prompt(i[l].insertImage.dialogPrompt, "http://")) && "" !== e && "http://" !== e) return this.$editor().wrapSelection("insertImage", e, !0)
            }, onElementSelect: {element: "img", action: a.imgOnSelectAction}
        }), e("insertVideo", {
            iconclass: "fa fa-youtube-play",
            tooltiptext: i[l].insertVideo.tooltip,
            action: function () {
                var e;
                if ((e = t.prompt(i[l].insertVideo.dialogPrompt, "https://")) && "" !== e && "https://" !== e && (videoId = a.extractYoutubeVideoId(e), videoId)) {
                    var n = "https://www.youtube.com/embed/" + videoId,
                        r = '<img class="ta-insert-video" src="https://img.youtube.com/vi/' + videoId + '/hqdefault.jpg" ta-insert-video="' + n + '" contenteditable="false" allowfullscreen="true" frameborder="0" />';
                    return this.$editor().wrapSelection("insertHTML", r, !0)
                }
            },
            onElementSelect: {element: "img", onlyWithAttrs: ["ta-insert-video"], action: a.imgOnSelectAction}
        }), e("insertLink", {
            tooltiptext: i[l].insertLink.tooltip, iconclass: "fa fa-link", action: function () {
                var e;
                if ((e = t.prompt(i[l].insertLink.dialogPrompt, "http://")) && "" !== e && "http://" !== e) return this.$editor().wrapSelection("createLink", e, !0)
            }, activeState: function (e) {
                return !!e && "A" === e[0].tagName
            }, onElementSelect: {element: "a", action: a.aOnSelectAction}
        }), e("wordcount", {
            display: '<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',
            disabled: !0,
            wordcount: 0,
            activeState: function () {
                var e = this.$editor().displayElements.text, t = e[0].innerHTML || "", i = 0;
                return "" !== t.replace(/\s*<[^>]*?>\s*/g, "") && (i = t.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi, "").replace(/(<[^>]*?>\s*<[^>]*?>)/gi, " ").replace(/(<[^>]*?>)/gi, "").replace(/\s+/gi, " ").match(/\S+/g).length), this.wordcount = i, this.$editor().wordcount = i, !1
            }
        }), e("charcount", {
            display: '<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',
            disabled: !0,
            charcount: 0,
            activeState: function () {
                var e = this.$editor().displayElements.text, t = e[0].innerText || e[0].textContent,
                    i = t.replace(/(\r\n|\n|\r)/gm, "").replace(/^\s+/g, " ").replace(/\s+$/g, " ").length;
                return this.charcount = i, this.$editor().charcount = i, !1
            }
        }), angular.forEach(["h1", "h2", "h3", "h4", "h5", "h6"], function (t) {
            e(t.toLowerCase(), {
                buttontext: t.toUpperCase(),
                tooltiptext: i[l].heading.tooltip + t.charAt(1),
                action: d,
                activeState: c(t.toLowerCase())
            })
        }), e("p", {
            buttontext: "P", tooltiptext: i[l].p.tooltip, action: function () {
                return this.$editor().wrapSelection("formatBlock", "<P>")
            }, activeState: function () {
                return this.$editor().queryFormatBlockState("p")
            }
        }), e("bold", {
            display: '<a class="ta-item"><i class="bdp-icon ico-text-bold"></i>' + i[l].bold.tooltip + "</a>",
            tooltiptext: i[l].bold.tooltip,
            action: function () {
                return this.$editor().wrapSelection("bold", null)
            },
            activeState: function () {
                return this.$editor().queryCommandState("bold")
            },
            commandKeyCode: 98
        }), e("justifyRight", {
            display: '<a class="ta-item"><i class="bdp-icon ico-text-right"></i>' + i[l].justifyRight.tooltip + "</a>",
            tooltiptext: i[l].justifyRight.tooltip,
            action: function () {
                return this.$editor().wrapSelection("justifyRight", null)
            },
            activeState: function (e) {
                if (e && "#document" === e.nodeName) return !1;
                var t = !1;
                return e && (t = "right" === e.css("text-align")), t = t || this.$editor().queryCommandState("justifyRight")
            }
        }), e("justifyFull", {
            display: '<a class="ta-item"><i class="bdp-icon ico-text-justify"></i>' + i[l].justifyFull.tooltip + "</a>",
            tooltiptext: i[l].justifyFull.tooltip,
            action: function () {
                return this.$editor().wrapSelection("justifyFull", null)
            },
            activeState: function (e) {
                var t = !1;
                return e && (t = "justify" === e.css("text-align")), t = t || this.$editor().queryCommandState("justifyFull")
            }
        }), e("justifyCenter", {
            display: '<a class="ta-item"><i class="bdp-icon ico-text-center"></i>' + i[l].justifyCenter.tooltip + "</a>",
            tooltiptext: i[l].justifyCenter.tooltip,
            action: function () {
                return this.$editor().wrapSelection("justifyCenter", null)
            },
            activeState: function (e) {
                if (e && "#document" === e.nodeName) return !1;
                var t = !1;
                return e && (t = "center" === e.css("text-align")), t = t || this.$editor().queryCommandState("justifyCenter")
            }
        }), e("justifyLeft", {
            display: '<a class="ta-item"><i class="bdp-icon ico-text-left"></i>' + i[l].justifyLeft.tooltip + "</a>",
            tooltiptext: i[l].justifyLeft.tooltip,
            action: function () {
                return this.$editor().wrapSelection("justifyLeft", null)
            },
            activeState: function (e) {
                if (e && "#document" === e.nodeName) return !1;
                var t = !1;
                return e && (t = "left" === e.css("text-align") || "left" === e.attr("align") || "right" !== e.css("text-align") && "center" !== e.css("text-align") && "justify" !== e.css("text-align") && !this.$editor().queryCommandState("justifyRight") && !this.$editor().queryCommandState("justifyCenter") && !this.$editor().queryCommandState("justifyFull")), t = t || this.$editor().queryCommandState("justifyLeft")
            }
        }), e("italics", {
            display: '<a class="ta-item"><i class="bdp-icon ico-text-italic"></i>' + i[l].italic.tooltip + "</a>",
            tooltiptext: i[l].italic.tooltip,
            action: function () {
                return this.$editor().wrapSelection("italic", null)
            },
            activeState: function () {
                return this.$editor().queryCommandState("italic")
            },
            commandKeyCode: 105
        }), e("underline", {
            display: '<a class="ta-item"><i class="bdp-icon ico-text-underline"></i>' + i[l].underline.tooltip + "</a>",
            tooltiptext: i[l].underline.tooltip,
            action: function () {
                return this.$editor().wrapSelection("underline", null)
            },
            activeState: function () {
                return this.$editor().queryCommandState("underline")
            },
            commandKeyCode: 117
        }), e("strikeThrough", {
            display: '<a class="ta-item"><i class="bdp-icon ico-text-strikethrough"></i>' + i[l].strikeThrough.tooltip + "</a>",
            tooltiptext: i[l].strikeThrough.tooltip,
            action: function () {
                return this.$editor().wrapSelection("strikeThrough", null)
            },
            activeState: function () {
                return document.queryCommandState("strikeThrough")
            }
        }), e("pureTextColor", {
            display: '<span class="ta-toolbar-head">' + i[l].color + "</span>",
            action: function () {
                return !1
            }
        }), e("pureTextFontSize", {
            display: '<span class="ta-toolbar-head">' + i[l].fontSize + "</span>",
            action: function () {
                return !1
            }
        }), e("pureTextJustify", {
            display: '<span class="ta-toolbar-head">' + i[l].justify + "</span>",
            action: function () {
                return !1
            }
        }), e("pureTextStyle", {
            display: '<span class="ta-toolbar-head">' + i[l].style + "</span>",
            action: function () {
                return !1
            }
        }), e("fontColor", {
            display: "<color-picker ng-model='color' on-change='action(color)'></color-picker>",
            action: function (e) {
                var t = this;
                if (this.$editor().wrapSelection) return this.$editor().wrapSelection("foreColor", e);
                setTimeout(function () {
                    t.action(e)
                }, 100)
            },
            activeState: function (e) {
                if (e && "#document" === e.nodeName) return !1;
                var t = !1;
                e && (t = e.css("color") || "#666"), this.color = t
            },
            color: "#666"
        }), e("fontSize", {
            display: "<div class='pr bdp-icon-wrap font-size-wrap'><i class='bdp-icon ico-text-size'></i><i class='bdp-icon ico-triangle-down'></i><ul class='pa dropdown-wrap'><li ng-repeat='o in options' class='dropdown-item'><a ng-click='action($event, o.fontSize)' ng-class='{\"active\":curSize == o.value}'> {{o.name}}</a></li></ul></div>",
            show: !1,
            action: function (e, t) {
                var t = t ? parseInt(t) : 1;
                return this.$editor().wrapSelection("fontSize", t)
            },
            options: [{name: "12px", value: 12, fontSize: 1}, {name: "13px", value: 13, fontSize: 2}, {
                name: "16px",
                value: 16,
                fontSize: 3
            }, {name: "18px", value: 18, fontSize: 4}, {name: "24px", value: 24, fontSize: 5}, {
                name: "32px",
                value: 32,
                fontSize: 6
            }, {name: "48px", value: 48, fontSize: 7}],
            activeState: function (e) {
                if (e && "#document" === e.nodeName) return !1;
                var t = "14px";
                e && (t = e.css("fontSize") || "12px"), this.curSize = t.split("px")[0]
            }
        })
    }])
}, function (e, t, i) {
    i(280).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "textAngular_99bb5b74.css"
}, function (e, t, i) {
    e.exports = "angular-slick", i(282), i(284)
}, function (e, t, i) {
    var n, a, r;
    !function (o) {
        "use strict";
        a = [i(283)], n = o, void 0 !== (r = "function" == typeof n ? n.apply(t, a) : n) && (e.exports = r)
    }(function (e) {
        "use strict";
        var t = window.Slick || {};
        t = function () {
            function t(t, n) {
                var a, r, o, s = this;
                if (s.defaults = {
                    accessibility: !0,
                    adaptiveHeight: !1,
                    appendArrows: e(t),
                    appendDots: e(t),
                    arrows: !0,
                    asNavFor: null,
                    prevArrow: '<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',
                    nextArrow: '<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',
                    autoplay: !1,
                    autoplaySpeed: 3e3,
                    centerMode: !1,
                    centerPadding: "50px",
                    cssEase: "ease",
                    customPaging: function (e, t) {
                        return '<button type="button" data-role="none">' + (t + 1) + "</button>"
                    },
                    dots: !1,
                    dotsClass: "slick-dots",
                    draggable: !0,
                    easing: "linear",
                    edgeFriction: .35,
                    fade: !1,
                    focusOnSelect: !1,
                    infinite: !0,
                    initialSlide: 0,
                    lazyLoad: "ondemand",
                    mobileFirst: !1,
                    pauseOnHover: !0,
                    pauseOnDotsHover: !1,
                    respondTo: "window",
                    responsive: null,
                    rtl: !1,
                    slide: "",
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    speed: 500,
                    swipe: !0,
                    swipeToSlide: !1,
                    touchMove: !0,
                    touchThreshold: 5,
                    useCSS: !0,
                    variableWidth: !1,
                    vertical: !1,
                    waitForAnimate: !0
                }, s.initials = {
                    animating: !1,
                    dragging: !1,
                    autoPlayTimer: null,
                    currentDirection: 0,
                    currentLeft: null,
                    currentSlide: 0,
                    direction: 1,
                    $dots: null,
                    listWidth: null,
                    listHeight: null,
                    loadIndex: 0,
                    $nextArrow: null,
                    $prevArrow: null,
                    slideCount: null,
                    slideWidth: null,
                    $slideTrack: null,
                    $slides: null,
                    sliding: !1,
                    slideOffset: 0,
                    swipeLeft: null,
                    $list: null,
                    touchObject: {},
                    transformsEnabled: !1
                }, e.extend(s, s.initials), s.activeBreakpoint = null, s.animType = null, s.animProp = null, s.breakpoints = [], s.breakpointSettings = [], s.cssTransitions = !1, s.hidden = "hidden", s.paused = !1, s.positionProp = null, s.respondTo = null, s.shouldClick = !0, s.$slider = e(t), s.$slidesCache = null, s.transformType = null, s.transitionType = null, s.visibilityChange = "visibilitychange", s.windowWidth = 0, s.windowTimer = null, a = e(t).data("slick") || {}, s.options = e.extend({}, s.defaults, a, n), s.currentSlide = s.options.initialSlide, s.originalSettings = s.options, (r = s.options.responsive || null) && r.length > -1) {
                    s.respondTo = s.options.respondTo || "window";
                    for (o in r) r.hasOwnProperty(o) && (s.breakpoints.push(r[o].breakpoint), s.breakpointSettings[r[o].breakpoint] = r[o].settings);
                    s.breakpoints.sort(function (e, t) {
                        return s.options.mobileFirst === !0 ? e - t : t - e
                    })
                }
                void 0 !== document.mozHidden ? (s.hidden = "mozHidden", s.visibilityChange = "mozvisibilitychange") : void 0 !== document.msHidden ? (s.hidden = "msHidden", s.visibilityChange = "msvisibilitychange") : void 0 !== document.webkitHidden && (s.hidden = "webkitHidden", s.visibilityChange = "webkitvisibilitychange"), s.autoPlay = e.proxy(s.autoPlay, s), s.autoPlayClear = e.proxy(s.autoPlayClear, s), s.changeSlide = e.proxy(s.changeSlide, s), s.clickHandler = e.proxy(s.clickHandler, s), s.selectHandler = e.proxy(s.selectHandler, s), s.setPosition = e.proxy(s.setPosition, s), s.swipeHandler = e.proxy(s.swipeHandler, s), s.dragHandler = e.proxy(s.dragHandler, s), s.keyHandler = e.proxy(s.keyHandler, s), s.autoPlayIterator = e.proxy(s.autoPlayIterator, s), s.instanceUid = i++, s.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/, s.init(), s.checkResponsive(!0)
            }

            var i = 0;
            return t
        }(), t.prototype.addSlide = t.prototype.slickAdd = function (t, i, n) {
            var a = this;
            if ("boolean" == typeof i) n = i, i = null; else if (i < 0 || i >= a.slideCount) return !1;
            a.unload(), "number" == typeof i ? 0 === i && 0 === a.$slides.length ? e(t).appendTo(a.$slideTrack) : n ? e(t).insertBefore(a.$slides.eq(i)) : e(t).insertAfter(a.$slides.eq(i)) : n === !0 ? e(t).prependTo(a.$slideTrack) : e(t).appendTo(a.$slideTrack), a.$slides = a.$slideTrack.children(this.options.slide), a.$slideTrack.children(this.options.slide).detach(), a.$slideTrack.append(a.$slides), a.$slides.each(function (t, i) {
                e(i).attr("data-slick-index", t)
            }), a.$slidesCache = a.$slides, a.reinit()
        }, t.prototype.animateHeight = function () {
            var e = this;
            if (1 === e.options.slidesToShow && e.options.adaptiveHeight === !0 && e.options.vertical === !1) {
                var t = e.$slides.eq(e.currentSlide).outerHeight(!0);
                e.$list.animate({height: t}, e.options.speed)
            }
        }, t.prototype.animateSlide = function (t, i) {
            var n = {}, a = this;
            a.animateHeight(), a.options.rtl === !0 && a.options.vertical === !1 && (t = -t), a.transformsEnabled === !1 ? a.options.vertical === !1 ? a.$slideTrack.animate({left: t}, a.options.speed, a.options.easing, i) : a.$slideTrack.animate({top: t}, a.options.speed, a.options.easing, i) : a.cssTransitions === !1 ? (a.options.rtl === !0 && (a.currentLeft = -a.currentLeft), e({animStart: a.currentLeft}).animate({animStart: t}, {
                duration: a.options.speed,
                easing: a.options.easing,
                step: function (e) {
                    e = Math.ceil(e), a.options.vertical === !1 ? (n[a.animType] = "translate(" + e + "px, 0px)", a.$slideTrack.css(n)) : (n[a.animType] = "translate(0px," + e + "px)", a.$slideTrack.css(n))
                },
                complete: function () {
                    i && i.call()
                }
            })) : (a.applyTransition(), t = Math.ceil(t), a.options.vertical === !1 ? n[a.animType] = "translate3d(" + t + "px, 0px, 0px)" : n[a.animType] = "translate3d(0px," + t + "px, 0px)", a.$slideTrack.css(n), i && setTimeout(function () {
                a.disableTransition(), i.call()
            }, a.options.speed))
        }, t.prototype.asNavFor = function (t) {
            var i = this, n = null !== i.options.asNavFor ? e(i.options.asNavFor).slick("getSlick") : null;
            null !== n && n.slideHandler(t, !0)
        }, t.prototype.applyTransition = function (e) {
            var t = this, i = {};
            t.options.fade === !1 ? i[t.transitionType] = t.transformType + " " + t.options.speed + "ms " + t.options.cssEase : i[t.transitionType] = "opacity " + t.options.speed + "ms " + t.options.cssEase, t.options.fade === !1 ? t.$slideTrack.css(i) : t.$slides.eq(e).css(i)
        }, t.prototype.autoPlay = function () {
            var e = this;
            e.autoPlayTimer && clearInterval(e.autoPlayTimer), e.slideCount > e.options.slidesToShow && e.paused !== !0 && (e.autoPlayTimer = setInterval(e.autoPlayIterator, e.options.autoplaySpeed))
        }, t.prototype.autoPlayClear = function () {
            var e = this;
            e.autoPlayTimer && clearInterval(e.autoPlayTimer)
        }, t.prototype.autoPlayIterator = function () {
            var e = this;
            e.options.infinite === !1 ? 1 === e.direction ? (e.currentSlide + 1 === e.slideCount - 1 && (e.direction = 0), e.slideHandler(e.currentSlide + e.options.slidesToScroll)) : (e.currentSlide - 1 == 0 && (e.direction = 1), e.slideHandler(e.currentSlide - e.options.slidesToScroll)) : e.slideHandler(e.currentSlide + e.options.slidesToScroll)
        }, t.prototype.buildArrows = function () {
            var t = this;
            t.options.arrows === !0 && t.slideCount > t.options.slidesToShow && (t.$prevArrow = e(t.options.prevArrow), t.$nextArrow = e(t.options.nextArrow), t.htmlExpr.test(t.options.prevArrow) && t.$prevArrow.appendTo(t.options.appendArrows), t.htmlExpr.test(t.options.nextArrow) && t.$nextArrow.appendTo(t.options.appendArrows), t.options.infinite !== !0 && t.$prevArrow.addClass("slick-disabled"))
        }, t.prototype.buildDots = function () {
            var t, i, n = this;
            if (n.options.dots === !0 && n.slideCount > n.options.slidesToShow) {
                for (i = '<ul class="' + n.options.dotsClass + '">', t = 0; t <= n.getDotCount(); t += 1) i += "<li>" + n.options.customPaging.call(this, n, t) + "</li>";
                i += "</ul>", n.$dots = e(i).appendTo(n.options.appendDots), n.$dots.find("li").first().addClass("slick-active").attr("aria-hidden", "false")
            }
        }, t.prototype.buildOut = function () {
            var t = this;
            t.$slides = t.$slider.children(t.options.slide + ":not(.slick-cloned)").addClass("slick-slide"), t.slideCount = t.$slides.length, t.$slides.each(function (t, i) {
                e(i).attr("data-slick-index", t)
            }), t.$slidesCache = t.$slides, t.$slider.addClass("slick-slider"), t.$slideTrack = 0 === t.slideCount ? e('<div class="slick-track"/>').appendTo(t.$slider) : t.$slides.wrapAll('<div class="slick-track"/>').parent(), t.$list = t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(), t.$slideTrack.css("opacity", 0), t.options.centerMode !== !0 && t.options.swipeToSlide !== !0 || (t.options.slidesToScroll = 1), e("img[data-lazy]", t.$slider).not("[src]").addClass("slick-loading"), t.setupInfinite(), t.buildArrows(), t.buildDots(), t.updateDots(), t.options.accessibility === !0 && t.$list.prop("tabIndex", 0), t.setSlideClasses("number" == typeof this.currentSlide ? this.currentSlide : 0), t.options.draggable === !0 && t.$list.addClass("draggable")
        }, t.prototype.checkResponsive = function (t) {
            var i, n, a, r = this, o = r.$slider.width(), s = window.innerWidth || e(window).width();
            if ("window" === r.respondTo ? a = s : "slider" === r.respondTo ? a = o : "min" === r.respondTo && (a = Math.min(s, o)), r.originalSettings.responsive && r.originalSettings.responsive.length > -1 && null !== r.originalSettings.responsive) {
                n = null;
                for (i in r.breakpoints) r.breakpoints.hasOwnProperty(i) && (r.originalSettings.mobileFirst === !1 ? a < r.breakpoints[i] && (n = r.breakpoints[i]) : a > r.breakpoints[i] && (n = r.breakpoints[i]));
                null !== n ? null !== r.activeBreakpoint ? n !== r.activeBreakpoint && (r.activeBreakpoint = n, "unslick" === r.breakpointSettings[n] ? r.unslick() : (r.options = e.extend({}, r.originalSettings, r.breakpointSettings[n]), t === !0 && (r.currentSlide = r.options.initialSlide), r.refresh())) : (r.activeBreakpoint = n, "unslick" === r.breakpointSettings[n] ? r.unslick() : (r.options = e.extend({}, r.originalSettings, r.breakpointSettings[n]), t === !0 && (r.currentSlide = r.options.initialSlide), r.refresh())) : null !== r.activeBreakpoint && (r.activeBreakpoint = null, r.options = r.originalSettings, t === !0 && (r.currentSlide = r.options.initialSlide), r.refresh())
            }
        }, t.prototype.changeSlide = function (t, i) {
            var n, a, r, o = this, s = e(t.target);
            switch (s.is("a") && t.preventDefault(), r = o.slideCount % o.options.slidesToScroll != 0, n = r ? 0 : (o.slideCount - o.currentSlide) % o.options.slidesToScroll, t.data.message) {
                case"previous":
                    a = 0 === n ? o.options.slidesToScroll : o.options.slidesToShow - n, o.slideCount > o.options.slidesToShow && o.slideHandler(o.currentSlide - a, !1, i);
                    break;
                case"next":
                    a = 0 === n ? o.options.slidesToScroll : n, o.slideCount > o.options.slidesToShow && o.slideHandler(o.currentSlide + a, !1, i);
                    break;
                case"index":
                    var l = 0 === t.data.index ? 0 : t.data.index || e(t.target).parent().index() * o.options.slidesToScroll;
                    o.slideHandler(o.checkNavigable(l), !1, i);
                    break;
                default:
                    return
            }
        }, t.prototype.checkNavigable = function (e) {
            var t, i, n = this;
            if (t = n.getNavigableIndexes(), i = 0, e > t[t.length - 1]) e = t[t.length - 1]; else for (var a in t) {
                if (e < t[a]) {
                    e = i;
                    break
                }
                i = t[a]
            }
            return e
        }, t.prototype.clickHandler = function (e) {
            this.shouldClick === !1 && (e.stopImmediatePropagation(), e.stopPropagation(), e.preventDefault())
        }, t.prototype.destroy = function () {
            var t = this;
            t.autoPlayClear(), t.touchObject = {}, e(".slick-cloned", t.$slider).remove(), t.$dots && t.$dots.remove(), t.$prevArrow && "object" != typeof t.options.prevArrow && t.$prevArrow.remove(), t.$nextArrow && "object" != typeof t.options.nextArrow && t.$nextArrow.remove(), t.$slides.removeClass("slick-slide slick-active slick-center slick-visible").attr("aria-hidden", "true").removeAttr("data-slick-index").css({
                position: "",
                left: "",
                top: "",
                zIndex: "",
                opacity: "",
                width: ""
            }), t.$slider.removeClass("slick-slider"), t.$slider.removeClass("slick-initialized"), t.$list.off(".slick"), e(window).off(".slick-" + t.instanceUid), e(document).off(".slick-" + t.instanceUid), t.$slider.html(t.$slides)
        }, t.prototype.disableTransition = function (e) {
            var t = this, i = {};
            i[t.transitionType] = "", t.options.fade === !1 ? t.$slideTrack.css(i) : t.$slides.eq(e).css(i)
        }, t.prototype.fadeSlide = function (e, t) {
            var i = this;
            i.cssTransitions === !1 ? (i.$slides.eq(e).css({zIndex: 1e3}), i.$slides.eq(e).animate({opacity: 1}, i.options.speed, i.options.easing, t)) : (i.applyTransition(e), i.$slides.eq(e).css({
                opacity: 1,
                zIndex: 1e3
            }), t && setTimeout(function () {
                i.disableTransition(e), t.call()
            }, i.options.speed))
        }, t.prototype.filterSlides = t.prototype.slickFilter = function (e) {
            var t = this;
            null !== e && (t.unload(), t.$slideTrack.children(this.options.slide).detach(), t.$slidesCache.filter(e).appendTo(t.$slideTrack), t.reinit())
        }, t.prototype.getCurrent = t.prototype.slickCurrentSlide = function () {
            return this.currentSlide
        }, t.prototype.getDotCount = function () {
            var e = this, t = 0, i = 0, n = 0;
            if (e.options.infinite === !0) n = Math.ceil(e.slideCount / e.options.slidesToScroll); else if (e.options.centerMode === !0) n = e.slideCount; else for (; t < e.slideCount;) ++n, t = i + e.options.slidesToShow, i += e.options.slidesToScroll <= e.options.slidesToShow ? e.options.slidesToScroll : e.options.slidesToShow;
            return n - 1
        }, t.prototype.getLeft = function (e) {
            var t, i, n, a = this, r = 0;
            return a.slideOffset = 0, i = a.$slides.first().outerHeight(), a.options.infinite === !0 ? (a.slideCount > a.options.slidesToShow && (a.slideOffset = a.slideWidth * a.options.slidesToShow * -1, r = i * a.options.slidesToShow * -1), a.slideCount % a.options.slidesToScroll != 0 && e + a.options.slidesToScroll > a.slideCount && a.slideCount > a.options.slidesToShow && (e > a.slideCount ? (a.slideOffset = (a.options.slidesToShow - (e - a.slideCount)) * a.slideWidth * -1, r = (a.options.slidesToShow - (e - a.slideCount)) * i * -1) : (a.slideOffset = a.slideCount % a.options.slidesToScroll * a.slideWidth * -1, r = a.slideCount % a.options.slidesToScroll * i * -1))) : e + a.options.slidesToShow > a.slideCount && (a.slideOffset = (e + a.options.slidesToShow - a.slideCount) * a.slideWidth, r = (e + a.options.slidesToShow - a.slideCount) * i), a.slideCount <= a.options.slidesToShow && (a.slideOffset = 0, r = 0), a.options.centerMode === !0 && a.options.infinite === !0 ? a.slideOffset += a.slideWidth * Math.floor(a.options.slidesToShow / 2) - a.slideWidth : a.options.centerMode === !0 && (a.slideOffset = 0, a.slideOffset += a.slideWidth * Math.floor(a.options.slidesToShow / 2)), t = a.options.vertical === !1 ? e * a.slideWidth * -1 + a.slideOffset : e * i * -1 + r, a.options.variableWidth === !0 && (n = a.slideCount <= a.options.slidesToShow || a.options.infinite === !1 ? a.$slideTrack.children(".slick-slide").eq(e) : a.$slideTrack.children(".slick-slide").eq(e + a.options.slidesToShow), t = n[0] ? n[0].offsetLeft * -1 : 0, a.options.centerMode === !0 && (n = a.options.infinite === !1 ? a.$slideTrack.children(".slick-slide").eq(e) : a.$slideTrack.children(".slick-slide").eq(e + a.options.slidesToShow + 1), t = n[0] ? n[0].offsetLeft * -1 : 0, t += (a.$list.width() - n.outerWidth()) / 2)), t
        }, t.prototype.getOption = t.prototype.slickGetOption = function (e) {
            return this.options[e]
        }, t.prototype.getNavigableIndexes = function () {
            var e, t = this, i = 0, n = 0, a = [];
            for (t.options.infinite === !1 ? (e = t.slideCount - t.options.slidesToShow + 1, t.options.centerMode === !0 && (e = t.slideCount)) : (i = t.slideCount * -1, n = t.slideCount * -1, e = 2 * t.slideCount); i < e;) a.push(i), i = n + t.options.slidesToScroll, n += t.options.slidesToScroll <= t.options.slidesToShow ? t.options.slidesToScroll : t.options.slidesToShow;
            return a
        }, t.prototype.getSlick = function () {
            return this
        }, t.prototype.getSlideCount = function () {
            var t, i, n = this;
            return i = n.options.centerMode === !0 ? n.slideWidth * Math.floor(n.options.slidesToShow / 2) : 0, n.options.swipeToSlide === !0 ? (n.$slideTrack.find(".slick-slide").each(function (a, r) {
                if (r.offsetLeft - i + e(r).outerWidth() / 2 > n.swipeLeft * -1) return t = r, !1
            }), Math.abs(e(t).attr("data-slick-index") - n.currentSlide) || 1) : n.options.slidesToScroll
        }, t.prototype.goTo = t.prototype.slickGoTo = function (e, t) {
            this.changeSlide({data: {message: "index", index: parseInt(e)}}, t)
        }, t.prototype.init = function () {
            var t = this;
            e(t.$slider).hasClass("slick-initialized") || (e(t.$slider).addClass("slick-initialized"), t.buildOut(), t.setProps(), t.startLoad(), t.loadSlider(), t.initializeEvents(), t.updateArrows(), t.updateDots()), t.$slider.trigger("init", [t])
        }, t.prototype.initArrowEvents = function () {
            var e = this;
            e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && (e.$prevArrow.on("click.slick", {message: "previous"}, e.changeSlide), e.$nextArrow.on("click.slick", {message: "next"}, e.changeSlide))
        }, t.prototype.initDotEvents = function () {
            var t = this;
            t.options.dots === !0 && t.slideCount > t.options.slidesToShow && e("li", t.$dots).on("click.slick", {message: "index"}, t.changeSlide), t.options.dots === !0 && t.options.pauseOnDotsHover === !0 && t.options.autoplay === !0 && e("li", t.$dots).on("mouseenter.slick", function () {
                t.paused = !0, t.autoPlayClear()
            }).on("mouseleave.slick", function () {
                t.paused = !1, t.autoPlay()
            })
        }, t.prototype.initializeEvents = function () {
            var t = this;
            t.initArrowEvents(), t.initDotEvents(), t.$list.on("touchstart.slick mousedown.slick", {action: "start"}, t.swipeHandler), t.$list.on("touchmove.slick mousemove.slick", {action: "move"}, t.swipeHandler), t.$list.on("touchend.slick mouseup.slick", {action: "end"}, t.swipeHandler), t.$list.on("touchcancel.slick mouseleave.slick", {action: "end"}, t.swipeHandler), t.$list.on("click.slick", t.clickHandler), t.options.autoplay === !0 && (e(document).on(t.visibilityChange, function () {
                t.visibility()
            }), t.options.pauseOnHover === !0 && (t.$list.on("mouseenter.slick", function () {
                t.paused = !0, t.autoPlayClear()
            }), t.$list.on("mouseleave.slick", function () {
                t.paused = !1, t.autoPlay()
            }))), t.options.accessibility === !0 && t.$list.on("keydown.slick", t.keyHandler), t.options.focusOnSelect === !0 && e(t.$slideTrack).children().on("click.slick", t.selectHandler), e(window).on("orientationchange.slick.slick-" + t.instanceUid, function () {
                t.checkResponsive(), t.setPosition()
            }), e(window).on("resize.slick.slick-" + t.instanceUid, function () {
                e(window).width() !== t.windowWidth && (clearTimeout(t.windowDelay), t.windowDelay = window.setTimeout(function () {
                    t.windowWidth = e(window).width(), t.checkResponsive(), t.setPosition()
                }, 50))
            }), e("*[draggable!=true]", t.$slideTrack).on("dragstart", function (e) {
                e.preventDefault()
            }), e(window).on("load.slick.slick-" + t.instanceUid, t.setPosition), e(document).on("ready.slick.slick-" + t.instanceUid, t.setPosition)
        }, t.prototype.initUI = function () {
            var e = this;
            e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && (e.$prevArrow.show(), e.$nextArrow.show()), e.options.dots === !0 && e.slideCount > e.options.slidesToShow && e.$dots.show(), e.options.autoplay === !0 && e.autoPlay()
        }, t.prototype.keyHandler = function (e) {
            var t = this;
            37 === e.keyCode && t.options.accessibility === !0 ? t.changeSlide({data: {message: "previous"}}) : 39 === e.keyCode && t.options.accessibility === !0 && t.changeSlide({data: {message: "next"}})
        }, t.prototype.lazyLoad = function () {
            function t(t) {
                e("img[data-lazy]", t).each(function () {
                    var t = e(this), i = e(this).attr("data-lazy");
                    t.load(function () {
                        t.animate({opacity: 1}, 200)
                    }).css({opacity: 0}).attr("src", i).removeAttr("data-lazy").removeClass("slick-loading")
                })
            }

            var i, n, a, r, o = this;
            o.options.centerMode === !0 ? o.options.infinite === !0 ? (a = o.currentSlide + (o.options.slidesToShow / 2 + 1), r = a + o.options.slidesToShow + 2) : (a = Math.max(0, o.currentSlide - (o.options.slidesToShow / 2 + 1)), r = o.options.slidesToShow / 2 + 1 + 2 + o.currentSlide) : (a = o.options.infinite ? o.options.slidesToShow + o.currentSlide : o.currentSlide, r = a + o.options.slidesToShow, o.options.fade === !0 && (a > 0 && a--, r <= o.slideCount && r++)), i = o.$slider.find(".slick-slide").slice(a, r), t(i), o.slideCount <= o.options.slidesToShow ? (n = o.$slider.find(".slick-slide"), t(n)) : o.currentSlide >= o.slideCount - o.options.slidesToShow ? (n = o.$slider.find(".slick-cloned").slice(0, o.options.slidesToShow), t(n)) : 0 === o.currentSlide && (n = o.$slider.find(".slick-cloned").slice(o.options.slidesToShow * -1), t(n))
        }, t.prototype.loadSlider = function () {
            var e = this;
            e.setPosition(), e.$slideTrack.css({opacity: 1}), e.$slider.removeClass("slick-loading"), e.initUI(), "progressive" === e.options.lazyLoad && e.progressiveLazyLoad()
        }, t.prototype.next = t.prototype.slickNext = function () {
            this.changeSlide({data: {message: "next"}})
        }, t.prototype.pause = t.prototype.slickPause = function () {
            var e = this;
            e.autoPlayClear(), e.paused = !0
        }, t.prototype.play = t.prototype.slickPlay = function () {
            var e = this;
            e.paused = !1, e.autoPlay()
        }, t.prototype.postSlide = function (e) {
            var t = this;
            t.$slider.trigger("afterChange", [t, e]), t.animating = !1, t.setPosition(), t.swipeLeft = null, t.options.autoplay === !0 && t.paused === !1 && t.autoPlay()
        }, t.prototype.prev = t.prototype.slickPrev = function () {
            this.changeSlide({data: {message: "previous"}})
        }, t.prototype.progressiveLazyLoad = function () {
            var t, i, n = this;
            (t = e("img[data-lazy]", n.$slider).length) > 0 && (i = e("img[data-lazy]", n.$slider).first(), i.attr("src", i.attr("data-lazy")).removeClass("slick-loading").load(function () {
                i.removeAttr("data-lazy"), n.progressiveLazyLoad(), n.options.adaptiveHeight === !0 && n.setPosition()
            }).error(function () {
                i.removeAttr("data-lazy"), n.progressiveLazyLoad()
            }))
        }, t.prototype.refresh = function () {
            var t = this, i = t.currentSlide;
            t.destroy(), e.extend(t, t.initials), t.init(), t.changeSlide({data: {message: "index", index: i}}, !0)
        }, t.prototype.reinit = function () {
            var t = this;
            t.$slides = t.$slideTrack.children(t.options.slide).addClass("slick-slide"), t.slideCount = t.$slides.length, t.currentSlide >= t.slideCount && 0 !== t.currentSlide && (t.currentSlide = t.currentSlide - t.options.slidesToScroll), t.slideCount <= t.options.slidesToShow && (t.currentSlide = 0), t.setProps(), t.setupInfinite(), t.buildArrows(), t.updateArrows(), t.initArrowEvents(), t.buildDots(), t.updateDots(), t.initDotEvents(), t.options.focusOnSelect === !0 && e(t.$slideTrack).children().on("click.slick", t.selectHandler), t.setSlideClasses(0), t.setPosition(), t.$slider.trigger("reInit", [t])
        }, t.prototype.removeSlide = t.prototype.slickRemove = function (e, t, i) {
            var n = this;
            if ("boolean" == typeof e ? (t = e, e = t === !0 ? 0 : n.slideCount - 1) : e = t === !0 ? --e : e, n.slideCount < 1 || e < 0 || e > n.slideCount - 1) return !1;
            n.unload(), i === !0 ? n.$slideTrack.children().remove() : n.$slideTrack.children(this.options.slide).eq(e).remove(), n.$slides = n.$slideTrack.children(this.options.slide), n.$slideTrack.children(this.options.slide).detach(), n.$slideTrack.append(n.$slides), n.$slidesCache = n.$slides, n.reinit()
        }, t.prototype.setCSS = function (e) {
            var t, i, n = this, a = {};
            n.options.rtl === !0 && (e = -e), t = "left" == n.positionProp ? Math.ceil(e) + "px" : "0px", i = "top" == n.positionProp ? Math.ceil(e) + "px" : "0px", a[n.positionProp] = e, n.transformsEnabled === !1 ? n.$slideTrack.css(a) : (a = {}, n.cssTransitions === !1 ? (a[n.animType] = "translate(" + t + ", " + i + ")", n.$slideTrack.css(a)) : (a[n.animType] = "translate3d(" + t + ", " + i + ", 0px)", n.$slideTrack.css(a)))
        }, t.prototype.setDimensions = function () {
            var e = this;
            if (e.options.vertical === !1 ? e.options.centerMode === !0 && e.$list.css({padding: "0px " + e.options.centerPadding}) : (e.$list.height(e.$slides.first().outerHeight(!0) * e.options.slidesToShow), e.options.centerMode === !0 && e.$list.css({padding: e.options.centerPadding + " 0px"})), e.listWidth = e.$list.width(), e.listHeight = e.$list.height(), e.options.vertical === !1 && e.options.variableWidth === !1) e.slideWidth = Math.ceil(e.listWidth / e.options.slidesToShow), e.$slideTrack.width(Math.ceil(e.slideWidth * e.$slideTrack.children(".slick-slide").length)); else if (e.options.variableWidth === !0) {
                var t = 0;
                e.slideWidth = Math.ceil(e.listWidth / e.options.slidesToShow), e.$slideTrack.children(".slick-slide").each(function () {
                    t += e.listWidth
                }), e.$slideTrack.width(Math.ceil(t) + 1)
            } else e.slideWidth = Math.ceil(e.listWidth), e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0) * e.$slideTrack.children(".slick-slide").length));
            var i = e.$slides.first().outerWidth(!0) - e.$slides.first().width();
            e.options.variableWidth === !1 && e.$slideTrack.children(".slick-slide").width(e.slideWidth - i)
        }, t.prototype.setFade = function () {
            var t, i = this;
            i.$slides.each(function (n, a) {
                t = i.slideWidth * n * -1, i.options.rtl === !0 ? e(a).css({
                    position: "relative",
                    right: t,
                    top: 0,
                    zIndex: 800,
                    opacity: 0
                }) : e(a).css({position: "relative", left: t, top: 0, zIndex: 800, opacity: 0})
            }), i.$slides.eq(i.currentSlide).css({zIndex: 900, opacity: 1})
        }, t.prototype.setHeight = function () {
            var e = this;
            if (1 === e.options.slidesToShow && e.options.adaptiveHeight === !0 && e.options.vertical === !1) {
                var t = e.$slides.eq(e.currentSlide).outerHeight(!0);
                e.$list.css("height", t)
            }
        }, t.prototype.setOption = t.prototype.slickSetOption = function (e, t, i) {
            var n = this;
            n.options[e] = t, i === !0 && (n.unload(), n.reinit())
        }, t.prototype.setPosition = function () {
            var e = this;
            e.setDimensions(), e.setHeight(), e.options.fade === !1 ? e.setCSS(e.getLeft(e.currentSlide)) : e.setFade(),
                e.$slider.trigger("setPosition", [e])
        }, t.prototype.setProps = function () {
            var e = this, t = document.body.style;
            e.positionProp = e.options.vertical === !0 ? "top" : "left", "top" === e.positionProp ? e.$slider.addClass("slick-vertical") : e.$slider.removeClass("slick-vertical"), void 0 === t.WebkitTransition && void 0 === t.MozTransition && void 0 === t.msTransition || e.options.useCSS === !0 && (e.cssTransitions = !0), void 0 !== t.OTransform && (e.animType = "OTransform", e.transformType = "-o-transform", e.transitionType = "OTransition", void 0 === t.perspectiveProperty && void 0 === t.webkitPerspective && (e.animType = !1)), void 0 !== t.MozTransform && (e.animType = "MozTransform", e.transformType = "-moz-transform", e.transitionType = "MozTransition", void 0 === t.perspectiveProperty && void 0 === t.MozPerspective && (e.animType = !1)), void 0 !== t.webkitTransform && (e.animType = "webkitTransform", e.transformType = "-webkit-transform", e.transitionType = "webkitTransition", void 0 === t.perspectiveProperty && void 0 === t.webkitPerspective && (e.animType = !1)), void 0 !== t.msTransform && (e.animType = "msTransform", e.transformType = "-ms-transform", e.transitionType = "msTransition", void 0 === t.msTransform && (e.animType = !1)), void 0 !== t.transform && e.animType !== !1 && (e.animType = "transform", e.transformType = "transform", e.transitionType = "transition"), e.transformsEnabled = null !== e.animType && e.animType !== !1
        }, t.prototype.setSlideClasses = function (e) {
            var t, i, n, a, r = this;
            r.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden", "true").removeClass("slick-center"), i = r.$slider.find(".slick-slide"), r.options.centerMode === !0 ? (t = Math.floor(r.options.slidesToShow / 2), r.options.infinite === !0 && (e >= t && e <= r.slideCount - 1 - t ? r.$slides.slice(e - t, e + t + 1).addClass("slick-active").attr("aria-hidden", "false") : (n = r.options.slidesToShow + e, i.slice(n - t + 1, n + t + 2).addClass("slick-active").attr("aria-hidden", "false")), 0 === e ? i.eq(i.length - 1 - r.options.slidesToShow).addClass("slick-center") : e === r.slideCount - 1 && i.eq(r.options.slidesToShow).addClass("slick-center")), r.$slides.eq(e).addClass("slick-center")) : e >= 0 && e <= r.slideCount - r.options.slidesToShow ? r.$slides.slice(e, e + r.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false") : i.length <= r.options.slidesToShow ? i.addClass("slick-active").attr("aria-hidden", "false") : (a = r.slideCount % r.options.slidesToShow, n = r.options.infinite === !0 ? r.options.slidesToShow + e : e, r.options.slidesToShow == r.options.slidesToScroll && r.slideCount - e < r.options.slidesToShow ? i.slice(n - (r.options.slidesToShow - a), n + a).addClass("slick-active").attr("aria-hidden", "false") : i.slice(n, n + r.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false")), "ondemand" === r.options.lazyLoad && r.lazyLoad()
        }, t.prototype.setupInfinite = function () {
            var t, i, n, a = this;
            if (a.options.fade === !0 && (a.options.centerMode = !1), a.options.infinite === !0 && a.options.fade === !1 && (i = null, a.slideCount > a.options.slidesToShow)) {
                for (n = a.options.centerMode === !0 ? a.options.slidesToShow + 1 : a.options.slidesToShow, t = a.slideCount; t > a.slideCount - n; t -= 1) i = t - 1, e(a.$slides[i]).clone(!0).attr("id", "").attr("data-slick-index", i - a.slideCount).prependTo(a.$slideTrack).addClass("slick-cloned");
                for (t = 0; t < n; t += 1) i = t, e(a.$slides[i]).clone(!0).attr("id", "").attr("data-slick-index", i + a.slideCount).appendTo(a.$slideTrack).addClass("slick-cloned");
                a.$slideTrack.find(".slick-cloned").find("[id]").each(function () {
                    e(this).attr("id", "")
                })
            }
        }, t.prototype.selectHandler = function (t) {
            var i = this, n = parseInt(e(t.target).parents(".slick-slide").attr("data-slick-index"));
            if (n || (n = 0), i.slideCount <= i.options.slidesToShow) return i.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden", "true"), i.$slides.eq(n).addClass("slick-active").attr("aria-hidden", "false"), i.options.centerMode === !0 && (i.$slider.find(".slick-slide").removeClass("slick-center"), i.$slides.eq(n).addClass("slick-center")), void i.asNavFor(n);
            i.slideHandler(n)
        }, t.prototype.slideHandler = function (e, t, i) {
            var n, a, r, o = null, s = this;
            if (t = t || !1, (s.animating !== !0 || s.options.waitForAnimate !== !0) && !(s.options.fade === !0 && s.currentSlide === e || s.slideCount <= s.options.slidesToShow)) {
                if (t === !1 && s.asNavFor(e), n = e, o = s.getLeft(n), r = s.getLeft(s.currentSlide), s.currentLeft = null === s.swipeLeft ? r : s.swipeLeft, s.options.infinite === !1 && s.options.centerMode === !1 && (e < 0 || e > s.getDotCount() * s.options.slidesToScroll)) return void(s.options.fade === !1 && (n = s.currentSlide, i !== !0 ? s.animateSlide(r, function () {
                    s.postSlide(n)
                }) : s.postSlide(n)));
                if (s.options.infinite === !1 && s.options.centerMode === !0 && (e < 0 || e > s.slideCount - s.options.slidesToScroll)) return void(s.options.fade === !1 && (n = s.currentSlide, i !== !0 ? s.animateSlide(r, function () {
                    s.postSlide(n)
                }) : s.postSlide(n)));
                if (s.options.autoplay === !0 && clearInterval(s.autoPlayTimer), a = n < 0 ? s.slideCount % s.options.slidesToScroll != 0 ? s.slideCount - s.slideCount % s.options.slidesToScroll : s.slideCount + n : n >= s.slideCount ? s.slideCount % s.options.slidesToScroll != 0 ? 0 : n - s.slideCount : n, s.animating = !0, s.$slider.trigger("beforeChange", [s, s.currentSlide, a]), s.currentSlide, s.currentSlide = a, s.setSlideClasses(s.currentSlide), s.updateDots(), s.updateArrows(), s.options.fade === !0) return i !== !0 ? s.fadeSlide(a, function () {
                    s.postSlide(a)
                }) : s.postSlide(a), void s.animateHeight();
                i !== !0 ? s.animateSlide(o, function () {
                    s.postSlide(a)
                }) : s.postSlide(a)
            }
        }, t.prototype.startLoad = function () {
            var e = this;
            e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && (e.$prevArrow.hide(), e.$nextArrow.hide()), e.options.dots === !0 && e.slideCount > e.options.slidesToShow && e.$dots.hide(), e.$slider.addClass("slick-loading")
        }, t.prototype.swipeDirection = function () {
            var e, t, i, n, a = this;
            return e = a.touchObject.startX - a.touchObject.curX, t = a.touchObject.startY - a.touchObject.curY, i = Math.atan2(t, e), n = Math.round(180 * i / Math.PI), n < 0 && (n = 360 - Math.abs(n)), n <= 45 && n >= 0 ? a.options.rtl === !1 ? "left" : "right" : n <= 360 && n >= 315 ? a.options.rtl === !1 ? "left" : "right" : n >= 135 && n <= 225 ? a.options.rtl === !1 ? "right" : "left" : "vertical"
        }, t.prototype.swipeEnd = function (e) {
            var t, i = this;
            if (i.dragging = !1, i.shouldClick = !(i.touchObject.swipeLength > 10), void 0 === i.touchObject.curX) return !1;
            if (i.touchObject.edgeHit === !0 && i.$slider.trigger("edge", [i, i.swipeDirection()]), i.touchObject.swipeLength >= i.touchObject.minSwipe) switch (i.swipeDirection()) {
                case"left":
                    t = i.options.swipeToSlide ? i.checkNavigable(i.currentSlide + i.getSlideCount()) : i.currentSlide + i.getSlideCount(), i.slideHandler(t), i.currentDirection = 0, i.touchObject = {}, i.$slider.trigger("swipe", [i, "left"]);
                    break;
                case"right":
                    t = i.options.swipeToSlide ? i.checkNavigable(i.currentSlide - i.getSlideCount()) : i.currentSlide - i.getSlideCount(), i.slideHandler(t), i.currentDirection = 1, i.touchObject = {}, i.$slider.trigger("swipe", [i, "right"])
            } else i.touchObject.startX !== i.touchObject.curX && (i.slideHandler(i.currentSlide), i.touchObject = {})
        }, t.prototype.swipeHandler = function (e) {
            var t = this;
            if (!(t.options.swipe === !1 || "ontouchend" in document && t.options.swipe === !1 || t.options.draggable === !1 && e.type.indexOf("mouse") !== -1)) switch (t.touchObject.fingerCount = e.originalEvent && void 0 !== e.originalEvent.touches ? e.originalEvent.touches.length : 1, t.touchObject.minSwipe = t.listWidth / t.options.touchThreshold, e.data.action) {
                case"start":
                    t.swipeStart(e);
                    break;
                case"move":
                    t.swipeMove(e);
                    break;
                case"end":
                    t.swipeEnd(e)
            }
        }, t.prototype.swipeMove = function (e) {
            var t, i, n, a, r, o = this;
            return r = void 0 !== e.originalEvent ? e.originalEvent.touches : null, !(!o.dragging || r && 1 !== r.length) && (t = o.getLeft(o.currentSlide), o.touchObject.curX = void 0 !== r ? r[0].pageX : e.clientX, o.touchObject.curY = void 0 !== r ? r[0].pageY : e.clientY, o.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(o.touchObject.curX - o.touchObject.startX, 2))), "vertical" !== (i = o.swipeDirection()) ? (void 0 !== e.originalEvent && o.touchObject.swipeLength > 4 && e.preventDefault(), a = (o.options.rtl === !1 ? 1 : -1) * (o.touchObject.curX > o.touchObject.startX ? 1 : -1), n = o.touchObject.swipeLength, o.touchObject.edgeHit = !1, o.options.infinite === !1 && (0 === o.currentSlide && "right" === i || o.currentSlide >= o.getDotCount() && "left" === i) && (n = o.touchObject.swipeLength * o.options.edgeFriction, o.touchObject.edgeHit = !0), o.options.vertical === !1 ? o.swipeLeft = t + n * a : o.swipeLeft = t + n * (o.$list.height() / o.listWidth) * a, o.options.fade !== !0 && o.options.touchMove !== !1 && (o.animating === !0 ? (o.swipeLeft = null, !1) : void o.setCSS(o.swipeLeft))) : void 0)
        }, t.prototype.swipeStart = function (e) {
            var t, i = this;
            if (1 !== i.touchObject.fingerCount || i.slideCount <= i.options.slidesToShow) return i.touchObject = {}, !1;
            void 0 !== e.originalEvent && void 0 !== e.originalEvent.touches && (t = e.originalEvent.touches[0]), i.touchObject.startX = i.touchObject.curX = void 0 !== t ? t.pageX : e.clientX, i.touchObject.startY = i.touchObject.curY = void 0 !== t ? t.pageY : e.clientY, i.dragging = !0
        }, t.prototype.unfilterSlides = t.prototype.slickUnfilter = function () {
            var e = this;
            null !== e.$slidesCache && (e.unload(), e.$slideTrack.children(this.options.slide).detach(), e.$slidesCache.appendTo(e.$slideTrack), e.reinit())
        }, t.prototype.unload = function () {
            var t = this;
            e(".slick-cloned", t.$slider).remove(), t.$dots && t.$dots.remove(), t.$prevArrow && "object" != typeof t.options.prevArrow && t.$prevArrow.remove(), t.$nextArrow && "object" != typeof t.options.nextArrow && t.$nextArrow.remove(), t.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden", "true").css("width", "")
        }, t.prototype.unslick = function () {
            this.destroy()
        }, t.prototype.updateArrows = function () {
            var e = this;
            Math.floor(e.options.slidesToShow / 2), e.options.arrows === !0 && e.options.infinite !== !0 && e.slideCount > e.options.slidesToShow && (e.$prevArrow.removeClass("slick-disabled"), e.$nextArrow.removeClass("slick-disabled"), 0 === e.currentSlide ? (e.$prevArrow.addClass("slick-disabled"), e.$nextArrow.removeClass("slick-disabled")) : e.currentSlide >= e.slideCount - e.options.slidesToShow && e.options.centerMode === !1 ? (e.$nextArrow.addClass("slick-disabled"), e.$prevArrow.removeClass("slick-disabled")) : e.currentSlide >= e.slideCount - 1 && e.options.centerMode === !0 && (e.$nextArrow.addClass("slick-disabled"), e.$prevArrow.removeClass("slick-disabled")))
        }, t.prototype.updateDots = function () {
            var e = this;
            null !== e.$dots && (e.$dots.find("li").removeClass("slick-active").attr("aria-hidden", "true"), e.$dots.find("li").eq(Math.floor(e.currentSlide / e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden", "false"))
        }, t.prototype.visibility = function () {
            var e = this;
            document[e.hidden] ? (e.paused = !0, e.autoPlayClear()) : (e.paused = !1, e.autoPlay())
        }, e.fn.slick = function () {
            var e, i = this, n = arguments[0], a = Array.prototype.slice.call(arguments, 1), r = i.length, o = 0;
            for (o; o < r; o++) if ("object" == typeof n || void 0 === n ? i[o].slick = new t(i[o], n) : e = i[o].slick[n].apply(i[o].slick, a), void 0 !== e) return e;
            return i
        }, e(function () {
            e("[data-slick]").slick()
        })
    })
}, function (e, t) {
    e.exports = window.jQuery
}, function (e, t, i) {
    "use strict";
    angular.module("slick", []).directive("slick", ["$timeout", function (e) {
        return {
            restrict: "AEC",
            scope: {
                initOnload: "@",
                data: "=",
                currentIndex: "=",
                accessibility: "@",
                adaptiveHeight: "@",
                arrows: "@",
                asNavFor: "@",
                appendArrows: "@",
                appendDots: "@",
                autoplay: "@",
                autoplaySpeed: "@",
                centerMode: "@",
                centerPadding: "@",
                cssEase: "@",
                customPaging: "&",
                dots: "@",
                draggable: "@",
                easing: "@",
                fade: "@",
                focusOnSelect: "@",
                infinite: "@",
                initialSlide: "@",
                lazyLoad: "@",
                onBeforeChange: "&",
                onAfterChange: "&",
                onInit: "&",
                onReInit: "&",
                onSetPosition: "&",
                pauseOnHover: "@",
                pauseOnDotsHover: "@",
                responsive: "=",
                rtl: "@",
                slide: "@",
                slidesToShow: "@",
                slidesToScroll: "@",
                speed: "@",
                swipe: "@",
                swipeToSlide: "@",
                touchMove: "@",
                touchThreshold: "@",
                useCSS: "@",
                variableWidth: "@",
                vertical: "@",
                prevArrow: "@",
                nextArrow: "@"
            },
            link: function (t, i, n) {
                var a, r, o;
                return a = function () {
                    return e(function () {
                        var e;
                        return e = $(i), e.unslick(), e.find(".slick-list").remove(), e
                    })
                }, r = function () {
                    return e(function () {
                        var e, a, r;
                        return r = $(i), null != t.currentIndex && (e = t.currentIndex), a = function (e, i) {
                            return t.customPaging({slick: e, index: i})
                        }, r.slick({
                            accessibility: "false" !== t.accessibility,
                            adaptiveHeight: "true" === t.adaptiveHeight,
                            arrows: "false" !== t.arrows,
                            asNavFor: t.asNavFor ? t.asNavFor : void 0,
                            appendArrows: t.appendArrows ? $(t.appendArrows) : $(i),
                            appendDots: t.appendDots ? $(t.appendDots) : $(i),
                            autoplay: "true" === t.autoplay,
                            autoplaySpeed: null != t.autoplaySpeed ? parseInt(t.autoplaySpeed, 10) : 3e3,
                            centerMode: "true" === t.centerMode,
                            centerPadding: t.centerPadding || "50px",
                            cssEase: t.cssEase || "ease",
                            customPaging: n.customPaging ? a : void 0,
                            dots: "true" === t.dots,
                            draggable: "false" !== t.draggable,
                            easing: t.easing || "linear",
                            fade: "true" === t.fade,
                            focusOnSelect: "true" === t.focusOnSelect,
                            infinite: "false" !== t.infinite,
                            initialSlide: t.initialSlide || 0,
                            lazyLoad: t.lazyLoad || "ondemand",
                            beforeChange: n.onBeforeChange ? t.onBeforeChange : void 0,
                            onReInit: n.onReInit ? t.onReInit : void 0,
                            onSetPosition: n.onSetPosition ? t.onSetPosition : void 0,
                            pauseOnHover: "false" !== t.pauseOnHover,
                            responsive: t.responsive || void 0,
                            rtl: "true" === t.rtl,
                            slide: t.slide || "div",
                            slidesToShow: null != t.slidesToShow ? parseInt(t.slidesToShow, 10) : 1,
                            slidesToScroll: null != t.slidesToScroll ? parseInt(t.slidesToScroll, 10) : 1,
                            speed: null != t.speed ? parseInt(t.speed, 10) : 300,
                            swipe: "false" !== t.swipe,
                            swipeToSlide: "true" === t.swipeToSlide,
                            touchMove: "false" !== t.touchMove,
                            touchThreshold: t.touchThreshold ? parseInt(t.touchThreshold, 10) : 5,
                            useCSS: "false" !== t.useCSS,
                            variableWidth: "true" === t.variableWidth,
                            vertical: "true" === t.vertical,
                            prevArrow: t.prevArrow ? $(t.prevArrow) : void 0,
                            nextArrow: t.nextArrow ? $(t.nextArrow) : void 0
                        }), r.on("init", function (i) {
                            if (n.onInit && t.onInit(), null != e) return i.slideHandler(e)
                        }), r.on("afterChange", function (i, n, a, r) {
                            if (t.onAfterChange && t.onAfterChange(), null != e) return t.$apply(function () {
                                return e = a, t.currentIndex = a
                            })
                        }), t.$watch("currentIndex", function (t, i) {
                            if (null != e && null != t && t !== e) return r.slick("slickGoTo", t)
                        })
                    })
                }, t.initOnload ? (o = !1, t.$watch("data", function (e, t) {
                    if (null != e) return o && a(), r(), o = !0
                })) : r()
            }
        }
    }])
}, function (e, t, i) {
    i(286).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "slick_f4ea4523.css"
}, function (e, t, i) {
    i(288).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "slick-theme_1307ad5b.css"
}, function (e, t, i) {
    i(290).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "dashboard-core_088c4109.css"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    var a = i(292), r = n(a), o = i(293), s = n(o);
    i(294), angular.module("BC.dashboard.core").controller("ChartLinkCtrl", ["$scope", "dashChartLinkService", "errHint", "$translate", "ngDialog", r.default]).service("dashChartLinkService", ["commonHttp", "$rootScope", "$translate", "$q", s.default])
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.default = void 0;
    var a = i(13), r = n(a), o = i(17), s = n(o), l = i(166), c = n(l), d = function () {
        function e(t, i, n, a, o) {
            (0, r.default)(this, e), this.loading = !1, this.isShowFields = !1, this.linkInfo = {}, this.charts = {}, this.mainChart = {}, this.checkAllCt = !1, this.tables = [], this.mainTable = {}, this.nnedShowMappingMode = !1, this.metaX = {}, this.activeXItem = {}, this.activeLayer = {}, this.scope = t, this.draw_chart_url = t.draw_chart_url, this.dashStandardItems = t.dashStandardItems, this.dashChartLinkService = i, this.errHint = n, this.$translate = a, this.ngDialog = o, this.ngOnInit(this.scope.ngDialogData.meta)
        }

        return (0, s.default)(e, [{
            key: "ngOnInit", value: function (e) {
                var t = this;
                if (!e.supportChain) return !1;
                this.mainChart = _.cloneDeep(e), this.mainChart.chartLinkType = this.dashChartLinkService.getChartLinkType(e), this.loading = !0, this.dashChartLinkService.getLinkSetInfo(e.ct_id).then(function (i) {
                    var n = void 0, a = void 0;
                    t.linkInfo = t.dashChartLinkService.setLinkInfoFidToUnique(i.link_info), t.charts = t.dashChartLinkService.getChatList(e.ct_id, t.dashStandardItems, t.linkInfo), t.tables = t.dashChartLinkService.getTablesInfo(t.linkInfo, i.tb_list), t.dashChartLinkService.setTableRelyCtIds(t.tables, t.charts), "C400" === e.type ? (t.dashChartLinkService.setLayerCanSet(t.mainChart.layers), t.mainChart.isGis = !0, t.activeLayer = t.dashChartLinkService.getActiveLayer(t.mainChart.layers, i.master_layer_id), n = t.activeLayer.x, a = t.activeLayer.tb_id) : (n = e.x, a = e.tb_id), t.dashChartLinkService.setInitTableListShow(t.tables, t.linkInfo, a), t._updateModels(a, n), t._updateMapAndCheckAll()
                }, function () {
                    return t.ngDialog.closeAll()
                }).finally(function () {
                    return t.loading = !1
                })
            }
        }, {
            key: "_updateModels", value: function (e, t) {
                this.mainTable = this.dashChartLinkService.getMainTable(e, this.tables), this.metaX = this.dashChartLinkService.getMetaXInfo(t, this.linkInfo, this.mainTable, this.tables, this.mainChart.chartLinkType), this.activeXItem = this.dashChartLinkService.getActiveXItem(this.metaX)
            }
        }, {
            key: "changeMainLayer", value: function () {
                var e = this;
                this.activeLayer.canSet && (this._updateModels(this.activeLayer.tb_id, this.activeLayer.x), this.charts.forEach(function (t) {
                    return !t.unsupported && e.changeChartSelectd(t, "noCheckStatus")
                }), this._updateMapAndCheckAll())
            }
        }, {
            key: "changeChartSelectd", value: function (e, t) {
                var i = this;
                e.isGis ? e.layers.filter(function (e) {
                    return !e.invisible
                }).forEach(function (t) {
                    t.selected = e.selected, i.changeLayerSelected(t, e, !0)
                }) : this.dashChartLinkService.setTableShowByCtOrLayer("chart", e, this.tables, this.mainTable), t || this._updateMapAndCheckAll()
            }
        }, {
            key: "_updateMapAndCheckAll", value: function () {
                this.checkAllCt = this.dashChartLinkService.getCheckAllCharts(this.charts), this.needShowMappingMode = this.dashChartLinkService.getMetaXShow(this.tables)
            }
        }, {
            key: "changeAllChartsSelected", value: function () {
                var e = this;
                this.charts.forEach(function (t) {
                    t.unsupported || (t.selected = e.checkAllCt, e.changeChartSelectd(t, !0))
                }), this.needShowMappingMode = this.dashChartLinkService.getMetaXShow(this.tables)
            }
        }, {
            key: "isMapChart", value: function () {
                return $.inArray(this.mainChart.type, ["C271", "C272", "C273"]) > -1
            }
        }, {
            key: "changeLayerSelected", value: function (e, t, i) {
                this.dashChartLinkService.setTableShowByCtOrLayer("layer", e, this.tables, this.mainTable, t), t.selLayerAmount = this.dashChartLinkService.getCheckLayerAmount(t.layers), i || (t.selected = t.selLayerAmount > 0 && t.selLayerAmount === t.visibleLayerAmount, this._updateMapAndCheckAll())
            }
        }, {
            key: "saveConfig", value: function () {
                var e = this,
                    t = this.dashChartLinkService.vailPostLinkInfo(this.metaX, this.charts, this.tables, this.activeLayer);
                if (t) return this.errHint(t), !1;
                var i = {
                    ct_id: this.mainChart.ct_id,
                    link_info: angular.toJson(this.dashChartLinkService.getPostLinkInfo(this.metaX, this.charts, this.mainTable)),
                    master_layer_id: this.activeLayer.layer_id
                };
                this.loading = !0, this.dashChartLinkService.setChartLink(i).then(function (t) {
                    e.scope.$emit("updateDashboardInfo"), e.errHint(e.$translate.instant("saveSuccess")), e.ngDialog.closeAll()
                }).finally(function () {
                    return e.loading = !1
                })
            }
        }, {
            key: "showSubFieldsList", value: function (e) {
                var t = this;
                c.default.show({
                    isAllField: !0,
                    fields: this.dashChartLinkService.getAllSubFields(this.mainTable.fields, this.metaX),
                    hook: $(e.target),
                    container: $(e.target).parent(),
                    type: "link",
                    isRight: !0,
                    isNotAbs: !0,
                    callback: function (e) {
                        return t.addSubField(e)
                    }
                }), $(document).off("click.linkSetting").on("click.linkSetting", function (i) {
                    return $(e.target).hasClass("J-add-field") && !t.isShowFields ? void(t.isShowFields = !0) : (t.isShowFields = !1, c.default.remove(), $(document).off("click.linkSetting"), e.preventDefault(), !1)
                })
            }
        }, {
            key: "addSubField", value: function (e) {
                var t = this.dashChartLinkService.getXItemSelectInfo(e, this.linkInfo, this.tables);
                this.metaX.push($.extend({}, e, t, {isSubField: 1})), this.activeXItem = this.dashChartLinkService.getActiveXItem(this.metaX, "findLast"), this.scope.$$phase || this.scope.$digest()
            }
        }, {
            key: "removeSubField", value: function (e) {
                this.metaX.splice(this.metaX.indexOf(e), 1), this.activeXItem = this.dashChartLinkService.getActiveXItem(this.metaX, "findLast")
            }
        }]), e
    }();
    t.default = d
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.default = void 0;
    var a = i(13), r = n(a), o = i(17), s = n(o), l = ["C101", "C102", "C103", "C104", "C105"], c = ["C500"],
        d = function () {
            function e(t, i, n, a) {
                (0, r.default)(this, e), this.commonHttp = t, this.$rootScope = i, this.$translate = n, this.$q = a
            }

            return (0, s.default)(e, [{
                key: "getLinkSetInfo", value: function (e) {
                    var t = this;
                    return this.commonHttp.post("/api/chart_link/info", {ct_id: e}).then(function (e) {
                        return "0" == e.status ? e.result : t.$q.reject("error")
                    })
                }
            }, {
                key: "setTableShowByCtOrLayer", value: function (e, t, i, n) {
                    var a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {}, r = t.selected,
                        o = t.tb_id, s = "chart" === e ? t.ct_id : a.ct_id + t.layer_id, l = _.find(i, function (e) {
                            return e.tb_id === o
                        }), c = l.relyCtIds;
                    c[s] = r, l.show = l.tb_id !== n.tb_id && _.filter(c, function (e) {
                        return e
                    }).length > 0
                }
            }, {
                key: "setTableRelyCtIds", value: function (e, t) {
                    var i = _.keyBy(e, "tb_id");
                    t.filter(function (e) {
                        return !e.unsupported
                    }).forEach(function (e) {
                        if (e.isGis) e.layers.forEach(function (t) {
                            var n = i[t.tb_id];
                            n && (n.relyCtIds[e.ct_id + t.layer_id] = t.selected)
                        }); else {
                            var t = i[e.tb_id];
                            t && (t.relyCtIds[e.ct_id] = e.selected)
                        }
                    })
                }
            }, {
                key: "getLinkSupport", value: function (e, t, i) {
                    var n = "free_drill_opt" in function (e, t) {
                        for (var i in t) if (t[i].options.ct_id === e) return t[i].options.optional
                    }(e.ct_id, t), a = function (e) {
                        var t = [];
                        return e.forEach(function (e) {
                            var i = e.children[0].meta.type;
                            i && l.indexOf(i) > -1 || t.push(angular.copy(e))
                        }), t
                    }(i).length > 1, r = function (e) {
                        var t = !0;
                        if ("C400" === e.type) {
                            var i = e.layers && e.layers.filter(function (e) {
                                return e.x && e.x.length > 0 && !e.invisible
                            }).length;
                            i && 0 != i || (t = !1)
                        }
                        return t
                    }(e);
                    return !("C261 C290 C300 C301 C310 C320 C330 C360 C370 C500".indexOf(e.type) > -1 || e.chart_jump && "1" == e.chart_jump.can_jump || e && e.level_fields && e.level_fields.length > 1 || !a || n || !r)
                }
            }, {
                key: "getChatList", value: function (e, t, i) {
                    var n = [], a = {}, r = this._getSelectLinkObj(i), o = r.linkCtIdList || {},
                        s = r.linkLayerIdList || {};
                    return t.forEach(function (t, i) {
                        a = t.children[0].meta, a.type && a.ct_id !== e && l.indexOf(a.type) < 0 && function () {
                            var e = {
                                name: a.name,
                                ct_id: a.ct_id,
                                tb_id: a.tb_id,
                                unsupported: c.indexOf(a.type) > -1,
                                selected: $.inArray(a.ct_id, o) > -1,
                                isMainChart: a.chart_link && 2 == a.chart_link.linked_chart_type,
                                isGis: "C400" === a.type
                            };
                            if (e.isGis) if (a.layers && 0 != a.layers.length) {
                                var t = a.layers.filter(function (e) {
                                    return e.invisible
                                }).length;
                                t === a.layers.length && (e.unsupported = !0), e.layers = _.map(a.layers, function (t) {
                                    return {
                                        layer_id: t.layer_id,
                                        selected: s.indexOf(e.ct_id + t.layer_id) > -1,
                                        tb_id: t.tb_id,
                                        layer_name: t.layer_name,
                                        invisible: t.invisible
                                    }
                                }), e.visibleLayerAmount = e.layers.filter(function (e) {
                                    return e.selected || !e.invisible
                                }).length, e.showLayer = !1, e.selLayerAmount = e.layers.filter(function (e) {
                                    return e.selected
                                }).length, e.selected = e.selLayerAmount > 0 && e.selLayerAmount == e.visibleLayerAmount
                            } else e.unsupported = !0;
                            n.push(e)
                        }()
                    }), n
                }
            }, {
                key: "setLayerCanSet", value: function (e) {
                    e.forEach(function (e) {
                        e.canSet = e.x.length > 0 && !e.invisible
                    })
                }
            }, {
                key: "getTablesInfo", value: function () {
                    var e = (arguments.length > 0 && void 0 !== arguments[0] && arguments[0], arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []),
                        t = [];
                    return e.forEach(function (e, i) {
                        t.push({
                            show: !1,
                            name: e.name,
                            fields: e.fields,
                            tb_id: e.tb_id,
                            relyCtIds: {},
                            fieldsKeyByFid: _.keyBy(e.fields, "fid")
                        })
                    }), t
                }
            }, {
                key: "getMainTable", value: function (e, t) {
                    return _.find(t, function (t) {
                        return t.tb_id === e
                    })
                }
            }, {
                key: "getActiveLayer", value: function (e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0;
                    return _.find(e, function (e) {
                        return t ? e.layer_id === t : e.canSet
                    }) || {}
                }
            }, {
                key: "setInitTableListShow", value: function () {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                        t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
                        i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,
                        n = this._getSelectLinkObj(t).linkTbIdList || {};
                    e.forEach(function (e) {
                        e.show = e.tb_id !== i && n.indexOf(e.tb_id) > -1
                    })
                }
            }, {
                key: "_getSelectLinkObj", value: function (e) {
                    var t = {linkCtIdList: [], linkTbIdList: [], linkLayerIdList: []};
                    return _.isArray(e) ? (e.forEach(function (e) {
                        t.linkCtIdList.push(e.link_ct_id), t.linkTbIdList.push(e.link_tb_id), e.guest_layer_id && t.linkLayerIdList.push(e.link_ct_id + e.guest_layer_id)
                    }), t.linkLayerIdList = _.flatMap(t.linkLayerIdList), t) : t
                }
            }, {
                key: "getMetaXInfo", value: function (e, t, i, n, a) {
                    function r(e, t, i, n, a) {
                        var r = this, o = {};
                        return e.forEach(function (e, s) {
                            o = r.getXItemSelectInfo(e, t, i, s, n, a), e.selectedTable = o.selectedTable, e.selected = o.selected
                        }), 0 === e.filter(function (e) {
                            return e.selected
                        }).length && (e[0].selected = !0), e
                    }

                    var o = e.slice(0), s = function (e, t, i) {
                        var n = o.map(function (e) {
                            return e.fid
                        }), a = [], r = _(t).filter(function (e) {
                            return e.link_tb_id !== i.tb_id
                        }).take(1).value()[0];
                        return r && r.field_map.forEach(function (e) {
                            var t = i.fieldsKeyByFid[e.field];
                            void 0 !== t && n.indexOf(t.fid) < 0 && (t = _.cloneDeep(t), t.isSubField = 1, a.push(t), n.push(e.field))
                        }), a
                    }(e, t, i);
                    return o = o.concat(s), r.call(this, o, t, n, i, a)
                }
            }, {
                key: "setLinkInfoFidToUnique", value: function (e) {
                    return e.forEach(function (e) {
                        e.uniqueIdMap = _.keyBy(e.field_map, function (e) {
                            return e.field + e.index
                        })
                    }), e
                }
            }, {
                key: "getActiveXItem", value: function (e, t) {
                    return t ? _.findLast(e, function (e) {
                        return e.selected
                    }) || e[0] : _.find(e, function (e) {
                        return e.selected
                    }) || e[0]
                }
            }, {
                key: "getXItemSelectInfo", value: function (e, t, i) {
                    function n(e, t, i, n) {
                        var a = t.tb_id, r = e.name, o = {}, s = !1,
                            l = n[a] && n[a].uniqueIdMap[i] && n[a].uniqueIdMap[i].link_field;
                        return l ? s = !0 : (o = _.find(t.fields, function (e) {
                            return e.name === r
                        }), l = o ? o.fid : null), {fromLinkInfo: s, linkFieldId: l}
                    }

                    var a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : void 0,
                        r = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {},
                        o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : "", s = e.fid,
                        l = e.fid + a, c = !1, d = {}, u = _.keyBy(t, function (e) {
                            return e.link_tb_id
                        });
                    return i.forEach(function (t) {
                        var i = t.tb_id, a = n(e, t, l, u);
                        "manyDms" === o ? a.fromLinkInfo && t.tb_id !== r.tb_id && (c = !0) : c = !0, c = !(!a.fromLinkInfo || t.tb_id === r.tb_id) || c, d[i] = {
                            tbId: i,
                            linkFieldId: a.linkFieldId,
                            fid: s
                        }
                    }), void 0 === a && (c = !0), {selectedTable: d, selected: c}
                }
            }, {
                key: "getChartLinkType", value: function (e) {
                    return $.inArray(e.type, ["C210", "C211", "C212", "C220", "C240", "C241", "C242"]) > -1 && 2 == e.x.length ? "doubleDms" : "C200" == e.type ? "manyDms" : "oneDms"
                }
            }, {
                key: "getMetaXShow", value: function (e) {
                    return !!_.find(e, function (e) {
                        return e.show
                    })
                }
            }, {
                key: "getCheckAllCharts", value: function (e) {
                    return !_.find(e, function (e) {
                        return !e.unsupported && !e.selected
                    })
                }
            }, {
                key: "getCheckLayerAmount", value: function (e) {
                    return e.filter(function (e) {
                        return e.selected
                    }).length
                }
            }, {
                key: "delChartLink", value: function (e) {
                    var t = this;
                    return this.commonHttp.post("/api/chart_link/delete", {ct_id: e}).then(function (i) {
                        var n = $.inArray(e, t.$rootScope.mainChartIdContainer);
                        angular.forEach(t.$rootScope.mainChartContainer, function (i, n) {
                            i.ctId == e && t.$rootScope.mainChartContainer.splice(n, 1)
                        }), t.$rootScope.mainChartIdContainer.splice(n, 1)
                    })
                }
            }, {
                key: "getAllSubFields", value: function (e, t) {
                    for (var i = e.slice(0), n = 0, a = t.length; n < a; n++) for (var r = t[n], o = 0, s = i.length; o < s; o++) {
                        var l = i[o];
                        l && r && l.fid === r.fid && i.splice(o, 1)
                    }
                    return i
                }
            }, {
                key: "vailPostLinkInfo", value: function (e, t, i, n) {
                    var a = _.keyBy(i, "tb_id"), r = null;
                    return 0 == n.canSet && (r = this.$translate.instant("dash.layerIsNull")), 0 === _.filter(t, function (e) {
                        return e.selected || e.selLayerAmount > 0
                    }).length && (r = this.$translate.instant("chart.chainChart")), _(e).filter(function (e) {
                        return !!(e.selected && _(e.selectedTable).filter(function (e) {
                            return a[e.tbId].show && !e.linkFieldId
                        }).take(1).value().length > 0)
                    }).take(1).value().length > 0 && (r = this.$translate.instant("chart.chainField")), r
                }
            }, {
                key: "getPostLinkInfo", value: function (e, t, i) {
                    function n(e, t, i, n, r) {
                        var o = {link_ct_id: e, link_tb_id: t, field_map: a(t, i, n)};
                        return r && (o.guest_layer_id = r), o
                    }

                    function a(e, t, i) {
                        var n = [], a = null, o = e == i.tb_id;
                        return t.forEach(function (t, i) {
                            if (!t.selected && !o) return !1;
                            var r = t.fid, s = {};
                            a = o ? r : _.filter(t.selectedTable, function (t) {
                                return t.tbId === e
                            })[0].linkFieldId, a = a.split("_")[0], s = {
                                field: r,
                                index: i,
                                link_field: a
                            }, t.isSubField && (s.is_sub_field = 1), n.push(s)
                        }), o && (n = n.concat(r(n, i))), n
                    }

                    function r(e, t) {
                        var i = [], n = _.map(e, function (e) {
                            return e.field
                        }), a = n.length;
                        return t.fields.forEach(function (e) {
                            var t = e.fid;
                            n.indexOf(t) < 0 && (i.push({field: t, index: a, link_field: t, is_sub_field: 1}), a++)
                        }), i
                    }

                    var o = [];
                    return t.forEach(function (t) {
                        t.isGis ? t.layers && t.layers.filter(function (e) {
                            return e.selected
                        }).forEach(function (a) {
                            o.push(n(t.ct_id, a.tb_id, e, i, a.layer_id))
                        }) : t.selected && o.push(n(t.ct_id, t.tb_id, e, i))
                    }), o
                }
            }, {
                key: "setChartLink", value: function (e) {
                    var t = this;
                    return this.commonHttp.post("/api/chart_link/commit", e).then(function (e) {
                        t.$rootScope.mainChartIdContainer = [], t.$rootScope.mainChartContainer = []
                    })
                }
            }]), e
        }();
    t.default = d
}, function (e, t, i) {
    i(295).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "chart-link_7a552470.css"
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.dashboard.core").factory("dashChartJump", ["$rootScope", "ngDialog", "commonService", "multipleProService", "errHint", "$state", "$translate", function (e, t, i, n, r, o, s) {
        function l(n) {
            var l = {
                checkSupport: function (e) {
                    return !("C500".indexOf(e.type) > -1) && !("C261 C281 C290 C300 C301 C310 C320 C330 C340 C400 C360 C370".indexOf(e.type) > -1 && 0 == e.ct_type || e && e.level_fields && e.level_fields.length > 1 || e && e.chart_link && 1 * e.chart_link.linked_chart_type == 2)
                }, getChartFields: function (e) {
                    var t = ["C210", "C211", "C212", "C220", "C240", "C241", "C242"], i = null;
                    if ("C200" === e.type) {
                        i = e.x.slice(0);
                        for (var n = 0, a = i.length; n < a; n++) {
                            var o = i[n];
                            o.name = o.nick_name || o.name, o.fIndex = n
                        }
                        return {fields: i, type: "arr"}
                    }
                    return $.inArray(e.type, t) > -1 && e.x && 2 == e.x.length ? i = e.x[1] : e.x && 1 == e.x.length ? i = e.x[0] : r(s.instant("dash.dashCartJump.needDimensionsFields")), i && (i.name = i.nick_name || i.name), {
                        fields: i,
                        type: "str"
                    }
                }, getInitFieldId: function (e, t) {
                    var i = "arr" == t.type ? t.fields[0] : t.fields;
                    return e.fid || i.fid
                }, getInitFieldObj: function (e, t) {
                    var i = t.fields;
                    if ("arr" == t.type) {
                        for (var n = null, a = 0, r = i.length; a < r; a++) {
                            var o = i[a];
                            if (o.fid == e.fid && "f_index" in e && e.f_index == o.fIndex) {
                                n = o;
                                break
                            }
                        }
                        return n || i[0] || {}
                    }
                    return i
                }, getInitMode: function (e) {
                    return e.is_blank ? 1 : 0
                }, getInitDash: function (e, t) {
                    for (var i, n = 0, a = t.length; n < a; n++) {
                        var r = t[n];
                        if ("dashboard" === r.attribute && r.dsh_id == e) {
                            i = r;
                            break
                        }
                    }
                    return i = i || t[0] || {}, i.df_list = i.df_list || [], i
                }, getInitFilter: function (e, t) {
                    for (var i, n = 0, a = t.length; n < a; n++) {
                        var r = t[n];
                        if (r.df_id == e) {
                            i = r;
                            break
                        }
                    }
                    return i = i || t[0] || {}
                }, jumpController: ["$scope", "$timeout", "multipleProService", function (n, a, s) {
                    function c(e) {
                        var t = e.select_info || {};
                        s.initDeep(e.info_list, 0);
                        var i = e.info_list, a = s.getProjObjById(t.proj_id, i),
                            r = a ? l.getInitDash(t.dsh_id, a.subs || []) : {},
                            o = l.getInitFilter(t.df_id, r.df_list || []), c = l.getInitMode(t),
                            d = l.getInitFieldObj(t, v);
                        h.openMode = c, h.infoList = i, h.initField = d, h.jumpFields = v, h.initProj = a, h.initDash = r, h.initFilter = o, h.initProj ? n.changeProj(h.initProj) : n.changeProj(h.infoList[0])
                    }

                    function d(e, t) {
                        e && e.stopPropagation(), t.nodeCollapse = !t.nodeCollapse
                    }

                    function u(e) {
                        if (h.selectProjObj && h.selectProjObj.proj_id !== e.proj_id && (n.dashChartJumpData.currentDashName = ""), n.dashChartJumpData.currentProjectName = e.name, n.dashChartJumpData.showProjectList = !1, e) {
                            h.selectProjObj = angular.copy(e), h.selectDashObj = null;
                            var t = h.selectProjObj.subs || [], i = [];
                            t.map(function (e, t) {
                                "dashboard" === e.attribute && e.dsh_id !== n.selected.dsh_id && i.push(e)
                            }), h.selectProjObj.subs = i, $.isEmptyObject(h.initDash) ? i && i.length > 0 && (n.changeDash(i[0]), h.selectFilterObj = h.selectDashObj.df_list ? h.selectDashObj.df_list[0] : {}) : n.changeDash(h.initDash)
                        }
                        n.$$phase || n.$digest()
                    }

                    function p(e) {
                        n.dashChartJumpData.currentDashName = e.name, n.dashChartJumpData.showDashList = !1, h.selectDashObj = e, h.selectDashObj.df_list = e.df_list || [], h.selectFilterObj = $.isEmptyObject(h.initFilter) ? e.df_list[0] : h.initFilter
                    }

                    function f(e) {
                        if (e.selectFilterObj && e.selectFilterObj.df_id) {
                            e.selectFieldObj = e.selectFieldObj || e.initField;
                            var a = {
                                ct_id: e.meta.ct_id,
                                fid: e.selectFieldObj.fid,
                                f_index: e.selectFieldObj.fIndex,
                                proj_id: e.selectProjObj.proj_id,
                                dsh_id: e.selectDashObj.dsh_id,
                                df_id: e.selectFilterObj.df_id,
                                is_blank: 1 * e.openMode
                            };
                            if (!function (e, t) {
                                var i;
                                return i = "date" == e ? 2 : 1, t == i && 1 == t
                            }(e.selectFieldObj.data_type, e.selectFilterObj.type)) return void r(n.tips["dash.dashCartJump.errSameTip"]);
                            i.ds.saveJumpInfo(a).then(function (e) {
                                "0" == e.status ? (n.getDashboardInfo(n.dashSelected), t.closeAll()) : r(e.errstr)
                            })
                        }
                    }

                    var h = n.ngDialogData, g = h.meta, m = g.ct_id, v = l.getChartFields(g);
                    n.dashChartJumpData = {
                        showProjectList: !1,
                        showDashList: !1,
                        currentDashName: "",
                        currentProjectName: ""
                    }, n.changeProj = u, n.changeDash = p, n.nodeCollapseHandle = d, n.save = f, function (t, a) {
                        n.showLoading = !0;
                        var r = o.params.dashId, s = {ct_id: t, dsh_id: r};
                        [0, 2].indexOf(e.dashCategory) >= 0 && (s.categories = angular.toJson([0, 2])), i.ds.getJumpInfo(s).then(function (t) {
                            "0" == t.status ? c(t.result) : e.pageLoading = !1
                        }).finally(function () {
                            n.showLoading = !1
                        })
                    }(m)
                }], showDia: function (e) {
                    if (BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "dashboard_hyperlink", ct_id: e.ct_id})
                    }), l.checkSupport(e)) {
                        var i = l.getChartFields(e);
                        i && i.fields && t.open({
                            template: "/static/dashboard-core/chart-jump/chart-jump-dash.html",
                            className: "ngdialog-theme-default chart-jump-model",
                            data: {meta: e},
                            scope: n,
                            controller: l.jumpController
                        })
                    }
                }, del: function (e, a) {
                    e.stopPropagation(), i.ds.delJumpInfo({ct_id: a}).then(function (e) {
                        "0" == e.status && r(n.tips["dash.dashCartJump.successDelTip"]), n.getDashboardInfo(n.dashSelected), t.closeAll()
                    })
                }
            };
            return l
        }

        return l
    }]).factory("chartJumpFuns", ["commonService", "multipleProService", "$location", "$state", "ngDialog", "$translate", "errHint", function (e, t, i, n, a, r, o) {
        var s = {
            gotoDashboard: function (e, t, n, l) {
                var c = e.is_blank, d = (e.jumpInfo, e.dsh_id);
                e.df_id;
                if (!t) return o(r.instant("dash.dashTargetForbiddenOrNotExist")), !1;
                var u = s.getDashUrl(e, t, n, l);
                if (0 == c) {
                    return i.path().indexOf("/dash_fullscreen/") > -1 ? void i.url(u) : (a.closeAll(), void $("body").trigger("changeDashboard", {
                        dshId: d,
                        projInfo: t,
                        url: u
                    }))
                }
                window.open(u, "_blank")
            }, getPointData: function (e, t, i) {
                var n = ["C271", "C272", "C273"], a = i.info.chart_type, r = i.data.x, o = [];
                if ("C200" === a) return t;
                var s = !1;
                if (i.info.color_setting && i.info.color_setting.field) {
                    i.info.color_setting.field.forEach(function (t) {
                        t.fid == e.fid && (s = !0)
                    })
                }
                return $.inArray(a, n) > -1 ? o.push(t.name) : angular.forEach(r, function (e) {
                    var i = 0;
                    i = s ? t.series.index : t.index, o.push(e.data[i])
                }), o[o.length - 1]
            }, getDashUrl: function (e, t, n, a) {
                for (var r, o = e.proj_id, l = e.dsh_id, c = e.df_id, d = e.is_blank, u = d ? "/#" : "", p = i.path(), f = p.indexOf("/dash_edit") > -1 || p.indexOf("/dash_fullscreen") > -1, h = (p.indexOf("dash_tpl"), t.subs.length - 1); h >= 0; h--) {
                    var g = t.subs[h];
                    if ("dashboard" == g.attribute && g.dsh_id === l) {
                        r = g;
                        break
                    }
                }
                var m = r && 2 == r.category, v = u;
                r && 0 == r.category && (f = !0), v += f || m ? "/dash_edit" : "/dash_tpl";
                var y, b = t.rule_id, _ = s.getPointData(e, n, a), w = m ? "/mode/adv" : "",
                    x = "?df_id=" + c + "&range=" + _;
                return y = b ? v + "/" + o + "/" + l + "/" + b : v + "/" + o + "/" + l, y = y + w + x
            }, check: function (i, a, r) {
                var l = a.optional.chart_jump_info, c = a.ct_id, d = l.dsh_id, u = n.params.dashId,
                    p = t.getProjObjById(l.proj_id, r);
                e.ds.checkJumpInfo({ct_id: c, tgt_dsh_id: d, dsh_id: u}).then(function (e) {
                    "0" == e.status && (1 == e.result.can_jump ? s.gotoDashboard(l, p, i, a) : o("没有筛选器"))
                })
            }
        };
        return s
    }])
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.dashboard.core").directive("chartOperate", ["$location", "$stateParams", "$rootScope", "ngDialog", "chartInstService", function (e, t, n, r, o) {
        return {
            restrict: "A",
            templateUrl: i(298),
            replace: !0,
            link: function (s, l, c) {
                function d(e, t) {
                    if ("add" == e) {
                        var i = '<div class="chart-operate-mask" style="position:absolute;left:0;top:0;bottom:0;right:0;z-index:10;cursor:default"></div>';
                        $(l).parent().find(".item-chart").append(i), $(l).prepend(i)
                    } else $(l).parent().find(".chart-operate-mask").remove()
                }

                function u(e) {
                    if (1 == e.info.is_ct_tpl) {
                        var t = {
                            refresh: !1,
                            edit: !1,
                            summary: !1,
                            fullScreen: !0,
                            dashFilter: !1,
                            warn: !1,
                            sort: !1,
                            editData: !bdp.bdpPageStatus.isUnderDataScreenNormal()
                        };
                        _.extend(s.chartOptPermission, t)
                    } else s.chartOptPermission = v;
                    s.$$phase || s.$digest()
                }

                function p(e) {
                    for (var t = 0, i = null, n = s.dashStandardItems.length - 1; n >= 0; n--) {
                        var a = s.dashStandardItems[n];
                        if (a.children[0].meta.ct_id === e) {
                            i = a.children[0].meta, t = n;
                            break
                        }
                    }
                    return {meta: i, index: t}
                }

                var f = c.ctId, h = $(l).parents(".chart-box").find(".chart"), g = $(l).find(".J-width-change");
                h = h.length > 0 ? h : l.parents("li.gridster-item").find(".chart"), c.origin && c.origin.indexOf("data_screen") > -1 && (s.permision.isDataScreen = !0);
                var m = bdp.bdpPageStatus.isUnderAdvDashEdit() || bdp.bdpPageStatus.isUnderDataScreenEdit();
                s.chartOptPermission = {
                    refresh: !n.dashEditMode || m,
                    edit: !n.dashEditMode || m,
                    summary: !n.dashEditMode || m,
                    fullScreen: !n.dashEditMode || m,
                    dashFilter: !n.dashEditMode || m,
                    sort: !n.dashEditMode || m,
                    warn: !n.dashEditMode || m,
                    more: !n.dashEditMode || m
                }, s.$watch("operateView.chartArgShow", function (e) {
                    void 0 !== e && (e ? d("add", "inner-chart-args") : d("remove", "inner-chart-args"))
                }), (bdp.bdpPageStatus.isUnderAdvDashNormal() || bdp.bdpPageStatus.isUnderDataScreenNormal() || bdp.bdpPageStatus.isUnderAdvDashFullScreen()) && (s.chartOptPermission = {
                    refresh: !1,
                    edit: !1,
                    summary: !1,
                    fullScreen: !0,
                    dashFilter: !0,
                    warn: !1,
                    sort: !1,
                    more: !1
                });
                var v = JSON.parse((0, a.default)(s.chartOptPermission));
                o.on(f).then(function (e) {
                    e.on("data", function () {
                        u(e)
                    })
                }), s.editData = function () {
                    s.chartId = f, r.open({
                        templateUrl: i(299),
                        scope: s,
                        className: "ngdialog-theme-default ngDialog-width-520",
                        controller: "editChartTemplateController"
                    })
                }, s.edit = function () {
                    var i = p(f), n = {C400: "/gis_edit", C500: "/custom_chart_edit"},
                        r = n[i.meta.type] || "/chart_edit", o = c.origin ? "?page_referrer=" + c.origin : "";
                    $.cookie("grid_index", i.index);
                    var s = r + "/" + t.projId + "/" + t.dashId + "/" + f + o;
                    BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "edit", ct_id: f})
                    }), e.url(s)
                }, s.refreshChart = function (e) {
                    var t = h.data("chart-data");
                    h.find(".hz-table").length > 0 && h.attr("data-drill", "true"), e.type, t.emit("reflow"), g.hide(), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "refresh", ct_id: f})
                    })
                }, s.revertSelection = function () {
                    var e = h.data("chart-data");
                    e && e.exitSelectionView()
                }, s.saveTableWidth = function () {
                    h.trigger("saveDashTableWidth")
                }, s.closeCB = function () {
                    s._t = !s._t
                }, h.on("hasChangeColWidth", function (e) {
                    g.show(), s._t = !0, s.$$phase || s.$digest()
                })
            },
            controller: ["$scope", "commonHttp", "warnOperatorMap", "ngDialog", "$filter", "chartWarnService", function (e, t, i, r, o, s) {
                function l(e) {
                    var t = 0;
                    return (e.info.param_setting || []).forEach(function (e) {
                        e.display && t++
                    }), !!t
                }

                e.switchWarn = function (i) {
                    var n = 1 == i.meta.warn ? 2 : 1;
                    t.get("/api/warn/switch", {ct_id: i.meta.ct_id, opt: n}).then(function (t) {
                        0 == +t.status && (i.meta.warn = n, e.refreshChart({type: "warn"}))
                    })
                }, e.operateView = {chartArgShow: !1}, e.chartInfo = [], e.chartData = [], e.$on("chart_data_load", function (t, i) {
                    e.ct_id = i.ct_id, e.rule_id = i.rule_id, e.chartInfo = i.info, e.chartData = i.chartData, e.warnList = e.chartInfo.warn_info || [], e.warnMark = e.chartData && e.chartData.warn_mark || [], e.warnSwitchOn = !1, e.warnTrigger = {
                        has: !1,
                        show: !1,
                        info: []
                    }, e.operateView.chartArgIf = l(i), e.operateView.isGraft = "graft" == e.chartInfo.tb_type;
                    for (var n = 0; n < e.warnList.length; n++) {
                        var a = e.warnList[n];
                        a.switch && (e.warnSwitchOn = !0, a.is_trigger && (e.warnTrigger.has = !0, a.last_warn_result && e.warnTrigger.info.push({
                            text: a.last_warn_result,
                            time: o("date")(a.last_warn_time, "yyyy-MM-dd HH:mm:ss")
                        })))
                    }
                    e.canSetWarnLine()
                }), e.$on("fire-mouseleave-item-event", function () {
                    void 0 !== e.operateView.chartArgShow && (e.operateView.chartArgShow = !1)
                }), e.canSetWarnLine = function () {
                    e.operateView.canSetWarnLine = !0;
                    var t = e.selected_type, i = e.drill_level || 0;
                    e.operateView.canSetWarnLine = !e.operateView.isGraft && t && ["C212", "C230", "C242", "C271", "C273", "C281", "C290", "C300", "C301", "C320", "C330", "C340", "C352", "C360", "C370", "C400", "C500"].indexOf(t) < 0 && i < 1
                }, e.canEnterFullScreen = function () {
                    return bdp.bdpPageStatus.isUnderDataScreen() || bdp.bdpPageStatus.isUnderAdvDash() ? n.dashEditMode || bdp.bdpPageStatus.isUnderAdvDashFullScreen() || bdp.bdpPageStatus.isUnderDataScreenNormal() || bdp.bdpPageStatus.isUnderAdvDashNormal() : !n.dashEditMode
                }, e.field_list_y = [], e.field_list_y_optional = [], e.showSetWarningDialog = function () {
                    angular.forEach(e.warnList, function (e, t) {
                        e.last_warn_time = o("date")(e.last_warn_time, "yyyy-MM-dd HH:mm:ss")
                    });
                    var t = 0;
                    e.selected.rule_id && n.proj_share ? t = 2 : !e.selected.rule_id && n.proj_share && (t = 1);
                    var i = e.chartInfo, r = {
                        name: e.chartInfo.name || e.chartInfo.title,
                        tb_id: e.chartInfo.tb_id,
                        rule_id: e.rule_id || "",
                        ct_id: e.ct_id || "",
                        chart_type: e.chartInfo.chart_type,
                        role_type: t,
                        isDash: !0
                    };
                    e.warnModeData = {
                        list: e.warnList,
                        metaFields: [],
                        chartTbFields: []
                    }, e.warnModeData.metaFields = s.getMetaAxisFields(i), s.openWarnConfigDialog(e, r, e.warnModeData.list, e.warnModeData.metaFields, e.warnModeData.chartTbFields), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "alarm", ct_id: e.chartInfo.chart_id})
                    })
                }, e.$on("refreshChartForWarn", function (t, i) {
                    e.refreshChart({type: "warn"}), e.warnSwitchOn = !1;
                    for (var n = 0; n < e.warnList.length; n++) if (e.warnList[n].switch) {
                        e.warnSwitchOn = !0;
                        break
                    }
                })
            }]
        }
    }]).directive("operateMore", ["$rootScope", "$window", "$timeout", "$http", "commonService", "ngDialog", "$stateParams", "commonHttp", "errHint", "$jsTipTranslate", "projectTreeCache", "multipleProService", "$translate", "dashChartLinkService", "chartInstService", function (e, t, n, r, o, s, l, c, d, u, p, f, h, g, m) {
        return {
            restrict: "A", templateUrl: i(300), replace: !0, scope: !0, link: function (t, r, v) {
                function y(e) {
                    1 == e.info.is_ct_tpl ? (T = t.chartOptMorePermission.exportingExcel, t.chartOptMorePermission.exportingExcel = !1, t.chartOptMorePermission.chartLink = !1) : (void 0 !== T && (t.chartOptMorePermission.exportingExcel = T), t.chartOptMorePermission.chartLink = !0), t.$$phase || t.$digest()
                }

                function b(e) {
                    for (var i = 0, n = null, a = t.dashStandardItems.length - 1; a >= 0; a--) {
                        var r = t.dashStandardItems[a];
                        if (r.children[0].meta.ct_id === e) {
                            n = r.children[0].meta, i = a;
                            break
                        }
                    }
                    return {meta: n, index: i}
                }

                function w(e, t) {
                    var i = angular.copy(e);
                    return angular.forEach(i, function (e) {
                        e.children[0].meta = {
                            ct_id: e.children[0].meta.ct_id,
                            dash_setting: e.children[0].meta.dash_setting,
                            html: e.children[0].meta.html || ""
                        }, t || delete e.children[0].meta.dash_setting
                    }), i
                }

                function x(e, t) {
                    var i = angular.copy(p.getTreeCache());
                    if (i) e(i); else {
                        var n = [];
                        bdp.bdpPageStatus.isUnderAdvDash() && (n = [0, 2]), bdp.bdpPageStatus.isUnderDataScreen() && (n = [1]);
                        var a = {categories: angular.toJson(n)};
                        o.project.getTree(a).then(function (t) {
                            if (t) {
                                var i = angular.copy(t.proj);
                                f.initDeep(i, 0), p.setTreeCache(i), e(i)
                            }
                        })
                    }
                }

                function C(e) {
                    var i = [];
                    t.project_list ? (i = angular.copy(t.project_list), e(i)) : x(e)
                }

                function w(e, t) {
                    var i = angular.copy(e);
                    return angular.forEach(i, function (e) {
                        e.children[0].meta = {
                            ct_id: e.children[0].meta.ct_id,
                            dash_setting: e.children[0].meta.dash_setting,
                            html: e.children[0].meta.html || ""
                        }, t || delete e.children[0].meta.dash_setting
                    }), i
                }

                function k() {
                    var e = b(S);
                    t.dashStandardItems.splice(e.index, 1), t.getDashboardInfo(t.dashSelected)
                }

                t.$on("fire-mouseleave-item-event", function () {
                    t.more_show = !1, t.setOperatorIndex(!1, "all")
                });
                var S = v.ctId;
                t.chartChain = {
                    open: function (e) {
                        e.supportChain && s.open({
                            template: i(301),
                            className: "ngdialog-theme-default str-filter-model chart-chain-modal",
                            scope: t,
                            data: {meta: e}
                        })
                    }, del: function (e, i) {
                        e.stopPropagation(), g.delChartLink(i).then(function (e) {
                            d(h.instant("dash.delChartLinkSuccess")), t.$emit("updateDashboardInfo"), s.closeAll()
                        })
                    }
                }, t.chartOptMorePermission = {
                    copyChart: !e.dashEditMode,
                    moveChart: !e.dashEditMode,
                    jumpChart: !e.dashEditMode,
                    exportingChart: !e.dashEditMode,
                    exportingExcel: !e.dashEditMode,
                    chartLink: !0,
                    exportingSnapshot: !e.dashEditMode,
                    net_mod_allow: t.dashLayoutInfo && t.dashLayoutInfo.net_mod_allow && t.dashLayoutInfo.net_mod_allow[S],
                    net_info_allow: t.dashLayoutInfo && t.dashLayoutInfo.net_info_allow
                }, [1, 2].indexOf(e.dashCategory) >= 0 && e.dashEditMode && (t.chartOptMorePermission.copyChart = !0, t.chartOptMorePermission.moveChart = !0, t.chartOptMorePermission.jumpChart = !0, t.chartOptMorePermission.exportingChart = !0, t.chartOptMorePermission.exportingExcel = !0, t.chartOptMorePermission.exportingSnapshot = !0), v.origin && v.origin.indexOf("data_screen") > -1 && (t.permision.isDataScreen = !0), t.$watch(v.chartUrl, function (e, i) {
                    e && (t.chartUrl = e)
                }), t.canExportExcel = function (i) {
                    return e.permision.allowExporting && 1 == e.global.exportDataSetting.is_export && ("C500" !== i.meta.type || "C500" === i.meta.type && t.customChartEnableExportExcel) && t.chartOptMorePermission.exportingExcel
                }, t.canExportSnapshot = function (i) {
                    return e.permision.allowExporting && t.chartOptMorePermission.exportingSnapshot
                };
                var T = void 0;
                m.on(S).then(function (e) {
                    e.on("data", function () {
                        y(e)
                    })
                }), t.del = function () {
                    function i() {
                        var i = angular.copy(t.dashStandardItems);
                        i.splice(l.index, 1), t.global.globalDashFilter && t.global.globalDashFilter.forEach(function (e) {
                            e.rela_ct_ids.indexOf(S) >= 0 && (r = !0)
                        });
                        var s = {ct_id: S, dsh_meta: {charts: w(i, !0)}};
                        t.pageWrapStyles && (s.dsh_meta.styles = (0, a.default)(t.pageWrapStyles)), o.chart.del(s).success(function (i) {
                            "0" === i.status || "3211" === i.status ? (t.dashStandardItems.splice(l.index, 1), n(function () {
                                var i = $.inArray(S, e.mainChartIdContainer);
                                2 == l.meta.chart_link.linked_chart_type || 1 == l.meta.chart_link.linked_chart_type ? t.getDashboardInfo(t.dashSelected) : r && t.getGlobalFilterItem(t.dashSelected), t.dashStandardItems.map(function (e) {
                                    var i = e.children[0].meta;
                                    i.supportChain = g.getLinkSupport(i, t.draw_chart_url, t.dashStandardItems)
                                }), i > -1 && (e.mainChartContainer.splice(i, 1), e.mainChartIdContainer.splice(i, 1)), _.each(e.mainChartContainer, function (t) {
                                    var i = t.ctId;
                                    if (t.linkInfo = _.filter(t.linkInfo, function (e) {
                                        return e.link_ct_id != S
                                    }), t.linkInfo.length <= 0) {
                                        var n = $.inArray(i, e.mainChartIdContainer);
                                        n > -1 && (e.mainChartContainer.splice(n, 1), e.mainChartIdContainer.splice(n, 1))
                                    }
                                })
                            })) : errorHandle(i)
                        })
                    }

                    var r = !1, l = b(S);
                    2 == l.meta.chart_link.linked_chart_type ? s.openConfirm({
                        template: "/static/partials/dialogTemplates/confirm-dialog.html",
                        className: "ngdialog-theme-default ngDialog-width-300",
                        scope: t,
                        data: {title: h.instant("tips"), message: t.tips["chart.checkToContinueMove"]}
                    }).then(function () {
                        i()
                    }) : s.openConfirm({
                        template: "/static/partials/dialogTemplates/confirm-dialog.html",
                        className: "ngdialog-theme-default ngDialog-width-300",
                        scope: t,
                        data: {
                            title: h.instant("tips"),
                            message: t.tips["chart.confirmDelChart"] + ": " + l.meta.name + "?"
                        }
                    }).then(function () {
                        i()
                    }), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "delete", ct_id: S})
                    })
                };
                var D = function (e) {
                    var i = b(S);
                    s.open({
                        template: "/static/dashboard-core/chart-operate/chart-copy.html",
                        className: "ngdialog-theme-default ngDialog-width-360",
                        scope: t,
                        controller: ["$scope", "commonHttp", "errHint", "$location", function (t, n, r, o) {
                            function c() {
                                t.global.clickComplete = !1;
                                var e = t.copyChartData;
                                if (!e.dashId) return r(t.tips["dash.pleaseSelectDash"]), void(t.global.clickComplete = !0);
                                n.get("/api/chart/copy", {
                                    ct_id: S,
                                    from: angular.toJson({proj_id: e.curProId, dsh_id: e.curDshId}),
                                    to: angular.toJson({proj_id: e.projId, dsh_id: e.dashId}),
                                    nearby: e.nearby && e.curDshId == e.dashId
                                }).then(function (e) {
                                    if (0 == e.status) {
                                        r(t.tips["chart.copyChartSuccess"]), s.closeAll();
                                        var n = t.copyChartData;
                                        if (n.curProId == n.projId && n.curDshId == n.dashId) {
                                            var o = bdp.utils.createNewGridItem(t.dashStandardItems),
                                                l = t.dashStandardItems[i.index], c = angular.copy(l),
                                                d = t.dashStandardItems[i.index].children[0].meta;
                                            c.children[0].meta.ct_id = e.result, c.children[0].meta.chart_link = {
                                                link_info: [],
                                                linked_chart_type: 0
                                            }, c.children[0].meta.chart_jump = {};
                                            var f = "id" + o.domId;
                                            if (c.children[0].dom_id = f, n.nearby && n.curDshId === n.dashId) if (l.col - l.sizeX >= 0 || l.col + 2 * l.sizeX <= 12) {
                                                var h = !1, m = !1;
                                                l.col - l.sizeX >= 0 && (h = bdp.utils.dropGrid(t.dashStandardItems, "left", angular.copy(c), l)), h || l.col + 2 * l.sizeX <= 12 && (m = bdp.utils.dropGrid(t.dashStandardItems, "right", angular.copy(c), l)), h ? (c.row = l.row, c.col = l.col - l.sizeX) : m ? (c.row = l.row, c.col = l.col + l.sizeX) : (c.row = l.row + l.sizeY, c.col = l.col)
                                            } else c.row = l.row + l.sizeY, c.col = l.col; else c.row = o.row, c.col = o.col;
                                            (u || p) && (c.left = 100, c.top = 100), t.dashStandardItems.push(c), t.draw_chart_url[f] = angular.copy(t.draw_chart_url[l.children[0].dom_id]), t.draw_chart_url[f].options.ct_id = e.result, t.draw_chart_url[f].options.optional = {}, d.supportChain = g.getLinkSupport(d, t.draw_chart_url, t.dashStandardItems)
                                        }
                                    }
                                    t.global.clickComplete = !0;
                                    var v = document.getElementById("J-export-dashboard-height").offsetHeight,
                                        y = document.getElementById(S), b = y.offsetTop + y.offsetHeight;
                                    BDPLogger.log("duplicate_chart", {
                                        category: "user_interact",
                                        action: "click",
                                        opt_label: (0, a.default)({
                                            db_id_original: n.curDshId,
                                            db_id_destination: n.dashId,
                                            duplicate_mode: n.nearby && n.curDshId == n.dashId,
                                            db_height: v,
                                            original_to_dbtop: b
                                        })
                                    })
                                })
                            }

                            t.copyChartData = {
                                curProId: l.projId,
                                curDshId: l.dashId,
                                chartInfo: {chart_id: S, name: i.meta.name},
                                projId: l.projId,
                                dashId: l.dashId,
                                project_list: e,
                                nearby: !1
                            };
                            var d = o.path(), u = (d.indexOf("dash_edit"), d.indexOf("data_screen") > -1),
                                p = bdp.bdpPageStatus.isUnderAdvDash();
                            t.copyChartData.hideNearby = u || p, t.copyChartSave = c, function () {
                                for (var e = t.copyChartData.project_list, i = 0, n = e.length; i < n; i++) e[i].proj_id == t.copyChartData.projId && (t.copyChartData.dash_list = e[i].dsh_list)
                            }()
                        }]
                    })
                };
                t.copy_chart = function () {
                    C(D), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "chart_copy", ct_id: S})
                    })
                }, t.setNetWorkSegment = function () {
                    s.open({
                        template: "/static/dashboard/network-project/network-dashboard.html",
                        className: "ngdialog-theme-default network-dashboard",
                        scope: t,
                        data: {
                            type: "chart",
                            dash_id: l.dashId,
                            ct_id: S,
                            net_info_allow: t.chartOptMorePermission.net_info_allow,
                            net_mod_allow: t.chartOptMorePermission.net_mod_allow,
                            callback: function () {
                                t.refreshChart({type: "refresh"})
                            }
                        },
                        controller: "networkProjDashController"
                    })
                }, t.move_chart = function () {
                    C(L), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "chart_move", ct_id: S})
                    })
                };
                var L = function (e) {
                    t.global.clickComplete = !defined(t.global.clickComplete) || t.global.clickComplete;
                    var i = b(S);
                    t.moveChartData = {
                        curProId: l.projId,
                        curDshId: l.dashId,
                        chartInfo: {chart_id: S, name: i.meta.name},
                        projId: l.projId,
                        dashId: l.dashId,
                        project_list: e
                    }, s.open({
                        template: "/static/dashboard-core/chart-operate/chart-move.html",
                        className: "ngdialog-theme-default ngDialog-width-360",
                        scope: t
                    });
                    for (var n = t.moveChartData.project_list, a = 0, r = n.length; a < r; a++) n[a].proj_id == t.moveChartData.projId && (t.moveChartData.dash_list = n[a].dsh_list)
                };
                t.changeProjectForMove = function () {
                    for (var e = t.moveChartData.project_list, i = 0, n = e.length; i < n; i++) e[i].proj_id == t.moveChartData.projId && (t.moveChartData.dash_list = e[i].dsh_list, e[i].dsh_list.length > 0 ? t.moveChartData.dashId = e[i].dsh_list[0].dsh_id : t.moveChartData.dashId = "")
                }, t.moveChartSave = function () {
                    var e = t.moveChartData, i = b(S);
                    if (t.global.clickComplete = !1, !e.dashId) return d(t.tips["template.selectDash"]), void(t.global.clickComplete = !0);
                    if (e.curProId == e.projId && e.curDshId == e.dashId) return d(t.tips["chart.selectOtherPlace"]), void(t.global.clickComplete = !0);
                    var n = [].concat(t.dashStandardItems);
                    n.splice(i.index, 1), c.post("/api/chart/move", {
                        ct_id: S,
                        from: angular.toJson({proj_id: e.curProId, dsh_id: e.curDshId}),
                        to: angular.toJson({proj_id: e.projId, dsh_id: e.dashId}),
                        check: "do",
                        dsh_meta: angular.toJson({charts: w(n, !0)})
                    }).then(function (e) {
                        t.global.clickComplete = !0, e.result.ismoved ? (d(t.tips["chart.moveChartSuccess"]), k(), s.closeAll()) : s.openConfirm({
                            template: "/static/partials/dialogTemplates/confirm-dialog.html",
                            className: "ngdialog-theme-default ngdialog-width-340",
                            scope: t,
                            data: {title: h.instant("tips"), message: t.tips["chart.checkToContinueMove"]}
                        }).then(function () {
                            var e = t.moveChartData;
                            c.post("/api/chart/move", {
                                ct_id: S,
                                from: angular.toJson({proj_id: e.curProId, dsh_id: e.curDshId}),
                                to: angular.toJson({proj_id: e.projId, dsh_id: e.dashId}),
                                check: "pass",
                                dsh_meta: angular.toJson({charts: w(n, !0)})
                            }).then(function (e) {
                                e.result.ismoved ? (d(t.tips["chart.moveChartSuccess"]), k()) : d(t.tips["chart.moveChartFail"]), s.closeAll()
                            })
                        })
                    })
                }, u(["chart.copyChartSuccess", "chart.confirmDelChart", "template.selectDash", "chart.selectOtherPlace", "ownership.dashManage.copyFailed", "ownership.dashManage.moveFailed", "ownership.dashManage.selectedItemNoPermission", "chart.checkToContinueMove", "chart.moveChartSuccess", "chart.moveChartFail", "dash.pleaseSelectDash"], t)
            }, controller: ["$scope", function (e) {
                e.setOperatorPos = function (t, i, n) {
                    var r = $(t.currentTarget), o = angular.element("body").height(), s = $("#_iframe_" + i);
                    if (e.more_show = !e.more_show, e.setOperatorIndex(e.more_show, !1, n), o - t.clientY < 176 ? r.find("ul").css({
                        bottom: 24,
                        top: "inherit"
                    }) : r.find("ul").css({top: 24, bottom: "inherit"}), s.length) {
                        var l = s[0], c = l.contentWindow["iframe_childCustomData_" + i],
                            d = $(t.currentTarget).parents(".gridster-item");
                        c && c.enableExportExcel && (e.customChartEnableExportExcel = !0, d.data("custom-chart-data", c))
                    }
                    BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "more", ct_id: i})
                    })
                }, e.showItemMoreOperate = function (t, i, n) {
                    t.stopPropagation();
                    var a = $(i), r = $(t.currentTarget), o = r.get(0).getBoundingClientRect();
                    r.css("position", "relative");
                    var s = void 0, l = void 0;
                    2 * o.width + o.left > $(window).width() ? (s = "auto", l = o.width + "px") : (s = o.width + "px", l = "auto"), a.css({
                        left: s,
                        right: l,
                        top: "-8px"
                    }), e[n] = !0
                }, e.setOperatorIndex = function (t, i, n) {
                    i ? e.dashStandardItems.map(function (e) {
                        e.isTopIndex = !!t
                    }) : n.isTopIndex = !!t
                }
            }]
        }
    }])
}, function (e, t) {
    e.exports = "/dist/static/dashboard-core/chart-operate/chart-operate.html"
}, function (e, t) {
    e.exports = "/dist/static/dashboard/dash-template/editChartTemplate.html"
}, function (e, t) {
    e.exports = "/dist/static/dashboard-core/chart-operate/chart-operate-more.html"
}, function (e, t) {
    e.exports = "/dist/static/dashboard-core/chart-link/chart-chain.html"
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.dashboard.core").directive("chartFullScreen", ["ngDialog", "$timeout", "$interval", "$translate", function (e, t, i, n) {
        function r(i, n, r) {
            function s() {
                function e() {
                    var e = a.find(".chart").data("chart-data");
                    e && ["C300", "C301", "C310", "C330", "C340", "C500"].indexOf(e.info.chart_type) >= 0 && ("C300" === e.info.chart_type || "C301" === e.info.chart_type ? t(function () {
                        e.emit("reflow")
                    }, 0) : e.renderChart()), "C200" === e.info.chart_type && e.emit("chartFullScreen", e)
                }

                var n = i.chartUrl[i.domid].options.ct_id, a = angular.element("#" + n),
                    r = i.$curfullScreenChart = a[0];
                (r.requestFullscreen || r.webkitRequestFullscreen || r.mozRequestFullScreen || r.msRequestFullscreen).apply(r), $(i.$curfullScreenChart).addClass("J-simple-chart-fullscreen"), t(function () {
                    reflowChart(a)
                }), $(document).off("fullscreenchange.dataScreen webkitfullscreenchange.dataScreen mozfullscreenchange.dataScreen msRequestFullscreen.dataScreen").on("fullscreenchange.dataScreen webkitfullscreenchange.dataScreen mozfullscreenchange.dataScreen msRequestFullscreen.dataScreen", function (t) {
                    bdp.bdpDash.getCurFullScreenElement() ? ($(i.$curfullScreenChart).addClass("J-simple-chart-fullscreen"), e()) : ($(i.$curfullScreenChart).removeClass("J-simple-chart-fullscreen"), $(document).off("fullscreenchange.dataScreen webkitfullscreenchange.dataScreen mozfullscreenchange.dataScreen msRequestFullscreen.dataScreen"), e())
                })
            }

            i.$on("ngDialog.opened", function (e, t) {
                $(".fs-queue-show").addClass("active")
            }), i.$curfullScreenDom = null, n.on("click", function () {
                if (i.chartUrl = i.$eval(r.chartUrl), i.domid = i.$eval(r.domid), i.standardItems = i.$eval(r.standardItems), i.isAdvOrScreenFlag = i.$eval(r.advOrScreen), i.autoPlaying = !1, BDPLogger.log("chart_operation", {
                    category: "user_interact",
                    action: "chart_interact",
                    opt_label: (0, a.default)({operation_type: "fullscreen", ct_id: i.chartUrl[i.domid].options.ct_id})
                }), bdp.bdpDash.getCurFullScreenElement()) return void s();
                $("#MEIQIA-BTN-HOLDER") && $("#MEIQIA-BTN-HOLDER").css("display", "none"), $("body").addClass("fs-chart-mode"), o = e.open({
                    templateUrl: "/static/dashboard-core/chart-fullscreen/fullscreen.html",
                    className: "ngdialog-theme-default fullscreen-modal",
                    showClose: !1,
                    disableAnimation: !0,
                    scope: i,
                    preCloseCallback: function () {
                        $(document).off("keydown.fs_key_ctrl"), $("#MEIQIA-BTN-HOLDER") && $("#MEIQIA-BTN-HOLDER").css("display", "block"), $("body").removeClass("fs-chart-mode")
                    },
                    controller: "fullscreenCtrl"
                })
            })
        }

        var o, s = n.instant("fs.fullscreen");
        return {
            link: r,
            template: '<a class="bdp-icon-wrap" title="' + s + '"><i class="bdp-icon ico-fullscreen"></i></a>',
            restrict: "EA",
            replace: !0,
            scope: !0
        }
    }]).controller("fullscreenCtrl", ["$scope", "$rootScope", "$timeout", "$interval", "ngDialog", "autoRefreshChart", "bdpOuterParamService", function (e, t, i, n, a, r, o) {
        function s(e) {
            var t = 0;
            return e = e || [], e.forEach(function (e) {
                e.display && t++
            }), t
        }

        function l(e) {
            var t = [];
            return (e.meta.x || []).forEach(function (e, i) {
                if ("date" === e.data_type) {
                    var n = angular.copy(e);
                    n.type = 0, n.origin_index = i, t.push(n)
                }
            }), (e.meta.compare_axis || []).forEach(function (e, i) {
                if ("date" === e.data_type) {
                    var n = angular.copy(e);
                    n.type = 1, n.origin_index = i, t.push(n)
                }
            }), t
        }

        function c(i, n) {
            var n = u(n, 0), a = angular.copy(g[n].children[0]);
            !function (t, i) {
                _.isFunction(f[t]) && f[t](), f[t] = e.$watch(function () {
                    return e.standardItems[i].children[0]
                }, function (i, n) {
                    if (i !== n) {
                        var r = e.fullscreen["queue_" + t];
                        r.filter_opts = a = angular.copy(i), r.date_fields = l(i)
                    }
                }, !0)
            }(i, n);
            var r = l(a);
            $.extend(e.fullscreen["queue_" + i], {
                index: n,
                name: a.meta.name,
                chart_type: a.meta.type,
                filter_opts: angular.copy(a),
                date_fields: r,
                dom_id: a.dom_id,
                options: {
                    alwaysShowDataLabels: !0,
                    theme: 1 === e.fullDisplayTheme ? "dark" : "default",
                    device: e.fullDisplayDevice || "pc",
                    _t: new Date,
                    ct_id: a.meta.ct_id,
                    dsh_id: p,
                    optional: {chart_jump_info: a.meta.chart_jump}
                },
                lazyload: !1
            }, !0);
            var o = e.chartUrl[g[n].children[0].dom_id].options, s = o.optional;
            e.fullscreen["queue_" + i].options.is_tpl = o.is_tpl, s.filter_list && (e.fullscreen["queue_" + i].options.optional.filter_list = s.filter_list), s.dsh_filter && (e.fullscreen["queue_" + i].options.optional.dsh_filter = s.dsh_filter), s.param_setting && (e.fullscreen["queue_" + i].options.optional.param_setting = s.param_setting), s.filter_cmp_date_range && (e.fullscreen["queue_" + i].options.optional.filter_cmp_date_range = s.filter_cmp_date_range), s.sdo_id && (e.fullscreen["queue_" + i].options.optional.sdo_id = s.sdo_id), o.rule_id && (e.fullscreen["queue_" + i].options.optional.rule_id = o.rule_id), e.drillOption && (e.drillOption = void 0), t.fullScreenCacheData = t.fullScreenCacheData || {
                innerFilterList: {},
                advancedSortList: {}
            }, t.fullScreenCacheData.innerFilterList[o.ct_id] = angular.copy(a.meta.filter_list_inner), t.fullScreenCacheData.advancedSortList[o.ct_id] = angular.copy(a.meta.advanced_sort)
        }

        function d(e) {
            var t = $(".J_chart"), i = $(".fullscreen-modal"), n = i.find(".drill-crumbs-wrap").height(),
                a = $(".J_filterWrap"), r = $(".J_filterWrap_hidden");
            a.css({visibility: "hidden"});
            var o = $(".J_filter", a), s = $(".J_dateGranularity", a), l = $(".J_filter_hidden", r),
                c = $(".J_dateGranularity_hidden", r), d = a.width(), u = d / 2, p = l.width(), f = c.width() + 24,
                h = (p + 2) / d * 100, g = f / d * 100;
            o.css({width: (h > 100 ? 100 : h) + "%"}), s.css({width: (g > 100 ? 100 : g) + "%"}), p < u && f < u ? o.css({width: "50%"}) : p >= u && f >= u ? (o.css({width: "50%"}), s.css({width: "50%"})) : p + f >= d && p >= u && f <= u ? o.css({width: (d - f) / d * 100 + "%"}) : p + f >= d && p <= u && f >= u && 0 != p && s.css({width: (d - p) / d * 100 + "%"}), a.attr("has-add-diff", "true"), a.css({
                visibility: "visible",
                minWidth: "1000px"
            }), t.css({top: a.height() + 79 + n})
        }

        function u(e, t) {
            return e >= g.length ? e %= g.length : e < 0 && (e = g.length + e), "C101" === g[e].children[0].meta.type && (t >= 0 ? e++ : t < 0 && e--, e = u(e, t)), e < g.length && e >= 0 ? e : u(e)
        }

        var p = e.dashSelected, f = {}, h = new o;
        h.parseUrlParam();
        for (var g = (h.getUrlObj(), []), m = 0; m < e.standardItems.length; m++) {
            var v = e.standardItems[m];
            g.push(v)
        }
        var y = function (e, t) {
            return "index" in e && "index" in t ? e.index - t.index : e.row == t.row ? e.col - t.col : e.row < t.row ? -1 : 1
        };
        e.standardItems = e.standardItems.sort(y), g = g.sort(y), e.fullscreen = {
            auto_play_flag: !1,
            isAdvOrScreenFlag: bdp.bdpPageStatus.isUnderDataScreen() || bdp.bdpPageStatus.isUnderAdvDash() || bdp.bdpPageStatus.isUnderAdvDashNormal() || !!e.isAdvOrScreenFlag,
            index: 0,
            charts: g,
            filter: {},
            queue_show: {},
            queue_next: {}
        }, e.shareAdvDash && 2 == e.shareAdvDash.dashCategory && (e.fullscreen.isAdvOrScreenFlag = !0), 2 == t.dashCategory && (e.fullscreen.isAdvOrScreenFlag = !0), e.fullscreen.ableSlide = !e.fullscreen.isAdvOrScreenFlag, e.fullscreen.ableLeftNav = !e.fullscreen.isAdvOrScreenFlag, t.fullScreenCacheData = {}, t.fullScreenCacheData.innerFilterList = t.fullScreenCacheData.innerFilterList || {}, t.fullScreenCacheData.advancedSortList = t.fullScreenCacheData.advancedSortList || {}, function () {
            $(document).off("keydown.change_item_pos"), $(document).off("keydown.save_item_pos");
            for (var t = 0, i = 0; i < g.length; i++) if (e.chartUrl[e.domid].options.ct_id === g[i].children[0].meta.ct_id) {
                t = i;
                break
            }
            e.fullscreen.index = t, e.fullscreen.name = g[e.fullscreen.index].children[0].meta.name, c("show", t), e.fullscreen.info = e.fullscreen.queue_show, e.fullscreen.paramSettingShow = s(e.fullscreen.info.filter_opts.meta.param_setting), e.$on("_websocketChartMessage_", function (t, i) {
                var n = "string" == typeof i.data ? $.parseJSON(i.data) : i.data;
                if (1 == n.type && r.refresh({
                    drawChartUrl: e.fullscreen.queue_show,
                    type: "fullscreen",
                    evt: t,
                    scope: e,
                    ret: i
                }), 12 == n.type) {
                    if (!$("body").hasClass("fs-chart-mode")) return !1;
                    var a = i.data.msg_content;
                    if (console.log("外部传参param", a), 0 == Number(a.is_df)) {
                        var o = {};
                        o[e.fullscreen.queue_show.dom_id] = e.fullscreen.queue_show;
                        var s = {};
                        e.fullscreen.charts.forEach(function (e) {
                            var t = e.children[0].dom_id;
                            s[t] = e
                        }), h.findDashFilter({
                            param: a, drawChartUrl: o, dashItems: s, callback: function (t) {
                                t && !e.$$phase && e.$digest()
                            }
                        })
                    }
                }
            }), e.toggleParam = function () {
                var t = {
                    dsh_id: "dsh_7fcf519515c2e88a8bdcf70b47b9d6a0",
                    ct_id: "ct_d0fdeafd1564b9be9820d6bbd3e66eed",
                    is_df: 0,
                    filter_list: [{fid: "fk8ac61cca_day", data_type: "sub_date", uniq_id: 1522031274038, range: ["1"]}]
                };
                console.log("外部传参param", t);
                var i = {}, n = {};
                i[e.fullscreen.queue_show.dom_id] = e.fullscreen.queue_show, e.fullscreen.charts.forEach(function (e) {
                    var t = e.children[0].dom_id;
                    n[t] = e
                }), h.findDashFilter({
                    param: t, drawChartUrl: i, dashItems: n, callback: function (t) {
                        t && !e.$$phase && e.$digest()
                    }
                })
            }
        }(), e.slide = function (t, i) {
            if (t) {
                var n = u((e.fullscreen.index + t) % g.length, t);
                if (e.fullscreen.index = n, i && !i.auto) $(".fullscreen-modal").find(".drill-crumbs-wrap").html(""), c("show", n), c("next", n + 1), $(".fs-queue-next").removeClass("active"), $(".fs-queue-show").addClass("active"), e.fullscreen.name = g[e.fullscreen.index].children[0].meta.name; else {
                    var a = $(".fullscreen-chart");
                    if (1 === g.length) return;
                    for (var r = 0; r < a.length; r++) {
                        var o = a.eq(r), s = o[0].className;
                        if (s.indexOf("active") > -1) {
                            if (s.indexOf("fs-queue-show") > -1) {
                                e.fullscreen.queue_show.options.optional.drill_level > 0 && $(".fullscreen-modal").find(".drill-crumbs-wrap").html("");
                                var l = $(".fs-queue-next");
                                o.removeClass("active").html(""), l.addClass("active"), e.fullscreen.name = g[e.fullscreen.index].children[0].meta.name, e.fullscreen.info = e.fullscreen.queue_next, c("show", n + t)
                            } else if (s.indexOf("fs-queue-next") > -1) {
                                e.fullscreen.queue_next.options.optional.drill_level > 0 && $(".fullscreen-modal").find(".drill-crumbs-wrap").html("");
                                var d = $(".fs-queue-show");
                                o.removeClass("active").html(""), d.addClass("active"), e.fullscreen.name = g[e.fullscreen.index].children[0].meta.name, e.fullscreen.info = e.fullscreen.queue_show, c("next", n + t)
                            }
                            break
                        }
                    }
                }
                $(".J_filterWrap").css({visibility: "hidden"})
            }
        };
        var b, w = null;
        e.autoPlay = function (t) {
            e.autoPlaying = t, e.watchPlayState(t, !0), $(".J_filterWrap").css({visibility: "hidden"}), clearTimeout(w);
            var i = $(".fs-chart-main").parent();
            if (t) {
                var n = $('<div class="only-layer" style="position:absolute;z-index:10;left:0;right:0;top:20;bottom:0;"></div>');
                n.on("click", function () {
                    e.autoPlay(!1)
                }), i.append(n)
            } else e.fullscreen.auto_play_flag = !1, i.find(".only-layer").length && i.find(".only-layer").remove(), w = setTimeout(function () {
                d()
            }, 25)
        }, e.watchPlayState = function (t, i) {
            t ? setTimeout(function () {
                e.slide(1, {auto: !1}), b = n(function () {
                    e.slide(1, {auto: !0})
                }, 5e3)
            }, 1e3) : n.cancel(b)
        }, e.fullScreenGranularity = function (t, i, n, a, r) {
            n.granularity = a;
            var o = (angular.element(t.target), n.origin_index),
                s = e.fullscreen.queue_show.options.optional.display_granularity || {};
            s[e.drill_level] = s[e.drill_level] || [], s[e.drill_level].some(function (e, t) {
                return e.uniq_id === n.uniq_id && o == e.index
            }) ? s[e.drill_level].forEach(function (e, t) {
                e.uniq_id === n.uniq_id && e.index == o && (e.granularity = n.granularity, e.granularity_name = r || "", e.index = o, e.type = n.type)
            }) : s[e.drill_level].push({
                index: o,
                granularity: n.granularity,
                granularity_name: r || "",
                fid: n.fid,
                uniq_id: n.uniq_id,
                type: n.type
            }), e.fullscreen.queue_show.options.optional.display_granularity = s
        }, e.$on("$destroy", function () {
            n.cancel(b), f.show && f.show(), f.next && f.next()
        }), e.slideNav = function (e, t) {
            if ("show" === t) $(".fullscreen-modal").find(".nav").addClass("open"), $(".nav-handler").css({height: 64}); else if ("hide" === t) {
                if (e.clientX < 196) return;
                $(".fullscreen-modal").find(".nav").removeClass("open"), $(".nav-handler").css({height: "100%"})
            }
        }, e.toggleDataLabel = function (t) {
            if (e.show_data_label = void 0 !== t ? t : !e.show_data_label, e.show_data_label) $(".fs-data-label").remove(); else {
                var i = $("<style class='fs-data-label' type='text/css' rel='stylesheet' />").appendTo("head"),
                    n = ".fullscreen-modal .chart .highcharts-data-labels > g, .fullscreen-modal .chart .highcharts-data-labels > div, .fullscreen-modal .chart-pie .highcharts-data-label-connector ,.fullscreen-modal .funnel-datalabels, .fullscreen-modal .sunburst-labels {display:none}",
                    a = ".fullscreen-modal .bdp-datalabels {opacity:0; visibility:hidden;}";
                i[0].styleSheet ? i[0].styleSheet.cssText = n + a : i[0].appendChild(document.createTextNode(n + a))
            }
            localStorage.setItem("fs_data_label", 1 & e.show_data_label)
        }, e.toggleChartDescription = function (t) {
            e.show_chart_description = void 0 !== t ? t : !e.show_chart_description, setTimeout(function () {
                d("showRemark"), reflowChart($(".fullscreen-chart").parent(), !0)
            }, 0), localStorage.setItem("fs_chart_description", e.show_chart_description)
        };
        var x = localStorage.getItem("fs_chart_description");
        void 0 != x ? e.toggleChartDescription(1 == x) : e.show_chart_description = !1;
        var C = localStorage.getItem("fs_data_label");
        void 0 != C ? e.toggleDataLabel(1 == C) : e.show_data_label = 0 == $(".fs-data-label").length, e.$watch("show_chart_description", function (t) {
            e.$broadcast("toggleAllPoints", t)
        }), e.fullscreen.isAdvOrScreenFlag || $(document).off("keydown.fs_key_ctrl").on("keydown.fs_key_ctrl", function (t) {
            if (!$(t.target).closest(".string-filter").length && !$(t.target).closest(".daterange-input").length) {
                switch (t.keyCode) {
                    case 39:
                    case 40:
                        e.slide(1, {auto: !1});
                        break;
                    case 37:
                    case 38:
                        e.slide(-1, {auto: !1});
                        break;
                    case 27:
                        e.closeThisDialog()
                }
                e.$$phase || e.$apply()
            }
        }), e.revertSelection = function () {
            var e = $(".fs-queue-show").data("chart-data");
            return e && e.exitSelectionView(), !1
        }, e.showMore = function (e) {
            if (!$(e.target).hasClass("J-revert-selection")) {
                var t = $(".J-more-action"), i = $(".J-action-optlist"), n = $(".J-fullscreen-more");
                if (n.addClass("open"), i.addClass("open"), $(".J-action-opt-wrap").css("z-index", "3"), 0 == t.find(".opacity-layer").length) {
                    var a = $('<div class="opacity-layer"></div>');
                    a.on("mouseenter", function () {
                        t.parent().find(".opacity-layer").remove(), i.removeClass("open"), n.removeClass("open"), $(".J-action-opt-wrap").css("z-index", "1")
                    }), t.parent().append(a)
                }
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        angular.module("BC.dashboard.core").directive("dashFilter", ["$timeout", "commonService", "$rootScope", "commonHttp", "$filter", "ngDialog", "errHint", "$stateParams", "AdvfilterOperatorMap", "AdvfilterOperatorList", "numberInnerFilterMap", "operatorHelpLink", "formulaKeyMap", "setAdvanceAggregatorName", "$jsTipTranslate", "dateTimeByHalfHour", "globalDateSchemeService", function (e, t, i, n, r, o, s, l, c, d, u, p, f, h, g, m, v) {
            return {
                restrict: "A",
                templateUrl: "/static/dashboard-core/dash-filter/dash-filter.html",
                replace: !0,
                scope: {chartOptions: "=", opts: "=", advDateList: "="},
                link: function (r, f, y) {
                    function b(e) {
                        if ("add" == e) {
                            var t = '<div class="chart-operate-mask" style="position:absolute;left:0;top:0;bottom:0;right:0;z-index:10;cursor:default"></div>';
                            $(f).parents(".chart-box").find(".item-chart").append(t), $(f).prepend(t)
                        } else $(f).parents(".chart-box").find(".chart-operate-mask").remove()
                    }

                    function _() {
                        r.isActive = !1, angular.forEach(r.filter_list_inner, function (e) {
                            void 0 != e.range && e.range.length > 0 && (r.isActive = !0)
                        })
                    }

                    function w(e, t) {
                        var i = e.fid, n = {right: 0, top: 26}, a = bdp.utils.getArrayTextWidth(t, e);
                        n.width = a, r.adjustWidth[i] = n
                    }

                    r.dateTimeByHalfHour = m, r.$on("fire-mouseleave-item-event", function () {
                        r.show_dash_filter = !1
                    }), r.$watch("show_dash_filter", function (e) {
                        void 0 !== e && "dashboard" == y.chartMode && b(e ? "add" : "remove")
                    }), r.adjustWidth = {}, r.fullscreen = !!y.fullscreen, r.goHelp = function (e) {
                        p(e)
                    };
                    var x = function (e) {
                        if (r.chartOptions.read_cache = !1, "C500" == r.opts.meta.type) {
                            var t = {};
                            r.filter_list_inner.forEach(function (e) {
                                t[e.ct_id] || (t[e.ct_id] = []), t[e.ct_id].push(e)
                            }), r.chartOptions.optional.filter_list_map = t
                        } else r.chartOptions.optional.filter_list = r.filter_list_inner;
                        r.chartOptions.optional.filter_last_mod = e, BDPLogger.log("chart_operation", {
                            category: "user_interact",
                            action: "chart_interact",
                            opt_label: (0, a.default)({
                                operation_type: "chart_filter_apply",
                                ct_id: r.chartOptions.ct_id
                            })
                        })
                    }, C = !1, k = 0, S = 0, T = 0;
                    r.handleFilterPos = function (e) {
                        r.show_dash_filter = !r.show_dash_filter;
                        var t = $(e.target), i = t.parent(), n = i.find(".J_filterLayer");
                        n.removeClass("ng-hide");
                        var o = i.width(), s = $(".J_dash_sidebar").width(),
                            l = document.getElementById(r.opts.meta.ct_id), c = n.offset().left;
                        T = l.style.left, T != S && (C = !1), C || (k = c <= s ? o - n.width() : -11, C = !0), n.css({right: k}), S = T, BDPLogger.log("chart_operation", {
                            category: "user_interact",
                            action: "chart_interact",
                            opt_label: (0, a.default)({
                                operation_type: "chart_filter_icon",
                                ct_id: r.chartOptions.ct_id
                            })
                        })
                    }, r.conditionList = [], r.operatorMap = c, r.AdvfilterOperatorList = d, r.numberInnerFilterMap = u, r.new_condition = {
                        operator: "",
                        content: ""
                    };
                    var D;
                    r.toggleCmpDropdown = function (e, t) {
                        r.show_options[t.uniq_id] = !r.show_options[t.uniq_id]
                    }, r.compareDateChange = function (e, t) {
                        if (r.dateRangShow = !r.dateRangShow, "default" == e) t.compareType = "default", t.customName = void 0, r.chartOptions.optional.filter_cmp_date_range = [], r.show_options[t.uniq_id] = !1; else if ("custom" == e) {
                            r.show_options[t.uniq_id] = !1;
                            var i, n, a, s = [];
                            r.chartOptions.optional && (a = r.chartOptions.optional.filter_cmp_date_range), a && a[0] ? (i = a[0].compare_date_range.st, n = a[0].compare_date_range.et) : (i = (new Date).getTime(), n = (new Date).getTime());
                            var l, c;
                            l = isNaN(i) ? i.split(" ")[1] : "00:00:00", c = isNaN(n) ? n.split(" ")[1] : "23:59:59", s.push(i, n, l, c), D = o.open({
                                template: "/static/partials/dialogTemplates/custom-date-modal.html",
                                className: "ngdialog-theme-default date-picker-modal daterange-bdp-modal",
                                data: {range: s, uniq_id: parseInt(t.uniq_id)},
                                scope: r
                            })
                        }
                    }, r.getCmpDefaultName = function (e) {
                        return r.tips["chart.compareDate"] + "(" + e.name + " - " + e.aggregatorName + ")"
                    }, r.addNewCondition = function (e, t) {
                        var i = 8 == t.operator || 9 == t.operator;
                        if (void 0 == t || !t.hasOwnProperty("operator") || !i && "" == t.content) return void s(r.tips["filter.inputCompleteCondition"]);
                        i && (t.content = ""), r.strFilter.conditionList.push({
                            name: e,
                            operator: t.operator,
                            content: t.content
                        }), angular.element(".new-condition").val(""), angular.element(".condition-select").val(""), r.new_condition = {
                            operator: "",
                            content: ""
                        }
                    }, r.removeCondition = function (e) {
                        r.strFilter.conditionList.splice(e, 1)
                    }, r.saveDateRange = function (e, t) {
                        var i = e.sDate ? e.sDate + " " + e.sDateHour : null,
                            n = e.eDate ? e.eDate + " " + e.eDateHour : null;
                        if (!i && !n) return s(r.tips["chart.dateRangeRequired"]), !1;
                        if (i && n) {
                            if (!e.sDateHour) return s(r.tips["filter.startDateErr2"]), !1;
                            if (!e.eDateHour) return s(r.tips["filter.endDateErr2"]), !1;
                            if (new Date(i) - new Date(n) > 0) return s(r.tips["filter.dateRangeInvalid"]), !1
                        } else {
                            if (i && !n && !e.sDateHour) return s(r.tips["filter.startDateErr2"]), !1;
                            if (!i && n && !e.eDateHour) return s(r.tips["filter.endDateErr2"]), !1
                        }
                        if (t) {
                            r.chartOptions.optional.filter_cmp_date_range = [{
                                uniq_id: parseInt(t),
                                compare_date_range: {st: i, et: n}
                            }];
                            var a = "zh" === bdpChart.language ? "不限" : "Unbounded", l = /00\:00\:00$/,
                                c = /23\:59\:59$/;
                            r.opts.meta.compareDateFilter.forEach(function (e) {
                                e.uniq_id == t && (i && n && l.test(i) && c.test(n) ? (i = i.replace("00:00:00", ""), n = n.replace("23:59:59", "")) : (i = i ? i.replace("00:00:00", "") : a, n = n ? n.replace("23:59:59", "") : a), e.compareType = "custom", r.fullscreen ? e.customName = r.tips["chart.compareDate"] + "(" + e.name + " - " + i + "~" + n + ")" : e.customName = r.tips["filter.compare"] + " " + i + "~" + n)
                            }), o.close(D.id)
                        } else r.innerFilterModule.setInnerFilter({
                            range: [i, n],
                            index: e.data.index,
                            fid: e.data.fid,
                            type: "custom_date"
                        })
                    }, r.isQuery = !1, r.strFilter = {}, r.queryKwd = {}, r.filterQueryModule = {
                        enterToQuery: function (e) {
                            13 == e.e.keyCode && (e.is_advance ? r.strFilter.filterKwd = r.strFilter.keyword : r.innerFilterItems[e.filter.fid].keyword = r.queryKwd[e.filter.fid], e.real_search && this.query(e.filter, e.is_advance))
                        }, delQueryField: function (e) {
                            r.tempQueryList && (r.innerFilterItems[e].list = r.tempQueryList || []), r.queryKwd[e] = ""
                        }, query: function (e, t) {
                            r.showLoading = !0;
                            var a = "", o = e.fid;
                            if (a = r.queryKwd[o] ? r.queryKwd[o] : r.strFilter.keyword, t ? r.strFilter.filterKwd = a : r.innerFilterItems[o].keyword = a, !a) return r.showLoading = !1, r.isQuery = !1, void(r.strFilter.searchList = angular.copy(r.strFilter.originalSearchList));
                            var c = r.opts.meta;
                            r.$parent.drillOption ? r.tempDrillOption = angular.copy(r.$parent.drillOption) : r.tempDrillOption = {
                                drill_field: "",
                                drill_level: "",
                                drill_value: []
                            };
                            var d = {
                                ct_id: e.ct_id || c.ct_id,
                                tb_id: e.tb_id || c.tb_id,
                                fid: o,
                                keyword: a,
                                rule_id: i.global.rule_id,
                                filter_list: angular.toJson(r.chartOptions.optional.filter_list ? r.chartOptions.optional.filter_list : []),
                                granularity: e.granularity || "",
                                dsh_id: l.dashId,
                                dsh_filter: angular.toJson(r.chartOptions.optional.dsh_filter ? r.chartOptions.optional.dsh_filter : []),
                                drill_field: r.tempDrillOption.drill_field,
                                drill_level: r.tempDrillOption.drill_level,
                                drill_value: angular.toJson(r.tempDrillOption.drill_value)
                            };
                            t && (r.strFilter.loading = !0), n.post("/api/adv_enum/search", d).then(function (e) {
                                if (r.strFilter.loading = !1, r.showLoading = !1, 0 == e.status) if (r.tempQueryList = angular.copy(r.innerFilterItems[o].list), t) {
                                    r.isQuery = !0;
                                    var i = [];
                                    angular.forEach(e.result, function (e) {
                                        i.push({name: e, select: !1})
                                    }), r.strFilter.searchList = i
                                } else r.innerFilterItems[o].list = e.result; else s(Number(e.status))
                            })
                        }
                    }, r.defaultRange = {}, r.nullRange = {};
                    var L;
                    r.innerFilterModule = {
                        showDatePicker: function (e, t, i) {
                            if (navigator.userAgent.indexOf("Firefox") >= 0 && t[0] && t[0].indexOf("opt_") >= 0) ; else if (navigator.userAgent.indexOf("Firefox") >= 0 && t && t.length > 0) {
                                var n = null, a = null;
                                t[0] && (n = t[0].split("-"), n[1] < 10 && (n[1] = "0" + parseInt(n[1])), n[2] < 10 && (n[2] = "0" + parseInt(n[2])), n = n[0] + "-" + n[1] + "-" + n[2]), t[1] && (a = t[1].split("-"), a[1] < 10 && (a[1] = "0" + parseInt(a[1])), a[2] < 10 && (a[2] = "0" + parseInt(a[2])), a = a[0] + "-" + a[1] + "-" + a[2]), t = [n, a]
                            }
                            if (t.length > 1) {
                                var s = t[0] ? t[0].split(" ")[1] || "00:00:00" : "00:00:00",
                                    l = t[1] ? t[1].split(" ")[1] || "23:59:59" : "23:59:59";
                                t = t.concat([s, l])
                            } else 0 === t.length && (t = [+new Date, +new Date, "00:00:00", "23:59:59"]);
                            L = o.open({
                                template: "/static/partials/dialogTemplates/custom-date-modal.html",
                                className: "ngdialog-theme-default date-picker-modal daterange-bdp-modal",
                                data: {fid: i, index: e, range: t},
                                scope: r
                            })
                        }, numberInnerFilterMap: u, getItemList: function (a, o, s) {
                            var c = o.fid, d = o.granularity || "";
                            return o.hasOwnProperty("uniq_id") || (o.uniq_id = ""), r.show_options[c + o.uniq_id] = !s && !r.show_options[c + o.uniq_id], r.queryKwd[c] = "", !r.show_options[c + o.uniq_id] && !s || o.disabled ? void(r.adjustWidth[o.fid] = {top: 26}) : (r.showLoading = !0, r.currentChartId = a.ct_id, r.$parent.drillOption ? r.tempDrillOption = angular.copy(r.$parent.drillOption) : r.tempDrillOption = {
                                drill_field: "",
                                drill_level: "",
                                drill_value: []
                            }, "date" != o.data_type || "" != o.granularity || o.hasOwnProperty("aggregator") ? void n.post("/api/field/inner_range", {
                                dsh_id: l.dashId,
                                ct_id: o.ct_id || a.ct_id,
                                tb_id: o.tb_id || a.tb_id,
                                fid: c,
                                granularity: d,
                                rule_id: i.global.rule_id,
                                filter_list: angular.toJson(r.chartOptions.optional.filter_list ? r.chartOptions.optional.filter_list : []),
                                dsh_filter: angular.toJson(r.chartOptions.optional.dsh_filter ? r.chartOptions.optional.dsh_filter : []),
                                drill_field: r.tempDrillOption.drill_field,
                                drill_level: r.tempDrillOption.drill_level,
                                drill_value: angular.toJson(r.tempDrillOption.drill_value)
                            }).then(function (e) {
                                if (r.showLoading = !1, 0 == e.status) {
                                    var t = e.result;
                                    r.innerFilterItems[c] = {
                                        list: t.range,
                                        total: t.total,
                                        keyword: ""
                                    }, s ? s(o, t.range, t.total) : w(o, t.range)
                                } else errorHandle(e)
                            }) : (r.showLoading = !0, t.adv_date.list(a.ct_id, o.scheme_id).then(function (t) {
                                if (r.showLoading = !1, 0 == +t.status) {
                                    v.setChartSchemeCache(a.ct_id + "_" + o.scheme_id, t.result);
                                    var i = r.adv_date_list.concat(t.result || []);
                                    r.adv_date_list = v.advDateListUnique(i), e(function () {
                                        r.innerFilterItems[c] = {list: t.result, total: 0, keyword: ""}
                                    }), s ? s(o, []) : w(o, [])
                                }
                            }), !1))
                        }, getItemListForNumber: function (e, t) {
                            if (r.currentChartId = e.ct_id, r.$parent.drillOption ? r.tempDrillOption = angular.copy(r.$parent.drillOption) : r.tempDrillOption = {
                                drill_field: "",
                                drill_level: "",
                                drill_value: []
                            }, r.show_options[t.fid + t.uniq_id] = !r.show_options[t.fid + t.uniq_id], r.show_options[t.fid + t.uniq_id]) {
                                r.nullRange[t.fid + t.uniq_id] = !1;
                                var a = r.filter_list_inner;
                                angular.forEach(a, function (a) {
                                    if (a.fid == t.fid && a.uniq_id == t.uniq_id) if (0 == a.range.length) r.showLoading = !0, n.get("/api/field/inner_range", {
                                        dsh_id: l.dashId,
                                        ct_id: t.ct_id || e.ct_id,
                                        tb_id: t.tb_id || e.tb_id,
                                        fid: t.fid,
                                        uniq_id: t.uniq_id,
                                        granularity: "",
                                        rule_id: i.global.rule_id,
                                        filter_list: angular.toJson(r.chartOptions.optional.filter_list ? r.chartOptions.optional.filter_list : []),
                                        dsh_filter: angular.toJson(r.chartOptions.optional.dsh_filter ? r.chartOptions.optional.dsh_filter : []),
                                        drill_field: r.tempDrillOption.drill_field,
                                        drill_level: r.tempDrillOption.drill_level,
                                        drill_value: angular.toJson(r.tempDrillOption.drill_value)
                                    }).then(function (e) {
                                        0 == e.status && (r.showLoading = !1, r.innerFilterItems[t.fid + t.uniq_id].numOpt = -1, r.innerFilterItems[t.fid + t.uniq_id].numRange = [], r.defaultRange[t.fid + t.uniq_id] = e.result.range, 0 == r.defaultRange[t.fid + t.uniq_id].length ? r.nullRange[t.fid + t.uniq_id] = !0 : r.defaultRange[t.fid + t.uniq_id] = r.handleNumberByFormatter(e.result.range, t.formatter, t.aggregator))
                                    }); else {
                                        var o = a.range, s = angular.fromJson(o[0]).conditions;
                                        1 == s.length ? (r.innerFilterItems[t.fid + t.uniq_id].numOpt = s[0].calc_type, r.innerFilterItems[t.fid + t.uniq_id].numRange = [s[0].value]) : s.length > 1 && (r.innerFilterItems[t.fid + t.uniq_id].numOpt = 12, r.innerFilterItems[t.fid + t.uniq_id].numRange = [s[0].value, s[1].value]), r.nullRange[t.fid + t.uniq_id] = !1, r.defaultRange[t.fid + t.uniq_id] = []
                                    }
                                })
                            }
                        }, setInnerFilter: function (t) {
                            var n = [];
                            if ("dashboard" === i.view && (n = r.opts.meta.allMetricFields), "date" == t.type) {
                                var a = !1;
                                if (1 === t.range.length) {
                                    (r.innerFilterItems[t.fid].list || []).forEach(function (e, i) {
                                        if (e.opt_id === t.range[0]) for (var r = angular.fromJson(e.config), o = 0, s = n.length; o < s; o++) {
                                            var l = n[o];
                                            if (l.yoyQoqSetting && "filter" === l.yoyQoqSetting.type && l.yoyQoqSetting.date_field_fid === t.fid) {
                                                r.expression && "" != r.expression && (a = !0);
                                                break
                                            }
                                        }
                                    })
                                }
                                if (a && !confirm(r.tips["filter.switchExpTip"])) return
                            }
                            "custom_date" !== t.type ? r.filter_list_inner[t.index].range = t.range || [] : ("" == r.filter_list_inner[t.index].range && (r.filter_list_inner[t.index].range = []), r.filter_list_inner[t.index].range = t.range), t.type && (t.hasOwnProperty("uniq_id") || (t.uniq_id = ""), "string" === t.type ? e(function () {
                                r.innerFilterItems[t.fid].list = [], r.innerFilterItems[t.fid].keyword = ""
                            }, 10) : "date" === t.type && (r.filter_list_inner[t.index].range = t.range || [])), r.filter_list_inner[t.index].inner_adv_type = "", r.filter_list_inner[t.index].is_defined = !1, r.filter_list_inner[t.index].range_type = 1, r["show_custom_" + t.fid + t.uniq_id] = !1, r.show_options[t.fid + t.uniq_id] = !1, r.showLoading = !1, x(t.fid), _(), L && o.close(L.id), L = null
                        }, setInnerFilterForNumber: function (e) {
                            var t = "", i = {condition_type: 2, conditions: []},
                                n = r.innerFilterItems[e.fid + e.uniq_id], a = 8 == n.numOpt || 9 == n.numOpt;
                            if (n.numOpt == -1) t = []; else if (12 == n.numOpt) {
                                if ("number" != typeof n.numRange[0] || "number" != typeof n.numRange[1]) return void s(r.tips["filter.pleaseInputCondition"]);
                                i.conditions.push({
                                    calc_type: 4,
                                    value: n.numRange[0]
                                }), i.conditions.push({calc_type: 5, value: n.numRange[1]}), t = [angular.toJson(i)]
                            } else {
                                if (!a && "number" != typeof n.numRange[0]) return void s(r.tips["filter.pleaseInputCondition"]);
                                i.conditions.push({
                                    calc_type: n.numOpt,
                                    value: a ? "" : n.numRange[0]
                                }), t = [angular.toJson(i)]
                            }
                            r.numberConditionFormat(e.fid + e.uniq_id, n.numOpt, n.numRange), r.filter_list_inner[e.index].range = t, r.filter_list_inner[e.index].inner_adv_type = "condition", r.filter_list_inner[e.index].is_defined = !1, r["show_custom_" + e.fid + e.uniq_id] = !1, e.hasOwnProperty("uniq_id") || (e.uniq_id = ""), r.show_options[e.fid + e.uniq_id] = !1, x(e.fid), _()
                        }, openAdvanceModal: function (e, t, i) {
                            r.isQuery = !1, r.strFilter = {
                                fid: e.fid,
                                uniq_id: e.uniq_id || "",
                                name: e.name,
                                granularity: e.granularity || "",
                                keyword: "",
                                filterKwd: "",
                                total: i,
                                data_type: e.data_type,
                                is_compare: !!e.is_compare,
                                searchList: [],
                                originalSearchList: [],
                                addList: [],
                                inner_adv_type: e.inner_adv_type || "exact",
                                range_type: "",
                                condition_type: 1,
                                conditions: [],
                                conditionList: [],
                                expression_str: ""
                            }, e.hasOwnProperty("range_type") ? r.strFilter.range_type = e.range_type : r.strFilter.range_type = 1, r.conditionList = [], r.expressionChangedFlag = !1, r.checkFormulaGrammarFlag = !1, "C330" == r.opts.meta.type ? r.disabled_compare = !0 : r.disabled_compare = !1;
                            var n = function () {
                                var i = void 0 == e.range ? [] : e.range;
                                angular.forEach(t, function (e) {
                                    $.inArray(e, i) > -1 ? r.strFilter.searchList.push({
                                        name: e,
                                        select: !0
                                    }) : r.strFilter.searchList.push({name: e, select: !1})
                                }), r.strFilter.originalSearchList = angular.copy(r.strFilter.searchList)
                            };
                            if (e.inner_adv_type) {
                                if ("exact" == e.inner_adv_type) r.strFilter.addList = angular.fromJson(e.range[0]) || [], n(); else if ("condition" == e.inner_adv_type) {
                                    r.strFilter.inner_adv_type = "condition", n();
                                    var a = angular.fromJson(e.range[0]);
                                    r.strFilter.condition_type = a.condition_type, r.strFilter.conditions = a.conditions, angular.forEach(r.strFilter.conditions, function (t) {
                                        r.strFilter.conditionList.push({
                                            name: e.name,
                                            operator: t.calc_type,
                                            content: t.value
                                        })
                                    })
                                } else if ("expression" == e.inner_adv_type) {
                                    r.strFilter.inner_adv_type = "expression", n(), r.strFilter.expression_str = e.range[0];
                                    var s = new RegExp("\\[_field_id_\\]", "g");
                                    r.strFilter.expression_str = r.strFilter.expression_str.replace(s, "[" + e.name + "]")
                                }
                            } else n(), angular.forEach(r.filter_list_inner, function (t) {
                                t.hasOwnProperty("uniq_id") || (t.uniq_id = ""), t.fid == e.fid && t.uniq_id == e.uniq_id && (r.strFilter.addList = angular.copy(t.range))
                            });
                            r.originalFilter = angular.copy(r.strFilter), r.strInnerFilterDialog = o.open({
                                template: "/static/dashboard-core/dash-filter/dash-filter-multiple.html",
                                className: "ngdialog-theme-default str-filter-model dash-filter-adv-model",
                                scope: r,
                                preCloseCallback: function () {
                                }
                            })
                        }, addAdvanceItem: function (t, i) {
                            i && i.stopPropagation();
                            var n = !1;
                            if ($.inArray(t.name, r.strFilter.addList) > -1 && (n = !0), n) return void s(r.tips["filter.itemExist"]);
                            r.strFilter.addList.push(t.name), e(function () {
                                var e = $(".add-list").find("ul"), t = e[0].scrollHeight;
                                e.animate({scrollTop: t})
                            }, 300)
                        }, delAdvanceItem: function (e, t) {
                            t && t.stopPropagation();
                            for (var i = r.strFilter.searchList, n = 0, a = i.length; n < a; n++) if (i[n].name == r.strFilter.addList[e]) {
                                i[n].select = !1;
                                break
                            }
                            r.strFilter.addList.splice(e, 1)
                        }, addAll: function () {
                            function e(e) {
                                r.strFilter.total <= 100 && r.strFilter.keyword ? e.name.toLocaleLowerCase().indexOf(r.strFilter.keyword.toLocaleLowerCase()) >= 0 && r.strFilter.addList.push(e.name) : r.strFilter.addList.push(e.name)
                            }

                            if (0 == r.strFilter.addList.length) return void angular.forEach(r.strFilter.searchList, function (t) {
                                e(t)
                            });
                            angular.forEach(r.strFilter.searchList, function (t) {
                                $.inArray(t.name, r.strFilter.addList) < 0 && e(t)
                            })
                        }, delAll: function () {
                            r.strFilter.addList = []
                        }, saveAdvance: function () {
                            for (var e = r.filter_list_inner, t = function (t, i, n) {
                                var a = [];
                                "exact" == i || "condition" == i ? (e[t].rangeNumber = n.length, e[t].rangeFirstField = n[0], a.push(angular.toJson(n)), e[t].range = a) : (e[t].rangeNumber = 0, e[t].rangeFirstField = "", a.push(n), e[t].range = a)
                            }, i = function (t, i) {
                                1 == i ? (r["show_custom_" + r.strFilter.fid + r.strFilter.uniq_id] = !0, e[t].is_defined = !0, r.is_defined = !0) : 0 == i && (e[t].inner_adv_type = "", r["show_custom_" + r.strFilter.fid + r.strFilter.uniq_id] = !1, e[t].is_defined = !1)
                            }, n = 0, a = e.length; n < a; n++) {
                                if (r.strFilter.hasOwnProperty("uniq_id") || (r.strFilter.uniq_id = ""), e[n].fid == r.strFilter.fid && e[n].uniq_id == r.strFilter.uniq_id) {
                                    if (e[n].range_type = r.strFilter.range_type, e[n].range = r.strFilter.addList, e[n].is_compare = 1 & !!r.strFilter.is_compare, e[n].inner_adv_type = r.strFilter.inner_adv_type, "exact" == r.strFilter.inner_adv_type) {
                                        if (0 == r.strFilter.addList.length) return i(n, 0), x(r.strFilter.fid), _(), void r.strInnerFilterDialog.close();
                                        t(n, "exact", r.strFilter.addList)
                                    } else if ("condition" == r.strFilter.inner_adv_type) {
                                        if (0 == r.strFilter.conditionList.length) return i(n, 0), x(r.strFilter.fid), _(), void r.strInnerFilterDialog.close();
                                        var o = {condition_type: 1, conditions: []};
                                        o.condition_type = r.strFilter.condition_type, angular.forEach(r.strFilter.conditionList, function (e) {
                                            o.conditions.push({calc_type: e.operator, value: e.content})
                                        }), t(n, "condition", o)
                                    } else if ("expression" == r.strFilter.inner_adv_type) {
                                        var l = r.checkFormulaGrammar(r.strFilter.name, r.strFilter.fid, "string");
                                        if (l) return l.then(function (e) {
                                            e ? (t(n, "expression", r.strFilter.expression_str), i(n, 1), x(r.strFilter.fid), _(), r.strInnerFilterDialog.close()) : s(r.tips["filter.checkFailed"])
                                        });
                                        return
                                    }
                                    return i(n, 1), x(r.strFilter.fid), _(), void r.strInnerFilterDialog.close()
                                }
                            }
                        }, isShowFilter: function (e, t) {
                            return !!r["show_custom_" + e + t]
                        }, restoreFilter: function () {
                            r.strFilter = r.originalFilter
                        }
                    }, r.numberConditionFormatString = {}, r.numberConditionFormat = function (e, t, i) {
                        var n = "", a = "";
                        switch (angular.forEach(u, function (e) {
                            e.value == Number(t) && (a = e.text)
                        }), t) {
                            case-1:
                                n = "en" == $.cookie("locale") ? "All" : "全部";
                                break;
                            case 0:
                            case 1:
                            case 2:
                            case 3:
                            case 4:
                            case 5:
                                n = a + " " + i[0];
                                break;
                            case 8:
                            case 9:
                                n = a;
                                break;
                            case 12:
                                n = a + " " + i[0] + "~" + i[1];
                                break;
                            default:
                                n = ""
                        }
                        r.numberConditionFormatString[e] = n
                    }, r.is_defined = !1, r.checkFormulaGrammarFlag = !1, r.checkFormulaGrammar = function (e, t, i) {
                        if ("string" == i) {
                            var a = r.strFilter.expression_str;
                            if ("" == a) return void s(r.tips["filter.pleaseInputExpression"]);
                            if (a.indexOf(e) < 0 && a.indexOf("[_field_id_]") < 0) return void s(r.tips["filter.pleaseInputFieldName"] + ": [" + e + "]");
                            e = bdp.utils.requote(e);
                            var o = new RegExp("\\[" + e + "\\]", "g");
                            r.strFilter.expression_str = a.replace(o, "[_field_id_]");
                            var l = {
                                ct_id: r.opts.meta.ct_id,
                                tb_id: r.opts.meta.tb_id,
                                fid: t,
                                expression: r.strFilter.expression_str
                            }
                        }
                        return r.expressionChangedFlag = !1, n.post("/api/expression/syntax_verify", l).then(function (e) {
                            return 0 == e.status ? (s(r.tips["filter.checkSuccess"]), r.checkFormulaGrammarFlag = !0, !0) : (s(r.tips["filter.checkFailed"]), r.checkFormulaGrammarFlag = !1, !1)
                        })
                    }, r.setExpression = function (e) {
                        r.strFilter.expression_str = e
                    }, r.expressionChanged = function (e) {
                        r.expressionChangedFlag = e
                    }, r.insertFieldNameToExpression = function (e) {
                        r.expressionChangedFlag = !0, r.$broadcast("insertFieldNameToExpression", e)
                    }, r.changeNumberOpt = function (e, t, a) {
                        if (r.$parent.drillOption ? r.tempDrillOption = angular.copy(r.$parent.drillOption) : r.tempDrillOption = {
                            drill_field: "",
                            drill_level: "",
                            drill_value: []
                        }, r.nullRange[t.fid + t.uniq_id] = !1, r.defaultRange[t.fid + t.uniq_id] = [], a == -1) {
                            r.rangeLoading = !0, r.chartOptions.optional.filter_list;
                            var o = angular.copy(r.chartOptions.optional.filter_list) || [];
                            if (o) for (var s = 0; s < o.length; s++) o[s].fid == t.fid && o[s].uniq_id == t.uniq_id && (o[s].range = []);
                            n.get("/api/field/inner_range", {
                                dsh_id: l.dashId,
                                ct_id: t.ct_id || e.ct_id,
                                tb_id: t.tb_id || e.tb_id,
                                fid: t.fid,
                                uniq_id: t.uniq_id,
                                granularity: "",
                                rule_id: i.global.rule_id,
                                filter_list: angular.toJson(o),
                                dsh_filter: angular.toJson(r.chartOptions.optional.dsh_filter ? r.chartOptions.optional.dsh_filter : []),
                                drill_field: r.tempDrillOption.drill_field,
                                drill_level: r.tempDrillOption.drill_level,
                                drill_value: angular.toJson(r.tempDrillOption.drill_value)
                            }).then(function (e) {
                                r.rangeLoading = !1, 0 == e.status && (0 == e.result.range.length && (r.nullRange[t.fid + t.uniq_id] = !0), r.defaultRange[t.fid + t.uniq_id] = r.handleNumberByFormatter(e.result.range, t.formatter, t.aggregator))
                            })
                        }
                    }, r.handleNumberByFormatter = function (e, t, i) {
                        for (var n = 2, a = 0; a < e.length; a++) t ? ("" !== t[t.check].digit && (n = t[t.check].digit), "num" == t.check && t.num.millesimal ? e[a] = Highcharts.numberFormat(e[a], n, ".", ",") : "num" == t.check ? e[a] = Highcharts.numberFormat(e[a], n, ".", "") : e[a] = Highcharts.numberFormat(100 * e[a], n, ".", "") + "%") : ("COUNT" != i && "COUNT_DISTINCT" != i || (n = 0), e[a] = Highcharts.numberFormat(e[a], n));
                        return e
                    }, r.setAdvanceAggregatorName = h, g(["filter.itemExist", "filter.pleaseCheckGrammar", "filter.checkSuccess", "filter.checkFailed", "filter.inputCompleteCondition", "filter.pleaseInputCondition", "default", "filter.pleaseInputExpression", "filter.pleaseInputFieldName", "filter.pleaseSelectItem", "filter.pleaseAddCondition", "filter.hasChecked", "chart.dateRangeRequired", "filter.dateRangeInvalid", "filter.startDateErr2", "filter.endDateErr2", "filter.switchExpTip", "chart.compareDate", "filter.compare"], r)
                },
                controller: ["$scope", function (e) {
                    e.show_options = {}, e.isActive = !1, e.innerFilterItems = {}, e.$watch("opts", function (t) {
                        if (t && e.opts.meta.filter_list_inner) {
                            if ($("body").hasClass("fs-chart-mode") && !e.fullscreen) return !1;
                            e.filter_list_inner = angular.copy(e.opts.meta.filter_list_inner), 0 == e.filter_list_inner.length && e.opts.meta.compareDateFilter && 0 == e.opts.meta.compareDateFilter.length && (e.show_filter = !1), e.isActive = !1, angular.forEach(e.filter_list_inner, function (t) {
                                if (e.show_filter = !0, void 0 === t.range ? t.range = [] : t.range.length > 0 && (e.isActive = !0), "number" == t.data_type || "number" != t.data_type && t.hasOwnProperty("aggregator")) if (0 == t.range.length) e.numberConditionFormatString[t.fid + t.uniq_id] = "en" == $.cookie("locale") ? "All" : "全部"; else {
                                    var i = angular.fromJson(t.range[0]), n = i.conditions;
                                    1 == n.length ? e.numberConditionFormat(t.fid + t.uniq_id, Number(n[0].calc_type), [n[0].value]) : n.length > 1 && e.numberConditionFormat(t.fid + t.uniq_id, 12, [n[0].value, n[1].value])
                                }
                                "number" == t.data_type || "number" != t.data_type && t.hasOwnProperty("aggregator") ? (t.hasOwnProperty("uniq_id") || (t.uniq_id = ""), e.innerFilterItems[t.fid + t.uniq_id] = {}) : e.innerFilterItems[t.fid] = {}
                            }), e.opts.meta.compareDateFilter.length > 0 && (e.show_filter = !0)
                        }
                    }, !0), e.$watch("advDateList", function (t) {
                        t && (e.adv_date_list = t)
                    })
                }]
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.dashboard.core").directive("exportImg", ["$http", "$rootScope", "ngDialog", "$timeout", "errHint", "$jsTipTranslate", "$q", function (e, t, i, n, r, o, s) {
        return {
            restrict: "A", scope: !0, link: function (e, l, c) {
                function d(e, t, i) {
                    var n = Number(i.type), a = 1;
                    return [1, 2, 3, 4].indexOf(n) > -1 ? a = n : 5 === n ? a = i.width_value.div(e) : 6 === n && (a = i.height_value.div(t)), a
                }

                function u(e, t) {
                    if (e.find(".chart-canvas").length > 0) {
                        var i = function (e) {
                            for (var t = e.find(".chart-canvas").length, i = [], n = window.devicePixelRatio || 1, a = e.find(".chart-canvas"), r = 0; r < t; r++) {
                                var o = a[r], s = Canvas2Image.convertToPNG(o, o.width, o.height).src,
                                    l = '<img src="' + s + '" width="' + o.width / n + '" height="' + o.height / n + '" />';
                                i.push(l)
                            }
                            return i
                        }(e), n = new RegExp("<canvas.*chart-canvas.*></canvas>", "gi"), a = 0;
                        t = t.replace(n, function () {
                            return i[a++]
                        })
                    }
                    return t
                }

                function p(e) {
                    var t = "light";
                    return 1 == e && (t = "dark"), t
                }

                function f(e) {
                    var t = [g.Line, g.Column, g.NStackColumn, g.PStackColumn, g.Sankey, g.Area, g.NStackArea, g.PStackArea, g.Biax];
                    e.info;
                    return t.indexOf(e.getChartType()) > -1 && e.data.x.length > 0 && e.data.y[0]
                }

                var h, g = bdpChart.ChartType, m = (bdpChart.language, null), v = !1, y = "2";
                l.on("click", function () {
                    if (e.mode = c.mode, e.setting = angular.fromJson(c.setting), "dashboard" === e.mode ? h = l.parents(".chart-box").find(".chart").data("chart-data") : "fullscreen" === e.mode && (h = l.parents(".control-pane").siblings(".fs-chart-main").find(".fullscreen-chart.active").data("chart-data")), !h) return !1;
                    e.chartType = h.info.chart_type, e.theme = h.theme, v = h.info.navigator_setting && h.info.navigator_setting.enabled, v = v && f(h), f(h) && (h.info.navigator_setting && h.info.navigator_setting.enabled && h.data.y[0] && h.data.y[0].data.length > 1 ? (v = "open", y = "1") : v = !1), e.chartType = h.info.chart_type, e.theme = h.theme, v = h.info.navigator_setting && h.info.navigator_setting.enabled, v = v && f(h), f(h) && h.info.navigator_setting && h.info.navigator_setting.enabled && h.data.y[0] && h.data.y[0].data.length > 1 && (v = "open", y = "1"), e.disableScale = "C340" === e.chartType || "C400" === e.chartType, e.disableCustom = "C400" === e.chartType, m = i.open({
                        template: "/static/dashboard-core/chart-export/chart-export-img.html",
                        className: "ngdialog-theme-default export-img-modal",
                        scope: e,
                        data: {
                            type: "fullscreen" === e.mode ? 1 : 2,
                            range: y,
                            disableFix: "C200".indexOf(e.chartType) > -1,
                            width_value: 1024,
                            height_value: 1024,
                            show_label: !0,
                            navigator: v
                        }
                    }), h.emit("exportSave"), m.closePromise.then(function () {
                        b.show(), h.emit("exportBack")
                    }), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "export_image", ct_id: h.info.chart_id})
                    })
                }), e.exportImg = function (i) {
                    function a(i) {
                        if (i && "3" == i.range) return void w.openScaleDialog();
                        t.global.watterMark && (f += "<style>" + $("#watermarkStyle").text() + "</style>");
                        var n = {type: "item", chartItem: f, scale: y, theme: p(C), filename: c.filename || "chart"};
                        i.navigator && "2" == i.range && "C200".indexOf(e.chartType) > -1 && (o.css({
                            width: o.data("width") + "px",
                            height: o.data("height") + "px"
                        }), _.destroy(), _.emit("reflow")), Highcharts.post("/api/chart/export_png_new", n), i.navigator && "2" == i.range && (b.show(), _.emit("exportBack")), m.close()
                    }

                    var o, f, h, g, v, y, _, x, C = window.usedThemeId;
                    if ("dashboard" === e.mode ? _ = l.parents(".chart-box").find(".chart").data("chart-data") : "fullscreen" === e.mode && (_ = l.parents(".control-pane").siblings(".fs-chart-main").find(".fullscreen-chart.active").data("chart-data")), "dashboard" === e.mode) {
                        h = $(l).parents(".chart-box").find(".J-export-img-elem-chart"), o = $(l.parents(".J-export-img-elem-item")), g = o.width(), v = o.height();
                        var k = "";
                        if (t.global.watterMark) {
                            k = '<div class="water-mark ' + (1 == window.usedThemeId ? "water-mark-white" : "water-mark-dark") + '"></div>'
                        }
                        f = '<ul class="gridster J-export-img-elem-wrap">' + $(o[0]).prop("outerHTML").replace(/<\/li>$/, k + "</li>") + "</ul>", f = f.replace(/J-item-chart-title-bd/, "J-item-chart-title-bd text-center"), f = f.replace(/J-export-img-elem-item/, "J-export-img-elem-item J-export-elem-back")
                    } else if ("fullscreen" === e.mode) {
                        C = e.fullDisplayTheme, h = $(l).parents(".fullscreen-modal").find(".J-export-img-elem-chart"), o = h, f = $($(l.parents(".J-fullscreen-export-wrap").find(".J-export-img-elem-chart"))[0]).prop("outerHTML");
                        g = h.width() + 80, v = h.height() + 64 + 60, f = '<div class="J-chart-fullscreen-wrap J-export-elem-back ' + $(".J-chart-fullscreen-wrap-export").attr("class") + '" style="width: ' + g + "px;height:" + v + 'px;padding: 32px 40px;">                                <div class="J-fullscreen-export-title" style="height: 60px; line-height: 60px;">' + c.filename + '</div>                                <div style="position: relative;overflow: hidden;width: ' + h.width() + "px;height:" + h.height() + 'px;">' + f + '</div>                                <div class="water-mark chart-water-mark water-mark-dark"></div>                            </div>'
                    }
                    if ((y = d(g, v, i)) * g > 16e3 || y * v > 16e3) return void r(e.tips["chart.chartExportImgMax"]);
                    if ("C200".indexOf(e.chartType) > -1) if (i.navigator && "2" == i.range) {
                        x = _.chartTalbe.sheet;
                        for (var S = 0, T = 0, D = $(o).find(".J_chart_box"), L = 0; L < x.getColumnCount(); L++) S += x.getColumnWidth(L);
                        for (var L = 0; L < x.getRowCount(); L++) T += x.getRowHeight(L);
                        if (D.width() < S || D.height() < T) return S += 300, T = 3 * T / 2, o.css({
                            width: S + "px",
                            height: T + "px"
                        }), _.destroy(), _.emit("reflow"), o.data("width", g), o.data("height", v), n(function () {
                            e.exportImg(i)
                        }, 800), !1;
                        f = u(o, f)
                    } else f = u(o, f); else if (["C271", "C272", "C273", "C281"].indexOf(e.chartType) > -1) f = u(o, f); else if (["C340"].indexOf(e.chartType) > -1) _.info && _.info.display_in_3d && "C340" == e.chartType || (f = u(o, f)); else {
                        if ("C400" === e.chartType) {
                            return _.gisMap.exportImage(1).then(function (e) {
                                e[0].style.zIndex = 0;
                                var t = e[0].outerHTML, n = $(f);
                                n.find(".J-export-img-elem-chart").append(t), f = n.prop("outerHTML"), a(i)
                            }), !1
                        }
                        if ("C500" === e.chartType) {
                            if (o.find(".J-export-iframe-img").length > 0) {
                                var A = o.find(".J-export-iframe-img"), E = s.defer();
                                return bdp.loadjs({
                                    src: "//m1.bdp.cn/static/js/lib/html2canvas/html2canvas_82a2121.js",
                                    callback: function () {
                                        var e = A.map(function (e, t) {
                                            var i = s.defer();
                                            return html2canvas(t.contentWindow.document.body, {
                                                onrendered: function (e) {
                                                    var n = "";
                                                    try {
                                                        var a = Canvas2Image.convertToPNG(e, e.width, e.height).src;
                                                        n = '<div style="position: absolute;top: 0; left: 0; z-index: 100;width: ' + ($(t).width() - 1) + "px;height: " + ($(t).height() - 1) + 'px;overflow: auto;"><img src="' + a + '" width="' + (e.width - 1) + '" height="' + (e.height - 1) + '" /></div>'
                                                    } catch (e) {
                                                        n = '<p style="position: absolute;top: 0; left: 0; z-index: 100;width:"' + $(t).width() + 'px;" height:"' + $(t).height() + 'px";text-align: center;line-height:' + $(t).height() + 'px;">当前图表含有外部引用图片，暂不支持导出</p>'
                                                    }
                                                    i.resolve(n)
                                                }
                                            }), i.promise
                                        });
                                        E.resolve(s.all(e))
                                    }
                                }), E.promise.then(function (e) {
                                    var t = new RegExp("<iframe.*J-export-iframe-img.*></iframe>", "gi"), n = 0;
                                    f = f.replace(t, function () {
                                        return e[n++]
                                    }), a(i)
                                }), !1
                            }
                            f = u(o, f)
                        } else if ("fullscreen" === e.mode && !e.show_data_label) {
                            f = f.replace(/show-datalabels/g, "")
                            ;f += "<style>.J-chart-fullscreen-wrap .chart .highcharts-data-labels > g, .J-chart-fullscreen-wrap .chart-pie .highcharts-data-label-connector ,.J-chart-fullscreen-wrap .funnel-datalabels, .J-chart-fullscreen-wrap .sunburst-labels {display:none}.J-chart-fullscreen-wrap .bdp-datalabels {opacity:0; visibility:hidden;}</style>"
                        }
                    }
                    a(i)
                }, e.exportRange = function (e, t) {
                    t.range != e && ("2" == e ? (b.hide(), h.emit("exportAll")) : "1" == e && (b.show(), h.emit("exportBack")))
                };
                var b = {
                    show: function () {
                        $(".highcharts-navigator").show(), $(".highcharts-navigator-handle").show(), $(".highcharts-navigator-series").show()
                    }, hide: function () {
                        $(".highcharts-navigator").hide(), $(".highcharts-navigator-handle").hide(), $(".highcharts-navigator-series").hide()
                    }
                }, w = {
                    scaleDialogObj: null,
                    slider_range: {min: 0, max: 100, preventMin: null, preventMax: 10},
                    exportElem: null,
                    html: null,
                    $chart: null,
                    exportObjWidth: 0,
                    exportObjHeight: 0,
                    openScaleDialog: function () {
                        var t = _.cloneDeep(e.draw_chart_url[e.child.dom_id].options);
                        t.hideNavigator = !0, t.disableLink = !0, w.scaleDialogObj = i.open({
                            template: "/static/dashboard-core/chart-export/chart-export-scale.html",
                            className: "ngdialog-theme-default export-img-modal",
                            scope: e,
                            data: {
                                chart_data: t,
                                slider_range: w.slider_range,
                                on_handle_up: w.onHandleUp,
                                ok_btn_click: w.exportScaleImg
                            }
                        }), w.scaleDialogObj.closePromise.then(function () {
                            w.slider_range.max = 100
                        }), n(function () {
                            var n = $("#J-chart-box").find(".chart").data("chart-data");
                            if (n.info && t.optional.drill_value && t.optional.drill_value[0]) n.emit("renderCrumbs", t.optional.drill_value[0], e.child.meta.level_fields[0]); else try {
                                bdpChart.helper.renderCrumbs(n)
                            } catch (e) {
                            }
                            var a = $("#J-chart-box").parents(".ngdialog").find(".ngdialog-close"),
                                r = $("#J-chart-box").parents(".ngdialog").find(".ngdialog-button").eq(0);
                            a.click(function () {
                                i.closeAll()
                            }), r.click(function () {
                                i.closeAll()
                            })
                        }, 1e3)
                    },
                    onHandleUp: function (e) {
                        var t = $(".ngdialog-chart-box").width(), i = 100 / w.slider_range.max;
                        w.exportElem = $("#J-chart-box"), w.chartInstance = $("#J-chart-box").find(".chart").data("chart-data"), w.exportElem.css({width: Math.floor(i * t) + "px"}), n(function () {
                            w.chartInstance.destroy(), w.chartInstance.emit("reflow")
                        })
                    },
                    exportScaleImg: function () {
                        var i = window.usedThemeId;
                        w.exportElem = $("#J-chart-box"), w.exportObjWidth = w.exportElem.width(), w.exportObjHeight = w.exportElem.height();
                        var n = "";
                        if (t.global.watterMark) {
                            n = '<div class="water-mark ' + (1 == window.usedThemeId ? "water-mark-white" : "water-mark-dark") + '"></div>'
                        }
                        var a = "height:300px;background:#fff;width:" + Math.floor(w.exportObjWidth + 60) + "px;";
                        if (w.html = '<div class="J-item-chart-title-bd J-export-elem-back" style="' + a + '">' + $(w.exportElem).prop("outerHTML").replace(/(.*)<\/div>$/, n + "</div>") + "</div>", w.html = w.html.replace(/J-item-chart-title-bd/g, "J-item-chart-title-bd text-center"), w.exportObjWidth > 16e3 || w.exportObjHeight > 16e3) return void r(e.tips["chart.chartExportImgMax"]);
                        t.global.watterMark && (w.html += "<style>" + $("#watermarkStyle").text() + "</style>");
                        var o = {
                            type: "item",
                            chartItem: w.html,
                            scale: 1024..div($(".ngdialog-chart-box").width()),
                            theme: p(i),
                            filename: c.filename || "chart"
                        };
                        Highcharts.post("/api/chart/export_png_new", o), w.scaleDialogObj.close()
                    }
                };
                o(["chart.chartExportImgMax"], e)
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.dashboard.core").directive("exportExcel", ["$rootScope", "commonService", "ngDialog", function (e, t, i) {
        return {
            restrict: "A", scope: !0, link: function (n, r, o) {
                n.openOfflineList = function () {
                    e.fireOfflineTaskList = !e.fireOfflineTaskList
                }, r.on("click", function (r) {
                    var s, l, c = o.mode, d = o.charttype;
                    "dashboard" === c ? (l = $(r.currentTarget).parents(".gridster-item"), s = n.chartUrl) : "fullscreen" === c && (s = n.fullscreen.info, l = $(r.currentTarget).parents(".J-chart-fullscreen-wrap-export"));
                    var u = l.data("custom-chart-data"), p = l.data("form-dimension-opt");
                    u = u && u.enableExportExcel ? (0, a.default)(u) : "{}", p = p ? (0, a.default)(p) : "[]";
                    var f = bdpChart.helper.params(s.options.optional), h = {
                        ct_id: s.options.ct_id,
                        dsh_id: s.options.dsh_id,
                        access_token: $.cookie("token"),
                        rule_id: s.options.rule_id || ""
                    };
                    e.wsId && (h.ws_id = e.wsId);
                    var g = angular.extend(h, f, {custom_chart_data: u, form_dimension_opt: p});
                    t.chart.exportExcelType(angular.extend(h, f)).then(function (a) {
                        0 == a.status && (1 == a.result || "C300" == d || "C301" == d || "C400" == d ? Highcharts.post("/api/chart/export_excel", g) : 2 == a.result && t.chart.exportLargeExcel(g).then(function () {
                            var t = e.language, a = "en" == t ? "ngDialog-width-400" : "ngDialog-width-330";
                            i.open({
                                template: "/static/dashboard-core/chart-export/export-large-tip.html",
                                className: "ngdialog-theme-default " + a,
                                scope: n
                            })
                        }))
                    }), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "export_excel", ct_id: s.options.ct_id})
                    })
                })
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.dashboard.core").directive("exportSnapshot", ["$http", "$rootScope", "ngDialog", "errHint", "$jsTipTranslate", "$q", "commonService", "$timeout", "$location", "wtbListService", "$translate", function (e, t, i, n, r, o, s, l, c, d, u) {
        return {
            restrict: "A", scope: !0, link: function (e, n, r) {
                function p() {
                    "dashboard" === r.mode ? v = n.parents(".chart-box").find(".chart").data("chart-data") : "fullscreen" === r.mode && (v = n.parents(".control-pane").siblings(".fs-chart-main").find(".fullscreen-chart.active").data("chart-data"))
                }

                function f() {
                    var e = {ct_id: v.ct_id, dsh_id: v.dsh_id};
                    return v.optional && (v.optional.dsh_filter && (e.dsh_filter = (0, a.default)(v.optional.dsh_filter)), v.optional.drill_level && (e.drill_level = v.optional.drill_level, e.drill_field = v.optional.drill_field, e.drill_value = (0, a.default)(v.optional.drill_value)), v.optional.filter_list && (e.filter_list = (0, a.default)(v.optional.filter_list)), e.linked_chart_type = v.optional.linked_chart_type, v.optional.linked_value && (e.linked_value = (0, a.default)(v.optional.linked_value)), v.optional.chart_jump_info && (e.chart_jump_info = (0, a.default)(v.optional.chart_jump_info))), e
                }

                function h() {
                    var i = o.defer(), n = f();
                    return e.layoutTable = !0, s.dashboard.getSnapshotPreviewTable(n).success(function (n) {
                        t.pageLoading = !1, "0" === n.status ? (n.result && (e.previewTable = n.result && n.result.data_list), i.resolve()) : (e.layoutTable = !1, i.reject())
                    }), i.promise
                }

                function g() {
                    var t = o.defer(), i = _.filter(e.previewTable, function (e) {
                        return !!(e.count >= 1500)
                    });
                    return i && i.length ? t.resolve(!1) : t.resolve(!0), t.promise
                }

                function m() {
                    i.open({
                        template: "/static/dashboard-core/chart-export/chart-export-snapshot.html",
                        className: "ngdialog-theme-default export-snapshot-modal",
                        scope: e,
                        controller: ["$scope", "$element", function (e, n) {
                            e.snapshot_name = v.info && v.info.title || "", e.previewIndex = 0, e.previewTable && e.previewTable.length > 0 && (e.currentTable = e.previewTable[e.previewIndex]), e.changeTable = function (t) {
                                e.previewTable[t] && (e.previewIndex = t, e.currentTable = e.previewTable[e.previewIndex], e.layoutTable = !0, e.resizeTable())
                            }, e.resizeTable = function () {
                                function t() {
                                    s = 0, $(a).children("td").each(function (e, t) {
                                        var i = parseInt($(t).width());
                                        $(o[e]).width(i)
                                    }), e.layoutTable = !1
                                }

                                var i, a, r, o, s;
                                l(function () {
                                    n.find(".J-table-fixhead").width(n.find(".table-scroll").children("table").width()), i = n.find(".table-scroll"), a = n.find(".table-scroll").find("tbody").find("tr")[0], r = n.find(".J-table-fixhead").find("thead").find("tr")[0], o = $(r).children("th"), t(), i.scroll(function (e) {
                                        n.find(".table-fixhead").css({left: -e.target.scrollLeft + "px"})
                                    })
                                }, 100), $(window).resize(function () {
                                    clearTimeout(void 0), setTimeout(function () {
                                        n.find(".J-table-fixhead").width(n.find(".table-scroll").children("table").width()), t()
                                    }, 10)
                                })
                            }, e.resizeTable(), e.exportSnapshot = function () {
                                function n() {
                                    i.openConfirm({
                                        template: "/static/partials/dialogTemplates/confirm-dialog.html",
                                        className: "ngdialog-theme-default ngDialog-width-300",
                                        scope: e,
                                        data: {
                                            title: u.instant("tips"),
                                            message: "zh" === y ? "该图表无数据，是否导出?" : "The chart has no data. Do you want to export the chart?"
                                        }
                                    }).then(function () {
                                        r()
                                    })
                                }

                                function r() {
                                    var i = f();
                                    1 === e.previewTable.length ? i.snapshot_name = [e.snapshot_name] : i.snapshot_name = Array(e.previewTable.length).join(" ").split(" ").map(function (t, i) {
                                        return e.snapshot_name + "_" + i
                                    }), i.snapshot_name = (0, a.default)(i.snapshot_name), v.optional && (v.optional.dsh_filter && (i.dsh_filter = (0, a.default)(v.optional.dsh_filter)), v.optional.drill_level && (i.drill_level = v.optional.drill_level, i.drill_field = v.optional.drill_field, i.drill_value = (0, a.default)(v.optional.drill_value)), v.optional.filter_list && (i.filter_list = (0, a.default)(v.optional.filter_list))), t.pageLoading = !0, s.dashboard.saveChartSnapshot(i).success(function (i) {
                                        "0" === i.status && i.result && function () {
                                            var t = i.result.folder_id, n = i.result.tb_id[0];
                                            wtbTree.prototype.originals ? d.updateOrigFolder(t).then(function () {
                                                e.closeThisDialog(), e.openSuccessTip(n)
                                            }) : (e.closeThisDialog(), e.openSuccessTip(n))
                                        }(), t.pageLoading = !1
                                    })
                                }

                                e.previewTable && e.previewTable.length > 0 ? 1 === e.previewTable.length ? e.previewTable[0].data.length ? r() : n() : r() : n()
                            }
                        }]
                    }, function () {
                    })
                }

                var v;
                e.previewTable = null;
                var y = bdpChart.language || "zh", b = "zh" === y ? "当前图表无数据" : "No data to display";
                e.noDataMsg = b, n.on("click", function () {
                    t.pageLoading = !0, p(), e.previewTable = null, h().then(function () {
                        g().then(function (t) {
                            t ? m() : i.openConfirm({
                                template: "/static/partials/dialogTemplates/confirm-dialog.html",
                                className: "ngdialog-theme-default ngDialog-width-300",
                                scope: e,
                                data: {title: u.instant("tips"), message: "导出数据过大，目前快照工作表支持最多导出1500条数据，是否继续？"}
                            }).then(function () {
                                m()
                            })
                        })
                    })
                }), e.openSuccessTip = function (t) {
                    i.open({
                        template: "/static/dashboard-core/chart-export/export-snapshot-tip.html",
                        className: "ngdialog-theme-default",
                        scope: e,
                        controller: ["$scope", function (e) {
                            e.jumpToDataSource = function () {
                                i.closeAll(), $.cookie("ds_tb_id", t), c.path("/data_source")
                            }
                        }]
                    })
                }
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    var n = i(41), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i, n, r, o, s, l, c, d, u) {
            function p(p, f, h) {
                function g() {
                    p.showDateAdvanceEdit ? (p.view = "dateAdvance", angular.element(".J-global-filter-model").addClass("date-advance-modal")) : (p.view = "globalFilter", p.GF.getFilterItems(), p.showBaseLoading = !1, angular.element(".J-global-filter-model").removeClass("date-advance-modal"))
                }

                function m(e) {
                    p.fieldMap = {}, angular.forEach(e.tb_list, function (e, t) {
                        angular.forEach(e.fields, function (e, t) {
                            p.fieldMap[e.fid] = e.data_type
                        })
                    })
                }

                var v = 0;
                p.showDateAdvanceEdit = !1, p.view = "globalFilter", p.new_add_df_name = "", p.prevGlobalSave = function () {
                    function e(t) {
                        return t.map(function (t) {
                            var i = t.df_id, n = p.filterStatus[i];
                            t.df_id = 0 === i.indexOf("new") ? "" : i, t.name = n.name, t.config = n.config, t.data_type = n.data_type, "string" == n.data_type ? t.type = 1 : t.type = 2, t.selected_charts = [], t.selected_tables = {}, angular.forEach(n.charts, function (e, i) {
                                !!e.selected && t.selected_charts.push(e.ct_id)
                            }), angular.forEach(n.tables, function (e, i) {
                                !!e.show && (t.selected_tables[e.tb_id] = e.selected)
                            }), s = t.data_type, l = t.config.granularity, "date" == s && "" == l ? (t.config.default_select = !1, t.config.range && (t.config.default_select = !0)) : t.config.range = "", t.items && t.items.length > 0 ? t.items = e(t.items) : t.items = []
                        }), t
                    }

                    function i(e) {
                        for (var t = 0; t < e.length; t++) {
                            var n = e[t], o = (0, a.default)(n.selected_tables);
                            n.selected_tables[o[0]] || (r(n.name + ": " + p.tips["dash.gfTableAndFieldRequired"]), c = !1);
                            var s = p.fieldMap[n.selected_tables[o[0]]];
                            for (var l in n.selected_tables) n.selected_tables.hasOwnProperty(l) && s !== p.fieldMap[n.selected_tables[l]] && (r(n.name + ": " + p.tips["dash.gfFieldTypeMustBeSame"]), c = !1);
                            n.items && n.items.length > 0 && i(n.items)
                        }
                    }

                    var o = angular.copy(p.filterData.dsh_filter_list), s = "", l = "";
                    o = e(o);
                    var c = !0;
                    if (i(o), c) return p.showBaseLoading = !0, n.post("/api/dsh_filter/commit", {
                        dsh_id: t.dashId,
                        data: angular.toJson(o)
                    }).then(function (e) {
                        return "0" == e.status || (r(Number(e.status)), !1)
                    })
                }, p.goDateAdvanceEdit = function () {
                    var e = p.prevGlobalSave();
                    e && e.then(function (e) {
                        if (e) {
                            if (!p.new_add_df_name) return p.showDateAdvanceEdit = !0, $(".ngdialog-close").css("display", "none"), p.$broadcast("showDateAdvanceEdit", p.showDateAdvanceEdit), void g();
                            i.dash_global_filter.list({dash_id: t.dashId, rule_id: p.ruleId}).success(function (e) {
                                if (p.showBaseLoading = !1, "0" == e.status) {
                                    var t, i;
                                    !function () {
                                        p.GF.initChartsAndTables(e.result), p.getInitialData = !1, t = e.result.dsh_filter_list, t && t.length > 0 && (!function e(t) {
                                            t.map(function (t) {
                                                t.name == p.new_add_df_name && (p.filterView.selected_opt = t.df_id, i = !0), !i && t.items && e(t.items)
                                            })
                                        }(e.result.dsh_filter_list), p.showDateAdvanceEdit = !0, $(".ngdialog-close").css("display", "none"), p.$broadcast("showDateAdvanceEdit", p.showDateAdvanceEdit), g()), i = !1
                                    }()
                                } else r(Number(e.status))
                            })
                        }
                    })
                }, p.$on("hideDateAdvanceEdit", function (e, t) {
                    if (t) {
                        p.showDateAdvanceEdit = !1, p.filterView.selectedDateSchemeMap[t.df_id] = t.scheme;
                        var i = p.filterStatus[t.df_id];
                        "date" == i.data_type && "" == i.config.granularity && (i.config.scheme_id = t.scheme), g()
                    }
                }), p.allCharts = {}, p.getInitialData = !0, p.filterData = {}, p.filterView = {
                    loading: !1,
                    model: "",
                    editFilter: {},
                    selectedDateSchemeMap: {}
                }, p.goHelp = function (e) {
                    o(e)
                }, p.GF = {
                    add: function () {
                        p.filterView.isCreating || (p.filterView.editName = ""), p.filterView.isCreating = !0, setTimeout(function () {
                            $("#add_input").focus()
                        }, 300), v++
                    }, initChartTableMap: function () {
                        p.chartTableMap = {};
                        var e;
                        angular.forEach(p.dashStandardItems, function (t, i) {
                            e = t.children[0].meta, p.chartTableMap[e.ct_id] = e.tb_id || e.tb_ids
                        })
                    }, initChartsAndTables: function (e, t) {
                        function i(e) {
                            for (var t = 0, n = e.length; t < n; t++) {
                                var a = e[t];
                                p.filterStatus[a.df_id] = {
                                    name: a.name,
                                    charts: angular.copy(p.charts),
                                    tables: angular.copy(p.tables),
                                    config: a.config || {},
                                    data_type: ""
                                }, a.hasOwnProperty("items") || (a.items = []), 2 == a.type ? p.filterStatus[a.df_id].data_type = "date" : 1 == a.type && (p.filterStatus[a.df_id].data_type = "string"), p.GF.initSelectedStatus(a), a.items && a.items.length > 0 && i(a.items)
                            }
                            return e
                        }

                        p.charts = [];
                        var n;
                        angular.forEach(p.dashStandardItems, function (e, t) {
                            n = e.children[0].meta, 0 != n.ct_type && 1 != n.ct_type && 7 != n.ct_type && 8 != n.ct_type || p.charts.push({
                                name: n.name,
                                ct_id: n.ct_id,
                                tb_id: n.tb_id,
                                tb_ids: n.tb_ids || [],
                                is_gis: "C400" == n.type,
                                selected: !1
                            })
                        }), p.tables = [], angular.forEach(e.tb_list, function (e, t) {
                            p.tables.push({show: !1, name: e.name, fields: e.fields, tb_id: e.tb_id, selected: ""})
                        }), p.filterStatus = {}, p.filterData = e, p.hasGraftTb = _.some(e.tb_list, function (e) {
                            return "graft" === e.tb_type
                        }), p.hasGraftTb && (p.graftTip = "使用数据直连类型的工作表时，不支持筛选项自定义排序"), m(e), p.GF.initChartTableMap(), p.filterData.dsh_filter_list.length && (i(p.filterData.dsh_filter_list), t && (p.filterView.selected_opt = p.filterData.dsh_filter_list[0].df_id))
                    }, initSelectedStatus: function (e) {
                        angular.forEach(p.charts, function (t, i) {
                            p.filterStatus[e.df_id].charts[i].selected = $.inArray(t.ct_id, e.selected_charts) > -1
                        }), angular.forEach(p.tables, function (t, i) {
                            p.filterStatus[e.df_id].tables[i].show = !!e.selected_tables[t.tb_id], p.filterStatus[e.df_id].tables[i].selected = e.selected_tables[t.tb_id] || ""
                        })
                    }, updateStatus: function (e) {
                        var t = p.filterStatus[p.filterView.selected_opt].charts,
                            i = p.filterStatus[p.filterView.selected_opt].tables, n = p.chartTableMap[e.ct_id],
                            a = function (e, t) {
                                for (var a = 0; a < i.length; a++) n.indexOf(i[a].tb_id) >= 0 && (t ? t == i[a].tb_id && (i[a].show = e) : i[a].show = e)
                            };
                        if (e.selected) p.changeCheckAll(!0), a(!0); else {
                            p.changeCheckAll(!1);
                            for (var r = [], o = 0; o < t.length; o++) a(!1), t[o].selected && r.push(t[o].ct_id);
                            for (var s = 0; s < t.length; s++) r.indexOf(t[s].ct_id) >= 0 && (t[s].tb_id && n.indexOf(t[s].tb_id) >= 0 && a(!0, t[s].tb_id), t[s].tb_ids && t[s].tb_ids.length > 0 && t[s].tb_ids.map(function (e) {
                                n.indexOf(e) >= 0 && a(!0, e)
                            }))
                        }
                        p.GF.checkDataType()
                    }, checkAllCharts: function (e) {
                        p.allCharts[p.filterView.selected_opt] = e, p.isSelectingAllCharts = !0, angular.forEach(p.filterStatus[p.filterView.selected_opt].charts, function (t) {
                            t.selected = e, p.GF.updateStatus(t)
                        }), p.isSelectingAllCharts = !1
                    }, list: function (e) {
                        i.dash_global_filter.list({dash_id: t.dashId, rule_id: p.ruleId}).success(function (t) {
                            "0" == t.status ? (p.GF.initChartsAndTables(t.result, e), p.getInitialData = !1, p.filterData.dsh_filter_list.length > 0 && p.changeCheckAll(!0)) : r(Number(t.status))
                        })
                    }, info: function (e, t) {
                        t && t.stopPropagation(), p.filterView.selected_opt = e, e.indexOf("df_") >= 0 && (p.new_add_df_name = ""), p.changeCheckAll(!0), p.fieldSortValueCache && p.fieldSortValueCache[e] && (p.fieldSortValueCache[e].need = !0)
                    }, modify: function () {
                        function n(e) {
                            for (var t = 0; t < e.length; t++) {
                                var i = e[t], o = (0, a.default)(i.selected_tables);
                                i.selected_tables[o[0]] || (r(i.name + ": " + p.tips["dash.gfTableAndFieldRequired"]), d = !1);
                                var s = p.fieldMap[i.selected_tables[o[0]]];
                                for (var l in i.selected_tables) i.selected_tables.hasOwnProperty(l) && s !== p.fieldMap[i.selected_tables[l]] && (r(i.name + ": " + p.tips["dash.gfFieldTypeMustBeSame"]), d = !1);
                                i.items && i.items.length > 0 && n(i.items)
                            }
                        }

                        function o(e) {
                            return angular.forEach(e, function (e) {
                                var t = e.df_id, i = p.filterStatus[t];
                                e.df_id = 0 === t.indexOf("new") ? "" : t, e.name = i.name, e.config = i.config, e.data_type = i.data_type, "string" == i.data_type ? e.type = 1 : e.type = 2, e.selected_charts = [], e.selected_tables = {}, angular.forEach(i.charts, function (t, i) {
                                    !!t.selected && e.selected_charts.push(t.ct_id)
                                }), angular.forEach(i.tables, function (t, i) {
                                    !!t.show && (e.selected_tables[t.tb_id] = t.selected)
                                }), l = e.data_type, c = e.config.granularity, "date" == l && "" == c ? e.config.default_select = !!e.config.range : e.config.range = "", "string" == l && p.fieldSortValueCache[t] && p.fieldSortValueCache[t].sortRange && p.fieldSortValueCache[t].sortRange.length > 0 && (e.template = p.fieldSortValueCache[t].sortRange), e.items && e.items.length > 0 ? e.items = o(e.items) : e.items = []
                            }), e
                        }

                        p.globalDashFilterItems = {};
                        var s = angular.copy(p.filterData.dsh_filter_list), l = "", c = "", d = !0;
                        s = o(s), n(s), d && (p.filterView.loading = !0, i.dash_global_filter.modify({
                            dash_id: t.dashId,
                            dash_filter_list: angular.toJson(s)
                        }).success(function (n) {
                            p.filterView.loading = !1, "0" == n.status ? (r(p.tips.saveSuccess), e.closeAll(), i.dash_global_filter.item({dash_id: t.dashId}).then(function (e) {
                                "0" === e.status ? (p.originalGlobalFilter = angular.copy(e.result), p.globalDashFilter = bdp.utils.handleGlobalFilterLevel(e.result), p.globalDashFilterDisplay = bdp.bdpDash.getGFDisplay(p.globalDashFilter), u.getAttr("resetGFScrollFunc")()) : r(Number(e.status))
                            }), angular.forEach(p.drawChartUrl, function (e, t) {
                                e.lazyload || (e.options.optional._t = new Date, e.options.read_cache = !1, delete e.options.optional.dsh_filter)
                            })) : r(Number(n.status))
                        }))
                    }, del: function (t, i, n) {
                        function a(e) {
                            for (var t = 0, i = e.length; t < i; t++) {
                                if (e[t].df_id == n) {
                                    if (e[t].items && e[t].items.length > 0) {
                                        var r = angular.copy(e[t].items);
                                        angular.forEach(r, function (t) {
                                            e.push(t)
                                        })
                                    }
                                    e.splice(t, 1);
                                    break
                                }
                                e[t].items && e[t].items.length > 0 && a(e[t].items)
                            }
                            return e
                        }

                        e.openConfirm({
                            template: "/static/partials/dialogTemplates/confirm-dialog.html",
                            className: "ngdialog-theme-default ngdialog-width-340",
                            scope: p,
                            data: {title: d.instant("tips"), message: d.instant("dash.gfConfirmRemove")}
                        }).then(function () {
                            a(p.filterData.dsh_filter_list), delete p.filterStatus[n], n === p.filterView.selected_opt && (p.filterView.selected_opt = p.filterData.dsh_filter_list.length ? p.filterData.dsh_filter_list[0].df_id : "")
                        })
                    }, checkDataType: function () {
                        function e(t) {
                            for (var i = 0, n = t.length; i < n; i++) {
                                if (t[i].df_id == p.filterView.selected_opt) return t[i];
                                t[i].items && t[i].items.length > 0 && e(t[i].items)
                            }
                            return {}
                        }

                        var t;
                        for (var i in p.filterStatus) if (i == p.filterView.selected_opt) t = p.filterStatus[i]; else {
                            var n = e(p.filterStatus);
                            n.hasOwnProperty("df_id") && (t = n)
                        }
                        var a = t.tables, r = [];
                        angular.forEach(a, function (e, t) {
                            var i = "";
                            e.fields.forEach(function (t) {
                                t.fid == e.selected && (i = t.data_type)
                            }), e.show && r.indexOf(i) < 0 && r.push(i)
                        }), 1 === r.length && r[0] ? (t.data_type = r[0], t.config && !isObjectEmpty(t.config) || (t.config = angular.copy(l)), p.isSelectingAllCharts || p.GF.getFilterItems()) : (p.range = [], t.data_type = "")
                    }, getFilterItems: function () {
                        var e = p.filterView.selected_opt, t = p.filterStatus[e], i = {};
                        if (angular.forEach(t.tables, function (e, t) {
                            !!e.show && (i[e.tb_id] = e.selected)
                        }), p.range = [], "string" == t.data_type && p.fieldSortValueCache[e] && p.fieldSortValueCache[e].need && p.fieldSortValueCache[e].sortRange.length) return p.range = p.fieldSortValueCache[e].sortRange || [], void(p.fieldSortValueCache[e].need = !1);
                        if (e = 0 === e.indexOf("new") ? "" : e, "date" != t.data_type || "" != t.config.granularity || t.config.scheme_id) p.GF.getDashGlobalFilterRange(e, t, i); else {
                            c.getLatestScheme() ? (t.config.scheme_id = c.getLatestScheme(), p.GF.getDashGlobalFilterRange(e, t, i)) : c.getSchemeList().then(function (n) {
                                var a = c.getDefaultSchemeObj(n) || {scheme_id: ""};
                                c.setLatestScheme(a.scheme_id), t.config.scheme_id = c.getLatestScheme(), p.GF.getDashGlobalFilterRange(e, t, i)
                            })
                        }
                    }, getDashGlobalFilterRange: function (e, n, a) {
                        p.showLoading = !0, i.dash_global_filter.range({
                            dash_id: t.dashId,
                            rule_id: p.ruleId,
                            scheme_id: n.config.scheme_id || "",
                            df_id: e,
                            selected_tables: angular.toJson(a),
                            granularity: n.config.granularity
                        }).then(function (e) {
                            if ("0" === e.status) {
                                if (p.showLoading = !1, p.range = e.result.range || [], !p.filterStatus[p.filterView.selected_opt]) return;
                                if ("date" == p.filterStatus[p.filterView.selected_opt].data_type && "" == p.filterStatus[p.filterView.selected_opt].config.granularity && (p.filterStatus[p.filterView.selected_opt].config.default_select = !1), "string" == p.filterStatus[p.filterView.selected_opt].data_type && delete p.fieldSortValueCache[p.filterView.selected_opt], 0 == p.range.length) p.filterStatus[p.filterView.selected_opt].config.range = ""; else {
                                    var t = !1, i = p.filterStatus[p.filterView.selected_opt].data_type,
                                        n = p.filterStatus[p.filterView.selected_opt].config.granularity;
                                    "date" == i && "" == n && (angular.forEach(p.range, function (e) {
                                        e.opt_id == p.filterStatus[p.filterView.selected_opt].config.range && (t = !0)
                                    }), t || (p.filterStatus[p.filterView.selected_opt].config.range = "", p.filterStatus[p.filterView.selected_opt].config.show_all = !0))
                                }
                            } else r(Number(e.status))
                        })
                    }, level: function (e, t, i) {
                        e && e.stopPropagation();
                        var n = t.index(), a = t.$parentNodeScope;
                        "down" === i ? n && (t.prev().$modelValue.items.push(t.$modelValue), t.remove()) : "up" === i && a && t.$last && (a.$parentNodesScope.$modelValue.push(t.$modelValue), t.remove())
                    }, hideInDash: function (e, t) {
                        e && e.stopPropagation(), t.config || (t.config = $.extend(!0, {}, l)), t.config.hide_in_dash = !t.config.hide_in_dash, p.filterStatus[t.df_id].config.hide_in_dash = t.config.hide_in_dash
                    }
                }, p.$watch("filterView.selected_opt", function (e, t) {
                    e && p.GF.checkDataType()
                }), f.on("click", function () {
                    p.fieldSortValueCache = {}, e.open({
                        template: "/static/dashboard-core/global-filter/global-filter-config.html",
                        className: "ngdialog-theme-default global-filter-model J-global-filter-model",
                        scope: p,
                        preCloseCallback: function (e) {
                            p.filterData = {}, p.filterView.selected_opt = "", p.filterView.selected_date_scheme = "", p.fieldSortValueCache = {}, p.filterView.isCreating = !1, p.filterView.model = "", p.range = []
                        }
                    }), p.GF.list(!0)
                }), p.confirmName = function (e, t, i, n) {
                    function a(e) {
                        e.map(function (e) {
                            if (e.df_id != t && e.name == p.filterView.editName) return void(o = !0);
                            e.items && e.items.length > 0 && a(e.items)
                        })
                    }

                    if (n && n.stopPropagation(), "" === p.filterView.editName || !defined(p.filterView.editName)) return r(p.tips["dash.gfNameRequired"]), !1;
                    var o = !1;
                    if (a(p.filterData.dsh_filter_list), o) return void r(p.tips["dash.gfNameDuplicate"]);
                    "create" === e ? (p.filterView.isCreating = !1, p.isCreating = !1, p.filterData.dsh_filter_list.push({
                        df_id: "new" + v,
                        name: p.filterView.editName,
                        items: []
                    }), p.filterStatus["new" + v] = {}, p.filterStatus["new" + v].config = angular.copy(l), p.filterStatus["new" + v].charts = angular.copy(p.charts), p.filterStatus["new" + v].tables = angular.copy(p.tables), p.filterStatus["new" + v].name = p.filterView.editName, p.GF.info("new" + v), p.new_add_df_name = p.filterView.editName) : function () {
                        !function e(i) {
                            i.map(function (i) {
                                i.df_id == t && (i.name = p.filterView.editName), i.items && i.items.length > 0 && e(i.items)
                            })
                        }(p.filterData.dsh_filter_list), p.filterStatus[t].name = p.filterView.editName, p.filterView.editFilter[t] = !1, p.GF.info(t)
                    }(), p.filterView.model = "createInfo", p.filterView.editName = ""
                }, p.keyupFun = function (e, t, i, n) {
                    13 == e.keyCode && p.confirmName(t, i, n)
                }, p.cancelEditStatus = function () {
                    function e(t) {
                        t.map(function (t) {
                            p.filterView.editFilter[t.df_id] = !1, t.items && t.items.length > 0 && e(t.items)
                        })
                    }

                    p.filterData.dsh_filter_list && p.filterData.dsh_filter_list.length > 0 && e(p.filterData.dsh_filter_list), p.filterView.model = "createInfo"
                }, p.editFilterName = function (e, t, i) {
                    e && e.stopPropagation(), p.filterView.isCreating || (p.cancelEditStatus(), p.filterView.editFilter[t] = !0, p.filterView.editName = i)
                }, p.stopPropagation = function (e) {
                    e.stopPropagation()
                }, p.changeShowAllItem = function () {
                    p.filterStatus[p.filterView.selected_opt].config.show_all = !p.filterStatus[p.filterView.selected_opt].config.show_all;
                    var e = p.filterStatus[p.filterView.selected_opt].data_type,
                        t = p.filterStatus[p.filterView.selected_opt].config.granularity,
                        i = p.filterStatus[p.filterView.selected_opt].config.show_all,
                        n = p.filterStatus[p.filterView.selected_opt].config.range;
                    "date" == e && "" == t && !n && !i && p.range.length > 0 && (p.filterStatus[p.filterView.selected_opt].config.range = p.range[0].opt_id)
                }, p.changeCheckAll = function (e) {
                    if (e) {
                        var t = 0;
                        angular.forEach(p.filterStatus[p.filterView.selected_opt].charts, function (e) {
                            e.selected && t++
                        }), p.allCharts[p.filterView.selected_opt] = t == p.filterStatus[p.filterView.selected_opt].charts.length
                    } else p.allCharts[p.filterView.selected_opt] = !1
                }, p.globalFilterTree = {
                    dragStart: function (e) {
                    }, dragMove: function (e) {
                    }, dragStop: function () {
                        function e(i) {
                            angular.forEach(i, function (i) {
                                t[i.df_id] = p.filterStatus[i.df_id], i.items && i.items.length > 0 && e(i.items)
                            })
                        }

                        var t = {}, i = p.filterData.dsh_filter_list;
                        angular.forEach(i, function (e) {
                            t[e.df_id] = p.filterStatus[e.df_id]
                        }), e(i), p.filterStatus = t
                    }
                }, p.sortGlobalStringFilter = {
                    items: ".J-sortable-string", start: function () {
                    }, update: function (e, t) {
                        p.fieldSortValueCache[p.filterView.selected_opt] = {need: !1, sortRange: p.range}
                    }, stop: function (e, t) {
                    }
                }, s(["dash.gfTableAndFieldRequired", "dash.gfFieldTypeMustBeSame", "dash.gfConfirmRemove", "dash.gfNameRequired", "dash.gfNameDuplicate", "saveSuccess"], p)
            }

            return {
                restrict: "A",
                scope: {
                    originalGlobalFilter: "=",
                    globalDashFilter: "=",
                    globalDashFilterDisplay: "=",
                    ruleId: "=",
                    drawChartUrl: "=",
                    dashStandardItems: "=",
                    globalDashFilterItems: "="
                },
                link: p
            }
        }

        angular.module("BC.dashboard.core").directive("globalFilterSet", e).constant("gfConfigDefault", {
            granularity: "",
            default_select: !1,
            show_all: !0
        }), e.$inject = ["ngDialog", "$stateParams", "commonService", "commonHttp", "errHint", "operatorHelpLink", "$jsTipTranslate", "gfConfigDefault", "globalDateSchemeService", "$translate", "globalFilterService"]
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i, n, r, o, s, l, c, d, u, p) {
            function f(t, i, u) {
                function f(e, i, n) {
                    var a = i.df_id, r = $(".project-nav").width() + 64, o = e.pageX < r + 200 ? {left: 0} : {right: 0},
                        s = bdp.utils.getArrayTextWidth(n, i);
                    o.width = s, t.adjustWidth[a] = o
                }

                t.advanceView = {}, t.showQueryfilter = {}, t.queryString = {}, t.globalDashFilterItems = t.globalDashFilterItems || {};
                t.adjustWidth = {}, t.originalRange = [];
                var h;
                t.dateTimeByHalfHour = d, t.globalFilterMultiple = {}, t.refreshCharts = function (e, i, n) {
                    var r = [];
                    e.range = n, e.show = !1, e.showName = "" !== i ? i : e.name, t.globalDashFilterItems[e.df_id] = {
                        granularity: e.config.granularity || "",
                        df_id: e.df_id,
                        range: n,
                        data_type: e.data_type,
                        show_name: e.showName,
                        real_name: i,
                        rela_charts: e.rela_ct_ids,
                        range_type: e.range_type
                    }, angular.forEach(t.drawChartUrl, function (e, i) {
                        e.global_filter_value = [];
                        var n = [];
                        angular.forEach(t.globalDashFilterItems, function (t, i) {
                            t.rela_charts.indexOf(e.options.ct_id) > -1 && n.push({
                                df_id: t.df_id,
                                range: t.range,
                                data_type: t.data_type,
                                granularity: t.granularity,
                                range_type: t.range_type
                            })
                        }), n.length > 0 && (e.options.optional.dsh_filter = n, delete e.options.optional.filter_list, delete e.options.optional.linked_value, e.options.read_cache = !1, e.options.optional._t = new Date, r.push(e.options.ct_id))
                    }), t.$emit("globalFilter.refreshCharts", r), setTimeout(function () {
                        t.scrollHandler.init(t.scrollHandler.scrollWidth)
                    }, 10), BDPLogger.log("chart_operation", {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({operation_type: "dashboard_filter_apply", ct_id: ""})
                    })
                }, t.saveDateRange = function (e) {
                    var i = t.globalDashFilter[e.data.index], a = "", r = e.sDate ? e.sDate + " " + e.sDateHour : null,
                        o = e.eDate ? e.eDate + " " + e.eDateHour : null;
                    if (!r && !o) return l(t.tips["chart.dateRangeRequired"]), !1;
                    if (r && o) {
                        if (!e.sDateHour) return l(t.tips["filter.startDateErr2"]), !1;
                        if (!e.eDateHour) return l(t.tips["filter.endDateErr2"]), !1;
                        if (new Date(r) - new Date(o) > 0) return l(t.tips["filter.dateRangeInvalid"]), !1
                    } else {
                        if (r && !o && !e.sDateHour) return l(t.tips["filter.startDateErr2"]), !1;
                        if (!r && o && !e.eDateHour) return l(t.tips["filter.endDateErr2"]), !1
                    }
                    r ? (a += r, a += o ? "~" + o : "~" + t.tips["chart.notLimit"]) : (a += t.tips["chart.notLimit"] + "~", a += o), n.close(h.id), h = null, t.refreshCharts(i, a, [r, o])
                }, t.queryKwd = {}, t.globalFilterModule = {
                    showDatePicker: function (e, i) {
                        if (navigator.userAgent.indexOf("Firefox") >= 0 && i[0] && i[0].indexOf("opt_") >= 0) ; else if (navigator.userAgent.indexOf("Firefox") >= 0 && i && i.length > 0) {
                            var a = null, r = null;
                            i[0] && (a = i[0].split("-"), a[1] < 10 && (a[1] = "0" + parseInt(a[1])), a[2] < 10 && (a[2] = "0" + parseInt(a[2])), a = a[0] + "-" + a[1] + "-" + a[2]), i[1] && (r = i[1].split("-"), r[1] < 10 && (r[1] = "0" + parseInt(r[1])), r[2] < 10 && (r[2] = "0" + parseInt(r[2])), r = r[0] + "-" + r[1] + "-" + r[2]), i = [a, r]
                        }
                        if (i.length > 1) {
                            var o = i[0] ? i[0].split(" ")[1] || "00:00:00" : "00:00:00",
                                s = i[1] ? i[1].split(" ")[1] || "23:59:59" : "23:59:59";
                            i = i.concat([o, s])
                        } else 1 === i.length && i[0].indexOf("opt_") > -1 ? i = [+new Date, +new Date, "00:00:00", "23:59:59"] : 0 === i.length && (i = [+new Date, +new Date, "00:00:00", "23:59:59"]);
                        h = n.open({
                            template: "/static/partials/dialogTemplates/custom-date-modal.html",
                            className: "ngdialog-theme-default date-picker-modal daterange-bdp-modal",
                            data: {index: e, range: i},
                            scope: t
                        })
                    }, getItemList: function (e, i, n) {
                        t.setParentAndChildMap();
                        var a = t.getParentFilterRange(i.df_id);
                        i.show = !n && !i.show, (i.show || n) && (t.globalFilterMultiple.loading = !0, t.queryKwd[i.df_id] = "", o.dash_global_filter.range({
                            dash_id: r.dashId,
                            rule_id: t.ruleId,
                            df_id: i.df_id,
                            scheme_id: i.config.scheme_id || "",
                            granularity: i.config.granularity || "",
                            range: angular.toJson(a)
                        }).then(function (a) {
                            if (t.globalFilterMultiple.loading = !1, 0 == a.status) {
                                var r = a.result.range;
                                !n && f(e, i, r), t.showQueryfilter[i.df_id] = a.result.total > 100, t.queryString[i.df_id] = {
                                    show: !t.showQueryfilter[i.df_id],
                                    keyword: "",
                                    list: r,
                                    total: a.result.total
                                }, n && (n(i, r, a.result.total), t.originalRange = r)
                            } else l(Number(a.status))
                        }).finally(function () {
                            t.globalFilterMultiple.loading = !1
                        }))
                    }, getItemListAfterDialog: function (e, i, a) {
                        n.open({
                            template: "/static/dashboard-core/global-filter/global-filter-string-multiple.html",
                            className: "ngdialog-theme-default str-filter-model global-str",
                            scope: t
                        }), this.getItemList(e, i, a)
                    }, openAdvanceModal: function (e, i, n) {
                        for (var a, e = angular.copy(e), r = 0; r < t.globalDashFilter.length; r++) if (t.globalDashFilter[r].df_id === e.df_id) {
                            a = r;
                            break
                        }
                        var o = void 0 == e.range ? [] : e.range;
                        t.globalDashFilter[a].showName;
                        t.globalFilterMultiple = {
                            index: a,
                            df_id: e.df_id,
                            name: e.name,
                            data_type: e.data_type,
                            keyword: "",
                            filterKwd: "",
                            config: e.config,
                            searchList: [],
                            total: n,
                            addList: o,
                            range_type: e.hasOwnProperty("range_type") ? e.range_type : "1"
                        }, angular.forEach(i, function (e) {
                            $.inArray(e, o) > -1 ? t.globalFilterMultiple.searchList.push({
                                name: e,
                                select: !0
                            }) : t.globalFilterMultiple.searchList.push({name: e, select: !1})
                        }), t.disabled_compare = !0
                    }, addAdvanceItem: function (i, n) {
                        n && n.stopPropagation();
                        var a = !1;
                        if ($.inArray(i.name, t.globalFilterMultiple.addList) > -1 && (a = !0), a) return void l(t.tips["filter.hasTheFilter"]);
                        t.globalFilterMultiple.addList.push(i.name), e(function () {
                            var e = $(".add-list").find("ul"), t = e[0].scrollHeight;
                            e.animate({scrollTop: t})
                        }, 300)
                    }, delAdvanceItem: function (e, i) {
                        i && i.stopPropagation();
                        for (var n = t.globalFilterMultiple.searchList, a = 0, r = n.length; a < r; a++) if (n[a].name == t.globalFilterMultiple.addList[e]) {
                            n[a].select = !1;
                            break
                        }
                        t.globalFilterMultiple.addList.splice(e, 1)
                    }, delAll: function () {
                        t.globalFilterMultiple.addList = []
                    }, addAll: function () {
                        function e(e) {
                            t.globalFilterMultiple.total <= 100 && t.globalFilterMultiple.keyword ? e.name.toLocaleLowerCase().indexOf(t.globalFilterMultiple.keyword.toLocaleLowerCase()) >= 0 && t.globalFilterMultiple.addList.push(e.name) : t.globalFilterMultiple.addList.push(e.name)
                        }

                        if (0 == t.globalFilterMultiple.addList.length) return void angular.forEach(t.globalFilterMultiple.searchList, function (t) {
                            e(t)
                        });
                        angular.forEach(t.globalFilterMultiple.searchList, function (i) {
                            $.inArray(i.name, t.globalFilterMultiple.addList) < 0 && e(i)
                        })
                    }, saveAdvance: function () {
                        var e = t.globalDashFilter[t.globalFilterMultiple.index], i = t.globalFilterMultiple.addList,
                            n = i.join(",")
                        ;e.range_type = t.globalFilterMultiple.range_type, t.refreshCharts(e, n, i)
                    }, enterToQuery: function (e) {
                        13 == e.e.keyCode && (e.is_advance ? t.globalFilterMultiple.filterKwd = t.globalFilterMultiple.keyword : t.queryString[e.filter.df_id].keyword = t.queryKwd[e.filter.df_id], e.real_search && this.query(e.filter, e.is_advance))
                    }, query: function (e, i) {
                        t.showLoading = !0, t.setParentAndChildMap();
                        var n = t.getParentFilterRange(e.df_id), a = e.df_id,
                            r = t.queryKwd[a] || t.globalFilterMultiple && t.globalFilterMultiple.keyword;
                        if (i ? t.globalFilterMultiple.filterKwd = r : t.queryString[e.df_id].keyword = r, r) {
                            var o = {
                                keyword: r,
                                rule_id: t.ruleId,
                                df_id: e.df_id,
                                granularity: e.config.granularity || "",
                                parent_range: angular.toJson(n)
                            };
                            i && (t.globalFilterMultiple.loading = !0), s.post("/api/dsh_filter/enum_search", o).then(function (e) {
                                if (t.showLoading = !1, 0 == e.status) if (i) {
                                    var n = [];
                                    angular.forEach(e.result, function (e) {
                                        n.push({name: e, select: !1})
                                    }), t.globalFilterMultiple.loading = !1, t.globalFilterMultiple.searchList = n
                                } else t.tempQueryList = angular.copy(t.queryString[a].list), t.queryString[a].list = e.result, t.queryString[a].show = !0; else l(Number(e.status))
                            })
                        } else if (t.showLoading = !1, i) {
                            var c = [];
                            angular.forEach(t.originalRange, function (e) {
                                c.push({name: e, select: !1})
                            }), t.globalFilterMultiple.searchList = c
                        }
                    }, delQueryField: function (e) {
                        t.tempQueryList && (t.queryString[e].list = t.tempQueryList || []), t.queryKwd[e] = ""
                    }
                }, t.setParentAndChildMap = function () {
                    function e(i, o) {
                        angular.forEach(i, function (i) {
                            a = [], angular.forEach(n, function (e) {
                                e.df_id == o.df_id && (a = e.range, r = e.hasOwnProperty("range_type") ? e.range_type : "1")
                            }), "string" == o.data_type && (o.config.granularity = ""), t.parentAndChildMap.push({
                                parent_df_id: o.df_id,
                                parent_name: o.name,
                                parent_granularity: o.config.granularity,
                                parent_range: a,
                                parent_data_type: o.data_type,
                                parent_range_type: r,
                                self_df_id: i.df_id,
                                self_name: i.name
                            }), i.items && i.items.length > 0 && e(i.items, i)
                        })
                    }

                    t.parentAndChildMap = [];
                    var i = angular.copy(t.originalGlobalFilter), n = t.globalDashFilter, a = [], r = "1";
                    e(i, {df_id: "", name: "", range: [], data_type: "", config: {granularity: ""}, range_type: "1"})
                }, t.getParentFilterRange = function (e) {
                    function i(e) {
                        angular.forEach(t.parentAndChildMap, function (t) {
                            e == t.self_df_id && t.parent_df_id && (n.push({
                                df_id: t.parent_df_id,
                                range: t.parent_range,
                                data_type: t.parent_data_type,
                                name: t.parent_name,
                                granularity: t.parent_granularity || "",
                                range_type: t.parent_range_type
                            }), i(t.parent_df_id))
                        })
                    }

                    var n = [];
                    return i(e), angular.forEach(n, function (e) {
                        delete e.name
                    }), n
                }, t.setParentAndChildMap(), t.resetRangeType = function (e) {
                    e.range_type = "1", $(".J_dash_edit_content").length && $(".J_dash_edit_content").attr("issetFilter", "1")
                }, t.scrollHandler = {
                    scrollCount: 0,
                    scrollWidth: 0,
                    firstIndex: 0,
                    nextIndex: 0,
                    itemWidthArr: [],
                    rightShadow: 24,
                    getItemWidth: function () {
                        for (var e = i.find(".global-filter").find(".filter-i"), t = [], n = 0; n < e.length; n++) t.push(e[n].scrollWidth + 24);
                        this.itemWidthArr = [];
                        for (var n = 0; n < t.length; n++) 0 === n ? this.itemWidthArr.push(t[0]) : this.itemWidthArr.push(this.itemWidthArr[n - 1] + t[n])
                    },
                    _setFirstIndex: function (e) {
                        var t = this.itemWidthArr.length;
                        if (e - this.rightShadow >= this.itemWidthArr[t - 1]) return this.firstIndex = t - 1, void(this.scrollWidth = this.itemWidthArr[this.firstIndex - 1] || 0);
                        for (var i = 0; i < t; i++) if (e - this.rightShadow <= this.itemWidthArr[i]) {
                            this.firstIndex = i, this.scrollWidth = this.itemWidthArr[this.firstIndex - 1] || 0;
                            break
                        }
                    },
                    _setNextIndex: function (e, t) {
                        for (var i = this.firstIndex; i < this.itemWidthArr.length; i++) if (this.nextIndex = 0, e + t - this.rightShadow <= this.itemWidthArr[i]) {
                            this.nextIndex = i;
                            break
                        }
                        0 === this.nextIndex && (this.nextIndex = this.itemWidthArr.length)
                    },
                    init: function (e) {
                        this.getItemWidth();
                        var t = i.find(".global-filter"), n = t.innerWidth();
                        this._setFirstIndex(e), this._setNextIndex(e, n)
                    },
                    reset: function () {
                        this.scrollCount = 0, this.scrollWidth = 0, this.firstIndex = 0, this.nextIndex = 0, i.find(".global-filter").animate({left: 32})
                    },
                    scroll: function (e) {
                        this.scrollCount = this.scrollCount + e, this.getItemWidth();
                        var t = i.find(".global-filter"), n = t[0].scrollWidth, a = t.innerWidth();
                        if (e > 0 ? this.scrollWidth = (this.scrollWidth || 0) + a : this.scrollCount ? this.scrollWidth = (this.scrollWidth || 0) - a + 56 + 32 + 32 : this.scrollWidth = 0, this.scrollCount < 0 || n + this.rightShadow <= a || this.scrollWidth >= n + a - 56) return void(this.scrollCount = this.scrollCount - e);
                        this.scrollWidth >= 0 && (this._setFirstIndex(this.scrollWidth), this._setNextIndex(this.scrollWidth, a));
                        var r = 0 === this.scrollWidth ? 32 : 56 - this.scrollWidth;
                        t.animate({left: r})
                    }
                }, setTimeout(function () {
                    t.scrollHandler.init(0)
                }), p.setAttr("resetGFScrollFunc", function () {
                    t.scrollHandler.reset(), setTimeout(function () {
                        t.scrollHandler.init(0)
                    })
                });
                var g = t.$watch(function () {
                    return t.globalDashFilter.length
                }, function (e, i) {
                    e !== i && setTimeout(function () {
                        t.scrollHandler.scroll(-t.scrollHandler.scrollCount)
                    })
                });
                $(window).on("resize.globalFilter", $.debounce(300, function () {
                    t.scrollHandler.init(t.scrollHandler.scrollWidth)
                })), $("body").on("dashboard-scroll-start.globalFilter", function () {
                    var e = t.globalDashFilter;
                    if ($(".J_globle_filter_layer").addClass("ng-hide"), $.isArray(e)) for (var i = 0, n = e.length; i < n; i++) e[i].show = !1
                }), t.$on("$destroy", function () {
                    $(window).off("resize.globalFilter"), $("body").off("dashboard-scroll-start.globalFilter"), g()
                }), c(["chart.notLimit", "chart.dateRangeRequired", "filter.hasTheFilter", "filter.dateRangeInvalid", "filter.startDateErr2", "filter.endDateErr2"], t)
            }

            return {
                restrict: "A",
                templateUrl: "/static/dashboard-core/global-filter/global-filter.html",
                scope: {
                    originalGlobalFilter: "=",
                    globalDashFilter: "=",
                    globalDashFilterItems: "=",
                    globalDashFilterDisplay: "=",
                    ruleId: "=",
                    showLoading: "=",
                    drawChartUrl: "=",
                    filterStatus: "=",
                    onSharePage: "="
                },
                link: f
            }
        }

        angular.module("BC.dashboard.core").directive("globalFilter", e), e.$inject = ["$timeout", "$interval", "$rootScope", "ngDialog", "$stateParams", "commonService", "commonHttp", "errHint", "$jsTipTranslate", "dateTimeByHalfHour", "$location", "globalFilterService"]
    }()
}, function (e, t, i) {
    "use strict";
    angular.module("BC.dashboard.core").directive("dateAdvanceEdit", ["$rootScope", "errHint", "commonService", "commonHttp", "$stateParams", "$timeout", "$jsTipTranslate", "globalDateSchemeService", "$translate", "ngDialog", function (e, t, i, n, a, r, o, s, l, c) {
        return {
            restrict: "A",
            templateUrl: "/static/dashboard-core/global-filter/date-advance-edit.html",
            link: function (d, u, p) {
                function f(e) {
                    var t = !1;
                    return angular.forEach(y, function (i) {
                        i.name == e && (t = !0)
                    }), t
                }

                var h = e.language || "zh", g = "未命名", m = "日期";
                "en" == h && (g = "Untitled", m = "DATE");
                var v = angular.copy(GlobalConstant.defaultAdvDateConfig);
                v.is_global = 2, d.listLoading = !0, d.infoLoading = !1, d.hasNew = !1, d.model = !1, d.permisionDateFilter = e.permision.canDateFilter, d.tempData = {name: ""}, d.dateAdvanceData = {}, d.dateAdvanceView = {}, d.dateAdvanceList = [], d.dateFieldId = [], d.selected_date_opt_id = "", d.selected_date_opt_is_default = !1;
                var y = d.dateAdvanceList;
                d.$on("showDateAdvanceEdit", function (e, t) {
                    if (t) {
                        d.selected_date_opt_id = "";
                        var i = d.filterView.selected_opt, n = d.filterStatus[i];
                        d.globalDateFilterConfig.applySchemeId = n.config.scheme_id, d.globalDateFilterConfig.selectedScheme = null, d.globalDateFilterConfig.list()
                    }
                }), d.dateAdvance = {
                    getList: function () {
                        var e = d.filterView.selected_opt, n = d.filterStatus[e], r = {},
                            o = d.globalDateFilterConfig.selectedScheme;
                        return angular.forEach(n.tables, function (e, t) {
                            !!e.show && (r[e.tb_id] = e.selected)
                        }), d.dateFieldIds = angular.copy(r), d.listLoading = !0, i.dash_global_filter.range({
                            dash_id: a.dashId,
                            scheme_id: o.scheme_id,
                            rule_id: d.ruleId,
                            df_id: e,
                            selected_tables: angular.toJson(r),
                            granularity: n.config.granularity
                        }).then(function (e) {
                            if (d.listLoading = !1, "0" === e.status) {
                                d.dateAdvanceList = e.result.range || [];
                                var i = !1;
                                d.dateAdvanceList.forEach(function (e) {
                                    d.selected_date_opt_id == e.opt_id && (i = !0, d.globalDateFilterConfig.isConfig && 1 != e.is_global && (i = !1))
                                }), i ? d.dateAdvance.getInfo(d.selected_date_opt_id) : d.dateAdvanceList.length > 0 && d.dateAdvance.getInfo(d.dateAdvanceList[0].opt_id), d.globalDateFilterConfig.isConfig || (d.globalDateFilterConfig.applyAdvDateList = angular.copy(d.dateAdvanceList))
                            } else t(Number(e.status))
                        })
                    }, getInfo: function (e, n) {
                        if (d.hasNew) return void t(d.tips["filter.pleaseSaveCurrentFilterItem"]);
                        d.infoLoading = !0, d.selected_date_opt_id = e, d.tempData = v, d.tempData.name = n, i.adv_date.info(e).success(function (e) {
                            "0" == e.status ? (d.tempData = angular.fromJson(e.result), d.dateAdvance.setDefaultData(e.result), d.infoLoading = !1, d.selected_date_opt_disabled = !d.globalDateFilterConfig.isConfig && 1 == d.tempData.is_global, d.globalDateFilterConfig.isConfig && 1 == d.tempData.is_global && d.globalDateFilterConfig.selectedScheme.is_default && (d.selected_date_opt_disabled = !0)) : t(Number(e.status))
                        })
                    }, setDefaultData: function (e) {
                        if ("accurate" !== d.tempData.type ? (d.tempData.accurate.start = "", d.tempData.accurate.end = "") : (d.tempData.accurate.start = e.accurate.start, d.tempData.accurate.end = e.accurate.end), d.tempData.fixed.hasOwnProperty("granularity") || (d.tempData.fixed.granularity = "day"), "expression" === d.tempData.type) {
                            var t = new RegExp("\\[_field_id_\\]", "g");
                            d.tempData.expression = d.tempData.expression.replace(t, "[" + m + "]"), r(function () {
                                d.$broadcast("changeDateExpression", d.tempData.expression)
                            }, 50)
                        } else r(function () {
                            d.$broadcast("changeDateExpression", "")
                        }, 50)
                    }, createItem: function () {
                        if (d.hasNew) return void t(d.tips["filter.pleaseSaveCurrentFilterItem"]);
                        d.tempData = angular.copy(v), d.tempData.is_global = d.globalDateFilterConfig.isConfig ? 1 : 2, d.selected_date_opt_id = "newId", d.selected_date_opt_disabled = !1, d.model = "create", d.tempData.name = g, $(".date-advance-name > input").focus(), d.dateAdvanceList.push(d.tempData), scrollToBottom(angular.element(u).find(".item-list")), d.hasNew = !0
                    }, clickFun: function (e) {
                        e && e.stopPropagation(), d.tempData.name == g && (d.tempData.name = "")
                    }, blurFun: function (e) {
                        e && e.stopPropagation(), d.tempData.name || (d.tempData.name = g), d.tempData.name && d.tempData.name != g && f(d.tempData.name) && (t(d.tips["filter.duplicatedNames"]), d.tempData.name = "")
                    }, changeTypeFun: function (e) {
                        if (e && e.stopPropagation(), "expression" === d.tempData.type) {
                            var t = new RegExp("\\[_field_id_\\]", "g");
                            d.tempData.expression = d.tempData.expression.replace(t, "[" + m + "]"), r(function () {
                                d.$broadcast("changeDateExpression", d.tempData.expression)
                            }, 50)
                        } else r(function () {
                            d.$broadcast("changeDateExpression", "")
                        }, 50)
                    }, fixedGranularityChange: function (e) {
                        e && e.stopPropagation(), "day" == d.tempData.fixed.granularity ? d.tempData.fixed.start = 30 : d.tempData.fixed.start = 1
                    }, deleteItem: function (e, n, a) {
                        e && e.stopPropagation();
                        var r = d.filterView.selected_opt;
                        if ("newId" == d.selected_date_opt_id) d.dateAdvanceList.splice(a, 1), d.hasNew = !1, d.dateAdvanceList.length > 0 && d.dateAdvance.getInfo(d.dateAdvanceList[0].opt_id, d.dateAdvanceList[0].name); else {
                            if (!confirm(d.tips["filter.delTip"])) return;
                            n.opt_id == d.selected_date_opt_id && (d.selected_date_opt_id = ""), i.adv_date.global_del(n.opt_id, r).success(function (e) {
                                0 == e.status ? (d.dateAdvance.getList(), t(d.tips.delSuccess)) : t(Number(e.status))
                            })
                        }
                    }, modifyItem: function () {
                        if (0 != d.dateAdvanceList.length) {
                            var e = d.selected_date_opt_id || "", n = a.dashId, r = d.tempData.name,
                                o = d.filterView.selected_opt, s = d.globalDateFilterConfig.selectedScheme.scheme_id;
                            if (!r) return void t(d.tips["filter.nullTitle"]);
                            if (f(r) && (t(d.tips["filter.duplicatedNames"]), d.tempData.name = ""), "newId" == e && (e = ""), d.dateAdvance.formatData()) {
                                var l = angular.toJson(d.tempData);
                                i.adv_date.global_modify(n, e, o, s, l).then(function (e) {
                                    0 == e.status ? (e.result.hasOwnProperty("opt_id") && (d.selected_date_opt_id = e.result.opt_id), d.dateAdvance.getList(), d.hasNew = !1, t(d.tips.saveSuccess)) : t(Number(e.status))
                                })
                            }
                        }
                    }, formatData: function () {
                        var e = !0, n = d.tempData.type, r = d.tempData.accurate.start, o = d.tempData.accurate.end;
                        if ("fixed" === n) "0" === d.tempData.fixed.start && (t(d.tips["filter.inputPositiveNumber"]), e = !1), isNaturalNumber(d.tempData.fixed.start) && isNaturalNumber(d.tempData.fixed.end.value) || (t(d.tips["chart.plzTypePositionInteger"]), e = !1); else if ("accurate" === n) "string" == typeof r && (r = new Date(r)), "string" == typeof o && (o = new Date(o)), r || o || (t(d.tips["filter.nullData"]), e = !1), r.getTime() - o.getTime() > 0 && (t(d.tips["chart.dateRangeInvalid"]), e = !1); else if ("relative" === n) ; else if ("expression" === n) {
                            var s = d.selected_date_opt_id || "", l = a.dashId, c = d.dateAdvance.checkFormulaGrammar(),
                                u = d.filterView.selected_opt, p = d.globalDateFilterConfig.selectedScheme.scheme_id;
                            c && c.then(function (n) {
                                if (n) {
                                    d.tempData.accurate.start = Highcharts.dateFormat("%Y-%m-%d", r), d.tempData.accurate.end = Highcharts.dateFormat("%Y-%m-%d", o);
                                    var a = angular.toJson(d.tempData);
                                    "newId" == s && (s = ""), i.adv_date.global_modify(l, s, u, p, a).success(function (e) {
                                        0 == e.status ? (d.dateAdvance.getList(), e.result.hasOwnProperty("opt_id") && (d.selected_date_opt_id = e.result.opt_id), d.hasNew = !1, t(d.tips.saveSuccess)) : t(Number(e.status))
                                    }), e = !1
                                } else t(d.tips["filter.checkFailed"]), d.checkFormulaGrammarFlag = !1, e = !1;
                                return e
                            }), e = !1
                        }
                        return d.tempData.accurate.start = Highcharts.dateFormat("%Y-%m-%d", r), d.tempData.accurate.end = Highcharts.dateFormat("%Y-%m-%d", o), e
                    }, setExpression: function (e) {
                        d.tempData.expression = e
                    }, expressionChanged: function (e) {
                        d.expressionChangedFlag = e
                    }, insertFieldNameToExpression: function () {
                        d.expressionChangedFlag = !0, d.$broadcast("insertFieldNameToExpression", m)
                    }, checkFormulaGrammar: function () {
                        var e = d.tempData.expression;
                        if ("" == e) return void t(d.tips["filter.pleaseInputExpression"]);
                        var i = m, r = new RegExp("\\[" + i + "\\]", "g");
                        d.tempData.expression = e.replace(r, "[_field_id_]");
                        var o = [], s = [];
                        angular.forEach(d.dateFieldIds, function (e, t) {
                            o.push(t), s.push(e)
                        });
                        var l = {
                            dash_id: a.dashId,
                            tb_id: angular.toJson(o),
                            fid: angular.toJson(s),
                            expression: d.tempData.expression
                        };
                        return d.expressionChangedFlag = !1, n.post("/api/expression/syntax_verify", l).then(function (e) {
                            return 0 == e.status ? (t(d.tips["filter.checkSuccess"]), d.checkFormulaGrammarFlag = !0, !0) : (t(d.tips["filter.checkFailed"]), d.checkFormulaGrammarFlag = !1, !1)
                        })
                    }, turnToLastItem: function () {
                        var e = "", t = "";
                        !d.selected_date_opt_id && d.dateAdvanceList.length > 0 ? (d.selected_date_opt_id = d.dateAdvanceList[0].opt_id, e = d.selected_date_opt_id, t = d.dateAdvanceList[0].name) : (angular.forEach(d.dateAdvanceList, function (i) {
                            i.opt_id == d.selected_date_opt_id && (e = d.selected_date_opt_id, t = i.name)
                        }), scrollToBottom(angular.element(u).find(".item-list"), 0)), d.dateAdvance.getInfo(e, t)
                    }
                }, d.returnGlobalFilter = function () {
                    d.showDateAdvanceEdit = !1, d.hasNew = !1, $(".ngdialog-close").css("display", "inline-block"), d.$emit("hideDateAdvanceEdit", {
                        df_id: d.filterView.selected_opt,
                        scheme: d.globalDateFilterConfig.applySchemeId
                    })
                }, d.globalDateFilterConfig = {
                    isConfig: !1,
                    isEditing: !1,
                    isCreating: !1,
                    selectedScheme: null,
                    applySchemeId: "",
                    applyAdvDateList: [],
                    schemeList: [],
                    newScheme: null,
                    editMap: {},
                    status: {listLoading: !1, infoLoading: !1},
                    tip: l.instant("ownership.filter.globalSchemeTip"),
                    changeApply: function () {
                        var e = d.globalDateFilterConfig.schemeList,
                            t = s.getSchemeObj(e, d.globalDateFilterConfig.applySchemeId);
                        d.globalDateFilterConfig.info("", t), s.setLatestScheme(t.scheme_id)
                    },
                    enter: function () {
                        if (d.hasNew) return void t(d.tips["filter.pleaseSaveCurrentFilterItem"]);
                        d.globalDateFilterConfig.isConfig = !0, angular.element(".J-global-filter-model").addClass("global-date-config-modal"), d.globalDateFilterConfig.list("init")
                    },
                    exit: function () {
                        if (d.hasNew) return t(d.tips["filter.pleaseSaveCurrentFilterItem"]), !1;
                        var e = d.globalDateFilterConfig.schemeList;
                        d.globalDateFilterConfig.isConfig = !1, d.dateAdvanceList = angular.copy(d.globalDateFilterConfig.applyAdvDateList);
                        var i = s.getSchemeObj(e, d.globalDateFilterConfig.applySchemeId);
                        d.globalDateFilterConfig.info("", i), angular.element(".J-global-filter-model").removeClass("global-date-config-modal"), d.$broadcast("broadcastReloadSelectList", e)
                    },
                    list: function (e) {
                        function t() {
                            s.getDefaultSchemeInList(d.globalDateFilterConfig, e), d.globalDateFilterConfig.info("", d.globalDateFilterConfig.selectedScheme)
                        }

                        0 == d.globalDateFilterConfig.schemeList.length ? (d.globalDateFilterConfig.status.listLoading = !0, s.getSchemeList().then(function (e) {
                            d.globalDateFilterConfig.schemeList = e, t()
                        }).finally(function () {
                            d.globalDateFilterConfig.status.listLoading = !1
                        })) : t()
                    },
                    add: function () {
                        if (s.hasEditingScheme(d.globalDateFilterConfig.editMap) || d.globalDateFilterConfig.isCreating) return t(l.instant("ownership.filter.saveSchemeFirst")), !1;
                        d.globalDateFilterConfig.newScheme = angular.copy({
                            name: "",
                            scheme_id: "new_id"
                        }), d.globalDateFilterConfig.isCreating = !0, setTimeout(function () {
                            $("#J-new-name").focus()
                        }, 300)
                    },
                    edit: function (e, i, n) {
                        if (s.hasEditingScheme(d.globalDateFilterConfig.editMap) || d.globalDateFilterConfig.isCreating) return t(l.instant("ownership.filter.saveSchemeFirst")), !1;
                        var a = i.scheme_id;
                        d.globalDateFilterConfig.editMap = {}, d.globalDateFilterConfig.editMap[a] = !0, d.globalDateFilterConfig.isEditing = !0
                    },
                    save: function (n, a, r) {
                        var o = a.scheme_id, c = {}, u = d.globalDateFilterConfig.schemeList;
                        if (c = d.globalDateFilterConfig.isCreating ? d.globalDateFilterConfig.newScheme : a, !c.name) return t(l.instant("ownership.filter.requestName")), !1;
                        if (s.checkRepeatScheme(c, u)) return t(l.instant("ownership.filter.schemeRepeatName")), !1;
                        var p = s.getSchemeModifyParam(a);
                        d.globalDateFilterConfig.isCreating ? (delete p.scheme_id, i.adv_date_scheme.create(p).then(function (t) {
                            if (0 == t.status) {
                                var i = {
                                    scheme_id: t.result.scheme_id,
                                    name: c.name,
                                    user_id: e.userInfoObj && e.userInfoObj.userId || $.cookie("user_id")
                                };
                                d.globalDateFilterConfig.schemeList.push(i), d.globalDateFilterConfig.editMap[o] = !1, d.globalDateFilterConfig.isCreating = !1, d.globalDateFilterConfig.info("", i)
                            }
                        })) : i.adv_date_scheme.modify(p).then(function (e) {
                            0 == e.status && (d.globalDateFilterConfig.editMap[o] = !1, d.globalDateFilterConfig.isCreating = !1)
                        })
                    },
                    cancel: function (e, t, i) {
                        var n = t.scheme_id;
                        d.globalDateFilterConfig.editMap[n] = !1, d.globalDateFilterConfig.isCreating = !1, d.globalDateFilterConfig.isEditing = !1
                    },
                    info: function (e, i, n) {
                        if (d.hasNew) return t(d.tips["filter.pleaseSaveCurrentFilterItem"]), !1;
                        d.globalDateFilterConfig.selectedScheme = i, s.removeChartSchemeCache(i.scheme_id), d.dateAdvance.getList()
                    },
                    del: function (e, t, i) {
                        c.openConfirm({
                            template: "/static/partials/dialogTemplates/confirm-dialog.html",
                            className: "ngdialog-theme-default ngDialog-width-300",
                            scope: d,
                            data: {
                                title: l.instant("tips"),
                                message: l.instant("ownership.filter.delSchemeTip") + ": " + t.name + " ?"
                            }
                        }).then(function () {
                            d.globalDateFilterConfig.confirmDel(t, i)
                        })
                    },
                    confirmDel: function (e, t) {
                        var n = d.globalDateFilterConfig.selectedScheme, a = {scheme_id: e.scheme_id};
                        i.adv_date_scheme.delete(a).then(function (i) {
                            if (0 == i.status && (d.globalDateFilterConfig.schemeList.splice(t, 1), d.globalDateFilterConfig.editMap.new_id = !1, d.globalDateFilterConfig.isEditing = !1, s.removeChartSchemeCache(e.scheme_id), n.scheme_id == e.scheme_id)) {
                                var a = d.globalDateFilterConfig.schemeList;
                                a.length > 0 && (d.globalDateFilterConfig.selectedScheme = a[0], d.globalDateFilterConfig.info("", a[0]))
                            }
                        })
                    }
                }, o(["saveSuccess", "fail", "delSuccess", "filter.pleaseSaveCurrentFilterItem", "filter.checkSuccess", "filter.checkFailed", "filter.pleaseInputExpression", "filter.nullData", "chart.dateRangeInvalid", "filter.inputPositiveNumber", "chart.plzTypePositionInteger", "filter.changeScopeTip2", "filter.nullTitle", "filter.duplicatedNames", "filter.delTip"], d)
            }
        }
    }])
}, function (e, t, i) {
    "use strict";

    function n(e, t, n) {
        return {
            restrict: "EA", templateUrl: i(330), replace: !0, scope: {data: "="}, link: function (e, i, a) {
                e.showChart = "", e.$watch("data", function () {
                    var t = e.getChart();
                    switch (t && t.info ? t.info.chart_type : "") {
                        case"C310":
                            e.showChart = "card";
                            break;
                        case"C200":
                            e.showChart = "table";
                            break;
                        case"C271":
                        case"C272":
                        case"C273":
                            e.showChart = "map";
                            break;
                        default:
                            e.showChart = ""
                    }
                }), e.getChart = function () {
                    return n.get(e.data)
                }, e.getStyles = function () {
                    var t = e.getChart();
                    return t ? t.info.styles = t.info.styles || {} : {}
                }, e.saveChart = function (i) {
                    var n = e.getChart();
                    if (n) {
                        var a = n.info.dsh_id, o = n.info.chart_id, s = n.info.drill_level;
                        n.info.styles = i, n.updateInfo(n.info, !0);
                        var l = {dsh_id: a, ct_id: o, drill_level: s, edit_meta: (0, r.default)({styles: i})};
                        t.editMeta.modify(l)
                    }
                }, e.init = function (t, i) {
                    var n = e.getChart();
                    if (n) {
                        n.once("data", function () {
                            e.init(t, i)
                        });
                        var a = e.getStyles();
                        if (a[i]) {
                            if (void 0 === a.type) a.type = i; else if (a.type !== i) return;
                            t(a)
                        }
                    }
                }
            }
        }
    }

    var a = i(1), r = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(a);
    i(311), i(312), i(313), i(314), i(315), i(316), i(317), i(318), i(319), i(322), i(325), i(328), angular.module("BC.dashboard.core").directive("chartStyle", n), n.$inject = ["$rootScope", "commonService", "chartInstService"]
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t) {
            return {
                restrict: "EA",
                scope: {data: "=?", saveFunc: "&?", options: "="},
                templateUrl: "/static/dashboard-core/chart-style/components/alignmentStyle/alignmentStyle.html",
                replace: !0,
                link: function (e, i, n) {
                    function a(e) {
                        var t = {
                            left: {wrapperClass: "", iconClass: "ico-text-left"},
                            center: {wrapperClass: "", iconClass: "ico-text-center"},
                            right: {wrapperClass: "", iconClass: "ico-text-right"}
                        };
                        return t[e] && (t[e].wrapperClass = "active", t[e].iconClass = "ico-text-" + e + "-active"), t
                    }

                    e.$watch("data", function () {
                        e.alignmentConfig = a(e.data)
                    }), e.alignment = function (i) {
                        e.data === i ? e.data = "default" : e.data = i, e.alignmentConfig = a(e.data), t(function () {
                            e.saveFunc()
                        }, 0)
                    }
                }
            }
        }

        angular.module("BC.dashboard.core").directive("alignmentStyle", e), e.$inject = ["$rootScope", "$timeout"]
    }()
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            restrict: "EA",
            scope: {data: "=", saveFunc: "&", options: "="},
            templateUrl: "/static/dashboard-core/chart-style/components/colorStyle/colorStyle.html",
            replace: !0,
            link: function (e, t, i) {
                e.$watch("data", function () {
                    e.colorStyle = {backgroundColor: e.data}
                })
            }
        }
    }

    angular.module("BC.dashboard.core").directive("colorStyle", n), n.$inject = ["$rootScope", "$timeout"]
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t) {
            return {
                restrict: "EA",
                scope: {data: "=", saveFunc: "&?", options: "="},
                templateUrl: "/static/dashboard-core/chart-style/components/fontAdvStyle/fontAdvStyle.html",
                replace: !0,
                link: function (e, t, i) {
                    function n(e) {
                        return e ? {wrapperClass: "active", iconClass: "ico-text-bold-active"} : {
                            wrapperClass: "",
                            iconClass: "ico-text-bold"
                        }
                    }

                    function a(e) {
                        return e ? {wrapperClass: "active", iconClass: "ico-text-italic-active"} : {
                            wrapperClass: "",
                            iconClass: "ico-text-italic"
                        }
                    }

                    e.$watch("data", function () {
                        e.data = e.data || {}, e.boldConfig = n(e.data.bold), e.italicConfig = a(e.data.italic)
                    }), e.bold = function () {
                        e.data.bold = !e.data.bold, e.boldConfig = n(e.data.bold), e.saveFunc()
                    }, e.italic = function () {
                        e.data.italic = !e.data.italic, e.italicConfig = a(e.data.italic), e.saveFunc()
                    }
                }
            }
        }

        angular.module("BC.dashboard.core").directive("fontAdvStyle", e), e.$inject = ["$rootScope", "$timeout"]
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t) {
            return void 0 !== e && null !== e ? e : t
        }

        function t(t, i, n, a) {
            return {
                restrict: "EA",
                scope: {data: "=", saveFunc: "&?", options: "="},
                templateUrl: "/static/dashboard-core/chart-style/components/fontStyle/fontStyle.html",
                replace: !0,
                link: function (r, o, s) {
                    i(function () {
                        function i(e) {
                            var t = Array.prototype.slice.call(arguments, 1);
                            if (void 0 === e) for (var i = 0, n = t.length; i < n; i++) {
                                var a = t[i];
                                if (void 0 !== a) {
                                    e = a;
                                    break
                                }
                            }
                            return e
                        }

                        if (r.data) {
                            var o = r.data, s = r.options || {}, l = (e(s.useInherit, !0), e(s.showFontFamily, !0)),
                                c = e(s.defaultFontFamily), d = e(s.showFontSize, !0), u = e(s.defaultFontSize),
                                p = e(s.showColor, !0), f = e(s.defaultColor), h = e(s.showAdaption, !1),
                                g = e(s.showAlpha, !0), m = e(s.clickoutFiresChange, !1), v = e(s.chartFontFamily, a),
                                y = e(s.chartFontSize, n), b = e(s.formatter, {});
                            b.fontFamily = e(b.fontFamily, "fontFamily"), b.fontSize = e(b.fontSize, "fontSize"), b.color = e(b.color, "color"), r.formatter = b, "en" === t.language && (v[0].name = "Default", y[0].name = "Default"), o[b.fontFamily] = i(o[b.fontFamily], c, a[0].value), o[b.fontSize] = i(o[b.fontSize], u, n[0].value), o[b.color] = i(o[b.color], f), r.style = {
                                showFontFamily: l,
                                chartFontFamily: v,
                                showFontSize: d,
                                chartFontSize: y,
                                showColor: p,
                                colorPickerOpt: {showAdaption: h, showAlpha: g, clickoutFiresChange: m}
                            }
                        }
                    }, 0)
                }
            }
        }

        angular.module("BC.dashboard.core").directive("fontStyle", t), t.$inject = ["$rootScope", "$timeout", "chartFontSize", "chartFontFamily"]
    }()
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        return void 0 !== e && null !== e ? e : t
    }

    function a(e) {
        return {
            restrict: "EA",
            scope: {valSelected: "=", valChange: "&", options: "="},
            templateUrl: "/static/dashboard-core/chart-style/components/lineStyle/lineStyle.html",
            replace: !0,
            link: function (t, i, a) {
                function o() {
                    var e = t.options || {}, i = n(e.lineStyleShowList), a = n(e.clickDisabled, !1), o = void 0;
                    o = i ? _.filter(r, function (e) {
                        return i.indexOf(e.name) !== -1
                    }) : r, t.viewData = {
                        lineStyleList: o,
                        selectedLineStyle: "",
                        showList: !1,
                        selectLineStyle: l,
                        toggleStyleList: c
                    }, t.clickDisabled = a
                }

                function s() {
                    t.viewData.lineStyleList.forEach(function (e) {
                        e.value == t.valSelected && (t.viewData.selectedLineStyle = e.map)
                    })
                }

                function l(i) {
                    t.valSelected != i.value && (t.viewData.selectedLineStyle = i.map, t.valSelected = i.value, e(function () {
                        t.valChange && t.valChange()
                    }, 0)), t.viewData.showList = !1
                }

                function c() {
                    t.clickDisabled || (t.viewData.showList = !t.viewData.showList)
                }

                e(function () {
                    o(), s(), t.$watch(function () {
                        return t.valSelected
                    }, function (e) {
                        s()
                    })
                }, 0)
            }
        }
    }

    angular.module("BC.dashboard.core").directive("lineStyle", a);
    var r = [{name: "Solid", value: "Solid", map: "solid"}, {
        name: "ShortDash",
        value: "ShortDash",
        map: "short-dash"
    }, {name: "ShortDot", value: "ShortDot", map: "short-dot"}, {
        name: "ShortDashDot",
        value: "ShortDashDot",
        map: "short-dash-dot"
    }, {name: "ShortDashDotDot", value: "ShortDashDotDot", map: "short-dash-dot-dot"}, {
        name: "Dot",
        value: "Dot",
        map: "dot"
    }, {name: "Dash", value: "Dash", map: "dash"}, {
        name: "LongDash",
        value: "LongDash",
        map: "long-dash"
    }, {name: "DashDot", value: "DashDot", map: "dash-dot"}, {
        name: "LongDashDot",
        value: "LongDashDot",
        map: "long-dash-dot"
    }, {name: "LongDashDotDot", value: "LongDashDotDot", map: "long-dash-dot-dot"}];
    a.$inject = ["$timeout"]
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            restrict: "EA",
            scope: {data: "=", list: "=", saveFunc: "&", options: "="},
            templateUrl: "/static/dashboard-core/chart-style/components/skinStyle/skinStyle.html",
            replace: !0,
            link: function (e, i, n) {
                function a() {
                    return e.expend ? "ico-triangle-up" : "ico-triangle-down"
                }

                e.expend = !1, e.triangleClick = function () {
                    e.expend = !e.expend, e.triangleClass = a()
                }, e.changeSkin = function (i) {
                    e.data = i, t(function () {
                        e.saveFunc()
                    }, 0)
                }
            }
        }
    }

    angular.module("BC.dashboard.core").directive("skinStyle", n), n.$inject = ["$rootScope", "$timeout"]
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        return void 0 !== e && null !== e ? e : t
    }

    function a(e) {
        return {
            restrict: "EA",
            scope: {data: "=", saveFunc: "&?", options: "="},
            templateUrl: "/static/dashboard-core/chart-style/components/sliderStyle/sliderStyle.html",
            replace: !0,
            link: function (e, t, i) {
                function a(i) {
                    void 0 !== i && null !== i || (i = 0), i !== i && (i = 0), i < 0 ? i = 0 : i > 1 && (i = 1);
                    var n = 100 * i + "%";
                    e.valueStyle.width = n, e.buttonStyle.left = (t.width() - 12) * i + "px", e.per = i
                }

                var r = t.width();
                e.valueStyle = {width: "0%"}, e.buttonStyle = {left: "0%"}, e.per = 0;
                var o = e.options || {}, s = n(o.range, [0, 1]);
                e.$watch("data", function () {
                    var t = +e.data;
                    _.isNumber(t) || (t = 0), a((t - s[0]) / (s[1] - s[0]))
                }), e.mousedown = function (t) {
                    t.stopPropagation();
                    var i = t.clientX, n = e.per, o = function (t) {
                        var o = t.clientX, s = o - i + n * r, l = s / r;
                        e.$apply(function () {
                            a(l)
                        })
                    }, l = function t() {
                        $(document).off("mousemove", o), $(document).off("mouseup", t), e.$apply(function () {
                            e.data = e.per * (s[1] - s[0]) + s[0]
                        }), e.saveFunc()
                    };
                    $(document).on("mousemove", o), $(document).on("mouseup", l)
                }
            }
        }
    }

    angular.module("BC.dashboard.core").directive("sliderStyle", a), a.$inject = ["$timeout"]
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t) {
            return {
                restrict: "EA",
                scope: {data: "=?", saveFunc: "&?", options: "="},
                templateUrl: "/static/dashboard-core/chart-style/components/editableTextStyle/editableTextStyle.html",
                replace: !0,
                link: function (e, t, i) {
                    e.showText = !0;
                    var n = e.options || {}, a = n.range || [0, 1];
                    e.$watch("data", function () {
                        e.editData = parseInt(100 * e.data)
                    }), e.toggle = function () {
                        e.showText = !e.showText, setTimeout(function () {
                            t.find("input").focus()
                        }, 0)
                    }, e.save = function () {
                        var t = +e.editData;
                        t !== t && (t = parseInt(100 * e.data)), t /= 100, t > a[1] ? t = a[1] : t < a[0] && (t = a[0]), e.editData = 100 * t, e.data = t, e.showText = !0, e.saveFunc()
                    }
                }
            }
        }

        angular.module("BC.dashboard.core").directive("editableTextStyle", e).filter("percentageFormatter", function () {
            return function (e) {
                return parseInt(100 * e) + "%"
            }
        }), e.$inject = ["$rootScope", "$timeout"]
    }()
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            restrict: "EA", templateUrl: i(321), replace: !0, link: function (e, t, i) {
                function n(t) {
                    t = _.cloneDeep(t), e.materialInfo = {
                        show: !1,
                        cols: t.cols,
                        list: t.materials,
                        theme: t.theme,
                        name: function () {
                            return t.materials ? t.style.material ? t.style.material.name : t.materials[0].name : "无素材"
                        }()
                    }
                }

                function a(t) {
                    var i = {card: t};
                    e.saveChart(i)
                }

                function s(t) {
                    var i = t.card, a = t.defaultStyles;
                    e.style = _.cloneDeep(i), e.skinList = (0, o.getSkinList)(r.default, a);
                    var s = _.find(e.skinList, function (e) {
                        return e.no == i.skinNo
                    });
                    e.skin = s, s && n(s), i.material && (e.materialInfo.name = i.material.name)
                }

                e.style = null, e.skinList = null, e.materialInfo = {
                    list: [],
                    show: !1,
                    name: "无素材",
                    cols: 0
                }, e.clickMaterialList = function (e) {
                    e.stopPropagation()
                }, e.clickMaterialItem = function (t, i) {
                    t.stopPropagation(), e.materialInfo.name = i.name, e.style.material = i, e.saveStyle()
                }, e.fontStyleOptions = {
                    chartFontFamily: [{name: "微软雅黑", value: "Microsoft YaHei"}, {
                        name: "宋体",
                        value: "SimSun"
                    }, {name: "黑体", value: "Heiti"}, {name: "华文细黑", value: "STXihei"}, {
                        name: "Verdana",
                        value: "Verdana"
                    }, {name: "Arial", value: "Arial"}, {
                        name: "Times New Roman",
                        value: "Times New Roman"
                    }, {name: "Times", value: "Times"}, {
                        name: "MS Sans Serif",
                        value: "MS Sans Serif"
                    }, {name: "Microsoft Yahei", value: "Microsoft Yahei"}],
                    chartFontSize: [{name: "80%", value: .8}, {name: "90%", value: .9}, {
                        name: "100%",
                        value: 1
                    }, {name: "110%", value: 1.1}, {name: "120%", value: 1.2}, {
                        name: "130%",
                        value: 1.3
                    }, {name: "140%", value: 1.4}, {name: "150%", value: 1.5}],
                    showAlpha: !0
                }, e.valueFontStyleOptions = {
                    chartFontFamily: [{name: "默认", value: "inherit"}, {
                        name: "微软雅黑",
                        value: "Microsoft YaHei"
                    }, {name: "宋体", value: "SimSun"}, {name: "黑体", value: "Heiti"}, {
                        name: "华文细黑",
                        value: "STXihei"
                    }, {name: "Verdana", value: "Verdana"}, {name: "Avenir", value: "Avenir"}, {
                        name: "Arial",
                        value: "Arial"
                    }, {name: "Times New Roman", value: "Times New Roman"}, {
                        name: "Times",
                        value: "Times"
                    }, {name: "MS Sans Serif", value: "MS Sans Serif"}, {
                        name: "Microsoft Yahei",
                        value: "Microsoft Yahei"
                    }],
                    chartFontSize: [{name: "50%", value: .5}, {name: "60%", value: .6}, {
                        name: "70%",
                        value: .7
                    }, {name: "80%", value: .8}, {name: "90%", value: .9}, {name: "100%", value: 1}, {
                        name: "110%",
                        value: 1.1
                    }, {name: "120%", value: 1.2}, {name: "130%", value: 1.3}, {
                        name: "140%",
                        value: 1.4
                    }, {name: "150%", value: 1.5}],
                    showAlpha: !0
                }, e.changeSkin = function () {
                    var t = e.skin;
                    n(t), e.style = _.cloneDeep(t.style), e.style.skinNo = t.no, t.materials && t.materials.length > 0 && (e.style.material = t.materials[0]), t.isDefault ? a() : a(e.style)
                }, e.saveStyle = function () {
                    a(e.style)
                }, e.$watch("data", function (t) {
                    e.init(s, "card")
                })
            }
        }
    }

    var a = i(320), r = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(a), o = i(91);
    angular.module("BC.dashboard.core").directive("cardStyle", n), n.$inject = ["$rootScope", "$timeout"]
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = i(169), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n), r = {
        light: [],
        dark: [{no: 0, isDefault: !1, name: a.default.instant("69022c77"), style: {title: {bold: !0}}}, {
            no: 1,
            iconClass: "ico-card-style1",
            isDefault: !1,
            cols: 2,
            materials: [{
                name: "素材一",
                iconClass: "ico-card-skin-1-s",
                nameClass: "mt8",
                options: {
                    type: "rotateCircle",
                    animation: !0,
                    mainImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-1-main_5ab0904.svg",
                    outlineImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-1-outline_8efef0a.svg"
                }
            }, {
                name: "素材二",
                iconClass: "ico-card-skin-2-s",
                nameClass: "mt8",
                options: {
                    type: "rotateCircle",
                    animation: !0,
                    mainImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-2-main_dee9258.svg",
                    outlineImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-2-outline_46e9c19.svg"
                }
            }, {
                name: "素材三",
                iconClass: "ico-card-skin-3-s",
                nameClass: "mt8",
                options: {
                    type: "rotateCircle",
                    animation: !0,
                    mainImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-3-main_f6fa60c.svg",
                    outlineImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-3-outline_54dae09.svg"
                }
            }, {
                name: "素材四",
                iconClass: "ico-card-skin-4-s",
                nameClass: "mt8",
                options: {
                    type: "rotateCircle",
                    animation: !0,
                    mainImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-4-main_161956d.svg",
                    outlineImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-4-outline_6f6781d.svg"
                }
            }],
            style: {title: {bold: !0}}
        }, {
            no: 2,
            iconClass: "ico-card-style2",
            isDefault: !1,
            cols: 2,
            materials: [{
                name: "素材一",
                iconClass: "ico-card-skin2-1-s",
                options: {type: "twoBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin2-1_18280d4.svg"}
            }, {
                name: "素材二",
                iconClass: "ico-card-skin2-2-s",
                options: {type: "twoBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin2-2_01cfb48.svg"}
            }],
            style: {
                title: {
                    color: "rgba(127,170,255,0.8)", bold: !0
                }, value: {color: "#51A4E4"}
            }
        }, {
            no: 3,
            iconClass: "ico-card-style3",
            isDefault: !1,
            cols: 2,
            materials: [{
                name: "素材一",
                iconClass: "ico-card-skin3-1-s",
                options: {type: "leftLongBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin3-1_c57676a.svg"}
            }, {
                name: "素材二",
                iconClass: "ico-card-skin3-2-s",
                options: {type: "leftLongBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin3-2_d8d361b.svg"}
            }],
            style: {title: {bold: !0}, value: {color: "#3BA2FF"}}
        }, {
            no: 4,
            iconClass: "ico-card-style4",
            isDefault: !1,
            showSpacing: !0,
            cols: 1,
            materials: [{
                name: "素材一",
                iconClass: "ico-card-skin4-1-s",
                options: {type: "longBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin4-1_2d9a3b7.svg"}
            }, {
                name: "素材二",
                iconClass: "ico-card-skin4-2-s",
                options: {type: "longBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin4-2_964fcbd.svg"}
            }, {
                name: "素材三",
                iconClass: "ico-card-skin4-3-s",
                options: {type: "longBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin4-3_a436574.svg"}
            }, {
                name: "素材四",
                iconClass: "ico-card-skin4-4-s",
                options: {type: "longBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin4-4_e89929c.svg"}
            }],
            style: {spacing: .1, title: {color: "#7ED2FA", bold: !0}}
        }, {
            no: 5,
            iconClass: "ico-card-style5",
            isDefault: !1,
            cols: 1,
            materials: [{
                name: "素材一",
                iconClass: "ico-card-skin5-1-s",
                options: {type: "rightBlock", image: "//m1.bdp.cn/static/theme/dark/svg/card-skin5-1_13878f3.svg"}
            }],
            style: {spacing: 0, title: {bold: !0}, value: {color: "#EC9268"}}
        }, {
            no: 6,
            iconClass: "ico-card-style6",
            isDefault: !1,
            cols: 2,
            materials: [{
                name: "素材一",
                iconClass: "ico-card-skin-6-s",
                nameClass: "mt8",
                options: {
                    type: "circle",
                    animation: !1,
                    mainImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-6-main_ac1ea86.svg",
                    outlineImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-6-outline_9b51f56.svg"
                }
            }, {
                name: "素材二",
                iconClass: "ico-card-skin-5-s",
                nameClass: "mt8",
                options: {
                    type: "circle",
                    animation: !0,
                    mainImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-5-main_27c9c0a.svg",
                    outlineImage: "//m1.bdp.cn/static/theme/dark/svg/card-skin-5-outline_9101212.svg"
                }
            }],
            style: {title: {color: "#F56E40", bold: !0}, updown: {color: "#37B8E9"}}
        }]
    };
    t.default = r
}, function (e, t) {
    e.exports = "/dist/static/dashboard-core/chart-style/cardStyle/cardStyle.html"
}, function (e, t, i) {
    "use strict";

    function n(e, t, n) {
        return {
            restrict: "EA", templateUrl: i(324), replace: !0, link: function (e, t, i) {
                function n(t) {
                    var i = {map: t};
                    e.saveChart(i)
                }

                function a(t) {
                    var i = t.map, n = t.defaultStyles;
                    if (i) {
                        e.style = _.cloneDeep(i);
                        var a = (0, o.getSkinList)(r.default, n);
                        e.skinList = a
                    }
                }

                e.style = null, e.skinList = null, e.lineWidthList = [{name: "0px", value: 0}, {
                    name: "0.5px",
                    value: .5
                }, {name: "0.75px", value: .75}, {name: "1px", value: 1}, {name: "1.5px", value: 1.5}, {
                    name: "2px",
                    value: 2
                }], e.shadowXYList = [{name: "0px", value: 0}, {name: "1px", value: 1}, {
                    name: "2px",
                    value: 2
                }, {name: "3px", value: 3}, {name: "4px", value: 4}, {
                    name: "5px",
                    value: 5
                }], e.changeSkin = function () {
                    var t = e.skin;
                    e.style = _.cloneDeep(t.style), t.isDefault ? n() : n(e.style)
                }, e.saveStyle = function () {
                    n(e.style)
                }, e.$watch("data", function (t) {
                    e.init(a, "map")
                })
            }
        }
    }

    var a = i(323), r = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(a), o = i(91);
    angular.module("BC.dashboard.core").directive("mapStyle", n), n.$inject = ["$rootScope", "$timeout", "chartEditService"]
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = {
        light: [],
        dark: [{iconClass: "ico-map-skin-0", isDefault: !1}, {
            iconClass: "ico-map-skin-1",
            isDefault: !1,
            style: {
                background: "rgba(79, 126, 255, 0.3)",
                border: {color: "#62BDFF", width: 2},
                splitLine: {color: "#4E83D0", width: 1},
                shadow: {color: "rgba(49, 97, 221, 0.5)", x: 4, y: 4, spread: 0, blur: 0}
            }
        }, {
            iconClass: "ico-map-skin-2",
            isDefault: !1,
            style: {
                background: "#06176A",
                border: {width: 2, color: "#4DBFFF"},
                splitLine: {width: 1, color: "#4E83D0"},
                shadow: {x: 4, y: 4, blur: 5, spread: 0, color: "rgba(40, 108, 255, 0.5)"}
            }
        }, {
            iconClass: "ico-map-skin-3",
            isDefault: !1,
            style: {
                background: "rgba(0, 0, 0, 0.1)",
                border: {width: 2, color: "#10D4D5"},
                splitLine: {width: 1, color: "#10D4D5"},
                shadow: {x: 4, y: 4, blur: 2, spread: 0, color: "rgba(30, 247, 233, 0.4)"}
            }
        }]
    };
    t.default = n
}, function (e, t) {
    e.exports = "/dist/static/dashboard-core/chart-style/mapStyle/mapStyle.html"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e, t, n) {
        return {
            restrict: "EA", templateUrl: i(327), replace: !0, link: function (e, t, i) {
                function n(t) {
                    return function () {
                        e.style[t.fontBold] = e[t.fontAdvConfig].bold ? "bold" : "normal", e.style[t.fontItalic] = e[t.fontAdvConfig].italic ? "italic" : "normal", e.saveStyle()
                    }
                }

                function a(t) {
                    var i;
                    i = t.horizontalLineShow ? {class: "active", iconClass: "ico-grid-hor-active"} : {
                        class: "",
                        iconClass: "ico-grid-hor"
                    }, e.gridlineHorConfig = i
                }

                function r(t) {
                    var i;
                    i = t.verticalLineShow ? {class: "active", iconClass: "ico-grid-ver-active"} : {
                        class: "",
                        iconClass: "ico-grid-ver"
                    }, e.gridlineVerConfig = i
                }

                function s(t) {
                    var i, n;
                    t.horizontalLineShow && (i = t.horizontalLineColor, n = C[t.horizontalLineStyle]), t.verticalLineShow && (i = t.verticalLineColor, n = C[t.verticalLineStyle]), void 0 === n && (n = C[1]);
                    var a = {color: i, lineStyle: n, lineOptions: {lineStyleShowList: (0, o.default)(k)}};
                    e.gridlineConfig = a
                }

                function d(t) {
                    t.setLineHeight ? e.lineHeight = t.headerRowHeight + "px" : e.lineHeight = "default"
                }

                function u(e) {
                    void 0 === e.setInterlacing ? e.setInterlacing = !0 : e.setInterlacing || (e.originBackgroundEvenColor || (e.originBackgroundEvenColor = e.backgroundEvenColor), e.originEvenFontColor || (e.originEvenFontColor = e.evenFontColor), e.backgroundEvenColor = e.backgroundOddColor, e.evenFontColor = e.oddFontColor)
                }

                function p(t) {
                    return function (i) {
                        var n = !1, a = !1;
                        "bold" === i[t.fontBold] && (n = !0), "italic" === i[t.fontItalic] && (a = !0), e[t.fontAdvConfig] = {
                            bold: n,
                            italic: a
                        }
                    }
                }

                function f(e) {
                    a(e), r(e), s(e), d(e), u(e), S(e), T(e), D(e), L(e)
                }

                function h(t) {
                    var i = {table: t};
                    e.saveChart(i)
                }

                function g(t) {
                    var i = t.table, n = t.defaultStyles;
                    if (i) {
                        e.style = _.cloneDeep(i);
                        var a = (0, c.getSkinList)(l.default, n);
                        e.skinList = a, f(e.style)
                    }
                }

                e.style = null, e.skinList = null, e.gridlineHorConfig = null, e.gridlineVerConfig = null, e.gridlineConfig = null, e.fontAdvConfig = null, e.headerFontAdvConfig = null, e.colSummaryFontAdvConfig = null, e.lineHeightList = [{
                    name: "自适应",
                    value: "default"
                }, {name: "28px", value: "28px"}, {name: "32px", value: "32px"}, {
                    name: "40px",
                    value: "40px"
                }, {name: "48px", value: "48px"}, {name: "56px", value: "56px"}], e.lineHeight = void 0;
                var m = [{name: "10px", value: "10px"}, {name: "11px", value: "11px"}, {
                        name: "12px",
                        value: "12px"
                    }, {name: "13px", value: "13px"}, {name: "14px", value: "14px"}, {
                        name: "15px",
                        value: "15px"
                    }, {name: "16px", value: "16px"}, {name: "18px", value: "18px"}, {
                        name: "20px",
                        value: "20px"
                    }, {name: "24px", value: "24px"}, {name: "32px", value: "32px"}, {name: "36px", value: "36px"}],
                    v = [{name: "微软雅黑", value: "Microsoft YaHei"}, {name: "宋体", value: "SimSun"}, {
                        name: "黑体",
                        value: "Heiti"
                    }, {name: "华文细黑", value: "STXihei"}, {name: "Verdana", value: "Verdana"}, {
                        name: "Arial",
                        value: "Arial"
                    }, {name: "Times New Roman", value: "Times New Roman"}, {
                        name: "Times",
                        value: "Times"
                    }, {name: "MS Sans Serif", value: "MS Sans Serif"}, {
                        name: "Microsoft Yahei",
                        value: "Microsoft Yahei"
                    }], y = {fontBold: "fontBold", fontItalic: "fontItalic", fontAdvConfig: "fontAdvConfig"}, b = {
                        fontBold: "headerFontBold",
                        fontItalic: "headerFontItalic",
                        fontAdvConfig: "headerFontAdvConfig"
                    }, w = {fontBold: "mergeFontBold", fontItalic: "mergeFontItalic", fontAdvConfig: "mergeFontAdvConfig"},
                    x = {
                        fontBold: "colSummaryFontBold",
                        fontItalic: "colSummaryFontItalic",
                        fontAdvConfig: "colSummaryFontAdvConfig"
                    };
                e.fontOptions = {
                    formatter: {fontSize: "fontSize", fontFamily: "fontFamily", color: "oddFontColor"},
                    chartFontSize: m,
                    chartFontFamily: v
                }, e.headerFontOptions = {
                    formatter: {
                        fontSize: "headerFontSize",
                        fontFamily: "headerFontFamily",
                        color: "headerFontColor"
                    }, chartFontSize: m, chartFontFamily: v
                }, e.mergeFontOptions = {
                    formatter: {
                        fontSize: "mergeFontSize",
                        fontFamily: "mergeFontFamily",
                        color: "mergeFontColor"
                    }, chartFontSize: m, chartFontFamily: v
                }, e.colSummaryFontOptions = {
                    formatter: {
                        fontSize: "colSummaryFontSize",
                        fontFamily: "colSummaryFontFamily",
                        color: "colSummaryFontColor"
                    }, chartFontSize: m, chartFontFamily: v
                };
                var C = {1: "Solid", 3: "ShortDash", 4: "ShortDot", 9: "ShortDashDot", 11: "ShortDashDotDot"},
                    k = function () {
                        var e = {};
                        for (var t in C) e[C[t]] = +t;
                        return e
                    }();
                e.changeGridlineHorConfig = function () {
                    e.style.horizontalLineShow = !e.style.horizontalLineShow, e.style.horizontalLineColor = e.gridlineConfig.color, e.style.horizontalLineStyle = k[e.gridlineConfig.lineStyle], a(e.style), e.saveStyle()
                }, e.changeGridlineVerConfig = function () {
                    e.style.verticalLineShow = !e.style.verticalLineShow, e.style.verticalLineColor = e.gridlineConfig.color, e.style.verticalLineStyle = k[e.gridlineConfig.lineStyle], r(e.style), e.saveStyle()
                }, e.changeGridlineConfig = function () {
                    e.style.horizontalLineColor = e.gridlineConfig.color, e.style.verticalLineColor = e.gridlineConfig.color, e.style.horizontalLineStyle = k[e.gridlineConfig.lineStyle], e.style.verticalLineStyle = k[e.gridlineConfig.lineStyle], e.saveStyle()
                }, e.changeBackgroundColor = function () {
                    e.style.bgColor = e.style.backgroundOddColor, e.style.setInterlacing || (e.style.backgroundEvenColor = e.style.backgroundOddColor), e.saveStyle()
                }, e.changeFont = function () {
                    e.style.setInterlacing || (e.style.evenFontColor = e.style.oddFontColor), "inherit" == e.style.fontSize && (e.style.fontSize = "12px"), "inherit" === e.style.fontFamily && (e.style.fontFamily = "Arial"), e.changeLineHeight()
                }, e.changeFontAdv = n(y), e.changeHeaderFontAdv = n(b), e.changeMergeFontAdv = n(w), e.changeColSummaryFontAdv = n(x), e.changeLineHeight = function () {
                    var t = void 0, i = void 0;
                    "default" == e.lineHeight ? (t = i = parseFloat(e.style.fontSize) + 20, e.style.setLineHeight = !1) : (t = i = parseFloat(e.lineHeight), e.style.setLineHeight = !0), e.style.headerRowHeight = t, e.style.rowHeight = i, e.saveStyle()
                }, e.changeHeaderFont = function () {
                    "inherit" == e.style.headerFontSize && (e.style.headerFontSize = "12px"), "inherit" === e.style.headerFontFamily && (e.style.headerFontFamily = "Arial"), e.saveStyle()
                }, e.changeInterlacing = function () {
                    var t = e.style;
                    t.setInterlacing ? (t.originBackgroundEvenColor && (t.backgroundEvenColor = t.originBackgroundEvenColor), t.originEvenFontColor && (t.evenFontColor = t.originEvenFontColor)) : (t.originBackgroundEvenColor = t.backgroundEvenColor, t.originEvenFontColor = t.evenFontColor, t.backgroundEvenColor = t.backgroundOddColor, t.evenFontColor = t.oddFontColor), e.saveStyle()
                }, e.changeSkin = function () {
                    var t = e.skin;
                    e.style = _.cloneDeep(t.style), f(e.style), h(t.isDefault ? void 0 : e.style)
                }, e.saveStyle = function () {
                    h(e.style)
                };
                var S = p(y), T = p(b), D = p(w), L = p(x);
                e.$watch("data", function (t) {
                    e.init(g, "table")
                })
            }
        }
    }

    var r = i(41), o = n(r), s = i(326), l = n(s), c = i(91);
    angular.module("BC.dashboard.core").directive("tableStyle", a), a.$inject = ["$rootScope", "$timeout", "chartEditService"]
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = i(169), a = (function (e) {
        e && e.__esModule ? e : {default: e}
    }(n), {
        light: [],
        dark: [{iconClass: "ico-table-skin-0", isDefault: !1}, {
            iconClass: "ico-table-skin-1",
            isDefault: !1,
            style: {
                headerBgColor: "rgba(20, 65, 109, 0.8)",
                headerFontColor: "#FFF",
                headerFontAlignment: "left",
                borderLineShow: !0,
                borderLineColor: "#20345B",
                backgroundOddColor: "transparent",
                backgroundEvenColor: "rgba(20, 65, 109, 0.4)",
                fontAlignment: "left",
                oddFontColor: "#37B8E9",
                evenFontColor: "#37B8E9",
                horizontalLineShow: !1,
                verticalLineColor: "#20345B",
                mergeBgColor: "transparent",
                mergeFontColor: "#37B8E9",
                colSummaryColor: "transparent",
                colSummaryFontColor: "#96E2FF"
            }
        }, {
            iconClass: "ico-table-skin-2",
            isDefault: !1,
            style: {
                headerFontItalic: "bold",
                headerBgColor: "transparent",
                headerFontColor: "#189696",
                headerFontAlignment: "left",
                borderLineShow: !0,
                borderLineColor: "#3B3E50",
                backgroundOddColor: "transparent",
                backgroundEvenColor: "transparent",
                fontAlignment: "left",
                oddFontColor: "#FFF",
                evenFontColor: "#2EE8E8",
                horizontalLineColor: "#3B3E50",
                verticalLineColor: "#3B3E50",
                mergeBgColor: "transparent",
                mergeFontColor: "#2EE8E8",
                colSummaryColor: "rgba(28, 225, 225, 0.06)",
                colSummaryFontColor: "#2EE8E8"
            }
        }, {
            iconClass: "ico-table-skin-3",
            isDefault: !1,
            style: {
                headerBgColor: "transparent",
                headerFontColor: "#FFFFFF",
                headerFontAlignment: "left",
                borderLineShow: !1,
                backgroundOddColor: "transparent",
                backgroundEvenColor: "transparent",
                fontAlignment: "left",
                oddFontColor: "#7ED2FA",
                evenFontColor: "#7ED2FA",
                horizontalLineColor: "#175E65",
                verticalLineShow: !1,
                mergeBgColor: "transparent",
                mergeFontColor: "#7ED2FA",
                colSummaryColor: "transparent",
                colSummaryFontColor: "#25CADA"
            }
        }]
    });
    t.default = a
}, function (e, t) {
    e.exports = "/dist/static/dashboard-core/chart-style/tableStyle/tableStyle.html"
}, function (e, t, i) {
    i(329).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "chartStyle_dcd4b5bd.css"
}, function (e, t) {
    e.exports = "/dist/static/dashboard-core/chart-style/chartStyle.html"
}, function (e, t, i) {
    "use strict";
    var n = i(41), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("BC.dashboard.core").directive("lazyContainer", [function () {
        function e(e) {
            var i = e.data("__uid");
            return i || e.data("__uid", i = "" + ++t), i
        }

        var t = 0;
        return {
            restrict: "EA", controller: ["$scope", "$element", function (t, i) {
                function n(t) {
                    var i = angular.element(this), n = e(i);
                    i.css("opacity", 1), t.ready = !0, s.hasOwnProperty(n) && delete s[n]
                }

                function r(e) {
                    var t, n, a = i[0].getBoundingClientRect(), r = e[0].getBoundingClientRect();
                    return r.bottom + 50 >= a.top && r.top - 50 <= a.bottom && (n = !0), r.right + 50 >= a.left && r.left - 50 <= a.right && (t = !0), t && n
                }

                function o() {
                    (0, a.default)(s).forEach(function (e) {
                        var t = s[e], i = t.iElement, n = t.iScope;
                        r(i) && i.attr("src", n.lazyTemplate ? n.lazySrc.image : n.lazySrc)
                    })
                }

                var s = {};
                this.addImg = function (t, i, a) {
                    i.bind("load", n.bind(i, t.lazyTemplate ? t.lazySrc : {})), t.$watch("lazySrc", function () {
                        var n = "1s";
                        if (null != t.animateSpeed && (n = t.animateSpeed), r(i)) t.animateVisible && i.css({
                            "background-color": "#fff",
                            opacity: 0,
                            "-webkit-transition": "opacity " + n,
                            transition: "opacity " + n
                        }), i.attr("src", t.lazyTemplate ? t.lazySrc.image : t.lazySrc); else {
                            var a = e(i);
                            i.css({
                                "background-color": "#fff",
                                opacity: 0,
                                "-webkit-transition": "opacity " + n,
                                transition: "opacity " + n
                            }), s[a] = {iElement: i, iScope: t}
                        }
                    }), t.$on("$destroy", function () {
                        i.unbind("load");
                        var t = e(i);
                        s.hasOwnProperty(t) && delete s[t]
                    })
                }, i.bind("scroll", o), i.bind("resize", o)
            }]
        }
    }]).directive("lazySrc", [function () {
        return {
            restrict: "A",
            require: "^lazyContainer",
            scope: {lazySrc: "=", lazyTemplate: "=", animateVisible: "@", animateSpeed: "@"},
            link: function (e, t, i, n) {
                n.addImg(e, t, i)
            }
        }
    }])
}, function (e, t, i) {
    e.exports = {default: i(587), __esModule: !0}
}, function (e, t, i) {
    i(334).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "all-async_3f70ef08.css"
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        var i = location.protocol, n = "bws.bdp.cn";
        0 == n.indexOf(":") && (n = location.hostname + "bws.bdp.cn"), n.match(/^https?:/) || (n = i + "//" + n);
        var a = n + "/api/chat";
        e._websocketChartMessage_ = {}, e._websocketChartMessage_.lock = !1, e._websocketChartMessage_.lock || setTimeout(function () {
            e.socketConn = t.connect(a, {
                onMessage: function (t) {
                    t = t || {}, t._t = new Date, e.$broadcast("_websocketChartMessage_", t)
                }, onOpen: function () {
                }, onClose: function () {
                }
            })
        }, 100)
    }

    n.$inject = ["$rootScope", "webSocket"], e.exports = {
        apply: function (e) {
            e.run(n)
        }
    }
}, , function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e, t, i, n) {
        i && (0, f.default)(e, t, {
            enumerable: i.enumerable,
            configurable: i.configurable,
            writable: i.writable,
            value: i.initializer ? i.initializer.call(n) : void 0
        })
    }

    function r(e, t, i, n, a) {
        var r = {};
        return Object.keys(n).forEach(function (e) {
            r[e] = n[e]
        }), r.enumerable = !!r.enumerable, r.configurable = !!r.configurable, ("value" in r || r.initializer) && (r.writable = !0), r = i.slice().reverse().reduce(function (i, n) {
            return n(e, t, i) || i
        }, r), a && void 0 !== r.initializer && (r.value = r.initializer ? r.initializer.call(a) : void 0, r.initializer = void 0), void 0 === r.initializer && (Object.defineProperty(e, t, r), r = null), r
    }

    function o(e) {
        return function (t, i, n) {
            var a = n.value;
            return n.value = function () {
                var t = this;
                return a.apply(this, arguments).then(function (i) {
                    var n = t.folderId || t.tbId;
                    return (t.wtbTree || t).changeBroadcast({result: i || {}, id: n, arguments: arguments, event: e}), i
                })
            }, n
        }
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbTree = void 0;
    var s, l, c, d, u, p = i(89), f = n(p), h = i(332), g = n(h), m = i(64), v = n(m), y = i(65), b = n(y), w = i(391),
        x = n(w), C = i(84), k = n(C), S = i(13), T = n(S), D = i(17), L = n(D);
    t.wtbTreeBroadcast = o;
    var A = i(170), E = i(344);
    (0, A.configure)({enforceActions: "strict"});
    var I = t.WtbTree = (s = o("folderAdd"), l = function () {
        function e(t) {
            var i = t.wtbListService, n = t.commonService, r = t.$translate, o = t.listData, s = t.isOrig;
            if ((0, T.default)(this, e), a(this, "folderMap", c, this), a(this, "tbMap", d, this), this._lastOpenList = [], a(this, "_needUpdate", u, this), this.treeId = window.bdp.utils.guid(), this.dispose = function () {
            }, this.watchDispose = function () {
            }, this.commonService = n, this.$translate = r, this.wtbListService = i, this.getFolderListPromise = null, !s) {
                if (this.originals || (e.prototype.originals = new e({
                    commonService: n,
                    $translate: r,
                    listData: null,
                    isOrig: !0,
                    wtbListService: i
                }), e.prototype.broadcast = (0, A.observable)({data: {}})), !o) return this.originals;
                this._setTreeInst(o)
            }
        }

        return (0, L.default)(e, [{
            key: "destory", value: function () {
                this !== e.prototype.originals && (this.watchDispose(), this.dispose())
            }
        }, {
            key: "changeBroadcast", value: function (t) {
                e.prototype.broadcast.data = _.extend(t, {treeId: this.treeId}), t.result && t.result.needUpdate && this._setNeedUpdate(t.result.needUpdate)
            }
        }, {
            key: "_setNeedUpdate", value: function (e) {
                this._needUpdate = e
            }
        }, {
            key: "getTreeData", value: function () {
                return (0, A.toJS)(this._tree)
            }
        }, {
            key: "getFolderList", value: function (e, t) {
                var i = this;
                if (!this._tree || this._needUpdate || t) {
                    this._lastOpenList = this.openedTbList;
                    var n = _.extend({getFirst: 1, getRoot: 1, tbList: [], folderList: [], getAll: !1}, e);
                    return _.extend(n, {
                        tbList: _.uniq(n.tbList.concat([$.cookie("ds_tb_id")])),
                        folderList: n.folderList.concat(this._lastOpenList)
                    }), this.getFolderListPromise || (this.getFolderListPromise = this.wtbListService.getFolderListByApi(n).then(function (e) {
                        return i._setNeedUpdate(!1), i._setTreeInst(e), i.getFolderListPromise = null, [i._tree]
                    })), this.getFolderListPromise
                }
                return new k.default(function (e, t) {
                    e([i._tree])
                })
            }
        }, {
            key: "_autorun", value: function () {
                var e = this, t = this;
                this.dispose = (0, A.autorun)(function () {
                    var e = _(t.folderMap).map(function (e) {
                        return e.tb_list.peek()
                    }).flatMap().keyBy("tb_id").value();
                    (0, x.default)(t.tbMap, e)
                }), this.watchDispose = (0, A.reaction)(function () {
                    return e.broadcast.data
                }, function (t) {
                    t.result && t.result.needUpdate && e._setNeedUpdate(t.result.needUpdate)
                })
            }
        }, {
            key: "_setTreeInst", value: function () {
                var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                this._tree = new E.WtbFolder({
                    data: t,
                    commonService: this.commonService,
                    wtbTree: this,
                    $translate: this.$translate
                }), this.destory(), this._setFolderMaps(this._tree), this._autorun(), this._lastOpenList.forEach(function (t) {
                    return e.getFolderInstById(t).toggleFolder(!0).unfolded = !0
                })
            }
        }, {
            key: "_setFolderMaps", value: function (e) {
                var t = this;
                this.folderMap[e.folder_id] = e, e.sub_folders && e.sub_folders.forEach(function (e) {
                    return t._setFolderMaps(e)
                })
            }
        }, {
            key: "checkTbNameRepeat", value: function () {
                function e(e) {
                    return t.apply(this, arguments)
                }

                var t = (0, b.default)(v.default.mark(function e(t) {
                    var i = this;
                    return v.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                return e.abrupt("return", this.commonService.db.excelRepeatCheck({titles: angular.toJson([t])}).then(function (e) {
                                    return 0 == e.status && e.result.length > 0 ? i.$translate.instant("wb.changeWorkSheetName") : null
                                }));
                            case 1:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "creatFolder", value: function (e, t) {
                return this.commonService.folder.create({parent_id: e || "", name: t}).then(function (e) {
                    return 0 == e.status ? (e.needUpdate = !0, e) : k.default.reject(e.errstr)
                })
            }
        }, {
            key: "delFolder", value: function (e) {
                delete this.folderMap[e]
            }
        }, {
            key: "checkFolderNameRepeat", value: function (e, t) {
                return !!_.find(this.folderMap[e].sub_folders, function (e) {
                    return e.name === t
                })
            }
        }, {
            key: "getTbInstById", value: function (e) {
                return this.tbMap[e]
            }
        }, {
            key: "getFolderInstById", value: function (e) {
                return this.folderMap[e]
            }
        }, {
            key: "getTbAsync", value: function (e) {
                var t = this, i = void 0;
                return this.commonService.folder.getTableSiblings({tb_id: e}).then(function (e) {
                    if (0 == e.status && e.result.tb_list.length > 0) return i = t.getFolderInstById(e.result.folder_id), i.setTbListByApi(e.result.tb_list), k.default.all(i.ancestors.map(function (e) {
                        return e.getTbNeedApi ? e.getTbList() : k.default.resolve()
                    }))
                }).then(function () {
                    return e ? t.getTbInstById(e) : i && i.tb_list.length > 0 ? i.tb_list[0] : void 0
                })
            }
        }, {
            key: "openedTbList", get: function () {
                return _(this.folderMap).filter(function (e) {
                    return e.open
                }).map(function (e) {
                    return e.folder_id
                }).value()
            }
        }, {
            key: "hitLabelList", get: function () {
                var e = [];
                return _.forEach(this.tbMap, function (t) {
                    return t.label && e.push(t.label)
                }), e
            }
        }]), e
    }(), c = r(l.prototype, "folderMap", [A.observable], {
        enumerable: !0, initializer: function () {
            return {}
        }
    }), d = r(l.prototype, "tbMap", [A.observable], {
        enumerable: !0, initializer: function () {
            return {}
        }
    }), u = r(l.prototype, "_needUpdate", [A.observable], {
        enumerable: !0, initializer: function () {
            return !1
        }
    }), r(l.prototype, "changeBroadcast", [A.action], (0, g.default)(l.prototype, "changeBroadcast"), l.prototype), r(l.prototype, "_setNeedUpdate", [A.action], (0, g.default)(l.prototype, "_setNeedUpdate"), l.prototype), r(l.prototype, "getTreeData", [A.action], (0, g.default)(l.prototype, "getTreeData"), l.prototype), r(l.prototype, "openedTbList", [A.computed], (0, g.default)(l.prototype, "openedTbList"), l.prototype), r(l.prototype, "hitLabelList", [A.computed], (0, g.default)(l.prototype, "hitLabelList"), l.prototype), r(l.prototype, "creatFolder", [s, A.action], (0, g.default)(l.prototype, "creatFolder"), l.prototype), l);
    window.wtbTree = I
}, , function (e, t, i) {
    i(340).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "personal-setting_4d52ee5e.css"
}, function (e, t, i) {
    (function (e) {
        function t(e, t) {
            Object.keys(t).forEach(function (i) {
                e.setAttribute(i, t[i])
            })
        }

        e.exports = function (i, n) {
            n = n || {}, n.attrs = "object" == typeof n.attrs ? n.attrs : {}, n.hmr = void 0 === n.hmr || n.hmr;
            var a = document.createElement("link");
            a.rel = "stylesheet", a.type = "text/css", a.href = i, t(a, n.attrs);
            var r = document.getElementsByTagName("head")[0];
            if (r.appendChild(a), n.hmr && e.hot) return function (e) {
                "string" == typeof e ? a.href = e : r.removeChild(a)
            }
        }
    }).call(t, i(342)(e))
}, function (e, t) {
    e.exports = function (e) {
        return e.webpackPolyfill || (e.deprecate = function () {
        }, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", {
            enumerable: !0,
            get: function () {
                return e.l
            }
        }), Object.defineProperty(e, "id", {
            enumerable: !0, get: function () {
                return e.i
            }
        }), e.webpackPolyfill = 1), e
    }
}, function (e, t) {
    e.exports = "/dist/static/dashboard/tpl/dash-edit.html"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e, t, i, n) {
        i && (0, g.default)(e, t, {
            enumerable: i.enumerable,
            configurable: i.configurable,
            writable: i.writable,
            value: i.initializer ? i.initializer.call(n) : void 0
        })
    }

    function r(e, t, i, n, a) {
        var r = {};
        return Object.keys(n).forEach(function (e) {
            r[e] = n[e]
        }), r.enumerable = !!r.enumerable, r.configurable = !!r.configurable, ("value" in r || r.initializer) && (r.writable = !0), r = i.slice().reverse().reduce(function (i, n) {
            return n(e, t, i) || i
        }, r), a && void 0 !== r.initializer && (r.value = r.initializer ? r.initializer.call(a) : void 0, r.initializer = void 0), void 0 === r.initializer && (Object.defineProperty(e, t, r), r = null), r
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbFolder = void 0;
    var o, s, l, c, d, u, p, f, h = i(89), g = n(h), m = i(332), v = n(m), y = i(64), b = n(y), w = i(65), x = n(w),
        C = i(84), k = n(C), S = i(13), T = n(S), D = i(17), L = n(D), A = i(170), E = i(395), $ = i(337);
    t.WtbFolder = (o = (0, $.wtbTreeBroadcast)("folderModify"), s = (0, $.wtbTreeBroadcast)("folderMove"), l = (0, $.wtbTreeBroadcast)("folderDel"), c = function () {
        function e(t) {
            var i = this, n = t.data, r = t.parentFolder, o = t.commonService, s = t.wtbTree, l = t.$translate;
            (0, T.default)(this, e), a(this, "tb_list", d, this), a(this, "sub_folders", u, this), a(this, "open", p, this), a(this, "hide", f, this), this.commonService = o, this.wtbTree = s, this.$translate = l, this.folder_id = n.folder_id || n.ds_id, this.has_unread = n.has_unread, this.name = n.name || n.ds_name, this.parent_id = n.parent_id, this.seq_no = n.seq_no, this.tb_count = n.tb_count, this.tag = n.tag, this.setSubFolders(n.sub_folders && _.map(n.sub_folders, function (t) {
                return new e({
                    data: t,
                    parentFolder: i,
                    commonService: i.commonService,
                    wtbTree: i.wtbTree,
                    $translate: i.$translate
                })
            })), this.setTbListByApi(n.tb_list), (0, A.action)(function () {
                i.hide = n.hide
            })(), this.mark = n.mark, this.toggleFolder(n.open || !1), this.parentFolder = r, this.unfolded = n.unfolded || !1
        }

        return (0, L.default)(e, [{
            key: "setTbListByApi", value: function (e) {
                var t = this, i = e && _.map(e, function (e) {
                    return new E.WtbSheet({
                        apiTbData: e,
                        parentFolder: t,
                        commonService: t.commonService,
                        wtbTree: t.wtbTree,
                        $translate: t.$translate
                    })
                });
                this.setTbList(i)
            }
        }, {
            key: "getApiData", value: function () {
                var e = (0, A.toJS)(this);
                return delete e.wtbTree, delete e.parentFolder, delete e.tb_list, delete e.sub_folders, e
            }
        }, {
            key: "_getParent", value: function (e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
                return t.unshift(e), e.parentFolder && this._getParent(e.parentFolder, t), t
            }
        }, {
            key: "_getDeep", value: function (e) {
                var t = 1;
                return e.parentFolder && !e.parentFolder.isRoot && (t += this._getDeep(e.parentFolder)), t
            }
        }, {
            key: "_getMaxDeep", value: function (e) {
                var t = this;
                return e.sub_folders.length > 0 ? _(e.sub_folders).map(function (e) {
                    return t._getMaxDeep(e)
                }).max() : e.depth
            }
        }, {
            key: "setSubFolders", value: function () {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                this.sub_folders = e
            }
        }, {
            key: "setTbList", value: function () {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                this.tb_list = e
            }
        }, {
            key: "toggleFolder", value: function (e) {
                return this.open = void 0 === e ? !this.open : e, this
            }
        }, {
            key: "getTbList", value: function () {
                var e = this;
                return this.mark && this.sub_folders && this.sub_folders.forEach(function (e) {
                    e.hide = !1
                }), this.commonService.folder.getWorktable({folder_id: this.folder_id}).then(function (t) {
                    e.unfolded = !0, e.setTbListByApi(t.result);
                    var i = e.wtbTree.originals.getFolderInstById(e.folderId);
                    return i && i !== e && i.setTbListByApi(t.result), e.tb_list
                })
            }
        }, {
            key: "modify", value: function (e) {
                var t = this, i = e.name;
                return this.commonService.folder.modify({name: i, folder_id: this.folder_id}).then(function (e) {
                    if (0 == e.status) {
                        t.name = i;
                        var n = t.wtbTree.originals.getFolderInstById(t.folderId);
                        return n && n !== t && (n.name = i), e
                    }
                    return k.default.reject(e.errstr)
                })
            }
        }, {
            key: "move", value: function () {
                function e(e) {
                    return t.apply(this, arguments)
                }

                var t = (0, x.default)(b.default.mark(function e(t) {
                    var i, n = t.toSeq, a = t.toFolderId, r = t.toIndex, o = t.sync;
                    return b.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                if (i = void 0, o && this._move(a, r), !a) {
                                    e.next = 8;
                                    break
                                }
                                return e.next = 5, this.commonService.folder.modify_parent({
                                    seq_no: n,
                                    folder_id: this.folderId,
                                    parent_id: "tree_root" == a ? "folder_root" : a
                                });
                            case 5:
                                i = e.sent, e.next = 11;
                                break;
                            case 8:
                                return e.next = 10, this.commonService.folder.modify_seq({
                                    seq_no: n,
                                    folder_id: this.folderId
                                });
                            case 10:
                                i = e.sent;
                            case 11:
                                if (0 != i.status) {
                                    e.next = 16;
                                    break
                                }
                                return i.needUpdate = !0, e.abrupt("return", i);
                            case 16:
                                return e.abrupt("return", k.default.reject(i.errstr));
                            case 17:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "_move", value: function () {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.parentFolder.folderId,
                    t = arguments[1], i = this._del(), n = this.wtbTree.getFolderInstById(e);
                n.sub_folders.splice(t, 0, i), this.parentFolder = n
            }
        }, {
            key: "del", value: function (e) {
                var t = this;
                return this.commonService.folder.del(this.folder_id, e).then(function (e) {
                    if (0 == e.status) {
                        switch (e.result) {
                            case 0:
                                t._del();
                                var i = t.wtbTree.originals.getFolderInstById(t.folderId);
                                i && i !== t && i._del();
                                break;
                            case 1:
                                break;
                            case 2:
                                e.needUpdate = !0
                        }
                        return e
                    }
                    return k.default.reject(e.errstr)
                })
            }
        }, {
            key: "_del", value: function () {
                var e = this.parentFolder.sub_folders;
                return e.splice(e.indexOf(this), 1)[0]
            }
        }, {
            key: "label", get: function () {
                return this.tag
            }
        }, {
            key: "tbCount", get: function () {
                return this.tb_count
            }
        }, {
            key: "folderId", get: function () {
                return this.folder_id
            }
        }, {
            key: "isRoot", get: function () {
                return "tree_root" === this.folder_id && !this.parentFolder
            }
        }, {
            key: "isEmpty", get: function () {
                var e = !(this.tb_list && 0 != this.tb_list.length || this.sub_folders && 0 != this.sub_folders.length);
                return "tree_root" === this.folder_id && 1 == this.sub_folders.length && "folder_root" == this.sub_folders[0].folder_id && 0 == this.sub_folders[0].tb_list.length && (e = !0), e
            }
        }, {
            key: "getTbNeedApi", get: function () {
                return !(this.unfolded || this.mark === !1 || this.tb_list.peek().length > 0)
            }
        }, {
            key: "unread", get: function () {
                return this.getTbNeedApi ? this.has_unread : !(!_.find(this.sub_folders, function (e) {
                    return e.unread
                }) && !_.find(this.tb_list, function (e) {
                    return 0 === e.tb_status
                }))
            }
        }, {
            key: "totalTable", get: function () {
                var e = 0;
                return this.sub_folders && this.sub_folders.forEach(function (t) {
                    return e += t.tb_count
                }), e
            }
        }, {
            key: "depth", get: function () {
                return this.isRoot ? 0 : this._getDeep(this)
            }
        }, {
            key: "ancestors", get: function () {
                return this._getParent(this)
            }
        }, {
            key: "subDeep", get: function () {
                return this._getMaxDeep(this) - this.depth
            }
        }]), e
    }(), d = r(c.prototype, "tb_list", [A.observable], {
        enumerable: !0,
        initializer: null
    }), u = r(c.prototype, "sub_folders", [A.observable], {
        enumerable: !0,
        initializer: null
    }), p = r(c.prototype, "open", [A.observable], {
        enumerable: !0,
        initializer: null
    }), f = r(c.prototype, "hide", [A.observable], {
        enumerable: !0,
        initializer: null
    }), r(c.prototype, "tbCount", [A.computed], (0, v.default)(c.prototype, "tbCount"), c.prototype), r(c.prototype, "getApiData", [A.action], (0, v.default)(c.prototype, "getApiData"), c.prototype), r(c.prototype, "folderId", [A.computed], (0, v.default)(c.prototype, "folderId"), c.prototype), r(c.prototype, "isRoot", [A.computed], (0, v.default)(c.prototype, "isRoot"), c.prototype), r(c.prototype, "isEmpty", [A.computed], (0, v.default)(c.prototype, "isEmpty"), c.prototype), r(c.prototype, "getTbNeedApi", [A.computed], (0, v.default)(c.prototype, "getTbNeedApi"), c.prototype), r(c.prototype, "unread", [A.computed], (0, v.default)(c.prototype, "unread"), c.prototype), r(c.prototype, "totalTable", [A.computed], (0, v.default)(c.prototype, "totalTable"), c.prototype), r(c.prototype, "depth", [A.computed], (0, v.default)(c.prototype, "depth"), c.prototype), r(c.prototype, "ancestors", [A.computed], (0, v.default)(c.prototype, "ancestors"), c.prototype), r(c.prototype, "subDeep", [A.computed], (0, v.default)(c.prototype, "subDeep"), c.prototype), r(c.prototype, "setSubFolders", [A.action], (0, v.default)(c.prototype, "setSubFolders"), c.prototype), r(c.prototype, "setTbList", [A.action], (0, v.default)(c.prototype, "setTbList"), c.prototype), r(c.prototype, "toggleFolder", [A.action], (0, v.default)(c.prototype, "toggleFolder"), c.prototype), r(c.prototype, "getTbList", [A.action], (0, v.default)(c.prototype, "getTbList"), c.prototype), r(c.prototype, "modify", [o, A.action], (0, v.default)(c.prototype, "modify"), c.prototype), r(c.prototype, "move", [s, A.action], (0, v.default)(c.prototype, "move"), c.prototype), r(c.prototype, "_move", [A.action], (0, v.default)(c.prototype, "_move"), c.prototype), r(c.prototype, "del", [l, A.action], (0, v.default)(c.prototype, "del"), c.prototype), r(c.prototype, "_del", [A.action], (0, v.default)(c.prototype, "_del"), c.prototype), c)
}, function (e, t) {
    e.exports = "/dist/static/worktable/upload/page-upload.html"
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t, i) {
    e.exports = {default: i(466), __esModule: !0}
}, function (e, t, i) {
    i(509).replace(i.p, "")
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.SetDashHideService = void 0;
    var a = i(13), r = n(a), o = i(17), s = n(o);
    t.SetDashHideService = function () {
        function e(t, i, n, a) {
            "ngInject";
            (0, r.default)(this, e), this.commonService = t, this.$translate = n, this.serviceData = {
                projList: [],
                childHideNum: {},
                itemIdHideMap: {},
                dashProjMap: {}
            }
        }

        return e.$inject = ["commonService", "ngDialog", "$translate", "$rootScope"], (0, s.default)(e, [{
            key: "getTempItemId",
            value: function (e) {
                var t = "project" == e.attribute, i = t ? e.proj_id : e.dsh_id;
                return t ? 1 == e.type ? i + "_share" : i + "_rule" : 1 == e.parent.type ? i + "_share" : i + "_rule"
            }
        }, {
            key: "getOptTip", value: function (e, t) {
                var i = this.getTempItemId(t);
                return this.serviceData.itemIdHideMap[i][e] ? this.$translate.instant("dash.showDashTip") : this.$translate.instant("dash.hideDashTip")
            }
        }, {
            key: "_setPropertyItem", value: function (e) {
                var t = this, i = "";
                _.forEach(e, function (e) {
                    if (0 != e.type) {
                        var n = "project" == e.attribute;
                        i = t.getTempItemId(e), e.itemId = i, e.isQueryDisplay = !0, t.serviceData.itemIdHideMap[i] = {
                            web: !!e.hidden,
                            mobile: !!e.mob_hidden
                        }, n ? function () {
                            var n = 0, a = 0;
                            (e.subs || []).map(function (e) {
                                n = e.hidden ? ++n : n, a = e.mob_hidden ? ++a : a
                            }), t.serviceData.childHideNum[i] = {
                                web: n,
                                mobile: a
                            }, e.isOpen = !1, e.subs && e.subs.length > 0 && t._setPropertyItem(e.subs)
                        }() : t.serviceData.dashProjMap[i] = {
                            attribute: e.attribute,
                            proj_id: e.proj_id,
                            dash_id: e.dsh_id,
                            dash_name: e.name,
                            type: 1 == e.parent.type ? "share" : "rule"
                        }
                    }
                })
            }
        }, {
            key: "setPropertyProjList",
            value: function (e) {
                var t = this, i = angular.copy(e);
                return this._setPropertyItem(i), this.serviceData.projList = [], _.forEach(i, function (e) {
                    0 != e.type && t.serviceData.projList.push(e)
                }), console.log(this.serviceData), {
                    projList: this.serviceData.projList,
                    childHideNum: this.serviceData.childHideNum,
                    itemIdHideMap: this.serviceData.itemIdHideMap,
                    dashProjMap: this.serviceData.dashProjMap
                }
            }
        }, {
            key: "changeProjOpenStatus", value: function (e) {
                e.isOpen = !e.isOpen
            }
        }, {
            key: "changeDashHideStatus", value: function (e, t, i) {
                var n = this.getTempItemId(t), a = this.serviceData.itemIdHideMap;
                a[n][e] = !a[n][e], this.checkParentHideStatus(e, i)
            }
        }, {
            key: "checkParentHideStatus", value: function (e, t) {
                var i = this, n = "project" == t.attribute, a = 0, r = "", o = this.serviceData.itemIdHideMap,
                    s = this.serviceData.childHideNum;
                (t.subs || []).map(function (t) {
                    r = i.getTempItemId(t), a = o[r][e] ? ++a : a
                }), r = this.getTempItemId(t), n && (s[r][e] = a), o[r][e] = a && a == t.subs.length, t.parentId && this.checkParentHideStatus(e, t.parent)
            }
        }, {
            key: "changeProjHideStatus", value: function (e, t) {
                var i = this, n = this.serviceData.itemIdHideMap, a = this.serviceData.childHideNum,
                    r = this.getTempItemId(t), o = !n[r][e];
                !function t(r, o) {
                    var s = "project" == r.attribute, l = i.getTempItemId(r);
                    n[l][e] = o, s && (a[l][e] = o ? (r.subs || []).length : 0), s && r.subs && r.subs.length > 0 && r.subs.forEach(function (e) {
                        t(e, o)
                    })
                }(t, o), this.checkParentHideStatus(e, t)
            }
        }, {
            key: "getHideListForSave", value: function () {
                var e = {sharedWebList: [], ruleWebList: [], sharedMobileList: [], ruleMobileList: []},
                    t = this.serviceData.childHideNum;
                return _.forEach(this.serviceData.itemIdHideMap, function (i, n) {
                    t.hasOwnProperty(n) || (i.web && (n.indexOf("share") >= 0 && e.sharedWebList.push(n.replace("_share", "")), n.indexOf("rule") >= 0 && e.ruleWebList.push(n.replace("_rule", ""))), i.mobile && (n.indexOf("share") >= 0 && e.sharedMobileList.push(n.replace("_share", "")), n.indexOf("rule") >= 0 && e.ruleMobileList.push(n.replace("_rule", ""))))
                }), console.log("result", e), e
            }
        }, {
            key: "resetFolderState", value: function (e) {
                var t = this;
                _.forEach(e, function (e) {
                    e.isQueryDisplay = !0, e.subs && e.subs.length > 0 && t.resetFolderState(e.subs)
                })
            }
        }, {
            key: "_openSearchResultParentStatus", value: function (e) {
                e.parentId && (e.parent.isQueryDisplay = !0, e.parent.isOpen = !0, e.parent.parentId && this._openSearchResultParentStatus(e.parent))
            }
        }, {
            key: "searchResultStatus", value: function (e, t, i) {
                var n = this;
                _.forEach(e, function (e) {
                    var a = "project" === e.attribute, r = e.name.toLowerCase();
                    e.isQueryDisplay = !1, a ? r.indexOf(t.toLowerCase()) >= 0 ? (e.isQueryDisplay = !0, e.isOpen = !0, (e.subs || []).map(function (e) {
                        e.isQueryDisplay = !0
                    }), i.noResult = !1, n._openSearchResultParentStatus(e)) : e.subs && e.subs.length > 0 && n.searchResultStatus(e.subs, t, i) : r.indexOf(t.toLowerCase()) >= 0 ? (e.isQueryDisplay = !0, i.noResult = !1, n._openSearchResultParentStatus(e)) : e.isQueryDisplay = !1
                })
            }
        }]), e
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e, t) {
        var i = this, n = _.trim(e).split(".");
        n.forEach(function (e, a) {
            a === n.length - 1 ? i[e] = t : i = i[e]
        })
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.loadingDuring = void 0;
    var r = i(64), o = n(r), s = i(65), l = n(s);
    t.loadingDuring = function () {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "loading";
        return function (t, i, n) {
            var r = n.value;
            return n.value = (0, l.default)(o.default.mark(function t() {
                var i = this, n = arguments;
                return o.default.wrap(function (t) {
                    for (; ;) switch (t.prev = t.next) {
                        case 0:
                            return a.bind(this)(e, !0), t.next = 3, r.bind(this).apply(void 0, n).finally(function () {
                                a.bind(i)(e, !1)
                            });
                        case 3:
                            return t.abrupt("return", t.sent);
                        case 4:
                        case"end":
                            return t.stop()
                    }
                }, t, this)
            })), n
        }
    }
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e, t, i, n) {
        i && (0, g.default)(e, t, {
            enumerable: i.enumerable,
            configurable: i.configurable,
            writable: i.writable,
            value: i.initializer ? i.initializer.call(n) : void 0
        })
    }

    function r(e, t, i, n, a) {
        var r = {};
        return Object.keys(n).forEach(function (e) {
            r[e] = n[e]
        }), r.enumerable = !!r.enumerable, r.configurable = !!r.configurable, ("value" in r || r.initializer) && (r.writable = !0), r = i.slice().reverse().reduce(function (i, n) {
            return n(e, t, i) || i
        }, r), a && void 0 !== r.initializer && (r.value = r.initializer ? r.initializer.call(a) : void 0, r.initializer = void 0), void 0 === r.initializer && (Object.defineProperty(e, t, r), r = null), r
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbSheet = void 0;
    var o, s, l, c, d, u, p, f, h = i(89), g = n(h), m = i(332), v = n(m), y = i(64), b = n(y), _ = i(84), w = n(_),
        x = i(65), C = n(x), k = i(13), S = n(k), T = i(17), D = n(T), L = i(170), A = i(337);
    t.WtbSheet = (o = (0, A.wtbTreeBroadcast)("tbCopy"), s = (0, A.wtbTreeBroadcast)("tbMove"), l = (0, A.wtbTreeBroadcast)("tbDelete"), c = (0, A.wtbTreeBroadcast)("tbModify"), d = function () {
        function e(t) {
            var i = t.apiTbData, n = t.parentFolder, r = t.commonService, o = t.wtbTree, s = t.$translate;
            (0, S.default)(this, e), a(this, "tb_status", u, this), a(this, "permission_type", p, this), a(this, "label", f, this), this.comment = i.comment, this.data_count = i.data_count, this._setProp("label", i.label), this._setProp("permission_type", i.permission_type), this.tb_seq_no = void 0 === i.tb_seq_no ? -3 : i.tb_seq_no, this._setProp("tb_status", i.tb_status), this.update_mode = i.update_mode, this.tb_type = i.tb_type, this.type = i.type, this.origin_name = i.origin_name, this.name = i.name, this.tb_id = i.tb_id, this.dstb_id = i.dstb_id, this.ds_type_name = i.ds_type_name, this.ds_type = i.ds_type, this.ctime = i.ctime, this.tag = i.tag, this.view_status = i.view_status, this.can_remove = null, this.parentFolder = n, this.mark = i.mark, this.commonService = r, this.wtbTree = o, this.$translate = s
        }

        return (0, D.default)(e, [{
            key: "getApiData", value: function () {
                var e = (0, L.toJS)(this);
                return delete e.wtbTree, delete e.parentFolder, e
            }
        }, {
            key: "copy", value: function () {
                function e(e, i) {
                    return t.apply(this, arguments)
                }

                var t = (0, C.default)(b.default.mark(function e(t, i) {
                    var n, a = this;
                    return b.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                return n = this.wtbTree.originals.getFolderInstById(i), e.abrupt("return", this.commonService.tb.copy({
                                    tb_name: t,
                                    tb_id: this.tbId,
                                    folder_id: i
                                }).then(function (e) {
                                    return 0 == e.status ? n.getTbList() : w.default.reject()
                                }).then(function (e) {
                                    var t = a.wtbTree.getFolderInstById(i);
                                    return n && n !== t && t.setTbList(e), e
                                }));
                            case 2:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "move", value: function () {
                function e(e) {
                    return t.apply(this, arguments)
                }

                var t = (0, C.default)(b.default.mark(function e(t) {
                    var i, n = this, a = t.toFolderId, r = t.toSeq, o = t.toIndex, s = t.sync;
                    return b.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                return i = this.wtbTree.originals.getFolderInstById(a), s && this._move(a, o), e.abrupt("return", this.commonService.folder.change({
                                    tb_id: this.tbId,
                                    to_folder: "tree_root" == a ? "folder_root" : a,
                                    to_seq: r,
                                    tb_index: o
                                }).then(function (e) {
                                    if (0 == e.status) {
                                        if (a != n.parentFolder.folder_id) {
                                            n._delete();
                                            var t = n.wtbTree.originals.getTbInstById(n.tbId);
                                            t && t !== n && t._delete()
                                        }
                                        return i.getTbList()
                                    }
                                }).then(function (e) {
                                    var t = n.wtbTree.getFolderInstById(a);
                                    return i && i !== t && t.setTbList(e), e
                                }));
                            case 3:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "_move", value: function (e, t) {
                var i = this._delete(), n = this.wtbTree.getFolderInstById(e);
                n.tb_list.splice(t, 0, i), this.parentFolder = n
            }
        }, {
            key: "delete", value: function () {
                function e(e, i) {
                    return t.apply(this, arguments)
                }

                var t = (0, C.default)(b.default.mark(function e(t, i) {
                    var n, a;
                    return b.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                if (n = void 0, !t) {
                                    e.next = 7;
                                    break
                                }
                                return e.next = 4, this.commonService.tb.delTableWithChart(this.tbId, i.sessionId, i.verifyCode);
                            case 4:
                                n = e.sent, e.next = 10;
                                break;
                            case 7:
                                return e.next = 9, this.commonService.tb.del(this.tbId);
                            case 9:
                                n = e.sent;
                            case 10:
                                if (0 != n.status) {
                                    e.next = 14;
                                    break
                                }
                                return this.can_remove = n.result.can_remove, this.can_remove && (this._delete(), (a = this.wtbTree.originals.getTbInstById(this.tbId)) && a !== this && a._delete()), e.abrupt("return", n);
                            case 14:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "_delete", value: function () {
                var e = this.parentFolder.tb_list;
                return e.splice(e.indexOf(this), 1)[0]
            }
        }, {
            key: "modify", value: function () {
                function e(e) {
                    return t.apply(this, arguments)
                }

                var t = (0, C.default)(b.default.mark(function e(t) {
                    var i = this;
                    return b.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                return e.abrupt("return", this.commonService.tb.modify(angular.toJson([t])).then(function (e) {
                                    if (0 != Number(e.status)) return w.default.reject(e.errstr);
                                    i._modify(t);
                                    var n = i.wtbTree.originals.getTbInstById(i.tbId);
                                    n && n !== i && n._modify(t)
                                }));
                            case 1:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "_modify", value: function (e) {
                var t = e.name, i = e.label, n = e.comment;
                this.name = t, this.label = i, this.comment = n
            }
        }, {
            key: "setTbHasRead", value: function () {
                var e = this;
                return this._setProp("tb_status", 1), this.commonService.folder.modify_folder_rel({
                    tb_id: this.tbId,
                    tb_status: angular.toJson({tb_status: 1})
                }).then(function (t) {
                    if (0 == t.status) {
                        var i = e.wtbTree.originals.getTbInstById(e.tbId);
                        i && i !== e && i._setProp("tb_status", 1)
                    }
                }).catch(function () {
                    e.tb_status = 0
                })
            }
        }, {
            key: "_setProp", value: function (e, t) {
                this[e] = t
            }
        }, {
            key: "tbId", get: function () {
                return this.tb_id
            }
        }, {
            key: "canCopy", get: function () {
                return "self" == this.tb_type && ["join", "aggr", "union", "transpose"].indexOf(this.type) >= 0
            }
        }, {
            key: "canEdit", get: function () {
                return "self" == this.tb_type && "allot" != this.type
            }
        }, {
            key: "unread", get: function () {
                return 0 == this.tb_status
            }
        }, {
            key: "icoType", get: function () {
                return "allot" == this.type ? "normal" : "snapshot" == this.type ? "opends" : "public" == this.tb_type ? "public" : this.type
            }
        }]), e
    }(), u = r(d.prototype, "tb_status", [L.observable], {
        enumerable: !0,
        initializer: null
    }), p = r(d.prototype, "permission_type", [L.observable], {
        enumerable: !0,
        initializer: null
    }), f = r(d.prototype, "label", [L.observable], {
        enumerable: !0,
        initializer: null
    }), r(d.prototype, "getApiData", [L.action], (0, v.default)(d.prototype, "getApiData"), d.prototype), r(d.prototype, "tbId", [L.computed], (0, v.default)(d.prototype, "tbId"), d.prototype), r(d.prototype, "canCopy", [L.computed], (0, v.default)(d.prototype, "canCopy"), d.prototype), r(d.prototype, "canEdit", [L.computed], (0, v.default)(d.prototype, "canEdit"), d.prototype), r(d.prototype, "unread", [L.computed], (0, v.default)(d.prototype, "unread"), d.prototype), r(d.prototype, "icoType", [L.computed], (0, v.default)(d.prototype, "icoType"), d.prototype), r(d.prototype, "copy", [o], (0, v.default)(d.prototype, "copy"), d.prototype), r(d.prototype, "move", [s], (0, v.default)(d.prototype, "move"), d.prototype), r(d.prototype, "_move", [L.action], (0, v.default)(d.prototype, "_move"), d.prototype), r(d.prototype, "delete", [l], (0, v.default)(d.prototype, "delete"), d.prototype), r(d.prototype, "_delete", [L.action], (0, v.default)(d.prototype, "_delete"), d.prototype), r(d.prototype, "modify", [c], (0, v.default)(d.prototype, "modify"), d.prototype), r(d.prototype, "_modify", [L.action], (0, v.default)(d.prototype, "_modify"), d.prototype), r(d.prototype, "_setProp", [L.action], (0, v.default)(d.prototype, "_setProp"), d.prototype), d)
}, function (e, t) {
    e.exports = "/dist/static/worktable/preview/worktable.html"
}, function (e, t, i) {
    e.exports = {default: i(603), __esModule: !0}
}, function (e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(40), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    t.default = function (e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !t || "object" !== (void 0 === t ? "undefined" : (0, a.default)(t)) && "function" != typeof t ? e : t
    }
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    t.__esModule = !0;
    var a = i(605), r = n(a), o = i(609), s = n(o), l = i(40), c = n(l);
    t.default = function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : (0, c.default)(t)));
        e.prototype = (0, s.default)(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (r.default ? (0, r.default)(e, t) : e.__proto__ = t)
    }
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbCol2BaseCtrl = void 0;
    var a = i(13), r = n(a), o = i(17), s = n(o);
    t.WtbCol2BaseCtrl = function () {
        function e() {
            (0, r.default)(this, e), this.currentFolder = {
                loading: !1,
                inst: null
            }, this.openFolderMap = {}, this.currentList = {}
        }

        return (0, s.default)(e, [{
            key: "openLoading", value: function () {
                this.currentFolder.loading = !0
            }
        }, {
            key: "initCurFolder", value: function (e) {
                this.currentFolder.inst = e;
                var t = _.find(this.wtbList.ctrl.wtbTree.folderMap, function (e) {
                    return "tree_root" != e.folderId
                }) || {};
                e || (this.wtbList.ctrl.queryInst.queryText ? this.currentFolder.inst = _.find(this.wtbList.ctrl.wtbTree.folderMap, function (e) {
                    return e.open && e.tb_list.length > 0
                }) || t : this.currentFolder.inst = t), this.currentList = this.currentFolder.inst.tb_list || [], this.openFolderMap = _(this.currentFolder.inst.ancestors).map(function (e) {
                    return e.folderId
                }).keyBy().value(), this.currentFolder.loading = !1;
                var i = this.$scope.$root;
                this.$scope.$$phase || i && i.$$phase || this.$scope.$digest(), this.wtbList.ctrl.listInst.needSlice && this.wtbList.ctrl.config.defaultId != this.currentFolder.inst.folderId && this.wtbList.ctrl.listInst.goToId(this.currentFolder.inst.folderId, this.currentFolder.inst.folderId)
            }
        }, {
            key: "checkFolderAfter", value: function (e) {
                this.currentFolder.loading = !1, this.initCurFolder(e)
            }
        }]), e
    }()
}, function (e, t, i) {
    i(100), e.exports = i(402)
}, function (e, t, i) {
    "use strict";
    i(190), i(267);
    var n = [i(403), i(422), i(431), i(435), i(445), i(448), i(452), i(486), i(508), i(541), i(577), i(580), i(593), i(594), i(600), i(653), i(655), i(659)],
        a = ["BC.common", "BC.controllers.dataSource", "BC.personal", "BC.chartConfig", "mainNav", "bdp.charts", "ui.bootstrap", "ui.select", "lr.upload", "datePicker", "ui.sortable", "ui.sortable.multiselection", "ui.mask", "spectrumColorPicker", "promiseButton", "inputNumber", "ngInputText", "ngLoadingGif", "angular-click-outside", "angular-mouserover-hide", "ngFileUpload", "ngImgCrop", "bw.paging", "pasvaz.bindonce", "ngTouch"],
        r = [i(665), i(666), i(667), i(668), i(669)(n), i(335)], o = i(670)(r, a);
    o.run(["$rootScope", "$location", "$window", "$state", "$stateParams", "autoRefreshChart", "$timeout", function (e, t, i, n, a, r, o) {
        function s(e) {
            var t = "", i = e.pop(), n = i.split("/"), a = n[1], r = e.pop(), o = [], s = !1;
            "dash_edit" == a ? (2 == n.length ? t = a : r ? (o = r.split("/"), o[1] != a && (t = a)) : t = a, s = !0) : t = i.indexOf("training") > 0 ? i : a, t ? BDPLogger.log("feStatistics", {
                category: "user_interact",
                action: "pageview",
                opt_label: t,
                opt_value: 1
            }) : s && BDPLogger.log("feStatistics", {
                category: "user_interact",
                action: "pageview",
                opt_label: "dash_change",
                opt_value: 1
            })
        }

        function l() {
            function e() {
                document[t] ? window.BDP_visibilityChangePageActive = !1 : (window.BDP_visibilityChangePageActive = !0, r.refreshWaitChart())
            }

            window.BDP_visibilityChangePageActive = !0;
            var t, i;
            void 0 !== document.hidden ? (t = "hidden", i = "visibilitychange") : void 0 !== document.msHidden ? (t = "msHidden", i = "msvisibilitychange") : void 0 !== document.webkitHidden && (t = "webkitHidden", i = "webkitvisibilitychange"), void 0 !== document.addEventListener && void 0 !== document[t] && (window.BDP_visibilityChangeFlag = !0, document.addEventListener(i, e, !1))
        }

        window.bdpChart = window.bdpChart || {}, e.language = $.cookie("locale") || "zh", bdpChart.language = e.language, t.host().indexOf("me.bdp.cn") > -1 && (e.language = "zh", $.cookie("locale", "zh"));
        var c = [];
        registerUserLogger(), e.historyTime = [], e.back = function () {
            if (1 == c.length && 0 == n.current.name.indexOf("training")) return void n.go("training", null, {replace: !0});
            var i = c.length > 1 ? c.splice(-2)[0] : "/";
            if (e.historyTime.length > 1 && e.historyTime.splice(-2)[0], "/dash_edit" == i || "/" == i) return void(location.href = "/index.html");
            t.path(i)
        }, e.$on("$stateChangeStart", function (e, t, n, a, r) {
            0 == +!!$.cookie("token") && (i.location.href = bdp.bdpLogin.checkPartnerLogin()), $(".common-dot-guide").remove()
        }), e.$on("$stateChangeSuccess", function () {
            if (bdp.bdpPageStatus && e.permision && !$.isEmptyObject(e.permision)) {
                var i = t.path();
                if (!bdp.bdpPageStatus.checkCurRoutePermission(i, e.permision, e.userInfoObj)) {
                    var n = bdp.bdpPageStatus.getPermissionAccessRoute(e.permision);
                    return o(function () {
                        e.click_show_view(n)
                    }, 2e3), !1
                }
            }
            c.push(t.path()), e.historyTime.push(t.path()), e.advDashEditPage = !1, e.actualLocation = t.path(), s(angular.copy(c))
        }), e.$on("changeCapacity", function (t, i) {
            e.$broadcast("getCapacity", "change")
        }), e.$on("userInfoChange", function (t, i) {
            e.$broadcast("getUserInfo", "change")
        });
        var d = function (i, n) {
            e.view = i, n && t.path(n)
        };
        e.click_show_view = function (i, n) {
            n = n || {};
            var a, r;
            switch (i) {
                case"dashboard":
                    a = "dashboard";
                    var o = e.last_dash_path;
                    t.path().indexOf("dash_edit") < 0 && (r = o || "/dash_edit");
                    break;
                case"data_screen":
                    a = "data_screen", t.path().indexOf("data_screen") < 0 && (r = "/data_screen");
                    break;
                case"data_screen_edit":
                    a = "data_screen_edit", t.path().indexOf("data_screen_edit") < 0 && (r = "/data_screen_edit");
                    break;
                case"dash_manage":
                    a = "dash_manage", r = "/dash_manage";
                    break;
                case"data_source":
                    r = "/data_source", a = "worktable", r = "data_source";
                    break;
                case"account":
                    r = "/account", a = "account";
                    break;
                case"database":
                    r = "/database", a = "database";
                    break;
                case"database_list":
                    r = "/database_list", a = "database_list";
                    break;
                case"warn":
                    r = "/warn", a = "warn";
                    break;
                case"template_home":
                    a = "template", r = (e.role, "/template_home");
                    break;
                case"template_config":
                    r = "/template_config", a = "template";
                    break;
                case"template_rule":
                    r = "/template_rule", a = "template";
                    break;
                case"template_rule_create":
                    r = "/template_rule_modify/create", a = "template";
                    break;
                case"template_rule_modify":
                    r = "/template_rule_modify/" + n.ruleId, a = "template";
                    break;
                case"template_rule_batch_set":
                    r = "/template_rule_batch_set", a = "template";
                    break;
                case"security":
                    r = "/security", a = "security";
                    break;
                case"training":
                    r = "/training", a = "training";
                    break;
                case"chart_template":
                    r = "/chart_template", a = "chart_template";
                    break;
                case"chart_template_config":
                    r = "/chart_template_config", a = "chart_template_config";
                    break;
                case"chart_template_rule":
                    r = "/chart_template_rule", a = "chart_template_rule";
                    break;
                case"chart_template_rule_modify":
                    r = "/chart_template_rule_modify/" + n.chartTplRuleId, a = "chart_template_rule_modify";
                    break;
                case"chart_template_rule_create":
                    r = "/chart_template_rule_create", a = "chart_template_rule_create"
            }
            d(a, r)
        }, e.$editable = !1, d("dashboard"), e.proj_share = !1, e.global = {}, e.permision = {}, e.show_bdp_header = !0, e.$watch("themeChangeFlag", function (t, i) {
            t == i || "dashboard" != e.view && "dash_tpl" != e.view && "data_screen" != e.view || e.$broadcast("fire-refresh-dashboard"), t != i && "worktable" == e.view && e.$broadcast("refresh-relation-path")
        }), setTimeout(function () {
            l()
        }, 5e3)
    }]), o.config(["uiMask.ConfigProvider", "$rootScopeProvider", "$touchProvider", function (e, t, i) {
        e.eventsToHandle(["input"]), t.digestTtl(15);
        var n = navigator.userAgent, a = /(?:Windows Phone)/.test(n), r = /(?:SymbianOS)/.test(n) || a,
            o = /(?:Android)/.test(n), s = /(?:iPad)/.test(n);
        (/(?:iPhone)/.test(n) || o || a || r || s) && i.ngClickOverrideEnabled(!0)
    }])
}, function (e, t, i) {
    "use strict";
    angular.module("mainNav", []);
    i(404), i(405), i(407), i(339), i(409), i(411), i(412), i(413), i(414), i(415), i(416), i(418), i(419), i(420), i(421)
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i, n, r, o, s, l, c, d, u, p, f, h, g, m, v) {
            t.noticeStore = {}, t.memberData = {}, e.init = function () {
                e.resetDashFilterCache(), e.closeBrowserLogout(), e.passwordWarn(), e.userSetting(), e.getUserInfo(), e.themeInit();
                e.helpPath = "https://help.bdp.cn/"
            }, e.getUserInfo = function () {
                g.get().then(function (n) {
                    if (0 == n.status) {
                        var a = n.result;
                        bdp.waterMark.draw(a), e.checkThemeChange(a.theme_id), 1 == a.should_complete_profile && (location.href = "/info.html");
                        var o = a.role;
                        t.master_role = o, t.share = 1 == o ? 1 : a.security_info.share_inside_group, t.global.watterMark = a.security_info.watermark_strategy || a.auth_info.name, t.global.exportDataSetting = a.security_info.export_data_setting, t.global.tbExportDataSetting = a.security_info.tb_export_data_setting, t.global.tpExportDataSeting = a.security_info.export_data_to_tp_setting, t.global.dataToTp = a.data_to_tp;
                        var s;
                        t.user_id = a.user_id, t.noticeStore = {
                            offlineTaskNewFile: a.has_new_file,
                            showOfflineTip: a.show_export_notification
                        }, t.enterprise_type = s = a.enterprise_type ? +a.enterprise_type : 0, t.role_code = o, t.photo_id = a.photo_id, t.global.domain = a.domain, t.global.username = a.username, t.personalInfo = {}, t.securityStrategy = {
                            closeBrowserTokenFailure: a.security_info.close_browser_token_failure,
                            needMobileBind: !!a.security_info.need_mobile_bind
                        }, 3 == t.enterprise_type && (t.personalInfo = v.getPersonalInfoModel(a.personal_info), v.setBroadcast(a.personal_info.new_version), t.memberData = {
                            vipLevel: a.personal_info.vip_level,
                            lessDay: a.personal_info.less_day,
                            vipDeadline: 1e3 * a.personal_info.vip_deadline,
                            vipShowTip: !1
                        }, l(function () {
                            t.memberData.vipShowTip = "1" == $.cookie("vip_show_tip"), $.cookie("vip_show_tip", null)
                        }, 1e3));
                        var c = "";
                        switch (o) {
                            case 1:
                                c = "data_admin";
                                break;
                            case 0:
                            case 99:
                                c = "s_admin";
                                break;
                            case 3:
                                c = "user";
                                break;
                            case 2:
                                c = "normal_admin", 1 != a.account_permission && 1 == a.data_permission && (c = "data_admin");
                                break;
                            default:
                                c = "user"
                        }
                        if (t.role = c, f.initApi(a.new_guide, a.ctime), userGuideFlags.reset(a.guide), 3 == a.enterprise_type) {
                            1 === userGuideFlags.get("origin") ? userGuideFlags.set("origin", 0) : 0 === userGuideFlags.get("origin") && userGuideFlags.set("tplLibrary", 3);
                            var d = userGuideFlags.get("origin"), u = userGuideFlags.get("tplLibrary");
                            if (2 == d || u < 3) {
                                var p = window.userGuideFlags.set("tplLibrary", 3);
                                p = window.userGuideFlags.set("origin", 0), i.guide.guideSet({guide: p}), t.noviceGuide = 1, r.open({
                                    template: "/static/js/personal/novice-guide/novice-guide.html",
                                    className: "ngdialog-theme-default novice-guide",
                                    showClose: !1,
                                    data: {showPackage: !0}
                                })
                            }
                        }
                        var h = t.global.authInfoName = a.auth_info && a.auth_info.name;
                        t.permision = {
                            projEdit: 1 != s && 4 != o && 5 != s && 6 != s,
                            dashEdit: 1 != s && 4 != o && 5 != s && 6 != s,
                            dashOperate: 1 != s && 4 != o && 5 != s && 6 != s,
                            outerShare: 3 == s,
                            innerShare: 3 != s,
                            subTpl: 2 != s,
                            sqlTable: 3 != s,
                            assignWorkTable: 1 != s,
                            canUseCustomChart: !0,
                            navDashboard: 1 == a.dsh_permission,
                            navDataScreen: 1 == a.data_screen,
                            navAdvDashboard: !0,
                            navWorktable: 1 != s && 4 != o && 5 != s && 1 == a.tb_permission,
                            navUser: 3 != s && 5 != s && 6 != s && !h,
                            navAccount: 3 != s && 5 != s && 6 != s && !h,
                            navDatabase: 1 == a.data_permission && (0 == s || 3 == s || 4 == s || 5 === s || 6 === s || 9 === s),
                            navTpl: (0 == s || 1 == s || 4 == s || 9 == s) && !h && 1 == a.tml_manage,
                            navSecurity: (0 == s || 4 == s) && 0 == o,
                            newLogShow: 0 == s,
                            modifyPassword: 2 != s,
                            personalSetIcon: 3 == s,
                            wranPush: 3 != s,
                            userEdit: 2 != s,
                            userShowOnlyReadOption: 4 == s,
                            userOnlyReadOption: 1 == s && 0 == o,
                            showDeveloper: 3 != s && 4 !== s && 5 !== s && 6 !== s && 9 !== s && (0 == o || 2 == o),
                            showExportoverall: 0 == s && 0 == o,
                            baiduSearchIndustry: 1 === a.industry && !h,
                            tableImg: m.tableImg.indexOf(t.global.domain) >= 0,
                            sysSetting: !h,
                            accountSetting: !h && 5 != s && 6 != s,
                            allowExporting: !h,
                            isAuthorized: !!h,
                            isPersonal: 3 == s,
                            isNormalUser: 3 == o,
                            authorizedPrivilege: 0 == s,
                            showAllSetting: !0,
                            showLogout: !0,
                            isSuperAdminInPersonal: ["e91b3968ff60673c828de73ecd40855d", "587595a4a8ed0d5cc3a22609cf816c21"].indexOf(a.user_id) >= 0,
                            newTraining: 1 == a.machine_learning_permission && !h,
                            multiDimensionPermission: m.multiDimension.indexOf(a.domain) > -1,
                            dashHidden: 3 != s,
                            helpLink: !(3 == s || 9 == s),
                            accountDetailSetting: !(9 == s),
                            newFeatures: !(9 == s),
                            offlineTaskFlag: 0 == s || 4 == s || 9 == s || 3 == s,
                            notificationSettingFlag: 3 != s,
                            showChartJump: !bdp.bdpPageStatus.isUnderDataScreen(),
                            enterpriseType: +s,
                            canDateFilter: 1 == a.date_filter_permission,
                            canDashManage: 1 == a.dsh_manage && 3 != s,
                            functionManage: 1 == a.function_manage,
                            tableManage: 1 == a.tb_manage,
                            databaseManage: 1 == a.data_source_manage,
                            tplManage: 1 == a.tml_manage,
                            accountManage: 1 == a.account_permission,
                            isCloudMarket: 3 == s && a.personal_info && a.personal_info.is_cloud_market,
                            canExportMLMode: ["demo", "haizhi", "kaishu", "zeju"].indexOf(a.domain) > -1
                        };
                        var g = false;
                        g && (g = JSON.parse(g), t.permision.navAdvDashboard = !!g.SHOW_ADV_DASH, t.permision.canUseCustomChart = !!g.USE_CUSTOM_CHART, e.expireInfo = a.expire_info, t.permision.authorizedPrivilege = !!g.USE_AUTHORIZED, t.permision.hideGenerateCoordinate = !!g.HIDE_GENERATE_COORDINATE, t.permision.zhJoinText = !!g.USE_ZH_JOIN_TEXT), t.$broadcast("$rootScopePermission", t.permision), e.checkCurRoutePermission(t.permision, a) || e.setDefaultRoute(t.permision), e.runOnceAction && (e.runOnceAction = !1, e.user = a, l(function () {
                            e.user.hasPhoto = {
                                show: !!a.image_name,
                                url: "/api/user_image/download?sub_id=" + e.user.user_id + "&hash=" + +new Date
                            }, a.image_name || (e.user.hasPhoto.url = "/static/images/default_photo.png")
                        }, 1e3), t.userInfoObj = a, t.is_extrace = a.is_extrace, a.personalize_info && a.personalize_info.page_titile && ($("title")[0].innerText = a.personalize_info.page_titile)), e.customLogoTitle = function () {
                            var i = t.userInfoObj.customize_permission;
                            if (i ? t.userInfoObj.personalize_info.redirect_permission || (t.userInfoObj.personalize_info.logo_redirect = "") : t.userInfoObj.personalize_info = {
                                authorization_management: 1,
                                developer_permission: 1,
                                help_center_permission: 1,
                                product_update_permission: 1,
                                custom_icon: 0,
                                custom_logo: 0,
                                logo_redirect: "https://www.bdp.cn/home.html",
                                page_titile: "海致BDP-大数据时代的商业智能"
                            }, t.userInfoObj.personalize_info.custom_icon && i && (document.getElementById("J_favicon_ico").href = "/api/domain/download_icon?domain=" + e.userInfoObj.domain + "&v=" + (new Date).getTime()), t.userInfoObj.personalize_info.custom_logo && i) {
                                document.getElementsByClassName("logo")[0] && (document.getElementsByClassName("logo")[0].style.backgroundColor = "transparent");
                                var n = "/api/domain/download_image?domain=" + e.userInfoObj.domain + "&v=" + (new Date).getTime();
                                l(function () {
                                    document.getElementsByClassName("logo-link")[0].style.backgroundImage = 'url("' + n + '")'
                                }, 10)
                            }
                        }, e.customLogoTitle(), e.checkNeedMobileBind(), window.bdpa && bdpa.register({user_id: a.user_id}), window.BDP_enterpriseType = a.enterprise_type
                    } else 18 == n.status && (t.securityStrategy = {needMobileBind: !0}, e.checkNeedMobileBind())
                })
            }, e.userSetting = function () {
                e.runOnceAction = !0, e.accountInfoSetting = !1, e.userSystemSetting = {show: !1}, e.settingView = {}, e.hideOpt = {
                    editName: !0,
                    modifyPassword: !0,
                    newLogShow: !0
                }, e.isBinding = 0, e.mobile_info = {
                    orig_phone_num: "",
                    phone_num: "",
                    code: "",
                    sending: !1,
                    waitCodeTime: e.tips["user.getVerifyCode"]
                }, e.verifyCodeErrorTooMuch = 0, e.info = {}, e.info.old_pw = "", e.info.new_pw = "", e.info.confirm_pw = "", e.info.pwdStrong = "", e.info.err_hint = "", e.info.hint_pwd = "", e.current_language = "en" == $.cookie("locale") ? "English" : "简体中文", e.select_language_flag = "", e.pics = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], e.offlineTaskData = {
                    taskType: 0,
                    page: 1,
                    totalPages: 1,
                    fileList: [],
                    offlineFileName: null,
                    offlineStatus: 0,
                    isDoubleClickTask: !0
                }, t.fireOfflineTaskList = !0, t.$watch("fireOfflineTaskList", function (t, i) {
                    t != i && e.showOfflineTask()
                });
                e.$on("_websocketChartMessage_", function (i, n) {
                    var a = "string" == typeof n.data ? $.parseJSON(n.data) : n.data;
                    2 == a.type && (e.offlineTaskData.offlineFileName = a.filename, t.noticeStore.showOfflineTip = !0, t.noticeStore.offlineTaskNewFile = !0, e.offlineTaskData.offlineStatus = a.status)
                }), e.generatedCoordinateList = {
                    success: [],
                    failed: []
                }, e.$on("_websocketChartMessage_", function (t, i) {
                    if (8 == i.data.type || 12 == i.data.type) {
                        if (1 == i.data.status) {
                            var n = {tb_name: i.data.name, tb_id: i.data.tb_id};
                            e.generatedCoordinateList.success.push(n)
                        } else if (2 == i.data.status) {
                            var n = {tb_name: i.data.name, tb_id: i.data.tb_id};
                            e.generatedCoordinateList.failed.push(n)
                        }
                        e.$apply()
                    }
                }), e.user = {}, t.userInfoObj = {}, e.expireInfo = {}
            }, $("body").on("dashboard-scroll-start.setting", function () {
                $(".J_user_setting_layer").addClass("ng-hide"), $(".J_user_setting_account").addClass("ng-hide"), e.userSystemSetting.show = !1, e.accountInfoSetting = !1
            }), e.checkThemeChange = function (e) {
                h.changeSelectedTheme(e, !0)
            }, e.changeSelectedTheme = function (e) {
                h.changeSelectedTheme(e)
            }, e.resetDashFilterCache = function () {
                window.localStorage.setItem("global_filter_memory", angular.toJson([]))
            }, e.closeBrowserLogout = function () {
                if (window.localStorage.getItem("latestLeaveTime") > 0) {
                    var e = (new Date).getTime(), t = parseInt(window.localStorage.getItem("latestLeaveTime"));
                    if (Math.ceil((e - t) / 1e3) >= 30) {
                        BDPLogger.log("feStatistics", {
                            category: "user_interact",
                            action: "api_logout",
                            opt_label: (0, a.default)({options: "closeBrowserLogout"})
                        });
                        var n = {access_token: $.cookie("token")};
                        i.user.logout(n).then(function (e) {
                            $.cookie("token", "", {expires: -1, path: "/"}), $.cookie("master_role", "", {
                                expires: -1,
                                path: "/"
                            }), $.cookie("is_weak", "", {expires: -1}), window.localStorage.setItem("latestLeaveTime", 0), window.location.href = bdp.bdpLogin.checkPartnerLogin()
                        })
                    }
                } else window.localStorage.setItem("latestLeaveTime", 0)
            }, e.setZhLanguage = function () {
                t.language = "zh", s.use("zh")
            }, e.getCapacity = function () {
                i.user.getUserInfo().then(function (e) {
                    if (0 == e.status && 3 == t.enterprise_type) {
                        var i = e.result;
                        t.personalInfo.capacity_info = v.getCapacityInfo(i.personal_info)
                    }
                })
            }, e.routeTo = function (e) {
                c.path(e)
            }, e.checkCurRoutePermission = function (e, t) {
                var i = c.path();
                return !bdp.bdpPageStatus || bdp.bdpPageStatus.checkCurRoutePermission(i, e, t)
            }, e.setDefaultRoute = function (t) {
                var i = bdp.bdpPageStatus.getPermissionAccessRoute(t);
                e.click_show_view(i)
            }, e.checkNeedMobileBind = function () {
                t.securityStrategy && t.securityStrategy.needMobileBind && r.open({
                    template: "/static/main-nav/view/telephone-warn.html",
                    className: "ngdialog-theme-default ngdialog-width-348",
                    scope: e,
                    showClose: !1,
                    preCloseCallback: function () {
                        t.mobileBinding = 1, e.$$phase || e.$apply()
                    }
                }), 3 == t.enterprise_type && t.memberData && t.memberData.vipLevel > 0 && t.userInfoObj && !t.userInfoObj.mobile && "dashboard" == t.view && r.openConfirm({
                    template: "/static/partials/dialogTemplates/confirm-dialog.html",
                    className: "ngdialog-theme-default ngDialog-width-320",
                    scope: e,
                    data: {
                        trustHtmlStr: !0,
                        message: "<div class='text-center pt8'><img src='static/images/bind_phone.png' width='148'><p class='mg16'>亲爱的会员，您的账号尚未绑定手机号，请及时完成手机号绑定，享受更全面贴心的会员服务哦~~</p></div>",
                        title: "绑定手机号",
                        okValue: "立即绑定",
                        hideCancel: !0
                    }
                }).then(function () {
                    r.closeAll(), e.editPhoneNumber(!0)
                })
            }, e.doBindingNow = function () {
                r.closeAll(), t.mobileBinding = 1, e.accountInfoSetting = !0, e.editPhoneNumber(t.securityStrategy && t.securityStrategy.needMobileBind)
            }, e.passwordWarn = function () {
                var i = Number($.cookie("is_weak")), n = $.cookie("is_weak_hint"),
                    a = t.securityStrategy && t.securityStrategy.needMobileBind, o = false;
                if (o && (o = JSON.parse(o), o.HIDE_PASSWORD_WEAK_TIP)) return void console.log("你当前设置的密码强度过低，为了保证你的账号安全，请及时修改密码，谢谢！");
                !i || n || a || (r.open({
                    template: "/static/main-nav/view/password_warn.html",
                    className: "ngdialog-theme-default passwordWarn",
                    scope: e,
                    data: {}
                }), $.cookie("is_weak_hint", "1", {expires: 1}))
            }, e.modifyNow = function () {
                r.closeAll(), e.editPassword()
            }, e.$on("getUserInfo", function (t, i) {
                e.getUserInfo()
            }), e.$on("getCapacity", function (t, i) {
                e.getCapacity()
            }), e.goWarnList = function () {
                t.global.url_before_warn = c.path(), t.click_show_view("warn"), t.global.rule_id = ""
            }, e.cancelUserName = function () {
                i.user.getUserInfo().then(function (t) {
                    0 == t.status && (e.user.contact = t.result.contact, r.closeAll())
                })
            }, e.editUserBaseInfo = function () {
                r.open({
                    template: "/static/main-nav/edit-user-info/edit-user-base-info.html",
                    className: "ngdialog-theme-default ngDialog-width-320 edit-user-base-info",
                    scope: e,
                    data: {isPersonal: t.permision.personalSetIcon, userInfo: e.user},
                    controller: "editUserBaseInfoCtrl"
                })
            }, e.editPhoneNumber = function (t) {
                $("#phone_num").removeAttr("readonly"), r.open({
                    template: "/static/main-nav/edit-phone/edit-phone.html",
                    className: "ngdialog-theme-default ngDialog-width-300",
                    showClose: t,
                    scope: e,
                    data: {isBindingNew: t, isBinding: e.user.mobile ? 2 : 1},
                    controller: "editPhoneCtrl"
                })
            }, e.editPassword = function () {
                r.open({
                    template: "/static/main-nav/edit-password/edit-password.html",
                    className: "ngdialog-theme-default ngdialog-width-340",
                    data: {user: e.user},
                    controller: "editPasswordCtrl"
                })
            }, e.personalMemberInfo = function () {
                r.open({
                    template: "/static/js/personal/member-info/member-info.html",
                    className: "ngdialog-theme-default",
                    scope: e
                })
            }, e.changeLanguage = function (e) {
                $.cookie("locale", e, {path: "/", expires: 365}), p.location.search = "lang=" + e
            }, e.modifyPic = function () {
                e.user.pic = e.user.photo_id, r.open({
                    template: "/static/main-nav/modify-head-pic/modify-head-pic.html",
                    className: "ngdialog-theme-default ngDialog-width-330",
                    scope: e,
                    controller: "modifyHeadPicCtrl"
                })
            }, e.showOfflineTask = function () {
                e.offlineTaskData.isDoubleClickTask && (e.offlineTaskData.isDoubleClickTask = !1, t.noticeStore.offlineTaskNewFile = !1, e.offlineTaskData.taskType = 0, r.open({
                    template: "/static/main-nav/offline-task/offline-task.html",
                    className: "ngdialog-theme-default ngDialog-width-844",
                    scope: e,
                    controller: "offlineTaskCtrl"
                }))
            }, e.hideOfflineTipAction = function () {
                t.noticeStore.showOfflineTip && (i.user.hideNotification().then(function (e) {
                }), t.noticeStore.showOfflineTip = !1)
            }, e.checkTableDetail = function (t) {
                e.generatedCoordinateList.success = e.generatedCoordinateList.success.filter(function (e) {
                    return e.tb_id != t
                }), e.generatedCoordinateList.failed = e.generatedCoordinateList.failed.filter(function (e) {
                    return e.tb_id != t
                }), $.cookie("ds_tb_id", t), d.go("data_source", {}, {reload: !0})
            }, e.closeGeneratedTip = function () {
                e.generatedCoordinateList = {
                    success: [],
                    failed: []
                }
            }, e.themeInit = function () {
                e.themes = angular.copy(window.BDPThemes.themes), function () {
                    for (var t = 0, i = e.themes.length; t < i; t++) 1 == e.themes[t].id && (e.themes[t].name = s.instant("theme.StarryBlue")), 2 == e.themes[t].id && (e.themes[t].name = s.instant("theme.ElegantWhite"))
                }()
            }, e.changeUserPhotoSrc = function () {
                e.user.image_name = e.user.user_id, e.user.hasPhoto.url = "/api/user_image/download?sub_id=" + e.user.user_id + "&hash=" + +new Date, e.user.hasPhoto.show = !0
            }, e.changeUserPhoto = function () {
                r.open({
                    template: "/static/main-nav/change-user-photo/change-user-photo.html",
                    className: "ngdialog-theme-default ngDialog-width-600 change-user-photo",
                    scope: e,
                    controller: "changeUserPhotoCtrl"
                })
            }, e.hideUserSystemSetting = function () {
                e.userSystemSetting.show = !1
            }, e.navMemUpgradeLog = function (e) {
                BDPLogger.log("upgrade_member ", {
                    category: "user_interact",
                    action: "member_interact",
                    opt_label: e,
                    opt_value: 1
                })
            }, e.expiredReminder = function () {
                r.open({
                    template: "/static/partials/dialogTemplates/expired-reminder.html",
                    className: "ngdialog-theme-default",
                    scope: e
                })
            }, n(["user.nameCanNotNull", "user.saveSuccess", "user.saveFailed", "user.sendFailed", "user.inputPhoneNumber", "user.verifyCodeError", "user.errorAndGetAgain", "user.nameCanNotTooLog", "user.numberHasChanged", "user.inputOrigPhoneNumber", "user.inputNewPhoneNumber", "user.phoneNumberFormatError", "user.inputVerifyCode", "user.inputPicVerifyCode", "user.phoneNumHasBound", "user.verifyCodeError", "user.nameInvalid", "user.getVerifyCode", "user.pushSettingApp", "user.pushSettingEmail", "user.emailUnbind", "user.choosePhoto", "user.uploadPhotoSuccess", "delSuccess"], e), e.init()
        }

        var t = angular.module("mainNav", []);
        t.directive("toggleImg", [function () {
            return {
                restrict: "A",
                replace: !0,
                scope: {sessionid: "="},
                template: '<img ng-src="{{url}}" class="cursor-pointer vt-img" ng-click="toggleImg()"/>',
                controller: ["$scope", "$http", function (e, t) {
                    e.url = "/api/register/pic?session_id=" + e.sessionid, e.toggleImg = function () {
                        e.url = "/api/register/pic?session_id=" + e.sessionid + "&t=" + (new Date).getTime()
                    }, e.$on("changeCode", function () {
                        e.toggleImg()
                    })
                }]
            }
        }]), t.controller("mainNavCtrl", e), e.$inject = ["$scope", "$rootScope", "commonService", "$jsTipTranslate", "ngDialog", "errHint", "$translate", "$timeout", "$location", "$state", "$http", "$window", "guideService", "uiColorTheme", "userInfoService", "permissionWhitelist", "personalService"]
    }()
}, function (e, t, i) {
    i(406).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "data_72430145.css"
}, function (e, t, i) {
    i(408).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "main-nav_a98135e2.css"
}, function (e, t, i) {
    i(410).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "edit-user-base_6356d036.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o, s) {
            function l() {
                b.viewType = "editPhone", b.viewTitle = n.instant("user.base_info.modifymobile"), t.initPhoneData(), b.userInfo.mobile ? t.phoneData.isBinding = 2 : t.phoneData.isBinding = 1
            }

            function c() {
                b.viewType = "editEmail", b.viewTitle = n.instant("user.base_info.modifyemail"), t.initEmailData()
            }

            function d() {
                function e() {
                    var a = "en" == $.cookie("locale") ? "Try again" : "重试";
                    _.waitCodeTime = i-- + "s " + a, i <= 0 ? ($("#getCode").removeAttr("disabled"), _.sending = !1, _.waitCodeTime = n.instant("user.getVerifyCode")) : ($("#getCode").attr("disabled", "disabled"), t.waitingFun = s(function () {
                        e()
                    }, 1e3))
                }

                var i = 60;
                e()
            }

            function u() {
                if (!_.sending) {
                    var a = {usage: 0, orig_phone_num: "", phone_num: ""};
                    if (1 == _.isBinding) {
                        if ("" == _.phone_num) return void r(n.instant("user.inputPhoneNumber"));
                        if (!verifyHandle.mobile(_.phone_num)) return void r(n.instant("user.phoneNumberFormatError"));
                        a.usage = 1, a.phone_num = _.phone_num
                    } else {
                        if ("" == _.orig_phone_num) return void r(n.instant("user.inputOrigPhoneNumber"));
                        if (!verifyHandle.mobile(_.orig_phone_num)) return void r(n.instant("user.phoneNumberFormatError"));
                        if ("" == _.phone_num) return void r(n.instant("user.inputNewPhoneNumber"));
                        if (!verifyHandle.mobile(_.phone_num)) return void r(n.instant("user.phoneNumberFormatError"));
                        a.usage = 2, a.orig_phone_num = _.orig_phone_num, a.phone_num = _.phone_num
                    }
                    if (!_.pic_verify_code) return void r(n.instant("user.inputPicVerifyCode"));
                    a.verify_code = _.pic_verify_code, a.session_id = _.session_id, _.sending = !0, $("#getCode").attr("disabled", "disabled"), i.user.getMobileCode(a).then(function (i) {
                        if (0 != i.status) {
                            _.sending = !1, $("#getCode").removeAttr("disabled"), t.$broadcast("changeCode", "change");
                            var n = Number(i.status), a = "", o = e.language;
                            switch (n) {
                                case 11:
                                    a = "en" == o ? "Parameters error" : "参数错误";
                                    break;
                                case 1018:
                                    a = "en" == o ? "Verification code error" : "验证码错误";
                                    break;
                                case 1020:
                                    a = "en" == o ? "Phone number has been bound" : "该账号已绑定手机";
                                    break;
                                case 1021:
                                    a = "en" == o ? "The phone number has not been bound" : "手机未绑定";
                                    break;
                                case 1022:
                                    a = "en" == o ? "Original phone number is wrong" : "原手机号错误";
                                    break;
                                case 1023:
                                    a = "en" == o ? "The phone number is already bound by another account" : "手机号已被其他账号绑定";
                                    break;
                                case 1024:
                                    a = "en" == o ? "Get code failed" : "发送验证码失败";
                                    break;
                                case 1025:
                                    a = "en" == o ? "Get frequently, please try again after 24 hours" : "获取频繁，请24小时后再试";
                                    break;
                                case 1026:
                                    a = "en" == o ? "You can only get a code three times an hour, please try again later" : "一小时内只可获取三次验证码，请稍后再试";
                                    break;
                                case 23023:
                                    a = "en" == o ? "The account exits" : "该账号已存在", t.show = !0;
                                    break;
                                case 23003:
                                    a = "en" == o ? "The account does not exit" : "该账号不存在", t.show = !0;
                                    break;
                                case 23006:
                                case 23016:
                                    a = "en" == o ? "Get frequently, please try again after 24 hours" : "获取频繁。请24小时后再试";
                                    break;
                                default:
                                    a = "en" == o ? "Send failed" : "发送失败"
                            }
                            r(a)
                        } else t.verifyCodeErrorTooMuch = 0, d(), _.sending = !0
                    })
                }
            }

            function p() {
                if (1 == _.isBinding && "" == _.phone_num) return void r(n.instant("user.inputNewPhoneNumber"));
                if (2 == _.isBinding && "" == _.phone_num) return void r(n.instant("user.inputPhoneNumber"));
                if (2 == _.isBinding && "" == _.orig_phone_num) return void r(n.instant("user.inputOrigPhoneNumber"));
                if ("" == _.pic_verify_code) return void r(n.instant("user.inputPicVerifyCode"));
                if ("" == _.code) return void r(n.instant("user.inputVerifyCode"));
                if (t.verifyCodeErrorTooMuch) return r(n.instant("user.errorAndGetAgain")), void(_.code = "");
                var e = {usage: 1 == _.isBinding ? 1 : 2, verify_code: _.code};
                t.isSaving = !0, o.post("/api/user/verify_captcha", e).success(function (e) {
                    t.isSaving = !1, 0 == e.status ? (r(n.instant("user.phoneNumHasBound")), b.viewType = "base", b.viewTitle = n.instant("user.personalInfo"), b.userInfo.mobile = _.phone_num.substr(0, 3) + "****" + _.phone_num.substr(7), s.cancel(t.waitingFun), $(".nav-function").css("display", "block"), $.cookie("need_mobile_bind", 0)) : 1017 == e.status ? (r(n.instant("user.errorAndGetAgain")), t.verifyCodeErrorTooMuch = 1, _.code = "") : r(1018 == e.status ? n.instant("user.verifyCodeError") : n.instant("user.sendFailed"))
                })
            }

            function f(e) {
                e = e || "", t.settingView.href = getMailHref(e), a.open({
                    template: "/static/partials/dialogTemplates/send_email.html",
                    className: "ngdialog-theme-default ngDialog-width-300",
                    scope: t
                })
            }

            function h() {
                if (!t.isSaving) {
                    if (w.email && !w.old_email && b.isPersonal) return void r("请输入原邮箱");
                    if (w.email && !verifyHandle.email(w.old_email) && b.isPersonal) return void r("原邮箱格式错误");
                    if (!w.new_email) return void r("请输入新邮箱");
                    if (!verifyHandle.email(w.new_email)) return void r("新邮箱格式错误");
                    if (w.new_email == w.email) return b.viewType = "base", void(b.viewTitle = n.instant("user.personalInfo"));
                    t.isSaving = !0, b.isPersonal ? i.user.modifyPersonal({
                        old_email: w.old_email || "",
                        email: w.new_email
                    }).then(function (e) {
                        t.isSaving = !1, 0 == e.status && (r(n.instant("user.saveSuccess")), b.userInfo.email = w.new_email, b.viewType = "base", b.viewTitle = n.instant("user.personalInfo"), f(w.new_email))
                    }) : i.user.modifyInfo({email: w.new_email}).then(function (e) {
                        t.isSaving = !1, 0 == e.status ? (r(n.instant("user.saveSuccess")), b.userInfo.email = w.new_email, b.viewType = "base", b.viewTitle = n.instant("user.personalInfo")) : 1035 == e.status && r(n.instant("user.emailExist"))
                    })
                }
            }

            function g() {
                return "editPhone" == b.viewType ? (b.viewType = "base", b.viewTitle = n.instant("user.personalInfo"), void(t.phoneData.session_id = "")) : "editEmail" == b.viewType ? (b.viewType = "base", void(b.viewTitle = n.instant("user.personalInfo"))) : void a.closeAll()
            }

            function m(e) {
                for (var t = 0, i = 0; i < e.length; i++) {
                    var n = e.charCodeAt(i);
                    t += n >= 0 && n <= 128 ? 1 : 2
                }
                return t
            }

            function v() {
                if (!t.isSaving) {
                    var e = {}, o = t.editInfoData.userInfo;
                    if (!o.contact) return void r(n.instant("user.base_info.user_name") + n.instant("user.notFilled"));
                    if (!o.sex) return void r(n.instant("user.base_info.sex") + n.instant("user.notFilled"));
                    if (o.position && m(o.position) >= 50) return void r(n.instant("account.positionLimit50"));
                    e = {
                        contact: o.contact,
                        sex: o.sex,
                        position: o.position
                    }, t.isSaving = !0, b.isPersonal ? (x.contact == o.contact && delete e.contact, i.user.modifyPersonal(e).then(function (e) {
                        t.isSaving = !1, 0 == e.status && (r(n.instant("user.saveSuccess")), y(), a.closeAll())
                    })) : i.user.modifyInfo(e).then(function (e) {
                        t.isSaving = !1, 0 == e.status && (r(n.instant("user.saveSuccess")), y(), a.closeAll())
                    })
                }
            }

            function y() {
                t.ngDialogData.userInfo.contact = b.userInfo.contact, t.ngDialogData.userInfo.mobile = b.userInfo.mobile, t.ngDialogData.userInfo.email = b.userInfo.email, t.ngDialogData.userInfo.position = b.userInfo.position, t.ngDialogData.userInfo.sex = b.userInfo.sex
            }

            var b = null, _ = null, w = null, x = null;
            t.isSaving = !1, t.initPhoneData = function () {
                t.phoneData = {
                    isBinding: 0,
                    orig_phone_num: "",
                    phone_num: "",
                    code: "",
                    sending: !1,
                    session_id: bdp.utils.getSessionId(),
                    pic_verify_code: "",
                    waitCodeTime: n.instant("user.getVerifyCode"),
                    getMobileCode: u,
                    savePhoneFun: p
                }, _ = t.phoneData
            }, t.initEmailData = function () {
                t.emailData = {old_email: "", new_email: "", saveEmailFun: h}, w = t.emailData
            }, t.initView = function () {
                t.verifyCodeErrorTooMuch = 0, t.editInfoData = {
                    viewType: "base",
                    viewTitle: n.instant("user.personalInfo"),
                    isPersonal: t.ngDialogData.isPersonal,
                    userInfo: angular.copy(t.ngDialogData.userInfo),
                    saveFun: v,
                    changeMobile: l,
                    changeEmail: c,
                    closeDialog: g
                }, x = angular.copy(t.ngDialogData.userInfo), b = t.editInfoData
            }, t.initView()
        }

        angular.module("mainNav").controller("editUserBaseInfoCtrl", e), e.$inject = ["$rootScope", "$scope", "commonService", "$translate", "ngDialog", "errHint", "$http", "$timeout"]
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i, n, r, o) {
            function s() {
                var t = e.info, n = e.vmData, a = {password: t.oldPwd, target: 1};
                n.loading = !0, i.user.checkPwd(a).then(function (t) {
                    0 == t.status && i.user.sendModifyPwdEmail().then(function (t) {
                        0 == t.status && (e.vmData.step = "email_2", n.loading = !1)
                    })
                })
            }

            function l() {
                t.closeAll()
            }

            function c() {
                var t = e.info, a = t.code;
                if (!a) return void n("请输入短信验证码");
                var r = {usage: 3, target: 1, verify_code: a};
                i.user.checkPhoneCode(r).then(function (t) {
                    0 == t.status && (e.vmData.step = "mobile_2")
                })
            }

            function d() {
                var t = e.info.new_password;
                if (e.vmData.passwordView && !e.info.oldPwd) return void n("请输入旧密码");
                if (!t) return void n("请输入新密码");
                if (t !== e.info.confirm_password) return n("两次密码不一致!"), !1;
                if (verifyHandle.password(t)) n("密码强度过低，请重新输入包含字母与数字的并且长度不小于8位的密码"); else {
                    var r = {new_password: t};
                    e.vmData.passwordView && (r.old_password = e.info.oldPwd), i.user.modifyPassword(r).then(function (t) {
                        0 == t.status && ($.cookie("is_weak", 0), $.cookie("is_weak_hint", 0), e.vmData.step = "mobile_3", e.vmData.modifySuccess = !0, BDPLogger.log("feStatistics", {
                            category: "user_interact",
                            action: "api_logout",
                            opt_label: (0, a.default)({options: "modifyPassword"})
                        }), setTimeout(function () {
                            i.user.logout().then(function () {
                                window.location.href = bdp.bdpLogin.checkPartnerLogin()
                            })
                        }, 1e3))
                    })
                }
            }

            !function () {
                var t = e.ngDialogData.user;
                e.vmData = {
                    mobile: t.mobile,
                    email: t.email,
                    mobileView: !!t.mobile && !0,
                    emailView: !t.mobile && !!t.email && !0,
                    bindView: !t.mobile && !t.email && !0,
                    loading: !1,
                    passwordView: !1
                }, e.info = {}, e.phoneCodeData = {autoSend: !1}, e.voiceCodeData = {
                    defaultText: r.instant("user.voiceSendCode"),
                    timerText: r.instant("user.SendedCode"),
                    reSendText: r.instant("user.voiceSendCode"),
                    smsChannel: 1
                };
                var i = e.vmData;
                i.mobileView ? i.step = "mobile_1" : i.step = "email_1", e.pwdStrong = {}
            }(), e.vmFun = {
                surePassword: function () {
                    var t = e.vmData.step;
                    if (e.vmData.passwordView) d(); else switch (t) {
                        case"email_1":
                            s();
                            break;
                        case"email_2":
                            l();
                            break;
                        case"mobile_1":
                            c();
                            break;
                        case"mobile_2":
                            d();
                            break;
                        case"mobile_3":
                            l()
                    }
                }
            }
        }

        angular.module("mainNav").controller("editPasswordCtrl", e), e.$inject = ["$scope", "ngDialog", "commonService", "errHint", "$translate", "$timeout"]
    }()
}, function (e, t, i) {
    "use strict";
    angular.module("mainNav").directive("commonSendCode", ["commonService", "$timeout", function (e, t) {
        return {
            restrict: "A", controller: ["$scope", function (i) {
                var n = null;
                this.binders = [], this.addBinder = function (e) {
                    this.binders.push(e), this.initBinder()
                }, this.initBinder = function () {
                    var e = this;
                    angular.forEach(e.binders, function (e) {
                        $(e.elem).text(e.defaultText)
                    })
                }, this.sendCode = function (t) {
                    var i = this;
                    e.user.sendPhoneCode(t).then(function (e) {
                        0 == e.status && i.verifyTimer()
                    })
                }, this.verifyTimer = function () {
                    function e() {
                        i <= 0 ? angular.forEach(a.binders, function (e) {
                            $(e.elem).removeAttr("disabled").text(e.reText)
                        }) : (angular.forEach(a.binders, function (e) {
                            $(e.elem).attr("disabled", "true").text(i + e.timerText)
                        }), n = t(function () {
                            i--, e()
                        }, 1e3))
                    }

                    var i = 60, a = this;
                    e()
                }, this.cancelTimer = function () {
                    t.cancel(n)
                }
            }], link: function (e, t, i, n) {
                t.bind("$destroy", n.cancelTimer)
            }
        }
    }]).directive("sendPhoneCode", ["commonService", "$timeout", "$translate", function (e, t, i) {
        return {
            restrict: "E",
            template: '<button class="mobile-code-btn" ng-click="sendCode()"></button>',
            replace: !0,
            scope: {options: "=", perSendFun: "&"},
            require: "?^commonSendCode",
            link: function (e, t, n, a) {
                e.sendCode = function () {
                    var t = e.defaultOptions, i = {usage: t.usage || 3, sms_channel: t.smsChannel || 0},
                        n = e.perSendFun();
                    n !== !1 && (n && angular.extend(i, n), a.sendCode(i))
                }, function () {
                    e.defaultOptions = {
                        defaultText: i.instant("user.sendCode"),
                        timerText: i.instant("user.SendedCode"),
                        reSendText: i.instant("user.sendCode"),
                        smsChannel: 0
                    }, angular.extend(e.defaultOptions, e.options);
                    var n = e.defaultOptions;
                    e.btnText = n.defaultText, e.options.autoSend && e.sendCode(), a.addBinder({
                        elem: t,
                        timerText: n.timerText,
                        reText: n.reSendText,
                        defaultText: n.defaultText
                    })
                }()
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    angular.module("mainNav").directive("mobileCodeInput", [function () {
        return {
            restrict: "E",
            template: '\t\t\t\t<div class="mobile-code-input">\t\t\t\t\t<input type="text" ng-model="vmData.code1" ng-change="changeFocus(0)"><input type="text" ng-model="vmData.code2" ng-change="changeFocus(1)"><input type="text" ng-model="vmData.code3" ng-change="changeFocus(2)"><input type="text" ng-model="vmData.code4" ng-change="changeFocus(3)"><input type="text" ng-model="vmData.code5" ng-change="changeFocus(4)"><input type="text" ng-model="vmData.code6" ng-change="changeFocus(5)">\t\t\t\t</div>',
            replace: !0,
            scope: {code: "="},
            link: function (e, t) {
                !function () {
                    e.vmData = {code1: "", code2: "", code3: "", code4: "", code5: "", code6: ""}
                }(), e.changeFocus = function (i) {
                    var n = e.vmData;
                    e.code = n.code1 + n.code2 + n.code3 + n.code4 + n.code5 + n.code6, 5 != i && $(t).find("input")[i + 1].focus()
                }
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o) {
            e.userPhotoData = null;
            var s = function (e) {
                h(e)
            }, l = function () {
                angular.element("#upload_photo_btn").click()
            }, c = function (e) {
                console.log("onChange fired")
            }, d = function () {
                console.log("onLoadBegin fired")
            }, u = function () {
                e.userPhotoData.isLoading = !1, console.log("onLoadDone fired")
            }, p = function () {
                e.userPhotoData.isLoading = !1, console.log("onLoadError fired")
            }, f = function () {
                if (!e.userPhotoData.imageDataURI) return void n(e.tips["user.choosePhoto"]);
                var t = $.cookie("user_id");
                r.upload({
                    url: "/api/user_image/upload",
                    data: {file: r.dataUrltoBlob(e.userPhotoData.resImageDataURI, t + "_photo")}
                }).then(function (t) {
                    var i = t.data;
                    0 == i.status ? (e.changeUserPhotoSrc(), n(e.tips["user.uploadPhotoSuccess"]), a.closeAll()) : n(+i.status, {warn_mesg: i.errstr})
                })
            };
            e.initView = function () {
                e.userPhotoData = {
                    acceptType: ".jpg, .png, .jpeg, .bmp",
                    isLoading: !1,
                    size: "small",
                    type: "circle",
                    imageDataURI: "",
                    resImageDataURI: "",
                    resImgFormat: "image/png",
                    resImgQuality: .5,
                    areaMinSize: 50,
                    resImgSize: 100,
                    uploadPhoto: s,
                    uploadPhotoAgain: l,
                    onChange: c,
                    onLoadBegin: d,
                    onLoadDone: u,
                    onLoadError: p,
                    savePhoto: f
                }, e.ableUpload = !0, (navigator.userAgent.indexOf("MSIE") != -1 || "Microsoft Internet Explorer" == navigator.appName || window.ActiveXObject) && ("9." == navigator.appVersion.match(/9./i) && window.addEventListener || 9 == document.documentMode) && (e.ableUpload = !1)
            }, e.initView();
            var h = function (i) {
                t(function () {
                    e.userPhotoData.isLoading = !0
                }, 0);
                var n = i;
                if (!n) return void(e.userPhotoData.isLoading = !1);
                var a = new FileReader;
                a.onload = function (t) {
                    e.$apply(function (e) {
                        e.userPhotoData.imageDataURI = t.target.result
                    })
                }, a.readAsDataURL(n), t(function () {
                    var e = angular.element("img-crop"), t = Number(e.find("canvas").height()), i = Number(e.height());
                    t < i && e.css({"padding-top": (i - t) / 2 + "px"})
                }, 100)
            };
            o(["user.choosePhoto", "user.uploadPhotoSuccess"], e)
        }

        e.$inject = ["$scope", "$timeout", "$http", "errHint", "ngDialog", "Upload", "$jsTipTranslate"], angular.module("mainNav").controller("changeUserPhotoCtrl", e)
    }()
}, function (e, t, i) {
    i(417).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "change-user-photo_d26f65e6.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o, s) {
            function l() {
                function t() {
                    var n = "en" == $.cookie("locale") ? "Try again" : "重试";
                    e.mobile_info.waitCodeTime = i-- + "s " + n, i <= 0 ? ($("#getcode").removeAttr("disabled"), e.sending = !1, e.mobile_info.waitCodeTime = e.tips["user.getVerifyCode"], $("#phone_num").removeAttr("readonly")) : ($("#getcode").attr("disabled", "disabled"), e.waiting = r(function () {
                        t()
                    }, 1e3))
                }

                var i = 60;
                t()
            }

            n(["user.nameCanNotNull", "user.saveSuccess", "user.saveFailed", "user.sendFailed", "user.inputPhoneNumber", "user.verifyCodeError", "user.errorAndGetAgain", "user.nameCanNotTooLog", "user.numberHasChanged", "user.inputOrigPhoneNumber", "user.inputNewPhoneNumber", "user.phoneNumberFormatError", "user.inputVerifyCode", "user.inputPicVerifyCode", "user.phoneNumHasBound", "user.verifyCodeError", "user.nameInvalid", "user.getVerifyCode", "user.pushSettingApp", "user.pushSettingEmail", "user.emailUnbind", "user.choosePhoto", "user.uploadPhotoSuccess"], e), e.mobile_info = {
                orig_phone_num: "",
                phone_num: "",
                code: "",
                sending: !1,
                session_id: bdp.utils.getSessionId(),
                pic_verify_code: "",
                waitCodeTime: e.tips["user.getVerifyCode"]
            }, r(function () {
                e.mobile_info.waitCodeTime = e.tips["user.getVerifyCode"]
            }, 1e3), i.userInfoObj.mobile ? e.isBinding = 2 : e.isBinding = 1, e.getMobileCode = function () {
                var n = {usage: 0, orig_phone_num: "", phone_num: ""};
                if (!e.mobile_info.sending) {
                    if (1 == e.isBinding) {
                        if ("" == e.mobile_info.phone_num) return void t(e.tips["user.inputPhoneNumber"]);
                        if (!verifyHandle.mobile(e.mobile_info.phone_num)) return void t(e.tips["user.phoneNumberFormatError"]);
                        n.usage = 1, n.phone_num = e.mobile_info.phone_num
                    } else {
                        if ("" == e.mobile_info.orig_phone_num) return void t(e.tips["user.inputOrigPhoneNumber"]);
                        if (!verifyHandle.mobile(e.mobile_info.orig_phone_num)) return void t(e.tips["user.phoneNumberFormatError"]);
                        if ("" == e.mobile_info.phone_num) return void t(e.tips["user.inputNewPhoneNumber"]);
                        if (!verifyHandle.mobile(e.mobile_info.phone_num)) return void t(e.tips["user.phoneNumberFormatError"]);
                        e.mobile_info.orig_phone_num, e.mobile_info.phone_num, n.usage = 2, n.orig_phone_num = e.mobile_info.orig_phone_num, n.phone_num = e.mobile_info.phone_num
                    }
                    if (!e.mobile_info.pic_verify_code) return void t(e.tips["user.inputPicVerifyCode"]);
                    n.verify_code = e.mobile_info.pic_verify_code, n.session_id = e.mobile_info.session_id, e.mobile_info.sending = !0, $("#getcode").attr("disabled", "disabled"), a.user.getMobileCode(n).then(function (n) {
                        if (0 != n.status) {
                            e.$broadcast("changeCode", "change"), e.mobile_info.sending = !1, $("#getcode").removeAttr("disabled");
                            var a = (Number(n.status), "");
                            i.language;
                            a = n.errstr, t(a)
                        } else e.mobile_info.sending = !0, e.verifyCodeErrorTooMuch = 0, $("#phone_num").attr("readonly", "readonly"), l()
                    })
                }
            }, e.cancelPhone = function () {
                e.isBinding = 0;
                var t = e.mobile_info.sending, i = e.mobile_info.waitCodeTime;
                e.mobile_info = {
                    orig_phone_num: "",
                    phone_num: "",
                    code: "",
                    sending: t,
                    waitCodeTime: i
                }, $("#phone_num").removeAttr("readonly"), s.closeAll()
            }, e.saveNewPhoneNumber = function () {
                if ("" == e.mobile_info.phone_num) return void t(e.tips["user.inputPhoneNumber"]);
                if ("" == e.mobile_info.pic_verify_code) return void t(e.tips["user.inputPicVerifyCode"]);
                if ("" == e.mobile_info.code) return void t(e.tips["user.inputVerifyCode"]);
                if (e.verifyCodeErrorTooMuch) return t(e.tips["user.errorAndGetAgain"]), void(e.mobile_info.code = "");
                var n = {usage: 1, verify_code: e.mobile_info.code};
                1 == e.isBinding ? n.usage = 1 : n.usage = 2, o.post("/api/user/verify_captcha", n).success(function (n) {
                    0 == n.status ? (t(e.tips["user.phoneNumHasBound"]), $(".nav-function").css("display", "block"), e.isBinding = 0, i.userInfoObj.mobile = e.mobile_info.phone_num.substr(0, 3) + "****" + e.mobile_info.phone_num.substr(7), e.mobile_info = {
                        orig_phone_num: "",
                        phone_num: "",
                        code: "",
                        sending: !1,
                        waitCodeTime: e.tips["user.getVerifyCode"]
                    }, r.cancel(e.waiting), $("#phone_num").removeAttr("readonly"), e.hideOpt = {
                        editName: !0,
                        modifyPassword: !0,
                        newLogShow: !0
                    }, i.securityStrategy && i.securityStrategy.needMobileBind && (location.href = "/index.html", i.securityStrategy.needMobileBind = !1), s.closeAll()) : 1017 == n.status ? (t(e.tips["user.errorAndGetAgain"]), e.verifyCodeErrorTooMuch = 1, e.mobile_info.code = "") : t(1018 == n.status ? e.tips["user.verifyCodeError"] : e.tips["user.sendFailed"])
                })
            }, e.savePhoneNumber = function () {
                if ("" == e.mobile_info.orig_phone_num) return void t(e.tips["user.inputOrigPhoneNumber"]);
                if ("" == e.mobile_info.phone_num) return void t(e.tips["user.inputNewPhoneNumber"]);
                if ("" == e.mobile_info.pic_verify_code) return void t(e.tips["user.inputPicVerifyCode"]);
                if ("" == e.mobile_info.code) return void t(e.tips["user.inputVerifyCode"]);
                if (e.verifyCodeErrorTooMuch) return t(e.tips["user.errorAndGetAgain"]), void(e.mobile_info.code = "");
                var n = {usage: 2, verify_code: e.mobile_info.code};
                1 == e.isBinding ? n.usage = 1 : n.usage = 2, o.post("/api/user/verify_captcha", n).success(function (n) {
                    0 == n.status ? (t(e.tips["user.numberHasChanged"]), e.isBinding = 0, i.userInfoObj.mobile = e.mobile_info.phone_num.substr(0, 3) + "****" + e.mobile_info.phone_num.substr(7), e.mobile_info = {
                        orig_phone_num: "",
                        phone_num: "",
                        code: "",
                        sending: !1,
                        waitCodeTime: e.tips["user.getVerifyCode"]
                    }, r.cancel(e.waiting), $("#phone_num").removeAttr("readonly"), s.closeAll()) : 1017 == n.status ? (t(e.tips["user.errorAndGetAgain"]), e.verifyCodeErrorTooMuch = 1, e.mobile_info.code = "") : t(1018 == n.status ? e.tips["user.verifyCodeError"] : e.tips["user.sendFailed"])
                })
            }
        }

        angular.module("mainNav").controller("editPhoneCtrl", e), e.$inject = ["$scope", "errHint", "$rootScope", "$jsTipTranslate", "commonService", "$timeout", "$http", "ngDialog"]
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n) {
            e.savePic = function () {
                var a = e.user.pic;
                i.user.modifyPersonal({photo_id: a}).then(function (i) {
                    0 == i.status && (t.photo_id = e.user.photo_id = a, n.closeAll())
                })
            }
        }

        e.$inject = ["$scope", "$rootScope", "commonService", "ngDialog"], angular.module("mainNav").controller("modifyHeadPicCtrl", e)
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a) {
            function r() {
                e.offlineTaskData.loading = !0, e.offlineTaskData.isDoubleClickTask = !0, i.user.exportFileList().then(function (t) {
                    e.offlineTaskData.loading = !1, 0 == t.status && (e.offlineTaskData.fileList = t.result.files, e.offlineTaskData.totalPages = t.result.total_pages, e.offlineTaskData.page = t.result.page)
                })
            }

            !function () {
                r()
            }(), e.download = function (e) {
                var t = e.link + "&task_id=" + e.task_id;
                n.location.href = t
            }, e.delTask = function (t) {
                i.user.exportDelTask({task_ids: angular.toJson([t])}).then(function (t) {
                    if (0 == t.status) {
                        a(e.tips.delSuccess);
                        var i = Math.min(e.offlineTaskData.page, e.offlineTaskData.totalPages);
                        1 === e.offlineTaskData.fileList.length && (i = i > 1 ? i - 1 : 1), e.offlineFileListPage(i, e.offlineTaskData.taskType)
                    }
                })
            }, e.delAllTasks = function () {
                i.user.exportDelTask({task_type: e.offlineTaskData.taskType}).then(function (t) {
                    0 == t.status && (a(e.tips.delSuccess), e.offlineFileListPage(1, e.offlineTaskData.taskType))
                })
            }, e.offlineFileListPage = function (t, n) {
                var a = {};
                t > 0 && t <= e.offlineTaskData.totalPages && (a = {
                    page: t,
                    task_type: n
                }, i.user.exportFileList(a).then(function (t) {
                    0 == t.status && (e.offlineTaskData.fileList = t.result.files, e.offlineTaskData.totalPages = t.result.total_pages, e.offlineTaskData.page = t.result.page)
                }))
            };
            e.$on("_websocketChartMessage_", function (e, i) {
                2 == ("string" == typeof i.data ? $.parseJSON(i.data) : i.data).type && (t.noticeStore.showOfflineTip = !1, r())
            })
        }

        e.$inject = ["$scope", "$rootScope", "commonService", "$window", "errHint"], angular.module("mainNav").controller("offlineTaskCtrl", e)
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        angular.module("mainNav").controller("LogoutController", ["$scope", "$window", "$rootScope", "commonService", function (e, t, i, n) {
            e.logout = function () {
                var e = {access_token: $.cookie("token")};
                BDPLogger.log("feStatistics", {
                    category: "user_interact",
                    action: "api_logout",
                    opt_label: (0, a.default)({options: "userLogout"})
                }), n.user.logout(e).then(function (e) {
                    $.cookie("token", "", {expires: -1, path: "/"}), $.cookie("master_role", "", {
                        expires: -1,
                        path: "/"
                    }), $.cookie("is_weak", "", {expires: -1}), window.localStorage.setItem("latestLeaveTime", 0), 2 == i.enterprise_type && window.close(), window.location.href = bdp.bdpLogin.checkPartnerLogin(e.result.idp_logout)
                })
            }, window.onbeforeunload = function () {
                i.securityStrategy && i.securityStrategy.closeBrowserTokenFailure ? window.localStorage.setItem("latestLeaveTime", (new Date).getTime()) : window.localStorage.setItem("latestLeaveTime", 0)
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    i(423), i(424), i(425), i(427), i(333);
    var n = angular.module("BC.chartEdit", ["ngDialog", "monospaced.elastic", "ui-rangeSlider", "ui.bootstrap.bindHtml"]),
        a = function (e) {
            var t = i(85)();
            i.e(1).then(function (n) {
                var a = [];
                return a.push(i(719)), a.push(i(720)), a.push(i(721)), a.push(i(722)), a.push(i(723)), a.push(i(724)), a.push(i(725)), a.push(i(726)), a.push(i(727)), a.push(i(728)), a.push(i(729)), a.push(i(730)), a.push(i(731)), a.push(i(732)), a.push(i(733)), a.push(i(734)), a.push(i(735)), a.push(i(736)), a.push(i(737)), a.push(i(738)), a.push(i(739)), a.push(i(740)), a.push(i(741)), a.push(i(742)), a.push(i(743)), a.push(i(744)), a.push(i(745)), a.push(i(746)), a.push(i(747)), a.push(i(748)), a.push(i(749)), a.push(i(750)), a.push(i(751)), a.push(i(752)), a.push(i(753)), t ? t(function () {
                    e(a)
                }) : e(a)
            }.bind(null, i)).catch(i.oe)
        };
    i(429);
    var r = {
        chart_edit: {
            url: "/chart_edit/:projId/:dashId/:chartId?page_referrer",
            templateUrl: i(430),
            controller: "ChartController"
        },
        custom_chart_edit: {
            url: "/custom_chart_edit/:projId/:dashId/:chartId?page_referrer&cty_id",
            templateUrl: "/static/chart-edit/views/tpl/custom-chart-edit.html",
            controller: "CustomChartEditCtrl"
        },
        gis_edit: {
            url: "/gis_edit/:projId/:dashId/:chartId?page_referrer",
            templateUrl: "/static/chart-edit/views/tpl/gis-edit.html",
            controller: "gisCtrl"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("monospaced.elastic", []).constant("msdElasticConfig", {append: ""}).directive("msdElastic", ["$timeout", "$window", "msdElasticConfig", function (e, t, i) {
            return {
                require: "ngModel", restrict: "A, C", link: function (n, a, r, o) {
                    function s() {
                        var e = v;
                        f = d, _ = getComputedStyle(d), angular.forEach(L, function (t) {
                            e += t + ":" + _.getPropertyValue(t) + ";"
                        }), b.setAttribute("style", e)
                    }

                    function l() {
                        var t, i, a, r, o;
                        f !== d && s(), h || (h = !0, b.value = d.value + g, b.style.overflowY = d.style.overflowY, t = "" === d.style.height ? "auto" : parseInt(d.style.height, 10), i = getComputedStyle(d).getPropertyValue("width"), "px" === i.substr(i.length - 2, 2) && (r = parseInt(i, 10) - C.width, b.style.width = r + "px"), a = b.scrollHeight, a > D ? (a = D, o = "scroll") : a < T && (a = T), a += C.height, d.style.overflowY = o || "hidden", t !== a && (d.style.height = a + "px", n.$emit("elastic:resize", u)), e(function () {
                            h = !1
                        }, 1))
                    }

                    function c() {
                        h = !1, l()
                    }

                    var d = a[0], u = a;
                    if ("TEXTAREA" === d.nodeName && t.getComputedStyle) {
                        u.css({overflow: "hidden", "overflow-y": "hidden", "word-wrap": "break-word"});
                        var p = d.value;
                        d.value = "", d.value = p;
                        var f, h, g = r.msdElastic ? r.msdElastic.replace(/\\n/g, "\n") : i.append,
                            m = angular.element(t),
                            v = "position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",
                            y = angular.element('<textarea aria-hidden="true" tabindex="-1" style="' + v + '"/>').data("elastic", !0),
                            b = y[0], _ = getComputedStyle(d), w = _.getPropertyValue("resize"),
                            x = "border-box" === _.getPropertyValue("box-sizing") || "border-box" === _.getPropertyValue("-moz-box-sizing") || "border-box" === _.getPropertyValue("-webkit-box-sizing"),
                            C = x ? {
                                width: parseInt(_.getPropertyValue("border-right-width"), 10) + parseInt(_.getPropertyValue("padding-right"), 10) + parseInt(_.getPropertyValue("padding-left"), 10) + parseInt(_.getPropertyValue("border-left-width"), 10),
                                height: parseInt(_.getPropertyValue("border-top-width"), 10) + parseInt(_.getPropertyValue("padding-top"), 10) + parseInt(_.getPropertyValue("padding-bottom"), 10) + parseInt(_.getPropertyValue("border-bottom-width"), 10)
                            } : {width: 0, height: 0}, k = parseInt(_.getPropertyValue("min-height"), 10),
                            S = parseInt(_.getPropertyValue("height"), 10), T = Math.max(k, S) - C.height,
                            D = parseInt(_.getPropertyValue("max-height"), 10),
                            L = ["font-family", "font-size", "font-weight", "font-style", "letter-spacing", "line-height", "text-transform", "word-spacing", "text-indent"];
                        u.data("elastic") || (D = D && D > 0 ? D : 9e4, b.parentNode !== document.body && angular.element(document.body).append(b), u.css({resize: "none" === w || "vertical" === w ? "none" : "horizontal"}).data("elastic", !0), d.oninput = "onpropertychange" in d && "oninput" in d ? d.onkeyup = l : l, m.bind("resize", c), n.$watch(function () {
                            return o.$modelValue
                        }, function (e) {
                            c()
                        }), n.$on("elastic:adjust", function () {
                            s(), c()
                        }), e(l), n.$on("$destroy", function () {
                            y.remove(), m.unbind("resize", c)
                        }))
                    }
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        var e = 1 === angular.version.major && 0 === angular.version.minor;
        angular.module("ui-rangeSlider", []).directive("rangeSlider", ["$document", "$filter", "$log", function (t, i, n) {
            var a = ".rangeSlider", r = {
                disabled: !1,
                orientation: "horizontal",
                step: 0,
                decimalPlaces: 0,
                showValues: !0,
                preventEqualMinMax: !1,
                attachHandleValues: !1
            }, o = window.navigator.pointerEnabled ? {
                start: "pointerdown",
                move: "pointermove",
                end: "pointerup",
                over: "pointerdown",
                out: "mouseout"
            } : window.navigator.msPointerEnabled ? {
                start: "MSPointerDown",
                move: "MSPointerMove",
                end: "MSPointerUp",
                over: "MSPointerDown",
                out: "mouseout"
            } : {
                start: "mousedown touchstart",
                move: "mousemove touchmove",
                end: "mouseup touchend",
                over: "mouseover touchstart",
                out: "mouseout"
            }, s = o.start + a, l = o.move + a, c = o.end + a, d = o.over + a, u = o.out + a, p = function (e) {
                try {
                    return [e.clientX || e.originalEvent.clientX || e.originalEvent.touches[0].clientX, e.clientY || e.originalEvent.clientY || e.originalEvent.touches[0].clientY]
                } catch (e) {
                    return ["x", "y"]
                }
            }, f = function (e) {
                return e < 0 ? 0 : e > 100 ? 100 : e
            }, h = function (e) {
                return !isNaN(parseFloat(e)) && isFinite(e)
            }, g = {
                disabled: "=?",
                min: "=",
                max: "=",
                modelMin: "=?",
                modelMax: "=?",
                onHandleDown: "&",
                onHandleUp: "&",
                orientation: "@",
                step: "@",
                decimalPlaces: "@",
                filter: "@",
                filterOptions: "@",
                showValues: "@",
                pinHandle: "@",
                preventEqualMinMax: "@",
                attachHandleValues: "@",
                hideMinBtn: "@",
                hideMaxBtn: "@",
                preventMaxVal: "@",
                preventMinVal: "@",
                getterSetter: "@"
            };
            return e && (g.disabled = "=", g.modelMin = "=", g.modelMax = "="), {
                restrict: "A",
                replace: !0,
                template: ['<div class="ngrs-range-slider">', '<div class="ngrs-runner">', '<div class="ngrs-handle ngrs-handle-min"><i></i></div>', '<div class="ngrs-handle ngrs-handle-max"><i></i></div>', '<div class="ngrs-join"></div>', "</div>", '<div class="ngrs-value-runner">', '<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>', '<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>', "</div>", "</div>"].join(""),
                scope: g,
                link: function (e, o, g, m) {
                    function v(t) {
                        return e.getterSetter ? arguments.length ? e.modelMin(t) : e.modelMin() : e.preventMinVal && t >= e.preventMinVal ? arguments.length ? e.modelMin = e.preventMinVal : e.preventMinVal : arguments.length ? e.modelMin = t : e.modelMin
                    }

                    function y(t) {
                        return e.getterSetter ? arguments.length ? e.modelMax(t) : e.modelMax() : e.preventMaxVal && t <= e.preventMaxVal ? arguments.length ? e.modelMax = e.preventMaxVal : e.preventMaxVal : arguments.length ? e.modelMax = t : e.modelMax
                    }

                    function b(e) {
                        "min" === e ? (angular.element(D[0]).css("display", "none"), angular.element(D[1]).css("display", "block")) : "max" === e ? (angular.element(D[0]).css("display", "block"), angular.element(D[1]).css("display", "none")) : (angular.element(D[0]).css("display", "block"), angular.element(D[1]).css("display", "block"))
                    }

                    function _(e) {
                        e ? T.addClass("ngrs-disabled") : T.removeClass("ngrs-disabled")
                    }

                    function w() {
                        e.min > e.max && k("min must be less than or equal to max"),
                        angular.isDefined(e.min) && angular.isDefined(e.max) && (h(e.min) || k("min must be a number"), h(e.max) || k("max must be a number"), O = e.max - e.min, F = [e.min, e.max], x())
                    }

                    function x() {
                        if (v() > y() && (S("modelMin must be less than or equal to modelMax"), v(y())), (angular.isDefined(v()) || "min" === e.pinHandle) && (angular.isDefined(y()) || "max" === e.pinHandle)) {
                            h(v()) || ("min" !== e.pinHandle && S("modelMin must be a number"), v(e.min)), h(y()) || ("max" !== e.pinHandle && S("modelMax must be a number"), y(e.max));
                            var t, n, a = f((v() - e.min) / O * 100), r = f((y() - e.min) / O * 100);
                            if (e.attachHandleValues && (t = a, n = r), v(Math.max(e.min, v())), y(Math.min(e.max, y())), e.filter && e.filterOptions) e.filteredModelMin = i(e.filter)(v(), e.filterOptions), e.filteredModelMax = i(e.filter)(y(), e.filterOptions); else if (e.filter) {
                                var o, s, l = e.filter.split(":"), c = e.filter.split(":")[0], d = l.slice().slice(1);
                                d = d.map(function (e) {
                                    return h(e) ? +e : '"' == e[0] && '"' == e[e.length - 1] || "'" == e[0] && "'" == e[e.length - 1] ? e.slice(1, -1) : void 0
                                }), o = d.slice(), s = d.slice(), o.unshift(v()), s.unshift(y()), e.filteredModelMin = i(c).apply(null, o), e.filteredModelMax = i(c).apply(null, s)
                            } else e.filteredModelMin = v(), e.filteredModelMax = y();
                            e.min === e.max && v() == y() ? (angular.element(D[0]).css(E, "0%"), angular.element(D[1]).css(E, "100%"), e.attachHandleValues && (angular.element(L[0]).css(E, "0%"), angular.element(L[1]).css(E, "100%")), angular.element(A).css(E, "0%").css($, "0%")) : (angular.element(D[0]).css(E, a + "%"), angular.element(D[1]).css(E, r + "%"), e.attachHandleValues && (angular.element(L[0]).css(E, t + "%"), angular.element(L[1]).css(E, n + "%"), angular.element(L[1]).css($, "auto")), angular.element(A).css(E, a + "%").css($, 100 - r + "%"), a > 95 && angular.element(D[0]).css("z-index", 3))
                        }
                    }

                    function C(i) {
                        var n = D[i];
                        n.bind(s + "X", function (r) {
                            var o = (0 === i ? "ngrs-handle-min" : "ngrs-handle-max") + "-down",
                                s = (0 === i ? v() : y()) - e.min, d = s / O * 100, u = p(r), h = u, g = !1;
                            angular.isFunction(e.onHandleDown) && e.onHandleDown(), angular.element("body").bind("selectstart" + a, function () {
                                return !1
                            }), e.disabled || (M = !0, n.addClass("ngrs-down"), T.addClass("ngrs-focus " + o), angular.element("body").addClass("ngrs-touching"), t.bind(l, function (t) {
                                t.preventDefault();
                                var a, r, o = p(t), s = e.step / O * 100, l = ((0 === i ? y() : v()) - e.min) / O * 100;
                                "x" !== o[0] && (o[0] -= u[0], o[1] -= u[1], a = [h[0] !== o[0], h[1] !== o[1]], r = d + 100 * o[I] / (I ? T.height() : T.width()), r = f(r), e.preventEqualMinMax && (0 === s && (s = 1 / O * 100), 0 === i ? l -= s : 1 === i && (l += s)), 0 === i ? r = r > l ? l : r : 1 === i && (r = r < l ? l : r), e.step > 0 && r < 100 && r > 0 && (r = Math.round(r / s) * s), r > 95 && 0 === i ? n.css("z-index", 3) : n.css("z-index", ""), a[I] && r != g && (0 === i ? v(parseFloat(parseFloat(r * O / 100 + e.min).toFixed(e.decimalPlaces))) : 1 === i && y(parseFloat(parseFloat(r * O / 100 + e.min).toFixed(e.decimalPlaces))), e.$apply(), g = r), h = o)
                            }).bind(c, function () {
                                angular.isFunction(e.onHandleUp) && e.onHandleUp(), t.off(l), t.off(c), angular.element("body").removeClass("ngrs-touching"), M = !1, n.removeClass("ngrs-down"), n.removeClass("ngrs-over"), T.removeClass("ngrs-focus " + o)
                            }))
                        }).on(d, function () {
                            n.addClass("ngrs-over")
                        }).on(u, function () {
                            M || n.removeClass("ngrs-over")
                        })
                    }

                    function k(t) {
                        throw e.disabled = !0, new Error("RangeSlider: " + t)
                    }

                    function S(e) {
                        n.warn(e)
                    }

                    var T = angular.element(o), D = [o.find(".ngrs-handle-min"), o.find(".ngrs-handle-max")],
                        L = [o.find(".ngrs-value-min"), o.find(".ngrs-value-max")], A = o.find(".ngrs-join"),
                        E = "left", $ = "right", I = 0, F = [0, 0], O = 0, M = !1;
                    e.filteredModelMin = v(), e.filteredModelMax = y(), e.hideMinBtn && D[0].addClass("hide"), e.hideMaxBtn && D[1].addClass("hide"), g.$observe("disabled", function (t) {
                        angular.isDefined(t) || (e.disabled = r.disabled), e.$watch("disabled", _)
                    }), g.$observe("orientation", function (t) {
                        angular.isDefined(t) || (e.orientation = r.orientation);
                        for (var i, n = e.orientation.split(" "), a = 0, o = n.length; a < o; a++) n[a] = "ngrs-" + n[a];
                        i = n.join(" "), T.addClass(i), "vertical" !== e.orientation && "vertical left" !== e.orientation && "vertical right" !== e.orientation || (E = "top", $ = "bottom", I = 1)
                    }), g.$observe("step", function (t) {
                        angular.isDefined(t) || (e.step = r.step)
                    }), g.$observe("decimalPlaces", function (t) {
                        angular.isDefined(t) || (e.decimalPlaces = r.decimalPlaces)
                    }), g.$observe("showValues", function (t) {
                        angular.isDefined(t) ? e.showValues = "false" !== t : e.showValues = r.showValues
                    }), g.$observe("pinHandle", function (t) {
                        angular.isDefined(t) ? e.pinHandle = "min" === t || "max" === t ? t : null : e.pinHandle = null, e.$watch("pinHandle", b)
                    }), g.$observe("preventEqualMinMax", function (t) {
                        angular.isDefined(t) ? e.preventEqualMinMax = "false" !== t : e.preventEqualMinMax = r.preventEqualMinMax
                    }), g.$observe("attachHandleValues", function (t) {
                        angular.isDefined(t) ? "true" === t || "" === t ? (e.attachHandleValues = !0, o.find(".ngrs-value-runner").addClass("ngrs-attached-handles")) : e.attachHandleValues = !1 : e.attachHandleValues = r.attachHandleValues
                    }), e.$watch("min", w), e.$watch("max", w), e.$watch(function () {
                        return v()
                    }, x), e.$watch(function () {
                        return y()
                    }, x), e.$on("$destroy", function () {
                        T.off(a), angular.element("body").off(a), t.off(a);
                        for (var e = 0, i = D.length; e < i; e++) D[e].off(a), D[e].off(a + "X")
                    }), T.bind("selectstart" + a, function (e) {
                        return !1
                    }).bind("click", function (e) {
                        e.stopPropagation()
                    }), C(0), C(1)
                }
            }
        }]), window.requestAnimFrame = function () {
            return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (e) {
                window.setTimeout(e, 1e3 / 60)
            }
        }()
    }()
}, function (e, t, i) {
    i(426).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "chart-batch-add-fields_a26712e4.css"
}, function (e, t, i) {
    i(428).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "scss-data_69aeb491.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, i, n, a, r, o, s, l, c, d, u, p, f) {
            function h(t, h, g) {
                function m(e, i) {
                    var n = !0;
                    return angular.forEach(t.advDateModule.adv_date_list, function (a, r) {
                        i === a.name && e !== a.opt_id && 1 != Number(a.is_global) && (o(t.tips["filter.duplicatedNames"]), n = !1)
                    }), n
                }

                function v(e) {
                    var i = t.advDateModule.adv_date_list;
                    e === t.selected_opt_id && i.length > 0 && (t.selected_opt_id = i[0].opt_id, t.advDateModule.modify(t.selected_opt_id))
                }

                function y(e) {
                    for (var t in e) if (e.hasOwnProperty(t)) return !1;
                    return !0
                }

                t.dropAccept = g.dropAccept, t.doNotModify = g.notModify, t.onFilterChange = t.$eval(g.onFilterChange), t.doNotModify && t.onFilterChange && (t.saveChartImmediate = t.onFilterChange), t.specialFilterList = t.$eval(g.filterList), t.specialTbId = t.$eval(g.tableId);
                var b = GlobalConstant.defaultAdvDateConfig;
                t.filter_list_require = [], t.getFilterList = function () {
                    if (t.specialFilterList) return t.specialFilterList;
                    var e = t.chart_ops && t.chart_ops.meta || {};
                    return "C400" === e.chart_type ? t.viewData.currentLayer ? t.viewData.currentLayer.filter_list || [] : [] : e.filter_list || []
                }, t.getTbId = function () {
                    return t.specialTbId ? t.specialTbId : "C400" === (t.chart_ops.meta || {}).chart_type ? t.viewData.currentLayer.tb_id : t.currentView ? t.currentView.tb_id : t.chart_ops.tb_id
                }, t.getChartId = function () {
                    return t.currentView ? t.currentView.ct_id : r.chartId
                }, t.getLayerId = function () {
                    return t.viewData && t.viewData.currentLayer ? scope.viewData.currentLayer.layer_id : ""
                }, t.advDateService = {
                    list: function (e, n) {
                        return t.advDateModule.listLoading = !0, i.adv_date.list(e, n).then(function (i) {
                            if (t.advDateModule.listLoading = !1, 0 == +i.status) return t.advDateModule.adv_date_list = i.result, f.setChartSchemeCache(e + "_" + n, i.result), t.globalDateFilterConfig.isConfig || (t.globalDateFilterConfig.applyAdvDateList = angular.copy(i.result)), t.advanceView.empty = 0 == t.advDateModule.adv_date_list.length, t.advDateModule.adv_date_list
                        })
                    }, modify: function (e, n, a, r, s) {
                        return i.adv_date.modify(e, n, a, r).success(function (i) {
                            if (0 != +i.status) o(Number(i.status)); else {
                                var a = t.globalDateFilterConfig.selectedScheme.scheme_id;
                                if (t.advDateService.list(e, a), o(n ? t.tips.saveSuccess : t.tips.addSuccess), !n) return void(t.selected_opt_id = i.result.opt_id);
                                n === t.getFilterList()[s].range[0] && t.saveChartImmediate({closeDialog: !1})
                            }
                        })
                    }, info: function (e) {
                        t.advDateModule.infoLoading = !0, i.adv_date.info(e).success(function (e) {
                            if (l(function () {
                                t.advDateModule.infoLoading = !1
                            }, 200), "0" == e.status) {
                                if (t.date = angular.fromJson(e.result), t.original_is_global = t.date.is_global, t.advDateModule.isDisabled = !t.globalDateFilterConfig.isConfig && !!t.date.is_global, t.globalDateFilterConfig.isConfig && t.date.is_global && t.globalDateFilterConfig.selectedScheme.is_default && (t.advDateModule.isDisabled = !0), y(t.date)) return;
                                if ("accurate" !== t.date.type ? (t.date.accurate.start = "", t.date.accurate.end = "") : (t.date.accurate.start = e.result.accurate.start, t.date.accurate.end = e.result.accurate.end), t.date.fixed.hasOwnProperty("granularity") || (t.date.fixed.granularity = "day"), "expression" === t.date.type) {
                                    var i = new RegExp("\\[_field_id_\\]", "g");
                                    t.date.expression = t.date.expression.replace(i, "[" + t.current_config_field_name + "]"), l(function () {
                                        t.$broadcast("changeDateExpression", t.date.expression)
                                    }, 200)
                                } else t.$broadcast("changeDateExpression", "")
                            } else errorHandle(e)
                        })
                    }, del: function (e, n, a, r, o) {
                        var s = t.globalDateFilterConfig.selectedScheme.scheme_id;
                        i.adv_date.del(n).success(function (i) {
                            0 != +i.status ? errorHandle(i) : (t.advDateService.list(e, s), a.range[0] === n && (t.chart_ops.meta.filter_list[r].range = [], t.filterHandler.save({
                                index: r,
                                type: "date",
                                range: [],
                                closeDialog: !1
                            })), o(n))
                        })
                    }, order: function (e, t) {
                        i.adv_date.order(e, t).then(function (e) {
                        })
                    }
                }, t.advDateModule = {
                    adv_date_list: [], sort: {
                        start: function (e, t) {
                        }, stop: function (e, i) {
                            var n = [];
                            angular.forEach(t.advDateModule.adv_date_list, function (e) {
                                n.push(e.opt_id)
                            }), t.advDateService.order(t.getChartId(), angular.toJson(n))
                        }
                    }, switchTab: function (e) {
                        t.date.type = e
                    }, modify: function (e) {
                        if ("create" === e) return t.date = angular.copy(b), t.selected_opt_id = void 0, t.advanceView.empty = !1, t.original_is_global = 0, t.advDateModule.isDisabled = !1, void t.$broadcast("changeDateExpression", t.date.expression);
                        t.advDateService.info(e), t.selected_opt_id = e
                    }, save: function () {
                        var e = t.date.accurate.start, i = t.date.accurate.end,
                            n = t.globalDateFilterConfig.selectedScheme.scheme_id, a = t.selected_opt_id || "",
                            r = t.getChartId(), s = t.date.name, l = t.date.type,
                            c = t.globalDateFilterConfig.isConfig ? 1 : 0;
                        if (t.date.is_global = c, !s) return o(t.tips["filter.nullTitle"]), !1;
                        if (0 != Number(c) || m(a, s)) {
                            if ("fixed" === l) {
                                if ("0" === t.date.fixed.start) return o(t.tips["filter.inputPositiveNumber"]), !1;
                                if (!isNaturalNumber(t.date.fixed.start) || !isNaturalNumber(t.date.fixed.end.value)) return o(t.tips["chart.plzTypePositionInteger"]), !1
                            } else if ("accurate" === l) {
                                if ("string" == typeof e && (e = new Date(e)), "string" == typeof i && (i = new Date(i)), !e && !i) return alert(t.tips["filter.nullDate"]), !1;
                                if (e.getTime() - i.getTime() > 0) return alert(t.tips["chart.dateRangeInvalid"]), !1
                            } else if ("relative" === l) ; else if ("expression" === l) {
                                var d = t.checkFormulaGrammar(t.current_config_field_name, t.date.fid, "date");
                                if (d) return d.then(function (s) {
                                    if (!s) return o(t.tips["filter.checkFailed"]), t.checkFormulaGrammarFlag = !1, !1;
                                    t.date.accurate.start = Highcharts.dateFormat("%Y-%m-%d", e), t.date.accurate.end = Highcharts.dateFormat("%Y-%m-%d", i);
                                    var l = angular.toJson(t.date);
                                    t.advDateService.modify(r, a, n, l, t.current_filter_index)
                                });
                                return
                            }
                            t.date.accurate.start = Highcharts.dateFormat("%Y-%m-%d", e), t.date.accurate.end = Highcharts.dateFormat("%Y-%m-%d", i);
                            var u = angular.toJson(t.date);
                            t.advDateService.modify(r, a, n, u, t.current_filter_index)
                        }
                    }, del: function (e, i) {
                        var n = 1 == i.is_global ? t.tips["filter.delTip"] : t.tips["filter.delTip2"];
                        if (confirm(n)) {
                            var a = t.current_filter_index, r = t.getFilterList()[a];
                            t.advDateService.del(t.getChartId(), e, r, a, v)
                        }
                    }
                }, t.globalDateFilterConfig = {
                    isConfig: !1,
                    isEditing: !1,
                    isCreating: !1,
                    isDisabled: !1,
                    selectedScheme: null,
                    applySchemeId: "",
                    applyAdvDateList: [],
                    schemeList: [],
                    newScheme: null,
                    editMap: {},
                    status: {listLoading: !1, infoLoading: !1},
                    tip: d.instant("ownership.filter.globalSchemeTip"),
                    changeApply: function () {
                        var e = t.globalDateFilterConfig.schemeList,
                            i = f.getSchemeObj(e, t.globalDateFilterConfig.applySchemeId);
                        t.globalDateFilterConfig.info("", i), f.setLatestScheme(i.scheme_id)
                    },
                    enter: function () {
                        t.globalDateFilterConfig.isConfig = !0, angular.element(".J-advance-date-modal").addClass("global-date-config-modal"), t.globalDateFilterConfig.list("init")
                    },
                    exit: function () {
                        var e = t.globalDateFilterConfig.schemeList;
                        t.globalDateFilterConfig.isConfig = !1, t.advDateModule.adv_date_list = angular.copy(t.globalDateFilterConfig.applyAdvDateList);
                        var i = f.getSchemeObj(e, t.globalDateFilterConfig.applySchemeId);
                        t.globalDateFilterConfig.info("", i), angular.element(".J-advance-date-modal").removeClass("global-date-config-modal"), t.$broadcast("broadcastReloadSelectList", e)
                    },
                    list: function (e) {
                        function i() {
                            f.getDefaultSchemeInList(t.globalDateFilterConfig, e), t.globalDateFilterConfig.info("", t.globalDateFilterConfig.selectedScheme)
                        }

                        0 == t.globalDateFilterConfig.schemeList.length ? (t.globalDateFilterConfig.status.listLoading = !0, f.getSchemeList().then(function (e) {
                            t.globalDateFilterConfig.schemeList = e, i()
                        }).finally(function () {
                            t.globalDateFilterConfig.status.listLoading = !1
                        })) : i()
                    },
                    add: function () {
                        if (f.hasEditingScheme(t.globalDateFilterConfig.editMap) || t.globalDateFilterConfig.isCreating) return o(d.instant("ownership.filter.saveSchemeFirst")), !1;
                        t.globalDateFilterConfig.newScheme = angular.copy({
                            name: "",
                            scheme_id: "new_id"
                        }), t.globalDateFilterConfig.isCreating = !0, setTimeout(function () {
                            $("#J-new-name").focus()
                        }, 300)
                    },
                    edit: function (e, i, n) {
                        if (f.hasEditingScheme(t.globalDateFilterConfig.editMap) || t.globalDateFilterConfig.isCreating) return o(d.instant("ownership.filter.saveSchemeFirst")), !1;
                        var a = i.scheme_id;
                        t.globalDateFilterConfig.editMap = {}, t.globalDateFilterConfig.editMap[a] = !0, t.globalDateFilterConfig.isEditing = !0
                    },
                    save: function (n, a, r) {
                        var s = a.scheme_id, l = {}, c = t.globalDateFilterConfig.schemeList;
                        if (l = t.globalDateFilterConfig.isCreating ? t.globalDateFilterConfig.newScheme : a, !l.name) return o(d.instant("ownership.filter.requestName")), !1;
                        if (f.checkRepeatScheme(l, c)) return o(d.instant("ownership.filter.schemeRepeatName")), !1;
                        var u = f.getSchemeModifyParam(a);
                        if (t.globalDateFilterConfig.isCreating) delete u.scheme_id, i.adv_date_scheme.create(u).then(function (i) {
                            if (0 == i.status) {
                                var n = {
                                    scheme_id: i.result.scheme_id,
                                    name: l.name,
                                    user_id: e.userInfoObj && e.userInfoObj.userId || $.cookie("user_id")
                                };
                                t.globalDateFilterConfig.schemeList.push(n), t.globalDateFilterConfig.editMap[s] = !1, t.globalDateFilterConfig.isCreating = !1, t.globalDateFilterConfig.info("", n)
                            }
                        }); else {
                            if (!a.name) return o(d.instant("ownership.filter.requestName")), !1;
                            i.adv_date_scheme.modify(u).then(function (e) {
                                0 == e.status && (t.globalDateFilterConfig.editMap[s] = !1, t.globalDateFilterConfig.isCreating = !1)
                            })
                        }
                    },
                    cancel: function (e, i, n) {
                        var a = i.scheme_id;
                        t.globalDateFilterConfig.editMap[a] = !1, t.globalDateFilterConfig.isCreating = !1, t.globalDateFilterConfig.isEditing = !1
                    },
                    info: function (e, i, n) {
                        if (!i) return !1;
                        t.globalDateFilterConfig.selectedScheme = i, f.removeChartSchemeCache(i.scheme_id);
                        var a = t.getChartId(), r = i.scheme_id;
                        t.globalDateFilterConfig.status.listLoading = !0, t.advDateService.list(a, r).then(function (e) {
                            t.globalDateFilterConfig.status.listLoading = !1, e && e.length > 0 ? (t.selected_opt_id = e[0].opt_id, t.advDateService.info(t.selected_opt_id)) : t.selected_opt_id = ""
                        })
                    },
                    del: function (e, i, n) {
                        a.openConfirm({
                            template: "/static/partials/dialogTemplates/confirm-dialog.html",
                            className: "ngdialog-theme-default ngDialog-width-300",
                            scope: t,
                            data: {
                                title: d.instant("tips"),
                                message: d.instant("ownership.filter.delSchemeTip") + ": " + i.name + " ?"
                            }
                        }).then(function () {
                            t.globalDateFilterConfig.confirmDel("", i, n)
                        })
                    },
                    confirmDel: function (e, n, a) {
                        var r = t.globalDateFilterConfig.selectedScheme, o = {scheme_id: n.scheme_id};
                        i.adv_date_scheme.delete(o).then(function (e) {
                            if (0 == e.status && (t.globalDateFilterConfig.schemeList.splice(a, 1), t.globalDateFilterConfig.editMap.new_id = !1, t.globalDateFilterConfig.isEditing = !1, f.removeChartSchemeCache(n.scheme_id), r.scheme_id == n.scheme_id)) {
                                var i = t.globalDateFilterConfig.schemeList;
                                i.length > 0 && (t.globalDateFilterConfig.selectedScheme = i[0], t.globalDateFilterConfig.info("", i[0]))
                            }
                        })
                    }
                }, t.conditionList = [], t.operatorMap = c, t.operatorNumberMap = u, t.AdvfilterOperatorList = p, t.new_condition = {
                    operator: "",
                    content: ""
                }, t.addNewCondition = function (e, i) {
                    var n = 8 == i.operator || 9 == i.operator;
                    if (void 0 == i || !i.hasOwnProperty("operator") || "" === i.operator || !i.hasOwnProperty("content") || !n && "" == i.content) return void o(t.tips["filter.inputCompleteCondition"]);
                    n && (i.content = ""), t.conditionList.push({
                        name: e,
                        operator: i.operator,
                        content: i.content
                    }), angular.element(".new-condition").val(""), angular.element(".condition-select").val(""), t.new_condition = {
                        operator: "",
                        content: ""
                    }, t.$$phase || t.$digest()
                }, t.removeCondition = function (e) {
                    t.conditionList.splice(e, 1)
                }, t.addStrOpts = function (e, i) {
                    i && i.stopPropagation();
                    var n = !1;
                    if ($.inArray(e.name, t.strFilter.addList) > -1 && (n = !0), n) return void o(t.tips["filter.hasTheFilter"]);
                    t.strFilter.addList.push(e.name), l(function () {
                        var e = $(".add-list").find("ul"), t = e[0].scrollHeight;
                        e.animate({scrollTop: t})
                    }, 300)
                }, t.delStrOpts = function (e, i) {
                    i && i.stopPropagation();
                    for (var n = t.strFilter.searchList, a = 0, r = n.length; a < r; a++) if (n[a].name == t.strFilter.addList[e]) {
                        n[a].select = !1;
                        break
                    }
                    t.strFilter.addList.splice(e, 1)
                }, t.delAll = function () {
                    t.strFilter.addList = []
                }, t.addAll = function () {
                    var e = [], i = t.strFilter.keyword;
                    if (i ? angular.forEach(t.strFilter.searchList, function (t) {
                        t.name.toLowerCase().indexOf(i.toLowerCase()) > -1 && e.push(t)
                    }) : e = angular.copy(t.strFilter.searchList), 0 == t.strFilter.addList.length) return void angular.forEach(e, function (e) {
                        t.strFilter.addList.push(e.name)
                    });
                    angular.forEach(e, function (e) {
                        $.inArray(e.name, t.strFilter.addList) < 0 && t.strFilter.addList.push(e.name)
                    })
                }, t.checkFormulaGrammarFlag = !1, t.checkFormulaGrammar = function (e, i, a) {
                    if ("" == e && (e = t.current_config_field_name), "string" == a || "sub_date" == a) {
                        var r = t.strFilter.expression_str;
                        if ("" == r) return void o(t.tips["filter.pleaseInputExpression"]);
                        if (r.indexOf(e) < 0 && r.indexOf("[_field_id_]") < 0) return void o(t.tips["filter.pleaseInputFieldName"] + ": [" + e + "]");
                        e = bdp.utils.requote(e);
                        var s = new RegExp("\\[" + e + "\\]", "g");
                        t.strFilter.expression_str = r.replace(s, "[_field_id_]");
                        var l = {
                            ct_id: t.getChartId(),
                            tb_id: t.getTbId(),
                            fid: i,
                            expression: t.strFilter.expression_str
                        }
                    } else if ("date" == a) {
                        var r = t.date.expression;
                        if ("" == r) return void o(t.tips["filter.pleaseInputExpression"]);
                        if (r.indexOf(e) < 0 && r.indexOf("[_field_id_]") < 0) return void o(t.tips["filter.pleaseInputFieldName"] + ": [" + e + "]");
                        e = bdp.utils.requote(e);
                        var s = new RegExp("\\[" + e + "\\]", "g");
                        t.date.expression = r.replace(s, "[_field_id_]");
                        var l = {
                            ct_id: t.getChartId(),
                            tb_id: t.getTbId(),
                            fid: t.current_fid,
                            expression: t.date.expression
                        }
                    } else if ("number" == a) {
                        var r = t.numberFilter.expression_str;
                        if ("" == r) return void o(t.tips["filter.pleaseInputExpression"]);
                        if (r.indexOf(e) < 0 && r.indexOf("[_field_id_]") < 0) return void o(t.tips["filter.pleaseInputFieldName"] + ": [" + e + "]");
                        e = bdp.utils.requote(e);
                        var s = new RegExp("\\[" + e + "\\]", "g");
                        t.numberFilter.expression_str = r.replace(s, "[_field_id_]");
                        var l = {
                            ct_id: t.getChartId(),
                            tb_id: t.getTbId(),
                            fid: i,
                            expression: t.numberFilter.expression_str
                        }
                    }
                    return t.expressionChangedFlag = !1, n.post("/api/expression/syntax_verify", l).then(function (e) {
                        return 0 == e.status ? (o(t.tips["filter.checkSuccess"]), t.checkFormulaGrammarFlag = !0, !0) : (o(t.tips["filter.checkFailed"]), t.checkFormulaGrammarFlag = !1, !1)
                    })
                }, t.removeFilter = function () {
                    t.is_new_add && t.getFilterList().pop()
                }, t.setFilterList = function (e) {
                    t.filterRangeList[e].list = [], angular.forEach(t.strFilter.addList, function (i) {
                        t.filterRangeList[e].list.push({name: i})
                    }), t.filterRangeList[e].range = t.strFilter.addList
                }, t.expressionChanged = function (e) {
                    t.expressionChangedFlag = e
                }, t.insertFieldNameToExpression = function (e) {
                    t.expressionChangedFlag = !0, t.$broadcast("insertFieldNameToExpression", e)
                }, s(["filter.duplicatedNames", "filter.nullTitle", "filter.nullDate", "filter.delTip", "filter.delTip2", "filter.changeScopeTip", "chart.plzTypePositionInteger", "chart.dateRangeInvalid", "filter.inputPositiveNumber", "saveSuccess", "addSuccess", "filter.itemExist", "filter.inputCompleteCondition", "filter.hasTheFilter", "filter.pleaseInputExpression", "filter.pleaseInputFieldName", "filter.pleaseCheckGrammar", "filter.checkSuccess", "filter.hasChecked", "filter.checkFailed"], t)
            }

            return {
                restrict: "A",
                transclude: !0,
                replace: !0,
                templateUrl: "/static/chart-edit/chart-filter/chart-filter.html",
                link: h,
                controller: t
            }
        }

        function t(e, t, i, n, a, r, o, s, l, c, d, u, p) {
            function f(e) {
                function n(n, r) {
                    t.loading[a] = !0, i.adv_date.list(n, r).then(function (i) {
                        t.loading[a] = !1, 0 == i.status && e.callback(i.result, a, !0)
                    })
                }

                var a = e.fid, r = e.ct_id, o = p.getLatestScheme();
                o ? n(r, o) : p.getSchemeList().then(function (e) {
                    var t = p.getDefaultSchemeObj(e) || {scheme_id: ""};
                    p.setLatestScheme(t.scheme_id), n(r, t.scheme_id)
                })
            }

            function h(e) {
                var i = !1;
                return angular.forEach(t.advDateModule.adv_date_list, function (t, n) {
                    "" != e && e == t.opt_id && (i = !0)
                }), i
            }

            function g(e, i, n) {
                var a = e.data_type, r = e.range, o = e.total, s = t.getFilterList(), l = s.length - 1;
                if (t["show_filter_" + i] = !0, "string" == a || "sub_date" == a) t.filterRangeList[i] = {
                    list: [],
                    total: e.total,
                    range: []
                }, angular.forEach(r, function (e) {
                    t.filterRangeList[i].list.push({name: e, check: !0})
                }), t.filterRangeList[i].range = r, t.filterRangeList[i].type = "exact", t.filterRangeList[i].range_type = 1, s[l] && (s[l].total = o, m(s[l].fid)); else if ("number" == a) {
                    var c = r || ["", ""];
                    s[l].range = c, "number" == a && (t.numRange["n" + l] = {}, t.numRange["n" + l].a = c[0], t.numRange["n" + l].b = c[1])
                }
                if ("date" == a || n) {
                    s[l].range = [], t.filterRangeList[i] = {list: e, range: []};
                    var d = p.getLatestScheme(), u = t.getFilterList();
                    if (p.addSchemeToFilterList(u, i, d), !t.doNotModify) {
                        if (t.chart_ops.meta.filter_list_inner && !(t.chart_ops.meta.filter_list_inner instanceof Array)) {
                            var f = t.chart_ops.meta.filter_list_inner[t.drill_level], g = "";
                            angular.forEach(f, function (e) {
                                e.fid != i || "date" != e.data_type || "" != e.granularity || e.hasOwnProperty("aggregator") || (g = e.range)
                            });
                            var v = t.getFilterList();
                            g && g.length > 0 && h(g[0]) && angular.forEach(v, function (e) {
                                e.fid == i && (e.range = g)
                            })
                        }
                        t.saveChartImmediate({
                            not_need_redraw: "number" !== a,
                            only_refresh_data: !1,
                            is_drill_chart: !!$(".drill-crumbs").length
                        })
                    }
                }
            }

            function m(e, i) {
                var n = t.getFilterList(), a = [];
                angular.forEach(n, function (n) {
                    if (n.fid == e) {
                        if (!t.filterRangeList[e]) return;
                        if (n.adv_type = i, n.range_type = t.strAdvFilter.range_type, "exact" == i) if (angular.forEach(t.filterRangeList[e].list, function (e) {
                            a.push(e.name)
                        }), t.filterRangeList[e].range = a, t.filterRangeList[e].type = t.strAdvFilter.type, "date" === n.data_type) n.is_all = !1; else {
                            var r = [];
                            r.push(angular.toJson(a)), n.range = r, n.is_all = 0 === a.length || a.length === t.filterRangeList[e].list.length, n.is_all = !1
                        } else if ("condition" == i) {
                            t.loading[e] = !1, t.filterRangeList[e] = {
                                list: [],
                                range: [],
                                type: ""
                            }, t.filterRangeList[e].range = angular.fromJson(t.strAdvFilter.config), t.filterRangeList[e].list = angular.fromJson(t.strAdvFilter.config), t.filterRangeList[e].type = t.strAdvFilter.type;
                            var r = [];
                            r.push(t.strAdvFilter.config), n.range = r, n.is_all = !1
                        } else if ("expression" == i) {
                            var r = [];
                            r.push(t.strAdvFilter.config), n.range = r, n.is_all = !1
                        }
                    }
                })
            }

            function v(e, i) {
                if (!t.doNotModify) if (t.chart_ops.meta.filter_list_inner instanceof Array) {
                    var n = t.chart_ops.meta.filter_list_inner;
                    !function t(n) {
                        angular.forEach(n, function (n) {
                            n.fid != i || n.granularity ? n.items.length > 0 && t(n.items) : n.range = e.range
                        })
                    }(n)
                } else {
                    if (t.chart_ops.meta.level_fields) for (var a = t.chart_ops.meta.level_fields.length || 1, r = 0; r < a; r++) !function t(n) {
                        angular.forEach(n, function (n) {
                            n.hasOwnProperty("inner_adv_type") || (n.inner_adv_type = ""), n.fid != i || n.granularity || "" != n.inner_adv_type ? n.items.length > 0 && t(n.items) : n.range = e.range
                        })
                    }(t.chart_ops.meta.filter_list_inner[r])
                }
            }

            t.date_active = {}, t.numRange = {}, t.initNumRange = {}, t.selectAll = {}, t.filterRangeList = t.filterRangeList || {}, t.loading = {}, t.advanceView = {}, e.dateTimeByHalfHour = d, t.goHelp = function (e) {
                l(e)
            }, t.filterHandler = {
                startDelFilter: function () {
                    angular.element(".gis-main,.chart-main,.chart-left-side").css({overflow: "visible"})
                }, removePosition: function () {
                    angular.element(".filter-layer").css({overflow: "visible"})
                }, addFilter: function (e, i) {
                    if (1 === t.dragField.is_build_aggregated) return s(t.tips["filter.buildAggregatedTip"]), !1;
                    if (t.doNotModify) ; else if (!t.chart_ops || t.removeFaild) return;
                    if (1 === t.dragIsBuildAggregated) return s(t.tips["filter.buildAggregatedTip"]), !1;
                    for (var n = t.getFilterList() || [], a = t.getTbId(), r = t.dragFieldFid, o = t.dragFieldName, l = t.dragFieldType, c = t.getChartId(), d = 0; d < n.length; d++) if (r == n[d].fid) return alert(t.tips["filter.exist"]), !1;
                    n.push({
                        fid: r,
                        name: o,
                        data_type: l
                    }), "string" == n[n.length - 1].data_type && t.strFilter.showAdvanceString("", "", n.length - 1, {
                        fid: r,
                        name: o,
                        data_type: l
                    }), "sub_date" == n[n.length - 1].data_type && t.strFilter.showAdvanceString("", "", n.length - 1, {
                        fid: r,
                        name: o,
                        data_type: l
                    }), "number" == n[n.length - 1].data_type && t.numberFilter.showAdvanceNumber("", "", n.length - 1, o), "date" != n[n.length - 1].data_type || t.advDateModule.adv_date_list || t.advDateService && t.advDateService.list("xxxxxxx"), "date" == n[n.length - 1].data_type && f({
                        tb_id: a,
                        fid: r,
                        ct_id: c,
                        data_type: l,
                        callback: g
                    })
                }, delFilter: function (e, i, a, r) {
                    var o = $(".filter-layer").width();
                    t.show_custom_date && (t.show_custom_date = !t.show_custom_date), angular.element(".gis-main,.chart-main,.chart-left-side,.filter-layer").css({overflow: ""});
                    var s = (i.position.top, i.position.left);
                    if (s + o > 0 && s <= o) return angular.element(e.target).attr("style", ""), void(t.removeFaild = !0);
                    if (!("number" != typeof a && a < 0)) {
                        var l = t.getFilterList(), c = "";
                        if (t.doNotModify || "date" == r || ("string" === r || "sub_date" === r ? c = "/api/adv_enum/delete" : "number" === r && (c = "/api/adv_num/delete"), n.post(c, {
                            ct_id: t.getChartId(),
                            tb_id: t.getTbId(),
                            layer_id: t.getLayerId(),
                            fid: l[a].fid
                        }).then(function (e) {
                            0 != e.status && errorHandle(e)
                        })), "string" === r) {
                            var d = t, u = !t.currentView;
                            l.splice(a, 1), t.saveChartImmediate({
                                not_need_redraw: u,
                                only_refresh_data: u,
                                callback: function (e) {
                                    d.$broadcast("chartFilterChange", {
                                        saveChartOpts: {
                                            not_need_redraw: !1,
                                            only_refresh_data: !1,
                                            is_drill_chart: !!$(".drill-crumbs").length
                                        }
                                    })
                                }
                            })
                        } else l.splice(a, 1), t.saveChartImmediate({
                            not_need_redraw: !1,
                            only_refresh_data: !1,
                            is_drill_chart: !!$(".drill-crumbs").length
                        })
                    }
                }, save: function (i) {
                    var n = i.index, a = i.range, r = t.getFilterList(), o = r[i.index].fid, s = t.filterRangeList,
                        l = [];
                    if ("chart_edit" === e.view && "gis_edit" !== e.editGisView && (l = t.chart_ops.meta.level[t.drill_level].y.concat(t.chart_ops.meta.level[t.drill_level].y_optional || [])), "number" == i.type) {
                        if (isObjectEmpty(t.numRange["n" + n]) && (t.numRange["n" + n] = {}, t.numRange["n" + n] = {}), t.numRange["n" + n].a == a[0] && t.numRange["n" + n].b == a[1]) return;
                        t.numRange["n" + n].a = a[0], t.numRange["n" + n].b = a[1]
                    } else if ("custom_date" == i.type) i.range = r[i.index].range = a; else if ("date" == i.type) {
                        var c = !1;
                        if (1 === i.range.length && s[o].list.forEach(function (e, t) {
                            if (e.opt_id === i.range[0]) for (var n = angular.fromJson(e.config), a = 0, r = l.length; a < r; a++) {
                                var s = l[a];
                                if (s.yoyQoqSetting && "filter" === s.yoyQoqSetting.type && s.yoyQoqSetting.date_field_fid === o) {
                                    n.expression && "" != n.expression && (c = !0);
                                    break
                                }
                            }
                        }), c && !confirm(t.tips["filter.switchExpTip"])) return
                    }
                    if ("date" == i.type || "custom_date" == i.type) {
                        l.some(function (e, t) {
                            return e.yoyQoqSetting && "filter" === e.yoyQoqSetting.type && e.yoyQoqSetting.date_field_fid === o
                        });
                        v(i, o), t.date_active[o] = i.range, r[i.index].range = a, t.selected_opt_id = i.range[0]
                    }
                    if ("string" === i.type) {
                        var d = t, u = !t.currentView;
                        t.saveChartImmediate({
                            not_need_redraw: u,
                            only_refresh_data: u,
                            getChartInfo: "date" !== i.type && "custom_date" !== i.type,
                            closeDialog: i.closeDialog !== !1,
                            callback: function (e) {
                                d.$broadcast("chartFilterChange", {
                                    saveChartOpts: {
                                        not_need_redraw: !1,
                                        only_refresh_data: !1,
                                        is_drill_chart: !!$(".drill-crumbs").length
                                    }
                                })
                            }
                        })
                    } else t.saveChartImmediate({
                        not_need_redraw: !1,
                        only_refresh_data: !1,
                        is_drill_chart: !!$(".drill-crumbs").length,
                        getChartInfo: "date" !== i.type && "custom_date" !== i.type,
                        closeDialog: i.closeDialog !== !1
                    })
                }, enterToSave: function (e, i) {
                    13 == e.keyCode && t.filterHandler.save(i)
                }
            }, t.check_all = !0, t.filterItemHandler = {
                getFilterRange: function (e, i, n, a) {
                    var r = t.getFilterList() || [], o = (t.getTbId(), t.getChartId()), s = n.scheme_id;
                    if ("string" != e && "sub_date" != e || t["show_filter_" + i]) if ("number" == e) {
                        if (!r[a] || r[a].fid != i) return;
                        "condition" == r[a].adv_type ? (t.loading[i] = !1, t.filterRangeList[i] = {
                            list: [],
                            range: [],
                            type: ""
                        }, t.filterRangeList[i].range = angular.fromJson(r[a].range), t.filterRangeList[i].list = angular.fromJson(t.filterRangeList[i].range[0]), t.filterRangeList[i].type = r[a].adv_type, t["show_filter_" + i] = !t["show_filter_" + i]) : "expression" == r[a].adv_type && (t.loading[i] = !1, t.filterRangeList[i] = {
                            list: [],
                            range: [],
                            type: ""
                        }, t.filterRangeList[i].range = angular.fromJson(r[a].range), t.filterRangeList[i].type = r[a].adv_type, t["show_filter_" + i] = !t["show_filter_" + i])
                    } else if ("date" != e || t["show_filter_" + i]) t["show_filter_" + i] = !t["show_filter_" + i]; else {
                        if (!r[a] || r[a].fid != i) return;
                        p.getAdvDateList(o, s, !0).then(function (e) {
                            t.advDateModule.adv_date_list = e.result, t.filterRangeList[i] = {
                                list: e.result,
                                range: [],
                                type: ""
                            }, t.filterRangeList[i].range = r[a].range, t.filterRangeList[i].type = r[a].adv_type, t["show_filter_" + i] = !t["show_filter_" + i]
                        })
                    } else {
                        if (!r[a] || r[a].fid != i) return;
                        if ("exact" == r[a].adv_type) {
                            t.filterRangeList[i] = {
                                list: [],
                                range: [],
                                total: "",
                                type: ""
                            }, t.loading[i] = !1, t.filterRangeList[i].range_type = r[a].range_type, t.filterRangeList[i].range = r[a].range, t.filterRangeList[i].type = r[a].adv_type;
                            var l = angular.fromJson(t.filterRangeList[i].range[0]);
                            angular.forEach(l, function (e) {
                                t.filterRangeList[i].list.push({name: e})
                            }), t["show_filter_" + i] = !t["show_filter_" + i]
                        } else "condition" == r[a].adv_type ? (t.loading[i] = !1, t.filterRangeList[i] = {
                            list: [],
                            range: [],
                            type: ""
                        }, t.filterRangeList[i].range = angular.fromJson(r[a].range), t.filterRangeList[i].list = angular.fromJson(t.filterRangeList[i].range[0]), t.filterRangeList[i].type = r[a].adv_type, t["show_filter_" + i] = !t["show_filter_" + i]) : "expression" == r[a].adv_type && (t.loading[i] = !1, t.filterRangeList[i] = {
                            list: [],
                            range: [],
                            type: ""
                        }, t.filterRangeList[i].range = angular.fromJson(r[a].range), t.filterRangeList[i].type = r[a].adv_type, t["show_filter_" + i] = !t["show_filter_" + i])
                    }
                }, isShowFilter: function (e) {
                    return !!t["show_filter_" + e]
                }, setState: function (e) {
                    var i = t.filterRangeList[e], n = 0;
                    angular.forEach(i.list, function (e) {
                        e.check && n++
                    }), i.select_len = n
                }, selectAll: function (e, i) {
                    t.filterRangeList[i].select_len = e ? t.filterRangeList[i].list.length : 0, angular.forEach(t.filterRangeList[i].list, function (t) {
                        t.check = e
                    })
                }, useConfig: function (e, i) {
                    e.is_config = i, angular.forEach(t.filterRangeList[e.fid].list, function (e) {
                        e.check = i
                    })
                }
            }, t.dateFilter = {
                showFilterDatePicker: function (e, i) {
                    if (i.length > 1) {
                        var n = i[0] ? i[0].split(" ")[1] || "00:00:00" : "00:00:00",
                            r = i[1] ? i[1].split(" ")[1] || "23:59:59" : "23:59:59";
                        i = i.concat([n, r])
                    } else i = (1 === i.length && i[0].indexOf("opt_"), [+new Date, +new Date, "00:00:00", "23:59:59"]);
                    a.open({
                        template: "/static/partials/dialogTemplates/custom-date-modal.html",
                        className: "ngdialog-theme-default date-picker-modal daterange-bdp-modal",
                        data: {index: e, range: i},
                        scope: t
                    })
                }, showAdvanceDate: function (e, i, n) {
                    t.current_config_field_name = i.name, t.current_fid = i.fid, t.current_filter_index = n, t.advanceView.empty = t.filterRangeList[i.fid] && 0 == t.filterRangeList[i.fid].list, t.checkFormulaGrammarFlag = !1, t.expressionChangedFlag = !1, e && e.stopPropagation();
                    var r = t.getFilterList()[n], o = r.range;
                    1 == o.length ? t.selected_opt_id = o[0] : t.filterRangeList[i.fid] && t.filterRangeList[i.fid].list.length > 0 && (t.selected_opt_id = t.filterRangeList[i.fid].list[0].opt_id), angular.element(".J-advance-date-modal").removeClass("global-date-config-modal"), t.globalDateFilterConfig.isConfig = !1, t.globalDateFilterConfig.applySchemeId = r.scheme_id, t.globalDateFilterConfig.selectedScheme = null, t.globalDateFilterConfig.list(), a.open({
                        template: "/static/chart-edit/chart-filter/chart-filter-date-modal.html",
                        className: "ngdialog-theme-default advance-date-modal J-advance-date-modal",
                        scope: t
                    })
                }, setExpression: function (e) {
                    t.date && (t.date.expression = e)
                }, saveAdvanceDateScheme: function () {
                    var e = t.getChartId(), i = t.globalDateFilterConfig.applySchemeId, n = t.current_fid,
                        r = t.getFilterList()[t.current_filter_index], o = t.filterRangeList, s = !1;
                    t.advDateModule.adv_date_list.forEach(function (e) {
                        e.opt_id == r.range[0] && (s = !0)
                    }), 1 != r.range.length || s || (r.range = []), p.getLatestScheme() || p.setLatestScheme(r.scheme_id);
                    var l = t.getFilterList();
                    p.addSchemeToFilterList(l, n, i), p.reLoadDateFilterRangeList(l, e, o), t.chart_ops.meta && t.chart_ops.meta.filter_list_inner && p.addSchemeToFilterListInner(t.chart_ops.meta.filter_list_inner, n, i, r.range), t.saveChartImmediate({
                        not_need_redraw: !1,
                        only_refresh_data: !1,
                        is_drill_chart: !!$(".drill-crumbs").length,
                        getChartInfo: !1,
                        closeDialog: !1
                    }), a.closeAll()
                }, closeAdvanceDate: function () {
                    a.closeAll()
                }
            }, t.saveDateRange = function (e) {
                var i = e.sDate ? e.sDate + " " + e.sDateHour : null, n = e.eDate ? e.eDate + " " + e.eDateHour : null;
                if (!i && !n) return s(t.tips["chart.dateRangeRequired"]), !1;
                if (i && n) {
                    if (!e.sDateHour) return s(t.tips["filter.startDateErr2"]), !1;
                    if (!e.eDateHour) return s(t.tips["filter.endDateErr2"]), !1;
                    if (new Date(i) - new Date(n) > 0) return s(t.tips["filter.dateRangeInvalid"]), !1
                } else {
                    if (i && !n && !e.sDateHour) return s(t.tips["filter.startDateErr2"]), !1;
                    if (!i && n && !e.eDateHour) return s(t.tips["filter.endDateErr2"]), !1
                }
                t.filterHandler.save({range: [i, n], index: e.data.index, type: "custom_date"})
            }, t.strFilter = {
                fid: "",
                name: "",
                granularity: "",
                keyword: "",
                filterKwd: "",
                data_type: "string",
                is_compare: "",
                searchList: [],
                addList: [],
                condition_type: "",
                expression_str: "",
                type: "",
                total: 0,
                showAdvanceString: function (e, n, r, o) {
                    if (e && e.stopPropagation(), this.total = 0, this.keyword = "", this.filterKwd = "", this.searchList = [], this.addList = [], this.conditionList = [], this.condition_type = 1, this.expression_str = "", t.checkFormulaGrammarFlag = !1, t.expressionChangedFlag = !1, n ? (n.hasOwnProperty("range_type") || (n.range_type = 1), t.strAdvFilter = {
                        ct_id: t.getChartId(),
                        tb_id: t.getTbId(),
                        layer_id: t.getLayerId(),
                        type: n.adv_type,
                        fid: n.fid,
                        config: n.range,
                        range_type: n.range_type,
                        data_type: "string"
                    }, this.fid = n.fid, this.name = n.name, this.granularity = n.granularity || "", this.data_type = n.data_type, this.adv_type = n.adv_type, this.is_compare = !!n.is_compare, t.is_new_add = !1) : (t.strAdvFilter = {
                        ct_id: t.getChartId(),
                        tb_id: t.getTbId(),
                        layer_id: t.getLayerId(),
                        type: "exact",
                        fid: t.dragFieldFid,
                        config: [],
                        range_type: 1,
                        data_type: "string"
                    }, this.fid = o.fid, this.name = o.name, this.granularity = "", this.data_type = o.data_type, this.adv_type = "exact", this.is_compare = "", t.is_new_add = !0), t.current_filter_index = r, t.conditionList = [], t.current_config_field_name = t.strFilter.name, t.showLoading = !0, n) {
                        var s = {fid: n.fid, ct_id: t.getChartId(), tb_id: t.getTbId(), query_for_ct: 1};
                        if ("setupTraining" == t.view && delete s.query_for_ct, i.field.getRange(s).success(function (e) {
                            "0" == e.status && (t.strFilter.total = e.result.total, e.result.total, angular.forEach(e.result.range, function (e) {
                                t.strFilter.searchList.push({name: e})
                            }), t.showLoading = !1)
                        }), "exact" == n.adv_type) {
                            t.strFilter.addList = angular.fromJson(n.range[0]) || [], t.filterRangeList[n.fid] = {
                                list: [],
                                range: [],
                                total: "",
                                type: ""
                            }, t.filterRangeList[n.fid].range_type = n.range_type, t.filterRangeList[n.fid].range = n.range, t.filterRangeList[n.fid].type = n.adv_type;
                            var l = angular.fromJson(t.filterRangeList[n.fid].range[0]);
                            angular.forEach(l, function (e) {
                                t.filterRangeList[n.fid].list.push({name: e})
                            })
                        } else if ("condition" == n.adv_type) {
                            var c = angular.fromJson(n.range), d = angular.fromJson(c[0]);
                            t.strFilter.condition_type = d.condition_type, angular.forEach(d.conditions, function (e) {
                                t.conditionList.push({name: n.name, operator: e.calc_type, content: e.value})
                            }), t.filterRangeList[n.fid] = {
                                list: [],
                                range: [],
                                type: ""
                            }, t.filterRangeList[n.fid].range = n.range, t.filterRangeList[n.fid].list = angular.fromJson(t.filterRangeList[n.fid].range[0]), t.filterRangeList[n.fid].type = n.adv_type
                        } else if ("expression" == n.adv_type) {
                            t.strFilter.expression_str = n.range[0];
                            var u = new RegExp("\\[_field_id_\\]", "g");
                            t.strFilter.expression_str = t.strFilter.expression_str.replace(u, "[" + n.name + "]"), t.filterRangeList[n.fid] = {
                                list: [],
                                range: [],
                                type: ""
                            }, t.filterRangeList[n.fid].range = angular.fromJson(n.range), t.filterRangeList[n.fid].type = n.adv_type
                        }
                    }
                    if (!n) {
                        t.filterRangeList[t.strFilter.fid] = {
                            list: [],
                            range: [],
                            total: "",
                            type: "",
                            range_type: ""
                        }, t.loading[t.strFilter.fid] = !1, t["show_filter_" + t.strFilter.fid] = !1;
                        var s = {fid: t.strFilter.fid, ct_id: t.getChartId(), tb_id: t.getTbId(), query_for_ct: 1};
                        "setupTraining" == t.view && delete s.query_for_ct, i.field.getRange(s).success(function (e) {
                            if ("0" == e.status) {
                                t.strFilter.total = e.result.total, e.result.total;
                                var i = t.getFilterList() || [], n = i.length - 1;
                                t.strFilter.searchList = [], angular.forEach(e.result.range, function (e) {
                                    t.strFilter.searchList.push({name: e})
                                }), t.selectAll[t.strFilter.fid] = 1, i[n] && (i[n].total = e.result.total, m(i[n].fid, "exact")), t.showLoading = !1
                            } else errorHandle(e)
                        })
                    }
                    a.open({
                        template: "/static/chart-edit/chart-filter/chart-filter-string-modal.html",
                        className: "ngdialog-theme-default str-filter-model advance-string-modal ",
                        scope: t,
                        showClose: !1
                    }), angular.element(".advance-string-modal .ngdialog-close").css("display", "none"), angular.element(".advance-string-modal .search-list .query-text").val("")
                },
                saveAdvStrFilter: function () {
                    var e = t.strAdvFilter.type;
                    if ("exact" == e) {
                        if (0 == t.strFilter.addList.length) return void s(t.tips["filter.pleaseSelectItem"]);
                        t.strAdvFilter.config = angular.toJson(t.strFilter.addList)
                    } else if ("condition" == e) {
                        if (0 == t.conditionList) return void s(t.tips["filter.pleaseAddCondition"]);
                        t.strAdvFilter.config = {
                            condition_type: 1,
                            conditions: []
                        }, t.strAdvFilter.config.condition_type = t.strFilter.condition_type, angular.forEach(t.conditionList, function (e) {
                            t.strAdvFilter.config.conditions.push({calc_type: e.operator, value: e.content})
                        }), t.strAdvFilter.config = angular.toJson(t.strAdvFilter.config)
                    } else if ("expression" == e) {
                        t.filterRangeList[t.strAdvFilter.fid].type = e;
                        var i = t.checkFormulaGrammar(t.current_config_field_name, t.strFilter.fid, "string");
                        if (i) return i.then(function (e) {
                            return e ? (t.strAdvFilter.config = t.strFilter.expression_str, void t.strFilter.strFilterModify()) : void s(t.tips["filter.checkFailed"])
                        });
                        return
                    }
                    t.filterRangeList[t.strAdvFilter.fid].range_type = t.strAdvFilter.range_type, t.filterRangeList[t.strAdvFilter.fid].type = e, t.strFilter.strFilterModify()
                },
                strFilterModify: function () {
                    var e;
                    e = t.doNotModify ? u.when({status: 0}) : n.post("/api/adv_enum/modify", t.strAdvFilter), e.then(function (e) {
                        if (0 == e.status) {
                            var i = t.strAdvFilter.fid, n = t.strAdvFilter.type;
                            t["show_filter_" + i] = !0, "exact" == n ? (t.setFilterList(i), m(i, n)) : "condition" != n && "expression" != n || m(i, n), a.closeAll(), t.loading[i] = !1, t["show_filter_" + i] = !0, t.filterHandler.save({
                                range: t.filterRangeList,
                                index: t.current_filter_index,
                                type: t.strAdvFilter.data_type
                            })
                        }
                    })
                },
                setExpression: function (e) {
                    t.strFilter.expression_str = e
                },
                enterToQuery: function (e) {
                    13 == e.e.keyCode && (t.strFilter.filterKwd = t.strFilter.keyword, e.realSearch && this.query())
                },
                query: function () {
                    t.showLoading = !0, t.strFilter.filterKwd = t.strFilter.keyword;
                    var e = {
                        fid: t.strFilter.fid,
                        ct_id: t.getChartId(),
                        tb_id: t.getTbId(),
                        keyword: t.strFilter.keyword
                    };
                    n.get("/api/adv_enum/list", e).then(function (e) {
                        0 == e.status && (t.strFilter.searchList = [], t.showLoading = !1, angular.forEach(e.result, function (e) {
                            t.strFilter.searchList.push({name: e})
                        }))
                    })
                }
            }, t.numberFilter = {
                number_operator: "",
                number_both: "",
                number_left: "",
                number_right: "",
                expression_str: "",
                field_name: "",
                type: "",
                showAdvanceNumber: function (e, n, r, o) {
                    e && e.stopPropagation();
                    var s = t.getTbId(), l = t.dragFieldFid, c = t.getChartId();
                    if (t.numberFilter.field_name = o, t.numberFilter.number_operator = 12, t.numberFilter.type = n.adv_type || "condition", t.current_filter_index = r, t.current_config_field_name = o, t.checkFormulaGrammarFlag = !1, t.expressionChangedFlag = !1, n) {
                        if (t["show_filter_" + n.fid] = !0, t.numberAdvFilter = {
                            ct_id: t.getChartId(),
                            tb_id: t.getTbId(),
                            layer_id: t.getLayerId(),
                            type: n.adv_type,
                            fid: n.fid,
                            config: n.range
                        }, "condition" == n.adv_type) {
                            var d = angular.fromJson(n.range), u = angular.fromJson(d[0]);
                            1 == u.conditions.length ? (t.numberFilter.number_operator = u.conditions[0].calc_type, t.numberFilter.number_both = u.conditions[0].value, t.numberFilter.number_left = "", t.numberFilter.number_right = "", t.numberFilter.expression_str = "") : (t.numberFilter.number_operator = 12, t.numberFilter.number_both = "", t.numberFilter.number_left = u.conditions[0].value, t.numberFilter.number_right = u.conditions[1].value, t.numberFilter.expression_str = ""), t.filterRangeList[n.fid] = {
                                list: [],
                                range: [],
                                type: ""
                            }, t.filterRangeList[n.fid].range = angular.fromJson(n.range), t.filterRangeList[n.fid].list = angular.fromJson(t.filterRangeList[n.fid].range[0]), t.filterRangeList[n.fid].type = n.adv_type
                        } else if ("expression" == n.adv_type) {
                            t.numberFilter.expression_str = n.range[0];
                            var p = new RegExp("\\[_field_id_\\]", "g");
                            t.numberFilter.expression_str = t.numberFilter.expression_str.replace(p, "[" + o + "]"), t.filterRangeList[n.fid] = {
                                list: [],
                                range: [],
                                type: ""
                            }, t.filterRangeList[n.fid].range = angular.fromJson(n.range), t.filterRangeList[n.fid].type = n.adv_type
                        }
                        t.is_new_add = !1
                    } else {
                        t.numberFilter.number_both = "", t.numberFilter.number_left = "", t.numberFilter.number_right = "", t.numberFilter.expression_str = "", t.numberAdvFilter = {
                            ct_id: t.getChartId(),
                            tb_id: t.getTbId(),
                            layer_id: t.getLayerId(),
                            type: "condition",
                            fid: t.dragFieldFid,
                            config: []
                        }, t.filterRangeList[t.strFilter.fid] = {list: [], range: [], total: "", type: ""};
                        var f = {fid: l, ct_id: c, tb_id: s, query_for_ct: 1};
                        "setupTraining" == t.view && delete f.query_for_ct, i.field.getRange(f).success(function (e) {
                            "0" == e.status && (t.filterRangeList[l] = {
                                list: [],
                                total: e.result.total,
                                range: [],
                                type: "condition"
                            }, t.filterRangeList[l].type = "condition", t.filterRangeList[l].check_all = !1, t.selectAll[l] = 1)
                        }), t.is_new_add = !0
                    }
                    a.open({
                        template: "/static/chart-edit/chart-filter/chart-filter-number-modal.html",
                        className: "ngdialog-theme-default str-filter-model advance-string-modal advance-number-modal",
                        scope: t,
                        showClose: !1
                    }), angular.element(".advance-number-modal .ngdialog-close").css("display", "none")
                },
                saveAdvNumberFilter: function () {
                    var e = t.numberAdvFilter.type;
                    if ("condition" == e) {
                        if (!(t.numberFilter.number_operator >= 0)) return void s(t.tips["filter.pleaseConfigCondition"]);
                        t.numberAdvFilter.config = {condition_type: 2, conditions: []};
                        var i = 8 == t.numberFilter.number_operator || 9 == t.numberFilter.number_operator;
                        if (12 == t.numberFilter.number_operator) {
                            if ("number" != typeof t.numberFilter.number_left || "number" != typeof t.numberFilter.number_right) return void s(t.tips["filter.pleaseInputCondition"]);
                            t.numberAdvFilter.config.conditions.push({
                                calc_type: 4,
                                value: t.numberFilter.number_left
                            }), t.numberAdvFilter.config.conditions.push({
                                calc_type: 5,
                                value: t.numberFilter.number_right
                            })
                        } else {
                            if (!i && "" == angular.element(".number-range .input-text-block")[0].value) return void s(t.tips["filter.pleaseInputCondition"]);
                            t.numberAdvFilter.config.conditions.push({
                                calc_type: t.numberFilter.number_operator,
                                value: i ? "" : t.numberFilter.number_both
                            })
                        }
                    } else if ("expression" == e) {
                        var n = t.checkFormulaGrammar(t.current_config_field_name, t.numberAdvFilter.fid, "number");
                        if (n) return n.then(function (e) {
                            if (!e) return void s(t.tips["filter.checkFailed"]);
                            t.numberAdvFilter.config = t.numberFilter.expression_str, t.numberFilter.numberFilterModify()
                        });
                        return
                    }
                    t.numberFilter.numberFilterModify()
                },
                numberFilterModify: function () {
                    "condition" == t.numberAdvFilter.type && (t.numberAdvFilter.config = angular.toJson(t.numberAdvFilter.config));
                    var e;
                    e = t.doNotModify ? u.when({status: 0}) : n.post("/api/adv_num/modify", t.numberAdvFilter), e.then(function (e) {
                        if (0 == e.status) {
                            var i = t.numberAdvFilter.fid, n = t.numberAdvFilter.type, r = t.getFilterList();
                            angular.forEach(r, function (e) {
                                if (e.fid == i) {
                                    if (e.adv_type = n, t.filterRangeList[i] = {
                                        list: [],
                                        range: [],
                                        type: n
                                    }, !t.filterRangeList[i]) return;
                                    if ("condition" == n) {
                                        t.loading[i] = !1, t.filterRangeList[i].range = angular.fromJson(t.numberAdvFilter.config), t.filterRangeList[i].list = angular.fromJson(t.numberAdvFilter.config);
                                        var a = [];
                                        a.push(t.numberAdvFilter.config), e.range = a, t.filterRangeList[i].type = n
                                    } else if ("expression" == n) {
                                        var a = [];
                                        a.push(t.numberAdvFilter.config), e.range = a, t.filterRangeList[i].type = n
                                    }
                                    e.is_all = !1
                                }
                            }), a.closeAll(), t.loading[i] = !1, t["show_filter_" + i] = !0, t.filterHandler.save({
                                range: t.filterRangeList,
                                index: t.current_filter_index,
                                type: t.numberAdvFilter.data_type
                            })
                        }
                    })
                },
                setExpression: function (e) {
                    t.numberFilter.expression_str = e
                }
            }, c(["filter.buildAggregatedTip", "filter.exist", "chart.dateRangeRequired", "filter.pleaseSelectItem", "filter.pleaseAddCondition", "filter.pleaseCheckGrammar", "filter.pleaseInputExpression", "filter.pleaseInputFieldName", "filter.inputPositiveNumber", "filter.pleaseConfigCondition", "filter.pleaseInputNumber", "filter.pleaseInputCondition", "filter.itemsMoreThanOneHundred", "filter.dateRangeInvalid", "filter.startDateErr2", "filter.endDateErr2", "filter.switchExpTip"], t)
        }

        angular.module("BC.chartEdit").directive("chartFilter", e), e.$inject = ["$rootScope", "commonService", "commonHttp", "ngDialog", "$stateParams", "errHint", "$jsTipTranslate", "$timeout", "AdvfilterOperatorMap", "$translate", "AdvfilterOperatorNumberMap", "AdvfilterOperatorList", "globalDateSchemeService"], t.$inject = ["$rootScope", "$scope", "commonService", "commonHttp", "ngDialog", "$translate", "$stateParams", "errHint", "operatorHelpLink", "$jsTipTranslate", "dateTimeByHalfHour", "$q", "globalDateSchemeService"]
    }()
}, function (e, t) {
    e.exports = "/dist/static/chart-edit/views/tpl/chart-edit.html"
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.database", []), a = function (e) {
        var t = i(85)(i.p + "70346746d115.css");
        i.e(2).then(function (n) {
            var a = [];
            return a.push(i(754)), a.push(i(755)), a.push(i(756)), a.push(i(757)), a.push(i(758)), a.push(i(759)), a.push(i(760)), a.push(i(761)), a.push(i(762)), a.push(i(763)), a.push(i(764)), a.push(i(765)), a.push(i(766)), a.push(i(767)), a.push(i(768)), a.push(i(769)), a.push(i(770)), a.push(i(771)), a.push(i(772)), a.push(i(773)), a.push(i(774)), a.push(i(775)), a.push(i(776)), a.push(i(777)), a.push(i(778)), a.push(i(779)), a.push(i(780)), a.push(i(781)), a.push(i(782)), a.push(i(783)), a.push(i(784)), a.push(i(785)), a.push(i(786)), a.push(i(787)), a.push(i(788)), a.push(i(789)), a.push(i(790)), a.push(i(791)), a.push(i(792)), a.push(i(793)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    };
    i(432), i(433);
    var r = {
        database: {
            url: "/database",
            templateUrl: "/static/database/view/database.html",
            controller: "databaseCtrl"
        },
        database_list: {
            url: "/database_list",
            templateUrl: "/static/database/view/database_list.html",
            controller: "databaseListCtrl"
        },
        database_create: {
            url: "/database_create/:dbType",
            templateUrl: "/static/database/view/database_create.html",
            controller: "databaseCreateCtrl"
        },
        database_excel_plugin: {
            url: "/database_excel_plugin",
            templateUrl: "/static/database/view/excel_plugin.html",
            controller: "databaseSyncClientCtrl"
        },
        database_ppt_plugin: {
            url: "/database_ppt_plugin",
            templateUrl: "/static/database/view/ppt_plugin.html",
            controller: "databaseSyncClientCtrl"
        },
        database_sync_client: {
            url: "/database_sync_client",
            templateUrl: "/static/database/view/database_sync_client.html",
            controller: "databaseSyncClientCtrl"
        },
        database_sync_client_big: {
            url: "/database_sync_client_big",
            templateUrl: "/static/database/view/noah_sync_client.html",
            controller: "databaseSyncClientCtrl"
        },
        database_noah: {
            url: "/database_noah",
            templateUrl: "/static/database/view/noah_sync_client.html",
            controller: "databaseSyncClientCtrl"
        },
        database_log: {
            url: "/database_log/:dsId",
            templateUrl: "/static/database/view/database_log.html",
            controller: "databaseLogCtrl"
        },
        database_ba: {
            url: "/database_ba/:ds_id",
            templateUrl: "/static/database/view/database_ba.html",
            controller: "databaseBaController"
        },
        database_bdp: {
            url: "/database_bdp/:dbType",
            templateUrl: "/static/database/view/database_bdp.html",
            controller: "databaseBdpCtrl"
        },
        ba_config: {
            url: "/ba/:dsId",
            templateUrl: "/static/database/view/ba_config.html",
            controller: "BAConfigController"
        },
        database_baidu_search: {
            url: "/database_baidu_search/:dsId/:realtimeId",
            templateUrl: "/static/database/view/database_baidu_search.html",
            controller: "databaseBaiduSearchCtrl"
        },
        database_baidu_search_list: {
            url: "/database_baidu_search_list/:dsId",
            templateUrl: "/static/database/view/database_baidu_search_list.html",
            controller: "databaseBaiduSearchListCtrl"
        },
        database_index_list: {
            url: "/database_index_list/:dbType/:dsId",
            templateUrl: "/static/database/view/database_index_list.html",
            controller: "databaseIndexListCtrl"
        },
        database_index_task: {
            url: "/database_index_task/:dbType/:dsId/:indexId",
            templateUrl: "/static/database/view/database_index_task.html",
            controller: "databaseIndexTaskCtrl"
        },
        database_operate_log: {
            url: "/database_operate_log/",
            templateUrl: "/static/database/view/operate_log.html",
            controller: "operateLogCtrl"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    "use strict";

    function n(e, t, i, n) {
        function a() {
            3 == t.enterprise_type && n.getSyncApi("ds_limit_tip").then(function (e) {
                1 == e && (r(), n.setApi("ds_limit_tip", 0))
            })
        }

        function r() {
            var n;
            n = 1 == t.usedThemeId ? "personal_db_guide_dark.png" : "personal_db_guide_light.png", i.open({
                template: "/static/database/partials/personal_db_guide.html",
                className: "ngdialog-theme-default ngDialog-width-500",
                scope: e,
                showClose: !1,
                closeByDocument: !1,
                data: {picUrl: "/pmresources/databaseImg/" + n}
            })
        }

        e.viewGuide = "", e.showGuide = !1, e.guide = 0, e.have_dialog = !0;
        $.cookie("user_id");
        e.closeManualSyncGuide = function () {
            e.showManualSync = !1
        }, function () {
            if (t.global.databaseSyncGuide_66) return e.showManualSync = !0, void(t.global.databaseSyncGuide_66 = 0);
            a()
        }()
    }

    n.$inject = ["$scope", "$rootScope", "ngDialog", "guideService"], angular.module("BC.database").directive("dbGuide", [function () {
        return {
            restrict: "EA",
            templateUrl: " /static/database/partials/database_guide.html",
            controller: n,
            scope: {num: "=", descInfo: "=", usageHeight: "="}
        }
    }])
}, function (e, t, i) {
    i(434).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "guide_d2d3bd8c.css"
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.machineLearning", ["ui.bootstrap.bindHtml"]), a = function (e) {
        var t = i(85)(i.p + "ec0a8a563c61.css");
        i.e(7).then(function (n) {
            var a = [];
            return a.push(i(794)), a.push(i(795)), a.push(i(796)), a.push(i(797)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    };
    i(436), i(438), i(439), i(440), i(441), i(442), i(444);
    var r = {
        training: {
            url: "/training?ml_id",
            reloadOnSearch: !1,
            templateUrl: "/static/training/view/machine_learning_entry.html",
            controller: "MachineLearningConsoleController",
            params: {ml_id: null}
        },
        training_setup: {
            url: "/training/setup?ml_id&type&t",
            templateUrl: "/static/training/view/setup_training.html",
            controller: "SetupTrainingController",
            params: {type: null, ml_id: null, t: null},
            nested: {
                step1: {
                    url: "/step1",
                    templateUrl: "/static/training/view/include/select-worktable.html",
                    controller: "SelectWorktableController"
                },
                step2: {
                    url: "/step2",
                    templateUrl: "/static/training/view/include/config-train-set.html",
                    controller: "ConfigTrainSetController"
                },
                step3: {
                    url: "/step3",
                    templateUrl: "/static/training/view/include/confirm-training.html",
                    controller: "ConfirmTrainingController"
                }
            }
        },
        training_detail: {
            url: "/training/detail?ml_id&page_referrer",
            templateUrl: "/static/training/view/training-detail.html",
            controller: "TrainingDetailController",
            params: {result: null, meta: null}
        },
        training_dataset: {
            url: "/training/dataset?ml_id",
            templateUrl: "/static/training/view/training-dataset.html",
            controller: "ConfigTrainSetController",
            params: {ml_id: null}
        },
        training_switch_algorithm: {
            url: "/training/switch_algorithm?ml_id",
            templateUrl: "/static/training/view/switch-algorithm.html",
            controller: "SwitchAlgorithmController",
            params: {ml_id: null}
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    "use strict";
    angular.module("BC.machineLearning").constant("ML_MODEL_TYPES", [null, {
        code: 1,
        name: "ML_tm.regression",
        key: "regression"
    }, {code: 2, name: "ML_tm.clustering", key: "clustering"}, {
        code: 3,
        name: "ML_tm.classification",
        key: "classification"
    }]).constant("ML_ALGORITHMS", [{code: 0, name: "ML_wd.autoRecommend", key: "autoRecommend"}, {
        code: 1,
        name: "ML_tm.multLinearRegression",
        key: "mlinearRegression"
    }, {code: 2, name: "ML_tm.K-Means", key: "KMeans"}, {
        code: 3,
        name: "ML_tm.decisionTree",
        key: "decisionTree"
    }, {code: 4, name: "ML_tm.dTreeRegression", key: "DTreeRegression"}, {
        code: 5,
        name: "ML_tm.mixedGaussianModel",
        key: "MixedGaussianModel"
    }, {code: 6, name: "ML_tm.logisticRegression", key: "LogisticRegression"}, {
        code: 7,
        name: "ML_tm.neuralNetworks",
        key: "NeuralNetworks"
    }, {code: 8, name: "ML_tm.naiveBayes", key: "naiveBayes"}, {
        code: 9,
        name: "ML_tm.randomForestsClassifier",
        key: "randomForestsClassifier"
    }, {
        code: 10,
        name: "ML_tm.randomForestsRegression",
        key: "randomForestsRegression"
    }]).constant("ML_EVALUATES", [null, {
        code: 1,
        name: "ML_tm.5-FoldXValid",
        key: "5FoldXValid"
    }]).factory("mlDomConfig", ["$translate", function (e) {
        var t = {
            solver1: {
                type: "select",
                key: "solver",
                value: "auto",
                label: e.instant("Ml.config.solver1"),
                options: [{key: "auto", val: "auto"}, {key: "l-bfgs", val: "l-bfgs"}, {key: "normal", val: "normal"}],
                changeFun: function (e, t) {
                    "normal" == e.value ? (t[3].show = !1, t[4].show = !1) : (t[3].show = !0, t[4].show = !0)
                }
            },
            regParam: {
                key: "regParam",
                value: "0.0",
                label: e.instant("Ml.config.regParam"),
                min: 0,
                max: 65536,
                mustNumber: !0
            },
            elasticNetParam: {
                key: "elasticNetParam",
                value: "0.0",
                label: e.instant("Ml.config.elasticNetParam"),
                min: 0,
                max: 1,
                mustNumber: !0
            },
            maxIter: {
                key: "maxIter",
                value: 100,
                label: e.instant("Ml.config.maxIter"),
                min: 1,
                max: 200,
                mustNumber: !0,
                mustInteger: !0
            },
            tol: {key: "tol", value: 1e-6, label: e.instant("Ml.config.tol"), min: 0, max: 1, mustNumber: !0},
            seed: {
                key: "seed",
                value: 0,
                min: 0,
                max: 65536,
                mustNumber: !0,
                label: e.instant("Ml.config.seed"),
                mustInteger: !0
            },
            impurity: {
                type: "select",
                key: "impurity",
                value: "gini",
                label: e.instant("Ml.config.impurity"),
                options: [{key: "gini", val: "gini"}, {key: "entropy", val: "entropy"}]
            },
            maxDepth: {
                key: "maxDepth",
                value: 5,
                label: e.instant("Ml.config.maxDepth"),
                min: 1,
                max: 10,
                mustNumber: !0,
                mustInteger: !0
            },
            minInstancesPerNode: {
                key: "minInstancesPerNode",
                value: 1,
                label: e.instant("Ml.config.minInstancesPerNode"),
                min: 1,
                max: 1e6,
                mustNumber: !0,
                mustInteger: !0
            },
            minInfoGain: {
                key: "minInfoGain",
                value: "0.0",
                label: e.instant("Ml.config.minInfoGain"),
                min: 0,
                max: 1024,
                mustNumber: !0
            },
            threshold: {
                key: "threshold",
                value: .5,
                label: e.instant("Ml.config.threshold"),
                min: 0,
                max: 1,
                mustNumber: !0,
                enterTip: '\n                <div style="max-width: 248px;" bindonce>\n                    <div bo-text="\'Ml.tip.threshold1\' | translate"></div>\n                    <div bo-text="\'Ml.tip.threshold2\' | translate"></div>\n                    <div class="mt8" bo-text="\'Ml.tip.threshold3\' | translate"></div>\n                </div>\n            '
            },
            solver7: {
                type: "select",
                key: "solver",
                value: "l-bfgs",
                label: e.instant("Ml.config.solver7"),
                options: [{key: "l-bfgs", val: "l-bfgs"}, {key: "gd", val: "gd"}]
            },
            layers: {
                type: "select",
                key: "layers",
                value: 1,
                mustNumber: !0,
                label: e.instant("Ml.config.layers"),
                options: [{key: "1", val: 1}, {key: "2", val: 2}, {key: "3", val: 3}],
                changeFun: function (e, t) {
                    switch (e.value) {
                        case 1:
                            t[2].show = !0, t[3].show = !1, t[4].show = !1;
                            break;
                        case 2:
                            t[2].show = !0, t[3].show = !0, t[4].show = !1;
                            break;
                        case 3:
                            t[2].show = !0, t[3].show = !0, t[4].show = !0
                    }
                }
            },
            layer1: {
                key: "layers1",
                min: 2,
                max: 2048,
                mustNumber: !0,
                label: e.instant("Ml.config.layer1"),
                mustInteger: !0
            },
            layer2: {
                key: "layers2",
                min: 2,
                max: 2048,
                mustNumber: !0,
                label: e.instant("Ml.config.layer2"),
                show: !1,
                mustInteger: !0
            },
            layer3: {
                key: "layers3",
                min: 2,
                max: 2048,
                mustNumber: !0,
                label: e.instant("Ml.config.layer3"),
                show: !1,
                mustInteger: !0
            },
            modelType: {
                type: "select",
                key: "modelType",
                value: "multinomial",
                label: e.instant("Ml.config.multinomial"),
                options: [{key: "multinomial", val: "multinomial"}]
            },
            smoothing: {
                key: "smoothing",
                value: "1.0",
                label: e.instant("Ml.config.smoothing"),
                min: 1,
                max: 1024,
                mustNumber: !0
            },
            numTrees: {
                key: "numTrees",
                value: "21",
                label: e.instant("Ml.config.numTrees"),
                min: 1,
                max: 513,
                mustNumber: !0,
                mustInteger: !0
            }
        }, n = {1: [], 2: ["20", "0.0001", "1234"], 3: [], 4: [], 6: [], 7: [], 8: [], 9: [], 10: []}, a = {
            1: ["solver1", "regParam", "elasticNetParam", "maxIter", "tol"],
            2: ["maxIter", "tol", "seed"],
            3: ["impurity", "maxDepth", "minInstancesPerNode", "minInfoGain", "seed"],
            4: ["maxDepth", "minInstancesPerNode", "minInfoGain", "seed"],
            6: ["threshold", "regParam", "elasticNetParam", "maxIter", "tol"],
            7: ["solver7", "layers", "layer1", "layer2", "layer3", "maxIter", "tol"],
            8: ["modelType", "smoothing"],
            9: ["maxDepth", "minInstancesPerNode", "minInfoGain", "seed", "numTrees"],
            10: ["maxDepth", "minInstancesPerNode", "minInfoGain", "seed", "numTrees"]
        }, r = i(437);
        return angular.forEach(a, function (i, a) {
            angular.forEach(i, function (o, s) {
                i[s] = r(t[o], e), n[a] && void 0 !== n[a][s] && (i[s].value = n[a][s])
            })
        }), {
            param: a, setItemVal: function (t, i, n) {
                angular.forEach(a, function (a) {
                    for (var r = 0, o = a.length - 1; r < o; r++) {
                        var s = a[r];
                        if (s.key == t) {
                            s[i] = n, "minInstancesPerNode" == t && (s.label = e.instant("Ml.config.minInstancesPerNode") + " [" + s.min + ", " + s.max + "]");
                            break
                        }
                    }
                })
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    !function () {
        function t(e) {
            $.extend(!0, this, {type: "text", key: "", value: "", required: !0, label: "", show: !0, validErr: ""}, e)
        }

        var i;
        t.prototype.validFun = function (e, t) {
            return this.validErr = "", this.required && (_.isUndefined(this.value) || "" === this.value) ? (this.validErr = i.instant("canNotEmpty"), this.validErr) : void 0 != this.max && "number" == typeof this.max && (this.maxNotEqual && this.value >= this.max || !this.maxNotEqual && this.value > this.max) ? (this.validErr = i.instant("Ml.config.notMore") + this.max, this.validErr) : void 0 != this.min && "number" == typeof this.min && (this.minNotEqual && this.value <= this.min || !this.minNotEqual && this.value < this.min) ? (this.validErr = i.instant("Ml.config.notLess") + this.min, this.validErr) : this.mustNumber && isNaN(this.value) ? (this.validErr = i.instant("Ml.config.mustNumber"), this.validErr) : this.mustInteger && !_.isInteger(+this.value) ? (this.validErr = i.instant("Ml.config.mustInteger"), this.validErr) : (this.validCallback && (this.validErr = this.validCallback(e, t), this.validErr), this.validErr)
        }, t.prototype.changeFun = function (e, t) {
            this.validFun && this.validFun(e, t), this.changeCallback && this.changeCallback(e, t)
        }, e.exports = function (e, n) {
            return i = n, new t(e)
        }
    }()
}, function (e, t, i) {
    "use strict";

    function n(e, t, i, n, a, o, s, l, c, d) {
        function u(e) {
            return i.get("/api/ml/train_set_preview", e, {errHint: !1})
        }

        function p() {
            return {MODEL_TYPES: s, ALGORITHMS: l, EVALUATES: c}
        }

        function f(e) {
            return [null, {algorithm: [1, 4, 10], train_option: {operation: 1}}, {
                algorithm: [2],
                train_option: {
                    k: {
                        type: "number",
                        title: a.instant("ML_tm.clusteringNumbers"),
                        validation: function (e, t) {
                            return e > 30 || e < 2 || parseInt(e) != e ? a.instant("ML_tip.clusterCountRange") : t.dataCount < 30 && e > t.dataCount ? a.instant("ML_tip.clusterCountLimit") : void 0
                        }
                    }, operation: 1
                }
            }, {
                algorithm: [3, 6, 7, 8, 9],
                evaluate: [1],
                train_option: {
                    operation: 1,
                    positive_label: null,
                    positive_label_model: {label_num: null, val: null, options: []}
                }
            }][e]
        }

        return {
            getConfigurableMap: function (e, t, i) {
                var n = angular.copy(f(e));
                p();
                return t = t || n, i || (t.algorithm = n.algorithm), t.train_option && t != n && (_.each(t.train_option, function (e, t) {
                    "k" == t ? (n.train_option[t].value = e, n.train_option[t].value || (n.train_option[t].value = i && i[t])) : n.train_option[t] = e
                }), t.train_option = n.train_option), t.train_option && void 0 !== t.train_option.operation || (t.train_option = n.train_option), angular.copy(t)
            }, configMapToMeta: function (e) {
                var t = {};
                return t.algorithm = e.algorithm, t.evaluate = e.evaluate, e.train_option && (t.train_option = _.reduce(e.train_option, function (e, t, i) {
                    return e[i] = "k" == i ? t.value : t, e
                }, {}), $.extend(!0, t.train_option, d.getTrainOptByConfig(e))), t
            }, getSubmitParam: function (e) {
                function t(t) {
                    return t ? (_.isArray(t) || (t = [t]), t.map(function (t) {
                        var i = _.pick(t, "name", "data_type", "fid", "processor");
                        return i.comments = e.comments[t.fid], i
                    })) : t
                }

                var i = this, n = {
                    features: t(e.field_list),
                    predict_value: e.label_field && t(e.label_field)[0],
                    filter_list: e.filter_list
                }, a = {ml_type: e.type, train_set_info: n, null_value: (0, r.default)(e.null_value)};
                $.extend(a, i.configMapToMeta(e.config)), 2 == a.ml_type && a.train_option && (a.train_option.k ? a.train_option.auto_k = 0 : (a.train_option.auto_k = 1, a.train_option.k = "")), 3 == a.ml_type && a.train_option.positive_label_model && a.train_option.positive_label_model.val && (a.train_option.positive_label = a.train_option.positive_label_model.val, delete a.train_option.positive_label_model), e.chose && (a.algorithm = [e.chose]);
                var o = {ml_type: e.type, tb_id: e.tb_id, name: e.name};
                return e.ml_id && (o.ml_id = e.ml_id), {info: o, meta: a}
            }, availableVisualModes: function (e, t) {
                var i = {
                    1: ["formula"],
                    4: ["dtree"],
                    2: ["kcurve"],
                    5: ["kcurve"],
                    3: ["matrix", "dtree"],
                    6: ["matrix"],
                    7: ["matrix"],
                    8: ["matrix"],
                    9: ["matrix", "forests"],
                    10: ["forests"]
                };
                return t && t.roc && t.roc.length > 4 && i[e].splice(1, 0, "roc"), i[e]
            }, availableVisualModesForType: function (e, t) {
                var i = {1: ["formula", "dtree", "forests"], 2: ["kcurve"], 3: ["matrix", "roc", "dtree", "forests"]};
                if (t && "3" == e) {
                    _.every(t, function (e) {
                        return !e.roc || e.roc.length < 4
                    }) && i[3].splice(1, 1)
                }
                return i[e]
            }, getIndicators: function (e, t) {
                switch (1 * e) {
                    case 1:
                        return 1 == t.algorithm ? [{
                            key: "r2",
                            name: a.instant("ML_tm.fitR"),
                            reading: ["decimal", 4]
                        }, {
                            key: "adjustedR2",
                            name: a.instant("ML_tm.fitRAdjusted"),
                            reading: ["decimal", 4]
                        }] : [{key: "mse", name: a.instant("ML_tm.mse"), reading: ["decimal", 4]}];
                    case 2:
                        return [{key: "centers_length", name: a.instant("ML_tm.clusterCount")}, {
                            key: "total_numbers",
                            name: a.instant("ML_tm.rowCount")
                        }, {key: "total_distance", name: a.instant("ML_tm.sumOfSquares"), reading: ["decimal", 4]}];
                    case 3:
                        var i = [{key: "auc", name: a.instant("ML_tm.AUC"), reading: ["decimal", 2]}, {
                            key: "f_measure",
                            name: a.instant("ML_tm.fMeasure"),
                            reading: ["percentage", 2]
                        }, {
                            key: "precision",
                            name: a.instant("ML_tm.precision"),
                            reading: ["percentage", 2]
                        }, {key: "recall", name: a.instant("ML_tm.recall"), reading: ["percentage", 2]}];
                        return t.roc.length < 4 && i.shift(), i
                }
            }, getTrainSetPreview: u, fieldStats: function (e, t, n, a, r) {
                return i.get("/api/ml/field_stats", {tb_id: e, fid: t, data_type: n, filter_list: a, stats: r})
            }, setCheck: function (e, t, n) {
                return i.get("/api/ml/train_set_check", {tb_id: e, ml_type: t, train_set_info: (0, r.default)(n)})
            }, getModelInfo: function (e) {
                return i.get("/api/ml/info", {ml_id: e}).then(function (e) {
                    if (0 == e.status) {
                        e.result && e.result.train_result && e.result.train_result.train_result && (e.result.selected_result = e.result.train_result.train_result[e.result.chose], e.result.train_result.train_result.forEach(function (t, i) {
                            t.algorithm = e.result.meta.algorithm[i]
                        }));
                        var t = e.result.algorithm.indexOf(4);
                        if (t < 0 && (t = e.result.algorithm.indexOf(3)) < 0) return e
                    }
                    return e
                })
            }, chooseAlgorithm: function (e, t) {
                return i.get("/api/ml/choose", {ml_id: e, chose: t})
            }, submitTraining: function (e, t) {
                var n = angular.extend({}, e, {meta: (0, r.default)(t)});
                return i.post("/api/ml/modify", n)
            }, getModelList: function () {
                return i.get("/api/ml/list")
            }, delModel: function (e) {
                return i.post("/api/ml/delete", {ml_id: e})
            }, calcFieldByModel: function (e) {
                return i.post("/api/ml/field_modify", e)
            }, updateFieldModel: function (e, t) {
                return i.post("/api/ml/field_refresh", {
                    tb_id: e.tb_id,
                    fid: e.fid,
                    commit: 1 & !!t
                }).then(function (e) {
                    return 0 != e.status && (26106 == e.status && o("老模型不支持更新"), 26105 == e.status && o("当前模型已经最新，不需要更新"), 26107 == e.status && o("模型结构已改变，不支持更新")), e
                })
            }, chart2table: function (e) {
                var t = e.x.map(function (e) {
                    return _.pick(e, "data_type", "name", "nick_name", "fid")
                }), i = e.x.length, a = e.x[0].data.map(function (a, r) {
                    for (var o = [], s = 0; s < i; s++) "date" == t[s].data_type ? o.push(n("date")(e.x[s].data[r], "yyyy-M-d h:mm:ss")) : o.push(e.x[s].data[r]);
                    return o
                });
                return {schema: t, data: a}
            }, getAssignList: function (e) {
                return i.post("/api/ml/assign_list", {ml_id: e})
            }, mlAssign: function (e) {
                return i.post("/api/ml/assign", e)
            }, exportVersion: function (e) {
                return i.get("/api/ml/export_version", {ml_id: e})
            }
        }
    }

    n.$inject = ["commonService", "$q", "commonHttp", "$filter", "$translate", "errHint", "ML_MODEL_TYPES", "ML_ALGORITHMS", "ML_EVALUATES", "configModelService"];
    var a = i(1), r = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(a);
    angular.module("BC.machineLearning").service("mlearningService", n)
}, function (e, t, i) {
    "use strict";

    function n() {
        return {
            template: '\n            <div class="machine-learning ml-add-field" bindonce>\n                <div class="mt8 select-model">\n                    <span bdp-replace bo-text="\'ML_wd.runModel\'|translate"></span>\n                    <div class="select-wrap">\n                        <div class="w100" select-search-list select-data="ml_selected" search-list="model_list" mode-type="mlModelSelector"></div>\n                    </div>\n                </div>\n                <div class="mt16 select-model" ng-hide="!modelInfo">\n                    <span bdp-replace bo-text="\'ML_wd.newFieldName\'|translate"></span>\n                    <input type="text" class="select-wrap" ng-model="field_name" bo-placeholder="\'ML_wd.plzInputFieldName\'|translate"/></input>\n                </div>\n                <div class="mt16" ng-hide="modelInfo.status == 4 || !modelInfo">\n                    <span bdp-replace bo-text="\'ML_wd.fieldConfig\'|translate"></span>\n                    <a class="bdp-btn fr" ng-click="autoFill()"><span bdp-replace bo-text="\'ML_wd.autoFillField\'|translate"></span></a>\n                </div>\n                <div ng-if="modelInfo && modelInfo.status == 4" class="text-center">\n                    <p class="mt16 mb16"><span bdp-replace bo-text="\'ML_tip.needConfirmClusterNames\'|translate"></span></p>\n                    <a class="active-font" href="#/training/detail?ml_id={{modelInfo.ml_id}}" ng-if="!isDataScreen"> <span bdp-replace bo-text="\'ML_tip.goToConfirmCluster\'|translate"></span></a>\n                    <a class="active-font" href="#/training/detail?ml_id={{modelInfo.ml_id}}&page_referrer=data_screen_edit" ng-if="isDataScreen"> <span bdp-replace bo-text="\'ML_tip.goToConfirmCluster\'|translate"></span></a>\n                </div>\n                <ul class="features-map mt8" ng-show="modelInfo && modelInfo.status != 4">\n                    <li class="clearfix"\n                        ng-repeat="ft in modelInfo.meta.train_set_info.features"\n                        ng-class="{\'dropable\' : dropable }"\n                    >\n                        <!-- 工作表中select操作 -->\n                        <select class="cursor-pointer"\n                            ng-if="!dropable"\n                            ng-options="fd.name for fd in fieldList track by fd.fid" \n                            ng-model="ft.assigned_fd"\n                        >\n                            <option value="" bo-text="\'ML_tip.plzSelect\'|translate"></option>\n                        </select>\n\n                        <label>\n                            <span ng-mouseover="showTootip(ft,true)"\n                                ng-mouseleave="showTootip(ft,false)" \n                                ng-class="{\'text-hover-line\': !!ft.comments || !!ft.handler}"\n                                class="ml-line">\n                                <span class="nowrap" title="{{ft.name}}"\n                                ng-class="{\'has-more-info\': !!ft.comments || !!ft.handler}">\n                                {{ft.name}}\n                                </span>\n                                </span>\n                            <span class="fr">\n                                <i class="bdp-icon ico-type-{{ft.data_type}}"></i>\n                            </span>\n                        </label>\n                        <div fixed-with-dom=\'left-center\' ng-if="ft.showMlTootip" fixed-scroll-hide="ft.showMlTootip=false" class="ml-tooltip">\n                            <div class="ml-tooltip-remarks" ng-show="ft.comments">\n                                <span class="mr8">数据备注</span>                                \n                                <span class="ml-descript">{{ft.comments}}</span>                            \n                            </div>\n                            <div class="ml-tooltip-remarks" ng-show=\'ft.handler\'>\n                                <span class="mr8">数据更新</span>                                \n                                <span class="ml-descript">替换为此字段的</span>                            \n                                <span class="ml-content" ng-bind="ft.handler">平均值</span>                            \n                            </div>\n                        </div>\n\n                        <!-- 图表中拖拽操作 -->\n                        <div class="drag-target-inner"\n                            ng-if="dropable"\n                            ng-class="{\'blank\':!stepData.label_field}" \n                            data-drop="true" \n                            data-jqyoui-droppable="{onDrop:\'fieldDropOnFeature(ft)\'}"\n                        >\n                            <span ng-if="!ft.assigned_fd" class="mute-font"><span bdp-replace bo-text="\'ML_tip.dragFieldHere\'|translate"></span></span>\n                            <span ng-if="ft.assigned_fd" class="tag ui-select">\n                                <span class="name nowrap">\n                                    {{ft.assigned_fd.name}}\n                                </span>\n                            </span>\n                        </div>\n\n                    </li>\n                </ul>\n            </div>\n        ',
            restrict: "A",
            scope: {
                fieldList: "=",
                control: "=",
                tb_id: "=tbId",
                ct_id: "=ctId",
                dropable: "=fieldDropable",
                dragField: "="
            },
            link: function (e, t, i) {
                var n = e.control || {};
                n.onClose = function () {
                }, n.onOk = function () {
                    return e.onClickApply()
                };
                var a = t.closest(".ngdialog");
                a.css("position", "absolute"), a.css("left", "calc(50% - 150px)"), a.css("right", "initial"), a.css("z-index", "1000")
            },
            controller: "ApplyMachineLearningController"
        }
    }

    angular.module("BC.machineLearning").directive("mlAddField", n)
}, function (e, t, i) {
    "use strict";

    function n() {
        return {
            restrict: "A",
            priority: 1,
            scope: {field: "=mlField", action: "@mlFieldAction"},
            link: function (e, t, i) {
                var n = function () {
                    e[e.action]()
                };
                t.on("click", n), e.$on("$destroy", function () {
                    t.off("click", n)
                })
            },
            controller: ["$scope", "mlearningService", "errHint", "ngDialog", function (e, t, i, n) {
                e.updateFieldMM = function () {
                    console.log("update field machine-model"), t.updateFieldModel(e.field).then(function (a) {
                        0 == a.status && (e.fieldModelVersion = a.result, n.openConfirm({
                            template: '\n                            <div bindonce>\n                                <h3 class="ngdialog-title">机器学习字段{{field.name}}更新</h3>\n                                <div class="ngdialog-message">\n                                    <p>当前使用的模型版本：<span class="bright-font">{{fieldModelVersion.old_end_time}}</span>完成训练</p>\n                                    <p>此模型的最新版本：<span class="bright-font">{{fieldModelVersion.new_end_time}}</span>完成训练</p>\n                                    <p class="mt16">是否确认更新?</p>\n                                </div>\n                                <div class="ngdialog-buttons">\n                                    <button type="button"\n                                            class="ngdialog-button ngdialog-button-primary"\n                                            ng-click="confirm()"\n                                            bo-text="\'ok\'|translate" ></button>\n                                    <button type="button"\n                                            class="ngdialog-button ngdialog-button-primary"\n                                            ng-click="closeThisDialog()"\n                                            bo-text="\'cancel\'|translate" ></button>\n                                </div>\n                            </div>\n                        ',
                            className: "ngdialog-theme-default ngDialog-width-400",
                            plain: !0,
                            scope: e
                        }).then(function () {
                            t.updateFieldModel(e.field, "do").then(function (t) {
                                0 == t.status && (i("更新成功"), e.emit("fieldMMRefresh"))
                            })
                        }))
                    })
                }
            }]
        }
    }

    angular.module("BC.machineLearning").directive("mlField", n)
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e, t, i, n, a, r, s) {
        function c(e) {
            "string" == typeof e.null_value && (e.null_value = JSON.parse(e.null_value)), _.forEach(e.null_value, function (t, i) {
                _.findIndex(e.train_set_info.features, {fid: t.fid}) > -1 && (e.train_set_info.features[_.findIndex(e.train_set_info.features, {fid: t.fid})].handler = _.find(d, {type: t.handler}).name)
            })
        }

        e.model_list = [], e.ml_selected = null, e.modelInfo = null;
        var d = [{name: "指定值", type: "specified"}, {name: "中位数", type: "medium"}, {
            name: "平均值",
            type: "mean"
        }, {name: "最大值", type: "max"}, {name: "最小值", type: "min"}, {name: "删除空值", type: "delete-field"}];
        e.showTootip = function (e, t) {
            s(function () {
                e.showMlTootip = !!(e.comments || e.handler && "delete-field" != e.handler) && t
            })
        };
        var u = r.page_referrer;
        u && u.indexOf("data_screen") >= 0 && (e.isDataScreen = !0), e.$watch("ml_selected", function (i, n) {
            i && t.getModelInfo(i).then(function (t) {
                0 == t.status && (e.modelInfo = t.result, t.result.meta.null_value && "object" == (0, l.default)(t.result.meta.null_value) ? t.result.meta.null_value.length > 0 && c(t.result.meta) : t.result.meta.null_value && JSON.parse(t.result.meta.null_value).length > 0 && c(t.result.meta))
            })
        });
        var p = "";
        e.checkFieldAllowed = function (e, t) {
            return 1 == t.is_build_aggregated ? (p = a.instant("ML_tip.cantUseAggr"), !1) : t.data_type != e.data_type ? (p = a.instant("ML_tip.dataTypeNotMatch"), !1) : (p = "", !0)
        }, e.autoFill = function () {
            var t = e.modelInfo.meta.train_set_info.features, n = {}, r = e.fieldList, o = !1;
            t.forEach(function (e) {
                for (var t, i = r.length; i--;) if (t = r[i], t.data_type == e.data_type && (t.name == e.name || t.name == e.name) && !n[t.fid]) {
                    e.assigned_fd = t, n[t.fid] = !0, o = !0;
                    break
                }
            }), o || i(a.instant("ML_tip.notFoundFieldMatch"))
        }, e.fieldDropOnFeature = function (t, n, a) {
            e.dragField && (e.checkFieldAllowed(a, e.dragField) ? a.assigned_fd = e.dragField : i(p))
        };
        var f = !1;
        e.onClickApply = function () {
            if (!f) {
                var r = n.reject("input check failed");
                if (!e.field_name) return i(a.instant("ML_tip.inputFieldName")), r;
                var s = !1, l = _.reduce(e.modelInfo.meta.train_set_info.features, function (e, t) {
                    return t.assigned_fd ? (e[t.fid] = t.assigned_fd.fid, e) : (s = !0, e)
                }, {});
                if (s) return i(a.instant("ML_tip.matchAllField")), r;
                var c = {tb_id: e.tb_id, ml_id: e.modelInfo.ml_id, name: e.field_name, fid_dict: (0, o.default)(l)};
                e.ct_id && (c.ct_id = e.ct_id), f = !0;
                var d = t.calcFieldByModel(c);
                return d.finally(function () {
                    f = !1
                }), d
            }
        }, t.getModelList().then(function (t) {
            0 == t.status && (e.model_list = _.filter(t.result, function (e, t) {
                return (0 == e.status || 4 == e.status) && (e.iconId = "ico-mltype-" + e.type, !0)
            }))
        }).then(function () {
            !e.ml_selected && e.model_list.length && (e.ml_selected = e.model_list[0].ml_id)
        })
    }

    a.$inject = ["$scope", "mlearningService", "errHint", "$q", "$translate", "$stateParams", "$timeout"];
    var r = i(1), o = n(r), s = i(40), l = n(s);
    angular.module("BC.machineLearning").controller("ApplyMachineLearningController", a)
}, function (e, t, i) {
    i(443).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "addon_13da485f.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.machineLearning").directive("configModel", ["configModelService", function (e) {
            return {
                scope: !0,
                restrict: "E",
                replace: !0,
                templateUrl: "/static/training/view/model-config.html",
                link: function (t, i, n, a) {
                    var r = t;
                    r.model = t.stepData, function () {
                        setTimeout(function () {
                            i.outerHeight($(".J-left-card").outerHeight())
                        }, 10), 1 == r.model.config.algorithm.length && (r.model.chose = r.model.config.algorithm[0]), e.setConfigOption(r.model)
                    }();
                    var o = t.$watch("stepData.chose", function (t, n) {
                        t != n && void 0 !== t && (e.setConfigOption(r.model, !0), setTimeout(function () {
                            i.outerHeight($(".J-left-card").outerHeight())
                        }, 10))
                    });
                    t.$on("$destroy", function () {
                        o()
                    })
                }
            }
        }]).service("configModelService", ["$translate", "mlDomConfig", function (e, t) {
            function i(e, i) {
                var n = e.chose, a = e.config.train_option || {}, r = angular.copy(t.param[n]) || {};
                "" == e.chose ? (e.train_option.operation = 1, delete e.config.configOption) : (angular.forEach(r, function (e) {
                    var t = a[e.key];
                    void 0 === t || i || (e.value = t)
                }), angular.forEach(r, function (e) {
                    e.changeFun && "select" == e.type && e.changeFun(e, r)
                }), e.config.configOption = r)
            }

            function n(e) {
                var i, n, a = angular.copy(t.param[e.algorithm]) || {}, r = [];
                return angular.forEach(a, function (t) {
                    switch (t.key) {
                        case"layers":
                            n = e.layers.slice(1, -1).length;
                            break;
                        case"layers1":
                            n = e.layers.slice(1, -1)[0];
                            break;
                        case"layers2":
                            n = e.layers.slice(1, -1)[1];
                            break;
                        case"layers3":
                            n = e.layers.slice(1, -1)[2];
                            break;
                        default:
                            n = e[t.key]
                    }
                    if (void 0 !== n) {
                        if ("select" == t.type) for (var a = 0; a < t.options.length; a++) t.options[a].val == n && (i = t.options[a].key); else i = n;
                        r.push({label: t.label, value: i})
                    }
                }), r
            }

            function a(e) {
                var t = e.configOption, i = {};
                return e.train_option && 2 == e.train_option.operation && angular.forEach(t, function (e) {
                    e.value && (i[e.key] = e.mustNumber ? +e.value : e.value)
                }), i
            }

            function r(e) {
                var t = this;
                $.extend(!0, e.config.train_option, t.getTrainOptByConfig(e.config)), delete e.config.configOption
            }

            function o(e) {
                for (var t = e, i = !1, n = 0; n < t.length; n++) if (t[n].validFun && t[n].validFun(t[n]), t[n].validErr && t[n].show) {
                    i = t[n].validErr;
                    break
                }
                return i
            }

            this.setConfigOption = i, this.getTrainOptByConfig = a, this.getValidConfigOptErr = o, this.setLocalData = r, this.getDetailConfigOpt = n
        }]).directive("configInput", ["$parse", "$compile", "$templateCache", function (e, t, i) {
            var n = '\n\t\t\t<div class="form-item" bindonce="config" ng-show="config.show">\n\t\t\t    <div class="form-title">\n\t\t\t        <span class="form-label" bo-text="config.label"></span>\n\t\t\t        <div class="tip-icon-wrap" ng-if="config.enterTip" bdp-tooltip="config.enterTip" tooltip-placement="bottom-left">\n\t\t\t        \t<i class="bdp-icon ico-help"></i>\n\t\t\t        </div>\n\t\t\t    </div>\n\t\t\t    <div class="form-content" ng-class="{\'has-error\': config.validErr}">\n\t\t\t    \t<div class="tip-icon-wrap form-error" bdp-tooltip="config.validErr" tooltip-placement="bottom-left">\n\t\t\t    \t\t<i class="bdp-icon ico-check-error"></i>\n\t\t\t    \t</div>\n\t\t\t    \t<input class="form-input" type="number" ng-model="config.value" ng-change="config.changeFun(config, param)">\n\t\t\t    </div>\n\t\t\t</div>\n\t\t',
                a = '\n\t\t\t<div class="form-item" bindonce="config" ng-show="config.show">\n\t\t\t    <div class="form-title">\n\t\t\t        <span class="form-label" bo-text="config.label"></span>\n\t\t\t        <div class="tip-icon-wrap" ng-if="config.enterTip" bdp-tooltip="config.enterTip" tooltip-placement="bottom-left">\n\t\t\t        \t<i class="bdp-icon ico-help"></i>\n\t\t\t        </div>\n\t\t\t    </div>\n\t\t\t    <div class="form-content" ng-class="{\'has-error\': config.validErr}">\n\t\t\t    \t<div class="tip-icon-wrap form-error" bdp-tooltip="config.validErr" tooltip-placement="bottom-left">\n\t\t\t    \t\t<i class="bdp-icon ico-check-error"></i>\n\t\t\t    \t</div>\n\t\t\t    \t<input class="form-input" type="text" ng-model="config.value" ng-change="config.changeFun(config, param)">\n\t\t\t    </div>\n\t\t\t</div>\n\t\t',
                r = '\n\t\t\t<div class="form-item" bindonce="config" ng-show="config.show">\n\t\t\t    <div class="form-title">\n\t\t\t        <span class="form-label" bo-text="config.label"></span>\n\t\t\t        <div class="tip-icon-wrap" ng-if="config.enterTip" bdp-tooltip="config.enterTip" tooltip-placement="bottom-left">\n\t\t\t        \t<i class="bdp-icon ico-help"></i>\n\t\t\t        </div>\n\t\t\t        <i class="bdp-icon ico-check-error cursor-pointer" ng-if="config.validErr" bdp-tooltip="config.validErr" tooltip-placement="bottom-left"></i>\n\t\t\t    </div>\n\t\t\t    <select class="form-input" ng-model="config.value" ng-options="optItem.val as optItem.key for optItem in config.options" ng-change="config.changeFun(config, param)"></select>\n\t\t\t</div>\n\t\t',
                o = '\n\t\t\t<div class="form-item" bindonce="config" ng-show="config.show">\n\t\t\t    <div class="form-title">\n\t\t\t        <span class="form-label" bo-text="config.label"></span>\n\t\t\t        <div class="tip-icon-wrap" ng-if="config.enterTip" bdp-tooltip="config.enterTip" tooltip-placement="bottom-left">\n\t\t\t        \t<i class="bdp-icon ico-help"></i>\n\t\t\t        </div>\n\t\t\t        <i class="bdp-icon ico-check-error cursor-pointer" ng-if="config.validErr" bdp-tooltip="config.validErr" tooltip-placement="bottom-left"></i>\n\t\t\t    </div>\n\t\t\t    <label class="form-radio" ng-repeat="optItem in config.options">\n\t\t\t        <input type="radio" name="{{config.name}}" ng-model="config.value" value="{{optItem.val}}" ng-change="config.changeFun(config, param)">\n\t\t\t        <span bo-text="optItem.key"></span>\n\t\t\t    </label>\n\t\t\t</div>\n\t\t';
            return {
                scope: !0, replace: !1, restrict: "E", link: function (i, s, l, c) {
                    var d = i;
                    d.config = e(l.config)(i.$parent), d.param = e(l.param)(i.$parent), d.config.enterTip && (d.config.enterTip = t(d.config.enterTip)(i)[0].outerHTML), d.config.className && s.addClass(d.config.className), function () {
                        var c = e(l.modelType)(i.$parent);
                        if (!c) throw"error: 模型属性modelType不能为空~" + d.config.key;
                        var u = "";
                        switch (c) {
                            case"text":
                                u = a;
                                break;
                            case"number":
                                u = n;
                                break;
                            case"select":
                                u = r;
                                break;
                            case"radio":
                                u = o
                        }
                        s.append(t(u)(i))
                    }()
                }
            }
        }]).filter("detailConfigText", [function () {
            return function (e) {
                var t = Math.max(e.indexOf("["), e.indexOf("("));
                return t > 0 ? e.slice(0, t) : e
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.chartTemplate", ["ngDragDrop"]), a = function (e) {
        var t = i(85)(i.p + "e1bc07b5ee9d.css");
        i.e(11).then(function (n) {
            var a = [];
            return a.push(i(798)), a.push(i(799)), a.push(i(800)), a.push(i(801)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    };
    i(446);
    var r = {
        chart_template: {
            url: "/chart_template",
            templateUrl: "/static/chartTemplate/view/chart_template.html",
            controller: "chartTemplate"
        },
        chart_template_config: {
            url: "/chart_template_config",
            templateUrl: "/static/chartTemplate/view/chart_template_config.html",
            controller: "chartTemplateConfig"
        },
        chart_template_rule: {
            url: "/chart_template_rule",
            templateUrl: "/static/chartTemplate/view/chart_template_rule.html",
            controller: "chartTemplateRuleList"
        },
        chart_template_rule_modify: {
            url: "/chart_template_rule_modify/:chartTplRuleId",
            templateUrl: "/static/chartTemplate/view/chart_template_rule_modify.html",
            controller: "chartTemplateRule"
        },
        chart_template_rule_create: {
            url: "/chart_template_rule_create",
            templateUrl: "/static/chartTemplate/view/chart_template_rule_modify.html",
            controller: "chartTemplateRule"
        }
    };
    e.exports = {name: n.name, requires: a, routes: r}
}, function (e, t, i) {
    i(447).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "dash_631e7135.css"
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.accountPermission", []), a = function (e) {
        var t = i(85)(i.p + "e838fd7f8788.css");
        i.e(3).then(function (n) {
            var a = [];
            return a.push(i(802)), a.push(i(803)), a.push(i(804)), a.push(i(805)), a.push(i(806)), a.push(i(807)), a.push(i(808)), a.push(i(809)), a.push(i(810)), a.push(i(811)), a.push(i(812)), a.push(i(813)), a.push(i(814)), a.push(i(815)), a.push(i(816)), a.push(i(817)), a.push(i(818)), a.push(i(819)), a.push(i(820)), a.push(i(821)), a.push(i(822)), a.push(i(823)), a.push(i(824)), a.push(i(825)), a.push(i(826)), a.push(i(827)), a.push(i(828)), a.push(i(829)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    };
    i(449), i(451);
    var r = {
        account: {
            url: "/account",
            templateUrl: "/static/accountPermission/view/accountPermission.html",
            controller: "accountPermissionCtrl"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    i(450).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "load-on-boot_d675baa8.css"
}, function (e, t, i) {
    "use strict";

    function n(e, t, i, a, r) {
        return {
            restrict: "EA",
            replace: !0,
            scope: {selectGroup: "="},
            templateUrl: "/static/accountPermission/view/templates/directiveTemplates/select_group_directive.html",
            link: function (e, o, s) {
                function l(e) {
                    function t(e) {
                        i[e.group_id] = {
                            usable: e.usable,
                            group_level: e.group_level
                        }, angular.forEach(e.group_list, function (e) {
                            t(e)
                        })
                    }

                    var i = {};
                    angular.forEach(e, function (e) {
                        t(e)
                    })
                }

                !function () {
                    e.viewData = {showGroupList: !1, loading: !1, list: [], listOuterWidth: null}
                }(), e.showGroupList = function () {
                    var n = e.viewData;
                    n.showGroupList = !e.viewData.showGroupList, e.viewData.showGroupList && (n.list.length > 0 || (n.loading = !0, t.account.groupList().then(function (e) {
                        n.loading = !1, 0 == e.status && (n.list = angular.copy(e.result), l(e.result), n.list[0].nodeCollapse = !0, n.listOuterWidth = i.calcTreeNodeStyle(n.list, 170))
                    })))
                }, e.selectGroupFun = function (t) {
                    t.group_id != n.group_id && (t.usable ? (e.selectGroup.group_id = t.group_id, e.selectGroup.group_name = t.group_name, e.viewData.showGroupList = !1) : r(a.instant("account.noMovePermission")))
                }
            }
        }
    }

    n.$inject = ["$rootScope", "commonService", "flatTreeHandleService", "$translate", "errHint"], angular.module("BC.accountPermission").directive("selectGroup", n)
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.data-ownership", []), a = function (e) {
        var t = i(85)(i.p + "10eb0e151dfb.css");
        i.e(10).then(function (n) {
            var a = [];
            return a.push(i(830)), a.push(i(831)), a.push(i(832)), a.push(i(833)), a.push(i(834)), a.push(i(835)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    };
    i(453), i(455), i(457), i(459), i(461), i(463), i(464), i(465), i(469), i(470), i(471), i(472), i(473), i(474), i(475), i(476), i(477), i(478), i(479), i(480), i(481), i(482), i(483), i(484), i(485);
    var r = {
        dash_manage: {
            url: "/dash_manage",
            templateUrl: "/static/data-ownership/view/dash-manage.html",
            controller: "dashManageCtrl"
        },
        dash_log: {
            url: "/dash_log",
            templateUrl: "/static/data-ownership/view/dash-log.html",
            controller: "dashLogCtrl"
        },
        worksheet_log: {
            url: "/worksheet_log",
            templateUrl: "/static/data-ownership/view/worksheet-log.html",
            controller: "worksheetLogCtrl"
        },
        tpl_rule_log: {
            url: "/tpl_rule_log",
            templateUrl: "/static/data-ownership/view/tpl-rule-log.html",
            controller: "tplRuleLogCtrl"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    i(454).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "data-ownership_18ca97f9.css"
}, function (e, t, i) {
    i(456).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "worktable-filter-dialog_d5423cdb.css"
}, function (e, t, i) {
    i(458).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "worksheet-manage_2c717ca6.css"
}, function (e, t, i) {
    i(460).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "admin-manage-list_05338d62.css"
}, function (e, t, i) {
    i(462).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "relation-authority_66881c5c.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.data-ownership").directive("icoWorktable", ["$state", "$parse", function (e, t) {
            return {
                restrict: "A", replace: !1, scope: !1, link: function (i, n, a) {
                    function r() {
                        "allot" == o.type ? n.addClass("ico-file-normal") : "public" == o.tb_type ? n.addClass("ico-file-public") : "snapshot" == o.type ? n.addClass("ico-file-opends") : n.addClass("ico-file-" + o.type), 0 == o.tb_status && "data_source" == e.current.name && n.addClass("shared_unread"), 1 == o.permission_type ? n.addClass("ico-file-authority-edit") : 2 == o.permission_type && n.addClass("ico-file-authority-readonly")
                    }

                    var o = t(a.icoWorktable)(i);
                    void 0 !== a.icoWatch && i.$watch(a.icoWatch, function (e, t) {
                        e != t && (n.removeClass("ico-file-authority-edit"), n.removeClass("ico-file-authority-readonly"), r())
                    }), i.$on("broadcastResetIconClass", function (e, t) {
                        t && o.tb_id == t.tb_id && 1 == t.tb_status && n.hasClass("shared_unread") && n.removeClass("shared_unread")
                    }), r()
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.data-ownership").service("worktableService", ["commonService", "$q", "$rootScope", function (e, t, i) {
            function n(e, t) {
                var i = e.tb, n = t.result, a = n.can_edit, r = ["join", "union", "aggr", "script", "transpose"];
                e.permission || (e.permission = {}), e.permission.enableEditModelStruct = a && r.indexOf(i.type) >= 0
            }

            function a(e, t) {
                var n = e.tb, a = t, r = {};
                if (!n) return {};
                var o = i.permision.isPersonal;
                if (a) var s = 6 != a.type, l = function () {
                    var e = !o && "union" != n.type && "public" != n.type && "allot" != n.type && "access_tb" != n.tb_type,
                        t = a.partition;
                    return "string" == typeof t && (t = angular.fromJson(t)), t = t || {}, e && a.hasOwnProperty("can_partition") && !!a.can_partition
                }(); else var s = 6 != n.type, l = !1;
                var c = function () {
                    return !o && void 0 != n.update_mode
                }(), d = function () {
                    return s && "ds" != n.type && "opends" != n.type && "public" != n.type && "extrahive" != n.type && (!o || "access_tb" != n.tb_type)
                }(), u = !o;
                return r = {
                    isNotLogType: s,
                    enableSetField: !("access_tb" == n.tb_type || !s),
                    enableEditField: "self" == n.tb_type && 2 != n.permission_type,
                    enableAddField: "self" == n.tb_type && 2 != n.permission_type,
                    enableReplace: "self" == n.tb_type && 2 != n.permission_type && "excel" == n.type,
                    enableFullUpdate: function () {
                        return "self" == n.tb_type && 1 == n.update_mode && ("join" == n.type || "union" == n.type || "script" == n.type)
                    }(),
                    enableTransformTbType: c,
                    enableChangeTbType: function () {
                        return !(o || !(["union", "public", "allot"].indexOf(n.type) < 0) || "access_tb" == n.tb_type || ["join", "script", "aggr", "transpose"].indexOf(n.type) >= 0 || !s)
                    }(),
                    enableSetPartition: l,
                    enableAuthorization: 2 != n.permission_type && !o && (0 == i.userInfoObj.role || 2 == i.userInfoObj.role),
                    enableEditModelStruct: void 0,
                    enableTbLog: u,
                    enableUpdateRecord: d,
                    enableHistorySecTab: u && d,
                    enableDelInRecord: 2 != n.permission_type,
                    enableRecordTab: d || u,
                    enableEditFieldTab: "self" == n.tb_type || "access_tb" == n.tb_type,
                    enableModelStructTab: function () {
                        return ["aggr", "join", "union", "script", "transpose"].indexOf(n.type) > -1 && "access_tb" != n.tb_type
                    }(),
                    enableAdvanceSetTab: l || c
                }, e.permission || (e.permission = {}), e.permission = r, r
            }

            this.permission = {setAll: a, setEableModelStruce: n}
        }])
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(391), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i, n, r, o) {
            return {
                restrict: "EA",
                replace: !0,
                scope: !0,
                templateUrl: "/static/data-ownership/view/worksheet-manage.html",
                link: function (t, i, s) {
                    function l(i) {
                        "page" != i && (t.worksheetManageView.queryData.page = 1), t.pageStatus.gettingData = !0, e.pageLoading = !0;
                        var n = t.worksheetManageView.queryData, a = r.formatRequestParam(n);
                        r.getOverviewData(a).then(function (e) {
                            if (t.worksheetManageView.tableList = [], e.result) {
                                var i = r.handleOverviewData(e.result);
                                t.worksheetManageView.page = i.page, t.worksheetManageView.summary = i.summary, t.worksheetManageView.tableList = i.tableList, t.worksheetManageView.tableTotal = i.tableTotal, i.tableList.forEach(function (e) {
                                    e.adminOptions = {
                                        mode: "tableManager",
                                        userList: e.adminList || [],
                                        parentData: e,
                                        clickFunc: 2 != e.permission_type ? f : h
                                    }
                                }), o.speedTimeLog.end("worktableCtrl", {page: "wtb_overview"})
                            }
                        }).finally(function () {
                            t.pageStatus.gettingData = !1, t.pageStatus.initReady = !0, e.pageLoading = !1
                        })
                    }

                    function c() {
                        t.worksheetManageView.queryData.page = 1, (0, a.default)(t.worksheetManageView.queryData, t.worksheetManageView.selectData), l()
                    }

                    function d() {
                        if (!t.worksheetManageView.queryData.user_id) return !1;
                        t.worksheetManageView.queryData.page = 1, l()
                    }

                    function u(e, i) {
                        if (e && e.stopPropagation(), 0 == t.worksheetManageView.tableTotal) return !1;
                        var n = t.worksheetManageView.queryData;
                        switch (n.sort_field != i && (n.sort_type = "asc"), n.sort_field = i, n.sort_type) {
                            case"asc":
                                n.sort_type = "desc";
                                break;
                            case"desc":
                                n.sort_type = "asc"
                        }
                        l()
                    }

                    function p(e, i, n) {
                        if (0 == t.worksheetManageView.tableTotal) return !1;
                        t.worksheetManageView.queryData.page = e, l("page")
                    }

                    function f(t) {
                        var i = t.tb_id;
                        localStorage.setItem("jumpToAuthorizationView", i), e.global.jumpToAuthorizationView = i, n(function () {
                            e.$broadcast("skipTargetTable", i)
                        }, 200)
                    }

                    function h(t) {
                        e.$broadcast("skipTargetTable", t.tb_id)
                    }

                    function g() {
                        var e = t.worksheetManageView.queryData, i = r.formatRequestParam(e);
                        delete i.page, Highcharts.post("/api/tb/export_list_info", i)
                    }

                    var m = $.cookie("locale") || "zh";
                    t.initView = function () {
                        t.pageStatus = {gettingData: !1, initReady: !1}, t.worksheetManageView = {
                            isPersonal: !1,
                            defaultPlaceHolder: "en" == m ? "All" : "全部用户",
                            queryData: {
                                user_id: "all",
                                tb_name: "",
                                sort_field: "data_size",
                                sort_type: "desc",
                                page: 1,
                                data_source: 0,
                                data_type: 0
                            },
                            page: {},
                            summary: {},
                            tableList: [],
                            tableTotal: 0,
                            changeQueryUser: c,
                            changeQueryText: d,
                            changeSortOpt: u,
                            changePage: p,
                            goAuthorization: f,
                            goTablePreview: h,
                            exportView: g,
                            selectData: {},
                            ordinaryUser: 0 == t.userInfoObj.role || 2 == t.userInfoObj.role
                        }, l()
                    }, t.initView();
                    var v = t.$watch(function () {
                        return e.enterprise_type
                    }, function (i) {
                        i && (3 == e.enterprise_type && (t.worksheetManageView.isPersonal = !0), v())
                    });
                    $(".J-table-search-input").off("keydown.tableSearch").on("keydown.tableSearch", bdp.utils.debounce(function (e) {
                        if ([37, 38, 39, 40].indexOf(e.keyCode) >= 0) return !1;
                        d()
                    }, 300)), $(".worksheet-manage-view").off("scroll.tableManage").on("scroll.tableManage", bdp.utils.debounce(function (e) {
                        t.$broadcast("broadcastHideSelectList", !0)
                    }, 100))
                }
            }
        }

        angular.module("BC.data-ownership").directive("worksheetManage", e), e.$inject = ["$rootScope", "commonService", "errHint", "$timeout", "worksheetManageService", "logService"]
    }()
}, function (e, t, i) {
    i(467), e.exports = i(3).Object.assign
}, function (e, t, i) {
    var n = i(11);
    n(n.S + n.F, "Object", {assign: i(468)})
}, function (e, t, i) {
    "use strict";
    var n = i(32), a = i(63), r = i(39), o = i(59), s = i(92), l = Object.assign;
    e.exports = !l || i(24)(function () {
        var e = {}, t = {}, i = Symbol(), n = "abcdefghijklmnopqrst";
        return e[i] = 7, n.split("").forEach(function (e) {
            t[e] = e
        }), 7 != l({}, e)[i] || Object.keys(l({}, t)).join("") != n
    }) ? function (e, t) {
        for (var i = o(e), l = arguments.length, c = 1, d = a.f, u = r.f; l > c;) for (var p, f = s(arguments[c++]), h = d ? n(f).concat(d(f)) : n(f), g = h.length, m = 0; g > m;) u.call(f, p = h[m++]) && (i[p] = f[p]);
        return i
    } : l
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.data-ownership").service("worksheetManageService", ["commonService", function (e) {
            function t(t) {
                return e.tb.getTbCapacity(t).then(function (e) {
                    return 0 == e.status ? {result: e.result} : {}
                })
            }

            function i(e) {
                function t(e) {
                    var t = e.to_groups || [], i = e.to_users || [];
                    return t.map(function (e) {
                        e.name = e.group_name
                    }), t.concat(i)
                }

                var i = {
                    tableTotal: e.count,
                    tableList: e.tb_list || [],
                    page: {total: Math.ceil(e.count / 50), cur: e.page},
                    summary: {
                        base: e.stat.base,
                        combined: e.stat.view,
                        total: e.stat.total,
                        limit: e.stat.data_size_limit,
                        ds_count: e.ds_count.ds_count,
                        ds_tb_count: e.ds_count.ds_tb_count,
                        tb_data_count: e.ds_count.tb_data_count
                    }
                };
                return i.tableList.map(function (e) {
                    e.folder_path_str = "", 1 == e.folder_path.length ? e.folder_path_str = "zh" == a ? "根目录" : "Folder Root" : e.folder_path.map(function (t, i) {
                        i > 0 && (e.folder_path_str += t.folder_name, i < e.folder_path.length - 1 && (e.folder_path_str += " > "))
                    }), e.adminList = t(e), e.data_count = e.data_count.toLocaleString()
                }), i
            }

            function n(e) {
                var t = {
                    page: e.page || 0,
                    keyword: e.tb_name || "",
                    order: e.sort_field || "title",
                    desc: "desc" == e.sort_type ? 1 : 0
                };
                return "all" != e.user_id && (t.sub_id = e.user_id), 0 != e.data_source && (t.data_source = e.data_source), 0 != e.data_type && (t.data_type = e.data_type), t
            }

            var a = $.cookie("locale") || "zh";
            this.getOverviewData = t, this.formatRequestParam = n, this.handleOverviewData = i
        }]).filter("projectSearch", [function () {
            return function (e, t) {
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r) {
            return {
                restrict: "EA",
                replace: !0,
                scope: {options: "="},
                templateUrl: "/static/data-ownership/view/admin-manage-list.html",
                link: function (e, t, o) {
                    function s(t) {
                        e.options.userList = t;
                        var i = e.adminManageData.limitNum;
                        e.adminManageData.remainNum = t.length - i, a(function () {
                            e.adminManageData.isDetail ? e.adminManageData.displayUserList = angular.copy(t) : e.adminManageData.displayUserList = t.slice(0, i), l()
                        }, 100)
                    }

                    function l() {
                        if (e.adminManageData.displayUserList.map(function (e) {
                            e.showName = e.name.substr(0, 1).toLocaleUpperCase()
                        }), e.adminManageData.onlyPreview) {
                            for (var t = [], i = e.adminManageData.remainNum, n = i; n < e.options.userList.length; n++) t.push(e.options.userList[n].name);
                            e.adminManageData.remainDisplay = t.join(",")
                        }
                        a(function () {
                            u()
                        }, 200)
                    }

                    function c() {
                        var t = e.options;
                        if (t && t.onlyPreview || e.adminManageData.isDetail) return !1;
                        t && t.clickFunc ? t.clickFunc(e.adminManageData.parentData) : p()
                    }

                    function d(t) {
                        var i = angular.element(".J-admin-manage-list-ul");
                        i && (i.hasClass("is-not-collapse") ? i.removeClass("is-not-collapse") : i.addClass("is-not-collapse")), e.adminManageData.isToggleAll = !e.adminManageData.isToggleAll
                    }

                    function u() {
                        var t = angular.element(".J-admin-manage-list-ul"), i = angular.element(".J-toggle-item");
                        if (!e.adminManageData.isDetail) return i.hide(), !1;
                        var n = t.width(),
                            a = e.adminManageData.displayUserList && e.adminManageData.displayUserList.length || 0;
                        Math.ceil(120 * a / n) > 2 ? i.show() : i.hide()
                    }

                    function p() {
                        var t = e.adminManageData.mode, i = e.adminManageData.parentData, n = e.options;
                        n.isOpenPreRequest && n.openPreRequestFunc({mode: t, data: i}).then(function (t) {
                            e.$broadcast("broadcastUpdateAddList", t)
                        }), f(e.options.userList)
                    }

                    function f(t) {
                        var a = e.options;
                        i.open({
                            template: "/static/data-ownership/view/choose-admin-dialog.html",
                            className: "ngdialog-theme-default ngdialog-width-460 ngDialog-choose-admin",
                            scope: e,
                            disableAnimation: !0,
                            data: {
                                title: n.instant("account.addUser"),
                                type: "",
                                addList: t,
                                wait: !!a.isOpenPreRequest,
                                okCallback: h
                            },
                            controller: "chooseAdminCtrl"
                        })
                    }

                    function h(t) {
                        var i = r.defer(), n = e.options, a = e.adminManageData.mode, o = e.adminManageData.parentData;
                        return n && n.saveUserList && n.saveUserList({
                            userList: t,
                            mode: a, parentData: o
                        }).then(function () {
                            i.resolve(!0), s(t)
                        }, function (e) {
                            i.reject(e)
                        }), i.promise
                    }

                    e.initView = function () {
                        var t = e.options, i = !!t.isDetail, n = t.mode, a = t.total, r = t.onlyPreview,
                            o = t.parentData, s = t.userList, u = Number(t.limitNum) || 4, f = s.length - u;
                        f = f > 0 ? f : 0, a && (u = s.length, f = t.total - u), e.adminManageData = {
                            mode: n,
                            total: a,
                            parentData: o,
                            onlyPreview: r,
                            isDetail: i,
                            limitNum: u,
                            remainNum: f,
                            remainDisplay: "",
                            displayUserList: [],
                            isToggleAll: !1,
                            toggleAllItems: d,
                            openChooseUserListDialog: p,
                            clickListWrapper: c
                        }, e.adminManageData.displayUserList = i ? angular.copy(s) : s.slice(0, u), t.clickFunc || (t.clickFunc = e.callback), l()
                    }, e.initView(), window.location.href.indexOf("dash_manage") >= 0 && $(window).off("resize.dashManage").on("resize.dashManage", bdp.utils.debounce(function (e) {
                        u()
                    }, 200)), e.$on("$destroy", function () {
                        $(window).off("resize.dashManage")
                    })
                }
            }
        }

        angular.module("BC.data-ownership").directive("adminManageList", e), e.$inject = ["$rootScope", "commonService", "ngDialog", "$translate", "$timeout", "$q"]
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o) {
            return {
                restrict: "EA", replace: !0, scope: {logData: "="}, link: function (s, l, c) {
                    function d(e, t) {
                        "dash_log" == e.mode && (t.proj_id = "" == t.dsh_id_list ? e.requestParam.proj_id : "", "" != t.dsh_id_list && "[]" != t.dsh_id_list || delete t.dsh_id_list), "tpl_log" == e.mode && "" == t.tpl_id_list && (t.is_all = 1, delete t.tpl_id_list), "rule_log" == e.mode && "" == t.rule_id_list && (t.is_all = 1, delete t.rule_id_list), "worksheet_log" == e.mode && "" == t.tb_list && delete t.tb_list, "database_log" == e.mode && "" == t.ds_id && delete t.ds_id
                    }

                    function u(t) {
                        var i = s.logData, n = s.vmData;
                        return !("dash_log" == i.mode && !t.hasOwnProperty("dsh_id_list") && !t.proj_id) || (e(function () {
                            n.list = []
                        }), !1)
                    }

                    function p() {
                        var e = s.logData, t = s.vmData, n = s.logData.requestParam,
                            a = angular.extend({}, n, s.vmData.query);
                        if (a.page = s.vmData.page, d(e, a), !u(a)) return !1;
                        e.loading = !0, i.post(e.url, a).then(function (e) {
                            if (0 == e.status) {
                                var i = e.result;
                                t.list = i.log_list, t.page = i.page, t.total = i.total
                            }
                        }).finally(function () {
                            e.loading = !1
                        })
                    }

                    function f(e, t) {
                        return !!e && e.toString().toLowerCase().indexOf(t.toLowerCase()) >= 0
                    }

                    var h = c.tpl || "/static/data-ownership/view/manage-operate-log-directive.html";
                    i.get(h).then(function (e) {
                        l.replaceWith(n(e)(s))
                    }), function () {
                        s.vmData = {query: {start_date: "", end_date: ""}, date: o.instant("ds.all"), page: 1}, p()
                    }(), s.vmFun = {
                        changeQueryText: bdp.utils.debounce(function (e) {
                            var t = [], i = s.logData.search[0];
                            angular.forEach(i.list, function (e) {
                                i.text ? (e.id && f(e.name, i.text) && t.push(e.id), i.saveVal = t) : (i.value = "", delete i.saveVal)
                            }), this.toQuery()
                        }, 300), changeQuerySelect: function () {
                            var e = [], t = s.logData.search[0];
                            t.value ? (e.push(t.value), t.saveVal = e) : t.saveVal = "", this.toQuery()
                        }, toQuery: function () {
                            var e = {};
                            angular.forEach(s.logData.search, function (t) {
                                t.saveVal instanceof Array ? e[t.key] = angular.toJson(t.saveVal) : e[t.key] = t.value
                            }), angular.extend(s.vmData.query, e), s.vmData.page = 1, p()
                        }, showDate: function () {
                            var e = s.vmData.query, i = [e.start_date, e.end_date];
                            if ("" === i[0] && "" === i[1] && (i[0] = Highcharts.dateFormat("%Y-%m-%d", +new Date), i[1] = Highcharts.dateFormat("%Y-%m-%d", +new Date)), i.length > 1) {
                                var n = i[0] ? i[0].split(" ")[1] || "00:00:00" : "00:00:00",
                                    a = i[1] ? i[1].split(" ")[1] || "00:00:00" : "00:00:00";
                                i = i.concat([n, a])
                            } else 0 === i.length && (i = [+new Date, +new Date, "00:00:00", "00:00:00"]);
                            t.open({
                                template: "/static/partials/dialogTemplates/custom_date_modal.html",
                                className: "ngdialog-theme-default date-picker-modal daterange-bdp-modal",
                                data: {filterItem: e, range: i},
                                scope: s
                            })
                        }, changePage: function (e) {
                            s.vmData.page = e, p()
                        }
                    }, s.dateTimeByHalfHour = a, s.saveDateRange = function (e, i) {
                        var n = e, a = n.sDate ? n.sDate + " " + n.sDateHour : null,
                            l = n.eDate ? n.eDate + " " + n.eDateHour : null;
                        if (a && l) {
                            if (!n.sDateHour) return r(o.instant("filter.startDateErr2")), !1;
                            if (!n.eDateHour) return r(o.instant("filter.endDateErr2")), !1;
                            if (new Date(a) - new Date(l) > 0) return r(o.instant("filter.dateRangeInvalid")), !1
                        } else {
                            if (a && !l && !n.sDateHour) return r(o.instant("filter.startDateErr2")), !1;
                            if (!a && l && !n.eDateHour) return r(o.instant("filter.endDateErr2")), !1
                        }
                        var c = a || "不限", d = l || "不限";
                        s.vmData.query.start_date = a || null, s.vmData.query.end_date = l || null, s.vmData.date = c + "~" + d, a || l || (s.vmData.date = o.instant("ds.all")), s.vmFun.toQuery(), t.close(i)
                    }, s.$on("$destroy", function () {
                        $(".J-manage-log-page-view").off("scroll.logPage")
                    }), $(".J-manage-log-page-view").off("scroll.logPage").on("scroll.logPage", bdp.utils.debounce(function (e) {
                        s.$broadcast("broadcastHideSelectList", !0)
                    }, 100))
                }
            }
        }

        e.$inject = ["$timeout", "ngDialog", "commonHttp", "$compile", "dateTimeByHalfHour", "errHint", "$translate"], angular.module("BC.data-ownership").directive("manageOperateLog", e)
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o) {
            function s() {
                var t = r.prepareData(e.chooseAdminData.addList);
                e.chooseAdminData.addList = t.addList, e.chooseAdminData.originAddList = t.originAddList, e.chooseAdminData.addUserMap = t.addUserMap, e.chooseAdminData.originalAddList = t.originalAddList, e.chooseAdminData.showAddNum = t.showAddNum
            }

            function l() {
                function t(t) {
                    var i = t.wholeList, n = e.chooseAdminData.addUserMap, a = r.getPrevClearList(i, n);
                    e.chooseAdminData.wholeList = a.wholeList, e.chooseAdminData.originWholeList = a.originWholeList, e.chooseAdminData.showWholeNum = a.showWholeNum
                }

                var i = r.getUserListCache();
                i ? t({
                    wholeList: i,
                    originWholeList: angular.copy(i),
                    showWholeNum: i.length
                }) : (e.dialogStatus.gettingUserList = !0, r.getUserList().then(function (e) {
                    t(e)
                }).finally(function () {
                    e.dialogStatus.gettingUserList = !1
                }))
            }

            function c(t) {
                var i = e.chooseAdminData.addUserMap;
                i[t.user_id] ? n(e.tips["account.hasAdded"]) : (t.hidden = !1, i[t.user_id] = !0, e.chooseAdminData.addList.push(angular.copy(t)), e.chooseAdminData.showAddNum++, r.updateWholeList(e.chooseAdminData, t, "del"))
            }

            function d() {
                function t(t) {
                    t.hidden = !1, a[t.user_id] = !0, e.chooseAdminData.addList.push(angular.copy(t)), e.chooseAdminData.showAddNum++
                }

                if (e.chooseAdminData.wholeList.length <= 0) return !1;
                var i = !!e.chooseAdminData.wholeQuery, a = e.chooseAdminData.addUserMap;
                if (i) {
                    var o = [];
                    angular.forEach(e.chooseAdminData.wholeList, function (e) {
                        !a[e.user_id] && e.queryShow && (t(e), o.push(e.user_id))
                    }), r.updateWholeList(e.chooseAdminData, o, "del_query_all")
                } else angular.forEach(e.chooseAdminData.wholeList, function (e) {
                    a[e.user_id] || t(e)
                }), r.updateWholeList(e.chooseAdminData, [], "del_all");
                n(e.tips["account.addDone"])
            }

            function u(t, i) {
                e.chooseAdminData.addList.splice(t, 1), e.chooseAdminData.addUserMap[i.user_id] = !1, e.chooseAdminData.showAddNum--, r.updateWholeList(e.chooseAdminData, i, "add")
            }

            function p() {
                function t(e, t) {
                    return !!e && e.toString().toLowerCase().indexOf(t.toLowerCase()) >= 0
                }

                var i = !!e.chooseAdminData.addQuery, n = e.chooseAdminData.addQuery, a = [];
                if (i) {
                    var o = [];
                    e.chooseAdminData.addList.map(function (i) {
                        t(i.name, n) || t(i.username, n) ? (a.push(i), e.chooseAdminData.addUserMap[i.user_id] = !1) : o.push(i)
                    }), a.length > 0 && (e.chooseAdminData.addList = o, e.chooseAdminData.showAddNum = o.length, r.updateWholeList(e.chooseAdminData, a, "add_query_all"))
                } else a = angular.copy(e.chooseAdminData.addList), e.chooseAdminData.addList = [], e.chooseAdminData.addUserMap = {}, e.chooseAdminData.showAddNum = 0, r.updateWholeList(e.chooseAdminData, a, "add_all")
            }

            function f() {
                i.cancel(m), m = i(function () {
                    var i = e.chooseAdminData.wholeQuery, n = t("chooseAdminSearch")(i, e.chooseAdminData.wholeList);
                    e.chooseAdminData.wholeList = n.list, e.chooseAdminData.showWholeNum = n.showNum
                }, 100)
            }

            function h() {
                i.cancel(m), m = i(function () {
                    var i = e.chooseAdminData.addQuery, n = t("chooseAdminSearch")(i, e.chooseAdminData.addList);
                    e.chooseAdminData.addList = n.list, e.chooseAdminData.showAddNum = n.showNum
                }, 100)
            }

            function g() {
                var t = angular.copy(e.chooseAdminData.addList) || [];
                e.dialogStatus.gettingUserList = !0, e.ngDialogData.okCallback(t).then(function () {
                    a.closeAll()
                }).finally(function (t) {
                    e.dialogStatus.gettingUserList = !1
                })
            }

            var m = null;
            e.initDialogView = function () {
                e.dialogStatus = {gettingUserList: !1}, e.chooseAdminData = {
                    title: e.ngDialogData.title || "标题",
                    type: e.ngDialogData.type || "",
                    wait: e.ngDialogData.wait || !1,
                    originalAddList: [],
                    wholeList: [],
                    originWholeList: [],
                    addList: angular.copy(e.ngDialogData.addList) || [],
                    originAddList: [],
                    addUserMap: {},
                    showWholeNum: 0,
                    showAddNum: 0,
                    wholeQuery: "",
                    addQuery: "",
                    addUser: c,
                    addAllUser: d,
                    delUser: u,
                    delAllUser: p,
                    searchWholeUser: f,
                    searchAddUser: h,
                    modifyUser: g
                }, e.chooseAdminData.wait ? e.dialogStatus.gettingUserList = !0 : (s(), l())
            }, e.initDialogView(), e.$on("broadcastUpdateAddList", function (t, i) {
                e.chooseAdminData.wait && i && (e.dialogStatus.gettingUserList = !1, e.chooseAdminData.addList = i, s(), l())
            }), e.$on("$destroy", function () {
                i.cancel(m), m = null
            }), o(["account.hasAdded", "account.addDone"], e)
        }

        e.$inject = ["$scope", "$filter", "$timeout", "errHint", "ngDialog", "chooseAdminService", "$jsTipTranslate"], angular.module("BC.data-ownership").controller("chooseAdminCtrl", e)
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e() {
        }

        function t() {
            var e = this;
            e.loading = !0, this.editArrayService.add(this.addModel).then(function () {
                allData.push(this.addModel), this.search()
            }, function (e) {
                this.errorInfo = e
            }).finally(function () {
                e.loading = !1
            })
        }

        function i(e) {
            var t = this;
            t.loading = !0, this.editArrayService.remove(e).then(function () {
                t.allData.splice(t.allData.indexOf(e), 1), t.showData.splice(t.showData.indexOf(e), 1)
            }, function (e) {
                t.errorInfo = e
            }).finally(function () {
                t.loading = !1
            })
        }

        function n(e) {
            var t = this;
            t.loading = !0, this.editArrayService.search(t.allData, e).then(function (e) {
                t.showData = e
            }, function (e) {
                t.errorInfo = e
            }).finally(function () {
                t.loading = !1
            })
        }

        function a(e) {
            var t = this;
            t.loading = !0, this.editArrayService.modify(e).then(function () {
                this.currentEditItem = e
            }, function (e) {
                this.errorInfo = e
            }).finally(function () {
                t.loading = !1
            })
        }

        function r() {
        }

        window.EditArray = e, e.prototype.add = t, e.prototype.remove = i, e.prototype.search = n, e.prototype.modify = a, e.prototype.dismiss = r
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.data-ownership").service("checkboxService", ["$filter", function (e) {
            function t(e) {
                var t = e.data, i = e.result, n = e.dataKey, r = e.checkKey, o = e.checkVal;
                if (!t) throw"dataList param is error";
                if (r || (r = a), void 0 !== o && null !== o || (o = !0), i && 0 != i.length) {
                    if (!n) throw"dataKey param is error";
                    i.forEach(function (e) {
                        t.forEach(function (t) {
                            t[n] == e && (t[r] = o)
                        })
                    })
                } else t.forEach(function (e) {
                    e[r] = o
                })
            }

            function i(e, t) {
                var i = e, n = t || a, r = !0;
                if (!i) throw"dataList param is error";
                if ($.isArray(i)) {
                    for (var o = i.length - 1; o >= 0; o--) if (!i[o][n]) {
                        r = !1;
                        break
                    }
                } else i.forEach(function (e) {
                    e[n] || (r = !1)
                });
                return r
            }

            function n(e, t, i) {
                var n = e, i = i || a, t = t, r = [];
                if (!n) throw"dataList param is error";
                if (!t) throw"dataKey param is error";
                return n.forEach(function (e) {
                    1 == e[i] && r.push(e[t])
                }), r
            }

            var a = "checked";
            this.initCheck = t, this.getCheckAllType = i, this.getCheckArr = n
        }])
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i, n, r, o, s, l, c, d) {
            function u(e) {
                m.currentFilterIndex = e
            }

            function p() {
                "all" == m.rangeType && (l.initCheck({data: m.fieldList}), m.checkAllFields = !0, m.checkField = {})
            }

            function f() {
                l.initCheck({data: m.fieldList, checkVal: m.checkAllFields})
            }

            function h(e) {
                m.checkAllFields = l.getCheckAllType(m.fieldList)
            }

            function g() {
                function t(e) {
                    i.closeAll()
                }

                var r = angular.copy(m.filter), o = m.filterGroups, s = e.ngDialogData.tbId, l = m.fieldList;
                m.loading = !0;
                var d = angular.copy(m.editTbModel.permission_info);
                void 0 !== d && d.method && (d.method = "change", d = (0, a.default)(d)), c.checkAllInfo(r, o, l, s, m.rangeType).then(function (e) {
                    var i = {
                        editTbModel: v,
                        filterInfo: r,
                        filterGroups: o,
                        fieldList: m.fieldList,
                        tbId: s,
                        permissionType: m.permissionType,
                        rangeType: m.rangeType,
                        permission_info: d
                    }, n = c.getModifyParam(i);
                    b && $.isFunction(b) ? b(n, v).then(function () {
                        t(n)
                    }).finally(function () {
                        m.loading = !1
                    }) : t(n)
                }, function (e) {
                    m.loading = !1, n(e, {dialog: !0})
                })
            }

            var m = this, v = e.ngDialogData.editTbModel, y = e.ngDialogData.tbId, b = e.ngDialogData.okBtnPromise;
            m.editTbModel = v, m.checkField = {}, m.currentFilterIndex = 0, m.rangeType = void 0, m.permissionType = void 0, m.loading = !1, m.filterGroups = [], m.changeFilterIndex = u, m.changeRangeType = p, m.toggleCheck = f, m.refreshCheckStatus = h, m.save = g, function () {
                m.loading = !0, c.getInitModel(v, y).then(function (t) {
                    m.rangeType = t.rangeType, m.filter = t.rowFilter, m.filterGroups = t.filterGroups, m.fieldList = t.fieldList, m.checkAllFields = t.checkAllFields, m.permissionType = t.permissionType, e.tbList = [{
                        name: v.name,
                        tb_id: y,
                        fields: bdp.utils.addSpecParamsToFields(m.fieldList)
                    }], r(function () {
                        e.$broadcast("initSql", v.tb_id)
                    }, 10)
                }).finally(function () {
                    m.loading = !1
                })
            }(), o(["account.fieldsUsing", "where.filterErrorTip"], e)
        }

        angular.module("BC.data-ownership").controller("worktableAuthorityCtrl", e), e.$inject = ["$scope", "commonService", "ngDialog", "errHint", "$timeout", "$jsTipTranslate", "$translate", "checkboxService", "worktableAuthorityService", "$filter"]
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.data-ownership").service("worktableAuthorityService", ["commonService", "$q", "checkboxService", function (e, t, i) {
            function n(n, a, r, o, l) {
                var c = t.defer();
                if ("custom" == l) {
                    if (0 == i.getCheckArr(r, "fid").length) return c.reject("至少选择一个字段"), c.promise
                }
                var d = s(n, a, o);
                return d.errorstr ? (c.reject(d.errorstr), c.promise) : (e.account.tbShareFilterCheck(d.data).then(function (e) {
                    0 == e.status && c.resolve(e)
                }), c.promise)
            }

            function a(e, t) {
                return e = "sql" == e.where_type ? o(e) : r(e, t)
            }

            function r(e, t) {
                return e.condition.filters = t, delete e.sql, 0 == t.length && (e = {}), e
            }

            function o(e) {
                var t = [];
                return angular.forEach(e.sql, function (e, i) {
                    e && t.push({tb_id: i, sql: e})
                }), e.sql = t, delete e.condition, 0 == t.length && (e = {}), e
            }

            function s(e, t, i) {
                var e = angular.copy(e), n = {errorstr: "", data: {work_tables: []}};
                if ("sql" == e.where_type) {
                    var a = [];
                    angular.forEach(e.sql, function (e, t) {
                        e && a.push({tb_id: t, sql: e})
                    }), e.sql = a, delete e.condition, e = 0 == a.length ? {} : e
                } else {
                    for (var r = 0, o = t.length; r < o; r++) for (var s = 0, l = t[r].filters.length; s < l; s++) {
                        var c = t[r].filters[s];
                        if (!c.value && 8 != c.operator && 9 != c.operator && 10 != c.operator) return n.errorstr = "筛选值必须填写", n
                    }
                    e.condition.filters = t, delete e.sql, e = 0 == t.length ? {} : e
                }
                return n.data.work_tables.push({
                    tb_id: i,
                    filters: e
                }), n.data.work_tables = angular.toJson(n.data.work_tables), n
            }

            function l(e) {
                var t, n, r = angular.copy(e.filterInfo);
                2 == e.permissionType ? (t = "custom" == e.rangeType ? i.getCheckArr(e.fieldList, "fid") : [], n = a(r, e.filterGroups)) : (t = [], n = {});
                var o = {
                    tb_id: e.tbId,
                    permission_type: e.permissionType,
                    row_filter: angular.toJson(n),
                    col_filter: angular.toJson(t),
                    permission_info: e.permission_info
                };
                return "custom" == e.rangeType ? o.is_col_filter = 1 : o.is_col_filter = 0, e.editTbModel.user_id ? o.user_id = e.editTbModel.user_id : o.group_id = e.editTbModel.group_id, o
            }

            function c(n, a) {
                var r = t.defer(), n = angular.copy(n), o = {
                    where_type: "condition",
                    where_linker: "and",
                    sql: {},
                    condition_type: 0,
                    condition: {filters: []}
                }, s = {
                    rangeType: "",
                    rowFilter: {},
                    filterGroups: [],
                    checkAllFields: "",
                    fieldList: [],
                    permissionType: n.permission_type
                };
                if (s.rangeType = n.is_col_filter ? "custom" : "all", n.filter.where_type) {
                    var l = n.filter;
                    if (angular.extend(o, l), s.rowFilter = o, "condition" == l.where_type) s.filterGroups = l.condition.filters; else {
                        var c = {};
                        c[l.sql[0].tb_id] = l.sql[0].sql, s.rowFilter.sql = c
                    }
                } else s.rowFilter = o;
                return e.db.getField(a).then(function (e) {
                    e ? (angular.forEach(e.columns, function (e) {
                        e.title = e.nick_name
                    }), s.fieldList = e.columns, n.col_filter.length > 0 && 0 !== n.is_col_filter ? i.initCheck({
                        data: s.fieldList,
                        result: n.col_filter,
                        dataKey: "fid"
                    }) : i.initCheck({data: s.fieldList}), s.checkAllFields = i.getCheckAllType(s.fieldList), r.resolve(s)) : r.reject(e.status)
                }), r.promise
            }

            this.getInitModel = c, this.checkAllInfo = n, this.getModifyParam = l, this.getFilterCheckParam = s, this.handelRowFilterData = a, this.handleConditionData = r, this.handleSqlData = o
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o, s) {
            function l() {
                h.loading = !0, h.showUser = !0, h.showGroup = !1, h.showRight = !1, h.assignData.tableHead = c(angular.copy(e.previewData.field_list)), m = [], v = [], r.getModelFromApi(y).then(function (e) {
                    if (h.loading = !1, !e) return !1;
                    h.assignData.groups = e.result.user_group, g = h.assignData.users = e.result.user, h.originPermission_info = e.result.permission_info ? e.result.permission_info : {}, h.assignData.selectRight = h.originPermission_info.perm_info_type || "", h.assignData.selectHead = h.originPermission_info.fid || "", h.assignData.role_id = h.originPermission_info.role_id, h.hasRightDistribute = "" !== h.assignData.selectRight && "" !== h.assignData.selectHead, d(), r.initUserData(h.assignData.users, m), r.initGroupData(h.assignData.groups, v)
                })
            }

            function c(e) {
                return e.forEach(function (e, t) {
                    e.value = e.fid
                }), e
            }

            function d() {
                "" === h.assignData.selectRight && h.assignData.rightGroup.unshift({
                    name: "请选择",
                    value: ""
                }), "" === h.assignData.selectHead && h.assignData.tableHead.unshift({name: "请选择", value: ""})
            }

            function u(e) {
                1 == e ? (h.showUser = !0, h.showGroup = !1, h.showRight = !1) : 2 == e ? (h.showUser = !1, h.showGroup = !0, h.showRight = !1) : 3 == e && (h.showUser = !1, h.showGroup = !1, h.showRight = !0)
            }

            function p() {
                var t = {};
                if ("" !== h.assignData.selectRight && "" === h.assignData.selectHead) return void n("请选择对应字段");
                if ("" === h.assignData.selectRight && "" !== h.assignData.selectHead) return void n("请选择分配依据");
                if ("" !== h.assignData.selectRight && "" !== h.assignData.selectHead) {
                    var i = !1;
                    "add" === h.originPermission_info.method && (h.originPermission_info.method = "change"), t = {
                        fid: h.assignData.selectHead,
                        method: h.originPermission_info.method || "add",
                        perm_info_type: parseInt(h.assignData.selectRight),
                        role_id: h.assignData.role_id
                    };
                    for (var l in t) h.originPermission_info[l] !== t[l] && (i = !0);
                    !i && (t = {})
                }
                h.loading = !0;
                var c = r.getModifyParam(y, h.assignData.groups, v, g, m, t);
                s.tb.permission.modify_batch(c).then(function (t) {
                    0 == t.status && (e.$emit("updateAuthorization"), n(o.instant("wb.assign.success")), a.closeAll()), h.loading = !1
                })
            }

            function f() {
            }

            var h = this, g = [], m = [], v = [], y = $.cookie("ds_tb_id");
            h.assignData = {
                checkedUsers: [],
                checkedGroups: [],
                groupQuery: "",
                userQuery: "",
                idQuery: "",
                groups: [],
                users: [],
                nodeTooltip: o.instant("wb.assign.unableToCancelAssign"),
                rightGroup: [{name: "按所在分组", value: 1}, {name: "按用户名", value: 2}, {name: "按用户姓名", value: 3}],
                selectRight: "",
                tableHead: "",
                selectHead: "",
                role_id: ""
            }, h.loading = !1, h.showUser = !0, h.showGroup = !1, h.showRight = !1, h.init = l, h.switchRole = u, h.confirmAssignTable = p, h.changeRight = f, h.confirmDisabled = !1, h.originPermission_info = {}, h.hasRightDistribute = !1, h.init()
        }

        e.$inject = ["$scope", "$filter", "$timeout", "errHint", "ngDialog", "assignTableService", "$translate", "commonService"], angular.module("BC.data-ownership").controller("assignTableCtrl", e)
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i) {
            function n(t) {
                var i = {tb_id: t};
                return e.tb.permission.allList(i).then(function (e) {
                    if (0 == e.status) return e
                })
            }

            function r(e, t) {
                angular.forEach(e, function (e) {
                    e.can_cancel = e.can_cancel ? e.can_cancel : 1, e.checkedDisabled = !e.can_cancel, e.checked = e.shared, e.shared && t.push(e.group_id), e.group_list && e.group_list.length > 0 && r(e.group_list, t)
                })
            }

            function o(e, t) {
                e.map(function (e) {
                    e.can_cancel = e.can_cancel ? e.can_cancel : 1, e.checked = e.shared, e.shared && t.push(e.user_id)
                })
            }

            function s(e, t, i, n, r, o) {
                for (var s = [], c = [], d = 0, u = n.length; d < u; d++) 1 == n[d].shared && s.push(n[d].user_id);
                l(t, c);
                var p = window.getDiffItemsInTwoArray(r, s).del, f = window.getDiffItemsInTwoArray(i, c).del,
                    h = {tb_id: e, user_list: {all: s, del: p}, group_list: {all: c, del: f}};
                return h.user_list = (0, a.default)(h.user_list), h.group_list = (0, a.default)(h.group_list), h.permission_info = (0, a.default)(o), h
            }

            function l(e, t) {
                angular.forEach(e, function (e) {
                    1 == e.checked && t.push(e.group_id), e.group_list && e.group_list.length > 0 && l(e.group_list, t)
                })
            }

            this.getModelFromApi = n, this.initGroupData = r, this.initUserData = o, this.getModifyParam = s
        }

        angular.module("BC.data-ownership").service("assignTableService", ["commonService", "$q", "$filter", e])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o, s, l, c) {
            function d() {
                g.loading = !0, r.getData($.cookie("ds_tb_id")).then(function (e) {
                    g.allData = e, g.search(g.searchKey)
                }).finally(function () {
                    g.loading = !1, h()
                })
            }

            function u() {
                "zh" === m ? a.open({
                    template: "/static/partials/dialogTemplates/assign_table.html",
                    scope: e,
                    disableAnimation: !0,
                    className: "ngdialog-theme-default ngDialog-width-360 ngDialog-assign-table"
                }) : a.open({
                    template: "/static/partials/dialogTemplates/assign_table.html",
                    scope: e,
                    disableAnimation: !0,
                    className: "ngdialog-theme-default ngDialog-width-460 ngDialog-assign-table"
                })
            }

            function p(i) {
                function n(e, i) {
                    var n = l.defer();
                    return s.tb.permission.modify(e).then(function (a) {
                        0 == a.status ? (i.permissionType = t("permissionTypeMap")(e.permission_type), i.is_col_filter = e.is_col_filter, i.col_filter = e.col_filter, i.row_filter = e.row_filter, i.permission_type = e.permission_type, 2 == e.permission_type && (e.is_col_filter || e.row_filter.length > 2) ? i.rangeTip = c.instant("custom") : i.rangeTip = c.instant("all"), n.resolve(!0)) : n.reject(a.errstr)
                    }), n.promise
                }

                i.filter = angular.fromJson(i.row_filter), i.col_filter = angular.fromJson(i.col_filter), a.open({
                    template: "/static/data-ownership/view/worktable-authority.html",
                    scope: e,
                    data: {editTbModel: i, tbId: $.cookie("ds_tb_id"), okBtnPromise: n},
                    className: "ngdialog-theme-default ngdialog-worktable-filter J-worktable-filter"
                })
            }

            function f(t) {
                a.openConfirm({
                    template: "/static/partials/dialogTemplates/confirm-dialog.html",
                    className: "ngdialog-theme-default ngDialog-width-300",
                    data: {title: c.instant("tips"), message: c.instant("ownership.Authoriza.confirmRemove")}
                }).then(function () {
                    e.previewData.table_preview_loading = !0, r.removeConfirm(t).then(function () {
                        e.previewData.table_preview_loading = !1, g.remove(t)
                    })
                })
            }

            function h() {
                localStorage.setItem("jumpToAuthorizationView", ""), o.global.jumpToAuthorizationView = ""
            }

            var g = this;
            g.allData = [], g.showData = void 0, g.addModel = {}, g.currentEditItem = {}, g.errorInfo = "", g.searchKey = "", g.loading = !1, g.editArrayService = r, g.init = d, g.addConfig = u, g.editConfig = p, g.confirmDel = f, g.init(), e.$on("updateAuthorization", function () {
                g.init()
            });
            var m = $.cookie("locale") || "zh"
        }

        e.$inject = ["$scope", "$filter", "$timeout", "errHint", "ngDialog", "authorizationOverviewService", "$rootScope", "commonService", "$q", "$translate"], angular.module("BC.data-ownership").controller("authorizationOverviewCtrl", e).directive("authorizationOverview", ["$filter", function (e) {
            return {
                controller: "authorizationOverviewCtrl",
                controllerAs: "vm",
                restrict: "EA",
                templateUrl: "/static/data-ownership/view/authorization-overview.html",
                replace: !0,
                link: function (e, t, i, n) {
                }
            }
        }]), function (e, t) {
            var i = function () {
            };
            i.prototype = t.prototype, e.prototype = new i, e.prototype.constructor = e, e.uber = t.prototype
        }(e, window.EditArray)
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a) {
            function r(t) {
                var i = {tb_id: t};
                return e.tb.permission.list(i).then(function (e) {
                    if (0 == e.status) {
                        return c(e.result.user, e.result.user_group, e.result.permission_info)
                    }
                })
            }

            function o(i) {
                var n = t.defer(), a = {tb_id: $.cookie("ds_tb_id")};
                return i.user_id ? a.user_list = angular.toJson([i.user_id]) : i.group_id ? a.group_list = angular.toJson([i.group_id]) : i.role_id && (a.permission_info = angular.toJson(i)), e.tb.permission.delete(a).then(function (e) {
                    0 == e.status ? n.resolve(e) : n.reject(e.status)
                }), n.promise
            }

            function s() {
                var e = t.defer();
                return e.resolve(), e.promise
            }

            function l(e, n) {
                var a = t.defer(), r = i("filter")(e, {vmName: n});
                return a.resolve(r), a.promise
            }

            function c(e, t, a) {
                if (!$.isArray(e) || !$.isArray(t)) throw"initDataToModel param must be array.";
                t.map(function (e, t) {
                    return $.extend(!0, e, {
                        vmName: e.group_name,
                        vmId: e.group_id,
                        permissionType: i("permissionTypeMap")(e.permission_type),
                        photo: void 0,
                        rangeTip: e.has_range ? n.instant("custom") : n.instant("all")
                    })
                }), e.map(function (e, t) {
                    return $.extend(!0, e, {
                        vmName: e.name,
                        vmId: e.user_id,
                        permissionType: i("permissionTypeMap")(e.permission_type),
                        photo: e.image_name ? d(e.image_name) : void 0,
                        rangeTip: e.has_range ? n.instant("custom") : n.instant("all")
                    })
                });
                var r = [];
                if (r = e.concat(t), a && a.info) {
                    var o = $.extend(!0, a, {
                        vmName: "按权限分配",
                        vmId: a.info.role_id,
                        permissionType: i("permissionTypeMap")(a.permission_type),
                        photo: a.image_name ? d(a.image_name) : void 0,
                        rangeTip: a.has_range ? n.instant("custom") : n.instant("all"),
                        permission_info: a.info
                    });
                    r.push(o)
                }
                return r
            }

            function d(e) {
                return "/api/user_image/download?sub_id=" + e + "&hash=" + e
            }

            this.getData = r, this.removeConfirm = o, this.search = l, this.remove = s
        }

        angular.module("BC.data-ownership").service("authorizationOverviewService", ["commonService", "$q", "$filter", "$translate", "ngDialog", e]).filter("permissionTypeMap", function () {
            return function (e) {
                return {0: "完全", 1: "编辑", 2: "只读"}[e]
            }
        })
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r, o, s) {
            function l() {
            }

            function c(t) {
                if (!a.checkFilterData(f.newFilter)) return !1;
                a.addFilterToGroup(t, e.filterGroups), f.newFilter = a.getNewFilterData()
            }

            function d(e) {
                8 != e.operator && 9 != e.operator && 10 != e.operator || (e.value = ""), 10 != e.operator && (e.start_date = null, e.end_date = null)
            }

            function u(e) {
                e.field && "date" == e.field.data_type ? (e.operator = 10, e.value = "", e.start_date = null, e.end_date = null) : (e.operator = 0, e.value = "")
            }

            function p(t, i) {
                if (t.filters.splice(i, 1), 0 == t.filters.length) {
                    var n = e.filterGroups.indexOf(t);
                    n > -1 && e.filterGroups.splice(n, 1)
                }
            }

            var f = this;
            f.operatorList = r, f.conditionType = o, f.init = l, f.addFilter = c, f.filterchange = d, f.fieldChange = u, f.delFilter = p, f.newFilter = a.getNewFilterData(), f.pageTips = {addCondition: s.instant("where.addConditionTip")}, this.init()
        }

        e.$inject = ["$scope", "$filter", "$timeout", "errHint", "worktableRowFilterService", "filterOperatorMapWithTypeSpecial", "conditionType", "$translate"], angular.module("BC.data-ownership").controller("worktableRowFilterCtrl", e).directive("worktableRowFilter", ["$filter", function (e) {
            return {
                scope: {filterGroups: "=", fieldList: "="},
                controller: "worktableRowFilterCtrl",
                controllerAs: "vm",
                restrict: "E",
                templateUrl: "/static/data-ownership/view/worktable-row-filter.html",
                replace: !0,
                link: function (e, t, i, n) {
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n) {
            function a(e) {
                var t = e;
                return t.field ? t.value || 8 == t.operator || 9 == t.operator || 10 == t.operator ? !(10 == t.operator && !t.start_date && !t.end_date) || (n("请填写值", {dialog: !0}), !1) : (n("请填写值", {dialog: !0}), !1) : (n("请选择字段", {dialog: !0}), !1)
            }

            function r() {
                return {operator: 0, value: "", start_date: null, end_date: null}
            }

            function o(e, t) {
                for (var i = e, n = t, a = {
                    fid: i.field.fid,
                    field_name: i.field.nick_name,
                    operator: i.operator,
                    value: i.value,
                    data_type: i.field.data_type,
                    start_date: i.start_date,
                    end_date: i.end_date
                }, r = !1, o = 0, s = n.length; o < s; o++) {
                    var l = n[o];
                    a.fid == function (e) {
                        return e.filters[0] ? e.filters[0].fid : ""
                    }(l) && (l.filters.push(a), r = !0)
                }
                r || n.push({condition_type: 0, filters: [a]})
            }

            this.checkFilterData = a, this.getNewFilterData = r, this.addFilterToGroup = o
        }

        angular.module("BC.data-ownership").service("worktableRowFilterService", ["commonService", "$q", "$filter", "errHint", e])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a, r) {
            var o = a.params.ml_id, s = this, l = {
                _list: [], searchKey: "", loading: !1, list: [], getList: function () {
                    s.loading = !0, n.getAssignList(o).then(function (e) {
                        0 == e.status && (s._list = e.result.assign_list, angular.forEach(s._list, function (e) {
                            e.vmAssign = e.operator
                        }), s.searchList())
                    }).finally(function () {
                        s.loading = !1
                    })
                }, addItemConfig: function () {
                    i.open({
                        template: "/static/data-ownership/view/choose-admin-dialog.html",
                        className: "ngdialog-theme-default ngdialog-width-460 ngDialog-choose-admin",
                        scope: e,
                        data: {title: "选择可以管理当前模型的用户", type: "mlAssign", addList: s.list, okCallback: s.addItem},
                        controller: "chooseAdminCtrl"
                    })
                }, addItem: function (e) {
                    var t = [];
                    angular.forEach(e, function (e) {
                        t.push(e.user_id)
                    });
                    var a = {user_list: angular.toJson(t), assign: 3, ml_id: o};
                    return n.mlAssign(a).then(function (e) {
                        0 == e.status && (s.getList(), i.closeAll())
                    })
                }, updateAssign: function (e) {
                    var t = {ml_id: o, user_list: angular.toJson([e.user_id]), assign: e.vmAssign};
                    n.mlAssign(t).then(function (t) {
                        0 == t.status && (e.operator = e.vmAssign)
                    })
                }, deleteAssign: function (e) {
                    i.openConfirm({
                        template: "/static/partials/dialogTemplates/confirm-dialog.html",
                        className: "ngdialog-theme-default ngDialog-width-300",
                        data: {title: r.instant("tips"), message: r.instant("ownership.Authoriza.confirmRemove")}
                    }).then(function () {
                        var t = {ml_id: o, user_list: angular.toJson([e.user_id]), assign: 0};
                        n.mlAssign(t).then(function (t) {
                            0 == t.status && s.list.splice(s.list.indexOf(e), 1)
                        })
                    })
                }, searchList: function () {
                    s.list = t("filter")(s._list, {name: s.searchKey})
                }
            };
            angular.extend(this, l), this.getList()
        }

        e.$inject = ["$scope", "$filter", "ngDialog", "mlearningService", "$state", "$translate"], angular.module("BC.data-ownership").controller("mlAssignCtrl", e)
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a) {
            var r = a.params.ml_id;
            this.logParam = {
                mode: "ml_log",
                url: "/api/ml/oplog",
                requestParam: {ml_id: r, start_date: "", end_date: "", page: 1},
                search: []
            }
        }

        e.$inject = ["$scope", "$filter", "ngDialog", "mlearningService", "$state"], angular.module("BC.data-ownership").controller("mlLognCtrl", e)
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a) {
            var r = $.cookie("ds_tb_id");
            this.logParam = {
                mode: "tb_detail_log",
                url: "/api/tb/permission/get_log",
                requestParam: {tb_id: r, start_date: "", end_date: "", page: 1},
                search: []
            }
        }

        e.$inject = ["$scope", "$filter", "ngDialog", "mlearningService", "$state"], angular.module("BC.data-ownership").controller("worktbaleDetailLog", e)
    }()
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.data-process", []), a = function (e) {
        var t = i(85)(i.p + "782949bf342c.css");
        i.e(4).then(function (n) {
            var a = [];
            return a.push(i(836)), a.push(i(837)), a.push(i(838)), a.push(i(839)), a.push(i(840)), a.push(i(841)), a.push(i(842)), a.push(i(843)), a.push(i(844)), a.push(i(845)), a.push(i(846)), a.push(i(847)), a.push(i(848)), a.push(i(849)), a.push(i(850)), a.push(i(851)), a.push(i(852)), a.push(i(853)), a.push(i(854)), a.push(i(855)), a.push(i(856)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    };
    i(487), i(489), i(491), i(493), i(495), i(497), i(499), i(500), i(501), i(502), i(504), i(505), i(506), i(507);
    var r = {
        transpose_table: {
            url: "/transpose_table",
            templateUrl: "/static/data-process/transpose/view/transpose-table.html",
            controller: "transposeTableCtrl"
        },
        transpose_table_edit: {
            url: "/transpose_table/:tbId",
            templateUrl: "/static/data-process/transpose/view/transpose-table.html",
            controller: "transposeTableCtrl"
        },
        parse_url: {
            url: "/parse_url/:tbId",
            templateUrl: "/static/data-process/parse-merge/view/parse-url.html",
            controller: "parseUrlCtrl"
        },
        merge_field: {
            url: "/merge_field/:tbId",
            templateUrl: "/static/data-process/parse-merge/view/merge-field.html",
            controller: "mergeFieldCtrl"
        },
        sql_table: {
            url: "/sql_table",
            templateUrl: "/static/data-process/sql/view/sql-table.html",
            controller: "sqlTableCtrl"
        },
        sql_table_edit: {
            url: "/sql_table/:tbId",
            templateUrl: "/static/data-process/sql/view/sql-table.html",
            controller: "sqlTableCtrl"
        },
        polymer_table: {
            url: "/polymer_table",
            templateUrl: "/static/data-process/polymer/view/polymer-table.html",
            controller: "polymerTableCtrl"
        },
        polymer_table_edit: {
            url: "/polymer_table/:tbId",
            templateUrl: "/static/data-process/polymer/view/polymer-table.html",
            controller: "polymerTableCtrl"
        },
        union_table: {
            url: "/union_table",
            templateUrl: "/static/data-process/union/view/union-table.html",
            controller: "UnionTableCtrl"
        },
        union_table_edit: {
            url: "/union_table/:tbId",
            templateUrl: "/static/data-process/union/view/union-table.html",
            controller: "UnionTableCtrl"
        },
        join_table: {
            url: "/join_table",
            templateUrl: "/static/data-process/join/view/join-table.html",
            controller: "joinTableController"
        },
        join_table_edit: {
            url: "/join_table/:tbId",
            templateUrl: "/static/data-process/join/view/join-table.html",
            controller: "joinTableController"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    i(488).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "load-on-boot-data_ae1c1a7f.css"
}, function (e, t, i) {
    i(490).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "data-process_2f5f3d07.css"
}, function (e, t, i) {
    i(492).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "load-on-boot-transpose_f2fcb01f.css"
}, function (e, t, i) {
    i(494).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "load-on-boot-sql_77a4779d.css"
}, function (e, t, i) {
    i(496).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "load-on-boot-union_1155b41c.css"
}, function (e, t, i) {
    i(498).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "load-on-boot-join_28c4c539.css"
}, function (e, t, i) {
    "use strict";
    angular.module("BC.data-process").directive("transposeModelView", ["ngDialog", "$timeout", "filterOperatorMapWithType", "errHint", "commonService", "$jsTipTranslate", function (e, t, i, n, a, r) {
        return {
            restrict: "EA",
            scope: !0,
            templateUrl: "/static/data-process/transpose/view/transpose-model-view.html",
            replace: !0,
            link: function (e, t, i) {
                e.initModelViewData = function () {
                    var t = e.tableViewInfo.modelInfo;
                    e.modelPageStatus = {displayFilter: !1}, e.modelInfoData = {
                        originTbId: t.info.tb_id,
                        originTbName: t.info.title,
                        linkable: t.info.linkable,
                        transFields: t.info.trans_fids || [],
                        transVal: t.info.trans_value || [],
                        checkedOriginField: [],
                        whereInfo: {}
                    };
                    var i = t.info.where;
                    e.modelInfoData.whereInfo.where_type = i.where_type, "sql" == i.where_type ? i.sql && i.sql.length > 0 ? e.modelInfoData.whereInfo.sql = i.sql[0].sql : e.modelInfoData.whereInfo = null : (e.modelInfoData.whereInfo.condition = {filters: i.condition.filters}, e.modelInfoData.whereInfo.where_linker = i.where_linker, i.condition.filters && 0 != i.condition.filters.length || (e.modelInfoData.whereInfo = null)), e.modelPageStatus.displayFilter = !!e.modelInfoData.whereInfo
                }, e.initModelViewData(), r([], e)
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.data-process").directive("bdpSqlEditor", function () {
            return {
                link: function (e, t, i) {
                    function n() {
                        a = CodeMirror.fromTextArea(t[0], {
                            mode: "text/x-bdp-sql",
                            indentWithTabs: !0,
                            smartIndent: !0,
                            lineWrapping: !0,
                            matchBrackets: !0,
                            readOnly: !!o && "nocursor",
                            theme: "paraiso-light",
                            autofocus: !o,
                            fields: e.table_name_array,
                            extraKeys: {"Ctrl-Space": "autocomplete"}
                        }), o || (e.$on("insert", function (e, t) {
                            a.replaceSelection(t), a.focus()
                        }), e.$on("setCursor", function (e, t) {
                            var i = a.getCursor(), n = i.ch - t;
                            a.setCursor(i.line, n)
                        }), a.on("blur", function () {
                            e.viewData.sql = a.getValue().replace(/0xa0/, "")
                        }), e.$on("undo", function () {
                            a.undo(), e.viewData.sql = e.viewData.originSql = a.getValue()
                        }), e.$on("redo", function () {
                            a.redo(), e.viewData.sql = e.viewData.originSql = a.getValue()
                        }), e.$on("updateSQL", function (e, t) {
                            a.setValue(t)
                        })), r = e.$watch(i.sqlContent, function (e) {
                            e && (a.setValue(e), r())
                        }), e.$watch("table_name_array", function (e) {
                            e && e.length && a.setOption("fields", e)
                        })
                    }

                    var a, r, o = !!i.readonly;
                    bdp.loadbdpFormula(n)
                }
            }
        })
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t) {
            return {
                status: function (e) {
                    return t.get("/api/wb/status", {task_id: e}).then(function (e) {
                        return e
                    })
                }, valid: function (e, i) {
                    return t.get("/api/data_union/valid", {base_tb_id: e, union_tb_id: i}).then(function (e) {
                        return e
                    })
                }, tableUnionPreview: function (e, i, n, a, r) {
                    return t.post("/api/chart/table_union_preview", {
                        info: angular.toJson(e),
                        table_name: i,
                        tb_id: n,
                        folder_id: a,
                        check_dimension: r
                    }).then(function (e) {
                        return e
                    })
                }
            }
        }

        angular.module("BC.data-process").factory("unionService", e), e.$inject = ["$http", "commonHttp"]
    }()
}, function (e, t, i) {
    "use strict";
    angular.module("BC.data-process").directive("searchTb", ["$filter", "$rootScope", function (e, t) {
        return {
            templateUrl: i(503),
            scope: {list: "=", mode: "=", searchModeShow: "=", originList: "="},
            link: function (i, n, a) {
                function r(e) {
                    clearTimeout(s), s = setTimeout(o, e)
                }

                function o() {
                    function n(e) {
                        e.map(function (e) {
                            e.tag && $.inArray(e.tag, a) == -1 && a.push(e.tag);
                            var i = e.ds_type_name[t.language];
                            i && $.inArray(i, a) == -1 && a.push(i)
                        })
                    }

                    i.searchList = [];
                    var a = [], r = i.keyword, o = [];
                    if (r) o = "nomal" == i.mode ? [r] : r.split(" "), i.list = function () {
                        function t(r, s, l) {
                            r.sub_folders && r.sub_folders.length > 0 && a(r.sub_folders, t);
                            var c = null;
                            c = o[0] ? e("query_fields")(r.tb_list, o[0], i.viewSearch.searchMode) : r.tb_list, c.length > 0 && o.length > 1 && (c = e("queryByTagorDstype")(c, o[1])), n(c), r.tb_list = c, 0 != r.tb_list.length || r.sub_folders && 0 != r.sub_folders.length ? r.open = !0 : l.splice(s, 1)
                        }

                        var a = bdp.utils.descMap, r = angular.copy(i.originList);
                        return a([r], t), r
                    }(); else if (i.list = i.originList, 0 == i.list.length) return;
                    !function (e) {
                        a.length ? (1 == e.length && i.searchList.push({name: e[0], tag: ""}), a.map(function (t) {
                            e.length > 1 ? t.toLowerCase().indexOf(e[1].toLowerCase()) > -1 && i.searchList.push({
                                name: e[0],
                                tag: t
                            }) : i.searchList.push({name: e[0], tag: t})
                        })) : i.searchList = []
                    }(o), i.$apply()
                }

                var s;
                i.viewSearch = {showlist: !1, searchMode: "fuzzy"}, i.searchList = [], i.keywordChange = function () {
                    i.viewSearch.showlist = !0, r(300)
                }, i.keyDownFun = function (e) {
                    13 == e.keyCode && (i.viewSearch.showlist = !1, r(0))
                }, i.chooseSearchType = function (e) {
                    i.keyword = e.name + " " + e.tag, i.viewSearch.showlist = !1, r(0)
                }, i.changeSearchMode = function () {
                    i.keyword && r(0)
                }
            }
        }
    }])
}, function (e, t) {
    e.exports = "/dist/static/data-process/union/search-tb/searchTb.html"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.data-process").service("joinTableService", ["commonService", function (e) {
            function t() {
                for (var e = "", t = !1; !t;) e = bdp.utils.guid(), m.exist() || (t = !0);
                return t && m.set(e), e
            }

            function i(e) {
                var i = e.nodeDataArray, n = e.linkDataArray, a = e.where, r = {}, o = "";
                i.forEach(function (e) {
                    (!e.key || e.key.indexOf("tb_") >= 0 || e.key == e.tb_id) && (o = t(), e.key = o), r[e.tb_id] = e.key
                }), n.forEach(function (e) {
                    (!e.from_tb || e.from.indexOf("tb_") >= 0 || e.from_tb == e.from) && (e.from_tb = e.from, e.from = r[e.from]), (!e.to_tb || e.to.indexOf("tb_") >= 0 || e.to_tb == e.to) && (e.to_tb = e.to, e.to = r[e.to])
                }), "sql" == a.where_type && a.sql.forEach(function (e) {
                    e.tb_id ? e.tb_id = r[e.tb_id] : e.key && (e.tb_id = e.key)
                })
            }

            function n(e, t) {
                function i(e, t) {
                    var i = "";
                    for (var n in t) t[n].tbId == e && (i = n);
                    return i
                }

                if (e.where && e.where.condition && e.where.condition.filters) {
                    e.where.condition.filters.forEach(function (e) {
                        e.hasOwnProperty("key") || (e.tb_showName = e.tb_name, e.key = i(e.tb_id, t))
                    })
                }
            }

            function a(e, t) {
                return t[e].tbId
            }

            function r(e, t, i) {
                return t = t || {}, i = {}, e.nodeDataArray.forEach(function (e) {
                    i[e.tb_id] ? i[e.tb_id]++ : i[e.tb_id] = 1, t[e.key] = {tbId: e.tb_id, tbSameIndex: i[e.tb_id]}
                }), o(e, t, i), {tbKeyInfoMap: t, tbSameAmountMap: i}
            }

            function o(e, t, i) {
                e.nodeDataArray.forEach(function (e) {
                    i[e.tb_id] && 1 != i[e.tb_id] ? (e.showIndex = t[e.key].tbSameIndex, e.showName = "(" + e.showIndex + ")" + e.name) : (e.showIndex = 1, e.showName = e.name)
                })
            }

            function s(e, t) {
                var i = !1;
                return t.nodeDataArray.forEach(function (t) {
                    t.tb_id == e && (i = !0)
                }), i
            }

            function l(e) {
                var t = [];
                return e.nodeDataArray.forEach(function (e) {
                    t.push(e.key)
                }), t
            }

            function c(e, t, i) {
                var n = t[e.key].tbSameIndex;
                return i[e.tb_id] && 1 != i[e.tb_id] ? "(" + n + ")" + e.name : e.name
            }

            function d(e, t, i) {
                var n = e.condition.filters, a = t.nodeDataArray;
                if (a && 0 != a.length) for (var r = n.length; r--;) {
                    var o = n[r].tb_id, l = n[r].key;
                    l in i && s(o, {nodeDataArray: a}) || n.splice(r, 1)
                } else n.length = 0
            }

            function u(e, t) {
                var i = "";
                return t && t.info && t.info.nodeDataArray && t.info.nodeDataArray.map(function (t) {
                    t.tb_id == e && (i = t.name)
                }), i
            }

            function p(e, t, i) {
                var n = "", a = 0;
                return i[e.tb_id] && 1 != i[e.tb_id] ? (a = t[e.key].tbSameIndex, n = "(" + a + ")" + e.tb_name) : n = e.tb_name, n
            }

            function f(e, t, i) {
                var n = angular.copy(t);
                return n.tb_id_origin = n.tb_id, n.tb_id = i, e = e.filter(function (e) {
                    return e.tb_id != i
                }), e.push(n), e
            }

            function h(e, t) {
                var i = [];
                return angular.forEach(e, function (e) {
                    e.tb_id.indexOf(t) >= 0 && i.push(e)
                }), i
            }

            function g(e, t) {
                e.nodeDataArray.forEach(function (e) {
                    t[e.key] = angular.copy(e.fields)
                })
            }

            var m = {
                cache: null, get: function () {
                    return this.cache
                }, exist: function (e) {
                    return !!this.cache && !!this.cache[e]
                }, set: function (e) {
                    this.cache || (this.cache = {}), this.cache[e] = !0
                }, clear: function () {
                    this.cache = null
                }
            };
            this.addUniqNodeId = i, this.getUniqNodeId = t, this.formatWhereFilterWithKey = n, this.tbExistInModel = s, this.getExistKeyInModel = l, this.setTbKeyInfoMap = r, this.resetNodeShowName = o, this.formatTableNodeShowName = c, this.checkConditionFilters = d, this.getTbIdByTbKey = a, this.getTbName = u, this.getTbShowName = p, this.formatTbListForSql = f, this.updateTbListForSql = h, this.setOriginFieldConfig = g
        }])
    }()
}, function (e, t, i) {
    "use strict";
    angular.module("BC.data-process").directive("showRelationProduce", ["$rootScope", "commonService", "$timeout", "$jsTipTranslate", "errHint", "$translate", function (e, t, i, n, a, r) {
        return {
            restrict: "A", link: function (t, a, o) {
                function s() {
                    t.relationColors = {
                        bgLinkPanel: 1 == e.usedThemeId ? "#24273E" : "#fff",
                        fontTextBlock: 1 == e.usedThemeId ? "#9D9EA8" : "#11121B"
                    }
                }

                function l(e) {
                    var t = angular.element(".relation-produce").scrollTop();
                    angular.element("#show_relation_produce").children("div:eq(0)").scrollLeft();
                    if ("hide" == e) a.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"}); else {
                        var i = m.transformDocToView(new go.Point(e.x, e.y)), n = 0;
                        n = parseInt(a.parent().width()) < i.x + 350 ? -320 : 90, a.parent().parent().parent().parent().find(".relation-node-message.rela-table").css({
                            left: i.x + n + 24,
                            top: i.y + 132 - t,
                            display: "block"
                        })
                    }
                }

                function c(e) {
                    var i = "";
                    switch (e.update_status) {
                        case 1:
                            i = r.instant("wb.relation.updateSuccess");
                            break;
                        case 0:
                        case 3:
                        case 6:
                            i = r.instant("wb.relation.updating");
                            break;
                        case 2:
                            i = r.instant("wb.relation.updateFail")
                    }
                    var n = "tbType." + bdp.bdpTables.getTableTypeForShow(e);
                    t.relationNodeData = {
                        tb_id: e.tb_id,
                        tb_name: e.tb_name,
                        tb_type: t.tips[n],
                        schema_total: e.schema_total,
                        update_status: e.update_status,
                        update_status_str: i,
                        update_time: e.update_time
                    }, t.$$phase || t.$digest()
                }

                function d(e) {
                    var t = "#40A276";
                    switch (e) {
                        case 1:
                            t = "#40A276";
                            break;
                        case 3:
                            t = "#FFC063";
                            break;
                        case 2:
                            t = "#EE4B4B"
                    }
                    return t
                }

                function u() {
                    m.nodeTemplate = g(go.Node, "Horizontal", {selectionAdorned: !1}, g(go.Panel, "Auto", {cursor: "pointer"}, g(go.Shape, "File", {stroke: null}, new go.Binding("figure", "figure"), new go.Binding("fill", "update_status", d)), g(go.TextBlock, "Default Text", {
                        margin: new go.Margin(2, 0, 8, 0),
                        stroke: "white",
                        font: "12px sans-serif bold",
                        overflow: go.TextBlock.OverflowEllipsis,
                        wrap: go.TextBlock.None,
                        maxSize: new go.Size(100, NaN),
                        minSize: new go.Size(100, NaN),
                        textAlign: "center"
                    }, new go.Binding("text", "tb_name"))), {
                        click: function (t, i) {
                            "1" != i.data.key && (e.$broadcast("skipTargetTable", i.data.tb_id, i.data.linkable), a.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"}))
                        }, mouseEnter: function (e, i) {
                            t.showRelationProduceLoading || (c(i.data), l(i.position))
                        }, mouseLeave: function (e, t) {
                            l("hide")
                        }
                    })
                }

                function p(e) {
                    var t = "";
                    switch (e) {
                        case 0:
                            t = "go.join";
                            break;
                        case 1:
                            t = "go.aggr";
                            break;
                        case 2:
                            t = "go.union";
                            break;
                        case 3:
                            t = "go.sql";
                            break;
                        case 7:
                            t = "go.transpose";
                            break;
                        default:
                            ""
                    }
                    return r.instant(t)
                }

                function f() {
                    m.linkTemplate = g(go.Link, {routing: go.Link.Orthogonal, corner: 0}, g(go.Shape, {
                        strokeWidth: 2,
                        stroke: "#5182E4",
                        isPanelMain: !0
                    }), g(go.Panel, "Auto", {
                        segmentIndex: 0,
                        segmentOffset: new go.Point(40, 12),
                        segmentOrientation: go.Link.OrientUpright
                    }, g(go.Shape, "Rectangle", {
                        fill: t.relationColors.bgLinkPanel,
                        stroke: null,
                        strokeWidth: 1,
                        width: 60,
                        height: 20
                    }), g(go.TextBlock, "join", {
                        margin: 0,
                        stroke: t.relationColors.fontTextBlock,
                        font: "10px sans-serif bold"
                    }, new go.Binding("text", "produce_type", p))))
                }

                function h() {
                    "path" == t.relationView.view && (s(), i(function () {
                        u(), f(), a.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"}), t.$$phase || t.$digest(), m.model = v
                    }, 10))
                }

                t.relationNodeData = {
                    tb_id: "",
                    tb_name: "",
                    tb_type: "",
                    schema_total: "",
                    update_status: "",
                    update_status_str: "",
                    update_time: ""
                }, t.$on("showRelationMapData", function (e, i) {
                    i && i.length > 0 && (t.exportTableName = i[0] && i[0].tb_name || "过程视图", a.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"}), s(), u(), f(), v.nodeDataArray = i, m.model = v, t.showRelationProduceLoading = !1)
                }), s();
                var g, m, v;
                !function () {
                    g = go.GraphObject.make, m = g(go.Diagram, "show_relation_produce", {
                        contentAlignment: new go.Spot(0, 0, 0, 0),
                        allowMove: !1,
                        allowZoom: !1,
                        layout: g(go.TreeLayout, {angle: 180, layerSpacing: 150}),
                        AnimationFinished: function () {
                            t.showRelationProduceLoading = !1, t.$$phase || t.$digest()
                        }
                    }), v = g(go.TreeModel)
                }(), angular.element(".relation-produce").scroll(function () {
                    a.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"})
                }), u(), f(), t.$on("themeChangeFlag", h), t.$on("refresh-relation-path", h), h(), t.exportProcedureJpg = function () {
                    var e, i, n = $("#show_relation_produce");
                    e = n.find("canvas").next("div").children("div").width(), e = e <= 1 ? n.find("canvas").width() : e, i = n.find("canvas").next("div").next("div").children("div").height(), i = i <= 1 ? n.find("canvas").height() : i;
                    var a = m.makeImage({
                        scale: 1,
                        type: "image/png",
                        background: t.relationColors.bgLinkPanel,
                        maxSize: new go.Size(e + 100, i + 100)
                    }), r = "<img src='" + a.src + "' style='margin:10px'>";
                    Highcharts.post("/api/chart/export_png", {
                        filename: t.exportTableName,
                        type: "image/png",
                        background: t.relationColors.bgLinkPanel,
                        width: e + 20,
                        height: i + 20,
                        svg: r
                    })
                }, n(["wb.joinTable", "wb.polymerTable", "wb.unionTable", "wb.scriptTable", "tbType.excel", "tbType.share", "tbType.allot", "tbType.public", "tbType.join", "tbType.union", "tbType.transpose", "tbType.aggr", "tbType.sql", "tbType.db", "tbType.opends"], t)
            }
        }
    }]).directive("showCurrentRelation", ["$rootScope", "$timeout", "$jsTipTranslate", "errHint", "$translate", function (e, t, i, n, a) {
        return {
            restrict: "A", link: function (n, r, o) {
                function s() {
                    n.relationColors = {
                        bgLinkPanel: 1 == e.usedThemeId ? "#24273E" : "#fff",
                        fontTextBlock: 1 == e.usedThemeId ? "#9D9EA8" : "#11121B"
                    }
                }

                function l(e, t) {
                    var i = angular.element("#show_current_relation").children("div:eq(0)").scrollLeft();
                    if (i = 0, "hide" == e) r.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"}); else {
                        r.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"});
                        var a = S.transformDocToView(new go.Point(e.x, e.y)), o = 0;
                        "table" == t || "chart" == t ? o = parseInt(r.parent().width()) < a.x + parseInt(angular.element(".relation-node-message").width()) + 10 ? -320 : 90 : "user" == t ? o = parseInt(r.parent().width()) < a.x + parseInt(angular.element(".relation-node-message.rela-user").width()) + 50 ? 10 - parseInt(angular.element(".relation-node-message.rela-user").width()) : 90 : "group" == t && (o = parseInt(r.parent().width()) < a.x + parseInt(angular.element(".relation-node-message.rela-group").width()) + 60 ? 10 - parseInt(angular.element(".relation-node-message.rela-group").width()) : 90);
                        var s = 0, l = parseInt(angular.element("#show_relation_produce").height());
                        s = n.hasRelationMap ? l + 56 > 200 ? l : 140 : -25, "table" == t && r.parent().parent().parent().parent().find(".relation-node-message.rela-table").css({
                            left: a.x + o - i,
                            top: a.y + s - 0,
                            display: "block"
                        }), "chart" == t && r.parent().parent().parent().parent().find(".relation-node-message.rela-chart").css({
                            left: a.x + o - i,
                            top: a.y + s + 100,
                            display: "block"
                        }), "user" == t && r.parent().parent().parent().parent().find(".relation-node-message.rela-user").css({
                            left: a.x + o - i,
                            top: a.y + s + 160,
                            display: "block"
                        }), "group" == t && r.parent().parent().parent().parent().find(".relation-node-message.rela-group").css({
                            left: a.x + o - i,
                            top: a.y + s + 160,
                            display: "block"
                        })
                    }
                }

                function c(e) {
                    if ("table" == e.node_type) {
                        var t = "";
                        switch (e.update_status) {
                            case 1:
                                t = a.instant("wb.relation.updateSuccess");
                                break;
                            case 0:
                            case 3:
                            case 6:
                                t = a.instant("wb.relation.updating");
                                break;
                            case 2:
                                t = a.instant("wb.relation.updateFail")
                        }
                        var i = "tbType." + bdp.bdpTables.getTableTypeForShow(e);
                        n.relationNodeData = {
                            tb_id: e.tb_id,
                            tb_name: e.name,
                            tb_type: n.tips[i],
                            schema_total: e.schema_total,
                            update_status: e.update_status,
                            update_status_str: t,
                            update_time: e.update_time
                        }
                    }
                    "chart" == e.node_type && (n.relationNodeData = {
                        ct_name: e.name,
                        dsh_name: e.dsh_name,
                        proj_name: e.proj_name
                    }), "user" != e.node_type && "group" != e.node_type || (n.relationNodeData = {name: e.name}), n.$$phase || n.$digest()
                }

                function d(e) {
                    var t = "File";
                    switch (e) {
                        case"classify":
                            t = "Rectangle";
                            break;
                        default:
                            t = "File"
                    }
                    return t
                }

                function u(e) {
                    var t = "#5182E4";
                    switch (e) {
                        case"classify":
                            t = null;
                            break;
                        default:
                            t = "#5182E4"
                    }
                    return t
                }

                function p(e) {
                    var t = null;
                    switch (e) {
                        case"classify":
                            t = "#5182E4";
                            break;
                        default:
                            t = null
                    }
                    return t
                }

                function f(e) {
                    var t = "#fff";
                    switch (e) {
                        case"classify":
                            t = n.relationColors.fontTextBlock;
                            break;
                        default:
                            t = "#fff"
                    }
                    return t
                }

                function h(e) {
                    var t = new go.Margin(2, 0, 8, 0);
                    switch (e) {
                        case"classify":
                            t = new go.Margin(8, 0, 8, 0);
                            break;
                        default:
                            t = new go.Margin(2, 0, 8, 0)
                    }
                    return t
                }

                function g(e) {
                    var t = "pointer";
                    switch (e) {
                        case"classify":
                        case"user":
                        case"group":
                            t = "default";
                            break;
                        default:
                            t = "pointer"
                    }
                    return t
                }

                function m() {
                    S.nodeTemplate = k(go.Node, "Horizontal", {selectionAdorned: !1}, k(go.Panel, "Auto", new go.Binding("cursor", "node_type", g), k(go.Shape, "File", new go.Binding("figure", "node_type", d), new go.Binding("fill", "node_type", u), new go.Binding("stroke", "node_type", p)), k(go.TextBlock, "Default Text", {
                        margin: new go.Margin(2, 0, 8, 0),
                        font: "12px sans-serif bold",
                        overflow: go.TextBlock.OverflowEllipsis,
                        wrap: go.TextBlock.None,
                        maxSize: new go.Size(100, NaN),
                        minSize: new go.Size(100, NaN),
                        textAlign: "center"
                    }, new go.Binding("text", "name"), new go.Binding("stroke", "node_type", f), new go.Binding("margin", "node_type", h))), {
                        click: function (t, i) {
                            "table" == i.data.node_type && "1" != i.data.key && (e.$broadcast("skipTargetTable", i.data.tb_id, i.data.linkable), r.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"})), "chart" == i.data.node_type && (n.$emit("jumpToDashChart", i.data), r.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"}))
                        }, mouseEnter: function (e, t) {
                            n.showCurrentRelationLoading || "classify" != t.data.node_type && (c(t.data), l(t.position, t.data.node_type))
                        }, mouseLeave: function (e, t) {
                            "classify" != t.data.node_type && l("hide", t.data.node_type)
                        }
                    })
                }

                function v(e) {
                    var t = "";
                    switch (e) {
                        case 0:
                            t = "go.join";
                            break;
                        case 1:
                            t = "go.aggr";
                            break;
                        case 2:
                            t = "go.union";
                            break;
                        case 3:
                            t = "go.sql";
                            break;
                        case 7:
                            t = "go.transpose";
                            break;
                        default:
                            ""
                    }
                    return a.instant(t)
                }

                function y() {
                    S.linkTemplate = k(go.Link, {routing: go.Link.Orthogonal, corner: 0}, k(go.Shape, {
                        strokeWidth: 2,
                        stroke: "#5182E4",
                        isPanelMain: !0
                    }), k(go.Panel, "Auto", {
                        segmentIndex: -1,
                        segmentOffset: new go.Point(-40, -12)
                    }, k(go.Shape, "Rectangle", {
                        fill: n.relationColors.bgLinkPanel,
                        stroke: null,
                        strokeWidth: 1,
                        width: 60,
                        height: 20
                    }), k(go.TextBlock, "join", {
                        margin: 0,
                        stroke: n.relationColors.fontTextBlock,
                        font: "10px sans-serif bold"
                    }, new go.Binding("text", "produce_type", v))))
                }

                function b() {
                    "path" == n.relationView.view && (s(), t(function () {
                        m(), y(), r.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"}), n.showCurrentRelationLoading = !0, n.$$phase || n.$digest(), S.model = T
                    }, 10))
                }

                n.relationNodeData = {
                    tb_id: "",
                    tb_name: "",
                    tb_type: "",
                    schema_total: "",
                    update_status: "",
                    update_status_str: "",
                    update_time: ""
                };
                var _ = a.instant("worktable"), w = a.instant("chart"), x = a.instant("user"),
                    C = a.instant("template.group");
                n.$on("showCurrentRelationData", function (e, t) {
                    t.length > 0 && (s(), m(), y(), T.nodeDataArray = t, S.model = T, n.showCurrentRelationLoading = !1, angular.forEach(T.nodeDataArray, function (e) {
                        switch (e.key) {
                            case"2":
                                e.name = _, e.produce_type = _;
                                break;
                            case"3":
                                e.name = w, e.produce_type = w;
                                break;
                            case"4":
                                e.name = x, e.produce_type = x;
                                break;
                            case"5":
                                e.name = C, e.produce_type = C
                        }
                    }), b())
                }), s();
                var k, S, T;
                !function () {
                    k = go.GraphObject.make, S = k(go.Diagram, "show_current_relation", {
                        contentAlignment: new go.Spot(.02, 0, 0, 0),
                        allowMove: !1,
                        allowZoom: !1,
                        layout: k(go.TreeLayout, {angle: 0, layerSpacing: 150}),
                        AnimationFinished: function () {
                            n.showCurrentRelationLoading = !1, n.$$phase || n.$digest()
                        }
                    }), T = k(go.TreeModel)
                }(), angular.element(".current-relation").scroll(function () {
                    r.parent().parent().parent().parent().find(".relation-node-message").css({display: "none"})
                }), m(), y(), n.$on("themeChanged", b), n.$on("refresh-relation-path", b), i(["wb.joinTable", "wb.polymerTable", "wb.unionTable", "wb.scriptTable", "tbType.excel", "tbType.share", "tbType.allot", "tbType.public", "tbType.join", "tbType.union", "tbType.transpose", "tbType.aggr", "tbType.sql", "tbType.db", "tbType.opends"], n)
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    angular.module("BC.data-process").constant("goColors", {
        bg: "#5182E4",
        highlightBg: "#ff8555a",
        font: "#fff",
        highlightFont: "#fff"
    }).directive("goWbcat", ["goColors", "$timeout", "$rootScope", function (e, t, i) {
        function n() {
            function t() {
                go.ForceDirectedLayout.call(this)
            }

            go.Diagram.inherit(t, go.ForceDirectedLayout), t.prototype.makeNetwork = function (e) {
                var t = go.ForceDirectedLayout.prototype.makeNetwork.call(this, e);
                return t.vertexes.each(function (e) {
                    var t = e.node;
                    null !== t && (e.isFixed = t.isSelected || !("number" == typeof t.location.x && isNaN(t.location.x)))
                }), t
            };
            var n, a = go.GraphObject.make, r = {
                makeButton: function (e, t, i) {
                    return void 0 === i && (i = function () {
                        return !0
                    }), a("ContextMenuButton", a(go.Shape, "Rectangle", {
                        stroke: null,
                        fill: "#fff",
                        width: 80,
                        height: 28,
                        cursor: "pointer"
                    }), a(go.TextBlock, {
                        stroke: "#666",
                        margin: new go.Margin(5, 10, 0, 10)
                    }, e), {click: t}, new go.Binding("visible", "", i).ofObject())
                }, textLabel: function (t, i) {
                    return a(go.TextBlock, angular.extend({
                        font: "10px",
                        wrap: go.TextBlock.WrapDesiredSize,
                        margin: 0,
                        textAlign: "center",
                        stroke: e.font,
                        alignments: go.Spot.Bottom
                    }), new go.Binding("text", i || "text").makeTwoWay())
                }, tbNode: function (t, n, r) {
                    var o = n ? {contextMenu: a(go.Adornment, "Vertical", l.replaceButton(), l.delButton())} : {};
                    return a(go.Node, "Spot", new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify), {
                        locationSpot: go.Spot.Center,
                        locationObjectName: "SHAPE",
                        selectionAdorned: !1
                    }, a(go.Panel, "Auto", a(go.Shape, "File", {
                        fill: e.bg,
                        stroke: null
                    }, new go.Binding("figure", "figure")), a(go.TextBlock, {
                        stroke: e.highlightFont,
                        margin: new go.Margin(5, 10, 0, 10),
                        maxSize: new go.Size(160, NaN),
                        overflow: go.TextBlock.OverflowEllipsis,
                        wrap: go.TextBlock.WrapFit,
                        height: 20
                    }, new go.Binding("text", t || "text").makeTwoWay()), o), {
                        cursor: r ? "pointer" : "default",
                        click: function (e, t) {
                            r && i.$broadcast("skipTargetTable", t.data.tb_id, t.data.linkable)
                        }
                    })
                }, joinLink: function (e) {
                    return a(go.Link, {toShortLength: 4}, a(go.Shape, {
                        isPanelMain: !0,
                        stroke: "rgba(81, 130, 228, .6)",
                        strokeWidth: 2
                    }), a(go.Shape, {
                        toArrow: "standard",
                        stroke: null,
                        fill: "rgba(81, 130, 228, .6)"
                    }), a(go.Panel, "Auto", a(go.Shape, "RoundedRectangle", {
                        fill: "#fff",
                        stroke: "#A3ABB0",
                        strokeWidth: 1,
                        width: 58,
                        height: 20
                    }), a(go.TextBlock, "join", {margin: 5, stroke: "#333"}, new go.Binding("text", "", function (t) {
                        var i = t.join_type;
                        return e ? e[i] : i
                    }))))
                }
            }, o = "", s = "";
            "zh" == $.cookie("locale") ? (o = "替换", s = "删除") : (o = "Replace", s = "Delete");
            var l = {
                replaceButton: function () {
                    return r.makeButton(o, function () {
                        i.$broadcast("replaceWorktable", n)
                    }, function (e) {
                        return n = e.data, !0
                    })
                }, delButton: function () {
                    return r.makeButton(s, function (e, t) {
                        e.diagram.commandHandler.deleteSelection()
                    }, function (e) {
                        return e.diagram.commandHandler.canDeleteSelection()
                    })
                }
            };
            return {goContextMenu: l, AppLayout: t, goWidget: r}
        }

        return {
            restrict: "A", link: function (e, i, a) {
                function r() {
                    d.nodeTemplate = l.tbNode("showName", !1, !0), d.linkTemplate = l.joinLink(e.joinLinkText)
                }

                function o() {
                    for (var t = e.currentLink, i = 0, n = t.join_fields.length; i < n; i++) {
                        var a = t.join_fields[i], r = t.join_fields[i].join_field[0],
                            o = t.join_fields[i].join_field[1], s = e.fieldsKeyMap[t.from], l = e.fieldsKeyMap[t.to];
                        a.fieldTypes = [];
                        for (var c = 0, d = s.length; c < d; c++) if (r == s[c].fid) {
                            a.fieldTypes[0] = s[c].type;
                            break
                        }
                        for (var c = 0, d = l.length; c < d; c++) if (o == l[c].fid) {
                            a.fieldTypes[1] = l[c].type;
                            break
                        }
                    }
                }

                var s = n(), l = s.goWidget, c = go.GraphObject.make, d = c(go.Diagram, i[0], {
                    initialContentAlignment: go.Spot.Center,
                    layout: c(go.LayeredDigraphLayout)
                }), u = d.layout, p = false;
                p && (p = JSON.parse(p)), p && p.USE_ZH_JOIN_TEXT ? e.joinLinkText = {
                    "left join": "左关联",
                    "inner join": "内关联",
                    "full join": "全关联"
                } : e.joinLinkText = {
                    "left join": "left join",
                    "inner join": "inner join",
                    "full join": "full join"
                }, e.$on("broadcastRedrawJoinModule", function (e, i) {
                    d.requestUpdate(), t(function () {
                        d.model = go.Model.fromJson(d.model.toJson())
                    }, 10)
                }), e.$watch("modelData.diagram", function (i) {
                    if (i && (u.direction = 180, u.layerSpacing = 160, u.columnSpacing = 30, e.currentLink = null, t(function () {
                        d.model = go.Model.fromJson(angular.toJson(i)), r()
                    }, 10), !e.fieldsKeyMap)) {
                        e.fieldsKeyMap = {};
                        for (var n = 0, a = i.nodeDataArray.length; n < a; n++) e.fieldsKeyMap[i.nodeDataArray[n].key] = i.nodeDataArray[n].fields
                    }
                }, !0);
                var f = function (t, n, a, r) {
                    e.$apply(function () {
                        e.currentLink = a, o(), setTimeout(function () {
                            var e = r.x + r.width / 2 + 25, t = r.y + r.height / 2 + 15,
                                n = d.transformDocToView(new go.Point(e, t)), a = i.parent().width(),
                                o = i.parent().height(), s = Math.min(n.x, a - 445), l = Math.min(n.y, o - 150);
                            i.parent().find(".J-merge-field-select").css({left: s, top: l, opacity: 1})
                        }, 0)
                    })
                };
                d.addDiagramListener("ObjectSingleClicked", function (e) {
                    var t = e.subject.part;
                    t instanceof go.Link && f(t.fromNode.data, t.toNode.data, t.data, t.actualBounds)
                })
            }
        }
    }])
}, function (e, t, i) {
    "use strict";
    angular.module("BC.data-process").directive("errorReport", ["$timeout", "$jsTipTranslate", "$translate", function (e, t, i) {
        return {
            restrict: "A",
            scope: {onExcel: "&", tbid: "=", data: "="},
            templateUrl: "/static/data-process/join/view/error-report.html",
            controller: ["$scope", function (e) {
                function t(e) {
                    a.report = e, a.reportType = "", a.reportJoinTable = [], a.reportJoinTableVal = 0;
                    var t = a.reportJoinTable;
                    angular.forEach(e, function (e, i) {
                        e.count = e.duplicated.count + e.empty.count, e.duplicatedCount = e.duplicated.count, e.emptyLen = e.empty.count, t.push({
                            id: i,
                            name: e.left_tb.title + "-" + e.right_tb.title
                        })
                    }), i()
                }

                function i() {
                    if (0 != a.reportJoinTable.length) {
                        var e, t, i = 0, n = 0, r = a.reportType;
                        switch (i = a.report[a.reportJoinTableVal].duplicated.count, n = a.report[a.reportJoinTableVal].empty.count, e = 0, t = 0, r) {
                            case"duplicated":
                                t = i, i = i < 50 ? i : 50, e = i;
                                break;
                            case"empty":
                                t = n, n = n < 50 ? n : 50, e = n;
                                break;
                            default:
                                t = i + n, i = i < 50 ? i : 50, i >= 50 ? n = 0 : i + n > 50 && (n = 50 - i), e = i + n
                        }
                        a.duplicatedIndex = i, a.emptyIndex = n, a.curTotal = e, a.total = t
                    }
                }

                function n(t) {
                    e.errorReport.stage = 1;
                    var i = t.data.check_report.report, n = [];
                    angular.forEach(i, function (e) {
                        n.push(e.left_tb + " -- " + e.right_tb + "重复条数" + e.expand_count)
                    }), e.errorReport.report2 = n
                }

                e.dataType = "", e.errorReport = {};
                var a = e.errorReport;
                e.$watch("data", function (e) {
                    e && (1 == e.stage ? n(e) : t(e))
                }), e.changeType = function () {
                    i()
                }, e.changeSelect = function () {
                    i()
                }, e.exportExcel = function () {
                    e.onExcel()
                }
            }]
        }
    }])
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.personal", []), a = function (e) {
        var t = i(85)(i.p + "e48a51757bbe.css");
        i.e(14).then(function (n) {
            var a = [];
            return a.push(i(857)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    };
    i(392), i(510), i(511), i(512), i(513), i(514), i(516), i(519), i(520), i(521), i(523), i(524), i(525), i(526), i(527), i(528), i(529), i(531), i(532), i(392), i(535), i(536), i(538), i(540);
    var r = {
        notice_list: {
            url: "/notice",
            templateUrl: "/static/view/notice_list.html",
            controller: "noticeCtrl as vm"
        },
        notice: {
            url: "/notice/:noticeTpye",
            templateUrl: "/static/view/notice_list.html",
            controller: "noticeCtrl as vm"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    e.exports = i.p + "personal_1343d9fd.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").directive("copyShareLink", ["errHint", "$timeout", function (e, t) {
            return {
                scope: {copyUrl: "="}, link: function (i, n) {
                    t(function () {
                        n.zclip({
                            path: "/static/js/lib/jquery-ui/ZeroClipboard.swf", copy: function () {
                                return i.copyUrl
                            }, afterCopy: function () {
                                t(function () {
                                    e("复制成功")
                                }, 0)
                            }
                        })
                    }, 500)
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").directive("socialShare", ["ngDialog", "$q", "shareService", "$window", "$rootScope", function (e, t, i, n, a) {
            function r(t, r) {
                function o() {
                    t.vmStatus.upgrade = !1, e.open({
                        templateUrl: "/static/js/personal/share/social-share-dialog.html",
                        className: "ngdialog-theme-default ngDialog-width-460",
                        scope: t,
                        preCloseCallback: function () {
                            t.vmStatus.creatShareSuc = !1
                        }
                    })
                }

                function s(e) {
                    if ("private" == e && t.memberData && t.memberData.vipLevel < 2) return t.vmStatus.upgrade = !0, !1;
                    var n = {dashId: t.dashSelected, description: t.share.description, shareType: e};
                    return i.creatSdoId(n).then(function (e) {
                        e.sdo_id ? (t.vmStatus.creatShareSuc = !0, t.share.descriptionOriginal = angular.copy(t.share.description), t.outerShareInfo.password = e.password || "", t.outerShareInfo.short_url = e.short_url, t.outerShareInfo.sdo_id = e.sdo_id) : t.share.shareUrl = ""
                    })
                }

                function l() {
                    return i.modifyShareDesc(t.outerShareInfo.sdo_id, t.share.description).then(function (e) {
                        e && (t.share.descriptionOriginal = angular.copy(t.share.description))
                    })
                }

                function c() {
                    t.share.shareUrl && n.open(t.share.shareUrl)
                }

                function d(e, n, a) {
                    switch (n) {
                        case"wechat":
                            i.shareToWechat(e, n, a, t.share.shareUrl);
                            break;
                        case"qzone":
                        case"tsina":
                            i.shareToPlugins(n, a, t.share.shareUrl)
                    }
                }

                function u() {
                    e.openConfirm({
                        template: "/static/partials/dialogTemplates/confirm-dialog.html",
                        className: "ngdialog-theme-default ngDialog-width-300",
                        scope: t,
                        data: {title: "提示", message: "取消此次分享？"}
                    }).then(function (e) {
                        p()
                    })
                }

                function p() {
                    var n = t.outerShareInfo.sdo_id;
                    n && i.cancelShare(n).then(function (i) {
                        0 == i.data.status && (t.outerShareInfo = {}, e.closeAll())
                    })
                }

                t.share = {
                    description: "",
                    descriptionOriginal: "",
                    shareUrl: "",
                    shareUrlCopy: ""
                }, t.vmStatus = {
                    upgrade: !1,
                    creatShareSuc: !1
                }, t.showShareDialog = o, t.creatShare = s, t.modifyShareDesc = l, t.gotoSharePage = c, t.cancelSharePop = u, t.shareDashboardTo = d, function () {
                    t.memberData = a.memberData, t.outerShareInfo && t.outerShareInfo.description && (t.share.description = t.outerShareInfo.description, t.share.descriptionOriginal = t.outerShareInfo.description), t.$watch("outerShareInfo.sdo_id", function (e) {
                        if (!e) return !1;
                        var n = i.generateShareUrl(t.outerShareInfo.short_url, t.outerShareInfo.password);
                        t.share.shareUrl = n.url, t.share.shareUrlCopy = n.copyUrl
                    })
                }()
            }

            return {
                scope: {outerShareInfo: "=", dashSelected: "=", dashTitle: "="},
                restrict: "EA",
                templateUrl: "/static/js/common/tpl/personal/social-share.html",
                replace: !0,
                link: r
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i) {
            function n(i) {
                return e.post("/api/outer_share/generate", {
                    dsh_id: i.dashId,
                    description: i.description,
                    private: "public" == i.shareType ? 0 : 1
                }).then(function (e) {
                    return 0 == e.data.status ? e.data.result : (t(e.data.errstr), null)
                })
            }

            function a(t) {
                return e.get("/api/outer_share/delete?sdo_id=" + t)
            }

            function r(i, n) {
                return e.post("/api/outer_share/modify_desc", {sdo_id: i, description: n}).then(function (e) {
                    return 0 == e.data.status ? e.data : (t(e.data.errstr), null)
                })
            }

            function o(e, t, i, n) {
                bdp.loadjs({
                    src: ["//m1.bdp.cn/static/js/lib/jquery-qrcode/jquery.qrcode_fa248c8.js", "//m1.bdp.cn/static/js/lib/jquery-qrcode/qrcode_2cfb76d.js"],
                    callback: function () {
                        var t = e.target,
                            i = $('<div class="share-wechat-pop"><div class="qrcode-wrap"></div><div class="foot">扫描二维码分享至微信</div><em class="arrow-left"></em></div>').appendTo("body"),
                            a = $(t).offset();
                        i.css({
                            position: "absolute",
                            zIndex: 99999,
                            top: a.top,
                            left: a.left + $(t).width() + 10
                        }).find(".close-btn").on("click", function () {
                            i.remove()
                        }), i.find(".qrcode-wrap").qrcode({
                            width: 100,
                            height: 100,
                            text: n
                        }), $(t).on("mouseleave.showQrCode", function () {
                            i.remove()
                        })
                    }
                })
            }

            function s(e, t, n) {
                n || alert("获取分享链接失败");
                var a = angular.extend({}, c, {
                    to: e,
                    url: n,
                    product: "BDP",
                    title: encodeURIComponent("快来看看分享自BDP个人版的数据报表“" + t + "”吧，图表直观又酷炫。在BDP，每周1分钟轻松搞定数据报表，从此和加班say goodbye！（来自@BDP个人版）")
                }), r = "http://share.baidu.com/s?", o = [];
                for (var s in a) if (a.hasOwnProperty(s)) if ("pic" == s && angular.isArray(a[s])) {
                    var l;
                    l = "tsina" == e ? a[s].join("||") : a[s][0], o.push(s + "=" + l)
                } else o.push(s + "=" + a[s]);
                r += o.join("&"), i.open(r)
            }

            function l(e, t) {
                var i = location.protocol + "//" + location.host + e;
                return {url: i, copyUrl: t ? "链接：" + i + "\n密码：" + t : i}
            }

            var c = {
                type: "text",
                pic: [location.origin + "/static/images/bdp-dashboard-overview.png", location.origin + "/static/images/login_logo.png"],
                title: encodeURIComponent("我在 #BDP# 制作了一个酷炫的数据仪表盘，里面全都是数据干货，快来点击围观！"),
                desc: "BDP",
                sign: "off",
                searchPic: 0,
                relateUid: 0
            };
            this.creatSdoId = n, this.cancelShare = a, this.modifyShareDesc = r, this.shareToWechat = o, this.shareToPlugins = s, this.generateShareUrl = l
        }

        angular.module("BC.personal").service("shareService", ["$http", "errHint", "$window", e])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").factory("dotGuide", ["$rootScope", function (e) {
            return {
                data_source: {
                    dataProcess: {
                        videoSrc: "/pmresources/assets/workSheet/dataProcess.mp4",
                        tooltipText: "即数据处理，包括多表关联、追加合并、SQL建表等多种合表处理方式，用于对已有工作表进行加工和建模。",
                        paramVal: "table_guide",
                        guideNum: 1,
                        nextGuideNum: 2
                    },
                    addWbField: {
                        videoSrc: "/pmresources/assets/workSheet/addWbField.mp4",
                        tooltipText: "工作表新增计算字段，即用函数创建一个新字段，下拉还有“生成经纬度字段”等操作。",
                        paramVal: "table_guide",
                        guideNum: 2,
                        nextGuideNum: 3
                    },
                    replace: {
                        videoSrc: "/pmresources/assets/workSheet/replace_170616.mp4",
                        tooltipText: "替换数据是指替换已有工作表中全部或部分数据记录。数据替换后，所有用这张工作表做的图表，数据结果都会自动更新，无需重复做图。",
                        paramVal: "table_guide",
                        guideNum: 3,
                        nextGuideNum: 4
                    },
                    append: {
                        videoSrc: "/pmresources/assets/workSheet/append.mp4",
                        tooltipText: "追加数据是指往已有的工作表上追加数据记录行。追加成功后，所有用这张工作表做的图表，数据结果都会自动更新，无需重复做图。",
                        paramVal: "table_guide",
                        guideNum: 4,
                        nextGuideNum: 5
                    },
                    worktablEidt: {
                        videoSrc: null,
                        tooltipText: "鼠标滑过工作表时，右上角会出现“三个点图标”按钮，点击可对工作表进行编辑、移动、删除等操作。",
                        paramVal: "table_guide",
                        guideNum: 5,
                        nextGuideNum: 0
                    }
                },
                chart_edit: {
                    drillChart: {
                        videoSrc: "/pmresources/assets/dashEdit/drillChart_170406.mp4",
                        tooltipText: "维度支持多层钻取，便于在同一张图表逐层下钻查看数据，如”省—市—区”数据。",
                        paramVal: "chart_guide",
                        guideNum: 1,
                        nextGuideNum: 2
                    },
                    biaxialDiagram: {
                        videoSrc: "/pmresources/assets/dashEdit/biaxialDiagram_170313.mp4",
                        tooltipText: "点击“添加次轴”添加另一个Y轴，可使用双轴图展示数据。",
                        paramVal: "chart_guide",
                        guideNum: 2,
                        nextGuideNum: 3
                    },
                    advancedComputing: {
                        videoSrc: null,
                        tooltipText: null,
                        paramVal: "chart_guide",
                        guideNum: 4,
                        nextGuideNum: 5
                    },
                    addChartField: {
                        videoSrc: "/pmresources/assets/dashEdit/addChartField.mp4",
                        tooltipText: "此处可新增字段用来做图，计算字段即用函数创建一个新字段，分组字段即把某个已有字段按一定规律进行分组。",
                        paramVal: "chart_guide",
                        guideNum: 3,
                        nextGuideNum: 4
                    },
                    sort: {videoSrc: null, tooltipText: null, paramVal: "chart_guide", guideNum: 5, nextGuideNum: 0}
                },
                dash_edit: {
                    design: {
                        videoSrc: null,
                        tooltipText: "点击“设计”，可对图例、数值标签等效果进行设置，高级仪表盘中还可以添加文本、图片、视频等元素，让仪表盘更加图文并茂。",
                        paramVal: "dashboard_guide",
                        guideNum: 2,
                        nextGuideNum: 3
                    },
                    dashEdit: {
                        videoSrc: null,
                        tooltipText: "鼠标滑过图表时，右上角会出现“三个点图标”按钮，点击可进行导出图片、导出Excel、图表联动、删除等操作。",
                        paramVal: "dashboard_guide",
                        guideNum: 1,
                        nextGuideNum: 2
                    },
                    share: {
                        videoSrc: null,
                        tooltipText: "点击“分享”，可以把当前做好的数据报表分享给其他人，分享的数据结果可实时更新。",
                        paramVal: "dashboard_guide",
                        guideNum: 3,
                        nextGuideNum: 0
                    }
                }
            }
        }]).directive("dotGuide", ["commonService", "$http", "commonHttp", "$timeout", "ngDialog", "$location", "$position", "$stateParams", "$rootScope", "errHint", "$jsTipTranslate", "capacityHint", "dotGuide", function (e, t, i, n, a, r, o, s, l, c, d, u, p) {
            return {
                restrict: "A",
                templateUrl: "/static/js/common/tpl/guide/dot_guide.html",
                scope: {dotMask: "=", watchStatus: "=", guideItem: "@", guideType: "@", btnClass: "@", addClass: "="},
                link: function (e, i, a) {
                    function r() {
                        $("body").off("click.changeDotStep").on("click.changeDotStep", "." + e.btnClass, function (e) {
                            o()
                        })
                    }

                    function o() {
                        e.showDotGuideTip = !1, n(function () {
                            e.watchStatus = e.dotGuideData[e.guideItem].nextGuideNum
                        }, 0), $("." + e.btnClass).off("click.changeDotStep");
                        var i = {};
                        i[e.dotGuideData[e.guideItem].paramVal] = e.dotGuideData[e.guideItem].nextGuideNum, t.post("/api/user/guide_set", i).success(function (e) {
                            return 0 == e.status || (errorHandle(e), !1)
                        })
                    }

                    e.dotGuideData = p[e.guideType], $(i).addClass(e.addClass);
                    var s = e.$watch("watchStatus", function (t) {
                        switch (e.guideItem) {
                            case"advancedComputing":
                                t === e.dotGuideData[e.guideItem].guideNum && (r(), s());
                                break;
                            default:
                                s()
                        }
                    });
                    e.clickShowInfo = function () {
                        if (!e.dotGuideData[e.guideItem].tooltipText) return !1;
                        e.dotMask = !0, n(function () {
                            e.showDotGuideTip = !0, e.dotMask && $("." + e.btnClass).off("click.changeDotStep").on("click.changeDotStep", function (e) {
                                o()
                            })
                        }, 0)
                    }, $.inArray(e.guideItem, ["design", "share"]) > -1 && ($("body").on("dashboard-scroll-start.dotGuide", function () {
                        $(".J_dash_dot_guide").addClass("ng-hide"), e.showDotGuideTip = !1, e.dotMask = !1
                    }), e.$on("$destroy", function () {
                        var e = $("body");
                        e.off("dashboard-scroll-start.dotGuide"), e.off("click.changeDotStep")
                    })), e.seeHelpVideo = function () {
                        o();
                        var t = '                        <div class="guide-video dot-guide-video" style="z-index:1000000001">                             <div class="video-wrap slow-in">                                <span class="video-close bdp-icon removeVideo" title="关闭">                                     <i class="bdp-icon ico-cancel-white"></i>                                  </span>                                 <video class="slow-in" id="guide_video" src="' + e.dotGuideData[e.guideItem].videoSrc + '" controls="controls"></video>                             </div>                        </div>                    ';
                        $("body").append(t), $(".removeVideo").off("click.removeDotVideo").on("click.removeDotVideo", function (e) {
                            e.preventDefault(), $(".dot-guide-video").remove(), $(".removeVideo").off("click.removeDotVideo")
                        })
                    }, e.iKnowClick = function () {
                        o()
                    }
                }
            }
        }])
    }()
}, function (e, t, i) {
    i(515).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "dot-guide_341c21e9.css"
}, function (e, t, i) {
    "use strict";
    i(517), angular.module("BC.personal").directive("personalBroadcast", ["commonService", "$rootScope", function (e, t) {
        return {
            restrict: "A",
            templateUrl: "/static/js/personal/notice-broadcast/notice-broadcast.html",
            replace: !1,
            scope: !0,
            link: function (i, n, a) {
                function r() {
                    $.cookie("invitationActivity", "0");
                    var t = {new_version: 0};
                    e.guide.guideSet(t).then(function (e) {
                        return 0 == e.status || (errorHandle(e), !1)
                    })
                }

                i.closeBroadcast = function () {
                    t.personalInfo.new_version = !1, r()
                }, i.toLearn = function () {
                    window.open("/doubule11.html"), t.personalInfo.new_version = !1, r()
                }
            }
        }
    }])
}, function (e, t, i) {
    i(518).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "notice-broadcast_48110e42.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").controller("noviceGuideCtrl", ["$scope", "ngDialog", "$rootScope", function (e, t, i) {
            function n() {
                s.mode.currentStep == s.mode.maxStep || (s.mode.currentStep += 1, s.noviceLogger("nextStep"))
            }

            function a(e) {
                s.mode.currentStep = e
            }

            function r() {
                s.mode.videoActve = !1, $(".novice-active" + s.mode.currentStep).find("video").each(function (e, t) {
                    t.pause()
                })
            }

            function o(e) {
                BDPLogger.log("noviceGuide", {
                    category: "user_interact",
                    action: "guide",
                    opt_label: s.mode.currentStep + "-" + e,
                    opt_value: 1
                })
            }

            var s = this;
            s.mode = {
                videoList: [1, 2, 3, 4, 5, 6, 7],
                videoActve: !1,
                currentStep: 0,
                maxStep: void 0,
                showPackage: e.ngDialogData ? e.ngDialogData.showPackage : 0
            }, s.nextStep = n, s.stepTo = a, s.stopVideo = r, s.noviceLogger = o, function () {
                s.mode.maxStep = s.mode.videoList.length, s.mode.currentStep = 1, setTimeout(function () {
                    $(".novice-video").on("playing.noviceGuide", function (t) {
                        t.preventDefault(), s.mode.videoActve = !0, e.$digest(), s.noviceLogger("videoPlay")
                    }).on("ended.noviceGuide", function (t) {
                        t.preventDefault(), s.mode.videoActve = !1, e.$digest(), s.noviceLogger("videoEnded")
                    }).on("pause.noviceGuide", function (e) {
                        e.preventDefault(), s.noviceLogger("videoPause")
                    }), $(".video-mask").on("click.playVideo", function (e) {
                        e.preventDefault(), $(this).siblings("video")[0].play()
                    })
                }, 10)
            }()
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").directive("noviceGuide", ["ngDialog", "$rootScope", function (e, t) {
            return {
                restrict: "A", replace: !1, scope: !0, link: function (t, i, n) {
                    i.on("click.noviceGuide", function (t) {
                        t.preventDefault(), e.open({
                            template: "/static/js/personal/novice-guide/novice-guide.html",
                            className: "ngdialog-theme-default novice-guide",
                            showClose: !1
                        }), BDPLogger.log("noviceGuide", {
                            category: "user_interact",
                            action: "guide",
                            opt_label: "openDialog",
                            opt_value: 1
                        })
                    })
                }
            }
        }])
    }()
}, function (e, t, i) {
    i(522).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "novice-guide_e5e7b88a.css"
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i, n, r, o, s, l, c, d, u, p, f) {
            function h(e) {
                var t = u.noticeTpye, i = k.page;
                k.loading = !0, p.getNoticeType().then(function (n) {
                    k.tabs = n, k.common.allUnReadLen = p.getAllUnreadLen(k.tabs), k.currentTab = p.setActiveTab(t, k.tabs), !C && k.common.allUnReadLen > 0 && (e = !1, k.show = !0), e && !C || p.getListByType(k.currentTab.typeId, i.current).then(function (e) {
                        i.total = e.pageTotal, k.noticeList = e.list
                    })
                }).finally(function () {
                    k.loading = !1
                })
            }

            function g(e, t, i) {
                i.stopPropagation(), d.open({
                    template: '<div><div class="notice-img-wrap J-close-by-bg" ng-click="closeByBg($event)"><img class="notice-img" ng-src="{{playFlag.currentImgSrc}}"></div>                           <div class="close-btn" ng-click="closeThisDialog()"><i class="bdp-icon ico-cancel-white"></i></div>                           <div class="play-control clearfix">                                <div class="fl play-left" ng-click="changePaly(playFlag.current - 1)"><i class="bdp-icon ico-prev"></i></div>                                <div class="fl play-number">{{playFlag.current + 1}}/{{playFlag.total}}</div>                                <div class="fl play-right" ng-click="changePaly(playFlag.current + 1)"><i class="bdp-icon ico-next"></i></div>                           </div></div>',
                    plain: !0,
                    showClose: !1,
                    closeByDocument: !0,
                    className: "ngdialog-theme-default notice-img-dialog",
                    closeByEscape: !0,
                    data: {imgList: e.picList, currentIndex: t},
                    preCloseCallback: function () {
                        $("body").off("keyup.showBigImg"), $("#MEIQIA-BTN-HOLDER").show()
                    },
                    controller: ["$scope", function (e) {
                        e.init = function () {
                            var t = e.ngDialogData.currentIndex || 0;
                            e.playFlag = {
                                total: e.ngDialogData.imgList.length,
                                current: t,
                                currentImgSrc: e.ngDialogData.imgList[t]
                            }, $("#MEIQIA-BTN-HOLDER").hide()
                        }, e.init(), $("body").on("keyup.showBigImg", function (t) {
                            37 == t.keyCode ? e.changePaly(e.playFlag.current - 1) : 39 == t.keyCode && e.changePaly(e.playFlag.current + 1)
                        }), e.changePaly = function (t) {
                            t < 0 && (t = e.ngDialogData.imgList.length - 1), t > e.ngDialogData.imgList.length - 1 && (t = 0), e.playFlag.current = t, e.playFlag.currentImgSrc = e.ngDialogData.imgList[t], e.$$phase || e.$digest()
                        }, e.closeByBg = function (t) {
                            $(t.target).hasClass("J-close-by-bg") && e.closeThisDialog()
                        }
                    }]
                })
            }

            function m(e) {
                var t = k.tabs, i = k.page;
                k.currentTab = p.setActiveTab(e, t), i.current = 1, k.noticeList = void 0, k.loading = !0, p.setUnReadLen(t), p.getListByType(e, i.current).then(function (e) {
                    i.total = e.pageTotal, k.noticeList = e.list
                }).finally(function () {
                    k.loading = !1
                })
            }

            function v() {
                r(function () {
                    k.noticeList = void 0, k.loading = !0, p.getListByType(k.currentTab.typeId, k.page.current).then(function (e) {
                        k.noticeList = e.list
                    }).finally(function () {
                        k.loading = !1
                    })
                }, 0, !1)
            }

            function y() {
                if ("4" == k.currentTab.typeId) {
                    var t = localStorage.getItem("mc_location_path");
                    i.global && i.global.url_before_warn && (t = i.global.url_before_warn, i.global.url_before_warn = null), n.path(t || "/dash_edit"), e.back_guide = !1
                } else i.back()
            }

            function b(e, t) {
                return "A" != t.target.tagName && "IMG" != t.target.tagName && (C || 3 != e.type ? (e.isRead || (p.setNoticReaded(e, k.tabs, k.noticeList), k.common.allUnReadLen = p.getAllUnreadLen(k.tabs)), e.link.href ? window.open(e.link.href) : 3 == e.type && (e.content.length > 84 || e.picList && e.picList.length > 0) && (e.showMore = !e.showMore), void BDPLogger.log("message_link_click", {
                    category: "user_interact",
                    action: "message_link_click",
                    opt_label: (0, a.default)({link: e.link && e.link.href, opt_id: e.id})
                })) : (n.path("/notice/3"), !1))
            }

            function _(e, t, a, r, o) {
                i.dashSelected = t, i.activeProjId = e, i.warnListSelectedItem = {ct_id: r};
                var s = "", l = "", c = o.category, d = a ? "/" + a + "/" : "";
                2 == c ? (s = "/dash_edit/", l = "/mode/adv") : s = "/dash_edit/", n.path(s + e + "/" + t + d + l)
            }

            function w(e, t) {
                e.stopPropagation(), s.notice.delNotice(t.id).then(function (e) {
                    0 == e.status && k.noticeList.splice(t, 1)
                })
            }

            function x() {
                s.notice.setNoticeReadAll(k.currentTab.typeId).then(function (e) {
                    0 == e.status && (k.currentTab.unReadNewsLen = 0, angular.forEach(k.noticeList, function (e) {
                        e.isRead = !0
                    }), k.common.allUnReadLen = p.getAllUnreadLen(k.tabs))
                })
            }

            var C = !1;
            "notice_list" != f.current.name && "notice" != f.current.name || (i.show_bdp_header = !1, C = !0);
            var k = this;
            k.noticeList = void 0, k.tabs = [], k.common = p.getCache(), k.currentTab = {typeId: u.noticeTpye}, k.page = {
                current: 1,
                total: 1
            }, k.showBigImg = g, k.changeNoticeType = m, k.changeNoticePage = v, k.back = y, k.openMessagePage = b, k.goDash = _, k.setNoticeReadAll = x, k.delNotice = w, k.init = h, h(!0)
        }

        angular.module("BC.personal").controller("noticeCtrl", e), e.$inject = ["$scope", "commonHttp", "$rootScope", "$location", "$timeout", "warnOperatorMap", "commonService", "errHint", "$filter", "ngDialog", "$stateParams", "noticeService", "$state"]
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").service("noticeService", ["$q", "$filter", "commonService", "commonHttp", function (e, t, i, n) {
            function a(t, a) {
                var s = e.defer(), t = t;
                if (!t || !a) throw"error 必传参数错误";
                if (f[t] && !f[t].needRefresh) s.resolve(f[t]); else {
                    var l = {list: [], pageTotal: 0};
                    if ("4" == t) {
                        var c = {page: a || 1};
                        n.get("/api/warn/history", c).then(function (e) {
                            0 == e.status ? (l.list = o(e) || [], l.pageTotal = e.result.page_count, s.resolve(l)) : s.reject(e.errstr)
                        }, function (e) {
                            s.reject(e)
                        })
                    } else {
                        var c = {purpose: t, page: a};
                        i.notice.getListByType(c).then(function (e) {
                            0 == e.status ? (l.list = r(e, t), l.pageTotal = e.result.page_count, s.resolve(l)) : s.reject(e.errstr)
                        }, function (e) {
                            s.reject(e)
                        })
                    }
                }
                return s.promise
            }

            function r(e, t) {
                for (var i = e.result.new_data, n = [], a = 0, r = i.length; a < r; a++) n.push({
                    id: i[a].log_id,
                    type: t,
                    link: angular.fromJson(i[a].link),
                    content: i[a].htmlStr,
                    releaseTime: i[a].ctime,
                    picList: i[a].img_list,
                    isRead: i[a].is_read
                });
                return n
            }

            function o(e) {
                var t = "en" == $.cookie("locale") ? "Untitled Chart" : "未命名图表", i = e.result.warn_his, n = [];
                return angular.forEach(i, function (e) {
                    e.ct_name || (e.ct_name = t);
                    var i = "";
                    e.parents && angular.forEach(e.parents, function (e, t) {
                        i += e.name + " / "
                    }), e.warnProjPath = i + e.proj_name, 0 == n.length ? n.push({
                        time: bdpChart.helper.checkGranularity("day", new Date(e.ctime)),
                        list: [e]
                    }) : bdpChart.helper.checkGranularity("day", new Date(e.ctime)) == n[n.length - 1].time ? n[n.length - 1].list.push(e) : n.push({
                        time: bdpChart.helper.checkGranularity("day", new Date(e.ctime)),
                        list: [e]
                    })
                }), n
            }

            function s() {
                var n = e.defer();
                if (f.tabList) n.resolve(f.tabList); else {
                    var a = [];
                    i.notice.getNoticeType().then(function (e) {
                        if (0 == e.status) {
                            for (var i = e.result, r = 0, o = i.length; r < o; r++) a.push({
                                title: t("noticeTypeMap")(i[r].purpose),
                                active: !1,
                                unReadNewsLen: i[r].unread_num,
                                typeId: i[r].purpose
                            });
                            n.resolve(a)
                        } else n.reject(e.errstr)
                    }, function (e) {
                        n.reject(e)
                    })
                }
                return n.promise
            }

            function l(e) {
                var t = e;
                i.notice.getNoticeType().then(function (e) {
                    if (0 == e.status) for (var i = e.result, n = 0, a = i.length; n < a; n++) for (var r = t.length - 1; r >= 0; r--) t[n].typeId == i[n].purpose && (t[n].unReadNewsLen = i[n].unread_num)
                })
            }

            function c(e, t) {
                for (var i, n = t.length - 1; n >= 0; n--) t[n].active = !1, (!e && t[n].unReadNewsLen > 0 || e && t[n].typeId == e) && (i = t[n]);
                return i || (i = t[0]), i.active = !0, i
            }

            function d(e, t, n) {
                var a = {notice_id_list: []}, r = e.unReadNewsLen, t = t;
                a.notice_id_list.push(e.id);
                for (var o = t.length - 1; o >= 0; o--) t[o].typeId == e.type && (t[o].unReadNewsLen -= 1);
                e.isRead = !0, a.notice_id_list.length > 0 && (a.notice_id_list = angular.toJson(a.notice_id_list), i.notice.setNoticeReaded(a).then(function (t) {
                    0 == t.status ? e.is_read = 1 : (e.unReadNewsLen = r, errHint(t.errstr))
                }))
            }

            function u(e) {
                for (var t = 0, i = e.length - 1; i >= 0; i--) t += e[i].unReadNewsLen;
                return t
            }

            function p() {
                f = {}
            }

            var f = {allUnReadLen: 0};
            this.getListByType = a, this.getNoticeType = s, this.setUnReadLen = l, this.setActiveTab = c, this.setNoticReaded = d, this.getAllUnreadLen = u, this.destory = p, this.getCache = function () {
                return f
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").filter("noticeTypeMap", [function () {
            return function (e) {
                switch (e) {
                    case 1:
                        return "更新";
                    case 2:
                        return "干货";
                    case 3:
                        return "系统";
                    case 4:
                        return "预警";
                    case"更新":
                        return 1;
                    case"干货":
                        return 2;
                    case"系统":
                        return 3;
                    case"预警":
                        return 4;
                    default:
                        return "请选择消息类型"
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").directive("navNotice", ["errHint", "$location", "$timeout", "$filter", "noticeService", function (e, t, i, n, a) {
            return {
                restrict: "E",
                templateUrl: "/static/js/common/tpl/nav-notice.html",
                replace: !1,
                scope: {},
                controller: "noticeCtrl",
                controllerAs: "vm",
                link: function (e, i, n) {
                    $("body").on("dashboard-scroll-start.dashNotice", function () {
                        e.vm.show = !1, $(".J_personal_notice_layer").addClass("ng-hide")
                    }), e.$on("$destroy", function () {
                        $("body").off("dashboard-scroll-start.dashNotice")
                    }), e.goToListPage = function (i) {
                        var i = e.vm.currentTab.typeId;
                        void 0 === i && (i = ""), t.path("/notice/" + i)
                    }, e.showNoticeList = function () {
                        e.vm.show = !e.vm.show, e.vm.unreadShow = !1, e.vm.show && e.vm.init()
                    };
                    e.$on("_websocketChartMessage_", function (t, i) {
                        var n = "string" == typeof i.data ? $.parseJSON(i.data) : i.data;
                        9 == n.type && "is_publ" == n.content.type && (e.vm.common.allUnReadLen += 1, e.vm.show || (e.vm.unreadShow = !0)), 5 == n.type && (e.vm.common.allUnReadLen += 1, e.vm.show || (e.vm.unreadShow = !0)), e.$$phase || e.$digest()
                    })
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").directive("invoiceBtn", ["ngDialog", "$rootScope", function (e, t) {
            return {
                restrict: "A", replace: !1, scope: !0, link: function (t, i, n) {
                    i.on("click.invoice", function (i) {
                        i.preventDefault(), e.open({
                            template: "/static/js/personal/invoice/invoice.html",
                            className: "ngdialog-theme-default invoice-dialog",
                            scope: t
                        })
                    })
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a) {
            function r(e) {
                var t = n("filter")(l.orderInfo.list, {select: !0});
                if ("form" == e && 0 == t.length) return i("至少选择一项订单哦~"), !1;
                l.view.currentDialog = e
            }

            function o(e) {
                e.select ? l.form.invoiceInfo.price += e.cost : l.form.invoiceInfo.price -= e.cost
            }

            function s(e) {
                if (l.form.invoiceInfo.title.length > 100 || !l.form.invoiceInfo.title) return i("发票抬头过长或为空！"), !1;
                if (l.form.invoiceInfo.identifier.length > 50 || !l.form.invoiceInfo.identifier) return i("纳税人识别号过长或为空！"), !1;
                if (l.form.invoiceInfo.remark.length > 100) return i("备注过长！"), !1;
                if (1 == l.form.invoiceType) {
                    if (!bdp.verify.email(l.form.addresseeInfo.email) || !l.form.addresseeInfo.email) return i("电子邮件格式不符或为空！"), !1
                } else {
                    if (l.form.addresseeInfo.contact.length > 20 || !l.form.addresseeInfo.contact) return i("联系电话过长或为空！"), !1;
                    if (l.form.addresseeInfo.recipient.length > 100 || !l.form.addresseeInfo.recipient) return i("收件人过长或为空！"), !1;
                    if (l.form.addresseeInfo.address.length > 200 || !l.form.addresseeInfo.address) return i("收件地址过长或为空！"), !1
                }
                for (var a = n("filter")(l.orderInfo.list, {select: !0}), r = [], o = 0, s = a.length; o < s; o++) r.push(a[o].order_id);
                var c = {
                    rtype: l.form.invoiceType,
                    order_ids: r.join(","),
                    title: l.form.invoiceInfo.title,
                    tax_no: l.form.invoiceInfo.identifier,
                    remark: l.form.invoiceInfo.remark
                };
                1 == l.form.invoiceType ? c.contact = l.form.addresseeInfo.email : (c.contact = l.form.addresseeInfo.contact, c.address = l.form.addresseeInfo.address, c.recipient = l.form.addresseeInfo.recipient), t.pay.personalInvoice(c).then(function (e) {
                    0 == e.status && l.changeStep("success")
                })
            }

            var l = this;
            l.form = {
                invoiceType: 1,
                invoiceInfo: {header: "", identifier: "", price: 0, remark: ""},
                addresseeInfo: {recipient: "", address: "", contact: "", email: ""}
            }, l.view = {
                currentDialog: "order",
                loading: !1
            }, l.orderInfo = {list: []}, l.changeStep = r, l.submitInvoice = s, l.selectOrder = o, function () {
                l.view.loading = !0, t.pay.personalOrderHistory().then(function (e) {
                    0 == e.status && (l.orderInfo.list = a.extendOrderList(e.result.order_list), angular.forEach(l.orderInfo.list, function (e) {
                        e.receipt_status || 0 == e.cost || (e.select = !0, l.selectOrder(e))
                    })), l.view.loading = !1
                })
            }()
        }

        angular.module("BC.personal").controller("invoiceCtrl", e).filter("canFreePostage", ["$rootScope", function (e) {
            return function (e) {
                return e >= 200 ? "（已免运费）" : "（满200元免运费）"
            }
        }]), e.$inject = ["$scope", "commonService", "errHint", "$filter", "personalService"]
    }()
}, function (e, t, i) {
    i(530).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "invoice_aac605e7.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i, n, a) {
            function r() {
                e.vm.needReflashInvoice && t.pay.personalInvoiceHistory().then(function (t) {
                    e.invoiceHistory = t.result || [], e.vm.needReflashInvoice = !1, angular.forEach(e.invoiceHistory, function (e) {
                        e.ctime = +new Date(e.ctime), e.orders = a.extendOrderList(e.orders)
                    })
                })
            }

            function o(t) {
                e.currentInvoice = t, i.open({
                    template: "/static/js/personal/invoice/invoice-detail.html",
                    className: "ngdialog-theme-default invoice-dialog",
                    scope: e
                })
            }

            function s() {
                e.vm.showInvoiceHistory = !1, e.vm.needReflashInvoice = !0
            }

            e.memberOrderHistory = {
                vipLevel: n.memberData.vipLevel,
                vipDeadline: n.memberData.vipDeadline,
                orderList: void 0
            }, e.vm = {
                showInvoiceHistory: !1,
                orderLoading: !1,
                needReflashInvoice: !0,
                canApplyInvoice: !1
            }, e.getInvoiceHistory = r, e.showInvoiceDetail = o, e.applyInvoice = s, function () {
                e.vm.orderLoading = !0, t.pay.personalOrderHistory().then(function (t) {
                    0 == t.status && (e.memberOrderHistory.orderList = a.extendOrderList(t.result.order_list), e.memberOrderHistory.vipLevel = t.result.cur_vip_info.vip_level, e.memberOrderHistory.vipDeadline = t.result.cur_vip_info.vip_deadline, e.vm.canApplyInvoice = _(e.memberOrderHistory.orderList).filter(function (e) {
                        return e.cost > 0
                    }).take(2).value().length), e.vm.orderLoading = !1
                }), e.getInvoiceHistory()
            }()
        }

        angular.module("BC.personal").controller("memberInfoCtrl", e), e.$inject = ["$scope", "commonService", "ngDialog", "$rootScope", "personalService"]
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t, i, n, r) {
            return {
                scope: !0,
                restrict: "E",
                template: '\n\t\t\t\t<div class="personal-help" click-outside="view.showHelpList = false;" outside-active="view.showHelpList" ng-if="enterprise_type == 3">\n\t\t\t\t\t<div class="btn-help" ng-click="toggleHelpList()" ng-class="{\'has-unread\':log_unread}"><i class="bdp-icon ico-help-white"></i></div>\n\t\t\t\t\t<div class="tooltip-help">\n\t\t\t\t\t\t帮助与咨询\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="help-list dropdown-wrap" ng-show="view.showHelpList">\n\t\t\t\t\t\t<li class="dropdown-item" ng-click="helpLog(\'新手引导\');" novice-guide>新手引导</li>\n\t\t\t\t\t\t<li class="dropdown-item" ng-click="helpLog(\'用户社区\');"><a class="display-block" target="_blank" href="https://bbs.bdp.cn/portal.php">用户社区</a></li>\n\t\t\t\t\t\t<li class="dropdown-item" ng-click="helpLog(\'教学视频\');"><a class="display-block" target="_blank" href="/instructional_video.html">教学视频</a></li>\n\t\t\t\t\t\t<li class="dropdown-item" ng-click="helpLog(\'帮助中心\');"><a class="display-block" target="_blank" href="https://book.bdp.cn">帮助中心</a></li>\n\t\t\t\t\t\t<li class="dropdown-item" ng-click="helpLog(\'更新日志\');readNewFeatures()" ng-class="{\'has-unread\':log_unread}" ng-if="permision.newFeatures"><a class="display-block" target="_blank" href="/update.html">产品更新日志</a></li>\n\t\t\t\t\t\t<li class="divider" ng-if="meiqiaInitSuccess"></li>\n\t\t\t\t\t\t<!-- <li class="dropdown-item" ng-click="helpLog(\'人工客服\');showMeiqia()" ng-if="meiqiaInitSuccess">人工客服</li> -->\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t',
                replace: !0,
                link: function (t, o, s, l) {
                    !function () {
                        t.view = {showHelpList: !1}, t.meiqiaInitSuccess = !1, t.log_unread = !1, e.load().then(function () {
                            t.meiqiaInitSuccess = !0
                        }), i(function () {
                            e.checkUnread().then(function (e) {
                                t.log_unread = e
                            })
                        }, 1e3)
                    }(), t.showMeiqia = function () {
                        _MEIQIA("showPanel")
                    }, t.readNewFeatures = function () {
                        n.user.readNewFeatures().then(function (e) {
                            0 == e.status && (t.log_unread = !1)
                        })
                    }, t.helpLog = function (e) {
                        BDPLogger.log("personal_help", {
                            category: "user_interact",
                            action: "click",
                            opt_label: (0, a.default)({btn_val: e, vip_level: r.memberData.vipLevel})
                        })
                    }, t.toggleHelpList = function () {
                        t.view.showHelpList = !t.view.showHelpList, t.view.showHelpList && BDPLogger.log("personal_help", {
                            category: "user_interact",
                            action: "click",
                            opt_label: (0, a.default)({btn_val: "帮助按钮", vip_level: r.memberData.vipLevel})
                        })
                    }
                }
            }
        }

        function t(e, t, i) {
            function n() {
                var i = t.defer();
                return e.get().then(function (e) {
                    var t = e.result;
                    3 == +t.enterprise_type && t.personal_info.vip_level > 0 && (!function (e, t, i, n, a, r, o) {
                        e[a] = e[a] || function () {
                            (e[a].a = e[a].a || []).push(arguments)
                        }, r = t.createElement(i), o = t.getElementsByTagName(i)[0], r.async = !0, r.charset = "UTF-8", r.src = "//static.meiqia.com/dist/meiqia.js?v=" + (new Date).getUTCDate(), o.parentNode.insertBefore(r, o)
                    }(window, document, "script", 0, "_MEIQIA"), _MEIQIA("entId", 26073), _MEIQIA("withoutBtn"), _MEIQIA("allSet", function () {
                        i.resolve()
                    }))
                }), i.promise
            }

            function a() {
                var n = t.defer();
                return e.get().then(function (e) {
                    var t = e.result;
                    0 != +t.enterprise_type && 3 != +t.enterprise_type || i.user.unreadNewFeatures().then(function (e) {
                        0 == e.status && n.resolve(0 === e.result.status)
                    })
                }), n.promise
            }

            this.load = n, this.checkUnread = a
        }

        e.$inject = ["meiqiaService", "logService", "$timeout", "commonService", "$rootScope"], t.$inject = ["userInfoService", "$q", "commonService"], i(533), angular.module("BC.personal").directive("personalHelper", e).service("meiqiaService", t)
    }()
}, function (e, t, i) {
    i(534).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "user-helper_a79fcaca.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.personal").directive("noviceCoupon", ["ngDialog", "$rootScope", function (e, t) {
            return {
                restrict: "A", replace: !1, scope: !0, link: function (t, i, n) {
                    i.on("click.noviceCoupon", function (t) {
                        t.preventDefault(), e.open({
                            template: "/static/js/personal/coupon-guide/coupon-info.html",
                            className: "ngdialog-theme-default coupon-guide"
                        })
                    })
                }
            }
        }]).controller("couponCtr", ["$scope", "$rootScope", "commonService", "$http", function (e, t, i, n) {
            var a = this;
            a.couponList = {}, a.available = 1, a.use = 0, a.overdue = 0, function () {
                i.user.personalConpon().then(function (e) {
                    0 == e.status && (a.couponList.available = _.filter(e.result, {status: 0}), a.couponList.use = _.filter(e.result, {status: 1}), a.couponList.overdue = _.filter(e.result, {status: 2}))
                })
            }(), a.couponAvailable = function () {
                a.available || (a.available = a.available ? a.available = 0 : a.available = 1, a.use = 0, a.overdue = 0)
            }, a.couponUse = function () {
                a.use || (a.use = a.use ? a.use = 0 : a.use = 1, a.available = 0, a.overdue = 0)
            }, a.couponOverdue = function () {
                a.overdue || (a.overdue = a.overdue ? a.overdue = 0 : a.overdue = 1, a.use = 0, a.available = 0)
            }
        }])
    }()
}, function (e, t, i) {
    i(537).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "coupon-info_80c66248.css"
}, function (e, t, i) {
    i(539).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "package_414bc3a6.css"
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, i) {
            function n(i) {
                var n = +new Date("2017/11/08 00:00:00"), a = +new Date("2017/11/14 22:00:00"), r = +new Date;
                if (r < a && r > n && (t.personalInfo.activity11 = !0, i)) {
                    t.personalInfo.new_version = !0;
                    $("body").append(e("<div personal-broadcast ng-if='personalInfo.new_version'></div>")(t))
                }
            }

            function a(e) {
                return angular.forEach(e.extra_capacity, function (t) {
                    e.capacity_info.capacity += t.obj_value
                }), e.capacity_info
            }

            function r(e) {
                return angular.forEach(e.extra_capacity, function (t) {
                    e.capacity_info.capacity += t.obj_value
                }), angular.forEach(e.extra_api, function (t) {
                    e.ds_num += t.obj_value
                }), e
            }

            function o(e) {
                return angular.forEach(e, function (e) {
                    var t = {
                        $buyTime: i("date")(e.pay_time, "yyyy年MM月dd日"),
                        $costText: 0 == e.cost ? "系统赠送" : e.cost / 100 + "元",
                        cost: e.cost / 100
                    }, n = 2 == e.vip_level ? "金钻" : "银钻";
                    switch (e.order_type) {
                        case 11:
                            t.$product = n + i("formatStorageAccount")(e.extra.capacity).replace(/ /g, "") + "容量", t.$duration = parseInt(+e.extra.duration / 30) + "月";
                            break;
                        case 12:
                            t.$product = e.extra.title, t.$duration = "1年";
                            break;
                        case 1:
                            t.$product = n + "会员", t.$duration = 0 == e.vip_duration ? e.bonus_days + "天" : e.vip_duration + "个月"
                    }
                    $.extend(!0, e, t)
                }), e
            }

            this.setBroadcast = n, this.getCapacityInfo = a, this.getPersonalInfoModel = r, this.extendOrderList = o
        }

        e.$inject = ["$compile", "$rootScope", "$filter"], angular.module("BC.personal").service("personalService", e)
    }()
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.guide", []), a = function (e) {
            var t = i(85)(i.p + "8080b7039ffb.css");
            i.e(13).then(function (n) {
                var a = [];
                return a.push(i(858)), t ? t(function () {
                    e(a)
                }) : e(a)
            }.bind(null, i)).catch(i.oe)
        },
        r = [i(542), i(545), i(546), i(547), i(548), i(549), i(550), i(551), i(554), i(555), i(556), i(557), i(560), i(561), i(562), i(565), i(566), i(567), i(568), i(569), i(570)],
        o = i(571)(r);
    i(572)(n, o.guideKeyList, o.services), i(573)(n, o), i(574), i(575);
    var s = {};
    e.exports = {name: n.name, routes: s, requires: a}
}, function (e, t, i) {
    "use strict";

    function n(e, t, i, n, a) {
        "ngInject";
        return {
            copy: function () {
                return e.getSyncApi("copyDashTplGuide").then(function (r) {
                    if (!r || 3 != n.enterprise_type) return i.reject();
                    var o = {copySuccess: !1, isNewUser: n.noviceGuide};
                    t.guide.getDashDemo().then(function (t) {
                        return 0 == t.status ? (o.copySuccess = !0, e.setApi("copyDashTplGuide", 0), t) : (a.close(s), i.reject(t))
                    });
                    var s = a.open({
                        template: "/static/js/user-guide/copyDashTplGuide/copy-dash-tpl.html",
                        className: "ngdialog-theme-default ngDialog-width-640",
                        data: o,
                        showClose: !1,
                        disableAnimation: !0
                    })
                })
            }
        }
    }

    n.$inject = ["guideApi", "commonService", "$q", "$rootScope", "ngDialog"], e.exports = {
        key: "copyDashTplGuide",
        service: n,
        type: 1,
        closeVal: 0,
        initVal: 1
    }, i(543)
}, function (e, t, i) {
    i(544).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "copyDashTplGuide_d6ec9012.css"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        "ngInject";
        return {
            tipsText: "引导视频在此，您可以点击查看哦~", callback: function () {
                e.setApi("noviceCloseGuide", 0)
            }, direction: "bottom"
        }
    }

    n.$inject = ["guideApi"], e.exports = {key: "noviceCloseGuide", service: n, type: 1, closeVal: 0, initVal: 1}
}, function (e, t, i) {
    "use strict";
    e.exports = {key: "__cell_layer_guide__", type: 2, closeVal: 0, initVal: 1}
}, function (e, t, i) {
    "use strict";
    e.exports = {key: "__width_change_guide__", type: 2, closeVal: 0, initVal: 1}
}, function (e, t, i) {
    "use strict";
    e.exports = {key: "__wordwrap_guide__", type: 2, closeVal: 0, initVal: 1}
}, function (e, t, i) {
    "use strict";
    e.exports = {key: "ds_limit_tip", type: 2, closeVal: 0, initVal: 0}
}, function (e, t, i) {
    "use strict";
    e.exports = {key: "tableCopyGuide", type: 2, closeVal: 0, initVal: 1}
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            tipsText: "en" == $.cookie("locale") ? '<div class="guide-new-custom-chart"><p class="guide-tip-title">New custom chart</p><p>support chart and table design, and rich visualization.</p></div>' : '<div class="guide-new-custom-chart"><p class="guide-tip-title">新增自定义图表</p><p>自定义图表开放了图表编辑能力，支持自主设计图表及表格拼接，丰富数据展现形式。</p></div>',
            callback: function () {
                e.setApi("newCustomChartGuide", 0)
            },
            custom: !1,
            deviation: {vertical: 1},
            direction: "right",
            tipsDeviation: {vertical: 0, horizontal: 10},
            isfixed: !1,
            className: "dotguidenewCustomChartGuide"
        }
    }

    n.$inject = ["guideApi", "$translate"], e.exports = {
        key: "newCustomChartGuide",
        service: n,
        type: 2,
        closeVal: 0,
        initVal: 1
    }, i(552)
}, function (e, t, i) {
    i(553).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "newCustomChartGuide_42bfbafb.css"
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            tipsText: "丰富高端的可视化效果，操作简单，轻松体验高端图表，还支持自定义开发。", callback: function () {
                e.setApi("customChartStoreGuide", 0)
            }, direction: "bottom"
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "customChartStoreGuide",
        service: n,
        type: 3,
        closeVal: 0,
        initVal: 1,
        startTime: "2017/12/01 09:00:00",
        endTime: "2017/12/31 00:00:00"
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            tipsText: "点击前往“图表库”，添加更多图表类型，返回当前窗口选择工作表开始创建图表。", callback: function () {
                e.setApi("customChartTemplateGuide", 0)
            }, direction: "right", deviation: {vertical: -20, horizontal: 10}, tipsDeviation: {vertical: 30}
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "customChartTemplateGuide",
        service: n,
        type: 3,
        closeVal: 0,
        initVal: 1,
        startTime: "2017/12/01 09:00:00",
        endTime: "2017/12/31 00:00:00"
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            tipsText: "按提示框拖拽对应字段，点右上角“运行”查看效果，部分图表可支持更多效果设置。", callback: function () {
                e.setApi("customChartFieldGuide", 0)
            }, deviation: {vertical: 20, horizontal: 25}, tipsDeviation: {vertical: 80}, direction: "right"
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "customChartFieldGuide",
        service: n,
        type: 2,
        closeVal: 0,
        initVal: 1,
        startTime: "2017/12/01 09:00:00",
        endTime: "2017/12/31 00:00:00"
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        this.open = function () {
            e.getSyncApi("custom1step").then(function (i) {
                i && t.open({
                    template: "/static/js/user-guide/storeCustomGuide/custom1step.html",
                    className: "ngdialog-theme-default custom1step-dialog custom1step-dialog",
                    showClose: !1,
                    controller: ["$scope", function (t) {
                        t.coseStep1Dialog = function () {
                            e.setApi("custom1step", 0)
                        }
                    }]
                })
            })
        }
    }

    n.$inject = ["guideApi", "ngDialog"], e.exports = {
        key: "custom1step",
        service: n,
        type: 3,
        closeVal: 0,
        initVal: 1,
        startTime: "2017/12/01 09:00:00",
        endTime: "2017/12/31 00:00:00"
    }, i(558)
}, function (e, t, i) {
    i(559).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "custom1step_98633f06.css"
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            tipsText: "立即新建自定义图表，体验最酷炫的可视化效果。", callback: function () {
                e.setApi("btnNewChartGuide", 0)
            }, direction: "bottom"
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "btnNewChartGuide",
        service: n,
        type: 3,
        closeVal: 0,
        initVal: 1,
        startTime: "2017/12/01 09:00:00",
        endTime: "2017/12/31 00:00:00"
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t, i) {
        "ngInject";
        return {
            tipsText: i.instant("chart.saveColWidthBtnTip"), callback: function () {
                e.setApi("tableGuideDashColWidthChange", 0)
            }, direction: "bottom"
        }
    }

    n.$inject = ["guideApi", "$rootScope", "$translate"], e.exports = {
        key: "tableGuideDashColWidthChange",
        service: n,
        type: 2,
        closeVal: 0,
        initVal: 1
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            template: '<div class="chart-args-guide chart-args-main-guide triangle">        <span class="triangle-up"></span>        <div class="video J_chart_args_guide_video">            <div class="video-bg J_mask_bg">                <div class="mask"></div>                <span class="tip">视频实例讲解</span>                <a class="play"><span></span></a>            </div>        </div>        <div class="desc">您可以创建参数并在计算字段中使用，通过在仪表盘灵活调整参数，实现计算字段甚至整个图表的动态方案。</div>        <a class="close J-dot-i-kone"><i class="bdp-icon ico-close-white"></i></a>        </div>',
            callback: function () {
                e.setApi("chartArgsMainGuide", 0)
            },
            readyCb: function (t) {
                $(".play").hover(function () {
                    $(".J_mask_bg").find(".mask").show(), $(".J_mask_bg").find(".tip").show()
                }, function () {
                    $(".J_mask_bg").find(".mask").hide(), $(".J_mask_bg").find(".tip").hide()
                }), $(".play").click(function () {
                    $(document.body).append('<div class="chart-args-video-wrap"><video width = "90%" autoplay = "autoplay" loop = "loop" style = "object-fit: fill"  controls="controls">                <source src="/pmresources/dotGuideVideo/chart-args-guide.mp4" type="video/mp4" />                </video>                <a class="close J-dot-i-kone"><i class="bdp-icon ico-close-white"></i></a>                </div>'), $(".J-dot-i-kone").click(function () {
                        $(".chart-args-video-wrap").remove(), e.setApi("chartArgsMainGuide", 0)
                    })
                })
            },
            direction: "bottom",
            deviation: {vertical: 12, horizontal: 160},
            isfixed: !0,
            scrollParnet: ".J_chart_left"
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "chartArgsMainGuide",
        service: n,
        type: 3,
        closeVal: 0,
        initVal: 1,
        endTime: "2018/01/26 00:00:00"
    }, i(563)
}, function (e, t, i) {
    i(564).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "index_29d78d05.css"
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            template: '<div class="chart-args-guide chart-args-set-default-guide triangle">        <div class="circle-group J-circle-group">            <div class="circle4"></div>            <div class="circle3"></div>            <div class="circle2"></div>            <div class="circle1"></div>        </div>        <div class="left"></div>        <div class="right">        <p>您可以在任意可选项的下拉菜单中设置默认值。</p>        <div class="i-know"><a class="close i-know-button J-dot-i-kone">我知道了</a></div>        </div>        </div>',
            callback: function () {
                e.setApi("chartArgsSetDefaultGuide", 0)
            },
            direction: "right",
            isfixed: !0
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "chartArgsSetDefaultGuide",
        service: n,
        type: 2,
        closeVal: 0,
        initVal: 1
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            template: '<div class="chart-args-guide chart-args-use-guide triangle">        <div class="circle-group J-circle-group">            <div class="circle4"></div>            <div class="circle3"></div>            <div class="circle2"></div>            <div class="circle1"></div>        </div>        <p>您刚刚创建了一个参数，现在可以尝试在计算字段里使用它。</p>        <div class="i-know"><a class="close i-know-button J-dot-i-kone">我知道了</a></div>        </div>',
            callback: function () {
                e.setApi("chartArgsUseGuide", 0)
            },
            direction: "right",
            isfixed: !0
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "chartArgsUseGuide",
        service: n,
        type: 2,
        closeVal: 0,
        initVal: 1
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            template: '<div class="chart-args-guide chart-args-edit-inner-guide triangle">        <div class="circle-group J-circle-group">            <div class="circle4"></div>            <div class="circle3"></div>            <div class="circle2"></div>            <div class="circle1"></div>        </div>        <p>您可以在这里调整图内参数，或点击右上角的编辑按钮设置哪些参数可以在仪表盘调整。</p>        <div class="i-know"><a class="close i-know-button J-dot-i-kone">我知道了</a></div>        </div>',
            callback: function () {
                e.setApi("chartArgsEditInnerGuide", 0)
            },
            direction: "top",
            isfixed: !0,
            scrollParnet: ".J-chart-right",
            deviation: {vertical: -30, horizontal: -16}
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "chartArgsEditInnerGuide",
        service: n,
        type: 2,
        closeVal: 0,
        initVal: 1
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            template: '<div class="chart-args-guide chart-args-new-field-guide triangle">        <div class="circle-group J-circle-group">            <div class="circle4"></div>            <div class="circle3"></div>            <div class="circle2"></div>            <div class="circle1"></div>        </div>        <p>您可以在这里查看可用的参数，并通过点击某个参数将其添加到计算字段里。</p>        <div class="i-know"><a class="close i-know-button J-dot-i-kone">我知道了</a></div>        </div>',
            callback: function () {
                e.setApi("chartArgsNewField", 0)
            },
            direction: "right",
            deviation: {vertical: 0, horizontal: 50}
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "chartArgsNewField",
        service: n,
        type: 2,
        closeVal: 0,
        initVal: 1
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        return {
            template: '<div class="chart-args-guide chart-args-dashboard-guide triangle">        <div class="circle-group J-circle-group">            <div class="circle4"></div>            <div class="circle3"></div>            <div class="circle2"></div>            <div class="circle1"></div>        </div>        <p>您可以在这里通过调整图内参数，得到动态的计算结果。</p>        <div class="i-know"><a class="close i-know-button J-dot-i-kone">我知道了</a></div>        </div>',
            callback: function () {
                e.setApi("chartArgsDashboard", 0)
            },
            className: "chart-args-dashboard-guide-wrap",
            direction: "bottom",
            deviation: {vertical: 0, horizontal: 0}
        }
    }

    n.$inject = ["guideApi", "$rootScope"], e.exports = {
        key: "chartArgsDashboard",
        service: n,
        type: 2,
        closeVal: 0,
        initVal: 1
    }
}, function (e, t, i) {
    "use strict";
    e.exports = {key: "chartArgsNew", type: 2, closeVal: 0, initVal: 1}
}, function (e, t, i) {
    "use strict";
    e.exports = function (e) {
        function t(e) {
            var t = e.initVal;
            if (3 == e.type) {
                var i = +new Date, n = e.startTime ? +new Date(e.startTime) : i, a = +new Date(e.endTime);
                (i < n || i > a) && (t = e.closeVal)
            }
            return {val: t, startTime: n, type: e.type, endTime: a}
        }

        function i(e) {
            for (var t = {}, i = [], n = [], a = e.length - 1; a >= 0; a--) t[e[a]] = t[e[a]] ? t[e[a]] + 1 : 1;
            return angular.forEach(t, function (e, t) {
                if (e > 1) {
                    var a = {};
                    a[t] = e, i.push(a)
                }
                n.push(t)
            }), {repeatList: i, result: n}
        }

        var n = e, a = [], r = [], o = {}, s = {}, l = [];
        angular.forEach(n, function (e) {
            a.concat(e.ngDependencies), r.push(e.key), o[e.key] = e.closeVal, s[e.key] = t(e), l.push({
                key: e.key,
                val: e.service || function () {
                }
            })
        });
        var c = i(r);
        return a = i(a).result, {ngDependencies: a, services: l, guideApi: o, guideApiLater: s, guideKeyList: c.result}
    }
}, function (e, t, i) {
    "use strict";
    e.exports = function (e, t, i) {
        function n() {
            for (var e = {}, i = 0; i < t.length; i++) e[t[i]] = arguments[i];
            $.extend(!0, this, arguments[i]), this.getService = function (t) {
                return t ? e[t] : e
            }, window.bdpGuide = this
        }

        var a = t.slice(0);
        a.push("guideApi"), a.push(n), angular.forEach(i, function (t, i) {
            if ("function" != typeof t.val) throw"services 必须是函数";
            e.service(t.key, t.val)
        }), e.service("guideService", a)
    }
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        e.exports = function (e, t) {
            function i(e, i, n, r, o) {
                function s(e, i) {
                    var n = {};
                    return i = +new Date(i), angular.forEach(u, function (a, r) {
                        var o = t.guideApiLater[r];
                        void 0 !== e[r] ? u[r] = e[r] : (3 != o.type || isNaN(i) || i <= o.startTime) && u[r] != o.val && (u[r] = o.val, n[r] = o.val)
                    }), !$.isEmptyObject(n) && BDPLogger.log("guide_api_init", {
                        category: "user_interact",
                        action: "guide",
                        opt_label: (0, a.default)({show_list: n, user_id: o.user_id, time: +new Date})
                    }), p.resolve(u), p.promise
                }

                function l(t, i, n) {
                    u[t] = i;
                    var a = {new_guide: angular.toJson(u)};
                    return e.guide.guideSet(a).then(function () {
                        n && n()
                    }), i
                }

                function c(e) {
                    return e ? u[e] : u
                }

                function d(e) {
                    return r.when(p.promise, function () {
                        return c(e)
                    })
                }

                var u = t.guideApi, p = r.defer();
                this.setApi = l, this.getApi = c, this.getSyncApi = d, this.initApi = s
            }

            i.$inject = ["commonService", "$translate", "userInfoService", "$q", "$rootScope"], e.service("guideApi", i)
        }
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        angular.module("BC.guide").directive("gisEditGuide", ["$rootScope", "$timeout", "$translate", function (e, t, i) {
            return {
                restrict: "A", replace: !1, scope: {veilEle: "@", stepNum: "="}, link: function (n, a, r) {
                    function o() {
                        window.bdpGuideVeil.remove(), e.gisEditGuide += 1, e.$$phase || e.$apply()
                    }

                    var s = [{
                        deviation: {top: -2, right: 2, bottom: 2, left: -2},
                        tipsOptions: {
                            tipsText: i.instant("chart.modifyWorksheetTip"),
                            direction: "bottom",
                            tipsDeviation: -12,
                            callback: o
                        }
                    }, {
                        deviation: {top: 0, right: 48, bottom: 0, left: 0},
                        tipsOptions: {tipsText: i.instant("chart.trajctoryLayerTip"), callback: o}
                    }, {
                        deviation: {top: 10, right: -10, bottom: -10, left: -10},
                        tipsOptions: {
                            tipsText: i.instant("chart.timeAnimationTip"),
                            direction: "bottom",
                            tipsDeviation: 135,
                            callback: o
                        }
                    }], l = s[n.stepNum];
                    t(function () {
                        window.bdpGuideVeil.creatVeil({
                            element: n.veilEle,
                            mask: !0,
                            deviation: l.deviation
                        }).creatTips(l.tipsOptions), $("." + n.veilEle).one("click.gisEditGuide", function (e) {
                            n.nextStep()
                        })
                    }, 0, !1), n.$on("$destroy", function () {
                        window.bdpGuideVeil.remove()
                    }), n.nextStep = o
                }
            }
        }]).directive("maskGuide", ["$rootScope", "guideService", "$translate", "$timeout", "$parse", function (e, t, i, n, r) {
            return {
                restrict: "A", replace: !1, scope: !0, link: function (o, s, l) {
                    function c(t, i) {
                        1 == t ? n(function () {
                            var t = d(g, h);
                            window.bdpGuideVeil.creatVeil(t.Veil).creatTips(t.tooltip), BDPLogger.log("guide_show", {
                                category: "user_interact",
                                action: "guide",
                                opt_label: (0, a.default)({key: g, user_id: e.user_id, time: +new Date})
                            })
                        }, 0, !1) : window.bdpGuideVeil.remove()
                    }

                    function d(t, i) {
                        var n = angular.copy(r(t)(i));
                        n.Veil.element = u(s, n.Veil.element);
                        var l = n.tooltip.callback;
                        return n.tooltip.callback = function () {
                            window.bdpGuideVeil.remove(), m && m(), l && l(), e.$$phase || (e.$apply(), o.$digest()), BDPLogger.log("guide_close", {
                                category: "user_interact",
                                action: "guide",
                                opt_label: (0, a.default)({key: g, user_id: e.user_id, time: +new Date})
                            })
                        }, n.tooltip.tipsText = p(n.tooltip.tipsText), n.tooltip.btnText = p(n.tooltip.btnText), n
                    }

                    function u(e, t) {
                        var i = null;
                        return t ? "[object Array]" === Object.prototype.toString.call(t) ? (i = t, i.push($(e))) : i = [t, $(e)] : i = $(e), i
                    }

                    function p(e) {
                        return "function" == typeof e ? i.instant(e()) : e
                    }

                    var f, h = t.getService(), g = l.maskGuide, m = l.mgClose;
                    t.getSyncApi().then(function (e) {
                        o.guideApi = e, f = o.$watch(l.mgShow, c)
                    }), o.$on("$destroy", function () {
                        window.bdpGuideVeil.remove(), f()
                    })
                }
            }
        }]).directive("flashGuide", ["$rootScope", "guideService", "$timeout", "$translate", "$parse", function (e, t, i, n, r) {
            return {
                restrict: "A", replace: !1, scope: !0, link: function (o, s, l) {
                    function c(t, n) {
                        1 == t ? i(function () {
                            var t = d(g, h);
                            p = window.bdpGuideVeil.creatDotGuide(t), BDPLogger.log("guide_show", {
                                category: "user_interact",
                                action: "guide",
                                opt_label: (0, a.default)({key: g, user_id: e.user_id, time: +new Date})
                            })
                        }, 0, !1) : p && p.remove()
                    }

                    function d(t, i) {
                        var n = angular.copy(r(t)(i)), l = n.callback;
                        return n.callback = function () {
                            m(o) && m(o)(), l && l(), BDPLogger.log("guide_close", {
                                category: "user_interact",
                                action: "guide",
                                opt_label: (0, a.default)({key: g, user_id: e.user_id, time: +new Date})
                            })
                        }, n.element = s, n.tipsText = u(n.tipsText), n.btnText = u(n.btnText), n
                    }

                    function u(e) {
                        return "function" == typeof e ? n.instant(e()) : e
                    }

                    var p, f, h = t.getService(), g = l.flashGuide, m = r(l.fgClose);
                    t.getSyncApi().then(function (e) {
                        o.guideApi = e, f = o.$watch(l.fgShow, c)
                    }), o.$on("$destroy", function () {
                        p && p.remove(), f()
                    })
                }
            }
        }])
    }()
}, function (e, t, i) {
    i(576).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "user-guide_db2fbc39.css"
}, function (e, t, i) {
    "use strict";
    var n = i(37), a = i(393);
    i(269);
    var r = angular.module("BC.dashboard", ["BC.dashboard.core"]);
    i(578);
    var o = function (e) {
        var t = i(85)(i.p + "800ce21ba6e2.css");
        i.e(5).then(function (n) {
            var a = [];
            return a.push(i(859)), a.push(i(860)), a.push(i(393)), a.push(i(861)), a.push(i(862)), a.push(i(863)), a.push(i(864)), a.push(i(865)), a.push(i(866)), a.push(i(867)), a.push(i(868)), a.push(i(869)), a.push(i(870)), a.push(i(871)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    }, s = {
        dash_edit: {
            url: "/dash_edit",
            templateUrl: "/static/dashboard/tpl/project-view.html",
            controller: "ProjectController"
        },
        "dash_edit.dash": {url: "/:projId/:dashId?df_id&range", templateUrl: i(343), controller: "DashController"},
        "dash_edit.rule": {
            url: "/:projId/:dashId/:ruleId?df_id&range",
            templateUrl: i(343),
            controller: "DashController"
        },
        dash_fullscreen: {
            url: "/dash_fullscreen/:projId/:dashId?df_id&range",
            templateUrl: "/static/dashboard/tpl/dash-fullscreen.html",
            controller: "DashController"
        },
        "dash_fullscreen.rule?df_id&range": {
            url: "/:ruleId",
            templateUrl: "/static/dashboard/tpl/dash-fullscreen.html",
            controller: "DashController"
        },
        "dash_edit.adv": {
            url: "/:projId/:dashId/:mode/:category?df_id&range",
            templateUrl: "/static/dashboard/tpl/adv-dashboard.html",
            controller: "advDashboardCtrl"
        },
        "dash_edit.adv_rule": {
            url: "/:projId/:dashId/:ruleId/:mode/:category?df_id&range",
            templateUrl: "/static/dashboard/tpl/adv-dashboard.html",
            controller: "advDashboardCtrl"
        },
        adv_dash_edit: {
            url: "/adv_dash_edit/:projId/:dashId/:mode/:category",
            templateUrl: "/static/dashboard/tpl/adv-dashboard-edit.html",
            controller: "advDashboardCtrl"
        },
        adv_dash_fullscreen: {
            url: "/adv_dash_fullscreen/:projId/:dashId/:mode/:category?df_id&range",
            templateUrl: "/static/dashboard/tpl/adv-dashboard-fullscreen.html",
            controller: "advDashboardCtrl"
        },
        adv_dash_fullscreen_rule: {
            url: "/adv_dash_fullscreen/:projId/:dashId/:ruleId/:mode/:category?df_id&range",
            templateUrl: "/static/dashboard/tpl/adv-dashboard-fullscreen.html",
            controller: "advDashboardCtrl"
        },
        data_screen: {
            url: "/data_screen",
            templateUrl: "/static/dashboard/tpl/project-view.html",
            controller: "ProjectController"
        },
        "data_screen.dash": {
            url: "/:projId/:dashId",
            templateUrl: "/static/dashboard/tpl/data-screen.html",
            controller: "DataScreenCtrl"
        },
        data_screen_edit: {
            url: "/data_screen_edit/:projId/:dashId",
            templateUrl: "/static/dashboard/tpl/data-screen-edit.html",
            controller: "DataScreenCtrl"
        },
        third_iframe: {
            url: "/third_iframe",
            templateUrl: "/static/dashboard/tpl/project-view.html",
            controller: "ProjectController"
        },
        "third_iframe.dash": {url: "/:projId/:dashId", templateUrl: i(343), controller: "DashController"},
        "third_iframe.adv_dash": {
            url: "/:projId/:dashId/:mode/:category",
            templateUrl: "/static/dashboard/tpl/adv-dashboard.html",
            controller: "advDashboardCtrl"
        },
        third_iframe_data_screen: {
            url: "/third_iframe_data_screen",
            templateUrl: "/static/dashboard/tpl/project-view.html",
            controller: "ProjectController"
        },
        "third_iframe_data_screen.dash": {
            url: "/:projId/:dashId",
            templateUrl: "/static/dashboard/tpl/data-screen.html",
            controller: "DataScreenCtrl"
        }
    };
    (0, n.extendNgModule)({
        name: "BC.dashboard",
        service: {SetDashHideService: a.SetDashHideService}
    }), e.exports = {name: r.name, routes: s, requires: o}
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, n, a, r, o) {
            return {
                restrict: "EA",
                templateUrl: i(579),
                scope: {projList: "=", projId: "=", dashId: "=", newDashName: "=", selectItem: "=", moveItem: "="},
                replace: !0,
                link: function (i, s, l) {
                    function c(e) {
                        if (i.foundDashList) return !1;
                        i.projId || (i.projDashData.selectedProjName = g), i.dashList = [];
                        for (var t = [], n = 0, a = e.length; n < a; n++) {
                            var r = e[n];
                            if ("project" === r.attribute) {
                                if (r.proj_id == i.projId) {
                                    i.projDashData.selectedProjName = r.name;
                                    for (var o = 0; o < r.subs.length; o++) "dashboard" === r.subs[o].attribute && t.push(r.subs[o]);
                                    i.dashList = t, i.foundDashList = !0;
                                    break
                                }
                                r.subs && r.subs.length > 0 && c(r.subs)
                            }
                        }
                    }

                    function d(e, t) {
                        i.projDashData.selectFolder = null, i.projDashData.showDropdown = !1, i.projDashData.selectedProjName = g, i.projId = ""
                    }

                    function u(e) {
                        if (i.projDashData.showDropdown = !1, e.proj_id !== i.projId) {
                            if (i.projDashData.selectedProjName = e.name, i.projId = e.proj_id, i.foundDashList = !1, ["moveDashboard", "moveProject"].indexOf(i.optType) > -1) return void(i.selectItem = e);
                            p(i.projList)
                        }
                    }

                    function p(e) {
                        if (i.foundDashList) return !1;
                        i.dashList = [];
                        for (var t = 0, n = e.length; t < n; t++) {
                            var a = e[t];
                            if (a.proj_id == i.projId) return (a.subs || []).map(function (e) {
                                "dashboard" == e.attribute && i.dashList.push(e)
                            }), i.projDashData.selectedDashName = i.dashList.length ? i.dashList[0].name : h, ["copyChart", "moveChart"].indexOf(i.optType) > -1 && (i.dashId = i.dashList.length ? i.dashList[0].dsh_id : ""), i.foundDashList = !0, !1;
                            a.subs && a.subs.length > 0 && p(a.subs)
                        }
                    }

                    r(["dash.projectNameRequired", "dash.duplicateProjectName", "pleaseSelect", "dash.dashNameRequired", "dash.dashNameLessThan100", "dash.duplicateDashName", "dash.pleaseSelectProj", "dash.rootFolder"], i);
                    var f = e.language || "zh", h = "zh" == f ? "请选择" : "Please select",
                        g = "zh" == f ? "根目录" : "Root Folder";
                    i.dashList = [], i.requestDone = !0, i.optType = l.optType, i.root = {}, i.projDashData = {
                        showDropdown: !1,
                        showDashList: !1,
                        selectedProjName: g,
                        selectFolder: null,
                        selectedDashName: h || ""
                    };
                    var m = o.path(), v = m.indexOf("data_screen") > -1 ? 1 : null;
                    i.treeSelectParent = d, i.selectProjItem = u, i.nodeCollapseHandle = function (e, t) {
                        e && e.stopPropagation(), t.nodeCollapse = !t.nodeCollapse
                    }, i.init = function () {
                        if (i.foundDashList = !1, c(i.projList), ["copyChart", "moveChart"].indexOf(i.optType) > -1) for (var e = 0, t = i.dashList.length; e < t; e++) i.dashList[e].dsh_id == i.dashId && (i.projDashData.selectedDashName = i.dashList[e].name)
                    }, i.init(), i.selectDashItem = function (e, t) {
                        i.projDashData.selectedDashName = t, i.dashId = e, i.projDashData.showDashList = !1
                    }, i.createNewProj = function () {
                        i.projDashData.showDropdown = !1, i.projDashData.showDashList = !1, i.newProjDialog = a.open({
                            template: "/static/partials/directiveTemplates/selectProjDashInfo.html",
                            className: "ngdialog-theme-default ngDialog-width-360",
                            scope: i,
                            data: {type: "proj", name: "", save: i.saveNewProj}
                        })
                    }, i.createNewDash = function () {
                        if (!i.projId) return void n(i.tips["dash.pleaseSelectProj"]);
                        i.projDashData.showDropdown = !1, i.projDashData.showDashList = !1, i.newDashDialog = a.open({
                            template: "/static/partials/directiveTemplates/selectProjDashInfo.html",
                            className: "ngdialog-theme-default ngDialog-width-360",
                            scope: i,
                            data: {type: "dash", name: "", save: i.saveNewDash}
                        })
                    }, i.saveNewProj = function (e) {
                        if (i.requestDone) {
                            if (void 0 == e || "" === e) return void n(i.tips["dash.projectNameRequired"]);
                            i.requestDone = !1, t.project.create({name: e, category: v}).then(function (t) {
                                if (i.requestDone = !0, "0" == t.status) {
                                    var a = {proj_id: t.result.proj_id, name: e, dsh_list: [], type: 0, property: 0};
                                    i.$emit("updateProjTree", a), i.projDashData.selectedProjName = e, i.projId = t.result.proj_id, ["copyChart", "moveChart"].indexOf(i.optType) > -1 && (i.dashList = [], i.dashId = "", i.projDashData.selectedDashName = h), i.newProjDialog.close()
                                } else n(Number(t.status))
                            })
                        }
                    }, i.saveNewDash = function (e) {
                        if (i.requestDone) {
                            if ("" === e) return void n(i.tips["dash.dashNameRequired"]);
                            if (e.length > 100) return void n(i.tips["dash.dashNameLessThan100"]);
                            for (var a = null, r = i.projList, o = 0; o < r.length; o++) if (r[o].proj_id == i.projId) {
                                a = r[o];
                                break
                            }
                            a || (a = i.projList[0]);
                            for (var s = a.subs, l = 0, c = s.length; l < c; l++) if (s[l].name == e) return void n(i.tips["dash.duplicateDashName"]);
                            var d = {name: e, proj_id: i.projId};
                            i.requestDone = !1, t.dashboard.create(d).then(function (t) {
                                i.requestDone = !0, "0" == t.status ? (s.push({
                                    dsh_id: t.result.dsh_id,
                                    name: e,
                                    label: "",
                                    comment: "",
                                    outer_share_id: "",
                                    property: 0
                                }), i.dashList = s, i.dashId = t.result.dsh_id, i.projDashData.selectedDashName = e, i.newDashDialog.close()) : n(Number(t.status))
                            })
                        }
                    }
                }
            }
        }

        angular.module("BC.dashboard").directive("selectProjDash", e), e.$inject = ["$rootScope", "commonService", "errHint", "ngDialog", "$jsTipTranslate", "$location"]
    }()
}, function (e, t) {
    e.exports = "/dist/static/dashboard/select-proj-dash/select-proj-dash.html"
}, function (e, t, i) {
    "use strict";
    var n = i(37), a = i(581), r = i(586), o = i(589), s = angular.module("BC.template", []), l = function (e) {
        var t = i(85)(i.p + "0571e60d1125.css");
        i.e(6).then(function (n) {
            var a = [];
            return a.push(i(872)), a.push(i(873)), a.push(i(874)), a.push(i(875)), a.push(i(876)), a.push(i(877)), a.push(i(878)), a.push(i(879)), a.push(i(880)), a.push(i(881)), a.push(i(882)), a.push(i(883)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    }, c = {
        template_home: {
            url: "/template_home",
            templateUrl: "/static/template/view/template_home.html",
            controller: "templateHomeController"
        },
        tmplate_config: {
            url: "/template_config",
            templateUrl: "/static/template/view/template_config.html",
            controller: "templateConfigController"
        },
        template_rule: {
            url: "/template_rule",
            templateUrl: "/static/template/view/template_rule.html",
            controller: "templateRuleCtrl"
        },
        template_rule_modify: {
            url: "/template_rule_modify/:module",
            templateUrl: "/static/template/view/template_rule_modify.html",
            controller: "templateRuleModifyCtrl"
        },
        template_rule_batch_set: {
            url: "/template_rule_batch_set",
            templateUrl: "/static/template/view/template-rule-batch-set.html",
            controller: "templateRuleBatchSetCtrl"
        }
    };
    (0, n.extendNgModule)({
        name: "BC.template",
        controller: {selectTplDialogCtrl: r.selectTplDialogCtrl},
        directive: {
            selectTplAllotComponent: a.selectTplAllotComponent,
            selectUserGroupAllotComponent: o.selectUserGroupAllotComponent
        }
    }), e.exports = {name: s.name, routes: c, requires: l}
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.selectTplAllotComponent = void 0;
    var a, r, o = i(64), s = n(o), l = i(65), c = n(l), d = i(13), u = n(d), p = i(17), f = n(p), h = i(37);
    i(582);
    var g = t.selectTplAllotComponent = (a = (0, h.ngComponent)(function () {
        "ngInject";
        return {
            scope: {mode: "=", options: "=", selectedTpls: "=", changeCallback: "&"},
            controller: g,
            controllerAs: "selectTplAllotCtrl",
            restrict: "E",
            replace: !0,
            transclude: !0,
            templateUrl: i(584),
            link: function (e, t, i, n) {
                function a(t) {
                    e.selectTplAllotCtrl.ngOnInit({options: e.options, selectedTpls: t, callbackFunc: e.changeCallback})
                }

                a([]);
                var r = e.$watch(function () {
                    return e.selectedTpls
                }, function (e) {
                    void 0 != e && e.length && (a(e), r())
                })
            }
        }
    }))(r = function () {
        function e(t, i, n, a) {
            "ngInject";
            (0, u.default)(this, e), this.viewData = {}, this.$scope = t, this.ngDialog = i, this.commonHttp = n, this.$timeout = a
        }

        return e.$inject = ["$scope", "ngDialog", "commonHttp", "$timeout"], (0, f.default)(e, [{
            key: "ngOnInit",
            value: function () {
                function e() {
                    return t.apply(this, arguments)
                }

                var t = (0, c.default)(s.default.mark(function e() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, i = t.options,
                        n = void 0 === i ? {} : i, a = t.selectedTpls, r = void 0 === a ? [] : a, o = t.callbackFunc,
                        l = void 0 === o ? {} : o;
                    return s.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                this.viewData = {
                                    options: n,
                                    selectedTpls: r,
                                    callbackFunc: l
                                }, r && r.length && this.formatTplRelationInfo();
                            case 2:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "selectTplsOkFunc", value: function (e) {
                this.viewData.selectedTpls = e, this.formatTplRelationInfo(), this.viewData.callbackFunc({tpls: e})
            }
        }, {
            key: "delTplsFunc", value: function (e) {
                this.viewData.selectedTpls = e, this.viewData.callbackFunc({tpls: e})
            }
        }, {
            key: "openSelectTpls", value: function () {
                var e = this;
                this.ngDialog.open({
                    template: i(585),
                    className: "ngdialog-theme-default ngDialog-width-640 select-tpl-dialog",
                    data: {selectedTpls: e.viewData.selectedTpls, okCallback: e.selectTplsOkFunc.bind(e)}
                })
            }
        }, {
            key: "formatTplRelationInfo", value: function () {
                var e = this;
                this.$timeout(function () {
                    e.$scope.$broadcast("initTplRelation", {selectedTpls: e.viewData.selectedTpls})
                }, 200)
            }
        }]), e
    }()) || r
}, function (e, t, i) {
    i(583).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "select-tpl-allot.component_81e39700.css"
}, function (e, t) {
    e.exports = "/dist/static/template/select-tpl-allot/select-tpl-allot.component.html"
}, function (e, t) {
    e.exports = "/dist/static/template/select-tpl-dialog/select-tpl-dialog.html"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.selectTplDialogCtrl = void 0;
    var a, r, o = i(332), s = n(o), l = i(13), c = n(l), d = i(17), u = n(d), p = i(394);
    t.selectTplDialogCtrl = (a = (0, p.loadingDuring)("pageLoading"), r = function () {
        function e(t, i, n, a, r, o) {
            "ngInject";
            var s = this;
            (0, c.default)(this, e), this.searchTpls = $.debounce(300, function () {
                s.pageInfo.cur = 1, s.getTplList()
            }), this._PER_PAGE_NUM_ = 28, this.$scope = t, this.$translate = n, this.errHint = i, this.commonHttp = a, this.commonService = r, this.logService = o, this.ngDialogData = this.$scope.ngDialogData, this.ngOnInit()
        }

        return e.$inject = ["$scope", "errHint", "$translate", "commonHttp", "commonService", "logService"], (0, u.default)(e, [{
            key: "ngOnInit",
            value: function () {
                this.pageLoading = !1, this.pageInfo = {
                    cur: 1,
                    total: 0
                }, this.queryTest = "", this.checkNum = 0, this.selectedTpls = this.ngDialogData.selectedTpls, this.tplList = [], this.checkTplIdsMap = {}, this.formatData(), this.getTplList()
            }
        }, {
            key: "formatData", value: function () {
                var e = this;
                this.selectedTpls && this.selectedTpls.length && (_.forEach(this.selectedTpls, function (t) {
                    e.checkTplIdsMap[t.tpl_id] = {tpl_id: t.tpl_id, name: t.name}
                }), this.getTplCheckNum())
            }
        }, {
            key: "getTplList", value: function () {
                var e = this;
                this.logService.speedTimeLog.start("templateRuleModifyGetTplList");
                var t = this.checkTplIdsMap, i = this,
                    n = {keyword: this.queryTest, page_size: this._PER_PAGE_NUM_, page: this.pageInfo.cur};
                return this.commonService.tpl.tplListByPage(n).then(function (n) {
                    0 == n.status && (i.tplList = [], _.forEach(n.result.template_list, function (e) {
                        var n = !!t[e.tpl_id];
                        i.tplList.push({tpl_id: e.tpl_id, name: e.name, check: n})
                    }), e.pageInfo.total = n.result.total_page, i.logService.speedTimeLog.end("templateRuleModifyGetTplList", {page: "template_rule_modify_get_tpl_list"}))
                })
            }
        }, {
            key: "changeTplCheck", value: function (e) {
                e.check ? this.checkTplIdsMap[e.tpl_id] = {
                    tpl_id: e.tpl_id,
                    name: e.name
                } : this.checkTplIdsMap[e.tpl_id] = !1, this.getTplCheckNum()
            }
        }, {
            key: "getTplCheckNum", value: function () {
                this.checkNum = _.filter(this.checkTplIdsMap, function (e) {
                    return e
                }).length
            }
        }, {
            key: "changeTplPage", value: function (e, t, i) {
                this.pageInfo.cur = e, this.getTplList()
            }
        }, {
            key: "saveTplCheck", value: function () {
                if (!this.checkNum) return void this.errHint("请至少选择一个模板");
                var e = [];
                _.forEach(this.checkTplIdsMap, function (t) {
                    t && e.push(t)
                }), this.ngDialogData.okCallback(e), this.$scope.closeThisDialog()
            }
        }]), e
    }(), function (e, t, i, n, a) {
        var r = {};
        return Object.keys(n).forEach(function (e) {
            r[e] = n[e]
        }), r.enumerable = !!r.enumerable, r.configurable = !!r.configurable, ("value" in r || r.initializer) && (r.writable = !0), r = i.slice().reverse().reduce(function (i, n) {
            return n(e, t, i) || i
        }, r), a && void 0 !== r.initializer && (r.value = r.initializer ? r.initializer.call(a) : void 0, r.initializer = void 0), void 0 === r.initializer && (Object.defineProperty(e, t, r), r = null), r
    }(r.prototype, "getTplList", [a], (0, s.default)(r.prototype, "getTplList"), r.prototype), r)
}, function (e, t, i) {
    i(588);
    var n = i(3).Object;
    e.exports = function (e, t) {
        return n.getOwnPropertyDescriptor(e, t)
    }
}, function (e, t, i) {
    var n = i(14), a = i(90).f;
    i(157)("getOwnPropertyDescriptor", function () {
        return function (e, t) {
            return a(n(e), t)
        }
    })
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e, t, i, n, a) {
        var r = {};
        return Object.keys(n).forEach(function (e) {
            r[e] = n[e]
        }), r.enumerable = !!r.enumerable, r.configurable = !!r.configurable, ("value" in r || r.initializer) && (r.writable = !0), r = i.slice().reverse().reduce(function (i, n) {
            return n(e, t, i) || i
        }, r), a && void 0 !== r.initializer && (r.value = r.initializer ? r.initializer.call(a) : void 0, r.initializer = void 0), void 0 === r.initializer && (Object.defineProperty(e, t, r), r = null), r
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.selectUserGroupAllotComponent = void 0;
    var r, o, s, l, c, d = i(332), u = n(d), p = i(64), f = n(p), h = i(65), g = n(h), m = i(13), v = n(m), y = i(17),
        b = n(y), w = i(37), x = i(394);
    i(590);
    var C = t.selectUserGroupAllotComponent = (r = (0, w.ngComponent)(function () {
        "ngInject";
        return {
            scope: {mode: "=", options: "=", saveInfo: "=", modifyInfo: "="},
            controller: C,
            controllerAs: "selectUserGroupAllotCtrl",
            restrict: "E",
            replace: !0,
            transclude: !0,
            templateUrl: i(592),
            link: function (e, t, i, n) {
                e.selectUserGroupAllotCtrl.ngOnInit({options: e.options, mode: ""});
                var a = e.$watch(function () {
                    return e.mode
                }, function (t) {
                    t && (e.selectUserGroupAllotCtrl.ngOnInit({
                        options: e.options,
                        mode: t,
                        saveInfo: e.saveInfo,
                        modifyInfo: e.modifyInfo
                    }), a())
                })
            }
        }
    }), o = (0, x.loadingDuring)("viewData.loading"), s = (0, x.loadingDuring)("viewData.loading"), r((c = function () {
        function e(t, i, n, a, r, o, s, l) {
            "ngInject";
            (0, v.default)(this, e), this.viewData = {}, this.timer = null, this.searchTimeSnap = 0, this._PER_PAGE_NUM_ = 20, this.$scope = t, this.ngDialog = i, this.commonHttp = n, this.commonService = a, this.$timeout = r, this.logService = o, this.pendingRequests = s, this.templateRuleService = l
        }

        return e.$inject = ["$scope", "ngDialog", "commonHttp", "commonService", "$timeout", "logService", "pendingRequests", "templateRuleService"], (0, b.default)(e, [{
            key: "ngOnInit",
            value: function () {
                function e() {
                    return t.apply(this, arguments)
                }

                var t = (0, g.default)(f.default.mark(function e() {
                    var t = this, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                        n = i.options, a = void 0 === n ? {} : n, r = i.mode, o = void 0 === r ? "" : r, s = i.saveInfo,
                        l = void 0 === s ? {} : s, c = i.modifyInfo, d = void 0 === c ? {} : c;
                    return f.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                this.viewData = {
                                    loading: !1,
                                    options: a,
                                    mode: o,
                                    saveInfo: l,
                                    modifyInfo: d,
                                    tab: "user",
                                    showSearch: !1,
                                    userPage: {cur: 1, total: 1},
                                    checkNum: {group: 0, user: 0},
                                    userCheckMap: {},
                                    userList: [],
                                    groupList: [],
                                    queryGroupText: "",
                                    queryUserText: ""
                                }, o && (this.viewData.saveInfo.user = this.viewData.userCheckMap, d.user && _.forEach(d.user, function (e) {
                                    t.viewData.userCheckMap[e] = !0
                                }), this.getCheckNum("user", (d.user || []).length), this.getCheckNum("group", (d.group || []).length), this.getGroupList(), this.getUserList().then(function (e) {
                                    t.afterGetUserList(e)
                                }));
                            case 2:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "getGroupList", value: function () {
                var e = this;
                return this.logService.speedTimeLog.start("templateRuleModifyGetGroupList"), this.commonService.user.groupList().then(function (t) {
                    if (0 == t.status) {
                        var i = t.result;
                        e.viewData.groupList = i, "modify" == e.viewData.mode && e.templateRuleService.matchGroupCheck(e.viewData.groupList, e.viewData.modifyInfo.group), e.viewData.saveInfo.group = e.viewData.groupList, e.logService.speedTimeLog.end("templateRuleModifyGetGroupList", {page: "template_rule_modify_get_group_list"})
                    }
                })
            }
        }, {
            key: "getUserList", value: function () {
                var e = {
                    keyword: this.viewData.queryUserText,
                    page_size: this._PER_PAGE_NUM_,
                    page: this.viewData.userPage.cur
                };
                return this.commonService.account.usersByPage(e).then(function (e) {
                    return 0 == e.status && e.result
                })
            }
        }, {
            key: "afterGetUserList", value: function (e) {
                var t = this;
                e && (this.viewData.userPage.total = e.pages_count, this.viewData.userList = [], _.forEach(e.sub_list, function (e) {
                    var i = !!t.viewData.userCheckMap[e.user_id || e.userid];
                    t.viewData.userList.push({name: e.name, user_id: e.userid, check: i, username: e.username})
                }), this.$scope.$$parse || this.$scope.$digest())
            }
        }, {
            key: "showSearchWrap", value: function () {
                this.viewData.showSearch = !this.viewData.showSearch
            }
        }, {
            key: "hideSearchWrap", value: function () {
                this.viewData.showSearch && ("group" != this.viewData.tab && "user" == this.viewData.tab && this.viewData.queryUserText || (this.viewData.showSearch = !1))
            }
        }, {
            key: "changeUserPage", value: function (e, t, i) {
                var n = this;
                this.viewData.userPage.cur = e, this.getUserList().then(function (e) {
                    n.afterGetUserList(e)
                })
            }
        }, {
            key: "checkUser", value: function (e) {
                this.viewData.userCheckMap[e.user_id] = !!e.check && e, this.viewData.saveInfo.user = this.viewData.userCheckMap, this.getCheckNum("user")
            }
        }, {
            key: "checkGroup", value: function (e) {
                this.getCheckNum("group")
            }
        }, {
            key: "getCheckNum", value: function (e, t) {
                if (void 0 !== t) return void(this.viewData.checkNum[e] = t);
                var i = 0;
                if ("user" == e && _.forEach(this.viewData.userCheckMap, function (e, t) {
                    i = e ? ++i : i
                }), "group" == e) {
                    var n = this.templateRuleService.getGroupsIdsForSave(this.viewData.groupList);
                    i = n.length
                }
                this.viewData.checkNum[e] = i
            }
        }, {
            key: "searchUser", value: function () {
                var e = this;
                clearTimeout(this.timer), this.timer = setTimeout(function () {
                    e.watchUserQuery()
                }, 300)
            }
        }, {
            key: "watchUserQuery", value: function () {
                var e = this, t = this.viewData.queryUserText, i = this;
                if (t) {
                    var n = this.searchTimeSnap = +new Date;
                    !function (e) {
                        i.pendingRequests.cancelOne("/api/sub/list_by_page"), i.getUserList().then(function (t) {
                            e < i.searchTimeSnap || i.afterGetUserList(t)
                        })
                    }(n)
                } else this.viewData.userPage.cur = 1, this.getUserList().then(function (t) {
                    e.afterGetUserList(t)
                });
                this.$scope.$$parse || this.$scope.$digest()
            }
        }]), e
    }(), a(c.prototype, "getGroupList", [o], (0, u.default)(c.prototype, "getGroupList"), c.prototype), a(c.prototype, "getUserList", [s], (0, u.default)(c.prototype, "getUserList"), c.prototype), l = c)) || l)
}, function (e, t, i) {
    i(591).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "select-user-group-allot.component_2c8aedd4.css"
}, function (e, t) {
    e.exports = "/dist/static/template/select-user-group-allot/select-user-group-allot.component.html"
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.author-manage", []), a = function (e) {
        var t = i(85)(i.p + "293fdee1b62e.css");
        i.e(12).then(function (n) {
            var a = [];
            return a.push(i(884)), a.push(i(885)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    }, r = {
        author_manage: {
            url: "/author_manage",
            templateUrl: "/static/author-manage/view/author-manage.html",
            controller: "authorManageCtrl"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.flat-tree-component", []), a = function (e) {
        var t = i(85)();
        new Promise(function (e) {
            e()
        }).then(function (i) {
            var n = [];
            return t ? t(function () {
                e(n)
            }) : e(n)
        }.bind(null, i)).catch(i.oe)
    };
    i(595), i(597), i(598), i(599);
    var r = {};
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    i(596).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "flat-tree-map_83ecb169.css"
}, function (e, t, i) {
    "use strict";
    angular.module("BC.flat-tree-component").factory("flatTreeHandleService", ["$timeout", function (e) {
        function t() {
            A = 0, E = 0, I = [], F = [], O = [], M = []
        }

        function i(e, t) {
            function i(e) {
                e.forEach(function (e) {
                    e.nodeId = e[t.id], e.nodeName = e[t.name], e.nodeLevel = e[t.level], e.nodeChildren = e[t.children] || [], e.nodeChildren.length > 0 && i(e.nodeChildren)
                })
            }

            return i(e), e
        }

        function n(e) {
            function t(e, i, n) {
                e.nodeCanSortUp = i && i.nodeChildren.length > 1 && 0 != n, e.nodeCanSortDown = i && i.nodeChildren.length > 1 && n < i.nodeChildren.length - 1, angular.forEach(e.nodeChildren, function (i, n) {
                    t(i, e, n)
                })
            }

            angular.forEach(e, function (e) {
                t(e, "")
            })
        }

        function a(e) {
            t();
            var i = "", n = {}, a = {}, o = [];
            return angular.forEach(e, function (e) {
                i = e.nodeId, n[i] = [], a[i] = [], r(e, "", n[i], a[i], o), m(n[i])
            }), f(o), {flatTree: n, flatTreeIdMap: a, nodePathObj: o}
        }

        function r(e, t, i, n, a) {
            e && (F.push(e), O.push(e.nodeId), M.push(e.nodeName), o(e, t, n), s(e), l(e, t), c(e, i, a), angular.forEach(e.nodeChildren, function (t) {
                r(t, e, i, n, a)
            }), F.pop(), O.pop(), M.pop())
        }

        function o(e, t, i) {
            i.push({
                self_id: e.nodeId,
                self_name: e.nodeName,
                parent_id: t ? t.nodeId : "",
                parent_name: t ? t.nodeName : ""
            })
        }

        function s(e) {
            var t = L * e.group_level + 16;
            e.calcStyle = {"padding-left": t + "px"}
        }

        function l(e, t) {
            e.nodeCollapse = !1, e.emptyChildren = !e.nodeChildren || !e.nodeChildren.length, t && !$.isEmptyObject(t) && (e.parentNode = t, e.display = !!e.parentNode.nodeCollapse)
        }

        function c(e, t, i) {
            t.push(e), i[e.nodeId] = {id: angular.copy(O), name: angular.copy(M)},
            e.nodeCollapse && E == e.nodeLevel && e.nodeChildren.length && E++, A = Math.max(A, e.nodeLevel)
        }

        function d() {
            return N
        }

        function u(e) {
            function i(e, t) {
                F.push(e), O.push(e.nodeId), M.push(e.nodeName), t[e.nodeId] = {
                    id: angular.copy(O),
                    name: angular.copy(M)
                }, angular.forEach(e.nodeChildren, function (e) {
                    i(e, t)
                }), F.pop(), O.pop(), M.pop()
            }

            var n = {};
            return t(), angular.forEach(e, function (e) {
                i(e, n)
            }), n
        }

        function p() {
            return j || {}
        }

        function f(e) {
            j = e
        }

        function h(e) {
            function i(e, t, n) {
                F.push(e), O.push(e.nodeId), M.push(e.nodeName), n.push({
                    self_id: e.nodeId,
                    self_name: e.nodeName,
                    parent_id: t ? t.nodeId : "",
                    parent_name: t ? t.nodeName : ""
                }), angular.forEach(e.nodeChildren, function (t) {
                    i(t, e, n)
                }), F.pop(), O.pop(), M.pop()
            }

            var n = {};
            return t(), angular.forEach(e, function (e) {
                n[e.nodeId] = [], i(e, "", n[e.nodeId])
            }), n
        }

        function g(e) {
            e.nodeCollapse && E == e.nodeLevel && e.nodeChildren.length && E++, A = Math.max(A, e.nodeLevel)
        }

        function m(e) {
            e.forEach(function (e, t) {
                e.nodeIndex = t
            })
        }

        function v(e) {
            if (!e) return !1;
            I.push(e);
            for (var t = null; 0 !== I.length;) t = I.shift(), s(t), g(t), angular.forEach(t.nodeChildren, function (e) {
                I.push(e)
            })
        }

        function y(e, t) {
            E = 0, angular.forEach(e, function (e) {
                v(e)
            });
            var i = 0;
            if (t) {
                var n = E - 1 < 0 ? 0 : E - 1, a = t + L * n;
                i = Math.max(t, a)
            }
            return i
        }

        function b(e, t) {
            function i(t, r) {
                t.nodeId == e && (n = r, a = !0), a || angular.forEach(t.nodeChildren, function (e) {
                    i(e, t)
                })
            }

            var n = {}, a = !1;
            return angular.forEach(t, function (e) {
                i(e, "")
            }), n
        }

        function _(e, t) {
            function i(e) {
                t[e.nodeId] && (n.push(e.nodeId), e.nodeCollapse = !0, e.nodeChildren.forEach(function (e) {
                    e.display = !0
                })), angular.forEach(e.nodeChildren, function (e) {
                    i(e)
                })
            }

            var n = [];
            return angular.forEach(e, function (e) {
                i(e)
            }), n
        }

        function w(e, t, i) {
            function n(e) {
                r.indexOf(e.nodeId) >= 0 && (e.nodeCollapse = !0, e.nodeChildren.forEach(function (e) {
                    e.display = !0
                })), angular.forEach(e.nodeChildren, function (e) {
                    n(e)
                })
            }

            var a = i;
            a || (a = u(t));
            var r = a[e] && a[e].id || [];
            return r.pop(), angular.forEach(t, function (e) {
                n(e)
            }), r
        }

        function x(e, t) {
            function i(e) {
                e.forEach(function (e) {
                    e.nodeCollapse = t, e.nodeChildren.forEach(function (e) {
                        e.display = t
                    }), e.nodeChildren && i(e.nodeChildren)
                })
            }

            i(e.nodeChildren)
        }

        function C(e, t, i) {
            function n(t) {
                t.nodeId == e && (t.checked = i && i[t.nodeId] ? i[t.nodeId] : t.checked, a = !0), a || angular.forEach(t.nodeChildren, function (e) {
                    n(e)
                })
            }

            var a = !1;
            angular.forEach(t, function (e) {
                n(e)
            })
        }

        function k(e, t) {
            if (!t) return !1;
            var i = null;
            if (e.hasClass("bdp-icon") ? i = e : e.find(".node-prefix-triangle").length > 0 && (i = e.find(".node-prefix-triangle")), !i) return !1;
            t.nodeCollapse ? (i.removeClass("ico-triangle-right"), i.addClass("ico-triangle-down")) : (i.removeClass("ico-triangle-down"), i.addClass("ico-triangle-right"))
        }

        function S() {
            t(), N = {}
        }

        function T(e, t) {
            if (N = N || {}, N[e.nodeId] = t, !t) {
                D(e).map(function (e) {
                    N[e] = t
                })
            }
        }

        function D(e) {
            function t(e) {
                e.forEach(function (e) {
                    i.push(e.nodeId), e.nodeChildren && t(e.nodeChildren)
                })
            }

            var i = [];
            return e.nodeChildren ? (t(e.nodeChildren), i) : []
        }

        var L = 24, A = 0, E = 0, I = [], F = [], O = [], M = [], N = {}, j = {};
        return {
            prevFormatNodeData: i,
            prevFormatNodeSortOpt: n,
            formatTreeConstructor: a,
            getNodeCollapseCache: d,
            setNodeCollapseCache: T,
            getNodePathObj: u,
            getNodePathObjCache: p,
            getFlatTreeIdMap: h,
            calcTreeNodeStyle: y,
            findNodeParentInfoByNodeId: b,
            setAllNodeCollapseStatus: _,
            setChildrenCollapseStatus: x,
            setParentCollapseStatus: w,
            setNodeCheckStatus: C,
            changeArrowIconStatus: k,
            clearTreeData: S
        }
    }])
}, function (e, t, i) {
    "use strict";

    function n(e, t, i, n, a, r) {
        return {
            restrict: "EA",
            scope: {
                treeData: "=",
                tplType: "=",
                ableOpt: "=",
                ableSort: "=",
                curNodeId: "=",
                resizeWidth: "=",
                minWidth: "=",
                nodeTooltip: "=",
                canSetAll: "=",
                clickFunc: "&",
                checkFunc: "&",
                sortUpFunc: "&",
                sortDownFunc: "&",
                deleteFunc: "&",
                chooseFunc: "&"
            },
            templateUrl: "/static/flat-tree-component/flat-tree-map.html",
            link: function (o, s, l) {
                function c(e, t) {
                    e && e.stopPropagation(), t.nodeCollapse = !t.nodeCollapse, t.nodeChildren.forEach(function (e) {
                        e.display = t.nodeCollapse
                    }), t.nodeCollapse || i.setChildrenCollapseStatus(t, t.nodeCollapse), o.resizeWidth && m(s, o.treeData), i.setNodeCollapseCache(t, t.nodeCollapse), i.changeArrowIconStatus($(e.target), t)
                }

                function d(e, t) {
                    e && e.stopPropagation();
                    var i = o.viewData.treeRootId, r = t, s = t.nodeIndex, l = t.parentNode.nodeChildren;
                    l.forEach(function (e, t) {
                        e.nodeId == r.nodeId && (s = t)
                    }), s > 0 && s <= l.length ? (l[s - 1] = l.splice(s, 1, l[s - 1])[0], o.viewTree = o.viewData.flatTree[i], o.sortUpFunc({node: r})) : n(a.instant("account.moveOnlyInSameLevel"))
                }

                function u(e, t) {
                    e && e.stopPropagation();
                    var i = o.viewData.treeRootId, r = t, s = t.nodeIndex, l = t.parentNode.nodeChildren;
                    l.forEach(function (e, t) {
                        e.nodeId == r.nodeId && (s = t)
                    }), s >= 0 && s < l.length - 1 ? (l[s] = l.splice(s + 1, 1, l[s])[0], o.viewTree = o.viewData.flatTree[i], o.sortDownFunc({node: r})) : n(a.instant("account.moveOnlyInSameLevel"))
                }

                function p(e, t) {
                    e && e.stopPropagation(), o.clickFunc({node: t})
                }

                function f(e, t) {
                    e && e.stopPropagation(), o.deleteFunc({node: t})
                }

                function h(e, t) {
                    e && e.stopPropagation(), o.checkFunc({node: t})
                }

                function g(e, t) {
                    e && e.stopPropagation(), o.chooseFunc({node: t})
                }

                function m(e, t) {
                    var n = o.resizeWidth ? Number(o.resizeWidth) : 0, a = 0, r = Number(o.minWidth);
                    a = r && Number(e.width()) < r ? i.calcTreeNodeStyle(t, Number(e.width())) : i.calcTreeNodeStyle(t, n), s.find(".J-flat-tree-wrap").width(a)
                }

                function v(e) {
                    $(e.target).hasClass("J-tree-option") || s.find(".J-select-active").removeClass("J-select-active")
                }

                r.speedTimeLog.start("groupTreeDraw");
                var y = $.cookie("locale") || "zh";
                o.initTreeView = function () {
                    o.viewData = {
                        originTree: [],
                        treeRootId: "",
                        flatTree: {},
                        flatTreeIdMap: {},
                        nodePathObj: {},
                        viewTree: []
                    }, o.viewFunc = {
                        nodeCollapseHandle: c,
                        sortNodeUp: d,
                        sortNodeDown: u,
                        clickNode: p,
                        checkNode: h,
                        deleteNode: f,
                        chooseNode: g
                    }, o.nodeSortTip = {up: "en" == y ? "Up" : "上移", down: "en" == y ? "Down" : "下移"};
                    var e = {
                        id: "group_id",
                        name: "group_name",
                        level: "group_level",
                        children: "group_list",
                        display: !1
                    };
                    o.treeData = i.prevFormatNodeData(o.treeData, e), o.ableSort && i.prevFormatNodeSortOpt(o.treeData);
                    var n = i.formatTreeConstructor(o.treeData), a = o.treeData[0].nodeId;
                    o.viewData.treeRootId = a, o.viewData.originTree = o.treeData, o.viewData.flatTree = n.flatTree, o.viewData.flatTreeIdMap = n.flatTreeIdMap, o.viewData.nodePathObj = n.nodePathObj, o.treeData.forEach(function (e) {
                        e.nodeCollapse = !0, e.nodeChildren.forEach(function (e) {
                            e.display = !0
                        })
                    }), o.viewData.viewTree = n.flatTree[a], 0 === o.viewData.viewTree[0].nodeIndex && 0 === o.viewData.viewTree[0].nodeLevel && (o.viewData.viewTree[0].checkedDisabled = !o.canSetAll);
                    var l = i.getNodeCollapseCache(), v = i.setAllNodeCollapseStatus(o.treeData, l);
                    t(function () {
                        o.resizeWidth && m(s, o.treeData), i.changeArrowIconStatus($(s).find("#J_node_" + a), {nodeCollapse: !0}), v.length > 0 && v.map(function (e) {
                            i.changeArrowIconStatus($(s).find("#J_node_" + e), {nodeCollapse: !0})
                        })
                    });
                    var b = 0, _ = 0;
                    $(window).resize("resizeFlatTree", function () {
                        Number(o.minWidth) && Number(s.width()) < Number(o.minWidth) && (b = Number(s.width()), Math.abs(b - _) > 30 && (o.treeOuterWidth = i.calcTreeNodeStyle(o.treeData, Number(o.minWidth)), o.resizeWidth && s.find(".J-flat-tree-wrap").width(0), _ = b))
                    }), r.speedTimeLog.end("groupTreeDraw", {page: "group_tree_draw"})
                }, o.initTreeView(), o.$on("updateCurNode", function (e, n) {
                    if (n) {
                        o.curNodeId = n;
                        var a = i.setParentCollapseStatus(o.curNodeId, o.treeData, o.viewData.nodePathObj);
                        t(function () {
                            a.forEach(function (e) {
                                i.changeArrowIconStatus($(s).find("#J_node_" + e), {nodeCollapse: !0})
                            })
                        })
                    }
                }), e.$on("updateElementWidth", function (e, t) {
                    t && o.resizeWidth && m(s, o.treeData)
                }), $(document).unbind("click.flatTree").bind("click.flatTree", v), o.$on("$destroy", function () {
                    $(document).unbind("click.flatTree", v)
                })
            }
        }
    }

    n.$inject = ["$rootScope", "$timeout", "flatTreeHandleService", "errHint", "$translate", "logService"], angular.module("BC.flat-tree-component").directive("flatTreeMap", n)
}, function (e, t, i) {
    "use strict";

    function n(e, t, i) {
        return {
            restrict: "EA",
            replace: !0,
            scope: {treeData: "=", queryText: "=", clickFunc: "&"},
            templateUrl: "/static/flat-tree-component/flat-tree-search.html",
            link: function (n, a, r) {
                function o(e) {
                    var t = angular.element(a).next(), i = t.find(".flat-tree-map"),
                        n = angular.element(".J-flat-tree-scroll"), r = n.height();
                    if (0 == i.length) return !1;
                    var o = i.find("#J_node_" + e), s = i[0].scrollWidth - i[0].offsetWidth;
                    s = s >= 8 ? s : 8;
                    var l = o.offset().top - i.offset().top;
                    o.addClass("J-select-active");
                    var c = l - r / 2;
                    scrollToTargetPos(n, c), "auto" == i.css("overflow") && (c = l + i.scrollTop(), scrollToTargetPos(i, c - 8))
                }

                function s(r) {
                    var s = r;
                    n.clickFunc && n.clickFunc({node: s}), r.checked = !0;
                    var l = {};
                    l[s.self_id] = s.checked;
                    var c = i.setParentCollapseStatus(s.self_id, n.treeData);
                    i.setNodeCheckStatus(s.self_id, n.treeData, l), t(function () {
                        c.forEach(function (e) {
                            i.changeArrowIconStatus(a.parent().find(".J-flat-tree-map").find("#J_node_" + e), {nodeCollapse: !0})
                        }), o(s.self_id)
                    }, 100), e.$broadcast("updateElementWidth", !0), n.viewData.queryOptionList = [], n.viewData.showQueryOptionList = !1
                }

                function l(e, t) {
                    return e.toString().toLowerCase().indexOf(t.toLowerCase()) >= 0
                }

                function c() {
                    var e = n.viewData.queryText, t = i.getFlatTreeIdMap(n.treeData), a = i.getNodePathObj(n.treeData),
                        r = [];
                    if (e) {
                        n.viewData.showQueryOptionList = !0;
                        for (var o in t) {
                            var s = t[o], c = "";
                            angular.forEach(s, function (t) {
                                l(t.self_name, e) && (c = a[t.self_id] ? a[t.self_id].name.join(" > ") : "", t.treePath = c, r.push(t))
                            })
                        }
                        n.viewData.queryOptionList = r
                    } else n.viewData.showQueryOptionList = !1;
                    console.timeEnd("search"), n.$$phase || n.$digest()
                }

                n.initView = function () {
                    n.viewData = {
                        queryText: n.queryText,
                        queryOptionList: [],
                        showQueryOptionList: !1,
                        selectResultOption: s
                    }
                }, n.initView(), angular.element(a).on("keyup.flatTreeSearch", bdp.utils.debounce(function (e) {
                    c()
                }, 300)), angular.element(a).on("mousedown.flatTreeSearch", function () {
                    !n.viewData.showQueryOptionList && n.viewData.queryText && c()
                }), n.$on("$destroy", function () {
                    angular.element(a).off("keyup.flatTreeSearch"), angular.element(a).off("mousedown.flatTreeSearch")
                })
            }
        }
    }

    n.$inject = ["$rootScope", "$timeout", "flatTreeHandleService"], angular.module("BC.flat-tree-component").directive("flatTreeSearch", n)
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.controllers.dataSource", []), a = function (e) {
        var t = i(85)(i.p + "1f1e1b2e49c9.css");
        i.e(0).then(function (n) {
            var a = [];
            return a.push(i(886)), a.push(i(887)), a.push(i(888)), a.push(i(889)), a.push(i(890)), a.push(i(891)), a.push(i(892)), a.push(i(893)), a.push(i(894)), a.push(i(895)), a.push(i(896)), a.push(i(897)), a.push(i(898)), a.push(i(899)), a.push(i(900)), a.push(i(901)), a.push(i(902)), a.push(i(903)), a.push(i(904)), a.push(i(905)), a.push(i(906)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    };
    i(601), i(645), i(647), i(649), i(651);
    var r = {
        data_source: {url: "/data_source", templateUrl: i(396), controller: "WorktableCtrl"},
        data_source_tb_id: {url: "/data_source/:tbId", templateUrl: i(396), controller: "WorktableCtrl"},
        page_upload_add: {url: "/page_upload/:operate", templateUrl: i(345), controller: "pageUploadCtrl"},
        page_upload_replace: {url: "/page_upload/:operate/:tbId", templateUrl: i(345), controller: "pageUploadCtrl"},
        page_upload_singlereplace: {
            url: "/page_upload/:operate/:tbId/:mapId",
            templateUrl: i(345),
            controller: "pageUploadCtrl"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t, i) {
    "use strict";
    var n = i(37), a = i(602), r = i(613), o = i(616), s = i(619), l = i(620), c = i(624), d = i(630), u = i(631),
        p = i(632), f = i(633), h = i(634), g = i(635), m = i(636), v = i(637), y = i(638), b = i(639), _ = i(640),
        w = i(641), x = i(642);
    i(643), (0, n.extendNgModule)({
        name: "BC.controllers.dataSource",
        controller: {
            chooseFolderCtrl: r.chooseFolderCtrl,
            chooseWorktableCtrl: o.chooseWorktableCtrl,
            VerifyCodeCtrl: s.VerifyCodeCtrl
        },
        service: {WtbAsideService: l.WtbAsideService, WtbListService: c.WtbListService},
        directive: {
            WtbListComponent: d.WtbListComponent,
            WtbSearchComponent: u.WtbSearchComponent,
            WtbContentComponent: p.WtbContentComponent,
            WtbOperateItemDirective: f.WtbOperateItemDirective,
            WtbFolderDirective: h.WtbFolderDirective,
            WtbFolderContentDirective: g.WtbFolderContentDirective,
            WtbFolderChildComponent: m.WtbFolderChildComponent,
            WtbLoadHandleDirective: v.WtbLoadHandleDirective,
            WtbTableDirective: y.WtbTableDirective,
            WtbIconHandleDirective: b.WtbIconHandleDirective,
            WtbLabelComponent: _.WtbLabelComponent,
            WtbFolderItemComponent: w.WtbFolderItemComponent,
            WtbSheetItemComponent: x.WtbSheetItemComponent,
            userWbComponent: a.userWbComponent
        }
    }), e.exports = {}
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.userWbComponent = void 0;
    var a, r, o = i(397), s = n(o), l = i(13), c = n(l), d = i(17), u = n(d), p = i(398), f = n(p), h = i(399),
        g = n(h), m = i(171), v = n(m), y = i(64), b = n(y), w = i(84), x = n(w), C = i(65), k = n(C), S = i(37),
        T = i(400), D = t.userWbComponent = (a = (0, S.ngComponent)(["$parse", "wtbAsideService", function (e, t) {
            "ngInject";
            var n;
            return n = {
                scope: !0,
                controller: D,
                controllerAs: "userWbCtrl",
                restrict: "E",
                transclude: !0,
                replace: !0,
                templateUrl: i(612)
            }, (0, v.default)(n, "scope", {
                wbList: "=",
                changeResult: "=",
                folderList: "=",
                editType: "="
            }), (0, v.default)(n, "link", function (e, i, n, a) {
                e.$watch("wbList", function (t, i) {
                    e.initVm()
                }), e.$watch("editType", function (t, i) {
                    e.initVm()
                }), e.$watch("folderList", function (t, i) {
                    e.initVm()
                }), e.initVm = (0, k.default)(b.default.mark(function i() {
                    return b.default.wrap(function (i) {
                        for (; ;) switch (i.prev = i.next) {
                            case 0:
                                if (!(e.wbList && e.folderList && e.editType)) {
                                    i.next = 14;
                                    break
                                }
                                return i.next = 3, e.userWbCtrl.folderListPromise.promise;
                            case 3:
                                if ("readonly" != e.editType) {
                                    i.next = 9;
                                    break
                                }
                                return i.next = 6, e.userWbCtrl.wtbList.ctrl.updateCurTree(function (i) {
                                    var n = t.filterTreeByTbs(angular.copy(e.folderList), _.map(e.wbList, function (e) {
                                        return e.tb_id
                                    }));
                                    return x.default.resolve(n)
                                });
                            case 6:
                                e.userWbCtrl.initCurFolder(), i.next = 13;
                                break;
                            case 9:
                                if ("edit" != e.editType) {
                                    i.next = 13;
                                    break
                                }
                                return i.next = 12, e.userWbCtrl.wtbList.ctrl.updateCurTree(function (t) {
                                    return x.default.resolve(e.folderList)
                                });
                            case 12:
                                e.userWbCtrl.initCurFolder();
                            case 13:
                                e.userWbCtrl.ngOnInit(e.wbList);
                            case 14:
                            case"end":
                                return i.stop()
                        }
                    }, i, this)
                }))
            }), n
        }]))(r = function (e) {
            function t(e, i, n, a, r, o) {
                "ngInject";
                (0, c.default)(this, t);
                var l = (0, f.default)(this, (t.__proto__ || (0, s.default)(t)).call(this));
                return l.$scope = e, l.ngDialog = i, l.wtbListService = n, l.$translate = r, l.showTree = !1, l.wtbAsideService = o, l.checkFolderMap = {}, l.checkTbMap = {}, l.wtbTreeInst, l.folderListPromise = a.defer(), l.wtbList = {
                    showRootUi: !0,
                    openWithVm: !0,
                    origGetFun: function (e) {
                        return x.default.resolve(l.$scope.folderList)
                    },
                    onInit: function (e) {
                        l.folderListPromise.resolve(), l.wtbTreeInst = e, l.initCurFolder()
                    }
                }, l
            }

            return t.$inject = ["$scope", "ngDialog", "wtbListService", "$q", "$translate", "wtbAsideService"], (0, g.default)(t, e), (0, u.default)(t, [{
                key: "ngOnInit",
                value: function (e) {
                    var t = this;
                    this.wtbList.ctrl.setQueryText(""), this.showTree = !0, this.origEditTbMap = _.keyBy(e, "tb_id"), this.wbListTbIdList = _.map(this.$scope.wbList, function (e) {
                        return e.tb_id
                    }), this.$scope.changeResult = {
                        add: {},
                        del: {},
                        modify: _.cloneDeep(this.origEditTbMap)
                    }, this.checkTbMap = {}, _.forEach(this.origEditTbMap, function (e) {
                        return t.checkTbMap[e.tb_id] = !0
                    }), this.folderListPromise.promise.then(function () {
                        t._initCheckFolderMap(t.wtbTreeInst)
                    })
                }
            }, {
                key: "_initCheckFolderMap", value: function (e) {
                    var t = this;
                    e && (_.forEach(e.folderMap, function (e) {
                        t.checkFolderMap[e.folderId] = new t.wtbListService.CheckFolder({
                            checkTbMap: t.checkTbMap,
                            checkFolderMap: t.checkFolderMap,
                            folderInst: e,
                            onCheckTb: function (e, i) {
                                t.initTbPermission(e, i)
                            }
                        })
                    }), _.forEachRight(this.checkFolderMap, function (e) {
                        return e.updateUnknow()
                    }))
                }
            }, {
                key: "changeCheckFolder", value: function (e) {
                    this.checkFolderMap[e.folderId].updateByCheck(this.checkFolderMap[e.folderId].check), this.checkFolderMap[e.folderId].updateParentFolder()
                }
            }, {
                key: "changeCheckTb", value: function (e) {
                    var t = this.checkTbMap[e.tbId];
                    this.checkFolderMap[e.parentFolder.folderId].updateUnknow(), this.checkFolderMap[e.parentFolder.folderId].updateParentFolder(), this.initTbPermission(e, t)
                }
            }, {
                key: "serachFolderSync", value: function (e) {
                    var t = void 0;
                    return t = e || "edit" != this.$scope.editType ? _.cloneDeep(this.$scope.folderList) : this.$scope.folderList, "edit" != this.$scope.editType && this.wtbAsideService.filterTreeByTbs(t, this.wbListTbIdList), e && this._searchSubFolders(t, e), x.default.resolve(t)
                }
            }, {
                key: "_searchSubFolders", value: function (e, t) {
                    var i = this;
                    if (e.name.toLowerCase().indexOf(t.toLowerCase()) >= 0) ; else {
                        var n = e.tb_list.filter(function (e) {
                            return e.name.toLowerCase().indexOf(t.toLowerCase()) >= 0
                        }), a = e.sub_folders.filter(function (e) {
                            return i._searchSubFolders(e, t)
                        });
                        e.tb_list = n, e.sub_folders = a
                    }
                    var r = e.sub_folders.length > 0 || e.tb_list.length;
                    return r && (e.open = !0), r
                }
            }, {
                key: "initTbPermission", value: function (e, t) {
                    var i = e.tbId, n = this.$scope.changeResult;
                    this.origEditTbMap[i] ? t ? (delete n.del[i], n.modify[i] = _.cloneDeep(this.origEditTbMap[i])) : (delete n.modify[i], n.del[i] = _.cloneDeep(this.origEditTbMap[i])) : t ? n.add[i] = {
                        col_filter: [],
                        filter: {},
                        is_col_filter: 0,
                        permission_type: 2,
                        name: e.name,
                        tb_id: e.tb_id
                    } : delete n.add[i]
                }
            }, {
                key: "getPermissionClass", value: function (e) {
                    var t = this.$scope.changeResult, i = t.add && t.add[e] || t.modify && t.modify[e];
                    return i && i.permission_type ? i.permission_type : ""
                }
            }, {
                key: "editWorktableFilter", value: function (e) {
                    this.$scope.popupTips = this.$scope.popupTips || {visibleFieldsHint: this.$translate.instant("account.visibleFieldsHint")};
                    var t = this.$scope.changeResult.add[e.tbId] || this.$scope.changeResult.modify[e.tbId], i = {
                        editTbModel: $.extend({}, e.getApiData(), t, {
                            filter: t.filter || {},
                            col_filter: t.col_filter || []
                        }), tbId: e.tbId, okBtnPromise: function (i, n) {
                            return i.row_filter = angular.fromJson(i.row_filter), i.row_filter instanceof Array && 0 == i.row_filter.length && (i.row_filter = {}), $.extend(t, {
                                is_col_filter: i.is_col_filter,
                                col_filter: angular.fromJson(i.col_filter) || [],
                                filter: i.row_filter || {},
                                permission_type: i.permission_type,
                                is_handle_filter: !0,
                                tb_id: e.tb_id,
                                name: e.name
                            }), x.default.resolve()
                        }
                    };
                    this.ngDialog.open({
                        className: "ngdialog-theme-default ngdialog-worktable-filter J-worktable-filter",
                        template: "/static/data-ownership/view/worktable-authority.html",
                        scope: this.$scope,
                        data: i
                    })
                }
            }, {
                key: "showQuery", get: function () {
                    return "edit" == this.$scope.editType || !!(this.$scope.wbList && this.$scope.wbList.length > 0)
                }
            }]), t
        }(T.WtbCol2BaseCtrl)) || r
}, function (e, t, i) {
    i(604), e.exports = i(3).Object.getPrototypeOf
}, function (e, t, i) {
    var n = i(59), a = i(93);
    i(157)("getPrototypeOf", function () {
        return function (e) {
            return a(n(e))
        }
    })
}, function (e, t, i) {
    e.exports = {default: i(606), __esModule: !0}
}, function (e, t, i) {
    i(607), e.exports = i(3).Object.setPrototypeOf
}, function (e, t, i) {
    var n = i(11);
    n(n.S, "Object", {setPrototypeOf: i(608).set})
}, function (e, t, i) {
    var n = i(16), a = i(9), r = function (e, t) {
        if (a(e), !n(t) && null !== t) throw TypeError(t + ": can't set as prototype!")
    };
    e.exports = {
        set: Object.setPrototypeOf || ("__proto__" in {} ? function (e, t, n) {
            try {
                n = i(34)(Function.call, i(90).f(Object.prototype, "__proto__").set, 2), n(e, []), t = !(e instanceof Array)
            } catch (e) {
                t = !0
            }
            return function (e, i) {
                return r(e, i), t ? e.__proto__ = i : n(e, i), e
            }
        }({}, !1) : void 0), check: r
    }
}, function (e, t, i) {
    e.exports = {default: i(610), __esModule: !0}
}, function (e, t, i) {
    i(611);
    var n = i(3).Object;
    e.exports = function (e, t) {
        return n.create(e, t)
    }
}, function (e, t, i) {
    var n = i(11);
    n(n.S, "Object", {create: i(62)})
}, function (e, t) {
    e.exports = "/dist/static/worktable/folder-list/wtb-user.html"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.chooseFolderCtrl = void 0;
    var a = i(84), r = n(a), o = i(64), s = n(o), l = i(65), c = n(l), d = i(13), u = n(d), p = i(17), f = n(p);
    i(614);
    t.chooseFolderCtrl = function () {
        function e(t, i, n) {
            "ngInject";
            (0, u.default)(this, e), this.$scope = t, this.$translate = n, this.errHint = i, this.loading = !1, this.wtbTreeConfig = {
                openWithVm: !1,
                showRootUi: !0
            }, this.ngOnInit()
        }

        return e.$inject = ["$scope", "errHint", "$translate"], (0, f.default)(e, [{
            key: "ngOnInit",
            value: function () {
                this.ngDialogData = _.extend({
                    title: this.$translate.instant("wb.chooseFolder"),
                    folder: {},
                    optTip1: this.$translate.instant("wb.saveTo"),
                    optTip2: "",
                    optTip3: "",
                    nameTip: this.$translate.instant("wb.worktableName"),
                    onSubmit: function () {
                    },
                    onCancel: function () {
                    }
                }, this.$scope.ngDialogData), this.wtbTreeConfig.defaultId = this.ngDialogData.defaultId || $.cookie("select_folder_id") || "folder_root", this.selectFolder = this.ngDialogData.defaultSelFolder || {folderId: this.wtbTreeConfig.defaultId}, this.targetName = this.ngDialogData.targetName
            }
        }, {
            key: "toggetFolder", value: function (e) {
                this.selectFolder = e
            }
        }, {
            key: "onSubmit", value: function () {
                function e() {
                    return t.apply(this, arguments)
                }

                var t = (0, c.default)(s.default.mark(function e() {
                    var t, i = this;
                    return s.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                if (t = this.wtbTreeConfig.ctrl.wtbTree.getFolderInstById(this.selectFolder.folderId)) {
                                    e.next = 3;
                                    break
                                }
                                return e.abrupt("return", this.errHint(this.$translate.instant("e2280ea0")));
                            case 3:
                                return this.loading = !0, e.next = 6, this.ngDialogData.onSubmit({
                                    targetName: this.targetName,
                                    targetFolderInst: t
                                }).catch(function (e) {
                                    e && i.errHint(e)
                                });
                            case 6:
                                this.loading = !1, this.$scope.$$phase || this.$scope.$digest();
                            case 8:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "onCancel", value: function () {
                function e() {
                    return t.apply(this, arguments)
                }

                var t = (0, c.default)(s.default.mark(function e() {
                    var t;
                    return s.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                t = this.ngDialogData.onCancel, "function" == typeof t && t(), this.$scope.closeThisDialog();
                            case 3:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "serachFolderSync", value: function (e) {
                var t = this.wtbTreeConfig.ctrl.origWtbTree.getTreeData();
                return this._searchSubFolders(t, e), r.default.resolve(t)
            }
        }, {
            key: "_searchSubFolders", value: function (e, t) {
                var i = this;
                return e.sub_folders = e.sub_folders.filter(function (e) {
                    var n = e.name.toLowerCase().indexOf(t.toLowerCase()) >= 0, a = i._searchSubFolders(e, t),
                        r = n || a;
                    return n && t && (e.mark = !0), r && (e.open = !0), r
                }), e.sub_folders.length > 0
            }
        }]), e
    }()
}, function (e, t, i) {
    i(615).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "choose-table-folder_d8d7f5d0.css"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.chooseWorktableCtrl = void 0;
    var a = i(64), r = n(a), o = i(65), s = n(o), l = i(13), c = n(l), d = i(17), u = n(d);
    i(617);
    t.chooseWorktableCtrl = function () {
        function e(t, i, n) {
            "ngInject";
            (0, c.default)(this, e), this.$scope = t, this.$translate = n, this.errHint = i, this.loading = !1, this.wtbList = {openWithVm: !1}, this.ngOnInit()
        }

        return e.$inject = ["$scope", "errHint", "$translate"], (0, u.default)(e, [{
            key: "ngOnInit",
            value: function () {
                this.ngDialogData = _.extend({
                    title: this.$translate.instant("dash.selectTbTitle"),
                    showPolymerHint: !1,
                    disableGraftTb: !1,
                    onSubmit: function () {
                    },
                    onCancel: function () {
                    }
                }, this.$scope.ngDialogData), this.wtbList.defaultId = this.ngDialogData.defaultId, this.disableGraftTb = this.ngDialogData.disableGraftTb, this.showPolymerHint = this.ngDialogData.showPolymerHint, this.selectMap = {}, this.selectTbMap = {}, this.ngDialogData.selectMap ? this.preSelectMap = this.ngDialogData.selectMap : this.selectTb = {}
            }
        }, {
            key: "toggetTb", value: function (e) {
                if (this.disableGraftTb && "graft" == e.type) return !1;
                this.ngDialogData.selectMap ? this.selectMap[e.tbId].select || "boolean" == typeof this.selectMap[e.tbId] && this.selectMap[e.tbId] ? this.selectTbMap[e.tbId] = e : delete this.selectTbMap[e.tbId] : this.selectTb = e
            }
        }, {
            key: "onSubmit", value: function () {
                function e() {
                    return t.apply(this, arguments)
                }

                var t = (0, s.default)(r.default.mark(function e() {
                    var t, i = this;
                    return r.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                return this.loading = !0, t = void 0, t = this.ngDialogData.selectMap ? {selectTbMap: this.selectTbMap} : {selectTb: this.selectTb}, e.next = 5, this.ngDialogData.onSubmit(t).catch(function (e) {
                                    e && i.errHint(e)
                                });
                            case 5:
                                this.loading = !1, this.$scope.$$phase || this.$scope.$digest();
                            case 7:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }, {
            key: "onCancel", value: function () {
                function e() {
                    return t.apply(this, arguments)
                }

                var t = (0, s.default)(r.default.mark(function e() {
                    var t;
                    return r.default.wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                t = this.ngDialogData.onCancel, "function" == typeof t && t(), this.$scope.closeThisDialog();
                            case 3:
                            case"end":
                                return e.stop()
                        }
                    }, e, this)
                }));
                return e
            }()
        }]), e
    }()
}, function (e, t, i) {
    i(618).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "choose-table-list_fdd02deb.css"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.VerifyCodeCtrl = void 0;
    var a = i(13), r = n(a), o = i(17), s = n(o);
    t.VerifyCodeCtrl = function () {
        function e(t, i, n) {
            "ngInject";
            (0, r.default)(this, e), this.$scope = t, this.$translate = n, this.errHint = i, this.ngDialogData = this.$scope.ngDialogData, this.sessionId = "", this.validateImgUrl = "", this.verifyCode = "", this.loading = !1, this.ngOnInit()
        }

        return e.$inject = ["$scope", "errHint", "$translate"], (0, s.default)(e, [{
            key: "ngOnInit",
            value: function () {
                this.toggleImg()
            }
        }, {
            key: "onSubmit", value: function () {
                var e = this, t = this._checkDelParam();
                if (t) return this.errHint(t), !1;
                this.loading = !0, this.ngDialogData.onSubmit({
                    sessionId: this.sessionId,
                    verifyCode: this.verifyCode
                }).finally(function () {
                    e.loading = !1
                })
            }
        }, {
            key: "toggleImg", value: function () {
                var e = (new Date).getTime();
                this.sessionId = e + parseInt(1e4 * Math.random()), this.validateImgUrl = "/api/register/pic?session_id=" + this.sessionId + "&t=" + e
            }
        }, {
            key: "_checkDelParam", value: function () {
                return "" == this.verifyCode ? this.$translate.instant("user.inputPicVerifyCode") : 4 != this.verifyCode.length ? this.$translate.instant("error.codeError") : void 0
            }
        }]), e
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e, t, i, n) {
        i && (0, d.default)(e, t, {
            enumerable: i.enumerable,
            configurable: i.configurable,
            writable: i.writable,
            value: i.initializer ? i.initializer.call(n) : void 0
        })
    }

    function r(e, t, i, n, a) {
        var r = {};
        return Object.keys(n).forEach(function (e) {
            r[e] = n[e]
        }), r.enumerable = !!r.enumerable, r.configurable = !!r.configurable, ("value" in r || r.initializer) && (r.writable = !0), r = i.slice().reverse().reduce(function (i, n) {
            return n(e, t, i) || i
        }, r), a && void 0 !== r.initializer && (r.value = r.initializer ? r.initializer.call(a) : void 0, r.initializer = void 0), void 0 === r.initializer && (Object.defineProperty(e, t, r), r = null), r
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbAsideService = void 0;
    var o, s, l, c = i(89), d = n(c), u = i(332), p = n(u), f = i(13), h = n(f), g = i(17), m = n(g), v = i(170),
        y = v.observable, b = v.action;
    t.WtbAsideService = (o = function () {
        function e(t, i, n, r) {
            "ngInject";
            (0, h.default)(this, e), a(this, "curEditFolderId", s, this), a(this, "curOptItemId", l, this), this.notOrigTree = !1, this.curTbId = $.cookie("ds_tb_id"), this.curFolder = {
                folderId: "folder_root",
                name: "根目录"
            }, this.$filter = t, this.$position = i, this.commonService = n, this.$translate = r, window.bdpChart.Events.mixTo(this)
        }

        return e.$inject = ["$filter", "$position", "commonService", "$translate"], (0, m.default)(e, [{
            key: "setCurEditFolderId",
            value: function (e) {
                this.curEditFolderId = e
            }
        }, {
            key: "setCurOptItemId", value: function (e) {
                this.curOptItemId = e
            }
        }, {
            key: "getQueryDsList", value: function (e, t) {
                var i = this, n = [];
                return _.forEach(e, function (e) {
                    if (i._matchProp(e, "tag", t) || i._matchProp(e, "ds_name", t)) n.push(e); else {
                        var a = _.filter(e.tb_list, function (e) {
                            return i._matchProp(e, "name", t)
                        });
                        (a.length > 0 || "folder_root" == e.folder_id) && n.push(_.extend({}, e, {
                            tb_list: a,
                            open: !0
                        }))
                    }
                }), n
            }
        }, {
            key: "_matchProp", value: function (e, t, i) {
                var n = e.hasOwnProperty(t) && null != e[t] && e[t].toLowerCase().indexOf(i.toLowerCase()) > -1;
                return n && (e.mark = !0), n
            }
        }, {
            key: "filterTreeByTbs", value: function (e, t, i) {
                var n = _.keyBy(t);
                return this._filterTreeByTbs(e, n, i), e
            }
        }, {
            key: "_filterTreeByTbs", value: function (e, t, i) {
                var n = this;
                e.tb_list = e.tb_list.filter(function (e) {
                    return t[e.tb_id]
                }), !e.sub_folders && (e.sub_folders = []), e.sub_folders = e.sub_folders.filter(function (e) {
                    return n._filterTreeByTbs(e, t, i)
                });
                var a = e.sub_folders.length > 0 || e.tb_list.length > 0;
                return a && i && (e.open = !0), a
            }
        }, {
            key: "getDsTbList", value: function () {
                return this.commonService.ds.tbList().then(function (e) {
                    if (0 == e.status) return e.result.forEach(function (e) {
                        return e.unfolded = !0
                    }), e.result
                })
            }
        }, {
            key: "getDropErr", value: function (e) {
                var t = e.sourceInst, i = e.destParentInst, n = e.destIndex, a = e.equalParent, r = e.destType, o = "",
                    s = t.folder_id ? "folder" : "tb";
                return "folder" == s && "folder" == r || "tb" == s && "tb" == r || 0 == n && i.open ? (o = "", "tb" == s && "folder" == r && "tree_root" == i.folderId ? "工作表不能拖拽到文件夹区域" : "folder" == s && "tb" == r && "folder_root" == i.folderId ? "文件夹不能拖拽到工作表区域" : "folder" == s && i.depth + t.subDeep + 1 > t.wtbTree.maxDeep ? "文件夹级数超出限制" : "folder" == s && !a && t.wtbTree.checkFolderNameRepeat(i.folder_id, t.name) ? "拖拽后文件夹不能重名" : o) : o = "folder" === s ? "文件夹不能拖拽到工作表区域" : "工作表不能拖拽到文件夹区域"
            }
        }, {
            key: "moveWtbItem", value: function (e) {
                var t = e.equalParent, i = e.destIndex, n = e.destParentInst, a = e.sourceInst, r = e.destType,
                    o = e.destLen, s = e.sourceIndex, l = {}, c = i;
                return t && s < i && (c += 1), l = "folder" == r ? {
                    toSeq: this._getSeq({
                        destParentInst: n,
                        prop: "sub_folders",
                        seqProp: "seq_no",
                        nextItemIndex: c,
                        destLen: o
                    }), toIndex: i, sync: !0, toFolderId: t ? void 0 : n.folder_id
                } : {
                    toFolderId: n.folder_id,
                    toSeq: this._getSeq({
                        destParentInst: n,
                        prop: "tb_list",
                        seqProp: "tb_seq_no",
                        nextItemIndex: c,
                        destLen: o
                    }),
                    toIndex: i,
                    sync: !0
                }, a.move(l)
            }
        }, {
            key: "_getSeq", value: function (e) {
                var t = e.destParentInst, i = e.prop, n = e.seqProp, a = e.nextItemIndex, r = e.destLen;
                if (a >= r) {
                    var o = t[i][r - 1];
                    return o ? o[n] + 1 : 0
                }
                var s = t[i][a];
                return s ? s[n] : 0
            }
        }, {
            key: "setOffsetInWindow", value: function (e) {
                var t = e.positionEle, i = e.targtEle, n = e.hideCallback,
                    a = this.$position.positionElements(i, t, "bottom-left", !0);
                $(window).height() - a.top < t.outerHeight() && (a = this.$position.positionElements(i, t, "top-left", !0)), t.css({
                    top: a.top + "px",
                    left: a.left - t.outerWidth() + i.outerWidth() + "px"
                });
                var r = this.$position.scrollParent(i), o = $(r).scrollTop();
                $(r).off("scroll.wtbOperate").on("scroll.wtbOperate", function (e) {
                    Math.abs(o - $(e.target).scrollTop()) > 8 && (n(), $(r).off("scroll.wtbOperate"))
                })
            }
        }, {
            key: "checkCreatFolderParam", value: function (e, t) {
                return t ? e.depth + 1 > e.wtbTree.maxDeep ? this.$translate.instant("7b942b4a") : e.wtbTree.checkFolderNameRepeat(e.folder_id, t) ? this.$translate.instant("wb.repeatFolderName") : "" : this.$translate.instant("wb.inputFolderName")
            }
        }]), e
    }(), s = r(o.prototype, "curEditFolderId", [y], {
        enumerable: !0,
        initializer: null
    }), l = r(o.prototype, "curOptItemId", [y], {
        enumerable: !0,
        initializer: null
    }), r(o.prototype, "setCurEditFolderId", [b], (0, p.default)(o.prototype, "setCurEditFolderId"), o.prototype), r(o.prototype, "setCurOptItemId", [b], (0, p.default)(o.prototype, "setCurOptItemId"), o.prototype), o)
}, function (e, t) {
    function i() {
        throw new Error("setTimeout has not been defined")
    }

    function n() {
        throw new Error("clearTimeout has not been defined")
    }

    function a(e) {
        if (d === setTimeout) return setTimeout(e, 0);
        if ((d === i || !d) && setTimeout) return d = setTimeout, setTimeout(e, 0);
        try {
            return d(e, 0)
        } catch (t) {
            try {
                return d.call(null, e, 0)
            } catch (t) {
                return d.call(this, e, 0)
            }
        }
    }

    function r(e) {
        if (u === clearTimeout) return clearTimeout(e);
        if ((u === n || !u) && clearTimeout) return u = clearTimeout, clearTimeout(e);
        try {
            return u(e)
        } catch (t) {
            try {
                return u.call(null, e)
            } catch (t) {
                return u.call(this, e)
            }
        }
    }

    function o() {
        g && f && (g = !1, f.length ? h = f.concat(h) : m = -1, h.length && s())
    }

    function s() {
        if (!g) {
            var e = a(o);
            g = !0;
            for (var t = h.length; t;) {
                for (f = h, h = []; ++m < t;) f && f[m].run();
                m = -1, t = h.length
            }
            f = null, g = !1, r(e)
        }
    }

    function l(e, t) {
        this.fun = e, this.array = t
    }

    function c() {
    }

    var d, u, p = e.exports = {};
    !function () {
        try {
            d = "function" == typeof setTimeout ? setTimeout : i
        } catch (e) {
            d = i
        }
        try {
            u = "function" == typeof clearTimeout ? clearTimeout : n
        } catch (e) {
            u = n
        }
    }();
    var f, h = [], g = !1, m = -1;
    p.nextTick = function (e) {
        var t = new Array(arguments.length - 1);
        if (arguments.length > 1) for (var i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
        h.push(new l(e, t)), 1 !== h.length || g || a(s)
    }, l.prototype.run = function () {
        this.fun.apply(null, this.array)
    }, p.title = "browser", p.browser = !0, p.env = {}, p.argv = [], p.version = "", p.versions = {}, p.on = c, p.addListener = c, p.once = c, p.off = c, p.removeListener = c, p.removeAllListeners = c, p.emit = c, p.prependListener = c, p.prependOnceListener = c, p.listeners = function (e) {
        return []
    }, p.binding = function (e) {
        throw new Error("process.binding is not supported")
    }, p.cwd = function () {
        return "/"
    }, p.chdir = function (e) {
        throw new Error("process.chdir is not supported")
    }, p.umask = function () {
        return 0
    }
}, function (e, t) {
    var i;
    i = function () {
        return this
    }();
    try {
        i = i || Function("return this")() || (0, eval)("this")
    } catch (e) {
        "object" == typeof window && (i = window)
    }
    e.exports = i
}, function (e, t) {
    e.exports = function (e) {
        if (!e.webpackPolyfill) {
            var t = Object.create(e);
            t.children || (t.children = []), Object.defineProperty(t, "loaded", {
                enumerable: !0, get: function () {
                    return t.l
                }
            }), Object.defineProperty(t, "id", {
                enumerable: !0, get: function () {
                    return t.i
                }
            }), Object.defineProperty(t, "exports", {enumerable: !0}), t.webpackPolyfill = 1
        }
        return t
    }
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbListService = void 0
    ;var a = i(64), r = n(a), o = i(65), s = n(o), l = i(13), c = n(l), d = i(17), u = n(d), p = i(337), f = i(344),
        h = i(395), g = i(625);
    t.WtbListService = function () {
        function e(t, i, n, a) {
            "ngInject";
            var r = this;
            (0, c.default)(this, e), this.commonService = t, this.ngDialog = i, this.$translate = n, this.defaultClassName = {
                depth: "wtb-depth-",
                hit: "hit-search",
                type: "ico-file-",
                unread: "shared_unread"
            }, this.permissionClassMap = {
                0: "",
                1: "ico-file-authority-edit",
                2: "ico-file-authority-readonly"
            }, this.WtbTree = p.WtbTree, this.WtbFolder = f.WtbFolder, this.WtbSheet = h.WtbSheet, this.CheckFolder = g.CheckFolder, a.$on("_websocketChartMessage_", function (e, t) {
                13 == t.data.type && r.updateOrigTree()
            })
        }

        return e.$inject = ["commonService", "ngDialog", "$translate", "$rootScope"], (0, u.default)(e, [{
            key: "getFolderListByApi",
            value: function () {
                var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, i = t.getFirst,
                    n = void 0 === i ? 1 : i, a = t.getRoot, r = void 0 === a ? 1 : a, o = t.tbList,
                    s = void 0 === o ? [] : o, l = t.folderList, c = void 0 === l ? [] : l, d = t.getAll;
                return void 0 !== d && d ? this.commonService.folder.getList().then(function (t) {
                    if (t) return t.forEach(function (t) {
                        return e.setUnfolded(t)
                    }), e.getTreeByApiData(t)
                }) : this.commonService.folder.getStructureWithParam({
                    get_first: n,
                    get_root: r,
                    tb_list: angular.toJson(s),
                    folder_list: angular.toJson(c)
                }).then(function (t) {
                    if (0 == t.status) return 0 == t.result.folder_list.length && t.result.folder_list.push({
                        folder_id: "folder_root",
                        has_unread: 1,
                        name: "",
                        seq_no: "",
                        tb_count: 0
                    }), p.WtbTree.prototype.maxDeep = t.result.level_limit || 5, e.getTreeByApiData(t.result.folder_list)
                })
            }
        }, {
            key: "getTreeByApiData", value: function (e) {
                var t = this;
                return e.forEach(function (i, n) {
                    if (i.parent_id = "tree_root", "folder_root" === i.folder_id) {
                        i.name = t.$translate.instant("wb.rootFolder"), i.open = !0, i.unfolded = !0, i.sub_folders = i.sub_folders || [];
                        var a = e[n - 1];
                        i.seq_no = a ? a.seq_no + 1 : ""
                    }
                }), {sub_folders: e, folder_id: "tree_root", tb_list: [], name: "全部", open: !0, unfolded: !0}
            }
        }, {
            key: "setUnfolded", value: function (e) {
                var t = this;
                e.unfolded = !0, e.sub_folders && e.sub_folders.forEach(function (i) {
                    e.sub_folders && t.setUnfolded(i)
                })
            }
        }, {
            key: "getClassName", value: function (e, t) {
                return "permission" == e ? this.permissionClassMap[t] : "unread" == e || "hit" == e ? this.defaultClassName[e] : this.defaultClassName[e] + t
            }
        }, {
            key: "chooseFolder", value: function (e) {
                var t = this, n = e.onSubmit, a = this.ngDialog.open({
                    templateUrl: i(626),
                    className: "ngdialog-theme-default ngdialog-choose-table-folder",
                    data: _.extend(e, {
                        onSubmit: function () {
                            var e = (0, s.default)(r.default.mark(function e(i) {
                                return r.default.wrap(function (e) {
                                    for (; ;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, n(i);
                                        case 2:
                                            t.ngDialog.close(a);
                                        case 3:
                                        case"end":
                                            return e.stop()
                                    }
                                }, e, t)
                            }));
                            return function (t) {
                                return e.apply(this, arguments)
                            }
                        }()
                    })
                })
            }
        }, {
            key: "chooseTb", value: function (e) {
                var t = this, n = e.onSubmit, a = this.ngDialog.open({
                    templateUrl: i(627),
                    className: "ngdialog-theme-default data-source choose-table-list",
                    data: _.extend(e, {
                        onSubmit: function () {
                            var e = (0, s.default)(r.default.mark(function e(i) {
                                return r.default.wrap(function (e) {
                                    for (; ;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, n(i);
                                        case 2:
                                            t.ngDialog.close(a);
                                        case 3:
                                        case"end":
                                            return e.stop()
                                    }
                                }, e, t)
                            }));
                            return function (t) {
                                return e.apply(this, arguments)
                            }
                        }()
                    })
                })
            }
        }, {
            key: "chooseTbList", value: function (e) {
                var t = this, n = e.onSubmit, a = this.ngDialog.open({
                    templateUrl: i(628),
                    className: "ngdialog-theme-default data-source choose-table-list",
                    data: _.extend(e, {
                        onSubmit: function () {
                            var e = (0, s.default)(r.default.mark(function e(i) {
                                return r.default.wrap(function (e) {
                                    for (; ;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, n(i);
                                        case 2:
                                            t.ngDialog.close(a);
                                        case 3:
                                        case"end":
                                            return e.stop()
                                    }
                                }, e, t)
                            }));
                            return function (t) {
                                return e.apply(this, arguments)
                            }
                        }()
                    })
                })
            }
        }, {
            key: "getVerifyCode", value: function (e) {
                var t = this, n = e.onSubmit, a = this.ngDialog.open({
                    templateUrl: i(629),
                    className: "ngdialog-theme-default ngDialog-width-320",
                    data: _.extend(e, {
                        onSubmit: function () {
                            var e = (0, s.default)(r.default.mark(function e(i) {
                                return r.default.wrap(function (e) {
                                    for (; ;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, n(i);
                                        case 2:
                                            t.ngDialog.close(a);
                                        case 3:
                                        case"end":
                                            return e.stop()
                                    }
                                }, e, t)
                            }));
                            return function (t) {
                                return e.apply(this, arguments)
                            }
                        }()
                    })
                })
            }
        }, {
            key: "updateOrigFolder", value: function (e) {
                return p.WtbTree.prototype.originals.getFolderInstById(e).getTbList()
            }
        }, {
            key: "updateOrigTree", value: function () {
                return !p.WtbTree.prototype.originals && new p.WtbTree({
                    wtbListService: this,
                    commonService: this.commonService,
                    $translate: this.$translate
                }), p.WtbTree.prototype.originals.changeBroadcast({result: {needUpdate: !0}})
            }
        }, {
            key: "filterNoPermissionTb", value: function (e, t) {
                var i = this, n = e.tb_list || [];
                e.tb_list = n.filter(function (e) {
                    return 2 != e.permission_type
                }), e.sub_folders && e.sub_folders.length > 0 && (e.sub_folders.forEach(function (e, t) {
                    return i.filterNoPermissionTb(e, t)
                }), e.sub_folders = e.sub_folders.filter(function (e) {
                    return 0 != e.tb_list.length || e.sub_folders && e.sub_folders.length > 0
                }))
            }
        }]), e
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.CheckFolder = void 0;
    var a = i(13), r = n(a), o = i(17), s = n(o);
    t.CheckFolder = function () {
        function e(t) {
            var i = t.checkTbMap, n = t.checkFolderMap, a = t.folderInst, o = t.onCheckTb;
            (0, r.default)(this, e), this.checkTbMap = i, this.checkFolderMap = n, this.folderInst = a, this.folderId = a.folderId, this.check = null, this.checkTbLen = null, this.checkHalf = !1, this.onCheckTb = o
        }

        return (0, s.default)(e, [{
            key: "updateParentFolder", value: function () {
                var e = this, t = this.folderInst.parentFolder;
                t && _.forEachRight(t.ancestors, function (t) {
                    e.checkFolderMap[t.folderId].updateUnknow()
                })
            }
        }, {
            key: "updateUnknow", value: function () {
                var e = this, t = _.find(this.folderInst.sub_folders, function (t) {
                    return !e.checkFolderMap[t.folderId].check
                }) || _.find(this.folderInst.tb_list, function (t) {
                    return !e.checkTbMap[t.tbId]
                });
                this.check = !t;
                var i = _(this.folderInst.sub_folders).map(function (t) {
                    return e.checkFolderMap[t.folderId].checkTbLen
                }).filter(function (e) {
                    return !!e
                }).sum(), n = this.folderInst.tb_list.filter(function (t) {
                    return e.checkTbMap[t.tbId]
                }).length;
                this.checkTbLen = i + n, this.check || !this.check && 0 == this.checkTbLen ? this.checkHalf = !1 : this.checkHalf = !0
            }
        }, {
            key: "updateByInit", value: function (e) {
                this.checkTbLen = e, this.folderInst.tb_count == e && 0 != e ? this.check = !0 : this.check = !1, !this.check && e > 0 ? this.checkHalf = !0 : this.checkHalf = !1
            }
        }, {
            key: "updateByCheck", value: function (e) {
                var t = this;
                this.check = e, this.checkHalf = !1, this.folderInst.tb_list.forEach(function (i) {
                    t.checkTbMap[i.tbId] = e, t.onCheckTb && "function" == typeof t.onCheckTb && t.onCheckTb(i, e)
                });
                var i = _(this.folderInst.sub_folders).map(function (i) {
                    return t.checkFolderMap[i.folderId].updateByCheck(e)
                }).sum();
                return e ? this.isDeepest ? this.checkTbLen = this.folderInst.tb_list.length : this.checkTbLen = i : this.checkTbLen = 0, this.checkTbLen
            }
        }, {
            key: "isDeepest", get: function () {
                return 0 == this.folderInst.sub_folders.length
            }
        }]), e
    }()
}, function (e, t) {
    e.exports = "/dist/static/worktable/folder-list/choose-folder/choose-folder.html"
}, function (e, t) {
    e.exports = "/dist/static/worktable/folder-list/choose-tb/choose-worktable.html"
}, function (e, t) {
    e.exports = "/dist/static/worktable/folder-list/choose-tb/choose-worktable-list.html"
}, function (e, t) {
    e.exports = "/dist/static/worktable/folder-list/batch-delete/verify-code.html"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbListComponent = void 0;
    var a, r, o = i(64), s = n(o), l = i(65), c = n(l), d = i(13), u = n(d), p = i(17), f = n(p), h = i(170), g = i(37),
        m = i(337), v = t.WtbListComponent = (a = (0, g.ngComponent)(["$parse", function (e) {
            "ngInject";
            return {
                scope: !0,
                controller: v,
                controllerAs: "wtbListCtrl",
                restrict: "E",
                transclude: !0,
                replace: !0,
                template: '\n\t\t\t<div class="wtb-list">\n\t\t\t\t<div ng-if="wtbListCtrl.loadStruct" ng-loading-gif></div>\n\t\t\t\t<div ng-transclude class="height100-i"></div>\n\t\t\t</div>\n\t\t',
                compile: function (t, i, n) {
                    return {
                        pre: function (t, i, n) {
                            (arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}).ngOnInit(e(n.wtbListOutput)(t.$parent))
                        }
                    }
                }
            }
        }]))(r = function () {
            function e(t, i, n, a) {
                "ngInject";
                (0, u.default)(this, e), this.loadStruct = !1, this.loadFolderList = !1, this.commonService = t, this.$scope = i, this.$translate = n, this.wtbListService = a, this.queryInst = {}, this.listInst = {}, this.isDestory = !1, this.openedMap = null, this.wtbTreeGetterFun = function () {
                }
            }

            return e.$inject = ["commonService", "$scope", "$translate", "wtbListService"], (0, f.default)(e, [{
                key: "ngOnInit",
                value: function () {
                    function e() {
                        return t.apply(this, arguments)
                    }

                    var t = (0, c.default)(s.default.mark(function e() {
                        var t = this, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                        return s.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    return this.setConfigToThis(i), this.origWtbTree = new m.WtbTree({
                                        commonService: this.commonService,
                                        $translate: this.$translate,
                                        wtbListService: this.wtbListService
                                    }), this.wtbTree = this.origWtbTree, e.next = 5, this.updateStruct();
                                case 5:
                                    this.callback.onInit && this.callback.onInit(this.wtbTree), this.$scope.$on("$destroy", function () {
                                        t.isDestory = !0, t.watchDispose && t.watchDispose(), t.wtbTree.destory(), t.origWtbTree.destory()
                                    });
                                case 7:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }, {
                key: "setConfigToThis", value: function () {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    this.output = e, this.output.ctrl = this, this.config = {}, _.extend(this.config, {
                        defaultId: "",
                        showRootUi: !1,
                        openWithVm: !1,
                        origGetFun: null
                    }, e), this.callback = {}, _.extend(this.callback, {
                        onSetFolderList: null,
                        onInit: null,
                        onAwaitTree: null
                    }, e)
                }
            }, {
                key: "_watchTreeChange", value: function () {
                    var e = this;
                    this.watchDispose && this.watchDispose(), this.watchDispose = (0, h.reaction)(function () {
                        return e.wtbTree.broadcast.data
                    }, function (t) {
                        e.wtbTree == e.origWtbTree ? t.result.needUpdate && e.updateStruct() : e.updateCurTree()
                    })
                }
            }, {
                key: "setQueryText", value: function (e) {
                    this.queryInst.queryText = e
                }
            }, {
                key: "updateStruct", value: function () {
                    function e() {
                        return t.apply(this, arguments)
                    }

                    var t = (0, c.default)(s.default.mark(function e() {
                        var t, i, n, a, r = this;
                        return s.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    return this.loadStruct = !0, this.setQueryText(""), t = this.$scope.$root, this.$scope.$$phase || t && t.$$phase || this.$scope.$digest(), i = void 0, n = void 0, this.config.origGetFun ? (i = this.config.origGetFun, n = !1) : (i = this.origWtbTree.getFolderList.bind(this.origWtbTree), n = !0), this.wtbTreeGetterFun = (0, c.default)(s.default.mark(function e() {
                                        return s.default.wrap(function (e) {
                                            for (; ;) switch (e.prev = e.next) {
                                                case 0:
                                                    return e.next = 2, i(r.origWtbTree);
                                                case 2:
                                                    return e.abrupt("return", e.sent);
                                                case 3:
                                                case"end":
                                                    return e.stop()
                                            }
                                        }, e, r)
                                    })), e.next = 10, this.wtbTreeGetterFun();
                                case 10:
                                    if (a = e.sent, this.isDestory) {
                                        e.next = 16;
                                        break
                                    }
                                    return this.callback.onAwaitTree && this.callback.onAwaitTree(this.wtbTree), this.loadStruct = !1, e.next = 16, this._updateFolderVm(n ? null : a);
                                case 16:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }, {
                key: "updateCurTree", value: function () {
                    function e(e) {
                        return t.apply(this, arguments)
                    }

                    var t = (0, c.default)(s.default.mark(function e(t) {
                        var i;
                        return s.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    return this.loadFolderList = !0, i = void 0, t && (this.wtbTreeGetterFun = t), e.prev = 3, e.next = 6, this.wtbTreeGetterFun({
                                        broadcastData: this.wtbTree.broadcast.data,
                                        treeInst: this.wtbTree
                                    });
                                case 6:
                                    return i = e.sent, this.loadFolderList = !1, e.next = 10, this._updateFolderVm(i);
                                case 10:
                                    e.next = 14;
                                    break;
                                case 12:
                                    e.prev = 12, e.t0 = e.catch(3);
                                case 14:
                                    return e.abrupt("return", this.wtbTree);
                                case 15:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this, [[3, 12]])
                    }));
                    return e
                }()
            }, {
                key: "_updateFolderVm", value: function () {
                    function e(e) {
                        return t.apply(this, arguments)
                    }

                    var t = (0, c.default)(s.default.mark(function e(t) {
                        var i;
                        return s.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    return t ? (this.wtbTree != this.origWtbTree && this.wtbTree.destory(), this.wtbTree = new m.WtbTree({
                                        commonService: this.commonService,
                                        $translate: this.$translate,
                                        listData: t,
                                        wtbListService: this.wtbListService
                                    })) : (this.setQueryText(""), this.wtbTree = this.origWtbTree), this._watchTreeChange(), e.next = 5, this.wtbTree.getFolderList();
                                case 5:
                                    return i = e.sent, !this.openedMap && this._setOpenedMap(), e.next = 9, this.listInst.updateMode(i);
                                case 9:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }, {
                key: "_setOpenedMap", value: function () {
                    var e = this;
                    this.openedMap = {};
                    var t = this.wtbTree.getTbInstById(this.config.defaultId), i = [];
                    if (t) i = t.parentFolder.ancestors; else {
                        var n = this.wtbTree.getFolderInstById(this.config.defaultId);
                        n && (i = n.ancestors)
                    }
                    i.forEach(function (t, i) {
                        e.config.openWithVm && t.toggleFolder(!0), e.openedMap[t.folderId] = {
                            folderId: t.folderId,
                            index: i
                        }
                    })
                }
            }, {
                key: "targetTb", value: function () {
                    function e(e) {
                        return t.apply(this, arguments)
                    }

                    var t = (0, c.default)(s.default.mark(function e(t) {
                        var i, n, a;
                        return s.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    if (i = this.wtbTree.getTbInstById(t)) {
                                        e.next = 5;
                                        break
                                    }
                                    return e.next = 4, this.wtbTree.getTbAsync(t);
                                case 4:
                                    i = e.sent;
                                case 5:
                                    if (i) {
                                        e.next = 7;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 7:
                                    return n = i.parentFolder.ancestors, n.forEach(function (e, t) {
                                        e.toggleFolder(!0)
                                    }), a = n[1] ? n[1].folder_id : i.tbId, this.listInst.goToId(a, i.tbId), e.abrupt("return", i);
                                case 12:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }]), e
        }()) || r
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbSearchComponent = void 0;
    var a, r, o = i(64), s = n(o), l = i(84), c = n(l), d = i(65), u = n(d), p = i(13), f = n(p), h = i(17), g = n(h),
        m = i(37), v = t.WtbSearchComponent = (a = (0, m.ngComponent)(function () {
            return {
                scope: {searchHandle: "&", searchChange: "&", afterSearchApi: "&", searchFun: "&"},
                require: "^wtbList",
                controller: v,
                controllerAs: "wtbSearchCtrl",
                restrict: "E",
                template: '\n\t        <div class="query-box auto">\n\t            <input type="text" class="search-worktable-input query-text" \n\t                ng-model="wtbSearchCtrl.queryText" \n\t                ng-focus="wtbSearchCtrl.showPlaceholder()" \n\t                ng-blur="wtbSearchCtrl.hidePlaceholder()" \n\t                ng-change="wtbSearchCtrl.searchWtb()"\n\t                ng-class="{\'has-text\': wtbSearchCtrl.queryText}"\n\t                placeholder="{{wtbSearchCtrl.searchPlaceholder}}"\n\t                ng-disabled="lazyLWtb.loadStruct"\n\t                ng-change="wtbSearchCtrl.searchWtb()">\n\t            <!-- <div class="searching-folder-table-loading" ng-loading-gif size="size-1x" ng-show="searchLoading"></div> -->\n\t        </div>\n\t    ',
                replace: !0,
                transclude: !0,
                link: function (e, t, i, n) {
                    e.lazyLWtb = n, e.wtbSearchCtrl.ngOnInit(n, $(t).find("input"), i.searchFun)
                }
            }
        }))(r = function () {
            function e(t, i, n, a, r) {
                "ngInject";
                var o = this;
                (0, f.default)(this, e), this.searchWtb = $.debounce(300, function (e) {
                    var t = void 0, i = o.queryText;
                    void 0 == i && null == i || (i = i.trim()), t = o.customQuery ? o.$scope.searchFun : o._searchWtbByApi, o.$scope.searchChange(i), o.wtbListCtrl.updateCurTree(function () {
                        return t.call(o, {queryText: i})
                    }).then(function () {
                        o.$scope.searchHandle()
                    })
                }), this.$scope = n, this.$translate = a, this.commonService = t, this.pendingRequests = i, this.wtbListService = r, this.queryText = "", this.searchPlaceholder = ""
            }

            return e.$inject = ["commonService", "pendingRequests", "$scope", "$translate", "wtbListService"], (0, g.default)(e, [{
                key: "ngOnInit",
                value: function (e, t, i) {
                    var n = this;
                    this.wtbListCtrl = e, this.inputElement = t, this.wtbListCtrl.queryInst = this, this.customQuery = i, this.$scope.$on("$destroy", function () {
                        n.inputElement.off("keyup.filterFolderTable")
                    }), this.inputElement.on("keyup.filterFolderTable", function (e) {
                        if (e && 13 != e.keyCode) return !1;
                        n.searchWtb()
                    })
                }
            }, {
                key: "showPlaceholder", value: function () {
                    this.searchPlaceholder = this.$translate.instant("dash.searchChart")
                }
            }, {
                key: "hidePlaceholder", value: function () {
                    this.searchPlaceholder = ""
                }
            }, {
                key: "_searchWtbByApi", value: function () {
                    function e(e) {
                        return t.apply(this, arguments)
                    }

                    var t = (0, u.default)(s.default.mark(function e(t) {
                        var i, n, a = t.queryText;
                        return s.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    if (i = null, this.pendingRequests.cancelOne("/api/folder/filter"), !a) {
                                        e.next = 7;
                                        break
                                    }
                                    return e.next = 5, this.commonService.folder.filterFolderAndTable({filter_str: a}).catch(function (e) {
                                        return c.default.reject(e)
                                    });
                                case 5:
                                    n = e.sent, n && 0 == n.status && (i = this.wtbListService.getTreeByApiData(n.result.folder_list));
                                case 7:
                                    if (!this.$scope.afterSearchApi || "function" != typeof this.$scope.afterSearchApi) {
                                        e.next = 11;
                                        break
                                    }
                                    return e.abrupt("return", this.$scope.afterSearchApi({
                                        folderList: i,
                                        queryText: a
                                    }) || i);
                                case 11:
                                    return e.abrupt("return", i);
                                case 12:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }]), e
        }()) || r
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbContentComponent = void 0;
    var a, r, o = i(84), s = n(o), l = i(64), c = n(l), d = i(65), u = n(d), p = i(13), f = n(p), h = i(17), g = n(h),
        m = i(170), v = i(344), y = i(37), b = t.WtbContentComponent = (a = (0, y.ngComponent)(["$parse", function (e) {
            "ngInject";
            return {
                scope: !0,
                require: "^wtbList",
                restrict: "E",
                controller: b,
                controllerAs: "wtbSliceCtrl",
                template: '\n\t\t\t<div class="ds-list-wrapper pr">\n\t\t\t\t<div class="J-table-list height100-i" style="overflow: auto;">\n\t\t\t\t\t<div class="load-more-list top" style="position: relative; display: block;"\n\t\t\t\t\t\tng-if="wtbSliceCtrl.needSlice && wtbSliceCtrl.loadingTop">\n\t\t\t\t\t    <div class="loader-inner ball-spin-fade-loader">\n\t\t\t\t\t        <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div>\n\t\t\t\t\t    </div>\n\t\t\t\t\t    <span><span bdp-replace bo-text="\'loading\'|translate"></span></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p ng-show="wtbSliceCtrl.showEmptyTip" class="cr-999 pd10">\n\t\t\t\t\t\t<span bdp-replace bo-text="\'wb.noWorksheet\'|translate"></span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<div ng-loading-gif ng-show="wtbListCtrl.loadFolderList"></div>\n\t\t\t\t\t<div ng-transclude></div>\n\t\t\t\t\t<div class="load-more-list bottom" style="position: relative; bottom: 0; display: block;"\n\t\t\t\t\t\tng-if="wtbSliceCtrl.needSlice && wtbSliceCtrl.loadingBottom">\n\t\t\t\t\t    <div class="loader-inner ball-spin-fade-loader">\n\t\t\t\t\t        <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div>\n\t\t\t\t\t    </div>\n\t\t\t\t\t    <span><span bdp-replace bo-text="\'loading\'|translate"></span></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <div class="load-list-go-top" style="display:block"\n\t\t\t    \tng-click="wtbSliceCtrl.goToId(null, \'top\')" \n\t\t\t    \tng-if="wtbSliceCtrl.needSlice && wtbSliceCtrl.showGoTop"><span class="bdp-icon-wrap ico-go-top"></span></div>\n\t\t\t</div>\n\t\t',
                replace: !0,
                transclude: !0,
                link: function (e, t, i, n) {
                    e.wtbListCtrl = n, e.wtbSliceCtrl.ngOnInit({
                        scrollEle: t.find(".J-table-list"),
                        wtbListCtrl: n,
                        pageLen: i.pageLen,
                        actionLen: i.actionLen,
                        pageMax: i.pageMax
                    })
                }
            }
        }]))(r = function () {
            function e(t) {
                "ngInject";
                (0, f.default)(this, e), this.loadingTop = !1, this.loadingBottom = !1, this.showGoTop = !1, this.needSlice = !1, this.folderList = [], this.$scope = t
            }

            return e.$inject = ["$scope"], (0, g.default)(e, [{
                key: "ngOnInit", value: function () {
                    function e() {
                        return t.apply(this, arguments)
                    }

                    var t = (0, u.default)(c.default.mark(function e() {
                        var t = this, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                            n = i.pageLen, a = void 0 === n ? 50 : n, r = i.actionLen, o = void 0 === r ? 200 : r,
                            s = i.pageMax, l = void 0 === s ? 100 : s, d = i.wtbListCtrl, u = i.scrollEle;
                        return c.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    this.wtbListCtrl = d, d.listInst = this, this.pageLen = a, this.actionLen = o, this.pageMax = l, this.reaction = null, this.scrollEle = u, this.beforeScrollTop = this.scrollEle.scrollTop(), this.$scope.$on("$destory", function () {
                                        t.scrollEle.off("scroll.renderTable"), t.reaction && t.reaction()
                                    });
                                case 9:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }, {
                key: "updateMode", value: function () {
                    function e(e) {
                        return t.apply(this, arguments)
                    }

                    var t = (0, u.default)(c.default.mark(function e(t) {
                        var i, n, a = this;
                        return c.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    return this.reaction && this.reaction(), this.original = t, this.initSlice(), i = null, this.needSlice ? (n = _.find(this.wtbListCtrl.openedMap, function (e) {
                                        return 1 == e.index
                                    }), i = n && ("folder_root" == n.folderId ? this.wtbListCtrl.config.defaultId : n.folderId) || null, this.scrollEle.off("scroll.renderTable").on("scroll.renderTable", bdp.utils.throttle(function (e) {
                                        return a._handleScroll(e)
                                    }, 50)), this._autoSlice()) : this.scrollEle.off("scroll.renderTable"), this.setUiRoot(), e.next = 8, this.goToId(i, "active");
                                case 8:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }, {
                key: "setUiRoot", value: function () {
                    var e = this.wtbListCtrl.callback.onSetFolderList;
                    e || this.needSlice ? (this.folderList = [new v.WtbFolder({
                        data: _.extend({}, this.original[0], {
                            sub_folders: [],
                            tb_list: []
                        }), commonService: this.original[0].commonService, wtbTree: this.original[0].wtbTree
                    })], this.folderList[0].setSubFolders(this.original[0].sub_folders), this.folderList[0].setTbList(this.original[0].tb_list), e && e({
                        folderList: this.folderList,
                        queryText: this.wtbListCtrl.queryInst.queryText,
                        treeInst: this.original[0].wtbTree
                    })) : this.folderList = this.original
                }
            }, {
                key: "initSlice", value: function () {
                    if (this.wtbListCtrl.config.showRootUi) this.sliceList = this.original[0].sub_folders.slice(); else {
                        var e = _.findLast(this.original[0].sub_folders, function (e) {
                            return "folder_root" == e.folder_id
                        }), t = e ? e.tb_list : [];
                        this.sliceList = this.original[0].sub_folders.concat(t)
                    }
                    this.needSlice = this.sliceList.length > this.actionLen
                }
            }, {
                key: "_autoSlice", value: function () {
                    var e = this;
                    this.reaction && this.reaction(), this.reaction = (0, m.reaction)(function () {
                        var t = _.findLast(e.original[0].sub_folders, function (e) {
                            return "folder_root" == e.folder_id
                        }), i = t ? t.tb_list : [];
                        return e.original[0].sub_folders.concat(i)
                    }, function () {
                        var t = e.flatList[Math.floor(e.flatList.length / 2)], i = t.tb_id || t.folder_id;
                        e.initSlice(), e.goToId(i)
                    })
                }
            }, {
                key: "loadMoreList", value: function (e) {
                    var t = this, i = this.sliceList, n = this.flatList, a = void 0, r = void 0, o = void 0;
                    return this.needSlice ? ("top" == e ? (o = this.flatList[0].tb_id || this.flatList[0].folder_id, r = _.findIndex(i, function (e) {
                        return e == n[0]
                    }), a = Math.max(r - this.pageLen, 0), _.forEachRight(i.slice(a, r), function (e) {
                        return n.unshift(e)
                    }), n.length > this.pageMax && (this.flatList = n.slice(0, this.pageMax))) : (o = this.flatList[this.flatList.length - 1].tb_id || this.flatList[this.flatList.length - 1].folder_id, a = _.findIndex(i, function (e) {
                        return e == n[n.length - 1]
                    }) + 1, r = Math.min(a + this.pageLen, i.length), _.forEach(i.slice(a, r), function (e) {
                        return n.push(e)
                    }), n.length > this.pageMax && (this.flatList = n.slice(n.length - 1 - this.pageMax))), this._setFlatListToFolderList(), new s.default(function (e, i) {
                        e({
                            data: t.folderList,
                            isTop: t.flatList[0] == t.sliceList[0],
                            isBottom: t.flatList[t.flatList.length - 1] == t.sliceList[t.sliceList.length - 1],
                            curTopDataId: o
                        })
                    })) : new s.default(function (e, i) {
                        e({data: t.folderList})
                    })
                }
            }, {
                key: "goToId", value: function (e, t) {
                    var i = this, n = void 0;
                    return this.showGoTop = !1, this.needSlice ? (this.flatList = this._getFlatList(e), this._setFlatListToFolderList()) : this.wtbListCtrl.output.vm = this.folderList[0].sub_folders, this.$scope.$$phase || this.$scope.$apply(), t && setTimeout(function () {
                        n = "active" == t ? i.scrollEle.find(".active")[0] : "top" == t ? {} : i.scrollEle.find('[data-uniq-id="' + t + '"]')[0], i._scrollToTarget(n)
                    }, 0), new s.default(function (e, t) {
                        e({data: i.folderList})
                    })
                }
            }, {
                key: "_getFlatList", value: function (e) {
                    var t = void 0;
                    if (this.needSlice) {
                        var i = this.sliceList, n = Math.max(_.findIndex(i, function (t) {
                            return t.tb_id == e || t.folder_id == e
                        }), 0), a = 0, r = 0, o = this.pageLen / 2;
                        n < o && (r = o - n), this.sliceList.length - n < o && (a = this.sliceList.length - n);
                        var s = Math.max(n - o - 1 - a, 0), l = Math.min(n + o + r, this.sliceList.length);
                        t = i.slice(s, l)
                    } else t = this.sliceList;
                    return t
                }
            }, {
                key: "_setFlatListToFolderList", value: function () {
                    var e = [], t = [];
                    this.flatList.forEach(function (i) {
                        i.folder_id && "folder_root" != i.folder_id && e.push(i), i.tb_id && t.push(i)
                    }), this.isTop = this.flatList[0] == this.sliceList[0], this.isBottom = this.flatList[this.flatList.length - 1] == this.sliceList[this.sliceList.length - 1];
                    var i = this.original[0].sub_folders[this.original[0].sub_folders.length - 1],
                        n = !!_.findLast(this.flatList, function (e) {
                            return "folder_root" == e.folderId
                        });
                    this.wtbListCtrl.config.showRootUi ? n && e.push(i) : t.length > 0 && e.push(new v.WtbFolder({
                        data: _.extend({}, i.getApiData(), {
                            sub_folders: [],
                            tb_list: t
                        }), commonService: this.original[0].commonService, wtbTree: this.original[0].wtbTree
                    })), this.folderList[0].setSubFolders(e), this.wtbListCtrl.output.vm = this.folderList[0].sub_folders
                }
            }, {
                key: "_scrollToTarget", value: function (e) {
                    var t = this.scrollEle, i = $(e), n = void 0;
                    if (i[0] && !_.isEmpty(e)) {
                        var a = t.scrollTop(), r = t.height();
                        n = a + (i.offset().top - t.offset().top) - r / 2
                    } else n = 0;
                    n = this.needSlice ? Math.max(4, n) : n, t.scrollTop(n)
                }
            }, {
                key: "_handleScroll", value: function () {
                    function e(e) {
                        return t.apply(this, arguments)
                    }

                    var t = (0, u.default)(c.default.mark(function e(t) {
                        var i, n, a, r, o;
                        return c.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    if (i = this.scrollEle, !this.loadingTop && !this.loadingBottom) {
                                        e.next = 4;
                                        break
                                    }
                                    return this.beforeScrollTop = i.scrollTop(), e.abrupt("return", !1);
                                case 4:
                                    if (n = i.scrollTop(), a = i.height(), r = i[0].scrollHeight, o = n - this.beforeScrollTop, this.beforeScrollTop = n, this.showGoTop = n > 4 && o <= 0, !this.$scope.$$phase && this.$scope.$digest(), !(o < 0 && n < 4) || this.isTop) {
                                        e.next = 14;
                                        break
                                    }
                                    return e.next = 14, this._addMoreData("top", "loadingTop");
                                case 14:
                                    if (!(o > 0 && r - n - a < 4) || this.isBottom) {
                                        e.next = 17;
                                        break
                                    }
                                    return e.next = 17, this._addMoreData("bottom", "loadingBottom");
                                case 17:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }, {
                key: "_addMoreData", value: function () {
                    function e(e, i) {
                        return t.apply(this, arguments)
                    }

                    var t = (0, u.default)(c.default.mark(function e(t, i) {
                        var n, a, r = this;
                        return c.default.wrap(function (e) {
                            for (; ;) switch (e.prev = e.next) {
                                case 0:
                                    return this[i] = !0, this.$scope.$$phase || this.$scope.$digest(), e.next = 4, new s.default(function (e, t) {
                                        setTimeout(e, 50)
                                    });
                                case 4:
                                    return e.next = 6, this.loadMoreList(t).catch(function () {
                                    });
                                case 6:
                                    n = e.sent, a = n.curTopDataId, this[i] = !1, !this.$scope.$$phase && this.$scope.$apply(), setTimeout(function () {
                                        r._scrollToTarget(r.scrollEle.find('[data-uniq-id="' + a + '"]')[0])
                                    }, 0);
                                case 11:
                                case"end":
                                    return e.stop()
                            }
                        }, e, this)
                    }));
                    return e
                }()
            }, {
                key: "showEmptyTip", get: function () {
                    return !this.wtbListCtrl.config.showRootUi && (!this.wtbListCtrl.loadFolderList && this.folderList[0] && this.folderList[0].isEmpty)
                }
            }]), e
        }()) || r
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbOperateItemDirective = void 0;
    var n, a, r = i(13), o = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(r), s = i(170), l = i(37);
    t.WtbOperateItemDirective = (n = (0, l.ngDirective)(["wtbAsideService", "$parse", function (e, t) {
        "ngInject";
        return {
            scope: !1, restrict: "A", link: function (i, n, a) {
                var r = t(a.wtbOperateItem)(i), o = $(n), l = (0, s.reaction)(function () {
                    return e.curEditFolderId
                }, function (e) {
                    r == e ? o.addClass("hide-right") : o.hasClass("hide-right") && o.removeClass("hide-right")
                }), c = (0, s.reaction)(function () {
                    return e.curOptItemId
                }, function (e) {
                    r == e ? o.addClass("show-right") : o.hasClass("show-right") && o.removeClass("show-right")
                });
                i.$on("$destory", function () {
                    l(), c()
                })
            }
        }
    }]))(a = function e() {
        (0, o.default)(this, e)
    }) || a
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbFolderDirective = void 0;
    var a, r, o = i(84), s = n(o), l = i(13), c = n(l), d = i(17), u = n(d), p = i(37), f = i(170),
        h = t.WtbFolderDirective = (a = (0, p.ngDirective)(["$parse", "wtbListService", function (e, t) {
            "ngInject";
            return {
                scope: !1,
                controller: h,
                controllerAs: "loadItem",
                require: "^wtbList",
                restrict: "A",
                compile: function (i, n, a) {
                    return {
                        pre: function (t, i, n) {
                            var a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}, r = t.loadItem,
                                o = e(n.wtbFolder)(t);
                            r.ngOnInit({
                                folderInst: o,
                                wtbListCtrl: a,
                                openWithVm: !!a.queryInst.queryText || a.config.openWithVm,
                                defaultOpen: !!a.openedMap[o.folder_id]
                            })
                        }, post: function (e, i, n, a) {
                            var r = e.loadItem.folder;
                            r.isRoot && i.addClass("is-root");
                            var o = t.getClassName("depth", r.depth);
                            "folder_root" != r.folderId || a.config.showRootUi || (o = t.getClassName("depth", r.depth - 1)), i.addClass(o), i.attr("data-uniq-id", r.folder_id)
                        }
                    }
                }
            }
        }]))(r = function () {
            function e(t, i) {
                "ngInject";
                (0, c.default)(this, e), this.$scope = t, this.commonService = i
            }

            return e.$inject = ["$scope", "commonService"], (0, u.default)(e, [{
                key: "ngOnInit", value: function (e) {
                    var t = this, i = e.folderInst, n = e.openWithVm, a = e.defaultOpen, r = void 0 !== a && a,
                        o = e.wtbListCtrl;
                    if (this.folder = i, this.openWithVm = n, this.wtbListCtrl = o, this.openWithVm || this.folder.isRoot || "folder_root" == this.folder.folderId) {
                        var s = (0, f.autorun)(function () {
                            t.open = t.folder.open
                        });
                        this.$scope.$on("$destroy", function () {
                            return s()
                        })
                    } else this.open = r
                }
            }, {
                key: "toggleFolder", value: function () {
                    var e = this, t = this.folder;
                    return this.openWithVm ? t.toggleFolder() : (this.open = !this.open, this.open ? this.wtbListCtrl.openedMap[t.folderId] = {folderId: t.folderId} : delete this.wtbListCtrl.openedMap[t.folderId]), t.getTbNeedApi ? (this.loadSubFolder = !0, t.getTbList().finally(function () {
                        e.loadSubFolder = !1
                    }).catch(function () {
                        t.toggleFolder(!1)
                    })) : s.default.resolve()
                }
            }]), e
        }()) || r
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbFolderContentDirective = void 0;
    var n, a, r = i(13), o = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(r), s = i(37);
    t.WtbFolderContentDirective = (n = (0, s.ngDirective)(["$parse", "wtbListService", function (e, t) {
        "ngInject";
        return {
            scope: !1, require: ["^wtbFolder", "?^wtbList"], restrict: "A", link: function (e, i, n, a) {
                var r = a[0], o = a[1] || {};
                e.folderCtrl = r, (r.folder.isRoot || !o.config.showRootUi && "folder_root" == r.folder.folderId) && i.addClass("root-hide"), r.folder.mark && i.addClass(t.getClassName("hit")), i.addClass("wtb-pl-content")
            }
        }
    }]))(a = function e() {
        (0, o.default)(this, e)
    }) || a
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbFolderChildComponent = void 0;
    var n, a, r = i(13), o = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(r), s = i(37);
    t.WtbFolderChildComponent = (n = (0, s.ngComponent)(function () {
        "ngInject";
        return {
            scope: !0,
            require: "^wtbFolder",
            restrict: "E",
            template: '\n            <div ng-if="folderCtrl.open">\n                <div class="wtb-pl-child" ng-if="folderCtrl.loadSubFolder">\n                    <span class="normal-font line-height-32" bo-text="\'wb.loadingWorktables\' | translate"></span>\n                </div>\n                <div ng-if="!folderCtrl.loadSubFolder" ng-transclude></div>\n                <div class="wtb-pl-child" ng-if="!folderCtrl.loadSubFolder && getIsEmpty() && !folderCtrl.folder.isRoot">\n                    <span class="normal-font line-height-32" bo-text="\'wb.emptyFolder\' | translate"></span>\n                </div>\n            </div>\n        ',
            replace: !1,
            transclude: !0,
            link: function (e, t, i, n) {
                e.folderCtrl = n, e.getIsEmpty = function () {
                    return "folder_root" != n.folder.folderId && n.folder.isEmpty
                }
            }
        }
    }))(a = function e() {
        (0, o.default)(this, e)
    }) || a
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbLoadHandleDirective = void 0;
    var a, r, o = i(13), s = n(o), l = i(84), c = n(l), d = i(37);
    t.WtbLoadHandleDirective = (a = (0, d.ngDirective)(["$parse", function (e) {
        "ngInject";
        return {
            scope: {wtbLoadHandle: "&", handleBefore: "&"}, require: "^wtbFolder", link: function (e, t, i, n) {
                t.on("click.loadTb", function (t) {
                    var a = e.wtbLoadHandle, r = e.handleBefore;
                    new c.default(function (e, t) {
                        i.handleBefore ? e(r()) : e()
                    }).then(function () {
                        n.toggleFolder().then(function (e, t) {
                            return a && "function" == typeof a && a()
                        }).then(function () {
                            e.$parent.$$phase || e.$root.$$phase || e.$parent.$apply()
                        })
                    })
                })
            }
        }
    }]))(r = function e() {
        (0, s.default)(this, e)
    }) || r
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbTableDirective = void 0;
    var n, a, r = i(13), o = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(r), s = i(37);
    t.WtbTableDirective = (n = (0, s.ngDirective)(["$parse", "wtbListService", function (e, t) {
        "ngInject";
        return {
            scope: !1, link: function (i, n, a) {
                var r = e(a.wtbTable)(i);
                n.attr("data-uniq-id", r.tb_id), n.addClass("wtb-pl-child"), r.mark && n.addClass(t.getClassName("hit"))
            }
        }
    }]))(a = function e() {
        (0, o.default)(this, e)
    }) || a
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbIconHandleDirective = void 0;
    var n, a, r = i(13), o = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(r), s = i(37), l = i(170);
    t.WtbIconHandleDirective = (n = (0, s.ngDirective)(["$state", "$parse", "wtbListService", function (e, t, i) {
        "ngInject";
        return {
            restrict: "A", replace: !1, scope: !0,
            link: function (n, a, r) {
                var o = t(r.wtbIconHandle)(n), s = [], c = (0, l.autorun)(function () {
                    var t = [];
                    o.unread && "data_source" == e.current.name && t.push(i.getClassName("unread")), t.push(i.getClassName("type", o.icoType)), t.push(i.getClassName("permission", o.permission_type)), a.removeClass(s.join(" ")).addClass(t.join(" ")), s = t
                });
                a.addClass("ico-no-opacity"), n.$on("$destroy", function () {
                    return c()
                })
            }
        }
    }]))(a = function e() {
        (0, o.default)(this, e)
    }) || a
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbLabelComponent = void 0;
    var n, a, r = i(13), o = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(r), s = i(37), l = i(170);
    t.WtbLabelComponent = (n = (0, s.ngComponent)(["$parse", function (e) {
        "ngInject";
        return {
            scope: !0,
            restrict: "E",
            replace: !0,
            transclude: !0,
            template: '\n        \t<div class="label-wrap">\n\t\t\t\t<div class="nowrap label-other" ng-transclude></div>\n\t\t\t\t<span class="item-label table nowrap J-wtb-label"></span>\n        \t</div>\n        ',
            link: function (t, i, n) {
                var a = e(n.labelHost)(t), r = n.needObserve, o = i.find(".J-wtb-label");
                n.unlimitWidth && i.addClass("unlimit-width");
                var s = (0, l.autorun)(function () {
                    a.label ? i.addClass("has-label") : i.removeClass("has-label"), o.text(a.label), o.attr("title", a.label)
                });
                !r && s(), t.$on("$destroy", function () {
                    return s()
                })
            }
        }
    }]))(a = function e() {
        (0, o.default)(this, e)
    }) || a
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbFolderItemComponent = void 0;
    var n, a, r = i(13), o = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(r), s = i(37);
    t.WtbFolderItemComponent = (n = (0, s.ngComponent)(["$parse", function (e) {
        "ngInject";
        return {
            scope: !1,
            require: "^wtbFolder",
            restrict: "E",
            replace: "true",
            template: '\n            <div class="operate-col3_size16_hover hide-right" wtb-folder-content>\n                <i class="bdp-icon ico-folder1 ico-no-opacity operate-col3_size16__left" \n                    ng-class="{\'ico-folder1-open\': folderCtrl.open}"></i>\n                <p class="operate-col3_size16__center nowrap"\n                   wtb-load-handle>\n                   <span class="operate-col3_size16__text" bo-title="folder.name" bo-text="folder.name"></span>\n                </p>\n            </div>\n        ',
            link: function (e, t, i, n) {
                i.limitWidth ? t.addClass("nowrap") : t.addClass("limit-width")
            }
        }
    }]))(a = function e() {
        (0, o.default)(this, e)
    }) || a
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.WtbSheetItemComponent = void 0;
    var n, a, r = i(13), o = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(r), s = i(37);
    t.WtbSheetItemComponent = (n = (0, s.ngComponent)(["$parse", function (e) {
        "ngInject";
        return {
            scope: !1,
            require: "^wtbFolder",
            restrict: "E",
            replace: "true",
            template: '\n            <div class="operate-col3_size16 hide-right">\n                <div class="col3_size16__content">\n                    <i class="bdp-icon operate-col3_size16__left graft-icon-disabled" wtb-icon-handle="tb"></i>\n                    <wtb-label label-host="tb" class="operate-col3_size16__center">\n                        <span class="graft-font-disabled" bo-text="tb.name"></span>\n                    </wtb-label>\n                    <i class="bdp-icon ico-sheet-active"></i>\n                </div>\n            </div>\n        ',
            link: function (t, i, n, a) {
                n.limitWidth ? i.addClass("nowrap") : i.addClass("limit-width"), e(n.disableTb)(t) && i.addClass("graft-disabled-wrapper")
            }
        }
    }]))(a = function e() {
        (0, o.default)(this, e)
    }) || a
}, function (e, t, i) {
    i(644).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "wtb-list_0cb531b2.css"
}, function (e, t, i) {
    "use strict";
    angular.module("BC.controllers.dataSource").directive("startEndDate", ["$timeout", "dateTimeByHalfHour", "errHint", "$jsTipTranslate", function (e, t, n, a) {
        return {
            restrict: "A",
            scope: {startDate: "=", endDate: "=", dateRangShow: "=", posAdapt: "=", complete: "&"},
            templateUrl: i(646),
            link: function (i, r, o) {
                function s(e) {
                    return Highcharts.dateFormat("%Y-%m-%d", e)
                }

                if (i.dateTimeByHalfHour = t, i.range = [i.startDate, i.endDate], i.range.length > 1) {
                    var l = i.range[0] ? i.range[0].split(" ")[1] || "00:00:00" : "00:00:00",
                        c = i.range[1] ? i.range[1].split(" ")[1] || "23:59:59" : "23:59:59";
                    i.range[0] || i.range[1] || (i.range[0] = s(new Date), i.range[1] = s(new Date)), i.range = i.range.concat([l, c])
                }
                if (i.$watch("startDate", function (e, t) {
                    null === e && null === i.endDate && (i.range = [s(new Date), s(new Date), "00:00:00", "23:59:59"])
                }), i.$watch("endDate", function (e, t) {
                    null === e && null === i.startDate && (i.range = [s(new Date), s(new Date), "00:00:00", "23:59:59"])
                }), i.posAdapt && r.hasClass("J-daterange-bdp-modal")) {
                    var d = r, u = d.offset(), p = d.height(), f = document.documentElement.clientHeight;
                    u.top + p > f && u.top > p && d.css({top: -p})
                }
                i.sure = function () {
                    var t = i.start_date ? s(new Date(i.start_date)) + " " + i.start_date_hour : null,
                        a = i.end_date ? s(new Date(i.end_date)) + " " + i.end_date_hour : null;
                    if (!t && !a) return n(i.tips["chart.dateRangeRequired"]), i.dateRangShow = !0, !1;
                    if (t && a) {
                        if (!i.start_date_hour) return n(i.tips["filter.startDateErr2"]), i.dateRangShow = !0, !1;
                        if (!i.end_date_hour) return n(i.tips["filter.endDateErr2"]), i.dateRangShow = !0, !1;
                        if (new Date(t) - new Date(a) > 0) return n(i.tips["filter.dateRangeInvalid"]), i.dateRangShow = !0, !1
                    } else {
                        if (t && !a && !i.start_date_hour) return n(i.tips["filter.startDateErr2"]), i.dateRangShow = !0, !1;
                        if (!t && a && !i.end_date_hour) return n(i.tips["filter.endDateErr2"]), i.dateRangShow = !0, !1
                    }
                    i.startDate = t, i.endDate = a, i.complete && e(function () {
                        i.complete()
                    }, 0)
                }, a(["filter.dateRangeInvalid", "chart.dateRangeRequired", "filter.startDateErr2", "filter.endDateErr2"], i)
            }
        }
    }])
}, function (e, t) {
    e.exports = "/dist/static/worktable/start-end-date/start-end-date.html"
}, function (e, t, i) {
    i(648).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "wtb-other_d5065d9a.css"
}, function (e, t, i) {
    i(650).replace(i.p, "")
}, function (e, t, i) {
    e.exports = i.p + "transform-configure_39d9100b.css"
}, function (e, t, i) {
    "use strict";

    function n(e, t, n, a, o, s) {
        return {
            restrict: "EA",
            replace: !0,
            templateUrl: i(652),
            scope: {selectedWb: "=selectedWb", schedulerObj: "=", createData: "="},
            link: function (t, i, a) {
                function l() {
                    var e = {};
                    switch (t.updateType.frequency) {
                        case"timing":
                            1 == t.updateType.mode ? (0 != t.sendCrontab.weekName ? e.sync_config = t.sendCrontab.minName + " " + t.sendCrontab.hourStart + " * * " + t.sendCrontab.weekName : e.sync_config = t.sendCrontab.minName + " " + t.sendCrontab.hourStart + " * * *", e.mode = t.updateType.mode) : "" != bdp.bdpTables.customCrontab(t.sendCrontab.customTimer) ? n(bdp.bdpTables.customCrontab(t.sendCrontab.customTimer)) : (e.sync_config = t.sendCrontab.customTimer, e.mode = t.updateType.mode);
                            break;
                        case"suspend":
                            e.sync_config = "1 * * 11 *", e.mode = 3;
                            break;
                        case"automatic":
                            e = {sync_config: "", mode: 2}
                    }
                    return e
                }

                t.sendCrontab = {}, t.updateType = {}, t.weekUpdate = function () {
                    for (var e = [], t = o.instant, i = [t("granularity.everyDay"), t("granularity.everyMonday"), t("granularity.everyTuesday"), t("granularity.everyWednesday"), t("granularity.everyThursday"), t("granularity.everyFriday"), t("granularity.everySaturday"), t("granularity.everySunday")], n = 0; n < i.length; n++) e.push({
                        valueC: n,
                        name: i[n]
                    });
                    return e
                }(), t.hourUpdate = function () {
                    for (var e = [], t = 0; t < 24; t++) e.push({valueH: t, name: t.toString()});
                    return e
                }(), t.minuteUpdate = function () {
                    for (var e = [], t = 0; t < 60; t++) e.push({valueM: t, name: t.toString()});
                    return e
                }(), t.cnfigureTootip = !1;
                var c = t.transDataCnfigure = {};
                t.createData && (t.createData.sendCrontab = t.sendCrontab, t.createData.updateType = t.updateType), t.cnfigureInit = function () {
                    if (t.sendCrontab.customTimer = "", t.selectedWb ? c.infoMode = !1 : c.infoMode = !0, t.schedulerObj && t.schedulerObj.sync_config && 3 != t.schedulerObj.mode) if (t.updateType.frequency = "timing", t.updateType.mode = t.schedulerObj.mode, 0 == t.schedulerObj.mode) t.sendCrontab.customTimer = t.schedulerObj.sync_config, t.sendCrontab.weekName = 0, t.sendCrontab.hourStart = 0, t.sendCrontab.minName = 0; else {
                        var e = t.schedulerObj.sync_config.split(" ");
                        t.sendCrontab.weekName = "*" == e[e.length - 1] ? 0 : Number(e[e.length - 1]), t.sendCrontab.hourStart = Number(e[1]), t.sendCrontab.minName = Number(e[0])
                    } else t.schedulerObj && t.schedulerObj.sync_config && 3 == t.schedulerObj.mode ? t.updateType.frequency = "suspend" : t.updateType.frequency = "automatic"
                }, t.timingUpdate = function () {
                    void 0 == t.updateType.mode && (t.updateType.mode = 1, t.sendCrontab.weekName = 0, t.sendCrontab.hourStart = 0, t.sendCrontab.minName = 0)
                }, t.suspendUpdate = function () {
                    var i = l();
                    $.isEmptyObject(i) || e.tb.schedulerModify({
                        tb_id: t.selectedWb.tb_id,
                        scheduler_conf: (0, r.default)(i)
                    }).then(function (e) {
                        0 != e.status ? n(e.errstr) : (c.infoMode = !1, t.schedulerObj.mode, i.mode, t.schedulerObj.sync_config = i.sync_config, t.schedulerObj.mode = i.mode, t.$emit("schedMode", i))
                    })
                }, s(function () {
                    t.cnfigureInit()
                })
            }
        }
    }

    n.$inject = ["commonService", "$rootScope", "errHint", "$jsTipTranslate", "$translate", "$timeout"];
    var a = i(1), r = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(a);
    angular.module("BC.controllers.dataSource").directive("transformConfigure", n)
}, function (e, t) {
    e.exports = "/dist/static/worktable/transform-configure/transform-configure.html"
}, function (e, t, i) {
    "use strict";
    var n = angular.module("BC.warnCenter", []), a = function (e) {
        var t = i(85)(i.p + "ce6b787b13d1.css");
        i.e(9).then(function (n) {
            var a = [];
            return a.push(i(907)), a.push(i(908)), a.push(i(909)), a.push(i(910)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    }, r = {warn: {url: "/warn", templateUrl: i(654), controller: "WarnCenterController"}};
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t) {
    e.exports = "/dist/static/warn-center/view/warn-center.html"
}, function (e, t, i) {
    var n = angular.module("BC.exportOverall", []), a = function (e) {
        var t = i(85)(i.p + "e1637ac6df05.css");
        i.e(8).then(function (n) {
            var a = [];
            return a.push(i(911)), a.push(i(912)), a.push(i(913)), a.push(i(914)), a.push(i(915)), a.push(i(916)), t ? t(function () {
                e(a)
            }) : e(a)
        }.bind(null, i)).catch(i.oe)
    }, r = {
        export_overall: {
            url: "/export_overall?view",
            templateUrl: i(656),
            controller: "exportOverallCtrl",
            controllerAs: "vmData"
        },
        export_overall_log: {
            url: "/export_overall_log",
            templateUrl: i(657),
            controller: "exportOverallLogCtrl",
            controllerAs: "vmData"
        },
        import_overall_log: {
            url: "/import_overall_log",
            templateUrl: i(658),
            controller: "importOverallLogCtrl",
            controllerAs: "vmData"
        }
    };
    e.exports = {name: n.name, routes: r, requires: a}
}, function (e, t) {
    e.exports = "/dist/static/export-overall/export-overall.html"
}, function (e, t) {
    e.exports = "/dist/static/export-overall/export-log/export-overall-log.html"
}, function (e, t) {
    e.exports = "/dist/static/export-overall/import-log/import-log.html"
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.chartConfig", []), i(660), i(661), i(663)
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        angular.module("BC.chartConfig").constant("chartLineDashStyle", [{
            name: "Solid",
            value: "Solid"
        }, {name: "ShortDash", value: "ShortDash"}, {name: "ShortDot", value: "ShortDot"}, {
            name: "ShortDashDot",
            value: "ShortDashDot"
        }, {name: "ShortDashDotDot", value: "ShortDashDotDot"}, {name: "Dot", value: "Dot"}, {
            name: "Dash",
            value: "Dash"
        }, {name: "LongDash", value: "LongDash"}, {name: "DashDot", value: "DashDot"}, {
            name: "LongDashDot",
            value: "LongDashDot"
        }, {name: "LongDashDotDot", value: "LongDashDotDot"}]).constant("chartLineWidth", [{
            name: "1",
            value: 1
        }, {name: "2", value: 2}, {name: "3", value: 3}, {name: "4", value: 4}, {name: "5", value: 5}, {
            name: "6",
            value: 6
        }, {name: "7", value: 7}, {name: "8", value: 8}, {name: "9", value: 9}]).constant("chartFontSize", [{
            name: "默认",
            value: "inherit"
        }, {name: "10px", value: "10px"}, {name: "11px", value: "11px"}, {name: "12px", value: "12px"}, {
            name: "13px",
            value: "13px"
        }, {name: "14px", value: "14px"}, {name: "15px", value: "15px"}, {name: "16px", value: "16px"}, {
            name: "18px",
            value: "18px"
        }, {name: "20px", value: "20px"}, {name: "24px", value: "24px"}, {name: "32px", value: "32px"}, {
            name: "36px",
            value: "36px"
        }, {name: "48px", value: "48px"}, {name: "64px", value: "64px"}]).constant("chartFontFamily", [{
            name: "默认",
            value: "inherit"
        }, {name: "微软雅黑", value: "Microsoft YaHei"}, {name: "宋体", value: "SimSun"}, {
            name: "黑体",
            value: "Heiti"
        }, {name: "华文细黑", value: "STXihei"}, {name: "Verdana", value: "Verdana"}, {
            name: "Arial",
            value: "Arial"
        }, {name: "Times New Roman", value: "Times New Roman"}, {name: "Times", value: "Times"}, {
            name: "MS Sans Serif",
            value: "MS Sans Serif"
        }, {
            name: "Microsoft Yahei",
            value: "Microsoft Yahei"
        }]).factory("defaultChartStyleFactory", ["$rootScope", function (e) {
            function t(e) {
                var t = n.super_color, i = n.super_color;
                return e && (["C230", "C360", "C370"].indexOf(e) > -1 && (t = "#FFF"), ["C230"].indexOf(e) > -1 && (i = "#FFF")), {
                    gridPlotLine: {
                        xAxis: {
                            enabled: !1,
                            color: n.stroke,
                            dashStyle: "Solid",
                            width: 1,
                            splitNum: 10,
                            colorAdaption: !0
                        },
                        yAxis: {
                            enabled: !1,
                            color: n.stroke,
                            dashStyle: "Solid",
                            width: 1,
                            splitNum: 10,
                            colorAdaption: !0
                        }
                    },
                    legend: {
                        enabled: !0,
                        layout: "vertical",
                        align: "right",
                        verticalAlign: "top",
                        pos: "",
                        itemStyle: {
                            color: n.legend_color,
                            fontSize: "inherit",
                            fontFamily: "inherit",
                            colorAdaption: !0
                        }
                    },
                    title: {
                        enabled: !1,
                        style: {color: n.super_color, fontSize: "inherit", fontFamily: "inherit", colorAdaption: !0}
                    },
                    labels: {style: {color: t, fontSize: "inherit", fontFamily: "inherit", colorAdaption: !0}},
                    labelsForPieValue: {
                        style: {
                            color: i,
                            fontSize: "inherit",
                            fontFamily: "inherit",
                            colorAdaption: !0
                        }
                    },
                    labelsForPieConnector: {
                        style: {
                            color: n.super_color,
                            fontSize: "inherit",
                            fontFamily: "inherit",
                            colorAdaption: !0
                        }
                    },
                    axis: {
                        xAxis: {
                            enabled: !0,
                            lineWidth: 1,
                            lineColor: n.stroke,
                            lineStyle: "Solid",
                            lineColorAdaption: !0,
                            labels: {
                                enabled: !0,
                                color: n.color,
                                fontSize: "inherit",
                                fontFamily: "inherit",
                                colorAdaption: !0
                            },
                            title: {
                                enabled: !0,
                                color: n.color,
                                fontSize: "inherit",
                                fontFamily: "inherit",
                                colorAdaption: !0
                            }
                        },
                        yAxis: {
                            enabled: !1,
                            lineWidth: 1,
                            lineColor: n.stroke,
                            lineStyle: "Solid",
                            lineColorAdaption: !0,
                            labels: {
                                enabled: !0,
                                color: n.color,
                                fontSize: "inherit",
                                fontFamily: "inherit",
                                colorAdaption: !0
                            },
                            title: {
                                enabled: !0,
                                color: n.color,
                                fontSize: "inherit",
                                fontFamily: "inherit",
                                colorAdaption: !0
                            }
                        },
                        yOptionalAxis: {
                            enabled: !1,
                            lineWidth: 1,
                            lineColor: n.stroke,
                            lineStyle: "Solid",
                            lineColorAdaption: !0,
                            labels: {
                                enabled: !0,
                                color: n.color,
                                fontSize: "inherit",
                                fontFamily: "inherit",
                                colorAdaption: !0
                            },
                            title: {
                                enabled: !0,
                                color: n.color,
                                fontSize: "inherit",
                                fontFamily: "inherit",
                                colorAdaption: !0
                            }
                        }
                    }
                }
            }

            var i = {
                dark: {
                    color: "rgba(255, 255, 255, 0.5)",
                    super_color: "rgba(255, 255, 255, 0.6)",
                    legend_color: "rgb(255, 255, 255)",
                    stroke: "rgba(255, 255, 255, 0.1)"
                },
                light: {
                    color: "#666666",
                    super_color: "rgba(0, 0, 0, 0.6)",
                    legend_color: "rgb(165, 165, 165)",
                    stroke: "#cccccc"
                }
            }, n = 2 == e.usedThemeId ? i.light : i.dark;
            return e.$on("themeChanged", function (e) {
                n = 2 == e ? i.light : i.dark
            }), {getDefaultStyle: t}
        }]).factory("chartLegendPos", ["$rootScope", function (e) {
            return {
                top: {layout: "horizontal", align: "center", verticalAlign: "top"},
                bottom: {layout: "horizontal", align: "center", verticalAlign: "bottom"},
                right: {layout: "vertical", align: "right", verticalAlign: "top"}
            }
        }]).factory("toggleNextBlock", ["$rootScope", function (e) {
            return function (e, t) {
                var i = angular.element(e.target);
                if (i) if (i.hasClass("is-toggle") ? i.removeClass("is-toggle") : i.addClass("is-toggle"), "multi" == t) {
                    var n = i.siblings(".J-style-block");
                    n.each(function (e, t) {
                        $(t).animate({height: "toggle"}, 200)
                    })
                } else {
                    var a = i.next(".J-style-block");
                    a.animate({height: "toggle"}, 200)
                }
            }
        }])
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t, n, a, r, o) {
            return {
                restrict: "EA",
                scope: {chartInfo: "=?", saveFunc: "&?", textType: "=?", styleLabel: "@"},
                templateUrl: i(662),
                replace: !0,
                link: function (i, s, l) {
                    i.init = function () {
                        if (!i.chartInfo) return !1;
                        var t = i.chartInfo.style, s = i.textType, l = r.getDefaultStyle(i.chartInfo.chart_type),
                            c = angular.copy(l[s]), d = c.style.color, u = {};
                        if (t && t[s]) u = $.extend(!0, c, t[s]), t[s].style.hasOwnProperty("colorAdaption") && t[s].style.colorAdaption ? u.style.color = d : delete u.style.colorAdaption; else {
                            var p = angular.copy(c);
                            u = $.extend(!0, p, {})
                        }
                        "en" == e.language && (a[0].name = "Default", n[0].name = "Default"), i.chartNormalTextStyle = {
                            chartFontFamily: a,
                            chartFontSize: n,
                            type: s,
                            data: u,
                            originalData: angular.copy(u),
                            colorPickerOpt: {
                                showAdaption: !0,
                                showAlpha: !bdp.bdpPageStatus.isUnderNormalChartEdit(),
                                clickoutFiresChange: !1
                            },
                            configTextStyle: function (t) {
                                var n = {};
                                i.chartInfo.style ? i.chartInfo.style[s] = $.extend(!0, i.chartInfo.style[s], i.chartNormalTextStyle.data) : (n = {}, n[s] = i.chartNormalTextStyle.data, i.chartInfo.style = n), e.setOperateRecord("chart.op.config.font." + t, [o.instant(i.styleLabel)]), i.saveFunc()
                            },
                            changeColor: function (e) {
                            },
                            modifyColor: function (e, t, n) {
                                i.chartNormalTextStyle.data.style.colorAdaption = !!t.isAdaption, t.isAdaption && (i.chartNormalTextStyle.data.style.color = d), i.chartNormalTextStyle.configTextStyle("color")
                            }
                        }
                    }, t(function () {
                        i.init()
                    }, 0), i.$on("broadcastReloadStyle", function (e, t) {
                        i.init()
                    })
                }
            }
        }

        angular.module("BC.chartConfig").directive("normalTextStyle", e), e.$inject = ["$rootScope", "$timeout", "chartFontSize", "chartFontFamily", "defaultChartStyleFactory", "$translate"]
    }()
}, function (e, t) {
    e.exports = "/dist/static/chart-config/tpl/normal-text-style.html"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return {
            restrict: "EA",
            templateUrl: i(664),
            replace: !0,
            scope: {valSelected: "=", valChange: "&", clickDisabled: "="},
            link: function (t, i, n) {
                function a() {
                    t.viewData.lineStyleList.map(function (e) {
                        e.value == t.valSelected && (t.viewData.selectedLineStyle = e.map)
                    })
                }

                function r(i) {
                    t.valSelected != i.value && (t.viewData.selectedLineStyle = i.map, t.valSelected = i.value, e(function () {
                        t.valChange()
                    }, 0)), t.viewData.showList = !1
                }

                function o() {
                    t.clickDisabled || (t.viewData.showList = !t.viewData.showList)
                }

                !function () {
                    t.viewData = {
                        lineStyleList: [{name: "Solid", value: "Solid", map: "solid"}, {
                            name: "ShortDash",
                            value: "ShortDash",
                            map: "short-dash"
                        }, {name: "ShortDot", value: "ShortDot", map: "short-dot"}, {
                            name: "ShortDashDot",
                            value: "ShortDashDot",
                            map: "short-dash-dot"
                        }, {name: "ShortDashDotDot", value: "ShortDashDotDot", map: "short-dash-dot-dot"}, {
                            name: "Dot",
                            value: "Dot",
                            map: "dot"
                        }, {name: "Dash", value: "Dash", map: "dash"}, {
                            name: "LongDash",
                            value: "LongDash",
                            map: "long-dash"
                        }, {name: "DashDot", value: "DashDot", map: "dash-dot"}, {
                            name: "LongDashDot",
                            value: "LongDashDot",
                            map: "long-dash-dot"
                        }, {name: "LongDashDotDot", value: "LongDashDotDot", map: "long-dash-dot-dot"}],
                        selectedLineStyle: "",
                        showList: !1,
                        selectLineStyle: r,
                        toggleStyleList: o
                    }
                }(), t.$watch(function () {
                    return t.valSelected
                }, function (e) {
                    a()
                })
            }
        }
    }

    angular.module("BC.chartConfig").directive("lineStyleSelect", n), n.$inject = ["$timeout"]
}, function (e, t) {
    e.exports = "/dist/static/chart-config/tpl/line-style-select.html"
}, function (e, t, i) {
    "use strict";

    function n(e) {
        "ngInject";

        function t() {
            if (g[c] + g[d]) {
                var e = {
                    category: "performance",
                    action: "smooth",
                    opt_label: (0, r.default)({
                        DELAY: g[l],
                        WAIT: g[c],
                        LOSE: g[d],
                        MAX: g[u],
                        REPORTS: m,
                        BLOCKT: g[p],
                        TAIL: g[f]
                    }),
                    opt_value: g[h]
                };
                BDPLogger.log("feStatistics", e), m = 0
            } else g[s] && m++;
            $.extend(g, o)
        }

        function i(e) {
            e < 100 ? g[s]++ : e < 300 ? g[l]++ : e < 1e3 ? g[c]++ : g[d]++, e > 300 && (g[p] += e), e > g[u] && (g[u] = e), e > 6e4 && (g[h] = (0, r.default)(b) + (0, r.default)(g))
        }

        function n() {
            var e = Date.now();
            y && !a && i(e - y), e >= v ? (y && !a && (g[f] += e - y), v = 0, y = 0) : (y = Date.now(), window.requestAnimFrame(n)), a = !1
        }

        var a, o = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], s = 1, l = 2, c = 3, d = 4, u = 5, p = 6, f = 7, h = 8, g = [],
            m = 0, v = 0, y = 0, b = !0;
        !function () {
            function e() {
                (b = document[t]) && (a = !0)
            }

            var t, i;
            void 0 !== document.hidden ? (t = "hidden", i = "visibilitychange") : void 0 !== document.msHidden ? (t = "msHidden", i = "msvisibilitychange") : void 0 !== document.webkitHidden && (t = "webkitHidden", i = "webkitvisibilitychange"), void 0 !== document.addEventListener && void 0 !== document[t] && document.addEventListener(i, e, !1), e()
        }(), e.$watch(function () {
            if (!b) {
                var e = !v;
                v = Date.now() + 5e3, e && n()
            }
        }), setInterval(function () {
            t()
        }, 6e4), t()
    }

    n.$inject = ["$rootScope"];
    var a = i(1), r = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(a);
    e.exports = {
        apply: function (e) {
            e.run(n)
        }
    }
}, function (e, t, i) {
    "use strict";
    e.exports = {
        apply: function (e) {
            e.run(["$rootScope", "pendingRequests", function (e, t) {
                var i = ["/api/warn/amount", "/api/user/info"];
                e.$on("$stateChangeStart", function (e, n, a, r, o) {
                    var s = t.get();
                    angular.forEach(s, function (e) {
                        $.inArray(e.url, i) == -1 && t.cancelOne(e.url)
                    }), bdp.pendingRequest.cancelAll()
                })
            }])
        }
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        "ngInject";
        e.setDefaults({
            closeByDocument: !1,
            closeByEscape: !1,
            trapFocus: !1,
            preserveFocus: !1,
            overlay: !1
        }), t.placeholderClass = "angular-ui-tree-placeholder dash-sort-placeholder"
    }

    function a(e, t, i) {
        "ngInject";
        var n = "";
        e.$watch(function () {
            return t.path()
        }, function (e, t) {
            n === e && i.closeAll()
        }), e.$on("ngDialog.opened", function (e, t) {
            setTimeout(function () {
                t.find(".ngdialog-content")[0].getBoundingClientRect().top < 0 && t.css({display: "block"})
            }, 100)
        }), e.$on("$stateChangeStart", function (t, i, n, a, r) {
            e.pageLoading = !0
        }), e.$on("$stateChangeSuccess", function () {
            e.pageLoading = !1, n = t.path()
        }), navigator.userAgent && (isIE || window.ActiveXObject || "ActiveXObject" in window) && ($("body").removeClass("IE-BDP"), $("body").addClass("IE-BDP"))
    }

    n.$inject = ["ngDialogProvider", "treeConfig"], a.$inject = ["$rootScope", "$location", "ngDialog"], e.exports = {
        ngDependencies: ["ngDialog", "ui.tree"],
        apply: function (e) {
            e.config(n), e.run(a)
        }
    }
}, function (e, t, i) {
    "use strict";
    e.exports = {
        ngDependencies: "BC.core.theme", apply: function (e) {
            e.run(["$rootScope", function (e) {
                e.usedThemeId = window.usedThemeId || 2
            }])
        }
    }, angular.module("BC.core.theme", []).service("uiColorTheme", ["$rootScope", "commonService", function (e, t) {
        function i(n, a) {
            if (n != window.usedThemeId) {
                var r = window.usedThemeId, o = window.BDPThemes.themes[n - 1];
                $("#" + window.BDPThemes.themeLinkCssId), e.themeChangeFlag = !1, o.svgUrl;
                var s = document.documentElement.className;
                if (document.documentElement.className = s.replace(/theme-\w+/, "theme-" + o.filename), window.usedThemeId = e.usedThemeId = n, e.$broadcast("themeChanged", n), a) return;
                t.global_config.themeModify(n).then(function (t) {
                    0 == t.status ? (e.themeChangeFlag = !e.themeChangeFlag, $.cookie(window.BDPThemes.bdpThemeIdCookieName, n)) : i(r, "NOSAVE")
                })
            }
        }

        return {changeSelectedTheme: i}
    }])
}, function (e, t, i) {
    "use strict";

    function n(e, t, i) {
        var a, r = [];
        return t.length ? (1 == t.length && (e.resolve = i), r.push([t.join("."), e]), a = e.nested, delete e.nested) : a = e, a && angular.forEach(a, function (e, a) {
            r = r.concat(n(e, [].concat(t, a), i))
        }), r
    }

    function a(e, t) {
        var i = !1, n = ["$ocLazyLoad", "$q", function (n, a) {
            if (!i) {
                var r = a.defer();
                return e(function () {
                    return i = !0, n.load({name: t}), r.resolve(), i
                }), r.promise.then(function () {
                    console.log(" lazyload done! ")
                }), r.promise
            }
        }], a = {lala: n};
        return function () {
            return a
        }
    }

    function r(e) {
        var t = [];
        return e.forEach(function (e) {
            var i = e.routes, r = e.requires, o = a(r, e.name)();
            Array.prototype.push.apply(t, n(i, [], o))
        }), t
    }

    e.exports = function (e) {
        var t = ["oc.lazyLoad", "ui.router"];
        return t = t.concat(e.map(function (e) {
            return e.name
        })), {
            ngDependencies: t, apply: function (t) {
                t.config(["$stateProvider", function (t) {
                    r(e).forEach(function (e) {
                        t.state(e[0], e[1])
                    })
                }])
            }
        }
    }
}, function (e, t, i) {
    "use strict";
    e.exports = function (e, t) {
        var i = (t || []).concat(_.filter(_.flatMap(e, function (e) {
            return e.ngDependencies
        }), function (e) {
            return !!e
        })), n = angular.module("BC", i);
        return e.forEach(function (e) {
            return e.apply && e.apply(n)
        }), n
    }
}]), function () {
    var e = function () {
        var e = {
            meta: {
                bs: [{
                    string: navigator.userAgent,
                    subString: "Chrome",
                    identity: "Chrome"
                }, {
                    string: navigator.userAgent,
                    subString: "OmniWeb",
                    versionSearch: "OmniWeb/",
                    identity: "OmniWeb"
                }, {
                    string: navigator.vendor,
                    subString: "Apple",
                    identity: "Safari",
                    versionSearch: "Version"
                }, {prop: window.opera, identity: "Opera", versionSearch: "Version"}, {
                    string: navigator.vendor,
                    subString: "iCab",
                    identity: "iCab"
                }, {string: navigator.vendor, subString: "KDE", identity: "Konqueror"}, {
                    string: navigator.userAgent,
                    subString: "Firefox",
                    identity: "Firefox"
                }, {string: navigator.vendor, subString: "Camino", identity: "Camino"}, {
                    string: navigator.userAgent,
                    subString: "Netscape",
                    identity: "Netscape"
                }, {
                    string: navigator.userAgent,
                    subString: "MSIE",
                    identity: "Explorer",
                    versionSearch: "MSIE"
                }, {
                    string: navigator.userAgent,
                    subString: "Gecko",
                    identity: "Mozilla",
                    versionSearch: "rv"
                }, {string: navigator.userAgent, subString: "Mozilla", identity: "Netscape", versionSearch: "Mozilla"}],
                os: [{string: navigator.platform, subString: "Win", identity: "Windows"}, {
                    string: navigator.platform,
                    subString: "Mac",
                    identity: "Mac"
                }, {
                    string: navigator.userAgent,
                    subString: "iPhone",
                    identity: "iPhone/iPod"
                }, {string: navigator.userAgent, subString: "iPad", identity: "iPad"}, {
                    string: navigator.userAgent,
                    subString: "Android",
                    identity: "Android"
                }, {string: navigator.platform, subString: "Linux", identity: "Linux"}]
            }, search: function (e) {
                for (var t = 0; t < e.length; t++) {
                    var i = e[t].string, n = e[t].prop;
                    if (i) {
                        if (-1 != i.indexOf(e[t].subString)) return e[t].identity
                    } else if (n) return e[t].identity
                }
            }
        }, t = {browser: e.search(e.meta.bs) || "unknown", os: e.search(e.meta.os) || "unknown"};
        if ("Linux" == t.os) for (var i = ["CentOS", "Debian", "Fedora", "Gentoo", "Mandriva", "Mageia", "Red Hat", "Slackware", "SUSE", "Turbolinux", "Ubuntu"], n = 0; n < i.length; n++) if (navigator.userAgent.toLowerCase().match(i[n].toLowerCase())) {
            t.distro = i[n];
            break
        }
        return {os: t.os, browser: t.browser}
    }();
    window.console.err = window.console.error, window.console.error = function () {
        if (console.err.apply(console, arguments), arguments[0] && "string" == typeof arguments[0]) {
            var t = window.location.href,
                i = "string" == typeof arguments[0] ? arguments[0].split(" at ") : [JSON.stringify(arguments[0])],
                n = $.cookie("user"), a = $.cookie("domain"), r = [];
            t.indexOf("dash_edit/") > -1 ? r = t.split("dash_edit/")[1].split("/") : t.indexOf("chart_edit/") > -1 ? r = t.split("chart_edit/")[1].split("/") : t.indexOf("data_screen/") > -1 && (r = t.split("data_screen/")[1].split("/"));
            var o = {os: e.os, browser: e.browser, url: document.URL, user_id: $.cookie("user_id")}, s = {
                user: n,
                domain: a,
                proj_id: r[0] || "",
                dsh_id: r[1] || "",
                ct_id: (r[2] || "").split("?")[0],
                intro: i[0],
                detail: i[1],
                extra_info: JSON.stringify(o)
            };
            $.ajax({type: "POST", url: "/api/front_stat/web_error", data: s})
        }
    }
}(), function (e) {
    function t(i) {
        if (n[i]) return n[i].exports;
        var a = n[i] = {i: i, l: !1, exports: {}};
        return e[i].call(a.exports, a, a.exports, t), a.l = !0, a.exports
    }

    var i = window.webpackJsonp;
    window.webpackJsonp = function (t, n, r) {
        for (var o, s, l = 0, c = []; l < t.length; l++) s = t[l], a[s] && c.push(a[s][0]), a[s] = 0;
        for (o in n) Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o]);
        for (i && i(t, n, r); c.length;) c.shift()()
    };
    var n = {}, a = {21: 0};
    t.e = function (e) {
        function i() {
            s.onerror = s.onload = null, clearTimeout(l);
            var t = a[e];
            0 !== t && (t && t[1](new Error("Loading chunk " + e + " failed.")), a[e] = void 0)
        }

        var n = a[e];
        if (0 === n) return new Promise(function (e) {
            e()
        });
        if (n) return n[2];
        var r = new Promise(function (t, i) {
            n = a[e] = [t, i]
        });
        n[2] = r;
        var o = document.getElementsByTagName("head")[0], s = document.createElement("script");
        s.type = "text/javascript", s.charset = "utf-8", s.async = !0, s.timeout = 12e4, t.nc && s.setAttribute("nonce", t.nc), s.src = t.p + "" + e + ".chunk-3900c4.js";
        var l = setTimeout(i, 12e4);
        return s.onerror = s.onload = i, o.appendChild(s), r
    }, t.m = e, t.c = n, t.d = function (e, i, n) {
        t.o(e, i) || Object.defineProperty(e, i, {configurable: !1, enumerable: !0, get: n})
    }, t.n = function (e) {
        var i = e && e.__esModule ? function () {
            return e.default
        } : function () {
            return e
        };
        return t.d(i, "a", i), i
    }, t.o = function (e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, t.p = "//m1.bdp.cn/dist/", t.oe = function (e) {
        throw console.error(e), e
    }, t(t.s = 671)
}([, function (e, t, i) {
    e.exports = {default: i(145), __esModule: !0}
}, function (e, t) {
    var i = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = i)
}, function (e, t) {
    var i = e.exports = {version: "2.5.1"};
    "number" == typeof __e && (__e = i)
}, , function (e, t, i) {
    var n = i(54)("wks"), a = i(33), r = i(2).Symbol, o = "function" == typeof r;
    (e.exports = function (e) {
        return n[e] || (n[e] = o && r[e] || (o ? r : a)("Symbol." + e))
    }).store = n
}, function (e, t, i) {
    var n = i(9), a = i(79), r = i(52), o = Object.defineProperty;
    t.f = i(7) ? Object.defineProperty : function (e, t, i) {
        if (n(e), t = r(t, !0), n(i), a) try {
            return o(e, t, i)
        } catch (e) {
        }
        if ("get" in i || "set" in i) throw TypeError("Accessors not supported!");
        return "value" in i && (e[t] = i.value), e
    }
}, function (e, t, i) {
    e.exports = !i(24)(function () {
        return 7 != Object.defineProperty({}, "a", {
            get: function () {
                return 7
            }
        }).a
    })
}, , function (e, t, i) {
    var n = i(16);
    e.exports = function (e) {
        if (!n(e)) throw TypeError(e + " is not an object!");
        return e
    }
}, function (e, t) {
    var i = {}.hasOwnProperty;
    e.exports = function (e, t) {
        return i.call(e, t)
    }
}, function (e, t, i) {
    var n = i(2), a = i(3), r = i(34), o = i(12), s = function (e, t, i) {
        var l, c, d, u = e & s.F, p = e & s.G, f = e & s.S, h = e & s.P, g = e & s.B, m = e & s.W,
            v = p ? a : a[t] || (a[t] = {}), y = v.prototype, b = p ? n : f ? n[t] : (n[t] || {}).prototype;
        p && (i = t);
        for (l in i) (c = !u && b && void 0 !== b[l]) && l in v || (d = c ? b[l] : i[l], v[l] = p && "function" != typeof b[l] ? i[l] : g && c ? r(d, n) : m && b[l] == d ? function (e) {
            var t = function (t, i, n) {
                if (this instanceof e) {
                    switch (arguments.length) {
                        case 0:
                            return new e;
                        case 1:
                            return new e(t);
                        case 2:
                            return new e(t, i)
                    }
                    return new e(t, i, n)
                }
                return e.apply(this, arguments)
            };
            return t.prototype = e.prototype, t
        }(d) : h && "function" == typeof d ? r(Function.call, d) : d, h && ((v.virtual || (v.virtual = {}))[l] = d, e & s.R && y && !y[l] && o(y, l, d)))
    };
    s.F = 1, s.G = 2, s.S = 4, s.P = 8, s.B = 16, s.W = 32, s.U = 64, s.R = 128, e.exports = s
}, function (e, t, i) {
    var n = i(6), a = i(25);
    e.exports = i(7) ? function (e, t, i) {
        return n.f(e, t, a(1, i))
    } : function (e, t, i) {
        return e[t] = i, e
    }
}, , function (e, t, i) {
    var n = i(92), a = i(51);
    e.exports = function (e) {
        return n(a(e))
    }
}, , function (e, t) {
    e.exports = function (e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
    }
}, , , , , , , , function (e, t) {
    e.exports = function (e) {
        try {
            return !!e()
        } catch (e) {
            return !0
        }
    }
}, function (e, t) {
    e.exports = function (e, t) {
        return {enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t}
    }
}, function (e, t) {
    e.exports = {}
}, function (e, t) {
    var i = {}.toString;
    e.exports = function (e) {
        return i.call(e).slice(8, -1)
    }
}, , , , , function (e, t, i) {
    var n = i(81), a = i(55);
    e.exports = Object.keys || function (e) {
        return n(e, a)
    }
}, function (e, t) {
    var i = 0, n = Math.random();
    e.exports = function (e) {
        return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++i + n).toString(36))
    }
}, function (e, t, i) {
    var n = i(38);
    e.exports = function (e, t, i) {
        if (n(e), void 0 === t) return e;
        switch (i) {
            case 1:
                return function (i) {
                    return e.call(t, i)
                };
            case 2:
                return function (i, n) {
                    return e.call(t, i, n)
                };
            case 3:
                return function (i, n, a) {
                    return e.call(t, i, n, a)
                }
        }
        return function () {
            return e.apply(t, arguments)
        }
    }
}, function (e, t) {
    e.exports = !0
}, function (e, t, i) {
    var n = i(6).f, a = i(10), r = i(5)("toStringTag");
    e.exports = function (e, t, i) {
        e && !a(e = i ? e : e.prototype, r) && n(e, r, {configurable: !0, value: t})
    }
}, , function (e, t) {
    e.exports = function (e) {
        if ("function" != typeof e) throw TypeError(e + " is not a function!");
        return e
    }
}, function (e, t) {
    t.f = {}.propertyIsEnumerable
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    t.__esModule = !0;
    var a = i(146), r = n(a), o = i(148), s = n(o),
        l = "function" == typeof s.default && "symbol" == typeof r.default ? function (e) {
            return typeof e
        } : function (e) {
            return e && "function" == typeof s.default && e.constructor === s.default && e !== s.default.prototype ? "symbol" : typeof e
        };
    t.default = "function" == typeof s.default && "symbol" === l(r.default) ? function (e) {
        return void 0 === e ? "undefined" : l(e)
    } : function (e) {
        return e && "function" == typeof s.default && e.constructor === s.default && e !== s.default.prototype ? "symbol" : void 0 === e ? "undefined" : l(e)
    }
}, function (e, t, i) {
    e.exports = {default: i(162), __esModule: !0}
}, , , , , , , , , function (e, t) {
    var i = Math.ceil, n = Math.floor;
    e.exports = function (e) {
        return isNaN(e = +e) ? 0 : (e > 0 ? n : i)(e)
    }
}, function (e, t) {
    e.exports = function (e) {
        if (void 0 == e) throw TypeError("Can't call method on  " + e);
        return e
    }
}, function (e, t, i) {
    var n = i(16);
    e.exports = function (e, t) {
        if (!n(e)) return e;
        var i, a;
        if (t && "function" == typeof(i = e.toString) && !n(a = i.call(e))) return a;
        if ("function" == typeof(i = e.valueOf) && !n(a = i.call(e))) return a;
        if (!t && "function" == typeof(i = e.toString) && !n(a = i.call(e))) return a;
        throw TypeError("Can't convert object to primitive value")
    }
}, function (e, t, i) {
    var n = i(54)("keys"), a = i(33);
    e.exports = function (e) {
        return n[e] || (n[e] = a(e))
    }
}, function (e, t, i) {
    var n = i(2), a = n["__core-js_shared__"] || (n["__core-js_shared__"] = {});
    e.exports = function (e) {
        return a[e] || (a[e] = {})
    }
}, function (e, t) {
    e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
}, function (e, t, i) {
    t.f = i(5)
}, function (e, t, i) {
    var n = i(2), a = i(3), r = i(35), o = i(56), s = i(6).f;
    e.exports = function (e) {
        var t = a.Symbol || (a.Symbol = r ? {} : n.Symbol || {});
        "_" == e.charAt(0) || e in t || s(t, e, {value: o.f(e)})
    }
}, function (e, t, i) {
    var n = i(16), a = i(2).document, r = n(a) && n(a.createElement);
    e.exports = function (e) {
        return r ? a.createElement(e) : {}
    }
}, function (e, t, i) {
    var n = i(51);
    e.exports = function (e) {
        return Object(n(e))
    }
}, function (e, t, i) {
    "use strict";
    var n = i(133)(!0);
    i(78)(String, "String", function (e) {
        this._t = String(e), this._i = 0
    }, function () {
        var e, t = this._t, i = this._i;
        return i >= t.length ? {value: void 0, done: !0} : (e = n(t, i), this._i += e.length, {value: e, done: !1})
    })
}, function (e, t, i) {
    var n = i(50), a = Math.min;
    e.exports = function (e) {
        return e > 0 ? a(n(e), 9007199254740991) : 0
    }
}, function (e, t, i) {
    var n = i(9), a = i(135), r = i(55), o = i(53)("IE_PROTO"), s = function () {
    }, l = function () {
        var e, t = i(58)("iframe"), n = r.length;
        for (t.style.display = "none", i(87).appendChild(t), t.src = "javascript:",
                 e = t.contentWindow.document, e.open(), e.write("<script>document.F=Object</script>"), e.close(), l = e.F; n--;) delete l.prototype[r[n]];
        return l()
    };
    e.exports = Object.create || function (e, t) {
        var i;
        return null !== e ? (s.prototype = n(e), i = new s, s.prototype = null, i[o] = e) : i = l(), void 0 === t ? i : a(i, t)
    }
}, function (e, t) {
    t.f = Object.getOwnPropertySymbols
}, , , , , , , , , , , , , , , function (e, t, i) {
    "use strict";
    var n = i(35), a = i(11), r = i(80), o = i(12), s = i(10), l = i(26), c = i(134), d = i(36), u = i(93),
        p = i(5)("iterator"), f = !([].keys && "next" in [].keys()), h = function () {
            return this
        };
    e.exports = function (e, t, i, g, m, v, y) {
        c(i, t, g);
        var b, _, w, x = function (e) {
                if (!f && e in T) return T[e];
                switch (e) {
                    case"keys":
                    case"values":
                        return function () {
                            return new i(this, e)
                        }
                }
                return function () {
                    return new i(this, e)
                }
            }, C = t + " Iterator", k = "values" == m, S = !1, T = e.prototype, D = T[p] || T["@@iterator"] || m && T[m],
            L = D || x(m), A = m ? k ? x("entries") : L : void 0, E = "Array" == t ? T.entries || D : D;
        if (E && (w = u(E.call(new e))) !== Object.prototype && w.next && (d(w, C, !0), n || s(w, p) || o(w, p, h)), k && D && "values" !== D.name && (S = !0, L = function () {
            return D.call(this)
        }), n && !y || !f && !S && T[p] || o(T, p, L), l[t] = L, l[C] = h, m) if (b = {
            values: k ? L : x("values"),
            keys: v ? L : x("keys"),
            entries: A
        }, y) for (_ in b) _ in T || r(T, _, b[_]); else a(a.P + a.F * (f || S), t, b);
        return b
    }
}, function (e, t, i) {
    e.exports = !i(7) && !i(24)(function () {
        return 7 != Object.defineProperty(i(58)("div"), "a", {
            get: function () {
                return 7
            }
        }).a
    })
}, function (e, t, i) {
    e.exports = i(12)
}, function (e, t, i) {
    var n = i(10), a = i(14), r = i(136)(!1), o = i(53)("IE_PROTO");
    e.exports = function (e, t) {
        var i, s = a(e), l = 0, c = [];
        for (i in s) i != o && n(s, i) && c.push(i);
        for (; t.length > l;) n(s, i = t[l++]) && (~r(c, i) || c.push(i));
        return c
    }
}, function (e, t, i) {
    var n = i(81), a = i(55).concat("length", "prototype");
    t.f = Object.getOwnPropertyNames || function (e) {
        return n(e, a)
    }
}, function (e, t, i) {
    "use strict";

    function n(e) {
        var t, i;
        this.promise = new e(function (e, n) {
            if (void 0 !== t || void 0 !== i) throw TypeError("Bad Promise constructor");
            t = e, i = n
        }), this.resolve = a(t), this.reject = a(i)
    }

    var a = i(38);
    e.exports.f = function (e) {
        return new n(e)
    }
}, function (e, t, i) {
    e.exports = {default: i(172), __esModule: !0}
}, function (e, t, i) {
    const n = i(341);
    e.exports = function (e) {
        if (!e) return null;
        var t = !1;
        n(e, function () {
        });
        return t = !0, function (e) {
            if (t) return e()
        }
    }
}, function (e, t) {
}, function (e, t, i) {
    var n = i(2).document;
    e.exports = n && n.documentElement
}, function (e, t, i) {
    i(138);
    for (var n = i(2), a = i(12), r = i(26), o = i(5)("toStringTag"), s = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), l = 0; l < s.length; l++) {
        var c = s[l], d = n[c], u = d && d.prototype;
        u && !u[o] && a(u, o, c), r[c] = r.Array
    }
}, function (e, t, i) {
    e.exports = {default: i(159), __esModule: !0}
}, function (e, t, i) {
    var n = i(39), a = i(25), r = i(14), o = i(52), s = i(10), l = i(79), c = Object.getOwnPropertyDescriptor;
    t.f = i(7) ? c : function (e, t) {
        if (e = r(e), t = o(t, !0), l) try {
            return c(e, t)
        } catch (e) {
        }
        if (s(e, t)) return a(!n.f.call(e, t), e[t])
    }
}, , function (e, t, i) {
    var n = i(27);
    e.exports = Object("z").propertyIsEnumerable(0) ? Object : function (e) {
        return "String" == n(e) ? e.split("") : Object(e)
    }
}, function (e, t, i) {
    var n = i(10), a = i(59), r = i(53)("IE_PROTO"), o = Object.prototype;
    e.exports = Object.getPrototypeOf || function (e) {
        return e = a(e), n(e, r) ? e[r] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? o : null
    }
}, function (e, t, i) {
    var n = i(27), a = i(5)("toStringTag"), r = "Arguments" == n(function () {
        return arguments
    }()), o = function (e, t) {
        try {
            return e[t]
        } catch (e) {
        }
    };
    e.exports = function (e) {
        var t, i, s;
        return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof(i = o(t = Object(e), a)) ? i : r ? n(t) : "Object" == (s = n(t)) && "function" == typeof t.callee ? "Arguments" : s
    }
}, function (e, t, i) {
    var n = i(9), a = i(38), r = i(5)("species");
    e.exports = function (e, t) {
        var i, o = n(e).constructor;
        return void 0 === o || void 0 == (i = n(o)[r]) ? t : a(i)
    }
}, function (e, t, i) {
    var n, a, r, o = i(34), s = i(176), l = i(87), c = i(58), d = i(2), u = d.process, p = d.setImmediate,
        f = d.clearImmediate, h = d.MessageChannel, g = d.Dispatch, m = 0, v = {}, y = function () {
            var e = +this;
            if (v.hasOwnProperty(e)) {
                var t = v[e];
                delete v[e], t()
            }
        }, b = function (e) {
            y.call(e.data)
        };
    p && f || (p = function (e) {
        for (var t = [], i = 1; arguments.length > i;) t.push(arguments[i++]);
        return v[++m] = function () {
            s("function" == typeof e ? e : Function(e), t)
        }, n(m), m
    }, f = function (e) {
        delete v[e]
    }, "process" == i(27)(u) ? n = function (e) {
        u.nextTick(o(y, e, 1))
    } : g && g.now ? n = function (e) {
        g.now(o(y, e, 1))
    } : h ? (a = new h, r = a.port2, a.port1.onmessage = b, n = o(r.postMessage, r, 1)) : d.addEventListener && "function" == typeof postMessage && !d.importScripts ? (n = function (e) {
        d.postMessage(e + "", "*")
    }, d.addEventListener("message", b, !1)) : n = "onreadystatechange" in c("script") ? function (e) {
        l.appendChild(c("script")).onreadystatechange = function () {
            l.removeChild(this), y.call(e)
        }
    } : function (e) {
        setTimeout(o(y, e, 1), 0)
    }), e.exports = {set: p, clear: f}
}, function (e, t) {
    e.exports = function (e) {
        try {
            return {e: !1, v: e()}
        } catch (e) {
            return {e: !0, v: e}
        }
    }
}, function (e, t, i) {
    var n = i(9), a = i(16), r = i(83);
    e.exports = function (e, t) {
        if (n(e), a(t) && t.constructor === e) return t;
        var i = r.f(e);
        return (0, i.resolve)(t), i.promise
    }
}, function (e, t, i) {
    "use strict";

    function n(e, t) {
        if (1 === arguments.length) {
            for (var i = e[0], a = 1; a < e.length; a++) i = n(i, e[a]);
            return i
        }
        for (var r in t) if ("class" === r) {
            var o = e[r] || [];
            e[r] = (Array.isArray(o) ? o : [o]).concat(t[r] || [])
        } else if ("style" === r) {
            var o = s(e[r]), l = s(t[r]);
            e[r] = o + l
        } else e[r] = t[r];
        return e
    }

    function a(e, t) {
        for (var i, n = "", a = "", r = Array.isArray(t), s = 0; s < e.length; s++) (i = o(e[s])) && (r && t[s] && (i = d(i)), n = n + a + i, a = " ");
        return n
    }

    function r(e) {
        var t = "", i = "";
        for (var n in e) n && e[n] && p.call(e, n) && (t = t + i + n, i = " ");
        return t
    }

    function o(e, t) {
        return Array.isArray(e) ? a(e, t) : e && "object" == typeof e ? r(e) : e || ""
    }

    function s(e) {
        if (!e) return "";
        if ("object" == typeof e) {
            var t = "";
            for (var i in e) p.call(e, i) && (t = t + i + ":" + e[i] + ";");
            return t
        }
        return e += "", ";" !== e[e.length - 1] ? e + ";" : e
    }

    function l(e, t, i, n) {
        return t !== !1 && null != t && (t || "class" !== e && "style" !== e) ? t === !0 ? " " + (n ? e : e + '="' + e + '"') : ("function" == typeof t.toJSON && (t = t.toJSON()), "string" == typeof t || (t = JSON.stringify(t), i || t.indexOf('"') === -1) ? (i && (t = d(t)), " " + e + '="' + t + '"') : " " + e + "='" + t.replace(/'/g, "&#39;") + "'") : ""
    }

    function c(e, t) {
        var i = "";
        for (var n in e) if (p.call(e, n)) {
            var a = e[n];
            if ("class" === n) {
                a = o(a), i = l(n, a, !1, t) + i;
                continue
            }
            "style" === n && (a = s(a)), i += l(n, a, !1, t)
        }
        return i
    }

    function d(e) {
        var t = "" + e, i = f.exec(t);
        if (!i) return e;
        var n, a, r, o = "";
        for (n = i.index, a = 0; n < t.length; n++) {
            switch (t.charCodeAt(n)) {
                case 34:
                    r = "&quot;";
                    break;
                case 38:
                    r = "&amp;";
                    break;
                case 60:
                    r = "&lt;";
                    break;
                case 62:
                    r = "&gt;";
                    break;
                default:
                    continue
            }
            a !== n && (o += t.substring(a, n)), a = n + 1, o += r
        }
        return a !== n ? o + t.substring(a, n) : o
    }

    function u(e, t, n, a) {
        if (!(e instanceof Error)) throw e;
        if (!("undefined" == typeof window && t || a)) throw e.message += " on line " + n, e;
        try {
            a = a || i(168).readFileSync(t, "utf8")
        } catch (t) {
            u(e, null, n)
        }
        var r = 3, o = a.split("\n"), s = Math.max(n - r, 0), l = Math.min(o.length, n + r),
            r = o.slice(s, l).map(function (e, t) {
                var i = t + s + 1;
                return (i == n ? "  > " : "    ") + i + "| " + e
            }).join("\n");
        throw e.path = t, e.message = (t || "Pug") + ":" + n + "\n" + r + "\n\n" + e.message, e
    }

    var p = Object.prototype.hasOwnProperty;
    t.merge = n, t.classes = o, t.style = s, t.attr = l, t.attrs = c;
    var f = /["&<>]/;
    t.escape = d, t.rethrow = u
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t, i) {
    var n = i(50), a = i(51);
    e.exports = function (e) {
        return function (t, i) {
            var r, o, s = String(a(t)), l = n(i), c = s.length;
            return l < 0 || l >= c ? e ? "" : void 0 : (r = s.charCodeAt(l), r < 55296 || r > 56319 || l + 1 === c || (o = s.charCodeAt(l + 1)) < 56320 || o > 57343 ? e ? s.charAt(l) : r : e ? s.slice(l, l + 2) : o - 56320 + (r - 55296 << 10) + 65536)
        }
    }
}, function (e, t, i) {
    "use strict";
    var n = i(62), a = i(25), r = i(36), o = {};
    i(12)(o, i(5)("iterator"), function () {
        return this
    }), e.exports = function (e, t, i) {
        e.prototype = n(o, {next: a(1, i)}), r(e, t + " Iterator")
    }
}, function (e, t, i) {
    var n = i(6), a = i(9), r = i(32);
    e.exports = i(7) ? Object.defineProperties : function (e, t) {
        a(e);
        for (var i, o = r(t), s = o.length, l = 0; s > l;) n.f(e, i = o[l++], t[i]);
        return e
    }
}, function (e, t, i) {
    var n = i(14), a = i(61), r = i(137);
    e.exports = function (e) {
        return function (t, i, o) {
            var s, l = n(t), c = a(l.length), d = r(o, c);
            if (e && i != i) {
                for (; c > d;) if ((s = l[d++]) != s) return !0
            } else for (; c > d; d++) if ((e || d in l) && l[d] === i) return e || d || 0;
            return !e && -1
        }
    }
}, function (e, t, i) {
    var n = i(50), a = Math.max, r = Math.min;
    e.exports = function (e, t) {
        return e = n(e), e < 0 ? a(e + t, 0) : r(e, t)
    }
}, function (e, t, i) {
    "use strict";
    var n = i(139), a = i(140), r = i(26), o = i(14);
    e.exports = i(78)(Array, "Array", function (e, t) {
        this._t = o(e), this._i = 0, this._k = t
    }, function () {
        var e = this._t, t = this._k, i = this._i++;
        return !e || i >= e.length ? (this._t = void 0, a(1)) : "keys" == t ? a(0, i) : "values" == t ? a(0, e[i]) : a(0, [i, e[i]])
    }, "values"), r.Arguments = r.Array, n("keys"), n("values"), n("entries")
}, function (e, t) {
    e.exports = function () {
    }
}, function (e, t) {
    e.exports = function (e, t) {
        return {value: t, done: !!e}
    }
}, function (e, t, i) {
    var n = i(9);
    e.exports = function (e, t, i, a) {
        try {
            return a ? t(n(i)[0], i[1]) : t(i)
        } catch (t) {
            var r = e.return;
            throw void 0 !== r && n(r.call(e)), t
        }
    }
}, function (e, t, i) {
    var n = i(26), a = i(5)("iterator"), r = Array.prototype;
    e.exports = function (e) {
        return void 0 !== e && (n.Array === e || r[a] === e)
    }
}, function (e, t, i) {
    var n = i(94), a = i(5)("iterator"), r = i(26);
    e.exports = i(3).getIteratorMethod = function (e) {
        if (void 0 != e) return e[a] || e["@@iterator"] || r[n(e)]
    }
}, function (e, t, i) {
    var n = i(5)("iterator"), a = !1;
    try {
        var r = [7][n]();
        r.return = function () {
            a = !0
        }, Array.from(r, function () {
            throw 2
        })
    } catch (e) {
    }
    e.exports = function (e, t) {
        if (!t && !a) return !1;
        var i = !1;
        try {
            var r = [7], o = r[n]();
            o.next = function () {
                return {done: i = !0}
            }, r[n] = function () {
                return o
            }, e(r)
        } catch (e) {
        }
        return i
    }
}, function (e, t, i) {
    var n = i(3), a = n.JSON || (n.JSON = {stringify: JSON.stringify});
    e.exports = function (e) {
        return a.stringify.apply(a, arguments)
    }
}, function (e, t, i) {
    e.exports = {default: i(147), __esModule: !0}
}, function (e, t, i) {
    i(60), i(88), e.exports = i(56).f("iterator")
}, function (e, t, i) {
    e.exports = {default: i(149), __esModule: !0}
}, function (e, t, i) {
    i(150), i(86), i(155), i(156), e.exports = i(3).Symbol
}, function (e, t, i) {
    "use strict";
    var n = i(2), a = i(10), r = i(7), o = i(11), s = i(80), l = i(151).KEY, c = i(24), d = i(54), u = i(36), p = i(33),
        f = i(5), h = i(56), g = i(57), m = i(152), v = i(153), y = i(9), b = i(14), _ = i(52), w = i(25), x = i(62),
        C = i(154), k = i(90), S = i(6), T = i(32), D = k.f, L = S.f, A = C.f, E = n.Symbol, $ = n.JSON,
        I = $ && $.stringify, F = f("_hidden"), O = f("toPrimitive"), M = {}.propertyIsEnumerable,
        N = d("symbol-registry"), j = d("symbols"), P = d("op-symbols"), R = Object.prototype,
        B = "function" == typeof E, z = n.QObject, H = !z || !z.prototype || !z.prototype.findChild,
        W = r && c(function () {
            return 7 != x(L({}, "a", {
                get: function () {
                    return L(this, "a", {value: 7}).a
                }
            })).a
        }) ? function (e, t, i) {
            var n = D(R, t);
            n && delete R[t], L(e, t, i), n && e !== R && L(R, t, n)
        } : L, q = function (e) {
            var t = j[e] = x(E.prototype);
            return t._k = e, t
        }, V = B && "symbol" == typeof E.iterator ? function (e) {
            return "symbol" == typeof e
        } : function (e) {
            return e instanceof E
        }, U = function (e, t, i) {
            return e === R && U(P, t, i), y(e), t = _(t, !0), y(i), a(j, t) ? (i.enumerable ? (a(e, F) && e[F][t] && (e[F][t] = !1), i = x(i, {enumerable: w(0, !1)})) : (a(e, F) || L(e, F, w(1, {})), e[F][t] = !0), W(e, t, i)) : L(e, t, i)
        }, G = function (e, t) {
            y(e);
            for (var i, n = m(t = b(t)), a = 0, r = n.length; r > a;) U(e, i = n[a++], t[i]);
            return e
        }, J = function (e, t) {
            return void 0 === t ? x(e) : G(x(e), t)
        }, Y = function (e) {
            var t = M.call(this, e = _(e, !0));
            return !(this === R && a(j, e) && !a(P, e)) && (!(t || !a(this, e) || !a(j, e) || a(this, F) && this[F][e]) || t)
        }, X = function (e, t) {
            if (e = b(e), t = _(t, !0), e !== R || !a(j, t) || a(P, t)) {
                var i = D(e, t);
                return !i || !a(j, t) || a(e, F) && e[F][t] || (i.enumerable = !0), i
            }
        }, K = function (e) {
            for (var t, i = A(b(e)), n = [], r = 0; i.length > r;) a(j, t = i[r++]) || t == F || t == l || n.push(t);
            return n
        }, Q = function (e) {
            for (var t, i = e === R, n = A(i ? P : b(e)), r = [], o = 0; n.length > o;) !a(j, t = n[o++]) || i && !a(R, t) || r.push(j[t]);
            return r
        };
    B || (E = function () {
        if (this instanceof E) throw TypeError("Symbol is not a constructor!");
        var e = p(arguments.length > 0 ? arguments[0] : void 0), t = function (i) {
            this === R && t.call(P, i), a(this, F) && a(this[F], e) && (this[F][e] = !1), W(this, e, w(1, i))
        };
        return r && H && W(R, e, {configurable: !0, set: t}), q(e)
    }, s(E.prototype, "toString", function () {
        return this._k
    }), k.f = X, S.f = U, i(82).f = C.f = K, i(39).f = Y, i(63).f = Q, r && !i(35) && s(R, "propertyIsEnumerable", Y, !0), h.f = function (e) {
        return q(f(e))
    }), o(o.G + o.W + o.F * !B, {Symbol: E});
    for (var Z = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), ee = 0; Z.length > ee;) f(Z[ee++]);
    for (var te = T(f.store), ie = 0; te.length > ie;) g(te[ie++]);
    o(o.S + o.F * !B, "Symbol", {
        for: function (e) {
            return a(N, e += "") ? N[e] : N[e] = E(e)
        }, keyFor: function (e) {
            if (!V(e)) throw TypeError(e + " is not a symbol!");
            for (var t in N) if (N[t] === e) return t
        }, useSetter: function () {
            H = !0
        }, useSimple: function () {
            H = !1
        }
    }), o(o.S + o.F * !B, "Object", {
        create: J,
        defineProperty: U,
        defineProperties: G,
        getOwnPropertyDescriptor: X,
        getOwnPropertyNames: K,
        getOwnPropertySymbols: Q
    }), $ && o(o.S + o.F * (!B || c(function () {
        var e = E();
        return "[null]" != I([e]) || "{}" != I({a: e}) || "{}" != I(Object(e))
    })), "JSON", {
        stringify: function (e) {
            if (void 0 !== e && !V(e)) {
                for (var t, i, n = [e], a = 1; arguments.length > a;) n.push(arguments[a++]);
                return t = n[1], "function" == typeof t && (i = t), !i && v(t) || (t = function (e, t) {
                    if (i && (t = i.call(this, e, t)), !V(t)) return t
                }), n[1] = t, I.apply($, n)
            }
        }
    }), E.prototype[O] || i(12)(E.prototype, O, E.prototype.valueOf), u(E, "Symbol"), u(Math, "Math", !0), u(n.JSON, "JSON", !0)
}, function (e, t, i) {
    var n = i(33)("meta"), a = i(16), r = i(10), o = i(6).f, s = 0, l = Object.isExtensible || function () {
        return !0
    }, c = !i(24)(function () {
        return l(Object.preventExtensions({}))
    }), d = function (e) {
        o(e, n, {value: {i: "O" + ++s, w: {}}})
    }, u = function (e, t) {
        if (!a(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
        if (!r(e, n)) {
            if (!l(e)) return "F";
            if (!t) return "E";
            d(e)
        }
        return e[n].i
    }, p = function (e, t) {
        if (!r(e, n)) {
            if (!l(e)) return !0;
            if (!t) return !1;
            d(e)
        }
        return e[n].w
    }, f = function (e) {
        return c && h.NEED && l(e) && !r(e, n) && d(e), e
    }, h = e.exports = {KEY: n, NEED: !1, fastKey: u, getWeak: p, onFreeze: f}
}, function (e, t, i) {
    var n = i(32), a = i(63), r = i(39);
    e.exports = function (e) {
        var t = n(e), i = a.f;
        if (i) for (var o, s = i(e), l = r.f, c = 0; s.length > c;) l.call(e, o = s[c++]) && t.push(o);
        return t
    }
}, function (e, t, i) {
    var n = i(27);
    e.exports = Array.isArray || function (e) {
        return "Array" == n(e)
    }
}, function (e, t, i) {
    var n = i(14), a = i(82).f, r = {}.toString,
        o = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],
        s = function (e) {
            try {
                return a(e)
            } catch (e) {
                return o.slice()
            }
        };
    e.exports.f = function (e) {
        return o && "[object Window]" == r.call(e) ? s(e) : a(n(e))
    }
}, function (e, t, i) {
    i(57)("asyncIterator")
}, function (e, t, i) {
    i(57)("observable")
}, function (e, t, i) {
    var n = i(11), a = i(3), r = i(24);
    e.exports = function (e, t) {
        var i = (a.Object || {})[e] || Object[e], o = {};
        o[e] = t(i), n(n.S + n.F * r(function () {
            i(1)
        }), "Object", o)
    }
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = {
        getXDataIndex: function (e, t, i) {
            var n = i, a = e.length, r = t.length, o = 0, s = !0;
            if (a > r && a >= i) for (var l = 0; l < i; l++) {
                s = !0;
                for (var c = o; c < r; c++) if (e[l].name == t[c] || e[l].x == t[c]) {
                    o = c, s = !1;
                    break
                }
                s && n--
            }
            if (a < r) for (var l = 0; l < a; l++) for (var c = 0; c < r; c++) if (e[l].nickName == t[c] || e[l].name == t[c]) return n = c;
            return n
        }, checkStack: function (e) {
            var t = ["C211", "C212", "C241", "C242", "C351", "C352"];
            return $.inArray(e.info.chart_type, t) > -1
        }, getLinkValue: function (e, t) {
            for (var i = [], n = 0, a = t.length; n < a; n++) {
                var r = t[n], o = r.ctId, s = r.isFreeField, l = r.pointData;
                if (_(r.linkInfo).map(function (e) {
                    return e.link_ct_id
                }).keyBy().value()[e]) {
                    var c = [];
                    for (var d in l) {
                        var u = l[d];
                        if ($.isArray(u)) for (var p = 0, f = u.length; p < f; p++) {
                            var h = u[p];
                            h = _.compact(h), c.push(h)
                        }
                    }
                    i.push({ct_id: o, select_fields: c, is_free_drill_field: s ? 1 : 0})
                }
            }
            return i
        }, getPointDataVals: function (e) {
            var t = [];
            for (var i in e) if ($.isArray(e[i])) for (var n = 0, a = e[i].length; n < a; n++) {
                for (var r = [], o = 0, s = e[i][n].length; o < s; o++) r.push(e[i][n][o].field_value);
                t.push(r)
            }
            return t
        }, getFieldMapFids: function (e) {
            for (var t = [], i = 0, n = e.length; i < n; i++) for (var a = e[i], r = 0, o = a.field_map.length; r < o; r++) {
                var s = a.field_map[r];
                t.push(s.field)
            }
            return t
        }, getCompareFids: function (e) {
            for (var t = (e.optional.link_info, e.chartInstance.getSelectedPoints()), i = t[0], a = e.data, r = a.y.concat(a.y_optional || []), o = e.info.compare_axis, s = (i.index, i.series.index), l = n.checkStack(e) ? r.length - 1 - s : s, c = r[l].compare_names.slice(1), d = [], u = 0, p = c.length; u < p; u++) {
                var f = (c[u], o[u].fid);
                d.push(f)
            }
            return d
        }, checkContainXAxis: function (e) {
            var t = e.info.x, i = e.optional.link_info, a = n.getFieldMapFids(i), r = t.map(function (e) {
                return e.fid
            });
            return bdp.utils.isContain(a, r)
        }, checkContainCompareAxis: function (e) {
            var t = e.optional.link_info, i = n.getCompareFids(e), a = n.getFieldMapFids(t);
            return i.every(function (e) {
                return $.inArray(e, a) > -1
            })
        }, checkIsFreeField: function (e) {
            return "free_drill_opt" in e.optional
        }, checkCTSupport: function (e) {
            return "2" == e.optional.linked_chart_type && (!n.checkIsFreeField(e) || !!n.checkContainXAxis(e))
        }, checkSTSupport: function (e) {
            return "2" == e.optional.linked_chart_type && (!!n.checkContainXAxis(e) && !!n.checkContainCompareAxis(e))
        }, removeLinkMask: function (e) {
            var t = e.$elem, i = t.parent().find(".J-link-mask");
            i.length > 0 && i.remove()
        }, checkIsLinked: function (e, t) {
            return _.some(t, function (t) {
                if (e != t.ctId) return _.some(t.linkInfo, function (t) {
                    return e === t.link_ct_id
                })
            })
        }, getLinkedCount: function (e, t) {
            return _.flatten(_.map(_.filter(t, function (t) {
                return t.ctId == e
            }), "linkInfo")).length
        }
    };
    t.default = n
}, function (e, t, i) {
    i(160);
    var n = i(3).Object;
    e.exports = function (e, t, i) {
        return n.defineProperty(e, t, i)
    }
}, function (e, t, i) {
    var n = i(11);
    n(n.S + n.F * !i(7), "Object", {defineProperty: i(6).f})
}, , function (e, t, i) {
    i(163), e.exports = i(3).Object.keys
}, function (e, t, i) {
    var n = i(59), a = i(32);
    i(157)("keys", function () {
        return function (e) {
            return a(n(e))
        }
    })
}, , , function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = i(167), a = ["year", "quarter", "month", "week", "day", "hour", "minute", "second"], r = {}, o = {
        objs: {
            init: function () {
            }, getHint: function (e) {
                switch (e) {
                    case"drill":
                        return "zh" == bdpChart.language ? "请选择下钻维度" : "Select dimension to drill-down";
                    case"toggle":
                        return "zh" == bdpChart.language ? "请选择切换维度" : "Select dimension to toggle";
                    case"link":
                        return "zh" == bdpChart.language ? "请选择联动字段" : "Select field to Interactive"
                }
            }, getText: function (e) {
                return bdpChart.language = bdpChart.language || "zh", {
                    hint: o.objs.getHint(e.type),
                    dataMap: "zh" == bdpChart.language ? {
                        year: "按年",
                        quarter: "按季",
                        month: "按月",
                        week: "按周",
                        day: "按日",
                        hour: "按时",
                        minute: "按分",
                        second: "按秒"
                    } : {
                        year: "by Year",
                        quarter: "by Quarter",
                        month: "by Month",
                        week: "by Week",
                        day: "by Day",
                        hour: "by Hour",
                        minute: "by Minute",
                        second: "by Second"
                    },
                    nodataText: "zh" == bdpChart.language ? "无维度可用" : "No available field"
                }
            }, handleData: function (e) {
                if (e.isAllField) return o.objs.handleAllData(e.fields);
                var t = e.chart.info, i = t.free_drill_fields.slice(0) || [], n = o.objs.getText(e).dataMap, r = !1;
                return i.forEach(function (e, t) {
                    e.subDate = [], "date" == e.data_type && a.forEach(function (t) {
                        e.subDate.push({key: t, name: n[t]}), r = !0
                    })
                }), {availableDrillFields: i, hasDateField: r, isAllField: !1}
            }, handleAllData: function (e) {
                if ($.isArray(e) < 0) throw"you should give an array as param.";
                return {availableDrillFields: e, hasDateField: !0, isAllField: !0}
            }, getOuter: function () {
                return $(".J-drill-fields-wrap")
            }, show: function (e) {
                var t = e.objs, i = o.objs.handleData(e), a = o.objs.getText(e), r = a.hint, s = a.nodataText, l = n({
                    hint: r,
                    nodataText: s,
                    fieldList: i.availableDrillFields,
                    hasDateField: i.hasDateField,
                    isAllField: i.isAllField
                }), c = null;
                return (e.container || $("body")).append(l), c = o.objs.getOuter(), t && t.handleThemeStyleClass ? t.handleThemeStyleClass(c, e.chart) : o.objs.handleGlobalThemeStyle(c, 2 === window.usedThemeId ? "default" : "dark"), o.bindDomFuns($.extend({}, e, i)), o.objs.setPos(e.hook, c, {
                    isRight: e.isRight,
                    position: e.isNotAbs ? "" : "absolute"
                }), c
            }, setPos: function (e, t, i) {
                var n = e.offset(), t = o.objs.getOuter();
                t.find(".J-drilll-fields-list");
                t.css({position: i.position, left: n.left, top: n.top + e.height() - 42})
            }, handleGlobalThemeStyle: function (e, t) {
                return e.removeClass("chart-theme-dark chart-theme-default").addClass("chart-theme-" + t), e.removeClass("display-theme-dark display-theme-light").addClass("display-theme-" + ("default" == t ? "light" : "dark")), e.removeClass("display-device-pc display-device-projector display-device-tv").addClass("display-device-pc"), e
            }, remove: function () {
                o.objs.getOuter().remove()
            }, destroy: function (e) {
                e && ("display" == $(e.target).attr("action-type") || $(e.target).hasClass("J-int-text") || $(e.target).hasClass("J-add-field")) || o.objs.remove()
            }, isShow: function () {
                var e = o.objs.getOuter();
                return e.length > 0 && "none" != e[0].style.display
            }
        }, eventFuns: {
            handleDrill: function (e, t) {
                var i = "", n = $(e.target), a = n.parents(".J-field-drill-item");
                switch (i = n.attr("action-type"), i || (n = a.length > 0 ? a : n, i = n.attr("action-type")), i) {
                    case"fieldItem":
                        var r = 1 * n.attr("data-index"), s = angular.copy(t.availableDrillFields[r]),
                            l = n.attr("data-granularity");
                        "date" == s.data_type && (s.granularity = l || "day"), t.callback && t.callback(s), delete s.subDate, o.objs.remove();
                        break;
                    case"subFieldItem":
                        var c = n.attr("parent-index"), d = (n.attr("data-index"), n.attr("data-granularity")),
                            u = angular.copy(t.availableDrillFields[c]);
                        "date" == u.data_type && (u.granularity = d || "day"), delete u.subDate, t.callback && t.callback(u), o.objs.remove();
                        break;
                    case"display":
                        var p = (a.find(".J-sub-item-wrap"), a.find(".J-sub-icon"));
                        a.toggleClass("show-sub-list"), a.hasClass("show-sub-list") ? (p.removeClass("ico-triangle-right"), p.addClass("ico-triangle-down")) : (p.removeClass("ico-triangle-down"), p.addClass("ico-triangle-right"))
                }
                return e.preventDefault(), !1
            }
        }, bindDomFuns: function (e) {
            var t = o.objs.getOuter(), i = t.find(".J-query-search");
            t.off("click.drillDownLayer").on("click.drillDownLayer", function (t) {
                o.eventFuns.handleDrill(t, e)
            }), i.change(function (e) {
                var i = $(this).val();
                if (i) {
                    var n = t.find(".item-content-wrap:not(.sub-item):not(:contains(" + i + "))").parent(),
                        a = t.find(".J-item-content-wrap:contains(" + i + ")").parent();
                    n.hide(), a.show()
                } else t.find(".field-item").show()
            }).keyup($.debounce(100, function () {
                $(this).change()
            })).click(function (e) {
                return !1
            })
        }
    };
    !function () {
        o.objs.init()
    }(), r.show = o.objs.show, r.remove = o.objs.remove, r.destroy = o.objs.destroy, r.isShow = o.objs.isShow, t.default = r
}, function (e, t, i) {
    function n(e) {
        var t, i = "", n = e || {};
        return function (e, n, r, o, s) {
            var l = n ? " need-more-pl" : " ";
            i = i + '<div class="drill-fields-wrap J-drill-fields-wrap selected-tooltip"><div class="toolbar" style="cursor: pointer;"><div' + a.attr("class", a.classes(["dropdown-list", "J-dropdown-list", l], [!1, !1, !0]), !1, !0) + ">", i = e.length > 5 ? i + '<div class="query-text-wrap"><i class="bdp-icon ico-search"></i><input class="query-text J-query-search" type="text"' + a.attr("placeholder", r, !0, !0) + ' action-type="search"></div>' : 0 == e.length ? i + '<div class="nodata-text nowrap J-int-text">' + a.escape(null == (t = s) ? "" : t) + "</div>" : i + '<div class="hint nowrap J-int-text">' + a.escape(null == (t = r) ? "" : t) + "</div>", i += '<ul class="list-bd J-drilll-fields-list">', function () {
                var n = e;
                if ("number" == typeof n.length) for (var r = 0, s = n.length; r < s; r++) {
                    var l = n[r];
                    i = i + '<li class="field-item item-content-wrap J-field-drill-item"' + a.attr("title", l.name, !0, !0) + a.attr("data-index", r, !0, !0) + ' action-type="fieldItem"' + a.attr("data-granularity", l.granularity, !0, !0) + ">", "date" !== l.data_type || o ? i = i + '<div class="nowrap J-item-content-wrap">' + a.escape(null == (t = l.name) ? "" : t) + "</div>" : (i = i + '<div class="item-content-wrap nowrap J-item-content-wrap"><i class="bdp-icon ico-triangle-right J-sub-icon" action-type="display"></i>' + a.escape(null == (t = l.name) ? "" : t) + '</div><div class="sub-item-list nowrap J-sub-item-wrap">', function () {
                        var e = l.subDate;
                        if ("number" == typeof e.length) for (var n = 0, o = e.length; n < o; n++) {
                            var s = e[n];
                            i = i + '<div class="field-item sub-item item-content-wrap nowrap"' + a.attr("title", s.name, !0, !0) + a.attr("data-granularity", s.key, !0, !0) + a.attr("data-index", n, !0, !0) + a.attr("parent-index", r, !0, !0) + ' action-type="subFieldItem">' + a.escape(null == (t = s.name) ? "" : t) + "</div>"
                        } else {
                            var o = 0;
                            for (var n in e) {
                                o++;
                                var s = e[n];
                                i = i + '<div class="field-item sub-item item-content-wrap nowrap"' + a.attr("title", s.name, !0, !0) + a.attr("data-granularity", s.key, !0, !0) + a.attr("data-index", n, !0, !0) + a.attr("parent-index", r, !0, !0) + ' action-type="subFieldItem">' + a.escape(null == (t = s.name) ? "" : t) + "</div>"
                            }
                        }
                    }.call(this), i += "</div>"), i += "</li>"
                } else {
                    var s = 0;
                    for (var r in n) {
                        s++;
                        var l = n[r];
                        i = i + '<li class="field-item item-content-wrap J-field-drill-item"' + a.attr("title", l.name, !0, !0) + a.attr("data-index", r, !0, !0) + ' action-type="fieldItem"' + a.attr("data-granularity", l.granularity, !0, !0) + ">", "date" !== l.data_type || o ? i = i + '<div class="nowrap J-item-content-wrap">' + a.escape(null == (t = l.name) ? "" : t) + "</div>" : (i = i + '<div class="item-content-wrap nowrap J-item-content-wrap"><i class="bdp-icon ico-triangle-right J-sub-icon" action-type="display"></i>' + a.escape(null == (t = l.name) ? "" : t) + '</div><div class="sub-item-list nowrap J-sub-item-wrap">', function () {
                            var e = l.subDate;
                            if ("number" == typeof e.length) for (var n = 0, o = e.length; n < o; n++) {
                                var s = e[n];
                                i = i + '<div class="field-item sub-item item-content-wrap nowrap"' + a.attr("title", s.name, !0, !0) + a.attr("data-granularity", s.key, !0, !0) + a.attr("data-index", n, !0, !0) + a.attr("parent-index", r, !0, !0) + ' action-type="subFieldItem">' + a.escape(null == (t = s.name) ? "" : t) + "</div>"
                            } else {
                                var o = 0;
                                for (var n in e) {
                                    o++;
                                    var s = e[n];
                                    i = i + '<div class="field-item sub-item item-content-wrap nowrap"' + a.attr("title", s.name, !0, !0) + a.attr("data-granularity", s.key, !0, !0) + a.attr("data-index", n, !0, !0) + a.attr("parent-index", r, !0, !0) + ' action-type="subFieldItem">' + a.escape(null == (t = s.name) ? "" : t) + "</div>"
                                }
                            }
                        }.call(this), i += "</div>"), i += "</li>"
                    }
                }
            }.call(this), i += "</ul></div></div></div>"
        }.call(this, "fieldList" in n ? n.fieldList : "undefined" != typeof fieldList ? fieldList : void 0, "hasDateField" in n ? n.hasDateField : "undefined" != typeof hasDateField ? hasDateField : void 0, "hint" in n ? n.hint : "undefined" != typeof hint ? hint : void 0, "isAllField" in n ? n.isAllField : "undefined" != typeof isAllField ? isAllField : void 0, "nodataText" in n ? n.nodataText : "undefined" != typeof nodataText ? nodataText : void 0), i
    }

    var a = i(99);
    e.exports = n
}, function (e, t) {
}, , , function (e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(89), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    t.default = function (e, t, i) {
        return t in e ? (0, a.default)(e, t, {value: i, enumerable: !0, configurable: !0, writable: !0}) : e[t] = i, e
    }
}, function (e, t, i) {
    i(86), i(60), i(88), i(173), i(180), i(181), e.exports = i(3).Promise
}, function (e, t, i) {
    "use strict";
    var n, a, r, o, s = i(35), l = i(2), c = i(34), d = i(94), u = i(11), p = i(16), f = i(38), h = i(174), g = i(175),
        m = i(95), v = i(96).set, y = i(177)(), b = i(83), _ = i(97), w = i(98), x = l.TypeError, C = l.process,
        k = l.Promise, S = "process" == d(C), T = function () {
        }, D = a = b.f, L = !!function () {
            try {
                var e = k.resolve(1), t = (e.constructor = {})[i(5)("species")] = function (e) {
                    e(T, T)
                };
                return (S || "function" == typeof PromiseRejectionEvent) && e.then(T) instanceof t
            } catch (e) {
            }
        }(), A = function (e) {
            var t;
            return !(!p(e) || "function" != typeof(t = e.then)) && t
        }, E = function (e, t) {
            if (!e._n) {
                e._n = !0;
                var i = e._c;
                y(function () {
                    for (var n = e._v, a = 1 == e._s, r = 0; i.length > r;) !function (t) {
                        var i, r, o = a ? t.ok : t.fail, s = t.resolve, l = t.reject, c = t.domain;
                        try {
                            o ? (a || (2 == e._h && F(e), e._h = 1), o === !0 ? i = n : (c && c.enter(), i = o(n), c && c.exit()), i === t.promise ? l(x("Promise-chain cycle")) : (r = A(i)) ? r.call(i, s, l) : s(i)) : l(n)
                        } catch (e) {
                            l(e)
                        }
                    }(i[r++]);
                    e._c = [], e._n = !1, t && !e._h && $(e)
                })
            }
        }, $ = function (e) {
            v.call(l, function () {
                var t, i, n, a = e._v, r = I(e);
                if (r && (t = _(function () {
                    S ? C.emit("unhandledRejection", a, e) : (i = l.onunhandledrejection) ? i({
                        promise: e,
                        reason: a
                    }) : (n = l.console) && n.error && n.error("Unhandled promise rejection", a)
                }), e._h = S || I(e) ? 2 : 1), e._a = void 0, r && t.e) throw t.v
            })
        }, I = function (e) {
            if (1 == e._h) return !1;
            for (var t, i = e._a || e._c, n = 0; i.length > n;) if (t = i[n++], t.fail || !I(t.promise)) return !1;
            return !0
        }, F = function (e) {
            v.call(l, function () {
                var t;
                S ? C.emit("rejectionHandled", e) : (t = l.onrejectionhandled) && t({promise: e, reason: e._v})
            })
        }, O = function (e) {
            var t = this;
            t._d || (t._d = !0, t = t._w || t, t._v = e, t._s = 2, t._a || (t._a = t._c.slice()), E(t, !0))
        }, M = function (e) {
            var t, i = this;
            if (!i._d) {
                i._d = !0, i = i._w || i;
                try {
                    if (i === e) throw x("Promise can't be resolved itself");
                    (t = A(e)) ? y(function () {
                        var n = {_w: i, _d: !1};
                        try {
                            t.call(e, c(M, n, 1), c(O, n, 1))
                        } catch (e) {
                            O.call(n, e)
                        }
                    }) : (i._v = e, i._s = 1, E(i, !1))
                } catch (e) {
                    O.call({_w: i, _d: !1}, e)
                }
            }
        };
    L || (k = function (e) {
        h(this, k, "Promise", "_h"), f(e), n.call(this);
        try {
            e(c(M, this, 1), c(O, this, 1))
        } catch (e) {
            O.call(this, e)
        }
    }, n = function (e) {
        this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1
    }, n.prototype = i(178)(k.prototype, {
        then: function (e, t) {
            var i = D(m(this, k));
            return i.ok = "function" != typeof e || e, i.fail = "function" == typeof t && t, i.domain = S ? C.domain : void 0, this._c.push(i), this._a && this._a.push(i), this._s && E(this, !1), i.promise
        }, catch: function (e) {
            return this.then(void 0, e)
        }
    }), r = function () {
        var e = new n;
        this.promise = e, this.resolve = c(M, e, 1), this.reject = c(O, e, 1)
    }, b.f = D = function (e) {
        return e === k || e === o ? new r(e) : a(e)
    }), u(u.G + u.W + u.F * !L, {Promise: k}), i(36)(k, "Promise"), i(179)("Promise"), o = i(3).Promise, u(u.S + u.F * !L, "Promise", {
        reject: function (e) {
            var t = D(this);
            return (0, t.reject)(e), t.promise
        }
    }), u(u.S + u.F * (s || !L), "Promise", {
        resolve: function (e) {
            return w(s && this === o ? k : this, e)
        }
    }), u(u.S + u.F * !(L && i(144)(function (e) {
        k.all(e).catch(T)
    })), "Promise", {
        all: function (e) {
            var t = this, i = D(t), n = i.resolve, a = i.reject, r = _(function () {
                var i = [], r = 0, o = 1;
                g(e, !1, function (e) {
                    var s = r++, l = !1;
                    i.push(void 0), o++, t.resolve(e).then(function (e) {
                        l || (l = !0, i[s] = e, --o || n(i))
                    }, a)
                }), --o || n(i)
            });
            return r.e && a(r.v), i.promise
        }, race: function (e) {
            var t = this, i = D(t), n = i.reject, a = _(function () {
                g(e, !1, function (e) {
                    t.resolve(e).then(i.resolve, n)
                })
            });
            return a.e && n(a.v), i.promise
        }
    })
}, function (e, t) {
    e.exports = function (e, t, i, n) {
        if (!(e instanceof t) || void 0 !== n && n in e) throw TypeError(i + ": incorrect invocation!");
        return e
    }
}, function (e, t, i) {
    var n = i(34), a = i(141), r = i(142), o = i(9), s = i(61), l = i(143), c = {}, d = {},
        t = e.exports = function (e, t, i, u, p) {
            var f, h, g, m, v = p ? function () {
                return e
            } : l(e), y = n(i, u, t ? 2 : 1), b = 0;
            if ("function" != typeof v) throw TypeError(e + " is not iterable!");
            if (r(v)) {
                for (f = s(e.length); f > b; b++) if ((m = t ? y(o(h = e[b])[0], h[1]) : y(e[b])) === c || m === d) return m
            } else for (g = v.call(e); !(h = g.next()).done;) if ((m = a(g, y, h.value, t)) === c || m === d) return m
        };
    t.BREAK = c, t.RETURN = d
}, function (e, t) {
    e.exports = function (e, t, i) {
        var n = void 0 === i;
        switch (t.length) {
            case 0:
                return n ? e() : e.call(i);
            case 1:
                return n ? e(t[0]) : e.call(i, t[0]);
            case 2:
                return n ? e(t[0], t[1]) : e.call(i, t[0], t[1]);
            case 3:
                return n ? e(t[0], t[1], t[2]) : e.call(i, t[0], t[1], t[2]);
            case 4:
                return n ? e(t[0], t[1], t[2], t[3]) : e.call(i, t[0], t[1], t[2], t[3])
        }
        return e.apply(i, t)
    }
}, function (e, t, i) {
    var n = i(2), a = i(96).set, r = n.MutationObserver || n.WebKitMutationObserver, o = n.process, s = n.Promise,
        l = "process" == i(27)(o);
    e.exports = function () {
        var e, t, i, c = function () {
            var n, a;
            for (l && (n = o.domain) && n.exit(); e;) {
                a = e.fn, e = e.next;
                try {
                    a()
                } catch (n) {
                    throw e ? i() : t = void 0, n
                }
            }
            t = void 0, n && n.enter()
        };
        if (l) i = function () {
            o.nextTick(c)
        }; else if (r) {
            var d = !0, u = document.createTextNode("");
            new r(c).observe(u, {characterData: !0}), i = function () {
                u.data = d = !d
            }
        } else if (s && s.resolve) {
            var p = s.resolve();
            i = function () {
                p.then(c)
            }
        } else i = function () {
            a.call(n, c)
        };
        return function (n) {
            var a = {fn: n, next: void 0};
            t && (t.next = a), e || (e = a, i()), t = a
        }
    }
}, function (e, t, i) {
    var n = i(12);
    e.exports = function (e, t, i) {
        for (var a in t) i && e[a] ? e[a] = t[a] : n(e, a, t[a]);
        return e
    }
}, function (e, t, i) {
    "use strict";
    var n = i(2), a = i(3), r = i(6), o = i(7), s = i(5)("species");
    e.exports = function (e) {
        var t = "function" == typeof a[e] ? a[e] : n[e];
        o && t && !t[s] && r.f(t, s, {
            configurable: !0, get: function () {
                return this
            }
        })
    }
}, function (e, t, i) {
    "use strict";
    var n = i(11), a = i(3), r = i(2), o = i(95), s = i(98);
    n(n.P + n.R, "Promise", {
        finally: function (e) {
            var t = o(this, a.Promise || r.Promise), i = "function" == typeof e;
            return this.then(i ? function (i) {
                return s(t, e()).then(function () {
                    return i
                })
            } : e, i ? function (i) {
                return s(t, e()).then(function () {
                    throw i
                })
            } : e)
        }
    })
}, function (e, t, i) {
    "use strict";
    var n = i(11), a = i(83), r = i(97);
    n(n.S, "Promise", {
        try: function (e) {
            var t = a.f(this), i = r(e);
            return (i.e ? t.reject : t.resolve)(i.v), t.promise
        }
    })
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    function a(e) {
        _.each(e, function (e, t) {
            if (_.isNull(e)) throw"The " + t + " params is needed!"
        })
    }

    Object.defineProperty(t, "__esModule", {value: !0});
    var r = i(1), o = n(r);
    t.default = function (e) {
        var t = _.assign({mainChartContainer: null, linkType: null, ctId: null, totalCount: null}, e);
        a(t);
        var i = l.default.checkIsLinked(t.ctId, t.mainChartContainer),
            n = l.default.getLinkedCount(t.ctId, t.mainChartContainer);
        BDPLogger.log(c, {
            category: d, action: u, opt_label: (0, o.default)({
                link_type: t.linkType, ct_id: t.ctId, linked_tf: i, linked_chart_qty: n, total_count: t.totalCount
            })
        })
    };
    var s = i(158), l = n(s), c = "chart_link", d = "user_interact", u = "chart_interact"
}, , function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0});
    var n = i(166), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n), r = i(357), o = [], s = {
        canShowIcon: function (e) {
            var t = e.objs, i = e.props, n = e.hitInfo, a = i.cellInfo, r = t.isFlipped, o = n.cellRect, s = o.width,
                l = t.xLen, c = n.col;
            e.row;
            if (!r && a.sheetType === t.colHeader && !(c + 1 > l || e.isEditMode || s < i.textWidth + 2 * i.ICON_SIZE + 2 * (i.ICON_SIZE - 4))) return !0
        }, layer: {
            getouters: function () {
                return $(".J-toggle-drill")
            }, getOuter: function (e, t, i) {
                var n = this.stringfyParam(e, t, i);
                return $('[data-info="' + n + '"]')
            }, getLayerDom: function (e) {
                return $(e).find(".J-toggle-drill-layer")
            }, stringfyParam: function (e, t, i) {
                return "ct_id=" + e + "&row=" + t + "&col=" + i
            }, show: function (e) {
                var t = null, i = e.objs, n = i.xData, a = e.hitInfo, o = (i.sheet, a.row), s = a.col,
                    l = (i.colHeader, e.chart), c = l.info.chart_id,
                    d = !bdpChart.language || "zh" === bdpChart.language, u = n[s], p = u.form_dimension_type, f = r({
                        info: this.stringfyParam(c, o, s),
                        lang: {
                            toggle: d ? "维度切换" : "toggle",
                            drill: d ? "维度下钻" : "drill",
                            recover: d ? "维度还原" : "recover",
                            delete: d ? "维度删除" : "delete"
                        },
                        isOriginField: p && 0 == p || !p,
                        isToggleField: p && 1 == p,
                        isDrillField: p && 2 == p
                    });
                return this.getouters().each(function (e, t) {
                    var i = null;
                    t = $(t), i = t.find(".J-toggle-drill-icon"), i.hasClass("ico-drill-field-select") || t.remove()
                }), this.getOuter(c, o, s).length > 0 ? this : ($("body").append(f), t = this.getOuter(c, o, s), this.getLayerDom(t), i.handleThemeStyleClass(t, e.chart), this.bindDomFuns(e, t), this)
            }, bindDomFuns: function (e, t) {
                t.off("click.toggleDrill").on("click.toggleDrill", function (t) {
                    return s.eventFuns.toggleDrill(t, e), $(document).trigger("table-toggleDrill"), t.preventDefault(), !1
                })
            }, setPos: function (e) {
                var t = e.objs, i = t.sheet, n = e.hitInfo, a = n.cellRect, r = n.row, o = n.col,
                    s = (i.getRowHeight(r, t.colHeader), $(t.canvas).offset()), l = t.getCellPos(r, o), c = l.left + 1;
                l.top;
                this.getOuter(e.chart.info.chart_id, r, o).css({
                    left: c + 9,
                    top: a.y + (a.height - (e.props.ICON_SIZE + 2)) / 2 + s.top
                })
            }, remove: function () {
                s.layer.getouters().each(function (e, t) {
                    var i = null;
                    t = $(t), i = t.find(".J-toggle-drill-icon"), i.hasClass("ico-drill-field-select") || t.remove()
                })
            }, destroy: function (e) {
                var t = s.layer.getouters();
                e && ("display" == $(e.target).attr("action-type") || $(e.target).hasClass("J-int-text")) || (t.remove(), a.default.destroy(e))
            }
        }, resetData: function (e, t) {
            var i = null, n = e.$elem;
            i = "fullscreen" === e.mode ? $(n).parents(".J-chart-fullscreen-wrap-export") : $(n).parents(".gridster-item"), i.data("form-dimension-opt", t)
        }, checkRepeatToggleDimension: function (e, t) {
            for (var i = !1, n = 0, a = e.length; n < a; n++) {
                var r = e[n];
                if (r.origin_ct_index == t.origin_ct_index && r.add_dimensions.length == t.add_dimensions.length && r.trans_dimension.fid == t.trans_dimension.fid && r.trans_dimension.drillfield_uniq_id == t.trans_dimension.drillfield_uniq_id && r.trans_dimension.is_build_aggregated == t.trans_dimension.is_build_aggregated && r.trans_dimension.data_type == t.trans_dimension.data_type) {
                    i = !0;
                    break
                }
            }
            return i
        }, eventFuns: {
            handleMouseover: function (e) {
                var t = e.objs, i = e.hitInfo, n = (t.viewport, e.chart.info.chart_id), a = i.col;
                if (!s.canShowIcon(e)) return s.layer.remove(), void(o = []);
                angular.equals(o, [a, n]) || (s.layer.remove(), o = [a, n]), s.layer.show(e).setPos(e)
            }, handleMousemove: function (e) {
                var t = e.e, i = $(t.target), n = e.objs, a = (n.colHeader, n.getHitTest(t.pageX, t.pageY)),
                    r = a.hitTestType, l = a.row, c = a.col, d = i.parents(".chart-table");
                d.attr("data-ctid"), n.sheet.getCell(l, c, r);
                if (!i.hasClass("J-toggle-drill-icon")) return i.hasClass("chart-canvas") ? void 0 : (s.layer.remove(), void(o = []))
            }, toggleDrill: function (e, t) {
                var i = $(e.target), n = i.data("action"), r = i.parents(".J-toggle-drill"), o = s.layer.getLayerDom(r),
                    l = this;
                switch (n || (n = i.parents("li").data("action")), n) {
                    case"click-icon":
                        t.removeLayers(), a.default.remove(), l.clickIcon(e, t);
                        break;
                    case"toggle":
                        o.addClass("hide");
                        a.default.show($.extend({}, t, {
                            type: n, callback: function (e) {
                                r.remove(), l.toggle({targetField: e, params: t})
                            }, hook: r.find(".J-toggle-drill-icon")
                        }));
                        break;
                    case"drill":
                        o.addClass("hide");
                        a.default.show($.extend({}, t, {
                            type: n, callback: function (e) {
                                r.remove(), l.drill({targetField: e, params: t})
                            }, hook: r.find(".J-toggle-drill-icon")
                        }));
                        break;
                    case"recover":
                        o.addClass("hide"), r.remove(), l.recover({params: t});
                        break;
                    case"delete":
                        o.addClass("hide"), r.remove(), l.delete({params: t})
                }
            }, clickIcon: function (e, t) {
                var i = t.hitInfo, n = (i.row, i.col, $(e.target)), a = n.parents(".J-toggle-drill"),
                    r = s.layer.getouters(), o = s.layer.getLayerDom(a);
                t.chart.info.chart_id;
                r.each(function (e, t) {
                    t = $(t), t.data("info") != a.data("info") && t.remove()
                }), o.hasClass("hide") ? (o.removeClass("hide"), o.addClass("show"), n.removeClass("ico-drill-field-default"), n.addClass("ico-drill-field-select")) : (o.removeClass("show"), o.addClass("hide"), n.removeClass("ico-drill-field-select"), n.addClass("ico-drill-field-default"))
            }, toggle: function (e) {
                var t, i = e.params.objs, n = i.info, a = i.xData, r = e.params.hitInfo,
                    o = (n.form_dimension_info || []).slice(0), l = e.targetField, c = e.params.chart, d = r.col,
                    u = a[d];
                t = n.tb_statistic.showRowOrder ? "origin_ct_index" in u ? u.origin_ct_index : d - 1 < 0 ? 0 : d - 1 : "origin_ct_index" in u ? u.origin_ct_index : d;
                var p = {
                    name: l.name,
                    data_type: l.data_type,
                    fid: l.fid,
                    granularity: l.granularity,
                    is_build_aggregated: l.is_build_aggregated,
                    drillfield_uniq_id: +new Date
                }, f = {origin_ct_index: t, trans_dimension: p, add_dimensions: []};
                if (0 == o.length) o = [f]; else if ("form_dimension_type" in u) {
                    var h = o.find(function (e) {
                        return e.origin_ct_index === t
                    });
                    if (h) if (2 == u.form_dimension_type) {
                        var g = h.add_dimensions.findIndex(function (e) {
                            return e.drillfield_uniq_id == u.drillfield_uniq_id
                        });
                        void 0 !== g && (h.add_dimensions[g] = p)
                    } else h.trans_dimension = p; else o.push(f)
                }
                s.eventFuns.request({chart: c, formDimensionInfo: o, objs: i})
            }, drill: function (e) {
                var t, i = e.params.objs, n = i.info, a = i.xData, r = e.params.hitInfo,
                    o = (n.form_dimension_info || []).slice(0), l = e.targetField, c = e.params.chart, d = r.col,
                    u = a[d];
                t = n.tb_statistic.showRowOrder ? "origin_ct_index" in u ? u.origin_ct_index : d - 1 < 0 ? 0 : d - 1 : "origin_ct_index" in u ? u.origin_ct_index : d;
                var p, f = {
                        name: l.name,
                        data_type: l.data_type,
                        fid: l.fid,
                        granularity: l.granularity,
                        is_build_aggregated: l.is_build_aggregated,
                        drillfield_uniq_id: +new Date
                    }, h = {origin_ct_index: t, trans_dimension: {}, add_dimensions: [f]},
                    o = (n.form_dimension_info || []).slice(0);
                if (0 == o.length) o = [h]; else {
                    for (var g = 0, m = o.length; g < m; g++) {
                        var v = o[g], y = void 0;
                        if (t == v.origin_ct_index) {
                            p = g;
                            for (var b = 0, _ = v.add_dimensions.length; b < _; b++) {
                                if (v.add_dimensions[b].drillfield_uniq_id == u.drillfield_uniq_id) {
                                    y = b;
                                    break
                                }
                            }
                            if (void 0 != y) {
                                v.add_dimensions.splice(y + 1, 0, f);
                                break
                            }
                            v.add_dimensions.unshift(f)
                        }
                    }
                    void 0 == p && o.unshift(h)
                }
                s.eventFuns.request({chart: c, formDimensionInfo: o, objs: i})
            }, recover: function (e) {
                var t, i = e.params.objs, n = i.info, a = i.xData, r = e.params.hitInfo,
                    o = n.form_dimension_info || [], l = e.params.chart, c = r.col, d = a[c];
                t = n.tb_statistic.showRowOrder ? "origin_ct_index" in d ? d.origin_ct_index : c - 1 < 0 ? 0 : c - 1 : "origin_ct_index" in d ? d.origin_ct_index : c;
                for (var o = (n.form_dimension_info || []).slice(0), u = 0, p = o.length; u < p; u++) {
                    var f = o[u];
                    if (t == f.origin_ct_index) {
                        f.trans_dimension = {};
                        break
                    }
                }
                s.eventFuns.request({chart: l, formDimensionInfo: o, objs: i})
            }, delete: function (e) {
                for (var t = e.params.objs, i = t.info, n = t.xData, a = e.params.hitInfo, r = i.form_dimension_info || [], o = e.params.chart, l = a.col, c = n[l], d = ("origin_ct_index" in c ? c.origin_ct_index : l), r = (i.form_dimension_info || []).slice(0), u = 0, p = r.length; u < p; u++) {
                    var f = r[u], h = void 0;
                    if (d == f.origin_ct_index) {
                        for (var g = 0, m = f.add_dimensions.length; g < m; g++) {
                            if (f.add_dimensions[g].drillfield_uniq_id == c.drillfield_uniq_id) {
                                h = g;
                                break
                            }
                        }
                        if (void 0 != h) {
                            f.add_dimensions.splice(h, 1);
                            break
                        }
                    }
                }
                s.eventFuns.request({chart: o, formDimensionInfo: r, objs: t})
            }, request: function (e) {
                var t = {form_dimension_opt: e.formDimensionInfo};
                s.resetData(e.chart, e.formDimensionInfo), e.chart.requestData(t).then(function (t) {
                    t && (0 == t.status ? (e.objs.redraw(t.result), e.chart.emit("data-loaded")) : errorHandle(t))
                })
            }
        }, getAddDimensionCount: function (e, t) {
            for (var i = 0, n = 0, a = e.length; n < a; n++) {
                var r = e[n];
                if (n > t) break;
                2 === r.form_dimension_type && i++
            }
            return i
        }, destroy: function (e) {
            s.layer.destroy(e), o = []
        }
    };
    t.default = s
}, , , function (e, t, i) {
    (function (e) {
        function t(e, t) {
            Object.keys(t).forEach(function (i) {
                e.setAttribute(i, t[i])
            })
        }

        e.exports = function (i, n) {
            n = n || {}, n.attrs = "object" == typeof n.attrs ? n.attrs : {}, n.hmr = void 0 === n.hmr || n.hmr;
            var a = document.createElement("link");
            a.rel = "stylesheet", a.type = "text/css", a.href = i, t(a, n.attrs);
            var r = document.getElementsByTagName("head")[0];
            if (r.appendChild(a), n.hmr && e.hot) return function (e) {
                "string" == typeof e ? a.href = e : r.removeChild(a)
            }
        }
    }).call(t, i(342)(e))
}, function (e, t) {
    e.exports = function (e) {
        return e.webpackPolyfill || (e.deprecate = function () {
        }, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", {
            enumerable: !0,
            get: function () {
                return e.l
            }
        }), Object.defineProperty(e, "id", {
            enumerable: !0, get: function () {
                return e.i
            }
        }), e.webpackPolyfill = 1), e
    }
}, , , , function (e, t, i) {
    "use strict";
    Highcharts.dateFormats = {
        Q: function (e) {
            var t = new Date(e), i = t.getMonth() + 1;
            return Math.ceil(i / 3)
        }
    }, function (e) {
        function t() {
            return !!this.points.length
        }

        function i() {
            var e = this;
            e.hasData() ? e.hideNoData() : e.showNoData()
        }

        var n = e.seriesTypes, a = e.Chart.prototype, r = e.getOptions(), o = e.extend, s = e.each;
        o(r.lang, {noData: "No data to display"}), r.noData = {
            position: {
                x: 0,
                y: 0,
                align: "center",
                verticalAlign: "middle"
            }
        }, r.noData.style = {
            fontWeight: "bold",
            fontSize: "12px",
            color: "#666666"
        }, s(["pie", "gauge", "waterfall", "bubble", "treemap"], function (e) {
            n[e] && (n[e].prototype.hasData = t)
        }), e.Series.prototype.hasData = function () {
            return this.visible && void 0 !== this.dataMax && void 0 !== this.dataMin
        }, a.showNoData = function (e) {
            var t = this, i = t.options, n = e || i.lang.noData, a = i.noData;
            t.noDataLabel || (t.noDataLabel = t.renderer.label(n, 0, 0, null, null, null, a.useHTML, null, "no-data"), t.noDataLabel.attr(a.attr).css(a.style), t.noDataLabel.add(), t.noDataLabel.align(o(t.noDataLabel.getBBox(), a.position), !1, "plotBox"))
        }, a.hideNoData = function () {
            var e = this;
            e.noDataLabel && (e.noDataLabel = e.noDataLabel.destroy())
        }, a.hasData = function () {
            for (var e = this, t = e.series, i = t.length, n = t[0] && "treemap" == t[0].userOptions.type; i--;) if (t[i].hasData() && !t[i].options.isInternal || n) return !0;
            return !1
        }, a.callbacks.push(function (t) {
            e.addEvent(t, "load", i), e.addEvent(t, "redraw", i)
        })
    }(Highcharts), function (e) {
        e.wrap(e.seriesTypes.pie.prototype, "drawPoints", function (t) {
            0 == this.options.borderWidth && e.each(this.points, function (e) {
                e.pointAttr[""] && (e.pointAttr[""]["stroke-width"] = 1, e.pointAttr[""].stroke = e.pointAttr[""].fill, e.pointAttr.hover["stroke-width"] = 1, e.pointAttr.hover.stroke = e.pointAttr.hover.fill, e.pointAttr.select["stroke-width"] = 1, e.pointAttr.select.stroke = e.pointAttr.select.fill)
            }), t.apply(this)
        })
    }(Highcharts), function (e) {
        var t = e.each;
        e.wrap(e.Legend.prototype, "renderItem", function (e, i) {
            function n(e, i, n) {
                t(i, function (e) {
                    t(["group", "markerGroup"], function (t) {
                        e[t].attr("opacity", n)
                    })
                }), t(["group", "markerGroup"], function (t) {
                    e[t].attr("opacity", 1), e.linkedSeries.forEach(function (e) {
                        e[t].attr("opacity", 1), e.linkedSeries.forEach(function (e) {
                            e[t].attr("opacity", 1)
                        })
                    })
                })
            }

            e.call(this, i);
            var a = this.chart, r = a.series, o = (this.options.useHTML ? i.legendItem : i.legendGroup).element,
                s = a.userOptions.chart && a.userOptions.chart.type || "";
            if ("pie" == s) o.onmouseover = function () {
                a.tooltip.refresh(a.series[0].data[$(o).parents(".highcharts-legend-item").index()])
            }, o.onmouseout = function () {
                a.tooltip.hide()
            }; else {
                if ("map" == s) return !1;
                o.onmouseover = function () {
                    n(i, r, .25)
                }, o.onmouseout = function () {
                    n(i, r, 1)
                }
            }
        })
    }(Highcharts), function (e) {
        e.wrap(e.Axis.prototype, "normalizeTimeTickInterval", function (e) {
            var t = e.apply(this, [].slice.call(arguments, 1));
            return t.count < arguments[1] / t.unitRange && t.unitRange <= 6048e5 && t.count++, t
        })
    }(Highcharts), function (e) {
        e.wrap(e.seriesTypes.column.prototype, "translate", function (t) {
            var i = this.options, n = i.borderRadiusTopLeft || 0, a = i.borderRadiusTopRight || 0,
                r = i.borderRadiusBottomRight || 0, o = i.borderRadiusBottomLeft || 0, s = i.topMargin || 0,
                l = i.bottomMargin || 0;
            t.call(this), (n || a || r || o) && e.each(this.points, function (t) {
                var i = t.shapeArgs, c = i.width, d = i.height, u = i.x, p = i.y;
                t.dlBox = t.shapeArgs, t.shapeType = "path", t.originShapeArgs = e.extend({}, t.shapeArgs), t.shapeArgs = {d: ["M", u + n, p + s, "L", u + c - a, p + s, "C", u + c - a / 2, p, u + c, p + a / 2, u + c, p + a, "L", u + c, p + d - r, "C", u + c, p + d - r / 2, u + c - r / 2, p + d, u + c - r, p + d + l, "L", u + o, p + d + l, "C", u + o / 2, p + d, u, p + d - o / 2, u, p + d - o, "L", u, p + n, "C", u, p + n / 2, u + n / 2, p, u + n, p, "Z"]}
            })
        })
    }(Highcharts), function (e) {
        var t = e, i = (t.map, t.format), n = t.defined, a = (t.each, t.stableSort, function (e, i, n, a, r) {
            var o = n[0], s = n[1], l = n[2], c = n[3], d = a.text && a.text.textStr || a, u = d.length, p = n[4];
            if (!r) {
                var f = d.substring(u - 5, 0) + "...";
                n[4].destroy(), p = e.dataLabel2 = e.series.chart.renderer.label(f, 0, 99, o.shape, null, null, o.useHTML, null, "data-label").attr(s), p.addClass("highcharts-data-label-color-" + e.colorIndex + " " + (o.className || "")), p.css(t.extend(i, l)), p.add(c), n[4] = p
            }
            return p
        }), r = function (e) {
            var t = e[1], i = e[0];
            return e[2] - Math.abs(i.label2Pos[2] - t)
        }, o = function (e, t, i, n, o) {
            var s = o.text && o.text.textStr || o;
            if (r(e) < i + 3) {
                var l = 0;
                do {
                    l++
                } while (s.substr(0, l) != s && a(e[0], t, n, s.substr(0, l)).getBBox().width < r(e));
                return s.substr(0, l)
            }
            return a(e[0], t, n, s, !0)
        }, s = function (e, t, i, n, a, r, s) {
            var l, c = t.text && t.text.element.getBoundingClientRect().width;
            l = i > 300 ? .45 * i : i > 150 && i <= 300 ? 200 : i > 110 && i <= 150 ? i : 1.35 * i;
            var d = Math.min(a / 2 - i - 15, l), u = [e, n[0], i + d];
            return o(u, r, c, s, t)
        }, l = function (e) {
            var a, r, o, l, c, d = e.options, u = d.dataLabels, p = e.points, f = e.hasRendered || 0,
                h = t.pick(u.defer, !0), g = e.chart.renderer;
            (u.enabled || e._hasPointLabels) && (e.dlProcessOptions && e.dlProcessOptions(u), c = e.plotGroup("dataLabelsGroup", "data-labels", h && !f ? "hidden" : "visible", u.zIndex || 6), h && (c.attr({opacity: +f}), f || t.addEvent(e, "afterAnimate", function () {
                e.visible && c.show(!0), c[d.animation ? "animate" : "attr"]({opacity: 1}, {duration: 200})
            })), r = u, t.each(p, function (p) {
                var f, h, m, v, y, b, _ = t.extend, w = p.connector, x = !0, C = {};
                a = p.dlOptions || p.options && p.options.dataLabels;
                var k, S = p.dataLabel, T = p.dataLabel2, D = p.shapeArgs;
                if (f = t.pick(a && a.enabled, r.enabled) && null !== p.y, S && !f) p.dataLabel = S.destroy(), T && (p.dataLabel2 = T.destroy()); else {
                    if (u = t.merge(r, a), b = u.style, k = u.style2, y = u.rotation, h = p.getLabelConfig(), o = u.format ? i(u.format, h) : u.formatter.call(h, u, "showPercentage"), k && (l = u.format ? i(u.format, h) : u.formatter.call(h, u, "showConnectorLabel")), p.str2 = l, b.color = t.pick(u.color, b.color, e.color, "#000000"), k && (k.color = t.pick(u.color, k.color, e.color, "#000000")), S) if (n(o) ? (S.attr({text: o}), x = !1) : p.dataLabel = S = S.destroy(), n(l)) {
                        T.attr({text: l});
                        var L = [u, m, C, c, T];
                        s(p, T, D.r, e.center, e.chart.plotWidth, k, L), x = !1
                    } else T && (p.dataLabel2 = T = T.destroy()); else if (n(o)) {
                        m = {
                            fill: u.backgroundColor,
                            stroke: u.borderColor,
                            "stroke-width": u.borderWidth,
                            r: u.borderRadius || 0,
                            rotation: y,
                            padding: u.padding,
                            zIndex: 1
                        }, "contrast" === b.color && (C.color = u.inside || u.distance < 0 || d.stacking ? g.getContrast(p.color || e.color) : "#000000"), d.cursor && (C.cursor = d.cursor);
                        for (v in m) void 0 === m[v] && delete m[v];
                        if (S = p.dataLabel = g[y ? "text" : "label"](o, 0, -9999, u.shape, null, null, u.useHTML, null, "data-label").attr(m), S.addClass("highcharts-data-label-color-" + p.colorIndex + " " + (u.className || "")), S.css(t.extend(b, C)), S.add(c), S.shadow(u.shadow), l) {
                            T = p.dataLabel2 = g[y ? "text" : "label"](l, 0, 99, u.shape, null, null, u.useHTML, null, "data-label").attr(m), T.addClass("highcharts-data-label-color-" + p.colorIndex + " " + (u.className || "")), T.css(t.extend(k, C)), T.add(c);
                            var L = [u, m, C, c, T];
                            s(p, T, D.r, e.center, e.chart.plotWidth, k, L), T.shadow(u.shadow)
                        }
                    }
                    if (T) n(l) ? (T.attr({text: l}), x = !1) : (p.dataLabel2 = T = T.destroy(), w && (p.connector = w.destroy())); else if (n(l)) {
                        m = {
                            fill: u.backgroundColor,
                            stroke: u.borderColor,
                            "stroke-width": u.borderWidth,
                            r: u.borderRadius || 0,
                            rotation: y,
                            padding: u.padding,
                            zIndex: 1
                        }, "contrast" === k.color && (C.color = u.inside || u.distance < 0 || d.stacking ? g.getContrast(p.color || e.color) : "#000000"), d.cursor && (C.cursor = d.cursor);
                        for (v in m) void 0 === m[v] && delete m[v];
                        T = p.dataLabel2 = g[y ? "text" : "label"](o, 0, -9999, u.shape, null, null, u.useHTML, null, "data-label").attr(m), T.addClass("highcharts-data-label-color-" + p.colorIndex + " " + (u.className || "")), T.css(_(k, C)), T.add(c), T.shadow(u.shadow), l && (T = p.dataLabel2 = g[y ? "text" : "label"](l, 0, 99, u.shape, null, null, u.useHTML, null, "data-label").attr(m), T.addClass("highcharts-data-label-color-" + p.colorIndex + " " + (u.className || "")), T.css(_(k, C)), T.add(c), T.shadow(u.shadow))
                    }
                    S && e.alignDataLabel(p, S, u, null, x), T && e.alignDataLabel(p, T, u, null, x)
                }
            }))
        };
        t.wrap(t.seriesTypes.pie.prototype, "drawDataLabels", function (e) {
            var i, n, a, r, o, s, c, d, u, p, f, h = (t.addEvent, t.arrayMax), g = (t.defined, t.each),
                m = (t.extend, t.format, t.map), v = (t.merge, t.noop, t.pick),
                y = (t.relativeLength, t.Series, t.seriesTypes, t.stableSort, this), v = t.pick, b = y.data,
                _ = y.chart, w = y.options.dataLabels, x = v(w.connectorPadding, 10), C = v(w.connectorWidth, 1),
                k = _.plotWidth, S = _.plotHeight, T = w.distance, D = (w.pieTextPadding, y.center), L = D[2] / 2,
                A = D[1], E = [[], []], $ = [[], []], I = [0, 0, 0, 0];
            if (y.visible && (w.enabled || y._hasPointLabels)) {
                l(y);
                var F = function (e, t, n, l, h, g) {
                    var m, v;
                    i = e[t], o = i.labelPos, a = i.dataLabel, m = i.dataLabel2;
                    var b = i.series.options.dataLabels.allowOverlap;
                    if (f = p = i.visible === !1 ? "hidden" : "inherit", v = o[1], m) if (n && void 0 === n[t].pos) f = "hidden"; else {
                        var C = i.dataLabel2.text && i.dataLabel2.text.element.getBoundingClientRect().height;
                        if (u = Math.round(i.label2Pos[3] - C / 5), 1 != b) {
                            var T = h ? l[h][l[h].length - 1] - u > C : u - l[h][l[h].length - 1] > C;
                            0 == l[h].length || T ? l[h].push(u) : f = "hidden"
                        }
                    }
                    if (a && (d = v), m) {
                        var A, E = i.dataLabel2.text && i.dataLabel2.text.element.getBoundingClientRect().width;
                        A = L > 300 ? .45 * L : L > 150 && L <= 300 ? 200 : L > 110 && L <= 150 ? L : 1.35 * L;
                        var $ = Math.min(_.plotWidth / 2 - L - 15, A);
                        c = D[0] + (h ? -1 : 1) * (L + $ - E / 2)
                    }
                    a && (s = y.getX(d > g - 2 ? v : d, h, i)), a._attr = {
                        visibility: p,
                        align: o[6]
                    }, a._pos = {
                        x: s + w.x + ({left: x, right: -x}[o[6]] || 0),
                        y: d + w.y - 10
                    }, o.x = s, o.y = d, m && (m._attr = {visibility: f, align: o[6]}, m._pos = {
                        x: c + w.x + ({
                            left: x,
                            right: -x
                        }[o[6]] || 0), y: u + w.y - 10
                    }, o.x2 = c, o.y2 = u), null === y.options.size && (r = a.width, s - r < x ? I[3] = Math.max(Math.round(r - s + x), I[3]) : s + r > k - x && (I[1] = Math.max(Math.round(s + r - k + x), I[1])), d - NaN < 0 ? I[0] = Math.max(Math.round(-d + NaN), I[0]) : d + NaN > S && (I[2] = Math.max(Math.round(d + NaN - S), I[2])))
                };
                g(b, function (e) {
                    e.dataLabel && e.visible && ($[e.half].push(e), e.dataLabel._pos = null)
                }), g($, function (e, i) {
                    var n, a, r, o, s = e.length;
                    if (s) if (y.sortByAngle(e, i - .5), e[0].dataLabel2 && (T = y.adjustDistance(e[0]), n = Math.max(0, A - L - T), a = Math.min(A + L + T, _.plotHeight), r = m(e, function (e) {
                        if (e.dataLabel2) return o = 1, {target: e.labelPos[1] - n + o / 2, size: o, rank: e.y}
                    }), t.distribute(r, a + o - n)), i) for (var l = s - 1; l >= 0; l--) F(e, l, r, E, i, a); else for (var c = 0; c < s; c++) F(e, c, r, E, i, a)
                }), (0 === h(I) || this.verifyDataLabelOverflow(I)) && (this.placeDataLabels(y), g(this.points, function (e) {
                    var t, i;
                    n = e.connector, (i = e.dataLabel2) && (f = i._attr.visibility, i && i._pos && e.visible && "" !== i.text.textStr && "hidden" !== f ? (t = !n, t && (e.connector = n = _.renderer.path().addClass("highcharts-data-label-connector highcharts-color-" + e.colorIndex).add(y.dataLabelsGroup), n.attr({
                        "stroke-width": C,
                        stroke: w.connectorColor || e.color || "#666666"
                    })), n[t ? "attr" : "animate"]({d: y.connectorPath(e)}), n.attr("visibility", f)) : n && (e.connector = n.destroy()))
                }))
            }
        }), t.wrap(t.seriesTypes.pie.prototype, "connectorPath", function (e) {
            e.apply(this, [].slice.call(arguments, 1));
            var t, i = arguments[1], n = i.labelPos, a = i.label2Pos, r = i.dataLabel2.text.element,
                o = r.getBoundingClientRect().width, s = r.style, l = n.x2,
                c = (n.y2, n.x, n.y, r.textContent && r.textContent.length > 0 && "..." !== r.textContent);
            return c ? (s.opacity = 1, t = ["M", a[0], a[1], "L", a[2], a[3], "H", l + (i.half ? 1 : -1) * (o / 2 + 2)]) : (s.opacity = 0, t = ""), t
        }), t.wrap(t.seriesTypes.pie.prototype, "placeDataLabels", function (e) {
            e.apply(this, [].slice.call(arguments, 1)), t.each(this.points, function (e) {
                var t, i = e.dataLabel, n = e.dataLabel2;
                if (i && e.visible && (t = i._pos, t ? (i.attr(i._attr), i[i.moved ? "animate" : "attr"](t), i.moved = !0) : i && i.attr({y: -9999})), n && e.visible) if (t = n._pos) {
                    if (n.attr(n._attr), n[n.moved ? "animate" : "attr"](t), n.moved) {
                        arguments[0].series
                    }
                    n.moved = !0
                } else n && n.attr({y: -9999})
            })
        })
    }(Highcharts), function (e) {
        e.wrap(e.Series.prototype, "justifyDataLabel", function (e, t, i, n, a, r, o) {
            var s, l, c = this.chart, d = i.align, u = i.verticalAlign, p = t.box ? 0 : t.padding || 0;
            s = n.x + p, s < 0 && ("right" === d ? i.align = "left" : i.x = -s, l = !0), s = n.x + a.width - p;
            var f = c.options.compareBar, h = f ? c.yAxis[0].width : c.plotWidth;
            s > h && ("left" === d ? i.align = "right" : i.x = h - s, l = !0), s = n.y + p, s < 0 && ("bottom" === u ? i.verticalAlign = "top" : i.y = -s, l = !0), s = n.y + a.height - p, s > c.plotHeight && ("top" === u ? i.verticalAlign = "bottom" : i.y = c.plotHeight - s, l = !0), l && (t.placed = !o, t.align(i, null, r))
        })
    }(Highcharts), function (e) {
        var t = (e.addEvent, e.attr, e.charts), i = e.color, n = e.css, a = e.defined, r = (e.doc, e.each),
            o = e.extend, s = e.fireEvent;
        e.offset, e.pick, e.removeEvent, e.splat, e.Tooltip, e.win;
        e.wrap(e.Pointer.prototype, "onContainerMouseMove", function (i, n) {
            var r = this.chart;
            if (a(e.hoverChartIndex) && t[e.hoverChartIndex] && t[e.hoverChartIndex].mouseIsDown || (e.hoverChartIndex = r.index), n = this.normalize(n), n.returnValue = !1, this.lastPos = {
                x: n.chartX,
                y: n.chartY
            }, "mousedown" !== r.mouseIsDown || r.options.disableSelection) {
                if (!this.dragging) if (r.inverted) {
                    var o = r.yAxis.length > 1;
                    n.chartY > r.plotTop + r.plotHeight || o && n.chartY < r.plotTop ? this.isInsideYAxisArea || (this.isInsideYAxisArea = !0, s(r, "mouseenterYAxisArea", n)) : this.isInsideYAxisArea && (this.isInsideYAxisArea = !1, s(r, "mouseoutYAxisArea", n))
                } else {
                    var o = r.yAxis.length > 1;
                    n.chartX < r.plotLeft || o && n.chartX > r.plotLeft + r.plotWidth ? this.isInsideYAxisArea || (this.isInsideYAxisArea = !0, s(r, "mouseenterYAxisArea", n)) : this.isInsideYAxisArea && (this.isInsideYAxisArea = !1, s(r, "mouseoutYAxisArea", n))
                }
                !this.inClass(n.target, "highcharts-tracker") && !r.isInsidePlot(n.chartX - r.plotLeft, n.chartY - r.plotTop) || r.openMenu || this.runPointActions(n)
            } else this.draging(n), t[e.hoverChartIndex] && t[e.hoverChartIndex].pointer.droping(n)
        }), e.wrap(e.Pointer.prototype, "onContainerMouseLeave", function (t, i) {
            var n = e.charts[e.hoverChartIndex];
            n && (i.relatedTarget || i.toElement) && (n.pointer.reset(), n.pointer.chartPosition = null, i = n.pointer.normalize(i), (i.chartX < 0 || i.chartX > n.chartWidth || i.chartY > n.chartHeight) && n.pointer.isInsideYAxisArea && (n.pointer.isInsideYAxisArea = !1, s(n, "mouseoutYAxisArea", i)))
        }), e.wrap(e.Pointer.prototype, "onDocumentMouseMove", function (e, t) {
            var i = this.chart, n = this.chartPosition;
            t = this.normalize(t, n), !n || this.inClass(t.target, "highcharts-tracker") || i.isInsidePlot(t.chartX - i.plotLeft, t.chartY - i.plotTop) || this.reset(), this.dragging && this.onContainerMouseMove(t)
        }), e.wrap(e.Pointer.prototype, "onDocumentMouseUp", function (i, n) {
            this.selectionMarker && (this.selectionMarker = this.selectionMarker.destroy()), t[e.hoverChartIndex] && t[e.hoverChartIndex].pointer.droping(n, "mouseUp")
        }), e.wrap(e.Pointer.prototype, "onContainerClick", function (e, t) {
            var i = this.chart, n = i.hoverPoint, a = i.plotLeft, r = i.plotTop;
            t = this.normalize(t), i.cancelClick ? window.event ? window.event.cancelBubble = !0 : t.stopPropagation() : n && this.inClass(t.target, "highcharts-tracker") ? (s(n.series, "click", o(t, {point: n})), i.hoverPoint && n.firePointEvent("click", t)) : (o(t, this.getCoordinates(t)), i.isInsidePlot(t.chartX - a, t.chartY - r) && s(i, "click", t))
        }), e.extend(e.Pointer.prototype, {
            draging: function (e) {
                var t, n, a = this.chart, r = a.options.chart, o = this.zoomHor, l = this.zoomVert, c = a.plotLeft,
                    d = a.plotTop, u = a.plotWidth, p = a.plotHeight, f = Math.max(Math.min(e.chartX, c + u), c),
                    h = Math.max(Math.min(e.chartY, d + p), 0), g = this.selectionMarker, m = this.mouseDownX,
                    v = this.mouseDownY, y = r.panKey && e[r.panKey + "Key"];
                if (!(g && g.touch || a.navigator && a.navigator.top < v || (this.hasDragged = Math.sqrt(Math.pow(m - f, 2) + Math.pow(v - h, 2)), !(this.hasDragged > 10)))) {
                    if (t = !0, a.hasCartesianSeries && (this.zoomX || this.zoomY) && t && !y && !g) {
                        if (!a.isInsidePlot(m - c, v - d)) return;
                        this.selectionMarker = g = a.renderer.rect(c, d, o ? 1 : u, l ? 1 : p, 0).attr({
                            stroke: i("#5182E4").get(),
                            fill: r.selectionMarkerFill || i("#5182E4").setOpacity(.1).get(),
                            class: "highcharts-selection-marker",
                            zIndex: 7
                        }).add(), this.dragging = !0, s(a, "dragStart", e)
                    }
                    g && o && (n = f - m, g.attr({
                        width: Math.abs(n),
                        x: (n > 0 ? 0 : n) + m
                    })), g && l && (n = h - v, g.attr({
                        height: Math.abs(n),
                        y: (n > 0 ? 0 : n) + v
                    })), t && !g && r.panning && a.pan(e, r.panning)
                }
            }, droping: function (e, t) {
                var i = this, l = this.chart, c = this.hasPinched;
                if (t) {
                    if (this.selectionMarker) {
                        var d = this.selectionMarker.element.getBoundingClientRect();
                        this.selectionMarker = this.selectionMarker.destroy(), c && this.scaleGroups(), s(l, "dragOver", {
                            originalEvent: this.normalize(e),
                            selectionBounding: d
                        }), this.dragging = !1
                    }
                    l && (n(l.container, {cursor: l._cursor}), l.cancelClick = this.hasDragged > 10, l.mouseIsDown = this.hasDragged = this.hasPinched = !1, this.pinchDown = [])
                } else if (this.selectionMarker) {
                    var u, p = {originalEvent: e, xAxis: [], yAxis: []}, f = this.selectionMarker,
                        h = f.attr ? f.attr("x") : f.x, g = f.attr ? f.attr("y") : f.y,
                        m = f.attr ? f.attr("width") : f.width, v = f.attr ? f.attr("height") : f.height;
                    (this.hasDragged || c) && (r(l.axes, function (t) {
                        if (t.zoomEnabled && a(t.min) && (c || i[{xAxis: "zoomX", yAxis: "zoomY"}[t.coll]])) {
                            var n = t.horiz, r = "touchend" === e.type ? t.minPixelPadding : 0,
                                o = t.toValue((n ? h : g) + r), s = t.toValue((n ? h + m : g + v) - r);
                            p[t.coll].push({axis: t, min: Math.min(o, s), max: Math.max(o, s)}), u = !0
                        }
                    }), u && s(l, "selection", p, function (e) {
                        l.zoom(o(e, c ? {animation: !1} : null))
                    }))
                }
            }
        })
    }(Highcharts)
}, function (t, i, n) {
    "use strict";
    var a = n(1), r = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(a);
    !function (t) {
        var i = {}.hasOwnProperty, n = n || 2, a = {
            getMapMeta: function (e) {
                $.ajax({type: "GET", async: !1, url: "/static/js/mapData/geoJson/" + e + ".js", dataType: "script"})
            },
            adcodeMap: {
                "北京市": "110000",
                "北京": "110000",
                "市辖区": "500100",
                "天津市": "120000",
                "天津": "120000",
                "河北省": "130000",
                "河北": "130000",
                "廊坊市": "131000",
                "衡水市": "131100",
                "石家庄市": "130100",
                "唐山市": "130200",
                "秦皇岛市": "130300",
                "邯郸市": "130400",
                "邢台市": "130500",
                "保定市": "130600",
                "张家口市": "130700",
                "承德市": "130800",
                "沧州市": "130900",
                "山西省": "140000",
                "山西": "140000",
                "临汾市": "141000",
                "吕梁市": "141100",
                "太原市": "140100",
                "大同市": "140200",
                "阳泉市": "140300",
                "长治市": "140400",
                "晋城市": "140500",
                "朔州市": "140600",
                "晋中市": "140700",
                "运城市": "140800",
                "忻州市": "140900",
                "内蒙古自治区": "150000",
                "内蒙古": "150000",
                "兴安盟": "152200",
                "锡林郭勒盟": "152500",
                "阿拉善盟": "152900",
                "呼和浩特市": "150100",
                "包头市": "150200",
                "乌海市": "150300",
                "赤峰市": "150400",
                "通辽市": "150500",
                "鄂尔多斯市": "150600",
                "呼伦贝尔市": "150700",
                "巴彦淖尔市": "150800",
                "乌兰察布市": "150900",
                "辽宁省": "210000",
                "辽宁": "210000",
                "辽阳市": "211000",
                "盘锦市": "211100",
                "铁岭市": "211200",
                "朝阳市": "211300",
                "葫芦岛市": "211400",
                "沈阳市": "210100",
                "大连市": "210200",
                "鞍山市": "210300",
                "抚顺市": "210400",
                "本溪市": "210500",
                "丹东市": "210600",
                "锦州市": "210700",
                "营口市": "210800",
                "阜新市": "210900",
                "吉林省": "220000",
                "吉林": "220000",
                "延边朝鲜族自治州": "222400",
                "长春市": "220100",
                "吉林市": "220200",
                "四平市": "220300",
                "辽源市": "220400",
                "通化市": "220500",
                "白山市": "220600",
                "松原市": "220700",
                "白城市": "220800",
                "黑龙江省": "230000",
                "黑龙江": "230000",
                "牡丹江市": "231000",
                "黑河市": "231100",
                "绥化市": "231200",
                "大兴安岭地区": "232700",
                "哈尔滨市": "230100",
                "齐齐哈尔市": "230200",
                "鸡西市": "230300",
                "鹤岗市": "230400",
                "双鸭山市": "230500",
                "大庆市": "230600",
                "伊春市": "230700",
                "佳木斯市": "230800",
                "七台河市": "230900",
                "上海市": "310000",
                "上海": "310000",
                "江苏省": "320000",
                "江苏": "320000",
                "扬州市": "321000",
                "镇江市": "321100",
                "泰州市": "321200",
                "宿迁市": "321300",
                "南京市": "320100",
                "无锡市": "320200",
                "徐州市": "320300",
                "常州市": "320400",
                "苏州市": "320500",
                "南通市": "320600",
                "连云港市": "320700",
                "淮安市": "320800",
                "盐城市": "320900",
                "浙江省": "330000",
                "浙江": "330000",
                "台州市": "331000",
                "丽水市": "331100",
                "杭州市": "330100",
                "宁波市": "330200",
                "温州市": "330300",
                "嘉兴市": "330400",
                "湖州市": "330500",
                "绍兴市": "330600",
                "金华市": "330700",
                "衢州市": "330800",
                "舟山市": "330900",
                "安徽省": "340000",
                "安徽": "340000",
                "黄山市": "341000",
                "滁州市": "341100",
                "阜阳市": "341200",
                "宿州市": "341300",
                "六安市": "341500",
                "亳州市": "341600",
                "池州市": "341700",
                "宣城市": "341800",
                "合肥市": "340100",
                "芜湖市": "340200",
                "蚌埠市": "340300",
                "淮南市": "340400",
                "马鞍山市": "340500",
                "淮北市": "340600",
                "铜陵市": "340700",
                "安庆市": "340800",
                "福建省": "350000",
                "福建": "350000",
                "福州市": "350100",
                "厦门市": "350200",
                "莆田市": "350300",
                "三明市": "350400",
                "泉州市": "350500",
                "漳州市": "350600",
                "南平市": "350700",
                "龙岩市": "350800",
                "宁德市": "350900",
                "江西省": "360000",
                "江西": "360000",
                "抚州市": "361000",
                "上饶市": "361100",
                "南昌市": "360100",
                "景德镇市": "360200",
                "萍乡市": "360300",
                "九江市": "360400",
                "新余市": "360500",
                "鹰潭市": "360600",
                "赣州市": "360700",
                "吉安市": "360800",
                "宜春市": "360900",
                "山东省": "370000",
                "山东": "370000",
                "威海市": "371000",
                "日照市": "371100",
                "莱芜市": "371200",
                "临沂市": "371300",
                "德州市": "371400",
                "聊城市": "371500",
                "滨州市": "371600",
                "菏泽市": "371700",
                "济南市": "370100",
                "青岛市": "370200",
                "淄博市": "370300",
                "枣庄市": "370400",
                "东营市": "370500",
                "烟台市": "370600",
                "潍坊市": "370700",
                "济宁市": "370800",
                "泰安市": "370900",
                "河南省": "410000",
                "河南": "410000",
                "许昌市": "411000",
                "漯河市": "411100",
                "三门峡市": "411200",
                "南阳市": "411300",
                "商丘市": "411400",
                "信阳市": "411500",
                "周口市": "411600",
                "驻马店市": "411700",
                "省直辖县级行政区划": "469000",
                "郑州市": "410100",
                "开封市": "410200",
                "洛阳市": "410300",
                "平顶山市": "410400",
                "安阳市": "410500",
                "鹤壁市": "410600",
                "新乡市": "410700",
                "焦作市": "410800",
                "濮阳市": "410900",
                "湖北省": "420000",
                "湖北": "420000",
                "荆州市": "421000",
                "黄冈市": "421100",
                "咸宁市": "421200",
                "随州市": "421300",
                "恩施土家族苗族自治州": "422800",
                "武汉市": "420100",
                "黄石市": "420200",
                "十堰市": "420300",
                "宜昌市": "420500",
                "襄阳市": "420600",
                "鄂州市": "420700",
                "荆门市": "420800",
                "孝感市": "420900",
                "湖南省": "430000",
                "湖南": "430000",
                "郴州市": "431000",
                "永州市": "431100",
                "怀化市": "431200",
                "娄底市": "431300",
                "湘西土家族苗族自治州": "433100",
                "长沙市": "430100",
                "株洲市": "430200",
                "湘潭市": "430300",
                "衡阳市": "430400",
                "邵阳市": "430500",
                "岳阳市": "430600",
                "常德市": "430700",
                "张家界市": "430800",
                "益阳市": "430900",
                "广东省": "440000",
                "广东": "440000",
                "肇庆市": "441200",
                "惠州市": "441300",
                "梅州市": "441400",
                "汕尾市": "441500",
                "河源市": "441600",
                "阳江市": "441700",
                "清远市": "441800",
                "东莞市": "441900",
                "中山市": "442000",
                "潮州市": "445100",
                "揭阳市": "445200",
                "云浮市": "445300",
                "广州市": "440100",
                "韶关市": "440200",
                "深圳市": "440300",
                "珠海市": "440400",
                "汕头市": "440500",
                "佛山市": "440600",
                "江门市": "440700",
                "湛江市": "440800",
                "茂名市": "440900",
                "广西壮族自治区": "450000",
                "广西": "450000",
                "百色市": "451000",
                "贺州市": "451100",
                "河池市": "451200",
                "来宾市": "451300",
                "崇左市": "451400",
                "南宁市": "450100",
                "柳州市": "450200",
                "桂林市": "450300",
                "梧州市": "450400",
                "北海市": "450500",
                "防城港市": "450600",
                "钦州市": "450700",
                "贵港市": "450800",
                "玉林市": "450900",
                "海南省": "460000",
                "海南": "460000",
                "海口市": "460100",
                "三亚市": "460200",
                "三沙市": "460300",
                "儋州市": "460400",
                "重庆市": "500000",
                "重庆": "500000",
                "县": "500200",
                "四川省": "510000",
                "四川": "510000",
                "内江市": "511000",
                "乐山市": "511100",
                "南充市": "511300",
                "眉山市": "511400",
                "宜宾市": "511500",
                "广安市": "511600",
                "达州市": "511700",
                "雅安市": "511800",
                "巴中市": "511900",
                "资阳市": "512000",
                "阿坝藏族羌族自治州": "513200",
                "甘孜藏族自治州": "513300",
                "凉山彝族自治州": "513400",
                "成都市": "510100",
                "自贡市": "510300",
                "攀枝花市": "510400",
                "泸州市": "510500",
                "德阳市": "510600",
                "绵阳市": "510700",
                "广元市": "510800",
                "遂宁市": "510900",
                "贵州省": "520000",
                "贵州": "520000",
                "黔西南布依族苗族自治州": "522300",
                "黔东南苗族侗族自治州": "522600",
                "黔南布依族苗族自治州": "522700",
                "贵阳市": "520100",
                "六盘水市": "520200",
                "遵义市": "520300",
                "安顺市": "520400",
                "毕节市": "520500",
                "铜仁市": "520600",
                "云南省": "530000",
                "云南": "530000",
                "楚雄彝族自治州": "532300",
                "红河哈尼族彝族自治州": "532500",
                "文山壮族苗族自治州": "532600",
                "西双版纳傣族自治州": "532800",
                "大理白族自治州": "532900",
                "德宏傣族景颇族自治州": "533100",
                "怒江傈僳族自治州": "533300",
                "迪庆藏族自治州": "533400",
                "昆明市": "530100",
                "曲靖市": "530300",
                "玉溪市": "530400",
                "保山市": "530500",
                "昭通市": "530600",
                "丽江市": "530700",
                "普洱市": "530800",
                "临沧市": "530900",
                "西藏自治区": "540000",
                "西藏": "540000",
                "那曲地区": "542400",
                "阿里地区": "542500",
                "拉萨市": "540100",
                "日喀则市": "540200",
                "昌都市": "540300",
                "林芝市": "540400",
                "山南市": "540500",
                "陕西省": "610000",
                "陕西": "610000",
                "商洛市": "611000",
                "西安市": "610100",
                "铜川市": "610200",
                "宝鸡市": "610300",
                "咸阳市": "610400",
                "渭南市": "610500",
                "延安市": "610600",
                "汉中市": "610700",
                "榆林市": "610800",
                "安康市": "610900",
                "甘肃省": "620000",
                "甘肃": "620000",
                "庆阳市": "621000",
                "定西市": "621100",
                "陇南市": "621200",
                "临夏回族自治州": "622900",
                "甘南藏族自治州": "623000",
                "兰州市": "620100",
                "嘉峪关市": "620200",
                "金昌市": "620300",
                "白银市": "620400",
                "天水市": "620500",
                "武威市": "620600",
                "张掖市": "620700",
                "平凉市": "620800",
                "酒泉市": "620900",
                "青海省": "630000",
                "青海": "630000",
                "海北藏族自治州": "632200",
                "黄南藏族自治州": "632300",
                "海南藏族自治州": "632500",
                "果洛藏族自治州": "632600",
                "玉树藏族自治州": "632700",
                "海西蒙古族藏族自治州": "632800",
                "西宁市": "630100",
                "海东市": "630200",
                "宁夏回族自治区": "640000",
                "宁夏": "640000",
                "银川市": "640100",
                "石嘴山市": "640200",
                "吴忠市": "640300",
                "固原市": "640400",
                "中卫市": "640500",
                "新疆维吾尔自治区": "650000",
                "新疆": "650000",
                "昌吉回族自治州": "652300",
                "博尔塔拉蒙古自治州": "652700",
                "巴音郭楞蒙古自治州": "652800",
                "阿克苏地区": "652900",
                "克孜勒苏柯尔克孜自治州": "653000",
                "喀什地区": "653100",
                "和田地区": "653200",
                "伊犁哈萨克自治州": "654000",
                "塔城地区": "654200",
                "阿勒泰地区": "654300",
                "自治区直辖县级行政区划": "659000",
                "乌鲁木齐市": "650100",
                "克拉玛依市": "650200",
                "吐鲁番市": "650400",
                "哈密市": "650500",
                "台湾省": "710000",
                "台湾": "710000",
                "香港特别行政区": "810000",
                "香港": "810000",
                "澳门特别行政区": "820000",
                "澳门": "820000"
            },
            mapType: ["中国", "广东", "青海", "四川", "海南", "陕西", "甘肃", "云南", "湖南", "湖北", "黑龙江", "贵州", "山东", "江西", "河南", "河北", "山西", "安徽", "福建", "浙江", "江苏", "吉林", "辽宁", "台湾", "新疆", "广西", "宁夏", "内蒙古", "西藏", "北京", "天津", "上海", "重庆", "香港", "澳门", "广东省", "青海省", "四川省", "海南省", "陕西省", "甘肃省", "云南省", "湖南省", "湖北省", "黑龙江省", "贵州省", "山东省", "江西省", "河南省", "河北省", "山西省", "安徽省", "福建省", "浙江省", "江苏省", "吉林省", "辽宁省", "台湾", "新疆维吾尔自治区", "广西壮族自治区", "宁夏回族自治区", "内蒙古自治区", "西藏自治区", "北京市", "天津市", "上海市", "重庆市", "香港特别行政区", "澳门特别行政区", "台湾省", "宁夏回族"],
            cityMap: {
                "安徽": "an_hui",
                "澳门": "ao_men",
                "北京": "bei_jing",
                "重庆": "chong_qing",
                "福建": "fu_jian",
                "甘肃": "gan_su",
                "广东": "guang_dong",
                "广西": "guang_xi",
                "贵州": "gui_zhou",
                "海南": "hai_nan",
                "河北": "he_bei",
                "河南": "he_nan",
                "黑龙江": "hei_long_jiang",
                "湖北": "hu_bei",
                "湖南": "hu_nan",
                "吉林": "ji_lin",
                "江苏": "jiang_su",
                "江西": "jiang_xi",
                "辽宁": "liao_ning",
                "内蒙古": "nei_meng_gu",
                "宁夏": "ning_xia",
                "青海": "qing_hai",
                "山东": "shan_dong",
                "山西": "shan_xi_2",
                "陕西": "shan_xi_1",
                "上海": "shang_hai",
                "四川": "si_chuan",
                "台湾": "tai_wan",
                "天津": "tian_jin",
                "西藏": "xi_zang",
                "香港": "xiang_gang",
                "新疆": "xin_jiang",
                "云南": "yun_nan",
                "浙江": "zhe_jiang",
                "世界": "world",
                "中国": "china",
                "安徽省": "an_hui",
                "澳门特别行政区": "ao_men",
                "北京市": "bei_jing",
                "重庆市": "chong_qing",
                "福建省": "fu_jian",
                "甘肃省": "gan_su",
                "广东省": "guang_dong",
                "广西省": "guang_xi",
                "贵州省": "gui_zhou",
                "海南省": "hai_nan",
                "河北省": "he_bei",
                "河南省": "he_nan",
                "黑龙江省": "hei_long_jiang",
                "湖北省": "hu_bei",
                "湖南省": "hu_nan",
                "吉林省": "ji_lin",
                "江苏省": "jiang_su",
                "江西省": "jiang_xi",
                "辽宁省": "liao_ning",
                "内蒙古自治区": "nei_meng_gu",
                "宁夏回族自治区": "ning_xia",
                "青海省": "qing_hai",
                "山东省": "shan_dong",
                "山西省": "shan_xi_2",
                "陕西省": "shan_xi_1",
                "上海市": "shang_hai",
                "四川省": "si_chuan",
                "台湾省": "tai_wan",
                "天津市": "tian_jin",
                "西藏自治区": "xi_zang",
                "香港特别行政区": "xiang_gang",
                "新疆维吾尔自治区": "xin_jiang",
                "云南省": "yun_nan",
                "浙江省": "zhe_jiang",
                "宁夏回族": "ning_xia",
                "广西壮族自治区": "guang_xi"
            },
            mapPathTree: function () {
                var e = {
                    110100: {id: "110100", pid: "110000", path: "city_district/"},
                    120100: {id: "120100", pid: "120000", path: "city_district/"},
                    130100: {id: "130100", pid: "130000", path: "city_district/"},
                    130200: {id: "130200", pid: "130000", path: "city_district/"},
                    130300: {id: "130300", pid: "130000", path: "city_district/"},
                    130400: {id: "130400", pid: "130000", path: "city_district/"},
                    130500: {id: "130500", pid: "130000", path: "city_district/"},
                    130600: {id: "130600", pid: "130000", path: "city_district/"},
                    130700: {id: "130700", pid: "130000", path: "city_district/"},
                    130800: {id: "130800", pid: "130000", path: "city_district/"},
                    130900: {id: "130900", pid: "130000", path: "city_district/"},
                    131000: {id: "131000", pid: "130000", path: "city_district/"},
                    131100: {id: "131100", pid: "130000", path: "city_district/"},
                    140100: {id: "140100", pid: "140000", path: "city_district/"},
                    140200: {id: "140200", pid: "140000", path: "city_district/"},
                    140300: {id: "140300", pid: "140000", path: "city_district/"},
                    140400: {id: "140400", pid: "140000", path: "city_district/"},
                    140500: {id: "140500", pid: "140000", path: "city_district/"},
                    140600: {id: "140600", pid: "140000", path: "city_district/"},
                    140700: {id: "140700", pid: "140000", path: "city_district/"},
                    140800: {id: "140800", pid: "140000", path: "city_district/"},
                    140900: {id: "140900", pid: "140000", path: "city_district/"},
                    141000: {id: "141000", pid: "140000", path: "city_district/"},
                    141100: {id: "141100", pid: "140000", path: "city_district/"},
                    150100: {id: "150100", pid: "150000", path: "city_district/"},
                    150200: {id: "150200", pid: "150000", path: "city_district/"},
                    150300: {id: "150300", pid: "150000", path: "city_district/"},
                    150400: {id: "150400", pid: "150000", path: "city_district/"},
                    150500: {id: "150500", pid: "150000", path: "city_district/"},
                    150600: {id: "150600", pid: "150000", path: "city_district/"},
                    150700: {id: "150700", pid: "150000", path: "city_district/"},
                    150800: {id: "150800", pid: "150000", path: "city_district/"},
                    150900: {id: "150900", pid: "150000", path: "city_district/"},
                    152200: {id: "152200", pid: "150000", path: "city_district/"},
                    152500: {id: "152500", pid: "150000", path: "city_district/"},
                    152900: {id: "152900", pid: "150000", path: "city_district/"},
                    210100: {id: "210100", pid: "210000", path: "city_district/"},
                    210200: {id: "210200", pid: "210000", path: "city_district/"},
                    210300: {id: "210300", pid: "210000", path: "city_district/"},
                    210400: {id: "210400", pid: "210000", path: "city_district/"},
                    210500: {id: "210500", pid: "210000", path: "city_district/"},
                    210600: {id: "210600", pid: "210000", path: "city_district/"},
                    210700: {id: "210700", pid: "210000", path: "city_district/"},
                    210800: {id: "210800", pid: "210000", path: "city_district/"},
                    210900: {id: "210900", pid: "210000", path: "city_district/"},
                    211000: {id: "211000", pid: "210000", path: "city_district/"},
                    211100: {id: "211100", pid: "210000", path: "city_district/"},
                    211200: {id: "211200", pid: "210000", path: "city_district/"},
                    211300: {id: "211300", pid: "210000", path: "city_district/"},
                    211400: {id: "211400", pid: "210000", path: "city_district/"},
                    220100: {id: "220100", pid: "220000", path: "city_district/"},
                    220200: {id: "220200", pid: "220000", path: "city_district/"},
                    220300: {id: "220300", pid: "220000", path: "city_district/"},
                    220400: {id: "220400", pid: "220000", path: "city_district/"},
                    220500: {id: "220500", pid: "220000", path: "city_district/"},
                    220600: {id: "220600", pid: "220000", path: "city_district/"},
                    220700: {id: "220700", pid: "220000", path: "city_district/"},
                    220800: {id: "220800", pid: "220000", path: "city_district/"},
                    222400: {id: "222400", pid: "220000", path: "city_district/"},
                    230100: {id: "230100", pid: "230000", path: "city_district/"},
                    230200: {id: "230200", pid: "230000", path: "city_district/"},
                    230300: {id: "230300", pid: "230000", path: "city_district/"},
                    230400: {id: "230400", pid: "230000", path: "city_district/"},
                    230500: {id: "230500", pid: "230000", path: "city_district/"},
                    230600: {id: "230600", pid: "230000", path: "city_district/"},
                    230700: {id: "230700", pid: "230000", path: "city_district/"},
                    230800: {id: "230800", pid: "230000", path: "city_district/"},
                    230900: {id: "230900", pid: "230000", path: "city_district/"},
                    231000: {id: "231000", pid: "230000", path: "city_district/"},
                    231100: {id: "231100", pid: "230000", path: "city_district/"},
                    231200: {id: "231200", pid: "230000", path: "city_district/"},
                    232700: {id: "232700", pid: "230000", path: "city_district/"},
                    310100: {id: "310100", pid: "310000", path: "city_district/"},
                    310200: {id: "310200", pid: "310000", path: "city_district/"},
                    320100: {id: "320100", pid: "320000", path: "city_district/"},
                    320200: {id: "320200", pid: "320000", path: "city_district/"},
                    320300: {id: "320300", pid: "320000", path: "city_district/"},
                    320400: {id: "320400", pid: "320000", path: "city_district/"},
                    320500: {id: "320500", pid: "320000", path: "city_district/"},
                    320600: {id: "320600", pid: "320000", path: "city_district/"},
                    320700: {id: "320700", pid: "320000", path: "city_district/"},
                    320800: {id: "320800", pid: "320000", path: "city_district/"},
                    320900: {id: "320900", pid: "320000", path: "city_district/"},
                    321000: {id: "321000", pid: "320000", path: "city_district/"},
                    321100: {id: "321100", pid: "320000", path: "city_district/"},
                    321200: {id: "321200", pid: "320000", path: "city_district/"},
                    321300: {id: "321300", pid: "320000", path: "city_district/"},
                    330100: {id: "330100", pid: "330000", path: "city_district/"},
                    330200: {id: "330200", pid: "330000", path: "city_district/"},
                    330300: {id: "330300", pid: "330000", path: "city_district/"},
                    330400: {id: "330400", pid: "330000", path: "city_district/"},
                    330500: {id: "330500", pid: "330000", path: "city_district/"},
                    330600: {id: "330600", pid: "330000", path: "city_district/"},
                    330700: {id: "330700", pid: "330000", path: "city_district/"},
                    330800: {id: "330800", pid: "330000", path: "city_district/"},
                    330900: {id: "330900", pid: "330000", path: "city_district/"},
                    331000: {id: "331000", pid: "330000", path: "city_district/"},
                    331100: {id: "331100", pid: "330000", path: "city_district/"},
                    340100: {id: "340100", pid: "340000", path: "city_district/"},
                    340200: {id: "340200", pid: "340000", path: "city_district/"},
                    340300: {id: "340300", pid: "340000", path: "city_district/"},
                    340400: {id: "340400", pid: "340000", path: "city_district/"},
                    340500: {id: "340500", pid: "340000", path: "city_district/"},
                    340600: {id: "340600", pid: "340000", path: "city_district/"},
                    340700: {id: "340700", pid: "340000", path: "city_district/"},
                    340800: {id: "340800", pid: "340000", path: "city_district/"},
                    341000: {id: "341000", pid: "340000", path: "city_district/"},
                    341100: {id: "341100", pid: "340000", path: "city_district/"},
                    341200: {id: "341200", pid: "340000", path: "city_district/"},
                    341300: {id: "341300", pid: "340000", path: "city_district/"},
                    341500: {id: "341500", pid: "340000", path: "city_district/"},
                    341600: {id: "341600", pid: "340000", path: "city_district/"},
                    341700: {id: "341700", pid: "340000", path: "city_district/"},
                    341800: {id: "341800", pid: "340000", path: "city_district/"},
                    350100: {id: "350100", pid: "350000", path: "city_district/"},
                    350200: {id: "350200", pid: "350000", path: "city_district/"},
                    350300: {id: "350300", pid: "350000", path: "city_district/"},
                    350400: {id: "350400", pid: "350000", path: "city_district/"},
                    350500: {id: "350500", pid: "350000", path: "city_district/"},
                    350600: {id: "350600", pid: "350000", path: "city_district/"},
                    350700: {id: "350700", pid: "350000", path: "city_district/"},
                    350800: {id: "350800", pid: "350000", path: "city_district/"},
                    350900: {id: "350900", pid: "350000", path: "city_district/"},
                    360100: {id: "360100", pid: "360000", path: "city_district/"},
                    360200: {id: "360200", pid: "360000", path: "city_district/"},
                    360300: {id: "360300", pid: "360000", path: "city_district/"},
                    360400: {id: "360400", pid: "360000", path: "city_district/"},
                    360500: {id: "360500", pid: "360000", path: "city_district/"},
                    360600: {id: "360600", pid: "360000", path: "city_district/"},
                    360700: {id: "360700", pid: "360000", path: "city_district/"},
                    360800: {id: "360800", pid: "360000", path: "city_district/"},
                    360900: {id: "360900", pid: "360000", path: "city_district/"},
                    361000: {id: "361000", pid: "360000", path: "city_district/"},
                    361100: {id: "361100", pid: "360000", path: "city_district/"},
                    370100: {id: "370100", pid: "370000", path: "city_district/"},
                    370200: {id: "370200", pid: "370000", path: "city_district/"},
                    370300: {id: "370300", pid: "370000", path: "city_district/"},
                    370400: {id: "370400", pid: "370000", path: "city_district/"},
                    370500: {id: "370500", pid: "370000", path: "city_district/"},
                    370600: {id: "370600", pid: "370000", path: "city_district/"},
                    370700: {id: "370700", pid: "370000", path: "city_district/"},
                    370800: {id: "370800", pid: "370000", path: "city_district/"},
                    370900: {id: "370900", pid: "370000", path: "city_district/"},
                    371000: {id: "371000", pid: "370000", path: "city_district/"},
                    371100: {id: "371100", pid: "370000", path: "city_district/"},
                    371200: {id: "371200", pid: "370000", path: "city_district/"},
                    371300: {id: "371300", pid: "370000", path: "city_district/"},
                    371400: {id: "371400", pid: "370000", path: "city_district/"},
                    371500: {id: "371500", pid: "370000", path: "city_district/"},
                    371600: {id: "371600", pid: "370000", path: "city_district/"},
                    371700: {id: "371700", pid: "370000", path: "city_district/"},
                    410100: {id: "410100", pid: "410000", path: "city_district/"},
                    410200: {id: "410200", pid: "410000", path: "city_district/"},
                    410300: {id: "410300", pid: "410000", path: "city_district/"},
                    410400: {id: "410400", pid: "410000", path: "city_district/"},
                    410500: {id: "410500", pid: "410000", path: "city_district/"},
                    410600: {id: "410600", pid: "410000", path: "city_district/"},
                    410700: {id: "410700", pid: "410000", path: "city_district/"},
                    410800: {id: "410800", pid: "410000", path: "city_district/"},
                    410900: {id: "410900", pid: "410000", path: "city_district/"},
                    411000: {id: "411000", pid: "410000", path: "city_district/"},
                    411100: {id: "411100", pid: "410000", path: "city_district/"},
                    411200: {id: "411200", pid: "410000", path: "city_district/"},
                    411300: {id: "411300", pid: "410000", path: "city_district/"},
                    411400: {id: "411400", pid: "410000", path: "city_district/"},
                    411500: {id: "411500", pid: "410000", path: "city_district/"},
                    411600: {id: "411600", pid: "410000", path: "city_district/"},
                    411700: {id: "411700", pid: "410000", path: "city_district/"},
                    420100: {id: "420100", pid: "420000", path: "city_district/"},
                    420200: {id: "420200", pid: "420000", path: "city_district/"},
                    420300: {id: "420300", pid: "420000", path: "city_district/"},
                    420500: {id: "420500", pid: "420000", path: "city_district/"},
                    420600: {id: "420600", pid: "420000", path: "city_district/"},
                    420700: {id: "420700", pid: "420000", path: "city_district/"},
                    420800: {id: "420800", pid: "420000", path: "city_district/"},
                    420900: {id: "420900", pid: "420000", path: "city_district/"},
                    421000: {id: "421000", pid: "420000", path: "city_district/"},
                    421100: {id: "421100", pid: "420000", path: "city_district/"},
                    421200: {id: "421200", pid: "420000", path: "city_district/"},
                    421300: {id: "421300", pid: "420000", path: "city_district/"},
                    422800: {id: "422800", pid: "420000", path: "city_district/"},
                    429000: {id: "429000", pid: "420000", path: "city_district/"},
                    430100: {id: "430100", pid: "430000", path: "city_district/"},
                    430200: {id: "430200", pid: "430000", path: "city_district/"},
                    430300: {id: "430300", pid: "430000", path: "city_district/"},
                    430400: {id: "430400", pid: "430000", path: "city_district/"},
                    430500: {id: "430500", pid: "430000", path: "city_district/"},
                    430600: {id: "430600", pid: "430000", path: "city_district/"},
                    430700: {id: "430700", pid: "430000", path: "city_district/"},
                    430800: {id: "430800", pid: "430000", path: "city_district/"},
                    430900: {id: "430900", pid: "430000", path: "city_district/"},
                    431000: {id: "431000", pid: "430000", path: "city_district/"},
                    431100: {id: "431100", pid: "430000", path: "city_district/"},
                    431200: {id: "431200", pid: "430000", path: "city_district/"},
                    431300: {id: "431300", pid: "430000", path: "city_district/"},
                    433100: {id: "433100", pid: "430000", path: "city_district/"},
                    440100: {id: "440100", pid: "440000", path: "city_district/"},
                    440200: {id: "440200", pid: "440000", path: "city_district/"},
                    440300: {id: "440300", pid: "440000", path: "city_district/"},
                    440400: {id: "440400", pid: "440000", path: "city_district/"},
                    440500: {id: "440500", pid: "440000", path: "city_district/"},
                    440600: {id: "440600", pid: "440000", path: "city_district/"},
                    440700: {id: "440700", pid: "440000", path: "city_district/"},
                    440800: {id: "440800", pid: "440000", path: "city_district/"},
                    440900: {id: "440900", pid: "440000", path: "city_district/"},
                    441200: {id: "441200", pid: "440000", path: "city_district/"},
                    441300: {id: "441300", pid: "440000", path: "city_district/"},
                    441400: {id: "441400", pid: "440000", path: "city_district/"},
                    441500: {id: "441500", pid: "440000", path: "city_district/"},
                    441600: {id: "441600", pid: "440000", path: "city_district/"},
                    441700: {id: "441700", pid: "440000", path: "city_district/"},
                    441800: {id: "441800", pid: "440000", path: "city_district/"},
                    441900: {id: "441900", pid: "440000", path: "city_district/"},
                    442000: {id: "442000", pid: "440000", path: "city_district/"},
                    445100: {id: "445100", pid: "440000", path: "city_district/"},
                    445200: {id: "445200", pid: "440000", path: "city_district/"},
                    445300: {id: "445300", pid: "440000", path: "city_district/"},
                    450100: {id: "450100", pid: "450000", path: "city_district/"},
                    450200: {id: "450200", pid: "450000", path: "city_district/"},
                    450300: {id: "450300", pid: "450000", path: "city_district/"},
                    450400: {id: "450400", pid: "450000", path: "city_district/"},
                    450500: {id: "450500", pid: "450000", path: "city_district/"},
                    450600: {id: "450600", pid: "450000", path: "city_district/"},
                    450700: {id: "450700", pid: "450000", path: "city_district/"},
                    450800: {id: "450800", pid: "450000", path: "city_district/"},
                    450900: {id: "450900", pid: "450000", path: "city_district/"},
                    451000: {id: "451000", pid: "450000", path: "city_district/"},
                    451100: {id: "451100", pid: "450000", path: "city_district/"},
                    451200: {id: "451200", pid: "450000", path: "city_district/"},
                    451300: {id: "451300", pid: "450000", path: "city_district/"},
                    451400: {id: "451400", pid: "450000", path: "city_district/"},
                    460100: {id: "460100", pid: "460000", path: "city_district/"},
                    460200: {id: "460200", pid: "460000", path: "city_district/"},
                    460300: {id: "460300", pid: "460000", path: "city_district/"},
                    469000: {id: "469000", pid: "460000", path: "city_district/"},
                    500100: {id: "500100", pid: "500000", path: "city_district/"},
                    510100: {id: "510100", pid: "510000", path: "city_district/"},
                    510300: {id: "510300", pid: "510000", path: "city_district/"},
                    510400: {id: "510400", pid: "510000", path: "city_district/"},
                    510500: {id: "510500", pid: "510000", path: "city_district/"},
                    510600: {id: "510600", pid: "510000", path: "city_district/"},
                    510700: {id: "510700", pid: "510000", path: "city_district/"},
                    510800: {id: "510800", pid: "510000", path: "city_district/"},
                    510900: {id: "510900", pid: "510000", path: "city_district/"},
                    511000: {id: "511000", pid: "510000", path: "city_district/"},
                    511100: {id: "511100", pid: "510000", path: "city_district/"},
                    511300: {id: "511300", pid: "510000", path: "city_district/"},
                    511400: {id: "511400", pid: "510000", path: "city_district/"},
                    511500: {id: "511500", pid: "510000", path: "city_district/"},
                    511600: {id: "511600", pid: "510000", path: "city_district/"},
                    511700: {id: "511700", pid: "510000", path: "city_district/"},
                    511800: {id: "511800", pid: "510000", path: "city_district/"},
                    511900: {id: "511900", pid: "510000", path: "city_district/"},
                    512000: {id: "512000", pid: "510000", path: "city_district/"},
                    513200: {id: "513200", pid: "510000", path: "city_district/"},
                    513300: {id: "513300", pid: "510000", path: "city_district/"},
                    513400: {id: "513400", pid: "510000", path: "city_district/"},
                    520100: {id: "520100", pid: "520000", path: "city_district/"},
                    520200: {id: "520200", pid: "520000", path: "city_district/"},
                    520300: {id: "520300", pid: "520000", path: "city_district/"},
                    520400: {id: "520400", pid: "520000", path: "city_district/"},
                    522200: {id: "522200", pid: "520000", path: "city_district/"},
                    522300: {id: "522300", pid: "520000", path: "city_district/"},
                    522400: {id: "522400", pid: "520000", path: "city_district/"},
                    522600: {id: "522600", pid: "520000", path: "city_district/"},
                    522700: {id: "522700", pid: "520000", path: "city_district/"},
                    530100: {id: "530100", pid: "530000", path: "city_district/"},
                    530300: {id: "530300", pid: "530000", path: "city_district/"},
                    530400: {id: "530400", pid: "530000", path: "city_district/"},
                    530500: {id: "530500", pid: "530000", path: "city_district/"},
                    530600: {id: "530600", pid: "530000", path: "city_district/"},
                    530700: {id: "530700", pid: "530000", path: "city_district/"},
                    530800: {id: "530800", pid: "530000", path: "city_district/"},
                    530900: {id: "530900", pid: "530000", path: "city_district/"},
                    532300: {id: "532300", pid: "530000", path: "city_district/"},
                    532500: {id: "532500", pid: "530000", path: "city_district/"},
                    532600: {id: "532600", pid: "530000", path: "city_district/"},
                    532800: {id: "532800", pid: "530000", path: "city_district/"},
                    532900: {id: "532900", pid: "530000", path: "city_district/"},
                    533100: {id: "533100", pid: "530000", path: "city_district/"},
                    533300: {id: "533300", pid: "530000", path: "city_district/"},
                    533400: {id: "533400", pid: "530000", path: "city_district/"},
                    540100: {id: "540100", pid: "540000", path: "city_district/"},
                    542100: {id: "542100", pid: "540000", path: "city_district/"},
                    542200: {id: "542200", pid: "540000", path: "city_district/"},
                    542300: {id: "542300", pid: "540000", path: "city_district/"},
                    542400: {id: "542400", pid: "540000", path: "city_district/"},
                    542500: {id: "542500", pid: "540000", path: "city_district/"},
                    542600: {id: "542600", pid: "540000", path: "city_district/"},
                    610100: {id: "610100", pid: "610000", path: "city_district/"},
                    610200: {id: "610200", pid: "610000", path: "city_district/"},
                    610300: {id: "610300", pid: "610000", path: "city_district/"},
                    610400: {id: "610400", pid: "610000", path: "city_district/"},
                    610500: {id: "610500", pid: "610000", path: "city_district/"},
                    610600: {id: "610600", pid: "610000", path: "city_district/"},
                    610700: {id: "610700", pid: "610000", path: "city_district/"},
                    610800: {id: "610800", pid: "610000", path: "city_district/"},
                    610900: {id: "610900", pid: "610000", path: "city_district/"},
                    611000: {id: "611000", pid: "610000", path: "city_district/"},
                    620100: {id: "620100", pid: "620000", path: "city_district/"},
                    620200: {id: "620200", pid: "620000", path: "city_district/"},
                    620300: {id: "620300", pid: "620000", path: "city_district/"},
                    620400: {id: "620400", pid: "620000", path: "city_district/"},
                    620500: {id: "620500", pid: "620000", path: "city_district/"},
                    620600: {id: "620600", pid: "620000", path: "city_district/"},
                    620700: {id: "620700", pid: "620000", path: "city_district/"},
                    620800: {id: "620800", pid: "620000", path: "city_district/"},
                    620900: {id: "620900", pid: "620000", path: "city_district/"},
                    621000: {id: "621000", pid: "620000", path: "city_district/"},
                    621100: {id: "621100", pid: "620000", path: "city_district/"},
                    621200: {id: "621200", pid: "620000", path: "city_district/"},
                    622900: {id: "622900", pid: "620000", path: "city_district/"},
                    623000: {id: "623000", pid: "620000", path: "city_district/"},
                    630100: {id: "630100", pid: "630000", path: "city_district/"},
                    632100: {id: "632100", pid: "630000", path: "city_district/"},
                    632200: {id: "632200", pid: "630000", path: "city_district/"},
                    632300: {id: "632300", pid: "630000", path: "city_district/"},
                    632500: {id: "632500", pid: "630000", path: "city_district/"},
                    632600: {id: "632600", pid: "630000", path: "city_district/"},
                    632700: {id: "632700", pid: "630000", path: "city_district/"},
                    632800: {id: "632800", pid: "630000", path: "city_district/"},
                    640100: {id: "640100", pid: "640000", path: "city_district/"},
                    640200: {id: "640200", pid: "640000", path: "city_district/"},
                    640300: {id: "640300", pid: "640000", path: "city_district/"},
                    640400: {id: "640400", pid: "640000", path: "city_district/"},
                    640500: {id: "640500", pid: "640000", path: "city_district/"},
                    650100: {id: "650100", pid: "650000", path: "city_district/"},
                    650200: {id: "650200", pid: "650000", path: "city_district/"},
                    652100: {id: "652100", pid: "650000", path: "city_district/"},
                    652200: {id: "652200", pid: "650000", path: "city_district/"},
                    652300: {id: "652300", pid: "650000", path: "city_district/"},
                    652700: {id: "652700", pid: "650000", path: "city_district/"},
                    652800: {id: "652800", pid: "650000", path: "city_district/"},
                    652900: {id: "652900", pid: "650000", path: "city_district/"},
                    653000: {id: "653000", pid: "650000", path: "city_district/"},
                    653100: {id: "653100", pid: "650000", path: "city_district/"},
                    653200: {id: "653200", pid: "650000", path: "city_district/"},
                    654000: {id: "654000", pid: "650000", path: "city_district/"},
                    654200: {id: "654200", pid: "650000", path: "city_district/"},
                    654300: {id: "654300", pid: "650000", path: "city_district/"},
                    659000: {id: "659000", pid: "650000", path: "city_district/"},
                    710000: {id: "710000", pid: "710000", path: "city_district/"},
                    810100: {id: "810100", pid: "810000", path: "city_district/"},
                    820000: {id: "820000", pid: "820000", path: "city_district/"}
                }, t = {
                    110000: {id: "110000", pid: "110000_0", path: "province_district/"},
                    "110000_0": {id: "110000", pid: "china_province", path: "province_city/"},
                    310000: {id: "310000", pid: "310000_0", path: "province_district/"},
                    "310000_0": {id: "310000", pid: "china_province", path: "province_city/"},
                    120000: {id: "120000", pid: "120000_0", path: "province_district/"},
                    "120000_0": {id: "120000", pid: "china_province", path: "province_city/"},
                    130000: {id: "130000", pid: "china_province", path: "province_city/"},
                    230000: {id: "230000", pid: "china_province", path: "province_city/"},
                    370000: {id: "370000", pid: "china_province", path: "province_city/"},
                    500000: {id: "500000", pid: "china_province", path: "province_city/"},
                    630000: {id: "630000", pid: "china_province", path: "province_city/"},
                    410000: {id: "410000", pid: "china_province", path: "province_city/"},
                    510000: {id: "510000", pid: "china_province", path: "province_city/"},
                    640000: {id: "640000", pid: "china_province", path: "province_city/"},
                    320000: {id: "320000", pid: "china_province", path: "province_city/"},
                    420000: {id: "420000", pid: "china_province", path: "province_city/"},
                    520000: {id: "520000", pid: "china_province", path: "province_city/"},
                    650000: {id: "650000", pid: "china_province", path: "province_city/"},
                    140000: {id: "140000", pid: "china_province", path: "province_city/"},
                    330000: {id: "330000", pid: "china_province", path: "province_city/"},
                    430000: {id: "430000", pid: "china_province", path: "province_city/"},
                    530000: {id: "530000", pid: "china_province", path: "province_city/"},
                    710000: {id: "710000", pid: "china_province", path: "province_city/"},
                    150000: {id: "150000", pid: "china_province", path: "province_city/"},
                    340000: {id: "340000", pid: "china_province", path: "province_city/"},
                    440000: {id: "440000", pid: "china_province", path: "province_city/"},
                    540000: {id: "540000", pid: "china_province", path: "province_city/"},
                    810000: {id: "810000", pid: "china_province", path: "province_city/"},
                    210000: {id: "210000", pid: "china_province", path: "province_city/"},
                    350000: {id: "350000", pid: "china_province", path: "province_city/"},
                    450000: {id: "450000", pid: "china_province", path: "province_city/"},
                    610000: {id: "610000", pid: "china_province", path: "province_city/"},
                    820000: {id: "820000", pid: "china_province", path: "province_city/"},
                    220000: {id: "220000", pid: "china_province", path: "province_city/"},
                    360000: {id: "360000", pid: "china_province", path: "province_city/"},
                    460000: {id: "460000", pid: "china_province", path: "province_city/"},
                    620000: {id: "620000", pid: "china_province", path: "province_city/"},
                    china_province: {id: "china_province", pid: "china", path: ""},
                    china_city: {id: "china_city", pid: "china", path: ""},
                    china: {id: "china", pid: null, path: ""}
                };
                return $.extend(e, t)
            }(),
            inherit: function (e, t) {
                function n() {
                    this.constructor = e
                }

                for (var a in t) i.call(t, a) && (e[a] = t[a]);
                return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e
            },
            getTimeZoneOffset: function () {
                return (new Date).getTimezoneOffset() / 60
            },
            params: function (e) {
                var t = {};
                return $.each(e, function (e, i) {
                    angular.isObject(i) ? t[e] = angular.toJson(i) : t[e] = i
                }), t
            },
            checkIsAllDataNull: function (e, t) {
                if (!e[t][0]) return !0;
                var i = 0;
                return e[t].forEach(function (e) {
                    e.data.y_data ? e.data.y_data.forEach(function (e) {
                        null !== e && "null" !== e || i++
                    }) : e.data.forEach(function (e) {
                        null !== e && "null" !== e || i++
                    })
                }), i === e[t][0].data.length * e[t].length
            },
            isDrillChart: function (e) {
                return e && e.drill_level > 0
            },
            getGranularity: function (e, t, i) {
                i = void 0 === i ? 0 : i;
                var n, a = e.x[i], r = {
                    year: bdp.utils.isLeapYear(a.data[a.data.length - 1]) ? 316224e5 : 31536e6,
                    quarter: 7776e6,
                    month: 26784e5,
                    week: 6048e5,
                    day: 864e5,
                    hour: 36e5,
                    minute: 6e4,
                    second: 1e3
                }, o = a.granularity || "day", s = a.granularity_name || "";
                return o = r[o] ? o : "day", n = r[o], "day" == o && t > 20 && (n = r.week), {
                    tickInterval: n,
                    granularity: o,
                    granularity_name: s
                }
            },
            subDateFormat: function (e, t) {
                var i, n = $.cookie("locale") || "zh";
                if (n && "zh" != n) {
                    i = {
                        year: "{{v}}",
                        quarter: "Q{{v}}",
                        week: "Week {{v}}",
                        day: "Day {{v}}",
                        hour: "{{v}}H",
                        minute: "{{v}}min",
                        second: "{{v}}s"
                    };
                    var a = ["", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                    return "month" == e ? a[t] : (i[e] || "").replace("{{v}}", t)
                }
                return i = {
                    year: "年",
                    quarter: "季度",
                    month: "月",
                    week: "周",
                    day: "日",
                    hour: "时",
                    minute: "分",
                    second: "秒"
                }, t + (i[e] || "")
            },
            setGranularityByDate: function (e, t) {
                return "hour" === e ? t <= 2592e5 ? "c_hour" : "day" : "minute" === e ? t <= 108e5 ? "c_minute" : t <= 2592e5 ? "c_hour" : "day" : "second" === e ? t <= 18e4 ? "c_second" : t <= 36e5 ? "c_minute" : t <= 864e5 ? "c_hour" : "day" : e
            },
            checkGranularity: function (e, t, i, n, r) {
                if (t = +t, isNaN(t)) return "Invalid Date";
                r = r || $.cookie("locale") || "zh";
                var o;
                o = r && "zh" != r ? "abb" == r ? {
                    year: "%Y",
                    quarter: "%Y-Q%Q",
                    month: "%Y/%b",
                    day: "%Y/%b/%d",
                    hour: "%d %HH",
                    minute: "%H:%M",
                    second: "%M'%S''",
                    c_hour: "%d %HH",
                    c_minute: "%H:%M",
                    c_second: "%M'%S''",
                    g_hour: "%Y/%b/%d %H:00",
                    g_minute: "%Y/%b/%d %H:%M",
                    g_second: "%Y/%b/%d %H:%M:%S"
                } : {
                    year: "%Y",
                    quarter: "Q%Q-%Y",
                    month: "%m-%Y",
                    day: "%m/%d/%Y",
                    hour: "%d %HH",
                    minute: "%H:%M",
                    second: "%M'%S''",
                    c_hour: "%d %HH",
                    c_minute: "%H:%M",
                    c_second: "%M'%S''",
                    g_hour: "%m/%d/%Y %HH",
                    g_minute: "%m/%d/%Y %H:%M",
                    g_second: "%m/%d/%Y %H:%M:%S"
                } : {
                    year: "%Y年",
                    quarter: "%Y年第%Q季度",
                    month: "%Y年%m月",
                    day: "%Y年%m月%d日",
                    hour: "%d日%H时",
                    minute: "%H时%M分",
                    second: "%M分%S秒",
                    c_hour: "%d日%H时",
                    c_minute: "%H时%M分",
                    c_second: "%M分%S秒",
                    g_hour: "%Y年%m月%d日%H时",
                    g_minute: "%Y年%m月%d日 %H时%M分",
                    g_second: "%Y年%m月%d日 %H时%M分%S秒"
                };
                var s = "", l = new Date(t);
                if ("month" === e && i) {
                    n !== new Date(t).getDate() && (l = new Date(t - 3456e5))
                }
                return e in o ? (Highcharts.setOptions({global: {useUTC: !1}}), s = Highcharts.dateFormat(o[e], l, !1)) : "week" === e && "number" == typeof t && (s = a.getWeekWithOffset(t, n)), s
            },
            getWeekNumber: function (e, t) {
                for (var t = t || 1, i = new Date(e), n = new Date(i.getFullYear(), 0, 1), r = 1, o = 0 === n.getDay() ? 7 : n.getDay(); o !== t;) n = new Date(n.getTime() + 864e5), o = 0 === n.getDay() ? 7 : n.getDay();
                return e < n.getTime() ? a.getWeekNumber(new Date(i.getFullYear(), 0, 1).getTime() - 864e5, t) : (r = Math.floor((i - n) / 6048e5) + 1, {
                    week: r,
                    year: i.getFullYear()
                })
            },
            getWeekWithOffset: function (e, t) {
                var i = $.cookie("locale") || "zh", n = a.getWeekNumber(e, t), r = n.year;
                return i && "zh" != i ? "Week " + n.week + "-" + r : r + "年第" + n.week + "周"
            },
            checkPercentLabel: function (e, t, i, n, a) {
                var r, o, s = "", l = angular.copy(t);
                if ("C243" == i && "left" == n) {
                    if (e.value = -e.value, n = "", l.y = [].concat(t.y[0]), e.isLast && a) return ""
                } else "C243" == i && (l.y = t.y.length > 1 ? [].concat(t.y[1]) : [].concat(t.y[0]), n = "");
                n = n ? "y_optional" : "y", "C280" === i && (l[n] = [].concat(t.y[1]));
                for (var c = 0; c < l[n].length; c++) {
                    var d = l[n][c].formatter;
                    if (d && "num" == d.check && d.num.unit) {
                        s = "num", d, r = l[n][c].aggregator;
                        break
                    }
                    if (d && "percent" == d.check) {
                        s = "percent", o = d.percent.digit;
                        break
                    }
                }
                if ("C212" === i || "C242" === i || "C352" === i) return this.numericSymbols(e.value) + "%";
                if ("percent" == s) {
                    var u = e.value;
                    u.toString().split(".")[1];
                    return Highcharts.numberFormat(Number(u).mul(100), Math.max(0, o)) + "%"
                }
                return "num" == s ? this.dataLabelFormatter(d, e.value, r) : this.numericSymbols(e.value)
            },
            getPositiveOrNegative: function (e, t, i) {
                function n(e) {
                    e = Number(e), e < 0 ? o++ : e >= 0 && r++
                }

                i = i || [];
                for (var a, r = 0, o = 0, s = 0; s < e[t].length; s++) if (!(i.indexOf(s) > -1)) {
                    var l = e[t][s].data;
                    "[object Array]" !== {}.toString.call(l) && (l = [l]);
                    for (var c = 0; c < l.length; c++) {
                        if ((a = l[c]) && $.isArray(a.y_data)) a.y_data.forEach(function (e) {
                            n(e)
                        }); else if ($.isArray(e[t][s].data[c])) {
                            a = e[t][s].data[c];
                            for (var d = 0; d < a.length; d++) n(a[d])
                        } else n(e[t][s].data[c]);
                        if (o > 0 && r > 0) return "mix"
                    }
                }
                return o > 0 ? "negative" : "positive"
            },
            getSumByColumnFromMultiArray: function (e, t, i, n) {
                n = n || [];
                for (var a, r = [], o = 0; o < e[t][0].data.length; o++) {
                    r[o] = 0;
                    for (var s = 0; s < e[t].length; s++) n.indexOf(s) < 0 && (a = 1 * e[t][s].data[o], r[o] = "max" === i ? r[o] + (a > 0 ? a : 0) : r[o] + (a < 0 ? a : 0))
                }
                return Math[i].apply(null, r)
            },
            getEdgeValueFromMultiArray: function (e, t, i, n, a) {
                var r = function (e) {
                    for (var t, i = [], n = (e || []).length, a = -1; ++a < n;) t = e[a], "string" == typeof t && (t = parseFloat(t, 10)), function (e) {
                        return "number" == typeof e && !isNaN(e) && isFinite(e)
                    }(t) && i.push(t);
                    return i
                };
                a = a || [];
                var o = +e[t][0].data[0];
                if ("C320" === n) {
                    var s = [];
                    e.x.length ? angular.forEach(e[t][0].data, function (e, t) {
                        s.push((s[t - 1] || 0) + Number(e))
                    }) : angular.forEach(e[t], function (e, t) {
                        s.push((s[t - 1] || 0) + Number(e.data[0]))
                    }), o = Math[i](Math[i].apply(null, s), s[0])
                } else if ("C281" === n) {
                    o = "max" === i ? Number.MIN_VALUE : Number.MAX_VALUE;
                    for (var l = 0; l < e[t].length; l++) if (a.indexOf(l) < 0) {
                        var c = e[t][l].data;
                        "[object Array]" !== {}.toString.call(c) && (c = [c]);
                        var d = [];
                        c.forEach(function (e) {
                            d = d.concat(r(e.y_data))
                        }), o = Math[i](Math[i].apply(null, d), o)
                    }
                } else for (var l = 0; l < e[t].length; l++) if (a.indexOf(l) < 0) {
                    var c = e[t][l].data;
                    c[0] && $.isArray(c[0]) && (c = c.join(",").split(",")), o = Math[i](Math[i].apply(null, c), o)
                }
                return o !== Number.MIN_VALUE && o !== Number.MAX_VALUE || (o = 0), o
            },
            numericSymbols: function (e, t) {
                var i = Math.abs(e), n = t || 2, a = e >= 0 ? "" : "-";
                if (i <= 1) return e;
                var r = ["", "K", "M", "B", "T", "P", "E"], o = Math.floor(Math.log(i).div(Math.log(1e3)));
                o = o > r.length ? r.length : o;
                var s = a + Highcharts.numberFormat(i.div(Math.pow(1e3, o)).toFixed(n), -1) + r[o];
                return s.indexOf("undefined") > -1 && (s = e), s
            },
            numericSymbolsWithDigit: function (e) {
                var t = Math.abs(e), i = e >= 0 ? "" : "-", n = ["", "K", "M", "B", "T", "P", "E"],
                    a = Math.floor(Math.log(t).div(Math.log(1e3)));
                a = a < 0 ? 0 : a, a = a > n.length ? n.length : a;
                var r = Highcharts.numberFormat(t.div(Math.pow(1e3, a)), -1),
                    o = isInteger(r) ? 0 : r.toString().split(".")[1].length;
                return i + Number(r).toFixed(Math.min(4, o)) + n[a]
            },
            formatNumber: function (e, t) {
                var i = t || 4, n = e < 0;
                e = "number" == typeof e ? Math.abs(e) : Math.abs(Number(e));
                var r, o, s;
                if (0 == e || 1 == e) return e * (n ? -1 : 1);
                if (e < 1) return s = e.toString().split(".")[1].length, o = e * Math.pow(10, s), a.formatNumber(n ? -1 * o : o, i) / Math.pow(10, s);
                if (e < 4) {
                    if (t) return s = e !== Math.ceil(e) ? e.toString().split(".")[1].length : 1, o = e * Math.pow(10, s), a.formatNumber(n ? -1 * o : o, t) / Math.pow(10, s);
                    r = Math.ceil(e)
                } else s = Math.floor(e).toString().length, o = s > 1 ? i * Math.pow(10, s - 2) : i, r = o * Math.pow(10, s) * Math.ceil(e / o) / Math.pow(10, s);
                return r * (n ? -1 : 1)
            },
            formatMapNum: function (e, t, i) {
                var n = t || 4, r = e < 0;
                e = "number" == typeof e ? Math.abs(e) : Math.abs(Number(e));
                var o, s, l;
                if (0 == e || 1 == e) return e * (r ? -1 : 1);
                if (e < 1) {
                    if (l = e.toString().split(".")[1].length, s = e * Math.pow(10, l), "ceil" === i) return a.formatNumber(r ? -1 * s : s) / Math.pow(10, l);
                    if ("floor" === i) return a.formatMapNum(r ? -1 * s : s, n, "floor") / Math.pow(10, l)
                } else e < 4 ? "ceil" === i ? o = Math.ceil(e) : "floor" === i && (o = Math.floor(e)) : (l = Math.floor(e).toString().length, s = l > 1 ? n * Math.pow(10, l - 2) : n, "ceil" === i ? o = s * Math.pow(10, l) * Math.ceil(e / s) / Math.pow(10, l) : "floor" === i && (o = s * Math.pow(10, l) * Math.floor(e / s) / Math.pow(10, l)));
                return o * (r ? -1 : 1)
            },
            dataLabelFormatter: function (e, t, i) {
                var n = 2;
                if (e) {
                    if ("percent" != e.check && ("en" == o.language && ("10000" == e.num.unit ? e.num.unit = "1000" : "100000000" == e.num.unit && (e.num.unit = "1000000")), e.num.unit && (t /= e.num.unit)), "" !== e[e.check].digit && (n = e[e.check].digit), t = "num" == e.check && e.num.millesimal ? Highcharts.numberFormat(t, n, ".", ",") : "num" == e.check ? Highcharts.numberFormat(t, n, ".", "") : Highcharts.numberFormat(100 * t, n, ".", "") + "%", "percent" != e.check) switch (e.num.unit) {
                        case"10000":
                            t += "万";
                            break;
                        case"100000000":
                            t += "亿";
                            break;
                        case"1000":
                            t += "k";
                            break;
                        case"1000000":
                            t += "M";
                            break;
                        case"1000000000":
                            t += "G"
                    }
                } else "COUNT" != i && "COUNT_DISTINCT" != i || (n = 0), t = Highcharts.numberFormat(t, n);
                return t
            },
            pointAbsPosInPlotArea: function (t, i, n, a, r) {
                var s = this, l = o.ChartType, c = 0, d = 0, u = 0, p = 0;
                if (i == l.Biax) {
                    var f = t.series.options.type;
                    "column" == f ? i = t.stackTotal ? l.NStackColumn : l.Column : ["line", "spline"].indexOf(f) > -1 && (i = l.Line)
                }
                if (s.info && s.info.chart_type == l.ComparisonBar && "pos_side" == s.info.comparison_xaxis_pos) {
                    var h = $(e.target.container)[0].getBoundingClientRect(), g = n.left - h.left, m = n.width + g,
                        v = n.right + g;
                    n = {left: n.left, right: v, bottom: n.bottom, top: n.top, width: m, height: n.height}
                }
                switch (i) {
                    case l.Line:
                        c = d = r ? t.plotX : t.x, u = p = r ? t.plotY : t.y;
                        break;
                    case l.Area:
                    case l.NStackArea:
                    case l.PStackArea:
                        c = d = r ? t.plotX : t.x, u = p = r ? t.plotY : t.y;
                        break;
                    case l.Column:
                        c = t.barX, d = c + (t.shapeArgs ? t.shapeArgs.width || 0 : 0), u = t.negative ? (t.plotY || 0) - (t.shapeArgs ? t.shapeArgs.height || 0 : 0) : t.plotY || 0, p = t.negative ? t.plotY || 0 : u + (t.shapeArgs ? t.shapeArgs.height || 0 : 0)
                        ;
                        break;
                    case l.Waterfall:
                        c = t.barX, d = c + (t.shapeArgs ? t.shapeArgs.width || 0 : 0), u = t.plotY || 0, p = u + (t.shapeArgs ? t.shapeArgs.height || 0 : 0);
                        break;
                    case l.NStackColumn:
                    case l.PStackColumn:
                        c = t.barX, d = c + t.pointWidth, u = t.negative ? t.shapeArgs && t.shapeArgs.height ? t.plotY - t.shapeArgs.height : t.yBottom : t.plotY || 0, p = t.negative ? t.plotY || 0 : t.shapeArgs && t.shapeArgs.height ? u + t.shapeArgs.height : t.yBottom;
                        break;
                    case l.Bar:
                        d = n.width - t.shapeArgs.y, c = d - t.shapeArgs.height, p = n.height - t.shapeArgs.x, u = p - t.shapeArgs.width;
                        break;
                    case l.NStackBar:
                    case l.PStackBar:
                        d = n.width - (t.plotY || 0), c = n.width - t.yBottom, p = n.height - t.barX, u = p - t.pointWidth;
                        break;
                    case l.ComparisonBar:
                        d = t.negative ? n.width / 2 : n.width - t.shapeArgs.y, c = t.negative ? n.width / 2 - t.shapeArgs.height : d - t.shapeArgs.height, p = n.height - t.shapeArgs.x, u = p - t.shapeArgs.width
                }
                return {
                    pointTopY: Math.min(u, p),
                    pointBottomY: Math.max(u, p),
                    pointLeftX: Math.min(c, d),
                    pointRightX: Math.max(c, d)
                }
            },
            mobileHelper: {
                tooltipFormatter: function (e, t, i, r, s) {
                    var l, c = o.ChartType, d = s.unit_left || "", u = "", p = !1, f = o.language || "zh",
                        h = e.points ? e.points[0].point : e.point, g = e.points ? e.points[0].key : e.key;
                    if ("C370" === t) {
                        var m = e.point.parent;
                        if (m) {
                            var v = g;
                            g = e.series.nodeMap[m].name + " - " + v
                        } else l = g
                    }
                    if ("C320" === t && (0 === e.points[0].point.index && 0 === e.points[0].point.category, p = e.points[0].point.isSum), 1 === i.x.length && "date" === i.x[0].data_type && "C370" !== t) {
                        var y = r.xAxis[0], b = y.granularity || "day", _ = y.granularity_name || "",
                            w = y.month_start_day || 0;
                        if ("C230" === t && (g = h.x), "week" === b ? (_ && (g += 864e5 * (y.week_start_day_of_week - 1)), w = y.week_start_day_of_week) : "hour" !== b && "minute" !== b && "second" !== b || (b = "g_" + b), "C230" === t) {
                            var x = h.index || 0, C = h.series.data && h.series.data[x];
                            l = ["其它", "Else"].indexOf(C.options.x) >= 0 ? C.options.x : a.checkGranularity(b, g, _, w)
                        } else l = p ? "" : a.checkGranularity(b, g, _, w), "week" === b && (l += "（" + Highcharts.dateFormat("%m/%d", new Date(g)) + "~" + Highcharts.dateFormat("%m/%d", new Date(g + 5184e5)) + "）")
                    } else if (1 === i.x.length && "sub_date" === i.x[0].data_type && "C370" !== t) {
                        var k = i.x[0].fid.split("_")[1];
                        l = a.subDateFormat(k, g)
                    } else {
                        var S = [c.Column, c.NStackColumn, c.PStackColumn, c.Bar, c.NStackBar, c.PStackBar, c.Line, c.Waterfall, c.TreeMap, c.Biax].indexOf(t) > -1;
                        l = 2 === i.x.length && S && !p && e.x && e.x.parent ? e.x.parent.name + " - " + e.x.name : g
                    }
                    if (p) l = r.waterfall_setting ? r.waterfall_setting.sum_name : "en" === f ? "Sum" : "累计值"; else if ("C280" === t) {
                        "scatter" == h.series.type || "bubble" == h.series.type ? angular.forEach(i.x, function (e, t) {
                            l = bdp.utils.encodeHTML(e.nick_name || e.name) + "：" + l
                        }) : "line" == h.series.type && (l = "y=" + i.scatter_setting.linear_model.a + "* x " + (i.scatter_setting.linear_model.b < 0 ? "-" : "+") + " " + Math.abs(i.scatter_setting.linear_model.b))
                    } else "C261" === t && (l = "");
                    "" !== l && (u = 0 === i.x.length && 0 === g ? "" : '<p class="text-left tooltips-title">' + a.escapeHtml(l) + "</p>");
                    var T = !i.x.length && !r.compare_axis.length && ["C261", "C290"].indexOf(t) < 0;
                    u += '<div class="tooltips-point-wrap' + (T ? " no-dimension" : "") + ("" == l ? " pt10" : "") + '"><div class="tooltips-table">';
                    var D;
                    if ("C230" === t) u += this.tooltipFormatterForPie(e, t, i, r, s); else if ("C280" === t) u += this.tooltipFormatterForScatter(e, t, i, r, s); else if ("C370" === t) {
                        var L = (1 == n || e.color, "en" == o.language ? "count" : "数值"),
                            A = i.y[0] && i.y[0].nick_name || i.y[0] && i.y[0].name || L,
                            E = i.y[0] && a.dataLabelFormatter(i.y[0].formatter, e.point.value, i.y[0].aggregator) || e.point.value,
                            I = e.point.sum || e.point.series.nodeMap[""].val, F = e.point.value / I * 100;
                        u += '<div class="tooltips-item"><div class="tooltips-val" style="color:' + e.color + '">' + E + "（" + F.toFixed(2) + '%）</div><div class="tooltips-label">' + $.trim(bdp.utils.encodeHTML(A)) + "</div></div>"
                    } else if (["C271", "C272", "C273"].indexOf(t) > -1) {
                        var O, M, N = i.y[0].formatter, A = i.y[0].nick_name || i.y[0].name;
                        "C271" === t ? (O = e.point.value, D = e.point.color || "#72AFD9") : "C272" === t ? (O = e.point.z, D = e.point.color) : "C273" == t && (O = e.point.value, D = e.point.textColor || "#72AFD9");
                        var j = "";
                        i.y[0].hasOwnProperty("unit_adv") && (M = i.y[0].unit_adv), j = "" != M ? M : d, u += '<div class="tooltips-item"><div class="tooltips-val" style="color:' + D + '">' + a.dataLabelFormatter(N, O) + j + '</div><div class="tooltips-label">' + $.trim(bdp.utils.encodeHTML(A)) + "</div></div>"
                    } else $.each(e.points, function (e) {
                        var o, l = this, c = 1 == n ? "#FFF" : l.series.color, p = l.series._i;
                        o = "C320" === t ? 1 === i.x.length ? i.y[0].nick_name || i.y[0].name : "" : "C261" === t ? i.y[0].nick_name || i.y[0].name : i.x.length > 0 || r.compare_axis.length || "C290" === t ? l.series.options.nick_name || l.series.options.name : "";
                        var f, h = l.series.options.formatter, g = l.series.options.aggregator, m = l.y, v = "", y = "";
                        if (l.series.options.hasOwnProperty("unit_adv") && (y = l.series.options.unit_adv), ["C212", "C242", "C352"].indexOf(t) > -1) {
                            var b = "";
                            b = "" != y ? y : d, m = a.dataLabelFormatter(h, m, g), u += '<div class="tooltips-item"><div class="tooltips-val" style="color:' + c + '">' + m + b + "（" + l.percentage.toFixed(1) + '%）</div><div class="tooltips-label">' + $.trim(bdp.utils.encodeHTML(o)) + "</div></div>"
                        } else {
                            var _ = i.y_optional ? i.y.concat(i.y_optional) : i.y, w = _[p] || _[e];
                            if (["C211", "C241", "C351"].indexOf(t) > -1 && (w = _[_.length - 1 - (p || e)]), m = "C243" === t ? a.dataLabelFormatter(w.formatter, Math.abs(m), g) : a.timePredicted.checkType(l.series.options, "enable", "area") ? a.dataLabelFormatter(w.formatter, l.low || l.point.low, g) + " ~ " + a.dataLabelFormatter(w.formatter, l.high || l.point.high, g) : a.dataLabelFormatter(w.formatter, m, g), "C250" === t) {
                                var x = r.type_optional;
                                l.series.options.yAxis && (d = r.zero_aligned ? s.unit_left || "" : s.unit_right || "");
                                var C = x[l.series.options.yAxis];
                                "column" === l.series.options.type && "C212" === C && (v = "（" + l.percentage.toFixed(1) + "%）")
                            } else "C290" === t ? d = "" : "C230" === t && (v = "（" + l.percentage.toFixed(1) + "%）");
                            f = "" != y ? m + y + v : m + d + v, D = l.point.color || l.series.color, c = 1 == n ? "#FFF" : D, u += '<div class="tooltips-item"><div class="tooltips-val" style="color:' + c + '">' + f + '</div><div class="tooltips-label">' + $.trim(bdp.utils.encodeHTML(o)) + "</div></div>"
                        }
                    });
                    return u += "</div></div>"
                }, tooltipFormatterForPie: function (e, t, i, n, r) {
                    var o = n.xAxis.length, s = ($.cookie("locale"), e.points ? e.points[0] : e.point), l = s.y,
                        c = s.formatter, d = s.aggregator, u = "",
                        p = o || n.compare_axis.length ? 0 : s.point ? s.point.index : s.index;
                    u = o ? $.trim(i.y[0].nick_name || i.y[0].name) : $.trim(i.y[p].nick_name || i.y[p].name);
                    var f = "";
                    return i.y[p].hasOwnProperty("unit_adv") && "" != i.y[p].unit_adv && (f = i.y[p].unit_adv), l = a.dataLabelFormatter(c, l, d), '<div class="tooltips-item"><div class="tooltips-val" style="color:' + s.color + '">' + l + f + "（" + s.percentage.toFixed(2) + '%）</div><div class="tooltips-label">' + $.trim(bdp.utils.encodeHTML(u)) + "</div>"
                }, tooltipFormatterForScatter: function (e, t, i, n, r) {
                    var o;
                    o = e.points ? e.points[0].point : e.point;
                    var s = o.color, l = i.y[0].nick_name || i.y[0].name, c = i.y[1].nick_name || i.y[1].name, d = "",
                        u = "";
                    d = i.y[0].hasOwnProperty("unit_adv") && "" != i.y[0].unit_adv ? i.y[0].unit_adv : n.xaxis_unit || "", u = i.y[1].hasOwnProperty("unit_adv") && "" != i.y[1].unit_adv ? i.y[1].unit_adv : r.unit_left || "";
                    var p = a.dataLabelFormatter(i.y[0].formatter, o.x) + d,
                        f = a.dataLabelFormatter(i.y[1].formatter, o.y) + u;
                    return '<div class="tooltips-item"><div class="tooltips-val" style="color:' + s + '">' + p + '</div><div class="tooltips-label">' + bdp.utils.encodeHTML(l) + '（X）</div></div><div class="tooltips-item"><div class="tooltips-val" style="color:' + s + '">' + f + '</div><div class="tooltips-label">' + bdp.utils.encodeHTML(c) + "（Y）</div></div>"
                }
            },
            legendFormatter: function (e, t) {
                var i = e.options.nick_name || e.options.name || e.name;
                i = i.replace(/^\s+/, "");
                var n = i.length > 11 ? i.substring(0, 10) + "..." : i, a = "";
                return e.options.isScatterTrendLine && "Trendline" == i && (a = " hidden-legend-content"), '<div class="legend-content' + a + '" title="' + bdp.utils.encodeHTML(i) + '">' + bdp.utils.encodeHTML(n) + "</div>"
            },
            generateTitle: function (e, t, i) {
                var n, r, s = "", l = t.summary.supply_summary || [], c = t.y;
                1 == i.yAxis.length && i && a.timePredicted.isOpen(e, i.yAxis) && (c = t.y.slice(0, 1));
                var d = "C240 C241 C242".indexOf(e) > -1 && i.reversed ? "text-right" : "";
                if (["C230", "C250", "C243"].indexOf(e) < 0 && 1 == c.length && 1 === l.length) for (var u = 0, p = l.length; u < p; u++) {
                    for (var f = l[u], h = null === f.s_ori_value || "--" === f.s_ori_value ? "--" : Number(f.s_ori_value), g = void 0, m = void 0, v = void 0, y = void 0, u = 0; u < c.length; u++) n = c[u], r = n.formatter, (void 0 == g || Number(n.formatter.num.unit) < g) && (r.num && (g = r.num.unit, m = r.num.digit), r.percent && (v = r.percent.digit), y = "percent" == r.check);
                    if (null !== f.s_ori_value && "--" !== f.s_ori_value) if (0 == y) {
                        switch ("en" == o.language && ("10000" == g ? g = "1000" : "100000000" == g && (g = "1000000")), g) {
                            case"10000":
                                h /= 1e4;
                                break;
                            case"100000000":
                                h /= 1e8;
                                break;
                            case"1000":
                                h /= 1e3;
                                break;
                            case"1000000":
                                h /= 1e6;
                                break;
                            case"1000000000":
                                h /= 1e9
                        }
                        switch (h = Highcharts.numberFormat(h, m), g) {
                            case"10000":
                                h += "万";
                                break;
                            case"100000000":
                                h += "亿";
                                break;
                            case"1000":
                                h += "k";
                                break;
                            case"1000000":
                                h += "M";
                                break;
                            case"1000000000":
                                h += "G"
                        }
                    } else h = Number(100 * h).toFixed(v), h += "%";
                    h += f.unit, s = s + '<div class="hz-chart-title-wrap nowrap ' + d + '"><span class="hz-chart-title-text" title="' + h + '">' + h + '</span><span class="hz-chart-title-default">' + f.s_title + "  </span></div>"
                }
                return i.hasOwnProperty("show_total") && !i.show_total && (s = ""), s
            },
            getAdjustValue: function (e, t) {
                var i, n, a = Math.abs(e.sub(t)), r = 0;
                if (a < 1) for (; a < 1;) a = a.mul(10), r++;
                var o = 1..div(Math.pow(10, r));
                return r - 1 > 0 ? (i = Math.ceil(e.mul(Math.pow(10, r))).div(Math.pow(10, r)), n = Math.floor(t.mul(Math.pow(10, r))).div(Math.pow(10, r))) : r - 1 < 0 ? (i = e, n = t) : (i = Math.ceil(e.mul(Math.pow(10, r))).div(Math.pow(10, r)), n = Math.floor(t)), {
                    max: i,
                    min: n,
                    increment: o
                }
            },
            linearRangeColor: function (e, t) {
                var i = d3.color(e), n = d3.color(t);
                return d3.interpolate(i, n)
            },
            createLinearScale: function (e, t) {
                var i, n;
                i = defined(e.max) && !e.disable_max ? e.max : d3.max(t), n = defined(e.min) && !e.disable_min ? e.min : d3.min(t);
                var a = d3.scale.linear().domain([n, i]).range([0, 1]);
                return function (e) {
                    var t = a(e);
                    return isNaN(t) ? t = 0 : (t = Math.max(t, 0), t = Math.min(t, 1)), t
                }
            },
            renderLinearGradient: function (e, t, i, n) {
                var a = d3.interpolate(t, i), r = {moz: "-moz", webkit: "-webkit", ms: "-ms", o: "-o"},
                    o = "-linear-gradient(left, " + t + ", ", s = i + ")", l = "";
                if (n > 1) for (var c = 1, d = n; c < d; c++) {
                    var u = a((c - 1) / (d - 1)), p = a(c / (d - 1));
                    l += u + " " + c / d * 100 + "%, " + p + " " + c / d * 100 + "%, "
                }
                angular.forEach(r, function (t) {
                    e.css({background: t + o + l + s})
                })
            },
            createLinearGradientCss: function (e, t, i) {
                var n = d3.interpolate(e, t), a = {moz: "-moz", webkit: "-webkit", ms: "-ms", o: "-o"},
                    r = "-linear-gradient(left, " + e + ", ", o = t + ")", s = "";
                if (i > 1) for (var l = 1, c = i; l < c; l++) {
                    var d = n((l - 1) / (c - 1)), u = n(l / (c - 1));
                    s += d + " " + l / c * 100 + "%, " + u + " " + l / c * 100 + "%, "
                }
                var p = "";
                return angular.forEach(a, function (e) {
                    p += "background: " + e + r + s + o + ";"
                }), p
            },
            polynomial: function (e) {
                return function (t) {
                    for (var i = 0, n = e.length, a = 0; a < n;) i += e[a] * Math.pow(t, a), a++;
                    return i
                }
            },
            isMobile: function () {
                if (void 0 === a._isMobile) {
                    var e = function () {
                        var e = navigator.userAgent, t = /(?:Windows Phone)/.test(e), i = /(?:SymbianOS)/.test(e) || t,
                            n = /(?:Android)/.test(e), a = /(?:Firefox)/.test(e),
                            r = (/(?:Chrome|CriOS)/.test(e), /(?:iPad|PlayBook)/.test(e) || n && !/(?:Mobile)/.test(e) || a && /(?:Tablet)/.test(e)),
                            o = /(?:iPhone)/.test(e) && !r;
                        return {
                            isTablet: r,
                            isIPhone: o,
                            isAndroid: n,
                            isMobile: o || n || t || i,
                            isPc: !o && !n && !i
                        }
                    }();
                    a._isMobile = e.isMobile && $("body").width() <= 667
                }
                return a._isMobile
            },
            getPixelRatio: function (e) {
                var i = e.backingStorePixelRatio || e.webkitBackingStorePixelRatio || e.mozBackingStorePixelRatio || e.msBackingStorePixelRatio || e.oBackingStorePixelRatio || e.backingStorePixelRatio || 1;
                return (t.devicePixelRatio || 1) / i
            },
            initLoadingStatus: function (e) {
                var e = e || "";
                return $('<div class="base-loading-layer"><div class="loader-outer ' + e + '"><div class="loader-inner line-scale-pulse-out-rapid"><div></div><div></div><div></div><div></div><div></div></div></div></div>')
            },
            escapeHtml: function (e) {
                if (e && e.length > 0) {
                    var t = {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "/": "&#x2F;"};
                    return String(e).replace(/[&<>"'\/]/g, function (e) {
                        return t[e]
                    })
                }
                return e
            },
            filterNullVal: function (e) {
                for (var t = e.y[0].data, i = t.length, n = [], a = [], r = e.bubble_sizes.length, o = [], s = 0; s < i; s++) null !== t[s] && (n.push(e.x[0].data[s]), a.push(t[s]), r && o.push(e.bubble_sizes[s]));
                return e.x[0].data = n, e.y[0].data = a, e.bubble_sizes = o, e
            },
            canSetAdvancedSort: function (e, t) {
                var i = ["C200", "C220", "C210", "C211", "C212", "C320", "C240", "C241", "C242", "C243", "C350", "C351", "C352", "C250", "C281"].indexOf(t) > -1,
                    n = ["C310", "C261"].indexOf(t) > -1 && e.compare_axis && e.compare_axis.length > 0;
                return t && (i || n)
            },
            canSetZoom: function (e) {
                return ["C210", "C220", "C240", "C243", "C250", "C350"].indexOf(e) > -1
            },
            canSetLegend: function (e) {
                if (!e) return !1;
                var t = e.chart_type,
                    i = t && ["C210", "C211", "C212", "C220", "C230", "C240", "C241", "C242", "C250", "C290", "C350", "C351", "C352"].indexOf(t) >= 0,
                    n = e.compare_axis && e.compare_axis.length > 0;
                if (i) {
                    if (i = !!n || i, !n && e.x.length > 1) return i = !1;
                    if (!n && e.y.length < 2 && ["C230", "C250"].indexOf(t) < 0) return i = !1;
                    var a = e.color_setting;
                    "C230" != t && a && a.field && e.x && e.x.length > 0 && a.field.map(function (t) {
                        t.fid == e.x[0].fid && (i = !1)
                    })
                }
                return i
            },
            drawGridPlotLine: function (e, t, i, n, a) {
                var r, o = i.style, s = 0, l = 0, c = t._getCurThemeBaseColor("axisLine");
                if ("x" == a || "x_date" == a) {
                    if (!i.hasOwnProperty("xAxisRange") || !i.style) return;
                    if (!(o.gridPlotLine && o.gridPlotLine.xAxis && o.gridPlotLine.xAxis.enabled)) return;
                    if (!("C320" == n || t.canSetAxisExtend()) || "x_date" != a && "C280" != n) return void delete i.xAxisRange;
                    if (i.xAxisRange.indexOf(e.value) < 0 && i.xAxisRange.push(e.value), e.isLast) {
                        var d = l, u = o.gridPlotLine.xAxis.splitNum;
                        s = e.axis.max, l = e.axis.min, r = Math.abs(s - l) / u, d = l, "x_date" == a && (r = Math.abs(s - l + 2 * e.axis.minPointOffset) / u, d = l - e.axis.minPointOffset), t.options.xAxis.plotLines = t.options.xAxis.plotLines || [], o.gridPlotLine.xAxis.colorAdaption && (o.gridPlotLine.xAxis.color = c);
                        for (var p = 1; p <= u; p++) t.options.xAxis.plotLines.push({
                            className: "highcharts-grid-plot-line",
                            color: o.gridPlotLine.xAxis.color,
                            dashStyle: o.gridPlotLine.xAxis.dashStyle,
                            value: d + r * p,
                            width: o.gridPlotLine.xAxis.width,
                            zIndex: 0
                        });
                        e.chart.xAxis[0].options.plotLines !== t.options.xAxis.plotLines && (e.chart.xAxis[0].options.plotLines = t.options.xAxis.plotLines), delete i.xAxisRange
                    }
                } else {
                    if (!i.hasOwnProperty("yAxisRange") || !i.style) return;
                    if (!(o.gridPlotLine && o.gridPlotLine.yAxis && o.gridPlotLine.yAxis.enabled)) return;
                    if (!t.canSetAxisExtend() || "C280" != n) return void delete i.yAxisRange;
                    i.yAxisRange.indexOf(e.value) < 0 && i.yAxisRange.push(e.value), e.isLast && (s = e.axis.max, l = e.axis.min, o.gridPlotLine.yAxis.enabled && (u = o.gridPlotLine.yAxis.splitNum, t.options.yAxis.map(function (e) {
                        i.yAxisRange.map(function (e) {
                            s = Math.max(s, Number(e)), l = Math.min(l, Number(e))
                        }), r = Math.abs(s - l) / u, o.gridPlotLine.yAxis.colorAdaption && (o.gridPlotLine.yAxis.color = c);
                        for (var t = 1; t <= u; t++) e.plotLines = e.plotLines || [], e.plotLines.push({
                            className: "highcharts-grid-plot-line",
                            color: o.gridPlotLine.yAxis.color,
                            dashStyle: o.gridPlotLine.yAxis.dashStyle,
                            value: l + r * t,
                            width: o.gridPlotLine.yAxis.width,
                            zIndex: 0
                        })
                    }), delete i.yAxisRange))
                }
            },
            renderChartWarnGuideLine: function (e, t, i) {
                function n(t) {
                    if ("C243" == l) var i = !e.y[0].compare_names.length && e.y[1] && e.y[1].uniq_id === t.uniq_id,
                        n = i || e.y[0].compare_names.length > 0;
                    if ("number" != t.data_type && !t.hasOwnProperty("axis_type") || !(t.range instanceof Array)) return !1;
                    var o = null;
                    if (12 === Number(t.compare_type)) angular.forEach(t.range, function (e, p) {
                        var f = t.range[p], v = t.range[p];
                        f = t.formatter && "percent" === t.formatter.check ? Highcharts.numberFormat(100 * f, Number(t.formatter.percent.digit)) + "%" : a.numericSymbols(f);
                        var y = hz.cutString.getP(f.toString(), u), b = 24;
                        v > 1e3 && (b = 27), y = c ? -.6 * (y + b) : -(y + b), 0 === Number(t.axis_type) ? (i || (o = r(v, f, "warn-label-left", {
                            align: "left",
                            verticalAlign: "bottom",
                            x: c ? y + 10 : y,
                            y: c ? d + 18 : d,
                            display: l === s.Gauge ? "none" : "block"
                        }), h.push(o)), n && (o = r(v, f, "warn-label-right", {
                            align: "left",
                            verticalAlign: "bottom",
                            x: c ? y + 10 : y,
                            y: c ? d + 18 : d
                        }), m.push(o))) : (o = r(v, f, "warn-label-right", {
                            align: "right",
                            x: -y,
                            y: c ? d - 6 : d
                        }), g.push(o))
                    }); else {
                        var p = t.range[0], f = t.range[0];
                        p = t.formatter && "percent" === t.formatter.check ? Highcharts.numberFormat(100 * p, Number(t.formatter.percent.digit)) + "%" : a.numericSymbols(p);
                        var v = hz.cutString.getP(p.toString(), u), y = 24;
                        f > 1e3 && (y = 27), v = c ? -.6 * (v + y) : -(v + y), 0 === Number(t.axis_type) ? (i || (o = r("C243" === l ? -f : f, p, "warn-label-left", {
                            align: "left",
                            verticalAlign: "bottom",
                            x: c ? v + 10 : v,
                            y: c ? d + 18 : d,
                            display: l === s.Gauge ? "none" : "block"
                        }), h.push(o)), n && (o = r(f, p, "warn-label-right", {
                            align: "left",
                            verticalAlign: "bottom",
                            x: c ? v + 10 : v,
                            y: c ? d + 18 : d
                        }), m.push(o))) : (o = r(f, p, "warn-label-right", {
                            align: "right",
                            x: "C243" === l ? v : -v,
                            y: c ? d - 6 : d
                        }), g.push(o))
                    }
                }

                function r(e, t, i, n) {
                    var a = {
                        lineType: "warn",
                        value: e,
                        width: f,
                        color: p,
                        zIndex: 5,
                        label: {
                            text: '<span class="' + i + '">' + t + "</span>",
                            align: n.align,
                            verticalAlign: n.verticalAlign,
                            x: n.x,
                            y: n.y,
                            rotation: 0,
                            style: {color: p, fontSize: u + "px", display: n.display},
                            useHTML: !0
                        }
                    };
                    return n.verticalAlign || delete a.label.verticalAlign, n.display || delete a.label.style.display, a
                }

                var s = o.ChartType, l = i.chartType, c = i.isBarType, d = i.textTop, u = i.fontSize, p = i.warnColor,
                    f = i.lineWidth, h = [], g = [], m = [],
                    v = (e.x.concat(e.compare_axis || []).concat(e.y || []).concat(e.y_optional || []), e.y),
                    y = e.y_optional;
                return angular.forEach(t, function (e) {
                    angular.forEach(e.meta, function (e) {
                        angular.forEach(e.options, function (e) {
                            angular.forEach(v, function (t) {
                                e.fid === t.fid && e.uniq_id === t.uniq_id && (e.formatter = t.formatter, e.axis_type = 0)
                            }), angular.forEach(y, function (t) {
                                e.fid === t.fid && e.uniq_id === t.uniq_id && (e.formatter = t.formatter, e.axis_type = 1)
                            })
                        })
                    })
                }), angular.forEach(t, function (e) {
                    e.switch && angular.forEach(e.meta, function (e) {
                        angular.forEach(e.options, function (e) {
                            n(e)
                        })
                    })
                }), {guideLines: h, guideLinesRight: g, guideLinesRightSide: m}
            },
            transferAxisOldStyle: function (e) {
                if (!bdp.bdpPageStatus.isUnderAdvDash() || !bdp.bdpPageStatus.isUnderDataScreen()) return !1;
                e.labels && (e.xAxis && (e.xAxis.labels = $.extend(!0, e.xAxis.labels, e.labels)), e.yAxis && (e.yAxis.labels = $.extend(!0, e.yAxis.labels, e.labels)), e.yOptionalAxis && (e.yOptionalAxis.labels = $.extend(!0, e.yOptionalAxis.labels, e.labels)), delete e.labels)
            },
            transferPlotLineOldFormatter: function (e) {
                if (!e || !e.hasOwnProperty("check")) return e;
                var t = {type: "auto", num: {digit: 0, millesimal: !1, unit: ""}, percent: {digit: 0}};
                return t.type = e.check, "num" == e.check && (t.num.millesimal = e.num.millesimal, t.num.digit = e.num.digit), "percent" == e.check && (t.percent.digit = e.percent.digit), t
            },
            formatPlotLineLabelVal: function (e, t) {
                return t
            },
            formatPlotLineLabelTextHtml: function (e, t, i, n, a, o, s, l) {
                var c = (0, r.default)(e), d = l ? "guide_line_x" : t,
                    u = '<span class="J-guide-label-wrap guide-label-' + t + " " + s + '" data-axis-type="' + d + '" data-label-top="' + o.top + '"';
                return u += " data-label-line='" + c + "'>" + i + '<span class="guide-label-text" style="width:' + o.width + "px;height:" + o.height + "px;top:" + o.top + 'px;">' + n, a && (u += '<span class="guide-label-sub-text nowrap" style="display:block;margin-top: 4px;">' + a + "</span>"), u += "</span></span>"
            },
            formatPlotLineNumVal: function (e) {
                var t = e.value, i = 0, n = e.formatter;
                if (!n || n && !n.hasOwnProperty("type") || n && n.hasOwnProperty("type") && "auto" == n.type) {
                    var r = isInteger(t) ? 0 : t.toString().split(".")[1].length;
                    return t = t < 1e3 ? a.numericSymbols(t, Math.min(4, r)) : a.numericSymbolsWithDigit(t), i = a.formatPlotLineNumValSaveDecimals(t), {
                        numVal: t,
                        numValWithoutDigit: i
                    }
                }
                if ("num" == n.type) {
                    var s = n.num.digit, l = n.num.millesimal;
                    "10000" == n.num.unit && (n.num.unit = "en" == o.language ? "1000" : n.num.unit), "100000000" == n.num.unit && (n.num.unit = "en" == o.language ? "1000000" : n.num.unit);
                    var c = n.num.unit;
                    switch (c && (t /= Number(c)), l ? (i = a.formatPlotLineNumValWithoutDigit(t), t = Highcharts.numberFormat(t, s, ".", ",")) : (i = a.formatPlotLineNumValSaveDecimals(t), t = Highcharts.numberFormat(t, s, ".", "")), c + "") {
                        case"10000":
                            t += "万", i += "万";
                            break;
                        case"100000000":
                            t += "亿", i += "亿";
                            break;
                        case"1000":
                            t += "K", i += "K";
                            break;
                        case"1000000":
                            t += "M", i += "M";
                            break;
                        case"1000000000":
                            t += "G", i += "G"
                    }
                }
                return "percent" == n.type && (t = Highcharts.numberFormat(100 * t, n.percent.digit) + "%", i = t), {
                    numVal: t,
                    numValWithoutDigit: i
                }
            },
            formatPlotLineNumValSaveDecimals: function (e) {
                if (e += "", "" != (e = e.replace(/[ ]/g, "")) && !isNaN(e)) {
                    var t = e.indexOf("e-");
                    if (t >= 0) {
                        var i = e.slice(t + 2);
                        e = Number(e).toFixed(i) + ""
                    }
                    return e
                }
            },
            formatPlotLineNumValWithoutDigit: function (e) {
                if (e += "", "" != (e = e.replace(/[ ]/g, "")) && !isNaN(e)) {
                    e = a.formatPlotLineNumValSaveDecimals(e);
                    var t = e.indexOf(".");
                    if (t == -1) for (var i = /(-?\d+)(\d{3})/; i.test(e);) e = e.replace(i, "$1,$2"); else {
                        for (var n = e.substring(0, t), r = e.substring(t + 1, e.length), i = /(-?\d+)(\d{3})/; i.test(n);) n = n.replace(i, "$1,$2");
                        e = n + "." + r
                    }
                    return e
                }
            },
            _formatXAxisLabel: function (e, t, i) {
                var n = this.data, r = this.info, s = r.xAxis[t];
                if (s && "date" === s.data_type) {
                    var l = n.x[t].data, c = a.getGranularity(n, l.length, t),
                        d = (c.tickInterval, c.granularity || "day"), u = c.granularity_name || "",
                        p = r.xAxis[t].month_start_day || 0, f = l[l.length - 1] - l[0];
                    if (i ? "hour" !== d && "minute" !== d && "second" !== d || (d = "g_" + d) : d = a.setGranularityByDate(d, f), "week" === d) {
                        p = 1, u && (p = s.week_start_day_of_week);
                        var h = new Date(e).getDay();
                        h > p ? e -= 864e5 * (h - p) : e += 864e5 * (p - h)
                    }
                    return a.checkGranularity(d, e, u, p)
                }
                if (s && "sub_date" === s.data_type) {
                    var d = s.fid.split("_")[1];
                    return o.helper.subDateFormat(d, e)
                }
                return e
            },
            renderCrumbs: function (e) {
                var i = e.$elem, n = i.parent(), r = e.optional.free_drill_opt, o = function (e, t, i) {
                    if ("date" == t.data_type) {
                        if (e = +e, isNaN(e)) return "NaN";
                        var n = t.granularity || "day", r = t.granularity_name || "", o = t.month_start_day || 0;
                        if ("hour" !== n && "minute" !== n && "second" !== n || (n = "g_" + n), "week" === n && !i) {
                            o = 1, r && (o = t.week_start_day_of_week);
                            var s = new Date(e).getDay();
                            s > o ? e -= 864e5 * (s - o) : e += 864e5 * (o - s)
                        }
                        return a.checkGranularity(n, e, r, o)
                    }
                    return e
                };
                "fullscreen" === e.mode && (n = $(".fullscreen-modal"));
                var s = n.find(".drill-crumbs"), l = function (e, t) {
                    var i = e[0];
                    if (i instanceof Array) {
                        if (!i.length) return "全部";
                        var n = "";
                        i.forEach(function (e, i) {
                            i > 0 && (n += "-"), n += o(e, t[i], !0)
                        }), i = n
                    } else i = o(i, t, !0);
                    return i.length > 60 && (i = i.slice(0, 60) + "..."), bdp.utils.encodeHTML("" + i) + (e.length > 1 ? "(等" + e.length + "项)" : "")
                }, c = function (e) {
                    var t = r.filters[e - 1], i = "";
                    t.values.forEach(function (e) {
                        var n = e.map(function (e, i) {
                            return o(e, t.fields[i], !0)
                        }).join("-");
                        i += '<div class="freedrill-val-item">' + n + "</div>"
                    });
                    return t.values.length > 1 ? '<span><i class="bdp-icon ico-slicesnav-arrow"></i><a href="javascript:;" class="drill-point-name freedrill-item" data-freedrill-level="' + e + '">' + l(t.values, t.fields) + '<div class="popover">' + i + "</div></a></span>" : '<span><i class="bdp-icon ico-slicesnav-arrow"></i><a href="javascript:;" class="drill-point-name freedrill-item" data-freedrill-level="' + e + '">' + l(t.values, t.fields) + "</a></span>"
                };
                if (s.length > 0) {
                    var d = s.find(".freedrill-option").length, u = r.filters.length;
                    d > u ? s.find(".freedrill-option:gt(" + u + ")").remove() : d < u && s.append(c(u))
                } else {
                    var p;
                    !function () {
                        var a = function () {
                            n.find(".drill-crumbs").remove(), n.find(".drill-crumbs-wrap").append(s)
                        };
                        s = $('<div class="drill-crumbs"></div>'), p = $('<span><a href="javascript:;" class="freedrill-item" data-freedrill-level="0">全部</a></span>'), s.append(p).append(c(1)), t.location.hash.indexOf("data_screen") >= 0 ? setTimeout(function () {
                            a()
                        }, 10) : a(), i.css({bottom: "edit" == e.mode ? 48 : 22})
                    }()
                }
                s.off("click.free_drill").on("click.free_drill", ".freedrill-item", function () {
                    var t = +$(this).data("freedrill-level");
                    t != e.optional.free_drill_opt.filters.length && (0 == t ? (delete e.optional.free_drill_opt, s.remove()) : (e.optional.free_drill_opt.target_fields = e.optional.free_drill_opt.target_fields.slice(0, t), e.optional.free_drill_opt.filters = e.optional.free_drill_opt.filters.slice(0, t), s.find("a[data-freedrill-level]:gt(" + t + ")").each(function (e) {
                        $(this).parent().remove()
                    })), e.emit("refreshData"))
                })
            }
        }, o = t.bdpChart || {};
        t.bdpChart = o, o.helper = a
    }(window)
}, function (e, t, i) {
    "use strict";
    var n = i(41), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function (e) {
        function t() {
        }

        function i(e, t, i) {
            if (e) {
                var n = 0, a = e.length, r = t[0], o = t[1], s = t[2], l = !0;
                switch (t.length) {
                    case 0:
                        for (; n < a; n += 2) l = e[n].call(e[n + 1] || i) !== !1 && l;
                        break;
                    case 1:
                        for (; n < a; n += 2) l = e[n].call(e[n + 1] || i, r) !== !1 && l;
                        break;
                    case 2:
                        for (; n < a; n += 2) l = e[n].call(e[n + 1] || i, r, o) !== !1 && l;
                        break;
                    case 3:
                        for (; n < a; n += 2) l = e[n].call(e[n + 1] || i, r, o, s) !== !1 && l;
                        break;
                    default:
                        for (; n < a; n += 2) l = e[n].apply(e[n + 1] || i, t) !== !1 && l
                }
            }
            return l
        }

        function n(e) {
            return "[object Function]" === Object.prototype.toString.call(e)
        }

        t.prototype.on = function (e, t, i) {
            var n, a, r;
            if (!t) return this;
            for (n = this.__events || (this.__events = {}), e = e.split(/\s+/); a = e.shift();) r = n[a] || (n[a] = []), r.push(t, i);
            return this
        }, t.prototype.once = function (e, t, i) {
            var n = this, a = function i() {
                n.off(e, i), t.apply(this, arguments)
            };
            this.on(e, a, i)
        }, t.prototype.off = function (e, t, i) {
            var n, a, o, s;
            if (!(n = this.__events)) return this;
            if (!(e || t || i)) return delete this.__events, this;
            for (e = e ? e.split(/\s+/) : r(n); a = e.shift();) if (o = n[a]) if (t || i) for (s = o.length - 2; s >= 0; s -= 2) t && o[s] !== t || i && o[s + 1] !== i || o.splice(s, 2); else delete n[a];
            return this
        }, t.prototype.trigger = function (e) {
            var t, n, a, r, o, s, l = [], c = !0;
            if (!(t = this.__events)) return this;
            for (e = e.split(/\s+/), o = 1, s = arguments.length; o < s; o++) l[o - 1] = arguments[o];
            for (; n = e.shift();) (a = t.all) && (a = a.slice()), (r = t[n]) && (r = r.slice()), c = i(r, l, this) && c, c = i(a, [n].concat(l), this) && c;
            return c
        }, t.prototype.emit = t.prototype.trigger, t.mixTo = function (e) {
            e = n(e) ? e.prototype : e;
            var i = t.prototype;
            for (var a in i) i.hasOwnProperty(a) && (e[a] = i[a])
        };
        var r = a.default;
        r || (r = function (e) {
            var t = [];
            for (var i in e) e.hasOwnProperty(i) && t.push(i);
            return t
        }), e.Events = t
    }(window.bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e, t) {
        function i(e, t) {
            switch (e) {
                case o.Column:
                    return {type: "column"};
                case o.NStackColumn:
                    return {type: "column", plotOptions: {column: {stacking: "normal"}}};
                case o.PStackColumn:
                    return {type: "column", plotOptions: {column: {stacking: "percent"}}};
                case o.Line:
                    return {type: +t.use_spline ? "spline" : "line"};
                default:
                    return {}
            }
        }

        var n = {
            1: {states: {select: {borderWidth: 2, borderColor: "#fff", color: null}}},
            2: {states: {select: {borderWidth: 2, borderColor: "#5e5e5e", color: null}}}
        }, a = {
            1: {enabled: !0, fillColor: "pointColor", lineWidth: 2, lineColor: "#fff", radius: 4},
            2: {enabled: !0, fillColor: "pointColor", lineWidth: 2, lineColor: "#5e5e5e", radius: 4}
        }, r = {
            1: {
                marker: {
                    enabled: !0,
                    symbol: "circle",
                    lineColor: null,
                    lineWidth: 2,
                    radius: 3,
                    fillColor: "rgba(255,255,255,0)",
                    states: {
                        hover: {
                            enabled: !0,
                            lineColor: "#FFF",
                            lineWidth: 3,
                            radius: 3,
                            fillColor: "rgba(255,255,255,0)"
                        }, select: a[1]
                    }
                },
                halo: {
                    opacity: 1,
                    size: 8,
                    attributes: {
                        zIndex: 2,
                        fill: "rgba(255,255,255,0.15)",
                        "stroke-width": 6,
                        stroke: "rgba(255,255,255,0.05)"
                    }
                }
            },
            2: {
                marker: {
                    enabled: !0,
                    symbol: "circle",
                    lineColor: null,
                    lineWidth: 2,
                    radius: 3,
                    fillColor: "#FFF",
                    states: {
                        hover: {enabled: !0, lineColor: null, lineWidth: 3, radius: 3, fillColor: "#FFF"},
                        select: a[2]
                    }
                }, halo: {opacity: .3, size: 8, attributes: {zIndex: 2, "stroke-width": 6}}
            }
        }, o = {
            Table: "C200",
            Column: "C210",
            NStackColumn: "C211",
            PStackColumn: "C212",
            Line: "C220",
            Pie: "C230",
            Bar: "C240",
            NStackBar: "C241",
            PStackBar: "C242",
            ComparisonBar: "C243",
            Biax: "C250",
            Gauge: "C261",
            AreaMap: "C271",
            BubbleMap: "C272",
            TextMap: "C273",
            Scatter: "C280",
            BoxPlot: "C281",
            Radar: "C290",
            Sankey: "C300",
            ParallelSets: "C301",
            KPICard: "C310",
            Waterfall: "C320",
            Funnel: "C330",
            WordCloud: "C340",
            Area: "C350",
            NStackArea: "C351",
            PStackArea: "C352",
            Sunburst: "C360",
            TreeMap: "C370",
            GIS: "C400",
            Custom: "C500"
        };
        t.ChartType = o;
        var s = {}, l = t.helper, c = function (e, t) {
            s[e] = t
        };
        c(o.Column, function (e) {
            var t = "dark" === e.theme ? 1 : 2;
            return {chart: {type: "column"}, plotOptions: {column: {borderRadius: 1.7, states: n[t].states}}}
        }), c(o.NStackColumn, function (e) {
            var t = "dark" === e.theme ? 1 : 2;
            return {
                chart: {type: "column"},
                plotOptions: {
                    column: {
                        stacking: "normal",
                        states: n[t].states,
                        dataLabels: {inside: !0, verticalAlign: "middle"}
                    }
                }
            }
        }), c(o.PStackColumn, function (e) {
            var t = "dark" === e.theme ? 1 : 2;
            return {
                chart: {type: "column"},
                plotOptions: {
                    column: {
                        stacking: "percent",
                        states: n[t].states,
                        dataLabels: {inside: !0, verticalAlign: "middle"}
                    }
                }
            }
        }), c(o.Line, function (e) {
            var t = +e.info.use_spline ? "spline" : "line", i = "dark" === e.theme ? 1 : 2;
            return {
                chart: {type: t, spacingRight: 5},
                plotOptions: {
                    line: {
                        lineWidth: 2,
                        marker: $.extend(r[i].marker, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0}),
                        states: {hover: {halo: r[i].halo}}
                    },
                    spline: {
                        lineWidth: 2,
                        marker: $.extend(r[i].marker, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0}),
                        states: {hover: {halo: r[i].halo}}
                    }
                }
            }
        }), c(o.Pie, function (e) {
            e.$elem.addClass("chart-pie");
            var t, i = e.info, n = e.data, a = "", r = "", o = i.xAxis.length,
                s = "fullscreen" !== e.mode || e.isMobileMode ? 10 : 30, c = "dark" === e.theme ? "#fff" : "#777";
            return o && "date" === i.xAxis[0].data_type && (a = i.xAxis[0].granularity, r = i.xAxis[0].granularity_name, t = i.xAxis[0].month_start_day || 0), {
                chart: {type: "pie"},
                legend: {
                    labelFormatter: function () {
                        var e = o || i.compare_axis.length ? 0 : this.index,
                            c = (this.series.options.formatter, this.series.options.aggregator, this.percentage.toFixed(2), ""),
                            d = "";
                        if (a) {
                            var u = this.x;
                            "week" === a && r && (u += 864e5 * (i.xAxis[0].week_start_day_of_week - 1), t = i.xAxis[0].week_start_day_of_week), d = c = ["其它", "Else"].indexOf(this.options.x) >= 0 ? this.options.x : l.checkGranularity(a, u, r, t)
                        } else d = o ? this.name : $.trim(n.y[e].nick_name || n.y[e].name), d = d.toString().replace(/^\s+/, ""), c = d.length > s ? d.substring(0, s - 1) + "..." : d;
                        return '<div title="' + d + '">' + bdp.utils.encodeHTML(c) + "</div>"
                    }
                },
                tooltip: {
                    crosshairs: null, formatter: function () {
                        var e, t = ($.cookie("locale"), this.y), s = this.series.options.formatter,
                            d = this.series.options.aggregator, u = "",
                            p = o || i.compare_axis.length ? 0 : this.point.index;
                        if (a) {
                            var f = this.point.x;
                            "week" === a ? r && (f += 864e5 * (i.xAxis[0].week_start_day_of_week - 1), e = i.xAxis[0].week_start_day_of_week) : "hour" !== a && "minute" !== a && "second" !== a || (a = "g_" + a);
                            var h = this.point.index || 0, g = this.series.data && this.series.data[h];
                            u = ["其它", "Else"].indexOf(g.options.x) >= 0 ? g.options.x : l.checkGranularity(a, f, r, e)
                        } else u = o ? this.point.name : $.trim(n.y[p].nick_name || n.y[p].name);
                        var m = "";
                        n.y[p].hasOwnProperty("unit_adv") && "" != n.y[p].unit_adv && (m = n.y[p].unit_adv), t = l.dataLabelFormatter(s, t, d);
                        var v = '<table class="tooltips-table">';
                        return v += '<tr><td style="text-align:right;color:' + this.point.color + '">' + u + '</td><td style="text-align: left; color:' + this.point.color + '">：' + t + m + "</td></tr>", v += '<tr><td style="text-align: right;color:' + c + '">占比</td><td style="text-align: left;color:' + c + '">：' + this.percentage.toFixed(2) + "%</td></tr>"
                    }
                }
            }
        }), c(o.Bar, function (e) {
            var t = (e.options, "dark" === e.theme ? 1 : 2);
            return {chart: {type: "bar"}, plotOptions: {bar: {borderRadius: 1.7, states: n[t].states}}}
        }), c(o.NStackBar, function (e) {
            var t = "dark" === e.theme ? 1 : 2;
            return {
                chart: {type: "bar"},
                plotOptions: {
                    bar: {
                        stacking: "normal",
                        states: n[t].states,
                        dataLabels: {inside: !0, verticalAlign: "middle"}
                    }
                }
            }
        }), c(o.PStackBar, function (e) {
            var t = "dark" === e.theme ? 1 : 2;
            return {
                chart: {type: "bar"},
                plotOptions: {
                    bar: {
                        stacking: "percent",
                        states: n[t].states,
                        dataLabels: {inside: !0, verticalAlign: "middle"}
                    }
                }
            }
        }), c(o.ComparisonBar, function (e) {
            var t = (e.options, "dark" === e.theme ? 1 : 2);
            return {chart: {type: "bar"}, plotOptions: {bar: {stacking: "normal", states: n[t].states}}}
        }), c(o.Biax, function (e) {
            var t = e.info, o = e.chartData, s = e.options, l = i(t.type_optional[0], t), c = i(t.type_optional[1], t);
            (o.y.length > 0 || o.y_optional.length > 0) && (o.y.forEach(function (e) {
                e.type = l.type, e.yAxis = 0
            }), o.y_optional.forEach(function (e) {
                e.type = c.type, e.yAxis = 1
            }));
            var d = "dark" === e.theme ? 1 : 2, u = {
                marker: $.extend({
                    symbol: "circle",
                    lineColor: null,
                    lineWidth: 2,
                    radius: 0,
                    fillColor: "rgba(255,255,255,0)",
                    states: {hover: r[d].marker.states.hover, select: a[d]}
                }, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0, radius: 3}), states: {hover: {halo: r[d].halo}}
            };
            if (s.series.length > 0 && (["C211", "C212"].indexOf(t.type_optional[0]) > -1 && (s.series[0].borderRadiusTopLeft = 1.7, s.series[0].borderRadiusTopRight = 1.7, o.y.length > 0 && (s.series[o.y.length - 1].borderRadiusBottomLeft = 1.7, s.series[o.y.length - 1].borderRadiusBottomRight = 1.7)), ["C211", "C212"].indexOf(t.type_optional[1]) > -1 && (o.y_optional.length > 0 && (s.series[o.y.length].borderRadiusTopLeft = 1.7, s.series[o.y.length].borderRadiusTopRight = 1.7), s.series[s.series.length - 1].borderRadiusBottomLeft = 1.7, s.series[s.series.length - 1].borderRadiusBottomRight = 1.7)), s.chart.marginRight = void 0, t.yAxis.length) {
                var p = "function" == typeof s.yAxis[0].tickPositioner ? s.yAxis[0].tickPositioner() : [0, 1, 2, 3, 4],
                    f = p.indexOf(0), h = f > 0 ? Math.abs(p[f - 1]) : p[1] - p[0];
                if (f < 0) for (var g = 0; g < p.length; g++) {
                    if (p[g] >= 0) {
                        f = g;
                        break
                    }
                    f = g
                }
                if (t.yAxisOptional.length) {
                    var m = "function" == typeof s.yAxis[1].tickPositioner ? s.yAxis[1].tickPositioner() : [0, 1, 2, 3, 4],
                        v = m.indexOf(0), y = v > 0 ? Math.abs(m[v - 1]) : m[1] - m[0];
                    if (v < 0) for (var g = 0; g < m.length; g++) {
                        if (m[g] >= 0) {
                            v = g;
                            break
                        }
                        v = g
                    }
                    if (f !== v && t.yaxis_max_disabled && t.yaxis_min_disabled && (t.yaxis_max_disabled_right && t.yaxis_min_disabled_right || (!t.yaxis_max_disabled_right || !t.yaxis_min_disabled_right) && t.zero_aligned) && (2 !== f && (s.yAxis[0].tickPositions = [h.mul(-4), h.mul(-2), 0, h.mul(2), h.mul(4)]), 2 !== v && (s.yAxis[1].tickPositions = [y.mul(-4), y.mul(-2), 0, y.mul(2), y.mul(4)])), t.zero_aligned) {
                        if (t.yaxis_max_disabled && t.yaxis_min_disabled) {
                            if (f === v && f <= 0) {
                                h >= y ? (h = p[p.length - 1] / 4,
                                    p = 0 === f ? [0, h, h.mul(2), h.mul(3), h.mul(4)] : [h.mul(-4), h.mul(-3), h.mul(-2), h.mul(-1), 0]) : (y = m[m.length - 1] / 4, m = 0 === f ? [0, y, y.mul(2), y.mul(3), y.mul(4)] : [y.mul(-4), y.mul(-3), y.mul(-2), y.mul(-1), 0])
                            }
                            h >= y ? s.yAxis[1].tickPositions = f != v ? s.yAxis[0].tickPositions : p : s.yAxis[0].tickPositions = f != v ? s.yAxis[1].tickPositions : m
                        } else s.yAxis[1].tickPositions = p;
                        s.yAxis[1].labels.enabled = !1, s.yAxis[1].title.text = ""
                    }
                }
            }
            return {
                plotOptions: $.extend({
                    line: u,
                    spline: u,
                    series: {connectNulls: !1, states: n[d].states}
                }, l.plotOptions, c.plotOptions)
            }
        }), c(o.Scatter, function (e) {
            var t = e.data.y[0], i = e.info.xaxis_name, n = e.info.xaxis_unit, r = "dark" === e.theme ? 1 : 2;
            i || (i = t.name), n && (i += "(" + n + ")"), $.extend(!0, e.options, {
                chart: {type: e.options.chart.type || "scatter"},
                xAxis: {title: {enabled: !0, text: i}},
                plotOptions: {
                    line: {
                        dashStyle: "MidDash",
                        enableMouseTracking: !1,
                        marker: {enabled: !1, states: {hover: {enabled: !1}}}
                    },
                    spline: {
                        dashStyle: "MidDash",
                        enableMouseTracking: !1,
                        marker: {enabled: !1, states: {hover: {enabled: !1}}}
                    },
                    bubble: {
                        dataLabels: {
                            verticalAlign: "top",
                            enabled: e.info.show_datalabels,
                            allowOverlap: e.info.show_all_datalabels,
                            y: -20,
                            formatter: function () {
                                var t = this.points ? this.points[0].point : this.point,
                                    i = t.options.nickName.split("_")[0], n = t.index, a = [], r = e.info;
                                return e.data.x && e.data.x[0] && angular.forEach([e.data.x[0]], function (e, t) {
                                    var o = e.data[n];
                                    if (o = i, "date" == e.data_type) {
                                        var s = r.xAxis[t].granularity || "day";
                                        r.xAxis[t].granularity_name, r.xAxis[t].month_start_day;
                                        "week" === s && r.xAxis[t].week_start_day_of_week, "week" === s && (o += "（" + Highcharts.dateFormat("%b/%e", new Date(o)) + "~" + Highcharts.dateFormat("%b/%e", new Date(o + 5184e5)) + "）"), (e.data[n].toString().length < 10 || "Invalid date" === o) && (o = e.data[n])
                                    } else "sub_date" == e.data_type && (o = l.subDateFormat(e.fid.split("_")[1], e.data[n]));
                                    a.push(o)
                                }), a.join("_")
                            }
                        }, marker: {states: {hover: {radiusPlus: 0}, select: a[r]}}
                    },
                    scatter: {
                        dataLabels: {
                            enabled: e.info.show_datalabels,
                            allowOverlap: e.info.show_all_datalabels,
                            formatter: function () {
                                var t = this.points ? this.points[0].point : this.point,
                                    i = t.options.nickName.split("_")[0], n = t.index, a = [], r = e.info;
                                return e.data.x && e.data.x[0] && angular.forEach([e.data.x[0]], function (e, t) {
                                    var o = e.data[n];
                                    if (o = i, "date" == e.data_type) {
                                        var s = r.xAxis[t].granularity || "day";
                                        r.xAxis[t].granularity_name, r.xAxis[t].month_start_day;
                                        "week" === s && r.xAxis[t].week_start_day_of_week, "week" === s && (o += "（" + Highcharts.dateFormat("%b/%e", new Date(o)) + "~" + Highcharts.dateFormat("%b/%e", new Date(o + 5184e5)) + "）"), (e.data[n].toString().length < 10 || "Invalid date" === o) && (o = e.data[n])
                                    } else "sub_date" == e.data_type && (o = l.subDateFormat(e.fid.split("_")[1], i));
                                    a.push(o)
                                }), a.join("_")
                            }
                        }, marker: {states: {hover: {radiusPlus: 0}, select: a[r]}}
                    },
                    series: {states: {hover: {halo: {size: 6}}}, color: "rgba(114,175,217,0.6)", turboThreshold: 10001}
                },
                tooltip: {
                    formatter: function () {
                        var t = e.data, i = e.info, n = e._getUnit().unit_left || "", a = e.info.xaxis_unit || "";
                        return function (e, r) {
                            if (!r || $(".selected-tooltip").length > 0) return !1;
                            var o;
                            o = this.points ? this.points[0].point : this.point;
                            var s = this.point.index, c = this.point.nickName.split("_"), d = "", u = o.color,
                                p = t.y[0].nick_name || t.y[0].name, f = t.y[1].nick_name || t.y[1].name, h = "",
                                g = "";
                            h = t.y[0].hasOwnProperty("unit_adv") && "" != t.y[0].unit_adv ? t.y[0].unit_adv : a, g = t.y[1].hasOwnProperty("unit_adv") && "" != t.y[1].unit_adv ? t.y[1].unit_adv : n;
                            var m = l.dataLabelFormatter(t.y[0].formatter, o.x) + h,
                                v = l.dataLabelFormatter(t.y[1].formatter, o.y) + g;
                            if ("scatter" == o.series.type || "bubble" == o.series.type) d += '<table class="tooltips-table">', angular.forEach(t.x, function (e, t) {
                                var n = e.data[s], a = c[t], r = e.nick_name || e.name;
                                if ("date" == e.data_type) {
                                    var o = i.xAxis[t].granularity || "day", u = i.xAxis[t].granularity_name || "",
                                        p = i.xAxis[t].month_start_day || 0;
                                    "week" === o && (p = i.xAxis[t].week_start_day_of_week), a = l.checkGranularity(o, n, u, p), "week" === o && (a += "（" + Highcharts.dateFormat("%b/%e", new Date(n)) + "~" + Highcharts.dateFormat("%b/%e", new Date(n + 5184e5)) + "）"), (n.toString().length < 10 || "Invalid date" === a) && (a = n)
                                } else "sub_date" == e.data_type && (a = l.subDateFormat(e.fid.split("_")[1], n));
                                d += '<tr = class="tooltips-title"><td style="text-align:right;">' + bdp.utils.encodeHTML(r) + '</td><td style="text-align: left;">： ' + a + "</td></tr>"
                            }); else if ("line" == o.series.type) {
                                var y = "y=" + t.scatter_setting.linear_model.a + "* x " + (t.scatter_setting.linear_model.b < 0 ? "-" : "+") + " " + Math.abs(t.scatter_setting.linear_model.b);
                                d += '<p class="tooltips-title text-center">' + y + "</p>", d += '<table class="tooltips-table">'
                            }
                            if (d += '<tr><td style="text-align:right;color:' + u + '">' + bdp.utils.encodeHTML(p) + '</td><td style="text-align: left; color:' + u + '">：' + m + "</td></tr>", d += '<tr><td style="text-align:right;color:' + u + '">' + bdp.utils.encodeHTML(f) + '</td><td style="text-align: left; color:' + u + '">：' + v + "</td></tr>", void 0 !== o._z) {
                                var b = o._z;
                                d += '<tr><td style="text-align:right;color:' + u + '">' + i.bubble_setting.field.name + '</td><td style="text-align: left; color:' + u + '">：' + b + "</td></tr>"
                            }
                            if (1 == i.color_setting.mode && void 0 !== o._c) {
                                var _ = o._c;
                                d += '<tr><td style="text-align:right;color:' + u + '">' + i.color_setting.field[0].name + '</td><td style="text-align: left; color:' + u + '">：' + _ + "</td></tr>"
                            }
                            return d += "</table>"
                        }
                    }()
                },
                legend: {enabled: !!e.info.color_setting.enum_color_map}
            })
        }), c(o.BoxPlot, function (e) {
            var t = e.data.y[0], i = e.info.xaxis_name, n = e.info.xaxis_unit;
            e.theme;
            i || (i = t.name), n && (i += "(" + n + ")"), $.extend(!0, e.options, {
                type: e.options.chart.type || "boxplot",
                chart: {type: e.options.chart.type || "boxplot"},
                xAxis: {title: {enabled: !0, text: i}},
                plotOptions: {
                    boxplot: {
                        dataLabels: {
                            enabled: e.info.show_datalabels,
                            allowOverlap: e.info.show_all_datalabels,
                            style: {fontSize: "14px", textOutline: "none"},
                            formatter: function () {
                            }
                        }
                    }
                },
                tooltip: {
                    formatter: function () {
                        var t = e.data, i = e.info, n = e._getUnit().unit_left || "", a = e.info.xaxis_unit || "";
                        return function (e, r) {
                            if (!r || $(".selected-tooltip").length > 0) return !1;
                            var o;
                            o = this.points ? this.points[0].point : this.point;
                            var s = this.point.index, c = this.point.nickName.split("_"), d = "", u = o.color,
                                p = t.y[0].nick_name || t.y[0].name, f = t.y[1].nick_name || t.y[1].name, h = "",
                                g = "";
                            h = t.y[0].hasOwnProperty("unit_adv") && "" != t.y[0].unit_adv ? t.y[0].unit_adv : a, g = t.y[1].hasOwnProperty("unit_adv") && "" != t.y[1].unit_adv ? t.y[1].unit_adv : n;
                            var m = l.dataLabelFormatter(t.y[0].formatter, o.x) + h,
                                v = l.dataLabelFormatter(t.y[1].formatter, o.y) + g;
                            if ("scatter" == o.series.type || "bubble" == o.series.type) d += '<table class="tooltips-table">', angular.forEach(t.x, function (e, t) {
                                var n = e.data[s], a = c[t], r = e.nick_name || e.name;
                                if ("date" == e.data_type) {
                                    var o = i.xAxis[t].granularity || "day", u = i.xAxis[t].granularity_name || "",
                                        p = i.xAxis[t].month_start_day || 0;
                                    "week" === o && (p = i.xAxis[t].week_start_day_of_week), a = l.checkGranularity(o, n, u, p), "week" === o && (a += "（" + Highcharts.dateFormat("%b/%e", new Date(n)) + "~" + Highcharts.dateFormat("%b/%e", new Date(n + 5184e5)) + "）"), (n.toString().length < 10 || "Invalid date" === a) && (a = n)
                                } else "sub_date" == e.data_type && (a = l.subDateFormat(e.fid.split("_")[1], n));
                                d += '<tr = class="tooltips-title"><td style="text-align:right;">' + bdp.utils.encodeHTML(r) + '</td><td style="text-align: left;">： ' + a + "</td></tr>"
                            }); else if ("line" == o.series.type) {
                                var y = "y=" + t.scatter_setting.linear_model.a + "* x " + (t.scatter_setting.linear_model.b < 0 ? "-" : "+") + " " + Math.abs(t.scatter_setting.linear_model.b);
                                d += '<p class="tooltips-title text-center">' + y + "</p>", d += '<table class="tooltips-table">'
                            }
                            if (d += '<tr><td style="text-align:right;color:' + u + '">' + bdp.utils.encodeHTML(p) + '</td><td style="text-align: left; color:' + u + '">：' + m + "</td></tr>", d += '<tr><td style="text-align:right;color:' + u + '">' + bdp.utils.encodeHTML(f) + '</td><td style="text-align: left; color:' + u + '">：' + v + "</td></tr>", void 0 !== o._z) {
                                var b = o._z;
                                d += '<tr><td style="text-align:right;color:' + u + '">' + i.bubble_setting.field.name + '</td><td style="text-align: left; color:' + u + '">：' + b + "</td></tr>"
                            }
                            if (1 == i.color_setting.mode && void 0 !== o._c) {
                                var _ = o._c;
                                d += '<tr><td style="text-align:right;color:' + u + '">' + i.color_setting.field[0].name + '</td><td style="text-align: left; color:' + u + '">：' + _ + "</td></tr>"
                            }
                            return d += "</table>"
                        }
                    }()
                }
            })
        }), c(o.Radar, function (e) {
            var t, i = e.options.series[0].data.length > 3 ? "polygon" : "circle", n = "dark" === e.theme ? 1 : 2;
            t = "dark" === e.theme ? "fullscreen" == e.mode ? "rgba(255,255,255,0.2)" : "rgba(255,255,255,0.12)" : "fullscreen" == e.mode ? "rgba(0, 0, 0, .2)" : "rgba(0, 0, 0, .12)", $.extend(!0, e.options, {
                chart: {
                    type: "line",
                    polar: !0,
                    backgroundColor: null,
                    spacingBottom: 15
                },
                plotOptions: {
                    line: {
                        lineWidth: 2,
                        marker: $.extend(!0, r[n].marker, {
                            enabled: !0,
                            radius: "fullscreen" == e.mode ? 5 : 3,
                            fillColor: null
                        }),
                        states: {hover: {halo: $.extend(!0, r[n].halo, {radiusPlus: "fullscreen" == e.mode ? 1 : 0})}}
                    }
                },
                pane: {size: "90%", background: {borderColor: null, backgroundColor: null}},
                xAxis: {
                    tickmarkPlacement: "on",
                    lineWidth: 0,
                    gridLineWidth: "fullscreen" != e.mode || e.isMobileMode ? 1 : 2,
                    gridLineColor: t
                },
                yAxis: [{
                    title: {enabled: !1, text: ""},
                    gridLineWidth: "fullscreen" != e.mode || e.isMobileMode ? 1 : 2,
                    gridLineColor: t,
                    tickColor: t,
                    lineWidth: 0,
                    gridLineInterpolation: i
                }]
            }), e.data.x.length && "date" == e.data.x[0].data_type && (e.options.xAxis.showLastLabel = !0)
        }), c(o.Gauge, function (e) {
            t.setGaugeSpecialOption(e)
        }), c(o.Waterfall, function (e) {
            var i = "dark" === e.theme ? 1 : 2, a = t.setWaterfallSpecialOption(e);
            return $.extend(!0, a.plotOptions, {waterfall: {states: $.extend(!0, {}, n[i].states, {select: {borderWdith: 1}})}}), a
        }), c(o.Area, function (e) {
            var t = "dark" === e.theme ? 1 : 2;
            return {
                chart: {type: +e.info.use_spline ? "areaspline" : "area"},
                plotOptions: {
                    area: {
                        fillOpacity: .6,
                        lineWidth: 2,
                        marker: $.extend(r[t].marker, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0}),
                        states: {hover: {halo: r[t].halo}}
                    },
                    areaspline: {
                        fillOpacity: .6,
                        lineWidth: 2,
                        marker: $.extend(r[t].marker, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0}),
                        states: {hover: {halo: r[t].halo}, states: n[t].states}
                    },
                    series: {connectNulls: !1}
                }
            }
        }), c(o.NStackArea, function (e) {
            var t = "dark" === e.theme ? 1 : 2;
            return {
                chart: {type: +e.info.use_spline ? "areaspline" : "area"},
                plotOptions: {
                    area: {
                        fillOpacity: .6,
                        stacking: "normal",
                        lineWidth: 2,
                        marker: $.extend(r[t].marker, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0}),
                        states: {hover: {halo: r[t].halo}}
                    },
                    areaspline: {
                        fillOpacity: .6,
                        stacking: "normal",
                        lineWidth: 2,
                        marker: $.extend(r[t].marker, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0}),
                        states: {hover: {halo: r[t].halo}, states: n[t].states}
                    },
                    series: {connectNulls: !1}
                }
            }
        }), c(o.PStackArea, function (e) {
            var t = "dark" === e.theme ? 1 : 2;
            return {
                chart: {type: +e.info.use_spline ? "areaspline" : "area"},
                plotOptions: {
                    area: {
                        stacking: "percent",
                        lineWidth: 2,
                        marker: $.extend(r[t].marker, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0}),
                        states: {hover: {halo: r[t].halo}}
                    },
                    areaspline: {
                        stacking: "percent",
                        lineWidth: 2,
                        marker: $.extend(r[t].marker, {fillColor: "rgba(0, 0, 0, 0)", lineWidth: 0}),
                        states: {hover: {halo: r[t].halo}, states: n[t].states}
                    },
                    series: {connectNulls: !1}
                }
            }
        }), c(o.TreeMap, function (e) {
            return {
                chart: {type: "treemap"},
                plotOptions: {
                    treemap: {
                        layoutAlgorithm: "squarified",
                        dataLabels: {
                            enabled: !0,
                            allowOverlap: !!e.info.show_all_datalabels,
                            crop: !e.info.show_all_datalabels,
                            style: {color: "#fff", fontSize: "12px", shadow: null, textOutline: null}
                        },
                        levels: [{
                            level: 1,
                            dataLabels: {enabled: !0, align: "left", verticalAlign: "top", style: {fontSize: "14px"}}
                        }]
                    }
                }
            }
        }), t.definedChartType = c, t.chartTypeDelegate = {
            getChartTypeOption: function (e, t) {
                if (e.$elem.removeClass("chart-pie"), "function" == typeof s[t]) return s[t](e);
                throw t + " is not defined"
            }
        }
    }(window, window.bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e) {
        var t = e.bdpChart.ChartType, i = {
            canEditSankeySpec: function (e, t) {
                return !!e && ("C300" === e || "C301" === e)
            }, canEditGaugeSpec: function (e, t) {
                return !!e && "C261" === e
            }, canEditMapSpec: function (e, t) {
                return !!e && ["C271", "C272", "C273"].indexOf(e) >= 0
            }, canEditWordcloudSpec: function (e, t) {
                return !!e && "C340" === e
            }, canEditTableSpec: function (e, t) {
                return !!e && "C200" === e
            }, canEditCardStyle: function (e) {
                return !!e && "C310" === e
            }, canEditWarnLine: function (e, t) {
                if (!t || !e) return !1;
                var i = t.info && t.info.drill_level || 0;
                return ["C212", "C230", "C242", "C271", "C273", "C281", "C290", "C300", "C301", "C320", "C330", "C340", "C352", "C360", "C370"].indexOf(e) < 0 && i < 1
            }, canEditPlotLine: function (e, t) {
                return !!e && ["C230", "C200", "C271", "C272", "C273", "C290", "C300", "C301", "C310", "C320", "C330", "C340", "C360", "C370"].indexOf(e) < 0
            }, canEditConditionFormat: function (e, t) {
                return !!e && ["C261", "C200", "C310"].indexOf(e) >= 0
            }, canEditTopChart: function (e, t) {
                if (!t || !e) return !1;
                var i = t.info.x.length || t.info.compare_axis.length;
                return ["C220", "C261", "C271", "C272", "C273", "C300", "C301", "C310", "C320", "C330", "C340"].indexOf(e) < 0 && i
            }, canEditMarkPoint: function (e, t) {
                if (!t || !e) return !1;
                var i = 1 === t.info.x.length && (!t.info.compare_axis || 0 === t.info.compare_axis.length);
                return ["C210", "C211", "C212", "C220", "C240", "C241", "C242", "C243", "C250", "C320", "C350", "C351", "C352", "C360"].indexOf(e) >= 0 && i
            }, canEditTrendLine: function (e, t) {
                return !!e && "C280" === e
            }, canEditCumulative: function (e, t) {
                return !!e && "C320" === e
            }, canEditChartSummary: function (e, t) {
                if (!t || !e) return !1;
                var i = t.info, n = !1;
                if (i) {
                    var a = i.xAxis.length || 0, r = i.yAxis.length || 0, o = i.compare_axis.length || 0;
                    n = !i.split_compare && (1 == a || 0 == a) && 1 == r && 0 == o
                }
                return "C200 C230 C243 C250 C261 C271 C272 C273 C300 C301 C310 C330".indexOf(e) < 0 && n
            }, canEditXAxis: function (e, t) {
                return !!e && ["C210", "C211", "C212", "C220", "C240", "C241", "C242", "C250", "C280", "C290", "C320", "C350", "C351", "C352", "C281"].indexOf(e) >= 0
            }, canEditLeftAxis: function (e, t) {
                return !!e && ["C200", "C230", "C261", "C271", "C272", "C273", "C290", "C300", "C301", "C310", "C330", "C340", "C360", "C370"].indexOf(e) < 0
            }, canEditRightAxis: function (e, t) {
                if (!t || !e) return !1;
                var i = t.info;
                return "C250" === e && !i.zero_aligned
            }, canEditZeroAligneds: function (e, t) {
                return !!e && "C250" === e
            }, canEditNavigator: function (e, t) {
                if (!t || !e) return !1;
                var i = t.info, a = t.data, r = n.ChartType, o = !1;
                return i && (o = i.x.length > 0 && !i.split_compare && a.y[0] && a.y[0].data.length > 1), "C250" === e && (o = !i.seriesType), [r.Line, r.Column, r.NStackColumn, r.PStackColumn, r.Area, r.NStackArea, r.PStackArea, r.Biax].indexOf(e) >= 0 && o
            }, canSetSelectionAnalysis: function (e, t) {
                return !(!t || !e) && t.supportSelect()
            }, canSetHoverMode: function (e, i) {
                if (!i || !e) return !1;
                var n = [t.Line, t.Column, t.NStackColumn, t.PStackColumn, t.Area, t.NStackArea, t.PStackArea, t.Biax, t.ComparisonBar, t.Bar, t.NStackBar, t.PStackBar, t.TreeMap],
                    a = i && i.isSplitChart(),
                    r = t.TreeMap !== e && i.data.y.length > 1 || t.TreeMap == e && i.data.x.length > 1;
                return n.indexOf(e) > -1 && !a && r
            }, canEditSplitCompare: function (e, t) {
                if (!t || !e) return !1;
                var i = t.info, a = n.ChartType, r = !1;
                return i && (r = i.compare_axis && i.compare_axis.length > 0), [a.Line, a.Area, a.Column, a.Bar, a.KPICard, a.Gauge].indexOf(e) >= 0 && r
            }, canEditLineStyle: function (e, t) {
                if (!t || !e) return !1;
                var i = t.info;
                return ["C220", "C350", "C351", "C352", "C220"].indexOf(e) >= 0 || "C250" === e && i.type_optional.indexOf("C220") > -1
            }, canEditPieStyle: function (e, t) {
                return !!e && "C230" === e
            }, canEditFunnelLayout: function (e, t) {
                return !!e && "C330" === e
            }, canEditWordcloud3D: function (e, t) {
                return !!e && "C340" === e
            }, canEditComparisonBarAxis: function (e, t) {
                return !!e && "C243" === e
            }, canEditChartDataLabels: function (e, t) {
                return !!e && ["C101", "C102", "C103", "C104", "C105", "C200", "C261", "C310", "C340", "C400", "C500"].indexOf(e) < 0
            }, canEditChartOverlapMode: function (e, t) {
                return !!e && ["C210"].indexOf(e) >= 0
            }, canEditGridPlotLine: function (e, t) {
                return !!e && ["C210", "C211", "C212", "C220", "C240", "C241", "C242", "C243", "C250", "C280", "C320", "C350", "C351", "C352", "C281"].indexOf(e) >= 0
            }, canEditChartLegend: function (t, i) {
                if (!i || !t) return !1;
                var n = i.info,
                    a = ["C210", "C211", "C212", "C220", "C230", "C240", "C241", "C242", "C250", "C290", "C350", "C351", "C352", "C280"].indexOf(t) >= 0;
                if (a && n) {
                    var r = n.compare_axis && n.compare_axis.length > 0;
                    if (a = !!r || a, !r && n.x.length > 1 && n.y.length < 2 && ["C250"].indexOf(t) < 0 && ["C280"].indexOf(t) < 0) return a = !1;
                    if (!r && n.y.length < 2 && ["C230", "C250", "C280"].indexOf(t) < 0 && !e.bdpChart.helper.timePredicted.isOpen(t, n.y)) return a = !1;
                    var o = n.color_setting;
                    "C230" != t && o && o.field && n.x && n.x.length > 1 && o.field.map(function (e) {
                        e.fid == n.x[0].fid && (a = !1)
                    }), "C280" == t && (a = !(!o || !o.enum_color_map))
                }
                return a
            }, canEditChartSeriesType: function (e, t) {
                return !!e && ("C250" === e || "C281" === e)
            }, canEditChartReversed: function (e, t) {
                return !!e && ["C240", "C241", "C242"].indexOf(e) >= 0
            }
        }, n = e.bdpChart || {};
        e.bdpChart = n, n.configurable = i
    }(window)
}, function (e, t, i) {
    "use strict";
    !function (e) {
        var t = e.helper, i = e.ChartType, n = {
            getModeOption: function (e, n, a, r) {
                var o = {
                    showDataLabel: {
                        dataLabels: {
                            enabled: !0,
                            allowOverlap: r.info.show_all_datalabels,
                            color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                            style: {fontSize: "14px", textOutline: "none"},
                            padding: 5
                        }
                    }, label: {color: "dark" === r.theme ? "rgba(255, 255, 255, .6) " : "#666", fontSize: "13px"}
                };
                "C320" !== e && "C280" !== e && (o.showDataLabel.dataLabels.formatter = function () {
                    var i, n;
                    if ("C290" === e && 0 === r.info.xAxis.length) {
                        var a = this.point.index;
                        i = r.data.y[a].formatter, n = r.data.y[a].aggregator
                    } else i = this.series.options.formatter, n = this.series.options.aggregator;
                    return "C243" == e ? t.dataLabelFormatter(i, Math.abs(this.y), n) : t.dataLabelFormatter(i, this.y, n)
                });
                var s = n.summary.supply_summary && n.summary.supply_summary.length, l = {
                    noData: {
                        style: {
                            color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                            fontSize: "14px"
                        }
                    },
                    legend: {
                        layout: "vertical",
                        align: "right",
                        verticalAlign: "top",
                        navigation: {
                            activeColor: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                            style: o.label
                        },
                        itemStyle: o.label,
                        itemHoverStyle: {color: "dark" === r.theme ? "#eee " : "#666"},
                        margin: 40,
                        y: 30
                    },
                    chart: {spacingTop: s ? 10 : 50},
                    title: {style: o.label},
                    xAxis: {labels: {style: o.label}, title: {style: o.label}},
                    yAxis: [{
                        title: {style: o.label},
                        labels: {
                            style: e !== i.Gauge ? o.label : {
                                fontSize: "20px",
                                color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666"
                            }
                        }
                    }],
                    tooltip: {style: {fontSize: "14px"}},
                    plotOptions: {
                        series: {animation: {duration: 1e3, easing: "swing"}},
                        bar: angular.copy(o.showDataLabel),
                        column: angular.copy(o.showDataLabel),
                        waterfall: angular.copy(o.showDataLabel),
                        line: {
                            dataLabels: {
                                enabled: !0,
                                allowOverlap: r.info.show_all_datalabels,
                                color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                                style: {fontSize: "14px", textOutline: "none"},
                                padding: 5,
                                formatter: angular.copy(o.showDataLabel.dataLabels.formatter)
                            }, lineWidth: 3, state: {hover: {lineWidth: 4}}
                        },
                        spline: {
                            dataLabels: {
                                enabled: !0,
                                allowOverlap: r.info.show_all_datalabels,
                                color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                                style: {fontSize: "14px", textOutline: "none"},
                                padding: 5,
                                formatter: function () {
                                    var e = this.series.options.formatter, i = this.series.options.aggregator;
                                    return t.dataLabelFormatter(e, this.y, i)
                                }
                            }, lineWidth: 3, state: {hover: {lineWidth: 4}}
                        },
                        area: {
                            dataLabels: {
                                enabled: !0,
                                allowOverlap: r.info.show_all_datalabels,
                                color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                                style: {fontSize: "14px", textOutline: "none"},
                                padding: 5,
                                formatter: function () {
                                    var e = this.series.options.formatter, i = this.series.options.aggregator;
                                    return t.dataLabelFormatter(e, this.y, i)
                                }
                            }, lineWidth: 3, state: {hover: {lineWidth: 4}}
                        },
                        areaspline: {
                            dataLabels: {
                                enabled: !0,
                                allowOverlap: r.info.show_all_datalabels,
                                color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                                style: {fontSize: "14px", textOutline: "none"},
                                padding: 5,
                                formatter: function () {
                                    var e = this.series.options.formatter, i = this.series.options.aggregator;
                                    return t.dataLabelFormatter(e, this.y, i)
                                }
                            }, lineWidth: 3, state: {hover: {lineWidth: 4}}
                        },
                        bubble: {
                            dataLabels: {
                                enabled: !0,
                                allowOverlap: r.info.show_all_datalabels,
                                color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                                style: {fontSize: "14px", textOutline: "none"},
                                padding: 5
                            }
                        },
                        scatter: {
                            dataLabels: {
                                enabled: !0,
                                allowOverlap: r.info.show_all_datalabels,
                                color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                                style: {fontSize: "14px", textOutline: "none"},
                                padding: 5
                            }
                        },
                        boxplot: {
                            dataLabels: {
                                enabled: !0,
                                allowOverlap: r.info.show_all_datalabels,
                                color: "dark" === r.theme ? "rgba(255, 255, 255, 1) " : "#666",
                                style: {fontSize: "14px", textOutline: "none"},
                                padding: 5
                            }
                        }
                    },
                    pane: {size: "95%"}
                };
                switch (e === i.Gauge && r.isSplitChart() && delete l.yAxis, l = $.extend(!0, r.options, l), e) {
                    case i.Biax:
                        l.yAxis[1] && (l.yAxis[1].title.style = o.label, l.yAxis[1].title.offset = 70, l.yAxis[1].labels.style = o.label);
                        break;
                    case i.ComparisonBar:
                        l.yAxis[1] && (l.yAxis[1].title.style = o.label, l.yAxis[1].title.offset = -18, l.yAxis[1].labels.style = o.label)
                }
                l.title.text || (l.chart.spacingTop = 50), r.isMobileMode || (l.title.margin = 30, l.yAxis[0].title.offset = 70, l.yAxis[0].labels.y = 6)
            }
        }, a = {
            getModeOption: function (e, i, n, a) {
                var r = {
                    dataLabels: {
                        enabled: !0,
                        allowOverlap: a.info.show_all_datalabels,
                        color: "dark" === a.theme ? "rgba(255, 255, 255, 0.6) " : "#666",
                        style: {fontSize: "12px", textOutline: "none"},
                        padding: 5
                    }
                };
                return "C320" !== e && "C280" !== e && (r.dataLabels.formatter = function () {
                    var i, n;
                    if ("C290" === e && 0 === a.info.xAxis.length) {
                        var r = this.point.index;
                        i = a.data.y[r].formatter, n = a.data.y[r].aggregator
                    } else i = this.series.options.formatter, n = this.series.options.aggregator;
                    return "C243" == e ? t.dataLabelFormatter(i, Math.abs(this.y), n) : t.dataLabelFormatter(i, this.y, n)
                }), {
                    plotOptions: {
                        bar: angular.copy(r),
                        column: angular.copy(r),
                        waterfall: angular.copy(r),
                        line: {dataLabels: angular.copy(r.dataLabels), lineWidth: 3, state: {hover: {lineWidth: 4}}},
                        spline: {dataLabels: angular.copy(r.dataLabels), lineWidth: 3, state: {hover: {lineWidth: 4}}},
                        scatter: {dataLabels: angular.copy(r.dataLabels)},
                        bubble: {dataLabels: angular.copy(r.dataLabels)},
                        area: {dataLabels: angular.copy(r.dataLabels), lineWidth: 3, state: {hover: {lineWidth: 4}}},
                        areaspline: {
                            dataLabels: angular.copy(r.dataLabels),
                            lineWidth: 3,
                            state: {hover: {lineWidth: 4}}
                        },
                        boxplot: {dataLabels: angular.copy(r.dataLabels)}
                    }
                }
            }
        }, r = {
            getModeOption: function (e) {
                var i = e.getChartType(), n = (e.data, e.mode), a = n.split("*"), r = a[0] >>> 0, o = a[1] >>> 0, s = {
                    dataLabels: {
                        enabled: !0,
                        allowOverlap: e.info.show_all_datalabels,
                        color: "dark" === e.theme ? "rgba(255, 255, 255, .6) " : "#666",
                        style: {fontSize: "10px", fontWeight: "normal", textOutline: "none"},
                        padding: 5
                    }
                };
                "C320" !== i && "C280" !== i && (s.dataLabels.formatter = function () {
                    var n, a;
                    if ("C290" === i && 0 === e.info.xAxis.length) {
                        var r = this.point.index;
                        n = e.data.y[r].formatter, a = e.data.y[r].aggregator
                    } else n = this.series.options.formatter, a = this.series.options.aggregator;
                    return "C243" == i ? t.dataLabelFormatter(n, Math.abs(this.y), a) : t.dataLabelFormatter(n, this.y, a)
                });
                var l = {
                    plotOptions: {
                        bar: angular.copy(s),
                        column: angular.copy(s),
                        waterfall: angular.copy(s),
                        line: angular.copy(s),
                        spline: angular.copy(s),
                        area: angular.copy(s),
                        areaspline: angular.copy(s),
                        bubble: angular.copy(s),
                        scatter: angular.copy(s),
                        boxplot: angular.copy(s)
                    }
                };
                if (!bdp.bdpPageStatus.isUnderAdvDash() && !bdp.bdpPageStatus.isUnderDataScreen()) switch (o < 4 && r < 4 && $.extend(!0, l, {legend: {enabled: !1}}), r) {
                    case 1:
                    case 2:
                    case 3:
                        l = $.extend(!0, l, {
                            chart: {},
                            legend: {enabled: !1}
                        }), l.labels = l.labels || {}, l.labels.style = l.labels.style || {}, l.labels.style.fontSize = "8px";
                        break;
                    case 4:
                    case 5:
                    case 6:
                        break;
                    default:
                        l = $.extend(!0, l, {
                            plotOptions: {
                                line: {lineWidth: 3, hover: {lineWidth: 4}},
                                spline: {lineWidth: 3, hover: {lineWidth: 4}}
                            }
                        })
                }
                return e.isMobileMode && (e.mode = e.originMode, e.isDashboardMode = "fullscreen" !== e.originMode), l
            }
        };
        e.modeDelegate = {
            getModeOption: function (e) {
                var t = e.getChartType();
                switch (e.isMobileMode && (e.originMode = e.mode, e.mode = "4*4", e.isDashboardMode = !0), e.mode) {
                    case"fullscreen":
                        return n.getModeOption(t, e.data, e.mode, e);
                    case"edit":
                        return a.getModeOption(t, e.data, e.mode, e);
                    default:
                        return e.isDashboardMode ? r.getModeOption(e) : {}
                }
            }
        }
    }(bdpChart)
}, function (e, t, i) {
    "use strict";
    !function () {
        bdpChart.setPieSpecialOption = function (e) {
            var t, i, n = e.info, a = (e.dash_setting, e.data), r = bdpChart.getColorsByType("C230", "bdp"),
                o = e.$elem.height(), s = e.$elem.width(), l = e.gridWidth, c = e.gridHeight, d = Math.min(o, s),
                u = e.optional.drill_level ? 180 * .7 : 140, p = "10px",
                f = c > 3 && c < l && l != c || !l && !c && o > 250 && o < s, h = {};
            (bdp.bdpPageStatus.isUnderDataScreen() || bdp.bdpPageStatus.isUnderAdvDash()) && (f = o > 250 && o < s), "dark" == e.theme || e.mode, i = "pie" == n.shape ? d > 500 ? 4 : 5 : d > 350 ? 3.5 : 4.7, p = l > 3 ? d < 250 ? "10px" : d >= 250 && d < 300 ? s > o ? "11px" : "10px" : d >= 300 && d < 400 ? s > o ? "12px" : "11px" : d >= 400 && d < 500 ? s > o ? "15px" : "13px" : s > o ? "18px" : "16px" : d < 250 ? "10px" : d >= 250 && d < 300 ? "12px" : d >= 300 && d < 350 ? "14px" : d >= 350 && d < 400 ? "16px" : "18px", n && n.style && n.style.labels && (h = n.style.labels.style, p = h.fontSize), n.pieContent && "text" === n.pieContent.showProportion && (n.show_connector_label = !0, delete n.pieContent);
            var g = +p.split("px")[0];
            t = d < 500 ? -(d - 12 - g) / (9.5 - (d - 250) / 100 * .5) : -(d - 12 - g) / 7;
            var m = {
                cursor: n.is_drill || "2" == e.optional.linked_chart_type ? "pointer" : "default",
                borderWidth: 1,
                borderColor: "dark" === e.theme ? "#24273E" : "#fff",
                dataLabels: {
                    enabled: !0,
                    allowOverlap: n.show_all_datalabels,
                    distance: t,
                    style: {fontSize: p, textOutline: "none"},
                    useHTML: !0,
                    formatter: function (e, t) {
                        if ("showPercentage" == t) {
                            var a = [], r = this.y, o = this.series.options.formatter,
                                s = this.series.options.aggregator,
                                l = n.style && n.style.labelsForPieValue && n.style.labelsForPieValue.style || {},
                                c = n.style && n.style.labels && n.style.labels.style || {};
                            return !n.show_all_datalabels && this.point.percentage < i ? a = [] : (a.push('<p class="bdp-datalabels datalabels-pie-rate text-center" '), n.style && n.style.labels && (a.push(' style="'), a.push("color:" + c.color + ";"), a.push("font-size:" + c.fontSize + ";"), a.push("font-family:" + c.fontFamily + ";"), a.push('"')), a.push(">"), a.push(this.point.percentage.toFixed(1) + "%"), a.push("</p>"), n.show_real_value && "donut" !== n.shape && (r = bdpChart.helper.dataLabelFormatter(o, r, s), a.push('<p class="bdp-datalabels datalabels-pie-value text-center" '), n.style && n.style.labelsForPieValue && (a.push(' style="'), a.push("color:" + l.color + ";"), a.push("font-size:" + l.fontSize + ";"), a.push("font-family:" + l.fontFamily + ";"), a.push('"')), a.push(">"), a.push(r), a.push("</p>"))), a.join("")
                        }
                    }
                }
            };
            if (d < u) n.show_all_datalabels || (m.dataLabels = {enabled: !1}); else if (!e.isMobileMode && n.show_connector_label) {
                var v = {
                    fontSize: "fullscreen" === e.mode ? "14px" : "11px",
                    color: "dark" === e.theme ? "#fff" : "rgba(11,19,32)",
                    opacity: "dark" === e.theme ? "0.7 !important" : "0.5 !important"
                };
                $.extend(!0, m.dataLabels, {
                    connectorColor: "dark" === e.theme ? "rgba(255, 255, 255, .12)" : "rgba(0, 0, 0, .12)",
                    connectorWidth: 1,
                    size: "80%",
                    style2: v,
                    fontSize: "10px",
                    softConnector: !1,
                    formatter: function (t, a) {
                        if ("showPercentage" == a) {
                            var r = [], o = this.y, s = this.series.options.formatter,
                                l = this.series.options.aggregator,
                                c = n.style && n.style.labelsForPieValue && n.style.labelsForPieValue.style || {},
                                d = n.style && n.style.labels && n.style.labels.style || {};
                            return !n.show_all_datalabels && this.point.percentage < i ? r = [] : (r.push('<p class="bdp-datalabels datalabels-pie-rate text-center" '), d.colorAdaption && (d.color = v.color), n.style && n.style.labels && (r.push(' style="'), r.push("color:" + d.color + ";"), r.push("font-size:" + d.fontSize + ";"), r.push("font-family:" + d.fontFamily + ";"), r.push('"')), r.push(">"), r.push(this.point.percentage.toFixed(1) + "%"), r.push("</p>"), n.show_real_value && "donut" !== n.shape && (o = bdpChart.helper.dataLabelFormatter(s, o, l), r.push('<p class="bdp-datalabels datalabels-pie-value text-center" '), c.colorAdaption && (c.color = "#fff"), n.style && n.style.labelsForPieValue && (r.push(' style="'), r.push("color:" + c.color + ";"), r.push("font-size:" + c.fontSize + ";"), r.push("font-family:" + c.fontFamily + ";"), r.push('"')), r.push(">"), r.push(o), r.push("</p>"))), r.join("")
                        }
                        if ("showConnectorLabel" == a && f) {
                            if (0 == this.point.percentage) return "";
                            var u = this.point.index || 0, p = this.point.series.data[u],
                                h = this.percentage > 33 ? .33 : this.percentage / 100,
                                r = (Math.abs(this.point.shapeArgs.r * Math.sin(.5 * Math.PI * h) * 1.9), []),
                                g = n.style && n.style.labelsForPieConnector && n.style.labelsForPieConnector.style || {};
                            if (g.colorAdaption && (g.color = v.color), r.push('<span class="bdp-datalabels"'), n.style && n.style.labelsForPieConnector && (r.push(' style="'), r.push("color:" + g.color + ";"), r.push("font-size:" + g.fontSize + ";"), r.push("font-family:" + g.fontFamily + ";"), r.push('"')), r.push(">"), p && "Slice" === p.name) {
                                var m = "";
                                m = ["其它", "Else"].indexOf(p.options.x) >= 0 ? p.options.x : e._formatXAxisLabel(p.x, 0), r.push(m)
                            } else {
                                var y = n.x || [], b = n.y || [], _ = this.key;
                                0 == y.length && (_ = b[u] && (b[u].nick_name || b[u].name) || this.key), r.push(_)
                            }
                            return r.push("</span>"), r.join("")
                        }
                    }
                })
            }
            if (!n.xAxis.length && n.yAxis.length) {
                var y = [];
                angular.forEach(a.y, function (e, t) {
                    var i = e.nick_name || e.name;
                    y.push({
                        color: e.series_color ? e.series_color : r[t % r.length],
                        name: i.substr(0, 5),
                        y: 1 * e.data[0]
                    })
                }), $.extend(!0, e.options, {
                    xAxis: {type: "category"},
                    series: [{data: y, formatter: a.y[0].formatter}]
                })
            }
            if ("donut" === n.shape) {
                var b = -.14 * d / 2, _ = !0;
                _ = bdp.bdpPageStatus.isUnderAdvDash() || bdp.bdpPageStatus.isUnderDataScreen() ? o > 250 && o < s : l > 4 && c > 3 || "edit" == e.mode || "fullscreen" == e.mode, n.show_datalabels && n.show_all_datalabels && (_ = !0), $.extend(!0, m, {
                    innerSize: "68%",
                    dataLabels: {enabled: _, allowOverlap: n.show_all_datalabels, distance: b}
                })
            }
            $.extend(!0, e.options, {plotOptions: {pie: m}})
        }
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(171), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e, t) {
            if (e && !t[1]) {
                var i = angular.copy(e);
                i.forEach(function (e, t) {
                    e.y = null
                }), t[1] = angular.copy(t[0]), t[1].data = i
            }
            return t[1]
        }

        function t(e, t, i) {
            t = i[1].data, e.forEach(function (e, t) {
                e.y < 0 ? e.y = null : e.y > 0 && (e.y = -e.y)
            }), t.forEach(function (e, t) {
                e.y < 0 && (e.y = null)
            });
            for (var n = e.length - 1; n >= 0; n--) {
                var a = t[n] && t[n].y;
                void 0 == e[n].y && void 0 == a && (e.splice(n, 1), t.splice(n, 1))
            }
        }

        function i(e, t, i) {
            e.forEach(function (e) {
                var n = e.name || e.x, a = i._formatXAxisLabel(n, 0),
                    r = a.length > 25 ? a.substring(0, 25) + "..." : a;
                t.push(r)
            })
        }

        bdpChart.setComparisonSpecialOption = function (n) {
            var r = n.data, o = n.info, s = bdpChart.helper, l = n.getChartType(), c = o.comparison_xaxis_pos,
                d = n.options.series;
            d.splice(2);
            var u, p = n.options.xAxis, f = angular.copy(p), h = angular.copy(p), g = d[0].data, m = [], v = [],
                y = "dark" === n.theme ? 0 : 1, b = "fullscreen" == n.mode ? -81 : -25,
                _ = s.getEdgeValueFromMultiArray(r, "y", "max");
            if (e(g, d), t(g, m, d), !g.length) return void n._displayEmptyChart();
            $.extend(!0, d[1], {yAxis: 1}), i(g, v, n);
            var w, x, C, k, S = "fullscreen" !== n.mode || n.isMobileMode ? 0 : 10, T = n._getXAxisLabelMaxWidth(v) + S;
            switch (c) {
                case"pos_side":
                    w = n.$elem.width() - 2 * T, x = w / 2, k = T, C = k + x, $.extend(!0, f, {
                        offset: 0,
                        labels: {enabled: !0},
                        lineWidth: y
                    }), $.extend(!0, h, {
                        offset: T,
                        opposite: !0,
                        categories: v,
                        linkedTo: 0,
                        labels: {enabled: !0, align: "left", x: 5, y: 4},
                        tickPixelInterval: 10,
                        lineWidth: y
                    }), u = [f, h];
                    break;
                case"pos_right":
                    w = n.$elem.width() - T - 2, x = w / 2, k = 1, C = k + x, $.extend(!0, f, (0, a.default)({
                        lineWidth: 0,
                        labels: {enabled: !1}
                    }, "lineWidth", 0)), $.extend(!0, h, {
                        offset: 0,
                        opposite: !0,
                        categories: v,
                        linkedTo: 0,
                        labels: {enabled: !0, align: "left", x: 5, y: 4},
                        tickPixelInterval: 10,
                        lineWidth: y
                    }), u = [f, h];
                    break;
                case"pos_middle":
                    w = n.$elem.width() - 2 - 4, x = (w - T) / 2, k = 1, C = k + x + T + 2, $.extend(!0, f, {
                        offset: 0,
                        lineWidth: 0,
                        labels: {x: x + .5 * T + k, enabled: !0, align: "center"}
                    }), n.options.yAxis[0].plotLines[0].value = -1e-4, u = f;
                    break;
                default:
                    w = n.$elem.width() - T - 2, x = w / 2, k = T + 1, C = k + x, f.lineWidth = y, f.offset = 0, u = f
            }
            "sub_date" === r.x[0].data_type && ["pos_right", "pos_side"].indexOf(c) > -1 && delete u[1].labels.formatter, $.extend(!0, n.options.yAxis[0], {
                labels: {
                    formatter: function () {
                        var e = "pos_middle" !== c;
                        return s.checkPercentLabel(this, r, l, "left", e)
                    }
                }, left: k, width: x, min: -_, max: -0
            }), $.extend(!0, n.options.yAxis[1], {
                labels: {y: b},
                left: C,
                width: x,
                min: 0,
                max: _
            }), $.extend(!0, n.options, {xAxis: u, compareBar: !0})
        }
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(41), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function (e) {
        e.setScatterSpecialOption = function (t) {
            function i(e, t) {
                if (!(e instanceof Array && t instanceof Array)) return !1;
                if (e.length < t.length) return !1;
                for (var i = 0, n = t.length; i < n; i++) if (e.indexOf(t[i]) == -1) return !1;
                return !0
            }

            !function () {
                for (var e = t.data, i = (t.info, 0), n = 0; n < e.y.length; n++) i = Math.max(i, e.y[n].data.length)
            }(), function (t) {
                var n = (t.data.x.length && t.data.x[0].data, t.data.y);
                if (2 != n.length || n[0].data.length != n[1].data.length) return !1;
                var a = [], r = n[0].data, o = n[1].data, s = 0, l = r.length;
                t.info.color_setting.enum_color_map && _.forEach(t.info.color_setting.enum_color_map, function (e, t) {
                });
                var c, d, u, p;
                for (c = d = Number(r[s]), u = p = Number(o[s]), l = r.length; s < l; s++) {
                    var f = Number(r[s]), h = Number(o[s]), g = [], m = [];
                    _.forEach(t.data.x, function (e, t) {
                        "date" == e.data_type ? (g.push(Highcharts.dateFormat("%Y年%m月%d日", e.data[s])), m.push(Highcharts.dateFormat("%Y年%m月%d日", e.data[s]))) : (g.push(e.data[s]), m.push(e.data[s]))
                    }), t.info.color_setting.enum_color_map && _.forEach(t.info.color_setting.enum_color_map, function (e, t) {
                        i(g, e.name.split("_")) && (g = e.name.split("_"))
                    }), f < c && (c = f), f > d && (d = f), h < u && (u = h), h > p && (p = h);
                    var v = {
                        name: t.info.color_setting.enum_color_map ? g.join("_") : "1",
                        nickName: m.join("_"),
                        x: f,
                        y: h
                    };
                    a.push(v)
                }
                var y = [{type: "scatter", marker: {symbol: "circle"}, data: a}], b = t.data.scatter_setting,
                    w = {color: "rgba(10,18,33,0.2)", type: "spline"};
                if ("dark" === t.theme && (w.color = "rgba(81,130,228,0.42)"), b.enable_trend_line && b.trend_line_type) {
                    var x, C, k = [];
                    b.trend_line_type = +b.trend_line_type;
                    var S = angular.copy(r).sort(function (e, t) {
                        return e - t
                    }), T = {
                        1: "linear_model", 2: "logarithm_model",
                        3: "exponential_model", 4: "poly_model"
                    }, D = T[b.trend_line_type], L = b[D];
                    if (L) {
                        switch (b.trend_line_type) {
                            case 1:
                                var A = L.a, E = L.b, I = [c, A * c + E], F = [d, A * d + E];
                                w.type = "line", k = [I, F];
                                break;
                            case 2:
                                for (s = 0; s < l; s++) if ((0 == s || S[s] != S[s - 1]) && (x = Number(S[s])) > 0) {
                                    C = L.a * Math.log(x) + L.b;
                                    var E = -0;
                                    L.b < E && (C = 0), isFinite(C) && k.push([x, C])
                                }
                                break;
                            case 3:
                                for (s = 0; s < l; s++) 0 != s && S[s] == S[s - 1] || (x = Number(S[s]), C = Math.exp(x * L.a + L.b), isFinite(C) && k.push([x, C]));
                                break;
                            case 4:
                                var O = e.helper.polynomial(L.coeffs);
                                for (s = 0; s < l; s++) 0 != s && S[s] == S[s - 1] || (x = Number(S[s]), C = O(x), k.push([x, C]))
                        }
                        w.data = k, $.extend(!0, w, {
                            isScatterTrendLine: !0,
                            name: "Trendline",
                            lineWidth: 2,
                            dataLabels: {enabled: !1}
                        }), y.push(w)
                    }
                }
                t.options.series = y
            }(t), function (e) {
                function t(e, t, i) {
                    if (e = Number(e), isNaN(e)) return 1;
                    var n, a = t.length, r = a - 1;
                    for (n = 0, a = t.length; n < a; n++) {
                        var o = t[n];
                        if (e < o[0]) {
                            r = n;
                            break
                        }
                        if (o[0] <= e && e < o[1]) {
                            r = n;
                            break
                        }
                    }
                    return i ? a - r : r + 1
                }

                if ($.isEmptyObject(e.info.bubble_setting)) return !1;
                var i = e.data.bubble_sizes, n = e.data.bubble_size_groups, a = e.options.series[0], r = a.data,
                    o = e.info.bubble_setting.reverse, s = e.info.bubble_setting.size_range;
                angular.forEach(i, function (e, i) {
                    r[i]._i = i, r[i]._z = e, r[i].z = t(e, n, o)
                }), r.sort(function (e, t) {
                    return t.z - e.z
                }), e.data.x.concat(e.data.y, e.origin_data.x, e.origin_data.y).forEach(function (e) {
                    var t = e.data;
                    e.data = r.map(function (e) {
                        return t[e._i]
                    })
                });
                var l = e.data.bubble_sizes;
                e.data.bubble_sizes = r.map(function (e) {
                    return l[e._i]
                }), e.origin_data.bubble_sizes = [].concat(e.data.bubble_sizes), e.data.colors = r.map(function (t) {
                    return e.data.colors[t._i]
                }), a.type = "bubble", $.extend(!0, e.options, {
                    chart: {type: "bubble"},
                    plotOptions: {bubble: {sizeBy: "width", minSize: 3 * s[0], maxSize: 3 * s[1]}}
                })
            }(t), function (t) {
                if (t.options.series && t.options.series[0]) {
                    var i, n = t.options.series[0].data, r = 0, o = t.info.color_setting;
                    if (delete o.is_series, o) if (0 != o.mode || $.isEmptyObject(o.enum_color_map) || 0 == t.data.x.length) {
                        if (!$.isEmptyObject(t.data.colors) && 1 === o.mode) {
                            var s = t.data.colors.map(function (e) {
                                    return Number(e)
                                }), l = e.helper.linearRangeColor(o.range_color.start_color, o.range_color.end_color),
                                c = e.helper.createLinearScale(o.range_color, s), d = [], u = o.range_color.step;
                            if (u > 1) {
                                for (r = 0; r < u - 1; r++) d.push(l(r / (u - 1)));
                                d.push(l(1))
                            }
                            angular.forEach(n, function (e, i) {
                                var n, a = s[i], r = c(a);
                                if (u) {
                                    var o = Math.floor(u * r);
                                    o = Math.min(o, u - 1), n = d[o]
                                } else n = l(r);
                                e.color = Highcharts.Color(n).setOpacity(.8).get(), e._c = t.data.colors[i]
                            })
                        }
                    } else {
                        i = e.colors[o.theme];
                        var p, f = i.length, h = [], g = o.enum_color_map || null,
                            m = null === g ? [] : (0, a.default)(g).map(function (e) {
                                return e.split("_")
                            });
                        angular.forEach(n, function (e, n) {
                            if (h = t.data.x.map(function (e, t) {
                                return "number" == typeof e.data[n] && (e.data[n] = e.data[n].toString()), e.data[n]
                            }), g) {
                                for (var a = 0; a < m.length; a++) if (bdp.utils.isContain(h, m[a])) {
                                    p = g[m[a].join("_")].color;
                                    break
                                }
                                p || (p = i[n % f])
                            } else p = i[n % f];
                            e.color = Highcharts.Color(p).setOpacity(.8).get()
                        })
                    }
                }
            }(t), function (e) {
                var t = e.options.series[0].data, i = e.options.series[0].type, n = [];
                angular.forEach(t, function (e, t) {
                    n.push(e.name)
                }), n = _.uniq(n);
                var a = [];
                _.forEach(n, function (e, n) {
                    var r = {}, o = [];
                    r.name = e, r.type = i, r.marker = {symbol: "circle"};
                    var o = [], s = _.filter(t, {name: e});
                    _.forEach(s, function (e, t) {
                        var i = {
                            x: e.x,
                            y: e.y,
                            nickName: e.nickName,
                            z: e.z ? e.z : void 0,
                            _z: e._z ? e._z : void 0,
                            _i: e._i ? e._i : void 0
                        };
                        e.color && (i.color = e.color, r.color = e.color), o.push(i)
                    }), r.data = o, a.push(r)
                });
                var r = e.data.scatter_setting;
                if (r.enable_trend_line && r.trend_line_type) {
                    var o = e.options.series;
                    if (o.length > 1) var s = o[o.length - 1]
                }
                e.options.series = a, s && e.options.series.push(s)
            }(t)
        }
    }(bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e) {
        function t(e) {
            var t = e.info, i = {
                plotOptions: {
                    treemap: {
                        allowDrillToNode: !0, dataLabels: {
                            useHTML: !0, formatter: function () {
                                if (this.point.shapeArgs) {
                                    var e = this.point.shapeArgs.height,
                                        i = this.point.node.parent == this.series.rootNode && e < 42 || this.series.nodeMap[this.point.node.parent].parent == this.series.rootNode && e < 36;
                                    t.show_all_datalabels && (i = !1);
                                    var n = this.point.dlOptions.align,
                                        a = t.data_label_setting && t.data_label_setting.show_percent,
                                        r = this.point.dlOptions.style.cursor, o = this.point.dlOptions.style.fontSize;
                                    if (t && t.style && t.style.labels) {
                                        o = t.style.labels.style.fontSize
                                    }
                                    var s = a && !i ? '<p class="bdp-datalabels datalabels-treemap" style="opacity: 0.7;font-size:' + o + ";font-weight:lighter; cursor:" + r + "; text-align:" + n + '">' + (this.point.value / this.point.sum * 100).toFixed(2) + "%</p>" : "";
                                    return '<p class="bdp-datalabels datalabels-treemap" style="font-weight:bold; font-size:' + o + "; cursor:" + r + "; text-align:" + n + ';">' + (this.point.name || this.point.id) + "</p>" + s
                                }
                                return ""
                            }
                        }, events: {
                            onDrillToNode: function (i, n, a) {
                                e.hideHoverTooltip();
                                for (var r = e.$elem, o = t.xAxis[0].nick_name || t.xAxis[0].name, s = r.parent(), l = [], c = i; "" !== c;) {
                                    var d = n[c];
                                    l.push(c), c = d.parent
                                }
                                l.push(""), l = l.reverse(), "fullscreen" !== e.mode || e.isMobileMode || (s = $(".fullscreen-modal"));
                                var u = s.find(".treemap-drill-crumbs");
                                u.length || (u = $('<div class="drill-crumbs treemap-drill-crumbs"></div>'), u.on("click", ".drill-point", function () {
                                    var t = $(this).data("nodeid");
                                    a.drillToNode(t), e.isMobileMode && (e.selectedPoint = e.findTreeMapFirstNode(t, n, a) || e.selectedPoint, e.refreshTooltip(e.chartInstance))
                                }), s.find(".drill-crumbs-wrap").append(u));
                                var p = "";
                                l.length > 1 && l.forEach(function (e) {
                                    var t = "" == e ? o : n[e].name;
                                    "" != e && (p += '<i class="bdp-icon ico-slicesnav-arrow"></i>'), p += '<span class="drill-point" data-nodeid="%nodeId%" title="%nodeName%">%nodeName%</span>'.replace("%nodeId%", e).replace(/%nodeName%/g, t)
                                }), u.html(p), e.isMobileMode || r.css({bottom: 22})
                            }
                        }
                    }
                }
            };
            "fullscreen" != e.mode || e.isMobileMode || (i.chart = {spacingTop: 10}, i.title = {margin: 0}), $.extend(!0, e.options, i), delete e.options.xAxis, delete e.options.yAxis
        }

        function i(t) {
            var i = e.language, n = "zh" === i ? "当前图表无数据" : "No data to display";
            t.html('<div class="chart-error"><p>' + n + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
        }

        function n(t) {
            var n = t.data.y[0] && t.data.y[0].data, a = [], r = e.language || "zh";
            n && n.forEach(function (e, i) {
                if ("" == e || e <= 0) {
                    for (var n = t.data.x[0].data[i], r = t._formatXAxisLabel(n, 0, !0), o = 1; o < t.data.x.length; o++) r += "-" + t._formatXAxisLabel(t.data.x[o].data[i], o, !0);
                    a.push(r)
                }
            }), t.once("load", function () {
                if (t.data.x[0].data.length == a.length && i(t.$elem), a.length && "edit" === t.mode) {
                    var e = "";
                    e = "zh" === r ? "有" + a.length + "项负值或空值数据" : "There are " + a.length + " negative or null values.";
                    var n = '<div class="map-mismatch-text pa guide"><p><a class="cursor-pointer">' + e + '</a></p><div class="guide-tip dropdown-wrap">' + bdp.utils.encodeHTML(a.join("、")) + "</div></div>";
                    t.$elem.append(n)
                }
            })
        }

        function a(t) {
            for (var i = {}, n = [], a = t.data.x, c = t.data.y[0] && t.data.y[0].data, d = r(t) || e.getColorsByType(l.TreeMap), u = 0, p = 1, f = 0; f < (c && c.length || a[0].data.length); f++) for (var h = i, g = 0; g < a.length; g++) {
                var m = a[g].data[f], v = t._formatXAxisLabel(m, g);
                h[v] || (h[v] = {name: v}, 0 === g && (h[v].color = d[m] && d[m].color || d[u % d.length], u++), g === a.length - 1 ? h[v].value = c ? +c[f] : 1 : (h[v].children = {}, h[v].id = "" + p++)), h = h[v].children
            }
            o(i, function (e, t) {
                var i = {};
                i.name = e.name, s(e, i, "id"), s(e, i, "color"), s(e, i, "value"), t && (i.parent = t.id), n.push(i)
            }), t.options.series = [{
                turboThreshold: 0,
                isBDP: !0,
                isMobileMode: t.isMobileMode,
                data: n,
                animation: !1,
                borderColor: "default" === t.theme ? "#fff" : "#292D47",
                dataLabels: {allowOverlap: t.info.show_all_datalabels, enabled: t.info.show_datalabels}
            }]
        }

        function r(t) {
            var i = [], n = t.data.x, a = t.info, r = a.color_setting, o = {}, s = e.getColorsByType(l.TreeMap),
                c = s.length;
            return n[0].data.forEach(function (e, t) {
                "" !== e && ["(空白)", "(Blank)"].indexOf(e) < 0 && i.indexOf(e) < 0 && i.push(null === e ? null : e.toString())
            }), r.enum_color_map ? o = r.enum_color_map : i.forEach(function (e, t) {
                "" !== e && ["(空白)", "(Blank)"].indexOf(e) < 0 && (o[e] = {name: e, color: s[t % c]})
            }), o
        }

        function o(e, t, i) {
            for (var n in e) t(e[n], i), e[n].children && o(e[n].children, t, e[n])
        }

        function s(e, t, i) {
            void 0 !== e[i] && (t[i] = e[i])
        }

        var l = e.ChartType;
        e.setTreemapSpecialOption = function (e) {
            a(e), n(e), t(e)
        }
    }(bdpChart)
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e(e) {
            function t(e, t, a) {
                var r = null, o = $("#" + i);
                o.length > 0 ? (o.text(e), o.show()) : (r = n("div", e, i), r.setAttribute("id", i), $(document.body).append(r), o = $("#" + i));
                var s = o.outerWidth(), l = o.height();
                $("#" + i).css({top: t.top - l - 25 + "px", left: t.left + a / 2 - s / 2})
            }

            var i = "tbTipBox", a = "";
            e.find("span").hover(function () {
                if (a = $(this).attr("description")) {
                    var e = $(this);
                    t(a, e.offset(), e.outerWidth())
                }
            }, function () {
                $("#" + i).hide()
            })
        }

        function t(e) {
            function t(e, t, a) {
                var r = null, o = $("#" + i);
                o.length > 0 ? (o.attr("src", e), o.show()) : (r = n("img", "", "table-data-show-type-img"), r.setAttribute("id", i), r.setAttribute("src", e), $(document.body).append(r), o = $("#" + i));
                var s = (o.outerWidth(), o.height());
                $("#" + i).css({top: t.top - s / 2 + "px", left: t.left + a + 5})
            }

            var i = "J_data_show_type_img";
            e.find(".J-hz-table-show-img").off("mouseenter mouseleave").on({
                mouseenter: function () {
                    var e = $(this).attr("data-src");
                    if (e) {
                        var i = $(this);
                        t(e, i.offset(), i.outerWidth())
                    }
                }, mouseleave: function () {
                    $("#" + i).hide()
                }
            }), $("#" + i).hide()
        }

        function i(e) {
            for (var t = 0, i = e.length; t < i; t++) if (1 === Number(e[t])) return !0;
            return !1
        }

        function n(e, t, i) {
            var n = document.createElement(e);
            if (t) {
                var a = document.createTextNode(t);
                n.appendChild(a)
            }
            return i && (n.className = i), n
        }

        var r = {}, o = {}, s = {}, l = {};
        $.fn.scrollEnd = function (e, t, i) {
            $(this).scroll(function () {
                var n = $(this);
                n.data("scrollTimeout") && clearTimeout(n.data("scrollTimeout")), n.data("scrollTimeout", setTimeout(function () {
                    e.call(n)
                }, t)), i.attr("data-scrolling", "true")
            })
        };
        var c = {center: " text-center", left: " text-left", right: " text-right"};
        bdpChart.setTableSpecialOption = function (d, u) {
            function p(e) {
                var t = 0;
                return e.x.length ? t = e.x[0].data.length : e.y.length ? t = e.y[0].data.length : e.y_optional.length && (t = e.y_optional[0].data.length), t
            }

            function f(e) {
                var t = e.find(".fht-fixed-column .fht-thead"), i = e.find(".fht-thead .hz-table-header"),
                    n = e.find(".fht-tbody .hz-table-header"), a = n.find("tr"), r = a.eq(0).find("th"),
                    o = a.last().find("th"), s = t.clone(), l = i.clone(), c = n.clone(), d = c.find("tr"),
                    u = l.find("tr:first").find("th"), p = l.find("tr:last").find("th"),
                    f = s.find("tr:first").find("th"), h = s.find("tr:last").find("th"), g = 0;
                d.eq(0).find("th").each(function (e) {
                    g = r.eq(e).width() + 1, u.eq(e).find(".fht-cell").css({width: g}), f.eq(e).find(".fht-cell").css({width: g})
                }), d.last().find("th").each(function (e) {
                    g = o.eq(e).width() + 1, $(this).append($('<div class="fht-cell" style="width:' + g + 'px;"></div>')), p.eq(e).append($('<div class="fht-cell" style="width:' + g + 'px;"></div>')), h.eq(e).append($('<div class="fht-cell" style="width:' + g + 'px;"></div>'))
                }), t[0] && (t[0] = bdp.utils.replaceHtml(t[0], s.html())), i[0] && (i[0] = bdp.utils.replaceHtml(i[0], l.html())), n[0] && (n[0] = bdp.utils.replaceHtml(n[0], c.html()))
            }

            var h, g, m, v, y, b = d.$elem, _ = "default", w = d.info.chart_id, x = d.info.tb_flip, C = !1,
                k = d.info.tb_pinned_index || 0, S = void 0 === d.info.tb_merge_cell || d.info.tb_merge_cell,
                T = "bottom", D = "right", L = bdpChart.language || "zh",
                A = "zh" === L ? "当前图表无数据" : "No data to display";
            if (u && u.length > 0) {
                var E = null;
                angular.forEach(u, function (e, t) {
                    e.ctId == w && (E = e.pointData)
                }), d.pointData = E
            }
            "zh" == L ? (h = "加载更多...", g = "表格数据超过100条不支持行列转置", m = "总计", v = "小计", y = "行总计") : (h = "Load more...", g = "Table data more than 100 do not support transpose", m = "Summary", v = "Subtotal", y = "Row Summary");
            var I = d.info;
            I.tb_statistic && (!I.tb_statistic.col_pos && (I.tb_statistic.col_pos = "bottom"), T = I.tb_statistic.col_pos, !I.tb_statistic.row_pos && (I.tb_statistic.row_pos = D), D = I.tb_statistic.row_pos), $(".table-flip").off().on("click", function () {
                if (p(d.data) > 100) return alert(g), !1;
                window.bdpa && bdpa.track("track_table_flip", {table_flip: 1}), d.emit("saveWithOpt", d.info.drill_level, {tb_flip: !x})
            });
            var F = {
                compareLevel: 1, getRowHeight: function () {
                    return 35
                }, init: function () {
                    var e = d.data.x.length;
                    if (b.html(""), F.totalData = p(d.data), F.linkInfo = d.optional && d.optional.link_info, F.jumpInfo = d.optional && d.optional.chart_jump_info, F.pointData = d.pointData || new Array(e), F.dimensionsName = d.dimensionsName || new Array(e), d.pointData = F.pointData, 0 === F.totalData) return void b.append('<div class="chart-error"><p class="no-data" style="font-size: 12px; font-weight: bold; color: #60606a;">' + A + "</p></div>");
                    var t;
                    if (t = "fullscreen" === d.mode ? $('<div class="chart-table"><table class="hz-table"><thead class="hz-table-header"></thead><tbody class="hz-table-body"></tbody></table></div>') : $('<table class="hz-table"><thead class="hz-table-header"></thead><tbody class="hz-table-body"></tbody></table>'), b.append(t), b.find(".hz-table-header")[0].appendChild(F.initHead()), b.find(".hz-table-body").append(F.initBody("y")), b.find(".hz-table-body").append(F.initBody("y_optional")), F.addId = (b[0].className.split(" ")[1] + d.ct_id).toUpperCase(), b.find(".hz-table").attr("id", F.addId), C || "edit" == d.mode || "fullscreen" == d.mode || "chartTpl" == d.mode) F.fixHeader(); else {
                        var i = $("#" + F.addId), n = i.parents(".J_item_chart");
                        i.wrap('<div style="width:100%; height: 100%; overflow: hidden"></div>'), i.wrap('<div class="no-fix-header J_no_fix"></div>'), i.css({width: "100%"}), n.hasClass("noscroll") || n.addClass("noscroll").removeClass("toggle-scroll")
                    }
                    F.mergeCell(), b.find(".fht-empty-cell").addClass("hidden"), F.bindEvents(d)
                }, initHead: function () {
                    var e, t, i, a, r = d.data, o = d.info, s = r.x || [], l = F.linkInfo, u = [], p = F.jumpInfo;
                    l && l.length > 0 && angular.forEach(l[0].field_map, function (e) {
                        u.push(e.index)
                    }), r.y.length ? r.y[0].name == y && r.y[1].compare_names ? F.compareLevel = r.y[1].compare_names.length : r.y[0].compare_names && (F.compareLevel = r.y[0].compare_names.length || F.compareLevel) : r.y_optional.length && r.y_optional[0].compare_names && (F.compareLevel = r.y_optional[0].compare_names.length), F.compareLevel = F.compareLevel || 1;
                    for (var f = document.createDocumentFragment(), h = 0; h < s.length; h++) {
                        t = s[h].data_type;
                        for (var g, m, v, b, _ = (o.xAxis[h].granularity, o.xAxis[h].granularity_name, o.xAxis[h].month_start_day, document.createElement("tr", "", i)), w = /^(http:|https:|ftp:)[\S]+\.(jpg|jpeg|bmp|gif|png)$/i, x = 0; x < F.compareLevel; x++) {
                            var C = s[h].name;
                            g = n("th", "", "th"), m = n("div", "", "td-wrap"), v = o.xAxis[h] ? o.xAxis[h].description : void 0;
                            var k = n("span", s[h].nick_name || C, "");
                            v && (k.setAttribute("description", v), k.className += " description"), m.appendChild(k), g.appendChild(m), _.appendChild(g)
                        }
                        o.tb_statistic.col && "top" === T && this.drawColSummary(_, h);
                        for (var S = 0; S < s[h].data.length; S++) {
                            if (e = s[h].data[S], a = o.xAxis[h].alignment_method ? o.xAxis[h].alignment_method : "right", i = c[a], null === e || "" === e) g = n("th", "", i), m = n("div", "", "td-wrap"); else {
                                if (b = "date" === t ? O.handleXaxisDate(e, o.xAxis[h]) : e, o.is_drill && s[h].fid === o.level_fields[o.drill_level].fid) {
                                    g = n("th", "", i), m = n("div", "", "td-wrap");
                                    var D = "";
                                    if ("string" == t && "img" == o.xAxis[h].data_show_type && w.test(b)) {
                                        D = n("img", "", "cursor-pointer chart-table-type-img J-hz-table-show-img drilldown"), D.setAttribute("src", b), D.setAttribute("data-src", b), D.setAttribute("data-drill-value", e), D.setAttribute("data-text", b);
                                        var L = n("i", b, "chart-table-type-img J-hz-table-show-img hidden");
                                        L.setAttribute("data-src", b), L.setAttribute("data-text", b), L.appendChild(D)
                                    } else D = n("a", b, "drilldown"), D.setAttribute("data-drill-value", e);
                                    m.appendChild(D), g.appendChild(m)
                                } else {
                                    g = n("th", "", i);
                                    var A = n("div", "", "td-wrap");
                                    if ("string" == t && "img" == o.xAxis[h].data_show_type && w.test(b)) {
                                        var E = n("img", "", "chart-table-type-img J-hz-table-show-img");
                                        E.setAttribute("src", b), E.setAttribute("data-src", b), E.setAttribute("data-text", b), A.appendChild(E);
                                        var L = n("i", b, "chart-table-type-img J-hz-table-show-img hidden");
                                        L.setAttribute("data-src", b), L.setAttribute("data-text", b), A.appendChild(L)
                                    } else if ($.inArray(h, u) > -1) {
                                        var I = "td-wrap point-status J-link" + h;
                                        e == F.pointData[h] && (I += " cur-link-item"), A = n("div", b, I), A.setAttribute("data-current", e)
                                    } else if (p && p.fid && p.f_index == h) {
                                        var I = "td-wrap point-status J-jump";
                                        A = n("div", b, I), A.setAttribute("data-current", e)
                                    } else A = n("div", b, "td-wrap");
                                    g.appendChild(A)
                                }
                                if (!("http://" !== e.toString().substr(0, 7) && "https://" !== e.toString().substr(0, 8) || "string" == t && "img" == o.xAxis[h].data_show_type && w.test(b))) {
                                    var M = document.createTextNode("  "), N = n("a"), j = n("span", e, "");
                                    g = n("th", ""), m = n("div", "", "td-wrap"), N.setAttribute("href", e), N.setAttribute("target", "_blank"), N.appendChild(n("i", "", "bdp-icon ico-href")), m.appendChild(M), m.appendChild(j), m.appendChild(N), g.appendChild(m)
                                }
                            }
                            _.appendChild(g)
                        }
                        o.tb_statistic.col && "bottom" === T && this.drawColSummary(_, h), f.appendChild(_)
                    }
                    return f
                }, drawColSummary: function (e, t) {
                    var i, a, r = d.info;
                    if (0 === t) {
                        i = n("th", "", "th"), a = n("div", m, "td-wrap"), i.appendChild(a);
                        var o = F.compareLevel;
                        o = Math.max(o, r.xAxis.length), i.setAttribute("rowspan", o)
                    } else i = n("th", "", "hidden"), a = n("div", m, "td-wrap"), i.appendChild(a);
                    e.appendChild(i)
                }, initBody: function (e) {
                    var t, a, r, o, s, l, u = d.data, p = d.info, f = u[e] || [], h = p.warn, g = [], m = !1, v = {},
                        b = document.createDocumentFragment();
                    if (!p.drill_level && 1 === h && p.warn_info.length && d.info.compare_axis.length > 0) {
                        var _ = d.data[e];
                        angular.forEach(_, function (e) {
                            e.hasOwnProperty("warn_data") && i(e.warn_data) && (v[e.uniq_id] = !0)
                        })
                    }
                    for (var w = 0; w < f.length; w++) {
                        var x = f[w];
                        r = x.formatter, o = x.aggregator, t = x.compare_names || [x.nick_name || x.name];
                        var C = "";
                        u[e][w].hasOwnProperty("unit_adv") && u[e][w].unit_adv && (C = "(" + u[e][w].unit_adv + ")");
                        var k, S, D = document.createElement("tr"), L = n("i", "", "warn-label-left");
                        if (m = !1, !p.drill_level && 1 === h && p.warn_info.length) {
                            var x = d.data[e][w];
                            g = x, x.hasOwnProperty("warn_data") && (m = i(x.warn_data))
                        }
                        for (var A = 0; A < t.length; A++) {
                            if (A > 0 && (C = ""), "virtual" === x.data_type && 1 === t.length) k = n("td", "", "th"), S = n("div", t[0], "td-wrap"), k.appendChild(S), k.setAttribute("colspan", F.compareLevel); else {
                                k = n("td", void 0, "th"), S = n("div", "", "td-wrap"), 0 === A && v[u[e][w].uniq_id] ? S.appendChild(L.cloneNode()) : g && g.fid === u[e][w].fid && m && S.appendChild(L.cloneNode());
                                var E = n("span", t[A] + C);
                                if (0 === A || void 0 == t.length && x.name == y) {
                                    var $ = x.description;
                                    $ && (E.setAttribute("description", $), E.className += " description")
                                }
                                S.appendChild(E), k.appendChild(S)
                            }
                            D.appendChild(k)
                        }
                        p.tb_statistic.col && "top" === T && this.drawColSummaryData(D, x.col_summary, o, r, l);
                        for (var I = 0; I < x.data.length; I++) {
                            s = u.y[w] && u.y[w].alignment_method ? u[[e]][w].alignment_method : "right", "left" === p.tb_statistic.row_pos && "true" === p.tb_statistic.row && p[e][w].alignment_method ? u[e][0].alignment_method = p.tb_statistic.row_setting.alignment_method : "right" === p.tb_statistic.row_pos && "true" === p.tb_statistic.row && p[e][w].alignment_method && (u[e][length - 1].alignment_method = p.tb_statistic.row_setting.alignment_method), l = c[s], a = x.data[I];
                            var E, O = x.cell_styles ? x.cell_styles[I] : null, M = !1;
                            1 === h && x.hasOwnProperty("warn_data") && angular.forEach(x.warn_data, function (e) {
                                1 === e && (M = !0)
                            }), null !== a && !p.drill_level && M ? (k = n("td", "", 1 === h && 1 === x.warn_data[I] ? "cr" : l), S = n("div", "", "td-wrap"), E = n("span", bdpChart.helper.dataLabelFormatter(r, x.data[I], o))) : (k = n("td", "", l), S = n("div", "", "td-wrap"), null === a || "" === a ? E = n("span", "--") : (E = n("span", bdpChart.helper.dataLabelFormatter(r, x.data[I], o)), O && O.hasOwnProperty("color") && (k.style.color = O.color), O && O.hasOwnProperty("backgroundColor") && (k.style.backgroundColor = O.backgroundColor))), S.appendChild(E), k.appendChild(S), D.appendChild(k)
                        }
                        p.tb_statistic.col && "bottom" === T && this.drawColSummaryData(D, x.col_summary, o, r, l), b.appendChild(D)
                    }
                    return b
                }, drawColSummaryData: function (e, t, i, a, r) {
                    var o = null === t ? "--" : bdpChart.helper.dataLabelFormatter(a, t, i), s = n("span", o),
                        l = n("td", void 0, "th"), c = n("div", "", "td-wrap " + r);
                    c.appendChild(s), l.appendChild(c), e.appendChild(l)
                }, mergeCell: function () {
                    var e, t = this.getRowHeight(), i = O.data.info.compare_axis.length,
                        n = b.find(".fht-fixed-column .fht-thead"), a = b.find(".fht-fixed-column .fht-tbody"),
                        r = b.find(".hz-table-body");
                    e = F.pinnedIndex > 0 ? b.find(".fht-fixed-body .fht-thead .hz-table-header") : b.find(".fht-thead .hz-table-header");
                    var o = (a.clone(), r.clone());
                    e.clone(), n.clone();
                    if (i > 0) {
                        for (var s = 0; s < F.compareLevel - 1; s++) o.mergeCol(s, t);
                        r[0] && (r[0] = bdp.utils.replaceHtml(r[0], o.html()))
                    }
                }, fixHeader: function () {
                    var e = {borderCollapse: !1, fixedColumn: !1};
                    if ("fullscreen" === d.mode) {
                        var t = $("#" + F.addId);
                        t.fixedHeaderTable("destroy"), t.fixedHeaderTable(e)
                    } else (C || "edit" == d.mode || "fullscreen" == d.mode) && b.find(".hz-table").fixedHeaderTable(e);
                    F.hoverDesc(), (F.compareLevel > 1 || d.data.x.length > 1) && f(b)
                }, hoverDesc: function () {
                    e(b)
                }, handleLink: function (e, t, i, n, a) {
                    for (var r = (F.linkInfo, t.attr("data-current")), o = b.find("." + i), s = 0, l = o.length; s < l; s++) {
                        var c = $(o[s]);
                        c.attr("data-current") == r ? c.hasClass("cur-link-item") ? (c.removeClass("cur-link-item"), delete F.pointData[n]) : (c.addClass("cur-link-item"), F.pointData[n] = r) : c.removeClass("cur-link-item")
                    }
                    e.pointData = F.pointData, e.emit("refreshLinkedCharts", a, e)
                }, handleJump: function (e) {
                    d.emit("jumpToOtherDash", e, d)
                }, bindEvents: function () {
                    b.off().on("click", function (e) {
                        C || (C = !0, F.init(), b.parents(".item-chart").removeClass("noscroll").addClass("toggle-scroll"));
                        var t = e.target;
                        t.className.indexOf("drilldown") > -1 && d.emit("drilldown", t, d);
                        var i = $(t), n = i[0] && i[0].className.match(/J-link(\d+)/);
                        if (n) {
                            var a = n && n[0], r = n && n[1];
                            F.handleLink(d, i, a, r, e)
                        }
                        i.hasClass("J-jump") && F.handleJump(i.attr("data-current"))
                    }), F.hoverDesc(), t(b)
                }
            }, O = {
                data: d,
                pageNum: 1,
                perPageNum: 50,
                compareLevel: 1,
                isPinned: !!k,
                pinnedIndex: k,
                scrollXNum: 0,
                destroy: function () {
                    l = {}, b.html("")
                },
                getRowHeight: function () {
                    return 35
                },
                sort: function (e) {
                    var t, i = e[0] && e[0].className, n = e.data("axis"), r = e.data("fid"), o = e.data("uniq-id"),
                        s = "";
                    switch (/(?:^|\s*)(desc|asc)(?:\s*|$)/.test(i) && (s = RegExp.$1), s) {
                        case"desc":
                            t = "asc";
                            break;
                        case"asc":
                            t = "";
                            break;
                        default:
                            t = "desc"
                    }
                    var l = {axis: "y_optional" == n ? "y" : n, type: t, fid: r, uniq_id: o, col_index: e.index()};
                    if (o && (l.uniq_id = o), "edit" === d.mode) {
                        var c = O.data.info.drill_level;
                        d.emit("saveWithOpt", c, {sort: l, is_advanced_sort: 0})
                    } else {
                        var u = {sort: (0, a.default)(l), is_advanced_sort: 0};
                        d.requestData(u).then(function (e) {
                            "0" == e.status ? (O.init(e.result), d.emit("data-loaded")) : errorHandle(e)
                        }), d.emit("dashboard_click_sort")
                    }
                },
                mergeCell: function (e, t) {
                    var i, n = O.data.info, a = O.data.data, r = O.isPinned || o[w], s = this.getRowHeight(),
                        l = O.data.info.compare_axis.length, c = b.find(".fht-fixed-column .fht-thead"),
                        u = b.find(".fht-fixed-column .fht-tbody"), p = b.find(".hz-table-body"), f = n.x.length,
                        h = n.tb_statistic, g = a.x.length + a.y.length;
                    h && h.row && "right" === h.row_pos && g--, i = t ? b.find(".hz-table .hz-table-header") : O.pinnedIndex > 0 && r ? b.find(".fht-fixed-body .fht-thead .hz-table-header") : b.find(".fht-thead .hz-table-header");
                    var m = u.clone(), v = p.clone(), y = i.clone(), _ = c.clone();
                    if (S) for (var x = 0; x < e - 1; x++) m.mergeCol(x, s), (O.pinnedIndex < 1 || !r || r && O.pinnedIndex < e - 1 || t) && v.mergeCol(x, s);
                    u[0] && (u[0] = bdp.utils.replaceHtml(u[0], m.html())), p[0] && (p[0] = bdp.utils.replaceHtml(p[0], v.html()));
                    var C = function (e) {
                        for (var t, i = "fullscreen" === d.mode ? 49 * O.compareLevel : 33 * O.compareLevel, n = 0; n < l + 1; n++) t = e.eq(n).find(".th-xaxis"), 0 === n ? t.attr("rowspan", l + 1).height(i + 1) : t.addClass("hidden")
                    };
                    if (l > 0) {
                        for (var k = this.getPinnedIndex(), T = 0; T < l; T++) k < f ? y.mergeRow(T, f, g) : y.mergeRow(T, r ? k : f, g), _.mergeRow(T, f, g, !0);
                        C(_.find("tr")), C(y.find("tr")), i[0] && (i[0] = bdp.utils.replaceHtml(i[0], y.html())), c[0] && (c[0] = bdp.utils.replaceHtml(c[0], _.html()))
                    }
                },
                hoverCell: function () {
                    var e = b.find(".hz-table tbody tr");
                    b.find("td").hover(function () {
                        var t, i, n = $(this), a = n.parent(), r = n.siblings(), o = Number(n.attr("rowspan") || 0),
                            s = 0, l = 0;
                        if (o > 0) if (s = a.index(), l = n.index(), o < Number(n.prev().attr("rowspan") || 0)) for (t = s; t < s + o; t++) {
                            var c = e.eq(t).find("td");
                            for (i = l; i < r.length + 1; i++) c.eq(i).addClass("hover")
                        } else for (t = s; t < s + o; t++) e.eq(t).addClass("hover"); else if ($.each(r, function () {
                            $(this).attr("rowspan") && (l = $(this).index())
                        }), r.length && (l || r.eq(l).attr("rowspan"))) for (i = l + 1; i < r.length + 1; i++) n.parent().find("td").eq(i).addClass("hover"); else a.addClass("hover")
                    }, function () {
                        b.find(".hover").removeClass("hover")
                    })
                },
                initHead: function () {
                    var e = O.data.data, t = O.data.info, i = t.sort, a = t.is_advanced_sort;
                    if (e.y.length) {
                        var r = e.y[0].nick_name;
                        (r === m || !r && e.y[0].name === m) && (e.y[0].nick_name = y, e.y[0].name = y), [y].indexOf(e.y[0].name) > -1 && e.y[1] && e.y[1].compare_names ? O.compareLevel = e.y[1].compare_names.length : e.y[0].compare_names && (O.compareLevel = e.y[0].compare_names.length || O.compareLevel)
                    } else e.y_optional.length && e.y_optional[0].compare_names && (O.compareLevel = e.y_optional[0].compare_names.length);
                    O.compareLevel = O.compareLevel || 1;
                    for (var o, s = document.createDocumentFragment(), l = 0; l < O.compareLevel; l++) {
                        var c, d, u, p, f, h, g = n("tr");
                        if (0 === l) for (var v = 0; v < O.xaxisAmount; v++) _ = e.x[v].uniq_id ? i && "x" === i.axis && i.uniq_id === e.x[v].uniq_id ? i.type : "" : i && "x" === i.axis && i.fid === e.x[v].fid ? i.type : "", _ = _ || "default", o = e.x[v].nick_name || e.x[v].name, c = n("th", void 0, "th-xaxis th table-sort " + _), d = n("div", "", "td-wrap trigger-col-sort"), h = n("span", o, "trigger-col-sort"), f = t.x[v] ? t.x[v].description : void 0, f && (h.setAttribute("description", f), h.className += " description"), c.setAttribute("data-axis", "x"), c.setAttribute("data-fid", e.x[v].fid), c.setAttribute("data-uniq-id", e.x[v].uniq_id), p = n("i", "", "trigger-col-sort bdp-icon ico-" + _ + "-sort-arrow"), 1 == a && (p = n("i", "", "trigger-col-sort bdp-icon")), h.appendChild(p), d.appendChild(h), c.appendChild(d), g.appendChild(c); else for (var w = 0; w < O.xaxisAmount; w++) o = e.x[w].name, c = n("th", "", "th-xaxis th"), d = n("div", "", "td-wrap trigger-col-sort"), u = n("span", o, "trigger-col-sort"), d.appendChild(u), c.appendChild(d), g.appendChild(c);
                        g.appendChild(N("y", O.yaxisAmount, l)), g.appendChild(N("y_optional", O.yaxisOptionalAmount, l)), s.appendChild(g)
                    }
                    b.find(".hz-table-header")[0].appendChild(s)
                },
                initBody: function (e) {
                    var t = O.data.info, i = O.data.data, a = O.linkInfo, r = O.jumpInfo, o = [];
                    a && a.length > 0 && angular.forEach(a[0].field_map, function (e) {
                        o.push(e.index)
                    });
                    var s, l, c, d, u, p = e * O.perPageNum > O.totalData ? O.totalData : e * O.perPageNum,
                        f = document.createDocumentFragment();
                    if (O.xaxisAmount > 0) for (var h = 0, g = i.subtotal, m = 0; m < p; m++) {
                        s = document.createElement("tr");
                        for (var v, y, _, w, x, C = /^(http:|https:|ftp:)[\S]+\.(jpg|jpeg|bmp|gif|png)$/i, k = m + ("top" === T), S = 0; S < O.xaxisAmount; S++) {
                            if (l = t.xAxis[S].data_type, u = t.xAxis[S].alignment_method ? t.xAxis[S].alignment_method : "right", c = i.x[S].data[m], "string" !== l || t.xAxis[S].alignment_method ? t.xAxis[S].alignment_method || (u = "right") : u = "left", "center" === u ? d = "text-center" : "left" === u ? d = "text-left" : "right" === u && (d = "text-right"), _ = n("span"), null === c || "" === c) _.innerHTML = "", x = ""; else {
                                x = O.handleXaxisDate(c, t.xAxis[S]);
                                var w = t.xAxis[S].granularity || "day";
                                "week" === w && (d = "text-left")
                            }
                            if (t.is_drill && t.xAxis[S].fid === t.level_fields[t.drill_level].fid) {
                                var D = "";
                                if ("string" == l && "img" == t.xAxis[S].data_show_type && C.test(x)) {
                                    D = n("img", "", "cursor-pointer chart-table-type-img J-hz-table-show-img drilldown"), D.setAttribute("src", x), D.setAttribute("data-src", x), D.setAttribute("data-drill-value", c), D.setAttribute("data-text", x);
                                    var L = n("i", x, "chart-table-type-img J-hz-table-show-img hidden");
                                    L.setAttribute("data-src", x), L.setAttribute("data-text", x), _.appendChild(L)
                                } else D = n("a", x, "drilldown"), D.setAttribute("data-drill-value", c);
                                _.appendChild(D)
                            } else if ("string" == l && "img" == t.xAxis[S].data_show_type && C.test(x)) {
                                var A = n("img", "", "chart-table-type-img J-hz-table-show-img");
                                A.setAttribute("src", x), A.setAttribute("data-src", x), A.setAttribute("data-text", x), _.appendChild(A);
                                var L = n("i", x, "chart-table-type-img J-hz-table-show-img hidden");
                                L.setAttribute("data-src", x), L.setAttribute("data-text", x), _.appendChild(L)
                            } else _.innerHTML = "" !== x ? bdp.utils.encodeHTML(x) : "";
                            if (c = c || "", !("http://" !== c.toString().substr(0, 7) && "https://" !== c.toString().substr(0, 8) || "string" == l && "img" == t.xAxis[S].data_show_type && C.test(x))) {
                                var E = document.createTextNode("  "), I = n("a");
                                x = c, I.setAttribute("href", c), I.setAttribute("target", "_blank"), I.appendChild(n("i", "", "bdp-icon ico-href")), _.appendChild(E), _.appendChild(I)
                            }
                            if (!t.is_drill && $.inArray(S, o) > -1) {
                                var F = d + " point-status J-link" + S;
                                c == O.pointData[S] && (F += " cur-link-item"), v = n("td", "", F), v.setAttribute("data-current", c)
                            } else if (!t.is_drill && r && r.fid && r.f_index == S) {
                                var F = d + " point-status J-jump";
                                v = n("td", "", F), v.setAttribute("data-current", c)
                            } else v = n("td", "", d);
                            y = n("div", "", "td-wrap"), y.appendChild(_), v.appendChild(y), s.appendChild(v)
                        }
                        s.className += " r" + (h + k);
                        var N = M("y", O.yaxisAmount, m), j = M("y_optional", O.yaxisOptionalAmount, m);
                        if (s.appendChild(N), s.appendChild(j), f.appendChild(s), function (e, i) {
                            return t.tb_statistic.col && t.tb_statistic.subtotal && !$.isEmptyObject(e) && $.isArray(e[i])
                        }(g, m)) for (var P = 0, R = g[m].length; P < R; P++) {
                            var B = g[m][P];
                            h++, O.drawColSubTotal(f, B, "bottom", "r" + (h + k))
                        }
                    } else for (var R = i.y.length && i.y[0].data.length || i.y_optional.length && i.y_optional[0].data.length || 0, z = 0; z < R; z++) s = n("tr"), s.appendChild(M("y", O.yaxisAmount, z)), s.appendChild(M("y_optional", O.yaxisOptionalAmount, z)), f.appendChild(s);
                    t.tb_statistic.col && this.drawColSummary(f, T), b.find(".hz-table-body").append(f)
                },
                mergeSummary: function (e) {
                    b.find(".summary-td").each(function (t, i) {
                        if (O.isPinned) {
                            var n = Math.min(O.xaxisAmount, O.pinnedIndex);
                            e ? 0 === t ? $(this).attr("colspan", O.xaxisAmount) : $(this).addClass("hidden") : 0 === t ? $(this).attr("colspan", n) : t === n ? $(this).attr("colspan", O.xaxisAmount) : $(this).addClass("hidden")
                        } else t % O.xaxisAmount == 0 ? $(this).attr("colspan", O.xaxisAmount) : $(this).addClass("hidden")
                    })
                },
                drawColSubTotal: function (e, t, i, a) {
                    for (var r, o, s, l, d, u, p, f, h = null, g = "subtotal-td-" + a, m = " summary-td-value " + g, y = O.data.data, b = O.data.info, _ = O.xaxisAmount, w = O.yaxisAmount, x = O.isPinned, C = O.pinnedIndex, k = " ", S = n("tr", "", i + " summary bdp-merge-row " + a), T = null, D = "", L = "", A = 0, E = t.length; A < E; A++) {
                        var I = t[A];
                        if (A < _) h = n("td", "", m + k), "[__subtotal__]" === I ? (I = v, T = n("div", I, "td-wrap"), h.appendChild(T), s = A, l = _ - s, d = x && C - s, u = x && C > s && C <= _, u ? $(h).attr("colspan", d) : $(h).attr("colspan", l)) : (I = O.handleXaxisDate(I, b.xAxis[A]), T = n("div", I, "td-wrap"), h.appendChild(T), void 0 !== s && (u ? A == C ? $(h).attr("colspan", _ - C) : (A < C || A > C) && $(h).addClass("hidden") : $(h).addClass("hidden"))), S.appendChild(h); else {
                            var F = A - _, M = A - _ - w, N = {};
                            A >= _ + w ? (f = "y_optional", N = y[f][M]) : (f = "y", N = y[f][F]), p = N.alignment_method ? N.alignment_method : "right", k = c[p], r = N.formatter, o = N.aggregator, $.isArray(I) && (I = I[0]), null === I || "--" == I ? (D = m + k, L = "" == N.statistic_method ? "" : "--") : (L = "" == N.statistic_method ? "" : bdpChart.helper.dataLabelFormatter(r, I, o), D = k), h = n("td", "", D), T = n("div", L, "td-wrap"), h.appendChild(T), S.appendChild(h)
                        }
                    }
                    "bottom" === i && e.appendChild(S)
                },
                handleXaxisDate: function (e, t) {
                    var i, n = t.data_type, a = "";
                    if ("date" === n) {
                        a = t.granularity || "day";
                        var r = t.granularity_name || "", o = t.month_start_day || 0;
                        "hour" !== a && "minute" !== a && "second" !== a || (a = "g_" + a), "week" === a && (o = t.week_start_day_of_week || 1, "text-left"), ["(空白)", "(Blank)"].indexOf(e) > -1 ? i = e : (i = bdpChart.helper.checkGranularity(a, e, r, o), "week" === a && (i += "（" + Highcharts.dateFormat("%b/%e", new Date(e)) + "~" + Highcharts.dateFormat("%b/%e", new Date(e + 5184e5)) + "）"))
                    } else "sub_date" == n ? (a = t.fid.split("_")[1], i = bdpChart.helper.subDateFormat(a, e)) : i = e;
                    return i = i ? i.toString() : ""
                },
                drawColSummary: function (e, t) {
                    if (O.xaxisAmount) {
                        var i, a, r, o, s, l, d, u, p = O.data.data;
                        O.data.info;
                        i = n("tr", "", "summary bdp-merge-row " + t), "top" === t && (i.className += " r0");
                        for (var f = 0; f < O.xaxisAmount; f++) a = n("td", "", "summary-td summary-td-value text-left"), r = n("div", m, "td-wrap"), a.appendChild(r), i.appendChild(a);
                        for (var h = 0; h < O.yaxisAmount; h++) o = p.y[h].col_summary, s = p.y[h].formatter, l = p.y[h].aggregator, d = p.y[h].alignment_method ? p.y[h].alignment_method : "right", u = c[d], null === o ? (a = n("td", "", u), r = "" == p.y[h].statistic_method ? n("div", "", "td-wrap") : n("div", "--", "td-wrap"), a.appendChild(r)) : (a = n("td", "", u), r = "" == p.y[h].statistic_method ? n("div", "", "td-wrap") : n("div", bdpChart.helper.dataLabelFormatter(s, o, l), "td-wrap"), a.appendChild(r)), i.appendChild(a);
                        for (var g = 0; g < O.yaxisOptionalAmount; g++) o = p.y_optional[g].col_summary, s = p.y_optional[g].formatter, l = p.y_optional[g].aggregator, d = p.y_optional[g].alignment_method ? p.y_optional[g].alignment_method : "right", u = c[d], null === o ? (a = n("td", "", u), r = n("div", "--", "td-wrap"), a.appendChild(r)) : (a = n("td", "", u), r = n("div", bdpChart.helper.dataLabelFormatter(s, o, l), "td-wrap"), a.appendChild(r)), i.appendChild(a);
                        "bottom" === t ? e.appendChild(i) : "top" === t && e.firstChild && e.insertBefore(i, e.firstChild)
                    }
                },
                initLoadMore: function () {
                    O.pageNum * O.perPageNum >= O.totalData || b.find(".load-more").length || b.find(".fht-tbody").append('<button class="load-more J-table-load-more">' + h + "</button>")
                },
                init: function (e, t) {
                    O.destroy(), O.data = e, O.linkInfo = d.optional && d.optional.link_info, O.jumpInfo = d.optional && d.optional.chart_jump_info, O.pageNum = t || 1;
                    var i = e.data;
                    if (O.xaxisAmount = i.x.length, O.yaxisAmount = i.y.length,
                        O.yaxisOptionalAmount = i.y_optional.length, O.pointData = d.pointData || new Array(O.xaxisAmount), d.pointData = O.pointData, O.totalData = i.x[0] && i.x[0].data.length || i.y[0] && i.y[0].data.length || i.y_optional[0] && i.y_optional[0].data.length || 0, 0 === O.totalData) return void b.append('<div class="chart-error"><p class="no-data" style="font-size: 12px; font-weight: bold; color: #60606a;">' + A + "</p></div>");
                    var n;
                    n = "fullscreen" == d.mode ? $('<div class="chart-table"><table class="hz-table"><thead class="hz-table-header"></thead><tbody class="hz-table-body"></tbody></table></div>') : $('<table class="hz-table"><thead class="hz-table-header"></thead><tbody class="hz-table-body"></tbody></table>'), b.append(n), O.initHead(), O.initBody(O.pageNum), O.addId = (b[0].className.split(" ")[1] + w).toUpperCase(), b.find(".hz-table").attr("id", O.addId);
                    if (b.find("th > .td-wrap").prepend('<i class="pin bdp-icon ico-pin-gray"></i>'), "true" == b.attr("data-drill") || "true" == b.attr("data-drill-status") || C || "edit" == d.mode || "fullscreen" == d.mode || "chartTpl" == d.mode || d.mobileSingleChart) O.fixHeader(), O.mergeCell(O.xaxisAmount), this.mergeSummary(); else {
                        var a = $("#" + O.addId), r = a.parents(".J_item_chart");
                        a.wrap('<div style="width:100%; height: 100%; overflow: hidden" class="J_no_fix_wrap"></div>'), a.wrap('<div class="no-fix-header J_no_fix"></div>'), a.css({width: "100%"}), r.hasClass("noscroll") || r.addClass("noscroll").removeClass("toggle-scroll"), O.mergeCell(O.xaxisAmount, !0), this.mergeSummary(!0)
                    }
                    b.find(".fht-empty-cell").addClass("hidden"), this.changePinIcon(), O.initLoadMore(), O.bindEvents($.extend(d, e)), O.scrollToPosition()
                },
                scrollToPosition: function () {
                    for (var e = b.find(".fht-tbody .hz-table-body"), t = 0, i = b.find(".fht-tbody .hz-table .hz-table-body").find("tr"), n = 0; n < (O.pageNum - 1) * O.perPageNum; n++) t += i.eq(n).height();
                    t = t - b.find(".fht-tbody").height() + b.find(".load-more").height(), e.find(".summary").length && (t += e.find(".summary").height()), O.isPinned ? b.find(".fht-fixed-body .fht-tbody").scrollTop(t) : b.find(".fht-tbody").scrollTop(t), O.scrollXNum > 0 && O.pageNum > 1 && b.find(".fht-tbody").scrollLeft(O.scrollXNum)
                },
                getPinnedIndex: function () {
                    var e = r[w] || O.pinnedIndex;
                    return "edit" === d.mode && (e = O.pinnedIndex || s[w]), e
                },
                changePinIcon: function () {
                    var e = O.data.data, t = this.getRowHeight();
                    if (O.isPinned || o[w]) {
                        var i = O.data.info.tb_statistic.row, n = [].concat(e.x, e.y, e.y_optional || []).length,
                            a = e.y.length && e.y[0].fid, r = this.getPinnedIndex(),
                            s = $("#" + O.addId).parents(".chart-table").find(".fht-fixed-column thead"), l = s.clone();
                        l.find("tr").each(function (o, s) {
                            if (i && (r === n && 0 === o || r !== n) || !i || "row_summary" == a) {
                                var l = $(this).find("th"), c = l.last().find(".pin"),
                                    d = $(this).find('[data-fid="row_summary"]').attr("rowspan"),
                                    u = $(l[r - 1]).attr("data-fid");
                                l.height();
                                c.removeClass("ico-pin-gray").addClass("ico-pinned-blue"), 0 == e.x.length && d && "row_summary" == u && "row_summary" == a && l.height((t - 1) * d - 1)
                            }
                        }), s[0] && (s[0] = bdp.utils.replaceHtml(s[0], l.html()))
                    }
                },
                fixHeader: function () {
                    var e = O.isPinned || o[w], t = O.data.data, i = t.x.length + t.y.length + t.y_optional.length,
                        n = r[w] || O.pinnedIndex;
                    n > i && (e = !1), "edit" === d.mode && (n = O.pinnedIndex || s[w], o[w] = !1);
                    var a = e ? {borderCollapse: !1, fixedColumn: !0, fixedColumns: n, $elem: b} : {},
                        l = $("#" + O.addId);
                    if (l.fixedHeaderTable("destroy"), l.fixedHeaderTable(a), O.pageNum * O.perPageNum < O.totalData) {
                        var c = b.find(".fht-fixed-column .fht-tbody");
                        l.parent().append('<button class="load-more J-table-load-more">' + h + "</button>"), c.append('<button class="load-more J-table-load-more"></button>')
                    }
                    if ("edit" === d.mode) {
                        var u = O.data.info.drill_level;
                        O.isPinned || (O.pinnedIndex = 0), d.emit("saveWithOpt", u, {tb_pinned_index: O.pinnedIndex}, {not_need_redraw: !0}), s[w] = O.isPinned ? d.info.tb_pinned_index : 0
                    }
                    O.hoverDesc(), (O.compareLevel > 1 || O.xaxisAmount > 1) && f(b)
                },
                hoverDesc: function () {
                    e(b)
                },
                bindEvents: function (e) {
                    b.off().on("click", function (t) {
                        var i = t.target, n = i.className, a = $(i).closest("td"),
                            s = a[0] && a[0].className.match(/J-link(\d+)/);
                        if (s) {
                            var l = $(i).closest("tr").find("td:first-child"), c = l.find("span:first-child").html(),
                                d = s && s[0], u = s && s[1];
                            O.handleLink(e, a, d, u, c)
                        }
                        if (n.indexOf("load-more") > -1) {
                            var p = b.find(".fht-fixed-body .fht-thead .fht-table");
                            p.length <= 0 && (p = b.find(".fht-thead .fht-table")), O.scrollXNum = p.css("marginLeft").replace(/(px)|-/g, ""), O.pageNum * O.perPageNum < O.totalData ? setTimeout(function () {
                                new Date;
                                O.init(e, ++O.pageNum);
                                new Date
                            }, 100) : $(i).text("数据已经全部加载").fadeOut()
                        } else if (n.indexOf("drilldown") > -1) b.attr("data-drill", "true"), e.emit("drilldown", i, e); else if (n.indexOf("pin") > -1) {
                            O.isPinned = n.indexOf("ico-pinned") < 0, o[w] = O.isPinned;
                            var f = $(i).parents(".td-wrap").parent();
                            O.pinnedIndex = f.index() + +(f.attr("colspan") || 1), r[w] = O.pinnedIndex, b.find(".added-watch-scroll").each(function () {
                                $(this).prev().show(), $(this).remove()
                            });
                            new Date;
                            O.init(e, O.pageNum);
                            var t = new Date
                        } else n.indexOf("table-sort") > -1 ? O.sort($(i)) : n.indexOf("trigger-col-sort") > -1 ? O.sort($(i).parents(".table-sort")) : a[0] && a[0].className.indexOf("J-jump") > -1 && O.handleJump(a.attr("data-current"));
                        C || "edit" == e.mode || "fullscreen" == e.mode || (C = !0, O.init(e, O.pageNum), b.parents(".item-chart").removeClass("noscroll").addClass("toggle-scroll"))
                    }), O.bindFixedEvent(), "fullscreen" === e.mode && O.hoverCell(), ("true" == b.attr("data-drill") || C || "edit" == e.mode || "fullscreen" == e.mode || e.mobileSingleChart) && O.addScrollEvent(e), O.hoverDesc(), t(b)
                },
                bindFixedEvent: function () {
                    var e = d.$elem;
                    if (O.isPinned) {
                        var t = b.find(".fht-fixed-column .fht-tbody"), i = b.find(".fht-fixed-body .fht-tbody");
                        t.bind("scroll", function (n) {
                            e.attr("data-scrolling-fixed", "true"), e.attr("data-scrolling-right", "false"), e && "true" === e.attr("data-scrolling-right") || i.scrollTop(t.scrollTop())
                        })
                    }
                },
                handleLink: function (e, t, i, n, a) {
                    for (var r = (O.linkInfo, t.attr("data-current")), o = b.find("." + i), s = 0, l = o.length; s < l; s++) {
                        var c = $(o[s]);
                        c.attr("data-current") == r ? c.hasClass("cur-link-item") ? (c.removeClass("cur-link-item"), delete O.pointData[n]) : (c.addClass("cur-link-item"), O.pointData[n] = r) : c.removeClass("cur-link-item")
                    }
                    e.pointData = O.pointData, e.emit("refreshLinkedCharts", t, e)
                },
                handleJump: function (e) {
                    O.jumpInfo;
                    d.emit("jumpToOtherDash", e, d)
                },
                addScrollEvent: function (e) {
                    var i, n = b.find(".r0").find("td").last().outerHeight(), a = this.getPinnedIndex();
                    if (b.find(".fht-tbody").length > 1) {
                        var i = b.find(".fht-fixed-column .fht-tbody table");
                        i.css({position: "relative"})
                    }
                    var r = b.find(".hz-table-body"), o = b.find(".summary").hasClass("top");
                    b.find(".fht-tbody").scrollEnd(function () {
                        var s = $(this), l = e.$elem, c = s[0].scrollTop, d = s[0].getBoundingClientRect(),
                            u = s[0].scrollLeft, p = parseInt(c / n, 10), f = "r" + p, h = $(this).find("." + f)[0];
                        l && l.attr("data-scrolling", "false"), l && l.attr("data-scrolling-fixed", "false"), l && l.attr("data-scrolling-right", "false");
                        var g = b.find(".fht-fixed-column .fht-tbody");
                        b.find(".fht-fixed-body .fht-tbody").scrollTop(g.scrollTop());
                        var m, v, y, _, w, x, C, k, S, T = function (i, a, r) {
                            if (v = $(i).next().find(a), y = b.find(a).find(".added-watch-scroll"), y.siblings().find("span").show(), y.remove(), !v.length && (_ = $(i).prevAll().find(a), w = $(i).find(a), _.length || w.length)) {
                                if (_.length && (x = $(_)[_.length - 1]), w.length && (x = $(w)[0]), $(i).next().find("td").eq($(x).index()).is(":visible")) return;
                                if (C = $(x).find("span"), k = x.getBoundingClientRect(), S = $(x).find(".added-watch-scroll"), !$(S).length) {
                                    var s = o ? (Math.floor(c / n) + 1) * n + 6 : Math.ceil(c / n) * n + 6;
                                    $(C).clone().addClass("added-watch-scroll").css({
                                        position: "absolute",
                                        left: k.left - d.left + (r ? u : 0) + 16,
                                        top: s
                                    }).appendTo(x);
                                    var l = e.info.xAxis[D];
                                    (["number", "sub_date"].indexOf(l.data_type) > -1 || "date" === l.data_type && "week" !== l.granularity) && $(C).parent(".td-wrap").next().css({left: k.left - d.left + (r ? u : 0) + k.width - $(C).width() - 16}), $(C).hide(), $(x).find(".J-hz-table-show-img").length > 0 && t($(x))
                                }
                            }
                        };
                        if (i) for (var D = 0; D <= a; D++) {
                            m = i.find($("tr :nth-child(" + (D + 1) + ")").filter(function () {
                                return this.rowSpan > 1
                            }));
                            var L = i.find("tr").eq(p);
                            T(L, m, !1)
                        }
                        for (var D = O.isPinned ? a : 0; D < O.xaxisAmount; D++) m = r.find($("tr :nth-child(" + (D + 1) + ")").filter(function () {
                            return this.rowSpan > 1
                        })), T(h, m, !0)
                    }, 300, b)
                }
            }, M = function (e, t, i) {
                var a, r, o, s, l, d, u = O.data.data, p = O.data.info, f = p.warn, h = "text-right", t = u[e].length,
                    g = document.createDocumentFragment();
                1 === f && p.warn_info.length && p.warn_info.forEach(function (t, i) {
                    (0 === t.axis_type && "y" === e || 1 === t.axis_type && "y_optional" === e) && (l = t)
                });
                for (var m = 0; m < t; m++) {
                    d = u[e][m] && u[e][m].alignment_method ? u[e][m].alignment_method : "right", "left" === p.tb_statistic.row_pos && "true" === p.tb_statistic.row && p[e][m].alignment_method ? u[e][0].alignment_method = p.tb_statistic.row_setting.alignment_method : "right" === p.tb_statistic.row_pos && "true" === p.tb_statistic.row && p[e][m].alignment_method && (u[e][t - 1].alignment_method = p.tb_statistic.row_setting.alignment_method), h = c[d], r = u[e][m].formatter, o = u[e][m].aggregator, a = u[e][m].data[i];
                    var v, y, b, _ = u[e][m].cell_styles ? u[e][m].cell_styles[i] : null, w = !1;
                    u[e][m].hasOwnProperty("warn_data") && angular.forEach(u[e][m].warn_data, function (e) {
                        1 === e && (w = !0)
                    }), null !== a && !p.drill_level && w ? (s = "cr " + h, v = n("td", "", h), b = bdpChart.helper.dataLabelFormatter(r, u[e][m].data[i], o), y = n("div", b, "td-wrap"), 1 == f && 1 == u[e][m].warn_data[i] && (v.className = s)) : null === a ? (v = n("td", "", h), b = "--", y = n("div", b, "td-wrap")) : (v = n("td", "", h), b = bdpChart.helper.dataLabelFormatter(r, u[e][m].data[i], o), y = n("div", b, "td-wrap"), _ && angular.forEach(_, function (e, t) {
                        v.style[t] = e
                    })), v.appendChild(y), g.appendChild(v)
                }
                return g
            }, N = function (e, t, a) {
                var r, o, s, l = O.data.data, c = O.data.info, u = c.sort, p = c.warn, f = [], h = !1,
                    g = document.createDocumentFragment(), m = c.is_advanced_sort,
                    v = c.compare_setting && c.compare_setting.sort.index || 0, t = l[e].length, y = {};
                if (!c.drill_level && 1 === p && c.warn_info.length && O.data.info.compare_axis.length > 0 && 0 === a) {
                    var b = d.data[e];
                    angular.forEach(b, function (e) {
                        e.hasOwnProperty("warn_data") && i(e.warn_data) && (y[e.uniq_id] = !0)
                    })
                }
                for (var w = 0; w < t; w++) {
                    r = "y" === e ? l.x.length + w : l.x.length + l.y.length + w, _ = "default";
                    var x = "y_optional" == e ? "y" == u.axis : e == u.axis,
                        C = defined(u.uniq_id) && u.uniq_id == l[e][w].uniq_id || !defined(u.uniq_id);
                    u && x && u.fid === l[e][w].fid && C && (defined(u.uniq_id) && 0 == a ? _ = u.type : defined(u.col_index) ? _ = u.col_index === r ? u.type : "" : 0 === a && (_ = u.type), _ = _ || "default"), o = l[e][w].compare_names || [l[e][w].nick_name || l[e][w].name], 1 != o.length || "virtual" != l[e][w].data_type && l[e][w].data_type || (s = w, o[a] = o[0]);
                    var k = "";
                    if (l[e][w].hasOwnProperty("unit_adv") && l[e][w].unit_adv && a === v && (k = "(" + l[e][w].unit_adv + ")"), h = !1, !c.drill_level && 1 === p && c.warn_info.length) {
                        var S = d.data[e][w];
                        f = S, S.hasOwnProperty("warn_data") && (h = i(S.warn_data))
                    }
                    var T, D;
                    if (c.yAxisOptional.length && "y_optional" !== e || !c.tb_statistic.row && !c.tb_statistic.number_row || w != s) {
                        T = n("th", "", "th table-sort " + _), T.setAttribute("data-axis", e), T.setAttribute("data-fid", l[e][w].fid), T.setAttribute("data-uniq-id", l[e][w].uniq_id), D = n("div", "", "td-wrap trigger-col-sort"), 0 === a && y[l[e][w].uniq_id] ? D.appendChild(n("i", "", "warn-label-left")) : f && f.fid === l[e][w].fid && h && D.appendChild(n("i", "", "warn-label-left"));
                        var L = n("span", o[a] + k, "trigger-col-sort"),
                            A = n("i", "", "trigger-col-sort bdp-icon ico-" + _ + "-sort-arrow");
                        1 == m && (A = n("i", "", "trigger-col-sort bdp-icon")), L.appendChild(A);
                        var E;
                        a === v && (E = l[e][w] ? l[e][w].description : void 0) && (L.setAttribute("description", E), L.className += " description"), D.appendChild(L), T.appendChild(D)
                    } else {
                        if (w == s) {
                            T = n("th", "", "th table-sort " + _), D = n("div", "", "td-wrap trigger-col-sort");
                            var $ = n("span", o[a] + k, "trigger-col-sort"),
                                A = n("i", "", "trigger-col-sort bdp-icon ico-" + _ + "-sort-arrow");
                            1 == m && (A = n("i", "", "trigger-col-sort bdp-icon")), $.appendChild(A);
                            var E;
                            a === v && (E = l[e][w] ? l[e][w].description : void 0) && ($.setAttribute("description", E), $.className += " description"), D.appendChild($)
                        } else T = n("th", "", "cursor-default th"), D = n("div", "", "td-wrap");
                        T.setAttribute("data-axis", e), T.setAttribute("data-fid", l[e][w].fid), T.setAttribute("data-uniq-id", l[e][w].uniq_id), f && f.fid === l[e][w].fid && h && D.appendChild(n("i", "", "warn-label-left")), 0 !== a ? T.className += " hidden" : T.setAttribute("rowSpan", O.compareLevel), w != s && D.appendChild(document.createTextNode(o[a])), T.appendChild(D)
                    }
                    g.appendChild(T)
                }
                return g
            };
            x ? F.init() : O.init(d)
        }
    }()
}, function (e, t, i) {
    function n(e) {
        var t, i = "", n = e || {};
        return function (e, n, r, o) {
            i = i + '<div class="J-toggle-drill toggle-drill-wrap" style="display:&quot;&quot;;z-index:10000;position:absolute;"' + a.attr("data-info", e, !0, !0) + '><div><a><i class="bdp-icon ico-drill-field-default J-toggle-drill-icon" href="javascript:;" data-action="click-icon"></i></a></div><ul class="dropdown-wrap create-op-list J-toggle-drill-layer hide"><li class="dropdown-item" data-action="toggle"><i class="bdp-icon ico-drill-field-switch"></i><span class="item-text"> ' + a.escape(null == (t = o.toggle) ? "" : t) + ' </span></li><li class="dropdown-item" data-action="drill"><i class="bdp-icon ico-drill-field-drill"></i><span class="item-text"> ' + a.escape(null == (t = o.drill) ? "" : t) + "</span></li>", r && (i = i + '<li class="dropdown-item" data-action="recover"><i class="bdp-icon ico-drill-field-recover"></i><span class="item-text"> ' + a.escape(null == (t = o.recover) ? "" : t) + " </span></li>"), n && (i = i + '<li class="dropdown-item" data-action="delete"><i class="bdp-icon ico-trash"></i><span class="item-text"> ' + a.escape(null == (t = o.delete) ? "" : t) + " </span></li>"), i += "</ul></div>"
        }.call(this, "info" in n ? n.info : "undefined" != typeof info ? info : void 0, "isDrillField" in n ? n.isDrillField : "undefined" != typeof isDrillField ? isDrillField : void 0, "isToggleField" in n ? n.isToggleField : "undefined" != typeof isToggleField ? isToggleField : void 0, "lang" in n ? n.lang : "undefined" != typeof lang ? lang : void 0), i
    }

    var a = i(99);
    e.exports = n
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e, t) {
            var i = (e.info, e.data), n = i.y[t].data[0], a = 0, r = 1,
                o = !$.isEmptyObject(i.gauge_setting) && i.gauge_setting.goal.value, s = "--";
            return n >= 0 && n !== 1 / 0 && n ? (a = n, o ? (r = i.gauge_setting.goal.values ? i.gauge_setting.goal.values[t] : i.gauge_setting.goal.value, r > 0 && r !== 1 / 0 ? s = a / r : r = 0 == n ? 1 : n) : (r = 0 == n ? 1 : n, s = a / r)) : (a = n !== 1 / 0 ? n : 0, o ? (r = i.gauge_setting.goal.values ? i.gauge_setting.goal.values[t] : i.gauge_setting.goal.value) > 0 && r !== 1 / 0 || (r = 1) : r = 1), {
                showNumber: +a,
                tickMaxNumber: +r,
                percentage: s
            }
        }

        function t(e, t, n) {
            var a = e.data.y[t], r = !e.info.tb_conditional_formatting || !e.info.tb_conditional_formatting.length;
            if (a.series_color) return a.series_color;
            if (a.cell_styles && a.cell_styles.length > 0 && a.cell_styles[0]) return a.cell_styles[0].backgroundColor;
            if (r) {
                n.tickMaxNumber;
                return "--" == n.percentage ? i[0] : 0 === n.showNumber ? i[4] : n.showNumber < 0 ? i[0] : i[1]
            }
            return i[0]
        }

        bdpChart.setGaugeSpecialOption = function (i) {
            var n = i.$elem, a = i.info, r = i.data, o = o || 2;
            if (0 == r.y.length) {
                n.find(".solidgauge-title").remove();
                var s = "zh" == bdpChart.language ? "当前图表无数据" : "No data to display";
                return void n.append('<div class="chart-error"><p class="no-data">' + s + "</p></div>")
            }
            n.find(".chart-error").remove();
            var l = {1: "rgba(255,255,255,0.1)", 2: "#E5E5E5"}, c = r.y[0].name;
            $.isEmptyObject(r.gauge_setting) ? $.isEmptyObject(a.gauge_setting) ? a.gauge_setting = {} : c = a.gauge_setting.name || r.y[0].name : c = r.gauge_setting.name || r.y[0].name;
            var d = "";
            $.isEmptyObject(r.gauge_setting) ? $.isEmptyObject(a.gauge_setting) || (d = a.gauge_setting.unit) : d = r.gauge_setting.unit;
            var u = r.y.length, p = Math.min(n.height(), n.width());
            if (u > 0) {
                var f = i._getGridSetting();
                p = Math.min(f.boxWidth, f.boxHeight)
            }
            var h = a.gauge_setting.rateDigit || 0, g = [25, 20, 16, 14, 14], m = "12px", v = .002 * p + .15;
            i.isMobileMode && (v = .8), p < 350 || (p < 400 ? ("22px", m = "14px") : p < 450 ? ("24px", m = "16px") : ("32px", m = "18px"));
            var y = "";
            1 != i.gridHeight && 1 != i.gridWidth || (y = p < 111 ? "position:absolute;top:-6px;left:-40px;" : "margin-top:-6px;");
            var b = [], w = [];
            r.y.forEach(function (n, a) {
                var o = e(i, a), s = o.showNumber, l = o.tickMaxNumber, c = o.percentage, d = t(i, a, o);
                b.push({
                    lineColor: "red",
                    lineWidth: 0,
                    tickWidth: 0,
                    minorTickInterval: null,
                    tickPositioner: function () {
                        return [0, l]
                    },
                    title: {text: ""},
                    min: 0,
                    max: l,
                    stops: [[0, d], [1, d]],
                    labels: {
                        style: {fontSize: m}, y: 24, useHTML: !0, formatter: function () {
                            var e = 0;
                            return r.gauge_setting && r.gauge_setting.goal && void 0 !== r.gauge_setting.goal.digit && (e = r.gauge_setting.goal.digit), this.value ? x(this.value, e) : this.value
                        }
                    }
                }), w.push({
                    name: r.y.length > 0 ? r.y[0].name : "",
                    data: [s],
                    innerRadius: "75%",
                    outerRadius: "100%",
                    dataLabels: {
                        useHTML: !0, formatter: function () {
                            var e, n;
                            "--" === c ? (e = -120, n = "--") : (n = (100 * c).toFixed(h) + "%", e = -120 + Math.floor(240 * c)), e = e > 120 ? 121 : e;
                            var r = t(i, a, o);
                            return '<div class="solidguage-custom" style="transform:scale(' + v + ");-webkit-transform:scale(" + v + ");" + y + '"><span class="solidgauge-percent">' + n + '</span><div class="pa solidgauge-angle" style="background-color:' + r + ";transform:rotate(" + e + "deg);-webkit-transform:rotate(" + e + 'deg)"><span class="solidgauge-angle-arrow" style="border-bottom-color:' + r + '"></span></div></div>'
                        }
                    }
                })
            });
            var x = function (e, t) {
                    var i = {check: "num", num: {}};
                    if (r.gauge_setting && r.gauge_setting.goal) {
                        var n = r.gauge_setting.goal;
                        i.num.unit = n.unit || "", i.num.digit = n.digit || 0, i.num.millesimal = !!_.isUndefined(n.millesimal) || n.millesimal
                    }
                    if (i.num.unit) return bdpChart.helper.dataLabelFormatter(i, e, null);
                    if (e <= 0) return e;
                    var a, o, s = bdpChart.helper.numericSymbols(e, t).toString();
                    return s < 1e3 ? (a = s, o = "") : (a = Number(s.substring(0, s.length - 1)).toFixed(6), o = s.substr(s.length - 1, 1)), (a = Highcharts.numberFormat(a, t, ".", i.num.millesimal ? "," : "")) + o
                }, C = i.options, k = w[0].data[0],
                S = '<div class="solidgauge-title"><p class="unit">' + bdpChart.helper.dataLabelFormatter(r.y[0].formatter, k, r.y[0].aggregator) + d + '</p><p class="title" >' + c + "</p></div>";
            $.extend(!0, C, {
                chart: {type: "solidgauge", style: {overflow: "visible"}},
                title: {text: S, floating: !0, y: 0},
                subtitle: {text: a.title, y: 0, style: {fontSize: "16px"}},
                exporting: {filename: a.title},
                tooltip: {enabled: !1, crosshairs: null},
                legend: {enabled: !1},
                pane: {
                    center: ["50%", "72%"],
                    startAngle: -120,
                    endAngle: 120,
                    size: "90%",
                    background: {
                        backgroundColor: l[o],
                        borderWidth: 0,
                        innerRadius: "75%",
                        outerRadius: "100%",
                        shape: "arc"
                    }
                },
                plotOptions: {
                    solidgauge: {
                        animation: !0,
                        dataLabels: {
                            y: -20,
                            borderWidth: 0,
                            useHTML: !0,
                            style: {fontSize: g[h] + "px"},
                            crop: !1,
                            overflow: "none"
                        }
                    }
                },
                xAxis: {visible: !1},
                yAxis: b,
                series: w
            }), C.series[0].data.splice(1), i.isMobileMode && (C.series = [C.series[0]]), "fullscreen" == i.mode && (C.plotOptions.series.animation = !0), "dark" === i.theme && (C = $.extend(!0, C, {pane: {background: {backgroundColor: "#343752"}}}))
        };
        var i = {0: "#A3ABB0", 1: "#40A276", 2: "#F6CC4E", 3: "#F38000", 4: "#EE4B4B"}
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(171), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        var e = bdpChart.helper;
        e.getFieldDisplayName = function (e, t) {
            var i, n = bdpChart.language || "zh", r = "zh" == n ? (i = {
                SUM: "求和",
                AVERAGE: "平均值",
                AVG: "平均值",
                MIN: "最小值",
                MAX: "最大值",
                COUNT: "计数",
                COUNT_DISTINCT: "去重计数",
                sum: "求和",
                average: "平均值",
                avg: "平均值",
                min: "最小值",
                max: "最大值",
                count: "计数",
                count_distinct: "去重计数",
                YoY: "同比",
                QoQ: "环比",
                TOTAL: "总计",
                MED: "中位数",
                PERCENTILE: "百分位"
            }, (0, a.default)(i, "PERCENTILE", "百分位"), (0, a.default)(i, "PERCENT_5", "百分位5"), (0, a.default)(i, "PERCENT_10", "百分位10"), (0, a.default)(i, "PERCENT_25", "百分位25"), (0, a.default)(i, "PERCENT_50", "百分位50"), (0, a.default)(i, "PERCENT_75", "百分位75"), (0, a.default)(i, "PERCENT_90", "百分位90"), (0, a.default)(i, "PERCENT_95", "百分位95"), i) : {
                SUM: "Sum",
                AVERAGE: "Average",
                MIN: "Minimum",
                MAX: "Maximum",
                COUNT: "Count",
                COUNT_DISTINCT: "Count(Distinct)",
                AVG: "Average",
                sum: "Sum",
                avg: "Average",
                average: "Average",
                min: "Minimum",
                max: "Maximum",
                count: "Count",
                count_distinct: "Count(Distinct)",
                YoY: "",
                QoQ: "环比",
                TOTAL: "Total",
                MED: "Median",
                PERCENTILE: "Percentile",
                PERCENT_5: "5th percentile",
                PERCENT_10: "10th percentile",
                PERCENT_25: "25th percentile",
                PERCENT_50: "50th percentile",
                PERCENT_75: "75th percentile",
                PERCENT_90: "90th percentile",
                PERCENT_95: "95th percentile",
                LAST: "Latest"
            }, o = new RegExp("^(\\d|[1-9]\\d|100)$");
            if ("中位数" == e.aggregator_name || "Median" == e.aggregator_name) t = e.aggregator = "MED", e.percent = "0.5"; else if (o.test(parseInt(e.aggregator_name))) {
                var s = parseInt(e.aggregator_name);
                t = e.aggregator = "PERCENT_" + s, e.percent = String(s / 100)
            }
            if (e.nick_name) return e.nick_name;
            var l = e.name;
            return t && 1 !== !e.is_build_aggregated && r[t] && (l += " (" + r[t] + ")"), l
        }, e.displayNoData = function (e) {
            var t = bdpChart.language || "zh", i = "zh" === t ? "当前图表无数据" : "No data to display";
            return e.html('<div class="chart-error"><p>' + i + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
        }, e.getMapVectorData = function (e) {
            var t, i = e.info, n = {"": "china", 1: "china", 2: "province", 3: "city"}, a = n[i.map.region],
                r = i.map.region_area || {province: "auto", city: "auto"}, o = i.map.granularity;
            if ("china" == a || !e.data.x[0].origin_code && "auto" == r[a]) "district" == o && (o = "city"), t = "china_" + o; else {
                var s = r[a];
                "auto" == s && (s = e.data.x[0].origin_code), "city" == a ? s = s.slice(0, 4) + "00" : "province" == a && (s = s.slice(0, 2) + "0000"), t = a + "_" + o + "/" + s
            }
            return t
        }
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        var e = JSON.parse(false), t = bdpChart.helper, i = bdpChart.ChartType, n = t.mapPathTree, a = Dalaba.Color,
            r = Dalaba.pack, o = Dalaba.defined, s = Dalaba.isObject;
        bdpChart.setMapAreaSpecialOption = function (l) {
            function c(e, t) {
                angular.forEach(t, function (t) {
                    angular.forEach(t.data, function (t, n) {
                        t.value < k.add(M.mul(.25)) ? t.color = "#DBECF7" : t.value < k.add(M.mul(.5)) ? t.color = "#A6D3F3" : t.value < k.add(M.mul(.75)) ? t.color = "#72AFD9" : t.color = "#5C8EB0", e.getChartType() == i.TextMap && (t.textColor = t.color, h && h.styles && h.styles.map && o(h.styles.map.textColor) && (t.textColor = h.styles.map.textColor), t.color = R.plotOptions.map.nullColor)
                    })
                })
            }

            function d(e, n) {
                var a = e.info, r = a.color_setting;
                if (delete a.color_setting.is_series, !$.isEmptyObject(r)) if (1 != r.mode) {
                    var o = bdpChart.colors[r.theme], s = r.enum_color_map;
                    if (r.field[0].fid == a.xAxis[0].fid) {
                        angular.forEach(n, function (t) {
                            angular.forEach(t.data, function (t, n) {
                                var a = angular.isArray(t) ? t[0] : t["hz-code"];
                                s.hasOwnProperty(a) ? t.color = s[a].color : t.color = o[n % o.length], e.getChartType() == i.TextMap && (t.textColor = t.color, t.color = R.plotOptions.map.nullColor)
                            })
                        }), delete R.colorAxis, R.legend.enabled = !1
                    }
                } else if (1 === r.mode) {
                    delete R.colorAxis;
                    var l = [], c = r.range_color;
                    e.data.colors.map(function (e) {
                        null !== e && l.push(Number(e))
                    });
                    var d = [].concat(l).sort(function (e, t) {
                        return e - t
                    }), u = d[0] || 0, p = d[d.length - 1] || 0;
                    !c.disable_max && c.max && (p = c.max), !c.disable_min && c.min && (u = c.min);
                    var f = t.linearRangeColor(c.start_color, c.end_color), h = t.createLinearScale(c, l), g = [],
                        m = c.step;
                    if (m > 1) {
                        for (E = 0; E < m - 1; E++) g.push(f(E / (m - 1)));
                        g.push(f(1))
                    }
                    angular.forEach(n, function (t) {
                        angular.forEach(t.data, function (t, n) {
                            var a = l[n], r = h(a);
                            if (m) {
                                var o = Math.floor(m * r);
                                o = Math.min(o, m - 1), t.color = g[o]
                            } else t.color = f(r);
                            e.getChartType() == i.TextMap && (t.textColor = t.color, t.color = R.plotOptions.map.nullColor)
                        })
                    }), $.extend(!0, R.legend, {
                        symbolWidth: 0, symbolHeight: 0, labelFormatter: function () {
                            var e = bdpChart.helper.createLinearGradientCss(c.start_color, c.end_color, c.step),
                                i = t.escapeHtml(t.getFieldDisplayName(r.field[0], r.aggregator));
                            return '<div class="map-legend-row"><span class="map-legend-text-left">' + bdpChart.helper.numericSymbols(u) + '</span><span class="map-legend-text-right">' + bdpChart.helper.numericSymbols(p) + '</span></div><div class="color-linear-gradient map-legend" style="' + e + '"></div><div class="map-legend-name" title="' + i + '">' + i + "</div>"
                        }
                    })
                }
            }

            function u(e, t) {
                if (!$.isEmptyObject(e.info.bubble_setting)) {
                    var i, n, a, r, o;
                    !function () {
                        var s = function (e, t, i) {
                            if (e = Number(e), isNaN(e)) return 1;
                            var n, a = t.length, r = a - 1;
                            for (n = 0, a = t.length; n < a; n++) {
                                var o = t[n];
                                if (e < o[0]) {
                                    r = n;
                                    break
                                }
                                if (o[0] <= e && e < o[1]) {
                                    r = n;
                                    break
                                }
                            }
                            return i ? a - r : r + 1
                        };
                        i = e.data.bubble_sizes, n = e.data.bubble_size_groups, a = e.info.bubble_setting.reverse, r = e.info.bubble_setting.size_range, o = d3.scale.linear().domain([1, n.length]).range(r.map(function (e) {
                            return 1.2 * (e + 9)
                        })), t.forEach(function (e) {
                            e.data.forEach(function (e, t) {
                                e.size = o(s(i[t], n, a))
                            })
                        })
                    }()
                }
            }

            function p(e, t) {
                if (!$.isEmptyObject(t) && Dalaba.defined(t)) {
                    var i = t.map || {}, n = (i.splitLine, i.border || {}), a = i.shadow || {},
                        o = r("number", n.width);
                    e.borderWidth = o, e.borderColor = n.color, e.shadowColor = a.color, e.shadowOffsetX = a.x, e.shadowOffsetY = a.y, e.shadowBlur = r("number", a.blur) + Math.max(1, r("number", a.spread) >>> 0), e.shadowFillColor = i.background
                }
            }

            function f(e, t) {
                if (!$.isEmptyObject(t) && Dalaba.defined(t)) {
                    var i = t.map || {}, n = i.splitLine || {}, a = r("number", n.width);
                    e.fillColor = R.plotOptions.map.nullColor = i.background, e.borderColor = a <= 0 ? n.background : n.color, e.borderWidth = a
                }
            }

            var h = l.info, g = h.styles, m = t.filterNullVal(l.data),
                v = (!l.dash_setting || l.dash_setting.show_legend, l.getChartType());
            if (o(g) && "edit" !== l.mode || (h.styles = g = {}), !m.x[0].data.length && !m.x[0].mismatch.length) return t.displayNoData(l.$elem);
            var y = t.getMapVectorData(l);
            l.chartMapInstance && l.chartMapInstance.destroy();
            var b = [], _ = m.x[0].data.length, w = t.getEdgeValueFromMultiArray(m, "y", "max") || 0,
                x = t.getEdgeValueFromMultiArray(m, "y", "min") || 0, C = 0, k = 0;
            _ && (C = t.formatMapNum(w, 4, w > 0 ? "ceil" : "floor"), k = t.formatMapNum(x, 4, x > 0 ? "floor" : "ceil"));
            var S = bdpChart.helper.numericSymbols(C), T = bdpChart.helper.numericSymbols(k),
                D = S.toString().substr(S.toString().length - 1, 1),
                L = T.toString().substr(T.toString().length - 1, 1);
            if (D == L && (Math.abs(C) > 1e3 || Math.abs(k) > 1e3)) {
                S = t.formatMapNum(S.toString().substr(0, S.length - 1), 4, w > 0 ? "ceil" : "floor"), T = t.formatMapNum(T.toString().substr(0, T.length - 1), 4, x > 0 ? "floor" : "ceil");
                for (var A = ["", "K", "M", "B", "T", "P", "E"], E = 0; E < A.length && A[E] !== L; E++) ;
                C = S * Math.pow(10, 3 * E), k = T * Math.pow(10, 3 * E)
            }
            for (var I, F, O, M = C.sub(k), N = isInteger(C.mul(.25)) ? 0 : C.mul(.25).toString().split(".")[1].length, E = 0; E < _; E++) I = m.x[0].data[E], F = m.y[0].data[E], O = {
                "hz-code": I,
                name: I,
                value: Number(F)
            }, F >= C.mul(.5) ? O.dataLabels = {
                style: {
                    color: "#fff",
                    textOutline: "none"
                }
            } : O.dataLabels = {
                style: {
                    color: "rgba(0, 0, 0, .6)",
                    textOutline: "none"
                }
            }, h && h.styles && h.styles.map && o(h.styles.map.textColor) && (O.dataLabels.style.color = h.styles.map.textColor), b.push(O);
            var j = "fullscreen" === l.mode && 1 == localStorage.getItem("fs_data_label"),
                P = (l.$elem.get(0).getBoundingClientRect(), function () {
                    var e, t = [];
                    if (void 0 !== this.point.value && null !== this.point.value && (e = bdpChart.helper.dataLabelFormatter(m.y[0].formatter, this.point.value, m.y[0].aggregator)), v == i.TextMap) {
                        var n = h.map.text_symbol && h.map.text_symbol.shape || "circle",
                            a = h.map.text_symbol && h.map.text_symbol.color || "#5182E4";
                        if ("#ccc" === this.point.color && (this.point.textColor = "#5182E4", a = "#5182E4"), e) {
                            t.push('<p class="datalabels-map no-scale" data-index="' + this.point._index + '">'), t.push('<i class="icomoon icomoon-' + n + '" style="vertical-align: middle; color: ' + a + ';"></i>');
                            var r = this.point.name + (h.show_datalabels || j ? '<span class="bdp-datalabels">, ' + e + "</span>" : "");
                            t.push('<span style="vertical-align: middle;cursor: pointer; font-size: ' + (this.point.size || 14) + "px; color: " + this.point.textColor + ';">' + r + "</span>"), t.push("</p>")
                        } else h.show_placenames && (t.push('<p class="datalabels-map text-center" data-index="' + this.point._index + '">'), t.push(this.point.name), t.push("</p>"))
                    } else e && (h.show_datalabels || j) && (t.push('<p class="bdp-datalabels datalabels-map datalabels-map-value text-center">'), t.push(e), t.push("</p>")), (e || h.show_placenames) && (t.push('<p class="datalabels-map text-center">'), t.push(this.point.name), t.push("</p>"));
                    return t.join("")
                }), R = $.extend(!0, l.options, {
                    type: "map",
                    chart: {type: "map", spacing: [15, 15, 10, 15], backgroundColor: null},
                    title: {text: ""},
                    subtitle: {
                        text: h.title,
                        y: 0,
                        style: {
                            fontSize: "fullscreen" === l.mode ? "20px" : "16px",
                            color: "dark" === l.theme ? "#FFFFFF" : "#333333"
                        }
                    },
                    exporting: {filename: h.title},
                    mapNavigation: {enabled: !0, enableButtons: !1, enableDoubleClickZoom: !1, enableMouseWheelZoom: !1},
                    plotOptions: {
                        map: {
                            cursor: h.is_drill || "2" == l.optional.linked_chart_type ? "pointer" : "default",
                            borderColor: "#fff",
                            nullColor: "#E6E8EA",
                            dataLabels: {
                                align: "center",
                                allowOverlap: !1,
                                crop: !0,
                                enabled: v == i.TextMap || !(l.isDashboardMode && (l.$elem.width() < 240 || l.$elem.height() < 220)),
                                style: {color: "#777", fontSize: "14px", textOutline: "none"}
                            },
                            events: {
                                legendItemClick: function () {
                                    return !1
                                }
                            }
                        }
                    },
                    legend: {
                        enabled: !0,
                        align: "left",
                        verticalAlign: "bottom",
                        floating: !0,
                        y: -5,
                        layout: "horizontal",
                        valueDecimals: N,
                        backgroundColor: null,
                        symbolRadius: 0,
                        symbolHeight: 0,
                        symbolWidth: 0,
                        useHTML: !0,
                        itemStyle: {"pointer-events": "none"},
                        labelFormatter: function () {
                            var e, i = h.color_setting.range_color, n = "#DBECF7", r = "#5C8EB0", o = [0, .25, .5, .75, 1],
                                s = "#DBECF7 0%, #DBECF7 25%, #A6D3F3 25%, #A6D3F3 50%, #72AFD9 50%, #72AFD9 75%, #5C8EB0 75%, #5C8EB0 100%",
                                l = "";
                            i && (n = i.start_color, r = i.end_color), e = [n, n, a.lerp([0, 1], [n, r], a.interpolate)(.375).toUpperCase(), a.lerp([0, 1], [n, r], a.interpolate)(.625).toUpperCase(), r], s = o.map(function (t, i) {
                                var n = 100 * t, a = e[i], r = a + " " + l + n + "%";
                                return i && (l = n + "%, " + e[i + 1] + " "), r
                            }).join(", ");
                            var c = "background:-webkit-linear-gradient(left, " + s + ");background:-moz-linear-gradient(left, " + s + ");background:-ms-linear-gradient(left, " + s + ");background:-o-linear-gradient(left, " + s + ");",
                                d = t.escapeHtml(t.getFieldDisplayName(h.yAxis[0], h.yAxis[0].aggregator));
                            return '<div class="map-legend-row"><span class="map-legend-text-left">' + bdpChart.helper.numericSymbols(k) + '</span><span class="map-legend-text-right">' + bdpChart.helper.numericSymbols(C) + '</span></div><div class="color-linear-gradient map-legend" style="' + c + '"></div><div class="map-legend-name" title="' + d + '">' + d + "</div>"
                        }
                    },
                    colorAxis: {enabled: !1},
                    tooltip: {
                        crosshairs: null,
                        shared: !1,
                        borderRadius: 0,
                        boxShadow: "none",
                        border: "none",
                        backgroundColor: "inherit",
                        className: "highcharts-tooltip",
                        formatter: l._generateTooltipFormatter()
                    },
                    credits: {enabled: !1},
                    series: null
                });
            2 === l.gridWidth && (R.legend.enabled = !1), "fullscreen" === l.mode && $.extend(!0, R, {tooltip: {style: {fontSize: "14px"}}}), "dark" === l.theme && $.extend(!0, R, {
                plotOptions: {
                    map: {
                        borderColor: "rgba(0, 0, 0, 0.1)",
                        nullColor: "#343752",
                        dataLabels: {style: {color: "rgba(255, 255, 255,  .4)", textOutline: "none"}}
                    }
                }, tooltip: {backgroundColor: "none", borderWidth: 0, style: {padding: 0}}
            });
            var B = R.plotOptions.map, z = {
                map: {
                    shadow: {color: "rgba(0, 0, 0, 0)", y: 0, spread: 0, x: 0, blur: 0},
                    border: {color: "rgba(0, 0, 0, 0)", width: 0},
                    background: B.fillColor || B.nullColor,
                    splitLine: {color: B.borderColor, width: 1}
                }
            };
            $.isEmptyObject(h.styles) ? h.styles.map = g.map = z.map : s(g.map) || (g.map = z.map), g.defaultStyles = {
                light: z.map,
                dark: z.map
            }, g.defaultStyles = {light: z.map, dark: z.map};
            var H = Dalaba.Chart(l.$elem.get(0), R);
            H.canvas.className = "chart-canvas", l.chartMapInstance = H, function () {
                var t = y.split("/").pop(), a = n[t], r = a.id, o = a.path + r + ".json";
                $.ajax("/static/js/mapData/geoJson/" + o).done(function (t) {
                    if ("edit" !== l.mode) var n = topojson.topology({states: $.extend(!0, {}, t)}),
                        a = Dalaba.geo.mesh(n, n.objects.states, function (e, t) {
                            return e === t
                        });
                    var r = [{
                        data: b,
                        mapData: t,
                        transform: {scale: 1},
                        joinBy: "hz-code",
                        states: {hover: {brightness: v == i.TextMap && "dark" !== l.theme ? -.1 : .1}},
                        dataLabels: {
                            allowOverlap: v == i.TextMap || void 0 === h.show_all_datalabels || h.show_all_datalabels,
                            crop: !(v == i.TextMap || void 0 === h.show_all_datalabels || h.show_all_datalabels),
                            align: v == i.TextMap ? "left" : "center",
                            x: v == i.TextMap ? -10 : 0,
                            useHTML: !0,
                            formatter: P
                        },
                        fillColor: R.plotOptions.map.nullColor,
                        enableMouseTracking: v !== i.TextMap
                    }];
                    "edit" !== l.mode && (r.unshift({
                        mapData: {
                            type: "Feature",
                            geometry: {type: "MultiLineString", coordinates: a.coordinates}
                        },
                        clicked: !1,
                        fillColor: "rgba(255,255,255,0)",
                        joinBy: "hz-code",
                        name: m.y[0].name,
                        transform: {scale: 1},
                        states: {hover: {brightness: v == i.TextMap ? 0 : .1}},
                        dataLabels: {enabled: !1},
                        tooltip: {enabled: !1}
                    }), p(r[0], g)), e.MAP_ACTIVED_EVENT, r[1] && f(r[1], g), c(l, r), d(l, r);
                    var o = g.map || {}, s = o.border || {}, y = o.shadow || {};
                    0 === s.width && 0 === y.x && y.y, l.getChartType() == i.TextMap && u(l, r), H.setOptions({series: r})
                }), l.chartInstance = H;
                var s = function (e, t) {
                    return [].filter.call(e, t)
                };
                l.chartInstance.getSelectedPoints = function () {
                    var e = [];
                    return H.series && H.series.forEach(function (t) {
                        e = e.concat(s(t.shapes || [], function (e) {
                            return e.selected
                        }))
                    }), e
                }
            }()
        }
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(171), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        var e = Dalaba.Numeric.interpolate, t = bdpChart.helper, i = (bdpChart.ChartType, t.mapPathTree),
            n = (Dalaba.Color, Dalaba.pack), r = Dalaba.defined, o = Dalaba.isObject, s = Dalaba.isNumber;
        bdpChart.setMapBubbleSpecialOption = function (l, c) {
            function d(e, t) {
                var i = e.info, n = (e.data, i.chart_id), a = null, r = [];
                if (c && (!c || 0 != c.length)) {
                    angular.forEach(c, function (e, t) {
                        e.ctId == n && (r = e.pointData)
                    }), e.pointData = r, a = r.hzCode;
                    var o, s = t.data;
                    s.length > 0 && (angular.forEach(s, function (e, t) {
                        e["hz-code"] == a && (o = t)
                    }), angular.isNumber(o) && (s[o].selected = !0))
                }
            }

            function u(e, i) {
                var n = e.info, a = n.color_setting;
                if (d(e, i), delete n.color_setting.is_series, !$.isEmptyObject(a)) {
                    if (1 != a.mode) {
                        var r = bdpChart.colors[a.theme], o = a.enum_color_map;
                        if (a.field[0].fid == n.xAxis[0].fid) {
                            angular.forEach(i.data, function (e, t) {
                                var i = angular.isArray(e) ? e[0] : e["hz-code"];
                                o.hasOwnProperty(i) ? e.color = o[i].color : e.color = r[t % r.length]
                            }), delete M.colorAxis
                        }
                    } else if (1 == a.mode) {
                        delete M.colorAxis;
                        var s = [], l = a.range_color, c = x.map(function (t, i) {
                            return e.data.colors[t._i]
                        });
                        c.map(function (e) {
                            null !== e && s.push(Number(e))
                        });
                        var u = [].concat(s).sort(function (e, t) {
                            return e - t
                        }), p = u[0] || 0, f = u[u.length - 1] || 0;
                        !l.disable_max && l.max && (f = l.max), !l.disable_min && l.min && (p = l.min);
                        var h = t.linearRangeColor(l.start_color, l.end_color), g = t.createLinearScale(l, s), m = [],
                            v = l.step;
                        if (v > 1) {
                            for (I = 0; I < v - 1; I++) m.push(h(I / (v - 1)));
                            m.push(h(1))
                        }
                        angular.forEach(i.data, function (e, t) {
                            var i = s[t], n = g(i);
                            if (v) {
                                var a = Math.floor(v * n);
                                a = Math.min(a, v - 1), e.color = m[a]
                            } else e.color = h(n)
                        }), $.extend(!0, M.legend, {
                            enabled: !0,
                            align: "left",
                            verticalAlign: "bottom",
                            floating: !0,
                            y: -5,
                            layout: "horizontal",
                            valueDecimals: L,
                            backgroundColor: null,
                            symbolRadius: 0,
                            symbolHeight: 0,
                            symbolWidth: 0,
                            useHTML: !0,
                            itemHoverStyle: {"pointer-events": "none"},
                            labelFormatter: function () {
                                var e = bdpChart.helper.createLinearGradientCss(l.start_color, l.end_color, l.step),
                                    i = t.escapeHtml(t.getFieldDisplayName(a.field[0], a.aggregator));
                                return '<div class="map-legend-row"><span class="map-legend-text-left">' + bdpChart.helper.numericSymbols(p) + '</span><span class="map-legend-text-right">' + bdpChart.helper.numericSymbols(f) + '</span></div><div class="color-linear-gradient map-legend" style="' + e + '"></div><div class="map-legend-name" title="' + i + '">' + i + "</div>"
                            }
                        })
                    }
                    angular.forEach(i.data, function (t, i) {
                        e.data.y[0].hasOwnProperty("warn_data") && 1 == e.data.y[0].warn_data[i] && (t.color = "rgba(255, 133, 90,0.5)")
                    })
                }
            }

            function p(e, t) {
                if (!$.isEmptyObject(t) && Dalaba.defined(t)) {
                    var i = t.map || {}, a = i.splitLine || {}, r = i.border || {}, o = i.shadow || {},
                        s = n("number", r.width), l = n("number", o.blur);
                    e.borderWidth = s, e.borderColor = r.color, e.shadowColor = o.color, e.shadowOffsetX = o.x, e.shadowOffsetY = o.y, e.shadowBlur = l, e.shadowFillColor = a.background
                }
            }

            function f(e, t) {
                if (!$.isEmptyObject(t) && Dalaba.defined(t)) {
                    var i = t.map || {}, a = i.splitLine || {};
                    e.fillColor = i.background, e.borderColor = a.color, e.borderWidth = n("number", a.width)
                }
            }

            function h(e, t, i) {
                var n = {}, a = i.map(function (e) {
                    return n[e.name] = 1, +e["hz-code"]
                }), r = t.features.map(function (e) {
                    return +e.properties.id
                }).filter(function (e) {
                    return a.indexOf(e) < 0
                }).map(function (e) {
                    return {"hz-code": e}
                });
                e.push({
                    allAreas: !1,
                    type: "map",
                    mapData: t,
                    transform: {scale: 1},
                    name: v.y[0].name,
                    id: "mapId",
                    joinBy: "hz-code",
                    data: r,
                    color: "rgba(0, 0, 0, 0)",
                    borderWidth: 1,
                    enableMouseTracking: !1,
                    tooltip: {enabled: !1},
                    dataLabels: {
                        useHTML: !0,
                        enabled: !0,
                        allowOverlap: !1,
                        style: {color: F || ("dark" == l.theme ? "rgba(255, 255, 255,  .4)" : "#777")},
                        formatter: function () {
                            var e = [];
                            return g.show_placenames && !{}.hasOwnProperty.call(n, this.point.key) ? (e.push('<p class="datalabels-map text-center">'), e.push(this.key), e.push("</p>"), e.join("")) : null
                        }
                    }
                })
            }

            var g = l.info, m = g.styles, v = t.filterNullVal(l.data), y = +g.map.region, b = g.map.granularity,
                _ = void 0 === g.show_all_datalabels || g.show_all_datalabels;
            "city" === b && 1 == y && void 0 === g.show_all_datalabels && (_ = !1);
            !l.dash_setting || l.dash_setting.show_legend;
            if (!v.x[0].data.length && !v.x[0].mismatch.length) return t.displayNoData(l.$elem);
            l.chartMapInstance && l.chartMapInstance.destroy(), r(m) && "edit" !== l.mode || (g.styles = m = {});
            var w = t.getMapVectorData(l), x = [], C = v.x[0].data.length,
                k = t.getEdgeValueFromMultiArray(v, "y", "max"), S = t.getEdgeValueFromMultiArray(v, "y", "min");
            S < 0 && (S = 0);
            var T = 10, D = S ? S * T / k : 1;
            D = D < 1 ? 1 : D;
            var L = 0;
            isNaN(k) || (L = isInteger(k.mul(.25)) ? 0 : k.mul(.25).toString().split(".")[1].length);
            for (var A, E, I = 0; I < C; I++) A = v.x[0].data[I], null !== (E = v.y[0].data[I]) && (x.push({
                _i: I,
                "hz-code": A,
                z: Number(E)
            }), v.y[0].hasOwnProperty("warn_data") && 1 == v.y[0].warn_data[I] && (x[I].color = "rgba(255, 133, 90,0.5)"));
            x.sort(function (e, t) {
                return t.z - e.z
            });
            var F, O = "fullscreen" === l.mode && 1 == localStorage.getItem("fs_data_label"),
                M = (l.$elem.get(0).getBoundingClientRect(), $.extend(!0, l.options, {
                    type: "map",
                    chart: {spacing: [15, 15, 10, 15], backgroundColor: null},
                    title: {text: ""},
                    subtitle: {
                        text: g.title,
                        y: 0,
                        style: {
                            "font-size": "fullscreen" === l.mode ? "20px" : "16px",
                            color: "dark" === l.theme ? "#FFFFFF" : "#333333"
                        }
                    },
                    exporting: {filename: g.title},
                    mapNavigation: {
                        enabled: !0,
                        enableButtons: !1,
                        enableDoubleClickZoom: !1,
                        enableMouseWheelZoom: !1
                    },
                    plotOptions: {
                        map: {
                            borderColor: "#fff",
                            nullColor: "#E6E8EA",
                            events: {
                                legendItemClick: function () {
                                    return !1
                                }
                            }
                        },
                        scatter: {
                            showInLegend: !1,
                            cursor: g.is_drill || "2" == l.optional.linked_chart_type ? "pointer" : "default",
                            marker: {
                                enabled: !1,
                                states: {select: {fillColor: "#7BE", lineWidth: 2, lineColor: "#59C"}}
                            },
                            dataLabels: {
                                align: "center",
                                allowOverlap: _,
                                crop: !1,
                                enabled: g.show_datalabels,
                                style: {
                                    color: "dark" == l.theme ? "#fff" : "#555",
                                    textOutline: "dark" == l.theme ? "0 0 3px rgba(0,0,0,0.2)" : null
                                }
                            },
                            stickyTracking: !1
                        }
                    },
                    legend: {enabled: !1},
                    credits: {enabled: !1},
                    tooltip: {
                        crosshairs: null,
                        shared: !1,
                        boxShadow: "none",
                        borderRadius: 0,
                        border: "none",
                        backgroundColor: "inherit",
                        className: "highcharts-tooltip",
                        formatter: l._generateTooltipFormatter()
                    },
                    series: null
                }));
            g && g.styles && g.styles.map && r(g.styles.map.textColor) && (F = g.styles.map.textColor);
            var N = function () {
                var e = [], t = F ? "style=color:" + F + ";" : "";
                return void 0 !== this.point.z && null !== this.point.z && (g.show_datalabels || O) && (e.push('<p class="bdp-datalabels datalabels-map datalabels-map-value text-center" ' + t + ">"), e.push(bdpChart.helper.dataLabelFormatter(v.y[0].formatter, this.point.z, v.y[0].aggregator)), e.push("</p>")), e.push('<p class="datalabels-map text-center" ' + t + ">"), e.push(this.point.name), e.push("</p>"), e.join("")
            };
            "fullscreen" === l.mode && $.extend(!0, M, {tooltip: {style: {fontSize: "14px"}}}), "dark" === l.theme && $.extend(!0, M, {
                plotOptions: {
                    map: {
                        borderColor: "rgba(0, 0, 0, 0.1)",
                        nullColor: "#343752",
                        dataLabels: {style: {color: "rgba(255, 255, 255, .3)"}}
                    }
                }, tooltip: {backgroundColor: "none", borderWidth: 0, style: {padding: 0}}
            });
            var j = l.deviceStyle.plotOptions ? l.deviceStyle.plotOptions.map : {};
            $.extend(!0, M.plotOptions.map, j);
            var P = M.plotOptions.map, R = {
                map: {
                    shadow: {color: "rgba(0, 0, 0, 0)", y: 0, spread: 0, x: 0, blur: 0},
                    border: {color: "rgba(0, 0, 0, 0)", width: 0},
                    background: P.fillColor || P.nullColor,
                    splitLine: {color: P.borderColor, width: 1}
                }
            };
            $.isEmptyObject(m) || !r(m) || "edit" === l.mode ? g.styles = m = {map: R.map} : o(m.map) || (m.map = R.map), m.defaultStyles = {
                light: R.map,
                dark: R.map
            }, M.colorAxis = {enabled: !1};
            var B = Dalaba.Chart(l.$elem.get(0), M);
            l.chartMapInstance = B, l.chartInstance = B, B.canvas.className = "chart-canvas", function () {
                var t = w.split("/").pop(), n = i[t], r = n.id, o = n.path + r + ".json";
                $.ajax("/static/js/mapData/geoJson/" + o).done(function (t) {
                    var i;
                    if ("edit" !== l.mode) var n = topojson.topology({states: $.extend(!0, {}, t)}),
                        r = Dalaba.geo.mesh(n, n.objects.states, function (e, t) {
                            return e === t
                        });
                    t.features.forEach(function (e) {
                        var t = e.properties.id, i = e.properties.name,
                            n = e.properties.cp || (e.properties.center || "").split(",").map(parseFloat);
                        s(n[0]) || s(n[1]) || (n = [106.551643, 29.562849]);
                        var a;
                        if (t) for (var r = 0; r < x.length; r++) t === (a = x[r])["hz-code"] && (a.value = a.z, a.name = i, a.x = n[0], a.y = n[1])
                    });
                    var o = [];
                    h(o, t, x), o.push({
                        allowPointSelect: "2" == l.optional.linked_chart_type,
                        type: "scatter",
                        seriesTarget: "mapId",
                        projection: "geo",
                        transform: {scale: 1},
                        name: v.y[0].name,
                        joinBy: "hz-code",
                        data: x,
                        color: "rgba(121,188,233,0.5)",
                        radius: function (t, i, n, a, r) {
                            var o = Math.min(r.plotWidth, r.plotHeight) / 2;
                            return e(i, n, a, D / 100 * o, T / 100 * o)
                        },
                        dataLabels: (i = {
                            useHTML: !0,
                            allowOverlap: g.show_all_datalabels,
                            formatter: N,
                            align: "center",
                            verticalAlign: "middle"
                        }, (0, a.default)(i, "allowOverlap", _), (0, a.default)(i, "crop", !1), (0, a.default)(i, "enabled", !(l.isDashboardMode && (l.$elem.width() < 240 || l.$elem.height() < 220))), (0, a.default)(i, "style", {
                            fontSize: "14px",
                            color: "dark" == l.theme ? "#fff" : "#555",
                            textOutline: "dark" == l.theme ? "0 0 3px rgba(0,0,0,0.2)" : null
                        }), i)
                    }), u(l, o[1]), f(o[0], m), "edit" !== l.mode && (o.unshift({
                        mapData: {
                            type: "Feature",
                            geometry: {type: "MultiLineString", coordinates: r.coordinates}
                        },
                        clicked: !1,
                        fillColor: "rgba(255,255,255,0)",
                        joinBy: "hz-code",
                        name: v.y[0].name,
                        transform: {scale: 1},
                        dataLabels: {enabled: !1},
                        tooltip: {enabled: !1}
                    }), p(o[0], m));
                    var c = m.map || {}, d = c.border || {}, y = c.shadow || {};
                    0 === d.width && 0 === y.x && y.y, B.setOptions({series: o})
                }), l.chartInstance = B
            }()
        }
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        bdpChart.setSankeySpecialOption = function (e) {
            function t(t, i, n) {
                if (t.origin_data = $.extend(!0, {}, t.data), "date" === t.data_type) {
                    var a = t.granularity, r = t.granularity_name || "", o = t.month_start_day || 0;
                    "week" === a && (o = t.week_start_day_of_week);
                    var s, l = e.data.x[i].data, c = l.length;
                    0 === i ? s = l[c - 1] - l[0] : 1 === i && (s = l[c - 1].name - l[0].name), a = bdpChart.helper.setGranularityByDate(a, s), 0 === i ? t.data.forEach(function (e, i) {
                        t.data[i] = bdpChart.helper.checkGranularity(a, e, r, o)
                    }) : 1 === i && (n ? t.name = bdpChart.helper.checkGranularity(a, t.name, r, o) : t.data.forEach(function (e, i) {
                        t.data[i].name = bdpChart.helper.checkGranularity(a, e.name, r, o)
                    })), t.data_type = "string", t.origin_data_type = "date"
                }
            }

            function i(e) {
                this.nodeWidth = 20, this.padding = 28, this.paddingmultiplier = 10, this.lowopacity = .1, this.highopacity = .2, this.d3Elem = d3.selectAll(n.toArray()), this.data = e.data, this.info = e.info, this.isMobileMode = e.isMobileMode
            }

            var n = e.$elem, a = e.mode, r = e.theme, o = e.info.yAxis[0].formatter, s = bdpChart.helper,
                l = "dark" === e.theme ? 1 : 2;
            if (bdpChart.language || (bdpChart.language = "zh"), !e.data.x.length || !e.data.x[1].data.length) {
                var c = "zh" === bdpChart.language ? "当前图表无数据" : "No data to display";
                return void n.html('<div class="chart-error"><p>' + c + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
            }
            var d = "zh" === bdpChart.language ? "数值" : "Value", u = {top: 0, right: 0, bottom: 30, left: 0};
            e.isDashboardMode && (u.top = 8);
            var p = 1 == l ? "#fff" : "#000",
                f = 1 == l ? "fullscreen" === a ? "#fff" : "rgba(255, 255, 255, .5)" : "#606060",
                h = "fullscreen" === a ? "12px" : "10px";
            "dark" === r && (this.lowopacity = .1), i.prototype = {
                constructor: i, initSvg: function () {
                    var i = this, r = i.info.chart_type;
                    i.color = i._getColor(), "C301" === r ? i.data.x[1].origin_data || (i.data.x[0].origin_data = $.extend(!0, {}, i.data.x[0].data), i.data.x[1].origin_data = $.extend(!0, {}, i.data.x[1].data), i.data.x[0].data.forEach(function (e, n) {
                        for (var a = 0; a < i.info.x.length; a++) {
                            var r = i.info.x[a], o = r.nick_name || r.name;
                            if ("date" === r.data_type && e === o) {
                                var s = $.extend(!0, {}, r);
                                delete s.name, i.data.x[1].data[n] = $.extend(!0, {}, i.data.x[1].data[n], s), t(i.data.x[1].data[n], 1, !0);
                                break
                            }
                        }
                    })) : (t(i.data.x[0], 0), t(i.data.x[1], 1));
                    var o = 0, s = 0;
                    if ("edit" === a && (s = 64, o = 80), i.isMobileMode && (s = 32, o = 32, e.isDashboardMode && (s = 0, o = 0)), i.width = n[0].offsetWidth - o, i.height = n[0].offsetHeight - s, i.width * i.height <= 0) return !1;
                    i.svg = i.d3Elem.append("svg").attr("style", 'font-family:arial, "lucida grande", "lucida sans unicode", verdana, helvetica, sans-serif;font-size:12px;').attr("width", i.width).attr("height", i.height).attr("viewBox", "0 0 " + i.width + " " + i.height).attr("perserveAspectRatio", "xMinYMid"), i._setSeries(), i.draw()
                }, _setSeries: function () {
                    for (var e = this.data, t = {nodes: [], links: []}, i = [], n = 0; n < e.x[0].data.length; n++) {
                        t.nodes[n] = {
                            origin_name_value: e.x[1].origin_data[n].name,
                            origin_value: e.x[0].origin_data[n]
                        };
                        var a = e.x[0].data[n], r = e.x[1].data[n].name, o = e.x[1].data[n].value;
                        i.indexOf(a) < 0 ? (i.push(a), t.nodes[n].layer = i.length - 1) : t.nodes[n].layer = i.indexOf(a), t.nodes[n].name = r, t.nodes[n].value = o
                    }
                    this.layers = i.length, t.links = e.y[0].data, this.sankeyData = t
                }, _getLayers: function () {
                    return this.layers
                }, _getColor: function () {
                    var e = bdpChart.getColorsByType("C300", "bdp");
                    return d3.scale.ordinal().range(e)
                }, _setColor: function (e) {
                    var t = this.color(e), i = this.info.color_setting || {};
                    return i && i.enum_color_map && i.enum_color_map.hasOwnProperty(e) && (t = i.enum_color_map[e].color), t
                }, draw: function () {
                    var e = this, t = e.sankeyData, i = e.svg;
                    i.selectAll("g").remove();
                    var n;
                    this.sankey = n = d3.sankey().nodeWidth(e.nodeWidth).nodePadding(e.paddingmultiplier).size([e.width, e.height - u.top - u.bottom]);
                    var a = n.reversibleLink();
                    n.nodes(t.nodes).links(t.links).layout(32), e._initBackground(i), e._renderLinks(n, i, a, t.links), e._renderNodes(n, i, a, t.nodes), e._renderXaxisLabel(n, i)
                }, _initBackground: function (e) {
                    e.append("rect").attr("class", "sankey-background").attr("width", this.width).attr("height", this.height).attr("fill", "transparent")
                }, _renderNodes: function (e, t, i, a) {
                    function r(t) {
                        d3.select(this).attr("transform", "translate(" + t.x + "," + (t.y = Math.max(0, Math.min(l.height - u.top - u.bottom - t.dy, d3.event.y))) + ")"), e.relayout(), l.path1.attr("d", i(1, l.info.use_spline)), l.path0.attr("d", i(0, l.info.use_spline)), l.path2.attr("d", i(2, l.info.use_spline))
                    }

                    var l = this, c = "date" === l.info.xAxis[1].data_type,
                        p = t.append("g").attr("transform", "translate(" + u.left + "," + u.top + ")").selectAll(".node").data(a).enter().append("g").attr("class", "node").attr("transform", function (e) {
                            return "translate(" + e.x + "," + e.y + ")"
                        }).attr("posx", function (e) {
                            return e.x
                        }).call(d3.behavior.drag().origin(function (e) {
                            return e
                        }).on("dragstart", function () {
                            this.parentNode.appendChild(this)
                        }).on("drag", r)), f = p.append("rect").attr("height", function (e) {
                            return Math.max(0, e.dy)
                        }).attr("width", l.nodeWidth).style("fill", function (e) {
                            return e.fill ? e.color = e.fill : e.color = l._setColor((c ? e.origin_name_value.toString() : e.name).replace(/ .*/, ""))
                        });
                    l.isMobileMode ? f.on("click", function (e) {
                        l.selectedPoint = null, $(".chart-drilldown").hide(), d3.selectAll(".link").style("opacity", l.lowopacity), t.selectAll(".link").filter(function (t) {
                            return t.source == e || t.target == e
                        }).transition().style("opacity", l.highopacity), l.tooltip = n.find(".sankey-tooltip");
                        var i = "";
                        l.info.yAxis[0].hasOwnProperty("unit_adv") && (i = l.info.yAxis[0].unit_adv), l.tooltip.remove(), l.tooltip = $('<div class="sankey-tooltip"><p class="tooltips-title">' + s.escapeHtml(e.name) + '</p><div class="tooltips-point-wrap"><div class="tooltips-table"><div class="tooltips-item"><div class="tooltips-val" style="color:' + e.color + '">' + s.dataLabelFormatter(o, e.value) + i + '</div><div class="tooltips-label">' + $.trim(bdp.utils.encodeHTML(d)) + "</div></div></div></div></div>"), n.append(l.tooltip)
                    }) : f.on("mouseover", function (e) {
                        t.selectAll(".link").filter(function (t) {
                            return t.source == e || t.target == e
                        }).transition().style("opacity", l.highopacity), l.tooltip = n.find(".sankey-tooltip");
                        var i = "";
                        if (l.info.yAxis[0].hasOwnProperty("unit_adv") && (i = l.info.yAxis[0].unit_adv), !l.tooltip.length) {
                            var a = l.setTooltipPosition();
                            l.tooltip = $('<div class="sankey-tooltip" style="position: absolute; left:' + a.x + "px;top:" + a.y + 'px;"><p class="text-center tooltips-title">' + s.escapeHtml(e.name) + '</p><table class="tooltips-table"><tr style="color:' + e.color + '"><td>' + d + "：</td><td>" + s.dataLabelFormatter(o, e.value) + i + "</td></tr></table></div>"), n.append(l.tooltip)
                        }
                    }).on("mouseout", function (e) {
                        t.selectAll(".link").filter(function (t) {
                            return t.source === e || t.target === e
                        }).transition().style("opacity", l.lowopacity), l.tooltip.remove()
                    }).on("mousemove", function (e) {
                        var t = l.setTooltipPosition();
                        l.updateTooltipPosition(t.x, t.y)
                    }), l._renderText(e, p)
                }, setTooltipPosition: function () {
                    if (null === this.tooltip) return {x: 0, y: 0};
                    var e = this.tooltip.outerWidth(), t = this.tooltip.outerHeight(), i = d3.event.clientX + 10,
                        a = d3.event.clientY, r = n[0].getBoundingClientRect();
                    return d3.event.pageX + e > r.right && (i = i - e - 20), d3.event.pageY + t > r.bottom - 30 && (a -= t), {
                        x: i - r.left,
                        y: a - r.top
                    }
                }, updateTooltipPosition: function (e, t) {
                    this.tooltip.css({left: e, top: t})
                }, _renderLinks: function (t, i, a, r) {
                    var l = this,
                        c = l.link = i.append("g").attr("transform", "translate(" + u.left + "," + u.top + ")").selectAll(".link").data(r).enter().append("g").attr("class", "link").sort(function (e, t) {
                            return t.dy - e.dy
                        });
                    l.path0 = c.append("path").attr("d", a(0, l.info.use_spline)), l.path1 = c.append("path").attr("d", a(1, l.info.use_spline)), l.path2 = c.append("path").attr("d", a(2, l.info.use_spline)), l.link.attr("fill", p).attr("opacity", l.lowopacity), l.isMobileMode ? (l.link.on("click", function (e) {
                        l.selectedPoint = e, l.info.is_drill && $(".chart-drilldown").show(), d3.selectAll(".link").style("opacity", l.lowopacity), d3.select(this).style("opacity", l.highopacity), l.tooltip = n.find(".sankey-tooltip");
                        var t = "";
                        l.info.yAxis[0].hasOwnProperty("unit_adv") && (t = l.info.yAxis[0].unit_adv), l.tooltip.remove(), l.tooltip = $('<div class="sankey-tooltip"><p class="tooltips-title">' + e.source.name + " → " + e.target.name + '</p><div class="tooltips-point-wrap"><div class="tooltips-table"><div class="tooltips-item"><div class="tooltips-val" style="color:' + e.source.color + '">' + s.dataLabelFormatter(o, e.value) + t + '</div><div class="tooltips-label">' + $.trim(bdp.utils.encodeHTML(d)) + "</div></div></div></div></div>"), n.append(l.tooltip)
                    }), !e.isDashboardMode && l.link.length && l.link[0][0] && l.link[0][0].__onclick(), l._bindMobDrilldown()) : l.link.on("mouseover", function (e) {
                        d3.select(this).style("opacity", l.highopacity), l.tooltip = n.find(".sankey-tooltip");
                        var t = "";
                        if (l.info.yAxis[0].hasOwnProperty("unit_adv") && (t = l.info.yAxis[0].unit_adv), !l.tooltip.length) {
                            var i = l.setTooltipPosition();
                            l.tooltip = $('<div class="sankey-tooltip" style="position: absolute; left:' + i.x + "px;top:" + i.y + 'px;"><p class="text-center tooltips-title">' + e.source.name + " → " + e.target.name + '</p><table class="tooltips-table"><tr style="color:' + e.source.color + '"><td>' + d + "：</td><td>" + s.dataLabelFormatter(o, e.value) + t + "</td></tr></table></div>"), n.append(l.tooltip)
                        }
                    }).on("mouseout", function (e) {
                        d3.select(this).style("opacity", l.lowopacity), l.tooltip.remove()
                    }).on("mousemove", function (e) {
                        var t = l.setTooltipPosition();
                        l.updateTooltipPosition(t.x, t.y)
                    }).on("click", function (e) {
                        l._drillDown(e)
                    }), l.info.is_drill && l.link.attr("cursor", "pointer")
                }, _drillDown: function (t) {
                    this.info.is_drill && e.emit("drilldown", t, e)
                }, _bindMobDrilldown: function () {
                    var t = this, i = $(".chart-drilldown");
                    t.info.is_drill ? (i.show(), i.off("click.drilldown").on("click.drilldown", function () {
                        e.emit("drilldown", t.selectedPoint, e)
                    })) : i.hide()
                }, _renderText: function (e, t) {
                    var i = this;
                    t.append("text").attr("x", -4).attr("y", function (e) {
                        return e.dy / 2
                    }).attr("dy", ".35em").attr("class", "label-text").attr("fill", f).attr("stroke", "none").style("font-size", h).attr("text-anchor", "end").attr("transform", null).text(function (e) {
                        return e.name
                    }).filter(function (e) {
                        return e.x < i.width / 2
                    }).attr("x", 4 + e.nodeWidth()).attr("text-anchor", "start"), t.append("text").attr("x", function (e) {
                        return -e.dy / 2
                    }).attr("y", function (e) {
                        return e.dx / 2 + 4
                    }).attr("transform", "rotate(270)").attr("fill", "#fff").attr("stroke", "none").attr("text-anchor", "middle").text(function (e) {
                        if (e.dy > 50) return s.dataLabelFormatter(o, e.value)
                    })
                }, _renderXaxisLabel: function (e, t) {
                    var i = this;
                    t.append("g").attr("class", "sankey-xaxis-label").attr("transform", "translate(0," + (i.height - 10) + ")");
                    var n, a = i.data.x[0], r = bdp.utils.arrayUnique(a.data), o = i.getLayerPosition(t), s = o[1],
                        l = 0, c = [], d = "visible", u = [];
                    r.forEach(function (e, a) {
                        var p = t.select(".sankey-xaxis-label").append("text");
                        if (p.text(e).attr("fill", f).style("font-size", h), n = i._getTextWidth(p), l = 0 === a ? o[0] : a === r.length - 1 ? o[a] - n + i.nodeWidth : o[a] - .5 * n + .5 * i.nodeWidth, c.push([l, n]), 0 === a) d = n + i.nodeWidth >= s ? "hidden" : "visible"; else if (a < r.length - 1) {
                            var g = Math.ceil(n / s);
                            if (g <= 1) d = "visible", "visible" === u[a - 1] && c[a - 1][0] + c[a - 1][1] >= c[a][0] && (d = "hidden"); else for (var m = g - 1; m > 0; m--) {
                                if (a - m < 0) {
                                    d = "hidden";
                                    break
                                }
                                if ("visible" === u[a - m]) {
                                    d = "hidden";
                                    break
                                }
                                d = "visible"
                            }
                        } else d = n + i.nodeWidth >= s ? "hidden" : "visible", "visible" === u[a - 1] && c[a - 1][0] + c[a - 1][1] >= c[a][0] && (d = "hidden");
                        u.push(d), p.attr("transform", "translate(" + l + ",0)").style("visibility", d)
                    })
                }, _getTextWidth: function (e) {
                    var t = 0;
                    return e.each(function (e) {
                        t = this.getComputedTextLength()
                    }), t
                }, getLayerPosition: function () {
                    var e = this.sankeyData.nodes, t = [];
                    return e.forEach(function (e, i) {
                        var n = e.x;
                        t.indexOf(n) < 0 && t.push(n)
                    }), t.sort(function (e, t) {
                        return e - t
                    })
                }, resize: function () {
                    var e = this, t = n[0].offsetWidth, i = n[0].offsetHeight;
                    e.svg && (e.svg.attr("width", t).attr("height", i), e.sankey.size([t, i - 30]))
                }
            };
            var g = new i(e);
            g.initSvg(), window.onresize = function () {
                g.resize()
            }
        }
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        var t = bdpChart.language || "zh", i = "zh" === t ? "当前图表无数据" : "No data to display";
        e.html('<div class="chart-error"><p>' + i + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
    }

    function a(e) {
        return function (t, i, n, a) {
            var r = t.find(".chart-text-title"), o = t.find(".chart-text-value"), s = t.find(".chart-text-updown");
            i *= e.title.fontSize ? e.title.fontSize : 1, n *= e.value.fontSize ? e.value.fontSize : 1, a *= e.updownTitle.fontSize ? e.updownTitle.fontSize : 1, i = i > 12 ? i : 12, n = n > 12 ? n : 12, a = a > 12 ? a : 12, r.css({
                fontSize: i + "px",
                height: i + "px",
                lineHeight: i + "px"
            }), o.css({fontSize: n + "px"}), s.css({fontSize: a + "px"})
        }
    }

    function r(e, t, i) {
        var n = document.body.clientWidth, r = e.find(".chart-text-value").text(), o = e.width(), s = e.height(),
            l = a(i);
        n < 1366 ? o < 244 || s < 218 ? l(e, 12, 31, 12) : o < 327 || s < 294 ? l(e, 14, 54, 14) : o < 411 || s < 369 || t && r.length >= 14 ? l(e, 16, 72, 16) : o < 495 || s < 445 || t && r.length >= 10 ? l(e, 18, 96, 18) : l(e, 22, 115, 22) : n >= 1366 && n < 1440 ? o < 265 || s < 238 ? l(e, 12, 34, 12) : o < 356 || s < 320 ? l(e, 14, 58, 14) : o < 447 || s < 402 || t && r.length >= 14 ? l(e, 16, 80, 16) : o < 538 || s < 483 || t && r.length >= 10 ? l(e, 18, 100, 18) : l(e, 22, 120, 22) : n >= 1440 && n < 1920 ? o < 284 || s < 254 ? l(e, 13, 36, 13) : o < 381 || s < 342 ? l(e, 14, 60, 14) : o < 478 || s < 429 || t && r.length >= 14 ? l(e, 16, 82, 16) : o < 575 || s < 517 || t && r.length >= 10 ? l(e, 18, 110, 18) : l(e, 22, 130, 22) : n >= 1920 && (o < 403 || s < 362 ? r.length >= 10 ? l(e, 16, 36, 16) : l(e, 16, 52, 16) : o < 541 || s < 486 ? l(e, 20, 80, 20) : o < 678 || s < 609 || t && r.length >= 14 ? l(e, 24, 110, 24) : o < 815 || s < 733 || t && r.length >= 10 ? l(e, 28, 140, 28) : l(e, 32, 170, 32))
    }

    function o(e, t) {
        var i = $(".fullscreen-chart"), n = i.length > 0;
        0 === e.find(".grid-box").length && r(e, n, t)
    }

    var s = bdpChart.helper, l = new FontFaceObserver("Avenir"), c = {
        getTextCompareTitleElement: function (e, t) {
            var i = $('<div class="chart-text-title"></div>');
            return i.text(t.compareTitle.text), i.css({
                color: t.compareTitle.color,
                fontFamily: t.compareTitle.fontFamily,
                fontWeight: t.compareTitle.bold ? "bold" : "normal",
                fontStyle: t.compareTitle.italic ? "italic" : "normal",
                lineHeight: "normal"
            }), i
        }, getTextTitleElement: function (e, t) {
            var i = $('<div class="chart-text-title nowrap">');
            if ("edit" === e.mode) {
                var n = $('<span class="nick-name-value vertical-center"></span>');
                n.text(t.title.text), i.append(n)
            } else i.append($('<span class="vertical-center">' + t.title.text + "</span>"));
            return i.css({
                color: t.title.color,
                fontFamily: t.title.fontFamily,
                fontWeight: t.title.bold ? "bold" : "normal",
                fontStyle: t.title.italic ? "italic" : "normal",
                maxWidth: "100%",
                lineHeight: "normal"
            }), i
        }, getTextValueElement: function (e, t) {
            var i = $('<div class="chart-text-value nowrap">');
            if (void 0 !== t.value.color && i.css("color", t.value.color), void 0 !== t.value.shapeType && i.append('<i class="icomoon icomoon-' + t.value.shapeType + '"></i>'), void 0 !== t.value.sub) {
                var n = $("<div>").append($("<sub>").text(t.value.sub));
                i.append(t.value.text + n.html()), "fullscreen" != e.mode && "edit" != e.mode && i.attr("title", t.value.text)
            } else i.text(t.value.text);
            return i.css({
                color: t.value.color,
                fontFamily: t.value.fontFamily,
                fontWeight: t.value.bold ? "bold" : "normal",
                fontStyle: t.value.italic ? "italic" : "normal",
                lineHeight: "normal"
            }), i
        }, getTextUpdownElement: function (e, t) {
            var i = $('<div class="chart-text-updown nowrap">'), n = $('<span class="hd nowrap">');
            n.text(t.updownTitle.text), i.append(n), n.css({
                color: t.updownTitle.color,
                fontFamily: t.updownTitle.fontFamily,
                fontWeight: t.updownTitle.bold ? "bold" : "normal",
                fontStyle: t.updownTitle.italic ? "italic" : "normal"
            });
            var a = "";
            t.updownValue.shapeType && (a = '<i class="icomoon icomoon-' + t.updownValue.shapeType + '"></i>');
            var r = $('<span class="bd up"></span>');
            return r.append(a + t.updownValue.text + t.updownValue.sub), i.append(r), r.css({
                color: t.updownValue.color,
                fontFamily: t.updownValue.fontFamily,
                fontWeight: t.updownValue.bold ? "bold" : "normal",
                fontStyle: t.updownValue.italic ? "italic" : "normal",
                lineHeight: "normal"
            }), i
        }
    }, d = {
        text: {transform: ["transform", "-ms-transform", "-moz-transform", "-webkit-transform", "-o-transform"]},
        new: function (e) {
            var t = function (e, t, i) {
                var a = "";
                d.text[t].forEach(function (e) {
                    a += e + ": " + i + ";"
                }), n.css[e] = a
            }, i = function () {
                var t = "";
                for (var i in n.css) t += "#" + e + " ." + i + "{\n                    " + n.css[i] + "\n                }\n";
                var a = document.createElement("style");
                a.type = "text/css", a.styleSheet ? a.styleSheet.cssText = t : a.innerHTML = t, document.getElementById(e).appendChild(a)
            }, n = {id: e, css: {}, addCssString: t, compile: i};
            return n
        }
    };
    bdpChart.setTextSpec = function (e) {
        var t = e.$elem, i = e.data, a = i.y[0], r = "default" === e.theme ? "light" : "dark",
            u = "chart_" + e.info.chart_id;
        t.attr("id", u);
        var p = d.new(u);
        if (!a.data.length) return n(t), !1;
        t.find(".chart-error").remove(), "fullscreen" === e.mode && t.html("");
        var f = e.info.card || {}, h = a.formatter, g = a.aggregator, m = a.nick_name || a.name;
        t.addClass("text-chart"), t.html("");
        var v = i.y.length / e.info.y.length, y = v;
        e.isMobileMode && (v = 1);
        var b = t;
        if (v > 1) {
            var w, x;
            e.info.split_compare_setting ? (w = e.info.split_compare_setting.rows, x = e.info.split_compare_setting.cols) : w = x = v > 16 ? 4 : Math.ceil(Math.sqrt(v)), v > w * x && t.css("overflow-y", "auto");
            var C = w * x < v && e.isDashboardMode ? t.width() - 15 : t.width(), k = C / x, S = t.height() / w,
                T = {left: parseInt(t.css("padding-left")), top: parseInt(t.css("padding-top"))}
        }
        var D = 2 == e.info.y.length, L = {
            getFontSize: function (e) {
                var t, i, n, a = e.width(), r = e.height(), o = e.find(".chart-text-value").text(), s = o.length;
                return a = Math.min(a, r), a < 128 ? (t = 12, i = s > 10 ? 12 : 16, n = 12, i *= a / 128) : a < 218 ? (t = 13, i = s > 10 ? 20 : 24, n = 13, i *= a / 218) : a < 328 ? (t = 13, i = s > 10 ? 24 : 32, n = 13, i *= a / 328) : a < 486 ? (t = 20, i = s > 10 ? 46 : 56, n = 20, i *= a / 486) : a < 678 ? (t = 20, i = s > 10 ? 58 : 72, n = 20, i *= a / 678) : (t = 32, i = s > 10 ? 88 : 110, n = 32), i = Math.round(i), {
                    titleFontSize: t,
                    valueFontSize: i,
                    updownFontSize: n
                }
            }, handleFontSize: function (e, t) {
                function i(e) {
                    return parseFloat(e.toFixed(2))
                }

                e.titleFontSize *= t.title.fontSize ? t.title.fontSize : 1, e.valueFontSize *= t.value.fontSize ? t.value.fontSize : 1, e.updownFontSize *= t.updownTitle.fontSize ? t.updownTitle.fontSize : 1, e.titleFontSize = e.titleFontSize > 12 ? e.titleFontSize : 12, e.valueFontSize = e.valueFontSize > 12 ? e.valueFontSize : 12, e.updownFontSize = e.updownFontSize > 12 ? e.updownFontSize : 12, (t.value.text + "").length < 5 && (e.valueFontSize *= 1.5), e.titleFontSize = i(e.titleFontSize), e.valueFontSize = i(e.valueFontSize), e.updownFontSize = i(e.updownFontSize);
                var n = b.find(".chart-text-title"), a = b.find(".chart-text-value"), r = b.find(".chart-text-updown");
                n.css({fontSize: e.titleFontSize + "px"}), a.css({
                    fontSize: e.valueFontSize + "px",
                    height: (1 + t.spacing) * e.valueFontSize + "px",
                    lineHeight: (1 + t.spacing) * e.valueFontSize + "px"
                }), r.css({fontSize: e.updownFontSize + "px"})
            }, rotateCircle: function (t) {
                return {
                    config: t, render: function (i) {
                        var n = $('<i class="chart-text-image-icon bdp-icon ico-no-opacity"></i>');
                        n.css({
                            animation: t.animation ? "chart-text-rotate 10s infinite linear" : void 0,
                            backgroundImage: "url(" + t.mainImage
                        });
                        var a = $('<i class="chart-text-image-icon bdp-icon ico-no-opacity"></i>');
                        a.css({
                            animation: t.animation ? "chart-text-rotate-reversal 5s infinite linear" : void 0,
                            backgroundImage: "url(" + t.outlineImage + ")"
                        });
                        var r = $('<div class="chart-text-image-wrap"></div>');
                        if (r.append(n), r.append(a), p.addCssString("chart-text-image-wrap", "transform", "scale(" + i.backgroundSize + ")"), i.title.show) {
                            var o = c.getTextTitleElement(e, i);
                            r.append(o), o.css({
                                position: "absolute",
                                left: "50%",
                                bottom: "0"
                            }), p.addCssString("chart-text-title", "transform", "translate(-50% , 100%)")
                        }
                        var s = $('<div class="chart-text-item"></div>');
                        r.append(s), s.css({
                            position: "absolute",
                            left: "50%",
                            top: "50%"
                        }), p.addCssString("chart-text-item", "transform", "translate(-50% , -50%)");
                        var l = c.getTextValueElement(e, i);
                        if (s.append(l), D) {
                            var d = c.getTextUpdownElement(e, i);
                            s.append(d), d.css({display: "inline-block", maxWidth: "90%"})
                        }
                        return [r]
                    }, afterRender: function (e, t) {
                        var i = e.width(), n = e.height();
                        i = Math.min(i, n);
                        var a = i, r = i, o = this.getFontSize(e, r, a);
                        L.handleFontSize(o, t);
                        var s = e.find(".chart-text-title");
                        s.css({bottom: .04 * -a + "px"});
                        var l = e.find(".chart-text-image-wrap");
                        l.css({height: "calc(100% - " + (t.title.show ? s.height() + .04 * a : 0) + "px)"}), e.find(".chart-text-item").css({width: .68 * l.height() + "px"}), p.compile()
                    }, getFontSize: function (e, t, i) {
                        var n, a, r, o = e.find(".chart-text-value").text(), s = o.length;
                        return n = .05 * i, a = s > 10 ? .1 * i : .13 * i, r = .05 * i, {
                            titleFontSize: n,
                            valueFontSize: a,
                            updownFontSize: r
                        }
                    }
                }
            }, circle: function (e) {
                return {
                    config: e, render: function (t) {
                        var i = $('<i class="chart-text-image-icon bdp-icon ico-no-opacity"></i>');
                        i.css({
                            animation: e.animation ? "chart-text-rotate 10s infinite linear" : void 0,
                            backgroundImage: "url(" + e.mainImage + ")"
                        });
                        var n = $('<i class="chart-text-image-icon bdp-icon ico-no-opacity"></i>');
                        n.css({
                            animation: e.animation ? "chart-text-rotate-reversal 5s infinite linear" : void 0,
                            backgroundImage: "url(" + e.outlineImage + ")"
                        });
                        var a = $('<div class="chart-text-image-wrap"></div>');
                        a.append(i).append(n), p.addCssString("chart-text-image-wrap", "transform", "scale(" + t.backgroundSize + ")");
                        var r = E(t);
                        return a.append(r), r.find(".chart-text-title").css({
                            maxWidth: "80%",
                            display: "inline-block"
                        }), r.find(".chart-text-updown").css({maxWidth: "80%", display: "inline-block"}), [a]
                    }, afterRender: function (e, t) {
                        var i = e.width(), n = e.height();
                        i = Math.min(i, n);
                        var a = i, r = i, o = this.getFontSize(e, a, r);
                        L.handleFontSize(o, t);
                        var i = e.width();
                        if (i < 218) {
                            e.find("chart-text-value").find(".icomoon").remove()
                        }
                        p.compile()
                    }, getFontSize: function (e, t, i) {
                        var n, a, r, o = e.find(".chart-text-value").text(), s = o.length;
                        return n = .08 * i, a = s > 10 ? .12 * i : .14 * i, r = .06 * i, {
                            titleFontSize: n,
                            valueFontSize: a,
                            updownFontSize: r
                        }
                    }
                }
            }, twoBlock: function (t) {
                return {
                    config: t, render: function (i) {
                        var n = $('<i class="chart-text-image-icon bdp-icon ico-no-opacity"></i>');
                        n.css({backgroundImage: "url(" + t.image + ")"});
                        var a = $('<div class="chart-text-image-wrap"></div>');
                        a.append(n), p.addCssString("chart-text-image-wrap", "transform", "scale(" + i.backgroundSize + ")");
                        var r = $('<div class="chart-text-box-custom"></div>');
                        r.css({
                            position: "relative",
                            width: "100%",
                            height: "100%",
                            top: "50%"
                        }), p.addCssString("chart-text-box-custom", "transform", "translateY(-50%)");
                        var o = c.getTextTitleElement(e, i);
                        r.append(o), o.css({position: "relative", textAlign: "center"}), i.title.show || o.text("");
                        var s = $('<div class="chart-text-value-wrap"></div>');
                        r.append(s), s.css({textAlign: "center", position: "relative"});
                        var l = $('<div class="chart-text-value-block-wrap"></div>');
                        s.append(l), l.css({
                            position: "relative",
                            top: "50%"
                        }), p.addCssString("chart-text-value-block-wrap", "transform", "translateY(-50%)");
                        var d = c.getTextValueElement(e, i);
                        if (l.append(d), D) {
                            var u = c.getTextUpdownElement(e, i);
                            l.append(u)
                        }
                        return a.append(r), [a]
                    }, afterRender: function (e, t) {
                        var i, n, a = e.width(), r = e.height();
                        a / r < 172 / 105 ? (i = 105 / 172 * a, n = a) : (i = r, n = 172 / 105 * r);
                        var o = this.getFontSize(e, n, i);
                        L.handleFontSize(o, t), e.find(".chart-text-box-custom").css({height: i + "px"}), e.find(".chart-text-title").css({
                            width: n + "px",
                            left: (a - n) / 2 + "px",
                            height: .51 * i + "px",
                            padding: "0px " + n * (10 / 370) + "px"
                        }).find(".vertical-center").css({
                            display: "inline-block",
                            top: "50%",
                            position: "relative"
                        }), p.addCssString("vertical-center", "transform", "translateY(-50%)"), e.find(".chart-text-value-wrap").css({
                            height: .49 * i + "px",
                            width: n + "px",
                            left: (a - n) / 2 + "px",
                            padding: "0px " + n * (10 / 370) + "px"
                        }), p.compile()
                    }, getFontSize: function (e, t, i) {
                        var n, a, r, o = e.find(".chart-text-value").text(), s = o.length;
                        return n = .14 * i, a = s > 10 ? .12 * i : .15 * i, r = .08 * i, {
                            titleFontSize: n,
                            valueFontSize: a,
                            updownFontSize: r
                        }
                    }
                }
            }, leftLongBlock: function (t) {
                return {
                    config: t, render: function (i) {
                        var n = $('<i class="chart-text-image-icon bdp-icon ico-no-opacity"></i>');
                        n.css({backgroundImage: "url(" + t.image + ")"});
                        var a = $('<div class="chart-text-image-wrap"></div>');
                        a.append(n), p.addCssString("chart-text-image-wrap", "transform", "scale(" + i.backgroundSize + ")");
                        var r = $('<div class="chart-text-box-custom"></div>');
                        r.css({width: "100%", position: "relative"});
                        var o = $('<div class="chart-text-item"></div>');
                        if (r.append(o), o.css({
                            textAlign: "left",
                            position: "relative",
                            top: "50%"
                        }), p.addCssString("chart-text-item", "transform", "translateY(-50%)"), i.title.show) {
                            var s = c.getTextTitleElement(e, i);
                            o.append(s), s.css({})
                        }
                        var l = c.getTextValueElement(e, i);
                        if (o.append(l), D) {
                            var d = c.getTextUpdownElement(e, i);
                            o.append(d), d.css({})
                        }
                        return a.append(r), [a]
                    }, afterRender: function (e, t) {
                        var i, n, a = e.width(), r = e.height();
                        a / r > 300 / 90 ? (i = r, n = r * (300 / 90)) : (i = .3 * a, n = a);
                        var o = this.getFontSize(e, n, i);
                        L.handleFontSize(o, t), e.find(".chart-text-box-custom").css({
                            top: .5 * (r - i) + "px",
                            height: 70 / 90 * i + "px",
                            paddingLeft: .5 * (a - n) + 80 / 300 * n
                        }), p.compile()
                    }, getFontSize: function (e, t, i) {
                        var n, a, r, o = e.find(".chart-text-value").text();
                        o.length;
                        return n = .125 * i, a = .3 * i, r = .088 * i, {
                            titleFontSize: n,
                            valueFontSize: a,
                            updownFontSize: r
                        }
                    }
                }
            }, longBlock: function (t) {
                return {
                    config: t, render: function (i) {
                        var n = $('<i class="chart-text-image-icon bdp-icon ico-no-opacity"></i>');
                        n.css({backgroundImage: "url(" + t.image + ")"})
                        ;var a = $('<div class="chart-text-image-wrap"></div>');
                        a.append(n), p.addCssString("chart-text-image-wrap", "transform", "scale(" + i.backgroundSize + ")");
                        var r = $('<div class="chart-text-box-custom"></div>');
                        if (r.css({position: "relative"}), i.title.show) {
                            var o = c.getTextTitleElement(e, i);
                            r.append(o), o.css({float: "left"}).find(".vertical-center").css({
                                display: "inline-block",
                                top: "50%",
                                position: "relative"
                            }), p.addCssString("vertical-center", "transform", "translateY(-50%)")
                        }
                        var s = $('<div class="chart-text-value-wrap"></div>');
                        r.append(s), s.css({
                            position: "absolute",
                            top: "50%"
                        }), p.addCssString("chart-text-value-wrap", "transform", "translateY(-50%)");
                        var l = c.getTextValueElement(e, i);
                        if (s.append(l), l.css({}), D) {
                            var d = c.getTextUpdownElement(e, i);
                            s.append(d), d.css({})
                        }
                        return a.append(r), [a]
                    }, afterRender: function (e, t) {
                        var i, n, a = e.width(), r = e.height();
                        a / r > 284 / 62 ? (i = r, n = r * (284 / 62)) : (i = a * (62 / 284), n = a);
                        var o = this.getFontSize(e, n, i);
                        L.handleFontSize(o, t);
                        var s = i - 22 / 62 * i;
                        e.find(".chart-text-box-custom").css({
                            height: s + "px",
                            top: .5 * (r - i) + 10 / 62 * i + "px",
                            marginLeft: .5 * (a - n) + "px"
                        });
                        var l = e.find(".chart-text-title"), c = 35 / 284 * n;
                        l.css({height: s + "px", marginLeft: c + "px", maxWidth: .335 * n + "px"});
                        var d = l.width(), u = (.95 * n - c - d) * t.spacing + c + d;
                        e.find(".chart-text-value-wrap").css({left: u + "px", width: n - u + "px"}), p.compile()
                    }, getFontSize: function (e, t, i) {
                        var n, a, r, o = e.find(".chart-text-value").text();
                        o.length;
                        return n = .22 * i, a = .3 * i, r = .088 * i, {
                            titleFontSize: n,
                            valueFontSize: a,
                            updownFontSize: r
                        }
                    }
                }
            }, rightBlock: function (t) {
                return {
                    config: t, render: function (i) {
                        var n = $('<i class="chart-text-image-icon bdp-icon ico-no-opacity"></i>');
                        n.css({backgroundImage: "url(" + t.image + ")"});
                        var a = $('<div class="chart-text-image-wrap"></div>');
                        a.append(n), p.addCssString("chart-text-image-wrap", "transform", "scale(" + i.backgroundSize + ")");
                        var r = $('<div class="chart-text-box-custom"></div>');
                        r.css({
                            position: "relative",
                            width: "100%",
                            height: "100%",
                            top: "50%"
                        }), p.addCssString("chart-text-box-custom", "transform", "translateY(-50%)");
                        var o = $('<div class="chart-text-title-wrap"></div>');
                        r.append(o), o.css({position: "relative"});
                        var s = c.getTextTitleElement(e, i);
                        o.append(s), s.css({
                            position: "relative",
                            display: "inline-block"
                        }).find(".vertical-center").css({
                            display: "inline-block",
                            top: "50%",
                            position: "relative"
                        }), p.addCssString("vertical-center", "transform", "translateY(-50%)"), i.title.show || s.text("");
                        var l = $('<div class="chart-text-value-wrap"></div>');
                        r.append(l), l.css({position: "relative"});
                        var d = $('<div class="chart-text-value-block-wrap"></div>');
                        l.append(d), d.css({
                            position: "relative",
                            top: "50%",
                            display: "inline-block"
                        }), p.addCssString("chart-text-value-block-wrap", "transform", "translateY(-50%)");
                        var u = c.getTextValueElement(e, i);
                        if (d.append(u), u.css({position: "relative"}), D) {
                            var f = c.getTextUpdownElement(e, i);
                            d.append(f), f.css({})
                        }
                        return a.append(r), [a]
                    }, afterRender: function (e, t) {
                        var i, n, a = e.width(), r = e.height();
                        a / r < 149 / 63 ? (i = 63 / 149 * a, n = a) : (i = r, n = 149 / 63 * r);
                        var o = this.getFontSize(e, n, i);
                        L.handleFontSize(o, t), e.find(".chart-text-box-custom").css({height: i + "px"}), e.find(".chart-text-title").css({
                            height: .45 * i + "px",
                            left: .5 * (a - n) + .08 * n + "px",
                            width: .57 * n + "px"
                        }), e.find(".chart-text-value-wrap").css({height: .55 * i + "px"}), e.find(".chart-text-value-block-wrap").css({
                            left: .5 * (a - n) + .08 * n + "px",
                            width: .9 * n + "px"
                        }), p.compile()
                    }, getFontSize: function (e, t, i) {
                        var n, a, r, o = e.find(".chart-text-value").text();
                        o.length;
                        return n = .16 * i, a = .28 * i, r = .088 * i, {
                            titleFontSize: n,
                            valueFontSize: a,
                            updownFontSize: r
                        }
                    }
                }
            }, factory: function (e, t) {
                return this[e] ? this[e](t) : {}
            }
        }, A = function (e) {
            var i;
            if (v > 1) {
                var n = $('<div class="grid-box">'), a = {left: k * (e % x) + T.left, top: S * parseInt(e / x) + T.top};
                n.css({position: "absolute", left: a.left, top: a.top, width: k, height: S}), t.append(n), i = n
            } else i = t;
            return i
        }, E = function (t) {
            var i, n, a, r, o, s, l;
            return i = $('<div class="chart-text-box">'), y > 1 && 1 == v && i.addClass("single-dimension"), n = $('<div class="chart-text-item">'), i.append(n), t.title.show && t.compareTitle.text && (a = c.getTextCompareTitleElement(e, t), n.append(a)), r = e.info.y.length > 1 ? $('<div class="chart-text-base">') : $('<div class="chart-text-base-one">'), n.append(r), t.title.show && (o = c.getTextTitleElement(e, t), r.append(o)), s = c.getTextValueElement(e, t), r.append(s), D && (l = c.getTextUpdownElement(e, t), n.append(l)), i
        }, I = function (e, t) {
            var i = $('<div class="chart-text-image"></div>'), n = e.render(t);
            return _.forEach(n, function (e) {
                i.append(e)
            }), i
        }, F = function (t, n) {
            n = n || {}, n.title = n.title || {}, n.value = n.value || {}, n.updown = n.updown || {};
            var r = {
                    backgroundSize: n.backgroundSize,
                    spacing: n.spacing,
                    compareTitle: {
                        show: n.title.show,
                        text: void 0,
                        color: n.title.color,
                        fontSize: n.title.fontSize,
                        bold: n.title.bold,
                        italic: n.title.italic
                    },
                    title: {
                        show: n.title.show,
                        text: void 0,
                        color: n.title.color,
                        fontFamily: n.title.fontFamily,
                        fontSize: n.title.fontSize,
                        bold: n.title.bold,
                        italic: n.title.italic
                    },
                    value: {
                        text: void 0,
                        shapeType: void 0,
                        sub: void 0,
                        color: n.value.color,
                        fontFamily: n.value.fontFamily,
                        fontSize: n.value.fontSize,
                        bold: n.value.bold,
                        italic: n.value.italic
                    },
                    updownTitle: {
                        text: void 0,
                        color: n.updown.color,
                        fontFamily: n.updown.fontFamily,
                        fontSize: n.updown.fontSize,
                        bold: n.updown.bold,
                        italic: n.updown.italic
                    },
                    updownValue: {
                        text: void 0,
                        shapeType: void 0,
                        sub: void 0,
                        color: n.updown.color,
                        fontFamily: n.updown.fontFamily,
                        fontSize: n.updown.fontSize,
                        bold: n.updown.bold,
                        italic: n.updown.italic
                    }
                }, o = i.y[t], l = null === o.data[0] ? "--" : +o.data[0],
                c = (e.info.tb_conditional_formatting || []).some(function (e) {
                    if (e.fid === o.fid && e.uniq_id === o.uniq_id) return !0
                });
            if (r.title.text = m, o.series_color) r.value.color = o.series_color; else if (c) if (o.cell_styles && o.cell_styles.length > 0 && o.cell_styles[0]) {
                var d = o.cell_styles[0].shape_type || "";
                r.value.shapeType = d, r.value.color = o.cell_styles[0].color
            } else r.value.color = "#A3ABB0";
            if (o.compare_values && o.compare_values.length && (r.title.text = o.compare_values[0], r.compareTitle.text = o.compare_values.slice(1).join("_")), isNaN(l) ? r.value.text = "--" : (r.value.sub = a.unit_adv, r.value.text = s.dataLabelFormatter(h, l, g)), D) {
                var u, p = i.y[i.y.length - 1].unit_adv, f = i.y.length / 2, v = i.y[t + f], y = v.data[0],
                    b = v.formatter, _ = v.aggregator;
                u = null == y ? "--" : s.dataLabelFormatter(b, y, _);
                var w, d, c = (e.info.tb_conditional_formatting || []).some(function (e) {
                    if (e.fid === v.fid && e.uniq_id === v.uniq_id) return !0
                }), x = v.compare_names[0] || v.nick_name || v.name;
                v.series_color ? w = v.series_color : c ? v.cell_styles && v.cell_styles.length > 0 && v.cell_styles[0] ? (d = v.cell_styles[0].shape_type || "", w = v.cell_styles[0].color) : w = "#A3ABB0" : y > 0 ? (d = "arrow-up", w = "#EF4B4A") : null == y ? (d = void 0, w = "#A3ABB0") : 0 == y ? (d = "arrow-equal", w = "#A3ABB0") : (d = "arrow-down", w = "#40B27E"), r.updownTitle.text = x, r.updownValue.shapeType = d, r.updownValue.text = u, r.updownValue.sub = p, r.updownValue.color = w
            }
            return r
        }, O = function () {
            var t, i = {
                light: {
                    backgroundSize: 1,
                    spacing: .5,
                    title: {
                        show: !0,
                        fontFamily: "Microsoft YaHei",
                        fontSize: 1,
                        color: "#000",
                        fontBold: !0,
                        fontItalic: !1
                    },
                    value: {fontFamily: "Avenir", fontSize: 1, color: "#000", fontBold: !1, fontItalic: !1},
                    updown: {fontFamily: "Microsoft YaHei", fontSize: 1, color: "#000", fontBold: !1, fontItalic: !1}
                },
                dark: {
                    backgroundSize: 1,
                    spacing: .5,
                    title: {
                        show: !0,
                        fontFamily: "Microsoft YaHei",
                        fontSize: 1,
                        color: "#FFF",
                        fontBold: !0,
                        fontItalic: !1
                    },
                    value: {fontFamily: "Avenir", fontSize: 1, color: "#FFF", fontBold: !1, fontItalic: !1},
                    updown: {fontFamily: "Microsoft YaHei", fontSize: 1, color: "#FFF", fontBold: !1, fontItalic: !1}
                }
            };
            return t = "edit" == e.mode || void 0 === e.info.styles || void 0 === e.info.styles.card ? i[r] : e.info.styles.card, e.info.styles = {
                card: t,
                defaultStyles: i
            }, t
        }, M = function () {
            var i, n = O(), a = !1;
            i = void 0 === n.material ? function (e, t) {
                var i = E(t);
                e.append(i)
            } : function (e, t) {
                var i = n.material.options || {}, r = L.factory(i.type, i), o = I(r, t);
                e.append(o), r.afterRender && (a = !0, r.afterRender(e, t))
            };
            for (var r = 0; r < v; r++) {
                var s = F(r, n);
                i(A(r), s)
            }
            if (!a && o(t, s), "edit" === e.mode && (t.find(".chart-text-updown .hd").off("click.nickname").on("click.nickname", function () {
                e.emit("setNickName", "event", 1)
            }), t.find(".chart-text-title").off("click.nickname").on("click.nickname", ".nick-name-value", function () {
                e.emit("setNickName", "event", 0)
            })), f.useUrl && f.cardUrl) {
                var l = /(https|http|ftp|rtsp|mms)/, c = f.cardUrl;
                l.test(f.cardUrl) || (c = "//" + f.cardUrl), t.find(".chart-text-value").on("click", function () {
                    "new" == f.openType ? window.open(c, "_blank") : location.href = c
                }).css("cursor", "pointer")
            }
        };
        l.load().then(function () {
            M()
        }, function () {
            console.log("Avenir加载失败"), M()
        })
    }
}, function (e, t, i) {
    "use strict";
    !function () {
        bdpChart.setWaterfallSpecialOption = function (e) {
            var t, i, n = [], a = e.data, r = e.info, o = e.options.series[0].data, s = bdpChart.helper,
                l = $.cookie("locale") || "zh", c = a.x.length ? a.x[0].data_type : "",
                d = 1 == a.x.length && "date" == c ? "datetime" : "category", u = r.waterfall_setting || {
                    show_sum: !r.xAxis.length || "date" !== r.xAxis[0].data_type,
                    sum_name: "en" === l ? "Sum" : "累计值",
                    color_theme: bdpChart.getColorsByType("C320", "bdp")
                }, p = u.show_sum, f = u.sum_name, h = u && u.color_theme || bdpChart.getColorsByType("C320", "bdp"),
                g = {color: h[1], upColor: h[0]}, m = a.y[0].formatter;
            if ("date" === c) var v = s.getGranularity(a, a.x[0].data.length), y = v.granularity || "day",
                b = v.granularity_name || "", _ = r.xAxis[0].month_start_day || 0;
            if (e.data.x.length) {
                var w = a.x[0].data;
                if ("date" === c && 1 === e.data.x.length) {
                    var x, C = w[w.length - 1] - w[0], k = {
                        year: bdp.utils.isLeapYear(w[w.length - 1]) ? 316224e5 : 31536e6,
                        quarter: 79488e5,
                        month: 26784e5,
                        week: 6048e5,
                        day: 864e5,
                        hour: 36e5,
                        minute: 6e4,
                        second: 1e3,
                        c_second: 1e3,
                        c_minute: 6e4,
                        c_hour: 36e5,
                        g_hour: 36e5,
                        g_minute: 6e4,
                        g_second: 1e3
                    };
                    y = s.setGranularityByDate(y, C);
                    var S = o[o.length - 1].x;
                    if ("month" === y) {
                        var T = new Date(S).getMonth() + 1;
                        [1, 3, 5, 7, 8, 10, 12].indexOf(T) > -1 ? x = S + k[y] : [4, 6, 9, 11].indexOf(T) > -1 ? x = S + k[y] - 864e5 : 2 === T && (x = bdp.utils.isLeapYear(S) ? S + k[y] - 1728e5 : S + k[y] - 2592e5)
                    } else x = S + k[y];
                    t = {name: x, isSum: !0, x: x, formatter: e.data.y[0].formatter}
                } else t = {name: f, isSum: !0, formatter: e.data.y[0].formatter};
                2 === e.data.x.length && e.options.xAxis.categories.push({
                    categories: [u.sum_name],
                    name: ""
                }), angular.forEach(o, function (e, t) {
                    i = {
                        name: e.name,
                        nick_name: a.y[0].nick_name,
                        y: 1 * a.y[0].data[t],
                        formatter: a.y[0].formatter
                    }, "date" === c && (i.x = e.x), n.push(i)
                })
            } else angular.forEach(e.data.y, function (e, t) {
                i = {name: e.nick_name || e.name, nick_name: e.nick_name, y: 1 * e.data[0], formatter: m}, n.push(i)
            }), t = {name: f, isSum: !0, formatter: m};
            p && n.push(t);
            var D = {
                chart: {type: "waterfall"},
                legend: {enabled: !1},
                plotOptions: {
                    waterfall: {
                        lineColor: "dark" === e.theme ? "rgba(255,255,255,0.35)" : "#333",
                        borderWidth: 0,
                        lineWidth: 1,
                        dataLabels: {
                            formatter: function () {
                                var e = this.point.aggregator;
                                return s.dataLabelFormatter(m, this.y, e)
                            }
                        }
                    }
                },
                xAxis: {type: d, labels: {enabled: !0}}
            };
            return e.options.series = [{
                upColor: g.upColor,
                color: g.color,
                data: n
            }], 1 === e.data.x.length && (D.xAxis.labels.formatter = function () {
                var t = this.axis.chart.options.series[0].data, i = this.value;
                if (this.isLast && p && i === t[t.length - 1].x) return s.drawGridPlotLine(this, e, r, "C320", "x_date"), f;
                if ("date" === c) {
                    if ("week" === y) {
                        _ = 1, b && (_ = r.xAxis[0].week_start_day_of_week);
                        var n = new Date(i).getDay();
                        n > _ ? i -= 864e5 * (n - _) : i += 864e5 * (_ - n)
                    }
                    return s.drawGridPlotLine(this, e, r, "C320", "x_date"), s.checkGranularity(y, i, b, _)
                }
                return i
            }), D
        }
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(40), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function (e) {
        function t(e) {
            var t = "http://www.w3.org/2000/svg", i = document.createElementNS(t, "svg"),
                n = document.createElementNS(t, "path");
            return i.setAttribute("width", 0), i.setAttribute("height", 0), i.setAttribute("xmlns", t), n.setAttribute("d", e), i.appendChild(n), document.body.appendChild(i), n = n.getBoundingClientRect(), document.body.removeChild(i), n
        }

        function i(e) {
            this.mapOption = {
                centerLng: _.lng,
                centerLat: _.lat,
                zoom: w
            }, this.animationThreshold = 2e3, this.watermark = e ? e.watermark : null, this.$elem = e.$elem, this.chartInstance = e, this.isMobileMode = e.isMobileMode, this.mobileSingleChart = e.mobileSingleChart
        }

        function n(e) {
            if (e.nick_name) return e.nick_name;
            var t = e.name;
            return e.aggregator && 1 !== !e.is_build_aggregated && E[e.aggregator] && (t += " (" + E[e.aggregator] + ")"), t
        }

        function r(e, t) {
            var i, n = e.map(function (e) {
                    return Number(e)
                }), a = bdpChart.helper.linearRangeColor(t.start_color, t.end_color),
                r = bdpChart.helper.createLinearScale(t, n), o = [], s = t.step;
            if (s > 1) {
                for (i = 0; i < s - 1; i++) o.push(a(i / (s - 1)));
                o.push(a(1))
            }
            return function (e) {
                var t, i = r(e);
                if (s) {
                    var n = Math.floor(s * i);
                    n = Math.min(n, s - 1), t = o[n]
                } else t = a(i);
                return t
            }
        }

        function o(e, t, i) {
            if (isNaN(e)) return 1;
            var n, a = t.length, r = a - 1;
            for (n = 0, a = t.length; n < a; n++) {
                var o = t[n];
                if (e < o[0]) {
                    r = n;
                    break
                }
                if (o[0] <= e && e < o[1]) {
                    r = n;
                    break
                }
            }
            return i ? a - r : r + 1
        }

        function s(e) {
            e || (e = document.createElement("canvas").getContext("2d"));
            var t = e.backingStorePixelRatio || e.webkitBackingStorePixelRatio || e.mozBackingStorePixelRatio || e.msBackingStorePixelRatio || e.oBackingStorePixelRatio || e.backingStorePixelRatio || 1;
            return (window.devicePixelRatio || 1) / t
        }

        function l(e) {
            for (var t = e.split(","), i = t[0].match(/:(.*?);/)[1], n = atob(t[1]), a = n.length, r = new Uint8Array(a); a--;) r[a] = n.charCodeAt(a);
            var o = new Blob([r], {type: i});
            return URL.createObjectURL(o)
        }

        var c = $.isNumeric,
            d = JSON.parse('{"USE_CUSTOM_MAP":false,"MAP_COORDTYPE":"bd09ll","DEFAULT_CENTER":{"lng":105.403119,"lat":38.028658},"DEFAULT_ZOOM":5,"DARK_STYLE_TMS":"https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}","LIGHT_STYLE_TMS":"https://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}","DARK_STYLE_TMS_OPTIONS":{},"LIGHT_STYLE_TMS_OPTIONS":{"subdomains":["1","2","3","4"]}}'),
            u = d && d.USE_CUSTOM_MAP, p = d && d.DARK_STYLE_TMS,
            f = (d && d.DARK_STYLE_TMS_OPTIONS, d && d.LIGHT_STYLE_TMS), h = d && d.DARK_LAYERS,
            g = d && d.LIGHT_LAYERS, m = d && d.WMTS_CFG, v = d && d.CUSTOM_CRS, y = d && d.FORCE_DRAW_EVEYTHING,
            b = d && d.MAP_COORDTYPE, _ = d && d.DEFAULT_CENTER, w = d && d.DEFAULT_ZOOM, x = d && d.MIN_ZOOM,
            C = d && d.MAX_ZOOM, k = (d && d.COPY_RIGHT_TEXT, {
                train: {
                    url: "M1.8623 3.22021C1.8623 4.9978 3.26758 6.4397 5 6.4397C6.73242 6.4397 8.13672 4.9978 8.13672 3.22021C8.13672 1.44214 6.73242 0 5 0C3.26758 0 1.8623 1.44214 1.8623 3.22021ZM10 9.12646C10 8.32288 9.36523 7.67188 8.58203 7.67188H1.41797C0.634766 7.67188 0 8.32288 0 9.12646L0.53418 15.2107L0.541992 15.3037L0.543945 15.3148C0.611328 15.7667 0.992188 16.114 1.45215 16.115H1.72559L1.76465 16.114L1.80469 16.115C2.09766 16.134 2.33594 16.3667 2.37207 16.6646C2.375 16.6846 2.37793 16.705 2.37793 16.726L2.86914 23.0422L2.88379 23.2246C2.95996 23.6655 3.33594 24 3.78613 24H6.20996C6.66797 24 7.04785 23.6549 7.11719 23.2046L7.12891 23.0632L7.62012 16.7356C7.62109 16.7076 7.62305 16.6808 7.62793 16.6528C7.66699 16.3612 7.90332 16.134 8.19531 16.115L8.23438 16.114L8.27344 16.115H8.55078C9 16.114 9.37305 15.7833 9.4541 15.3472L9.46973 15.1659L10 9.12646Z",
                    transform: {angle: null, translate: [26, -7]}
                },
                fly: {
                    url: "M11.3205 0C10.1074 0.000172633 9.70338 5.89522 9.70312 9.75919L0.795819 16.478C0.294729 16.8559 6.47376e-05 17.4472 0 18.0749L0.000151054 18.298L9.88577 14.8564C10.0201 17.1161 10.2011 19.3383 10.3342 20.8498L7.74518 22.4772C7.4539 22.6603 7.27719 22.9801 7.27754 23.3236L7.27736 23.5845L11.3205 22.7711L15.3635 23.5844L15.3636 23.3236C15.3633 22.98 15.1869 22.66 14.8956 22.4771L12.3068 20.8496C12.4396 19.3382 12.6211 17.1159 12.7552 14.856L22.6413 18.2979L22.6411 18.0747C22.6412 17.4471 22.3468 16.8558 21.8455 16.4781L12.9376 9.75917C12.9375 5.91839 12.5332 0.000151054 11.3205 0Z",
                    transform: {angle: 90, translate: [21, 8], scale: [.8, .8]}
                },
                police: {
                    url: "M4.93848 5.95044C3.83691 5.95044 2.7998 5.69922 1.89062 5.26514C2.18359 6.82642 3.43652 8 4.93848 8C6.43945 8 7.69238 6.82642 7.98535 5.26514C7.07715 5.69922 6.04004 5.95044 4.93848 5.95044ZM8.87988 3.10474C9.01562 3.02368 9.65625 2.58716 9.39746 1.55225C9.13867 0.517334 7.6748 0.00390625 4.98242 0C2.29004 0.00390625 0.859375 0.776123 0.600586 1.55225C0.342773 2.32837 0.982422 3.02295 1.11816 3.10474C0.998047 6.20898 9.00195 6.20947 8.87988 3.10474ZM4.98438 1.52686L5.30859 2.14551L5.96875 2.27881L5.50586 2.79443L5.58887 3.49463L4.98242 3.19385L4.37598 3.49463L4.45898 2.79443L4.00098 2.27881L4.66016 2.14551L4.98438 1.52686ZM2.52246 2.58716H3.75293V2.948H2.52246V2.58716ZM6.21191 2.58716H7.44238V2.948H6.21191V2.58716ZM1.41797 8.67188H3.19238L5 15L6.80762 8.67188H8.58203C9.36523 8.67188 10 9.32275 10 10.1265L9.46973 16.1658L9.4541 16.3472C9.37305 16.7834 9 17.114 8.55078 17.115H8.27344L8.23438 17.114L8.19531 17.115C7.90332 17.134 7.66699 17.3611 7.62793 17.6528C7.62305 17.6807 7.62109 17.7078 7.62012 17.7356L7.12891 24.0632L7.11719 24.2046C7.04785 24.6548 6.66797 25 6.20996 25H3.78613C3.33594 25 2.95996 24.6655 2.88379 24.2246L2.86914 24.0422L2.37793 17.7261C2.37793 17.7048 2.375 17.6846 2.37207 17.6646C2.33594 17.3667 2.09766 17.134 1.80469 17.115L1.76465 17.114L1.72559 17.115H1.45215C0.992188 17.114 0.611328 16.7668 0.543945 16.3147L0.541992 16.3037L0.53418 16.2107L0 10.1265C0 9.32275 0.634766 8.67188 1.41797 8.67188ZM5.5 9.67188L6 8.67188H4L4.5 9.67188H5.5ZM5.33887 10L5.67871 11L5 13L4.32031 11L4.66016 10H5.33887Z",
                    transform: {angle: null, translate: [26, -7]}
                },
                car: {
                    url: "M2.73134 1.61279C2.47743 1.70142 2.22255 1.73767 1.99208 1.72729C1.35438 2.40991 0.979384 3.24805 0.979384 4.15381L0.978407 7.38464L0.976454 9.13464C0.613173 9.25317 0.269423 9.4502 0.141493 9.69238C-0.176866 10.2931 0.141493 10.6155 0.141493 10.6155L0.976454 10.4186C0.976454 14.3934 0.984267 19.2139 0.984267 19.2139H0.998915C0.931532 20.3606 0.966688 22.5198 2.04774 23.5385C2.537 24 4.73036 24 6.45009 24C8.16884 24 10.2724 24 10.7606 23.5385C12.1737 22.204 11.7987 18.9199 11.745 18.5049V10.5715L12.8583 10.8344C12.8583 10.8344 13.1766 10.512 12.8583 9.91125C12.6972 9.60742 12.1981 9.37476 11.745 9.27881V6.29126C11.745 6.24561 11.7431 6.20056 11.7401 6.15625V4.15381C11.7401 3.30444 11.4091 2.51453 10.8427 1.85657C10.662 1.84656 10.4716 1.80969 10.2811 1.74316C9.66395 1.52722 9.25575 1.07214 9.27821 0.663818C8.43739 0.243774 7.43544 0 6.35927 0C5.40614 0 4.50966 0.191528 3.73329 0.527466C3.75966 0.937378 3.35145 1.39587 2.73134 1.61279ZM2.4452 7.38452C3.49891 5.06519 9.36122 5.06519 10.4149 7.38452C10.497 7.56506 9.78212 10.6155 9.29286 10.6155H3.42372C2.93446 10.6155 2.34169 7.61328 2.4452 7.38452ZM2.09755 6.46179C2.22548 6.21948 2.35438 5.82861 2.5077 5.3645C2.93934 4.0603 3.56141 2.17737 4.89052 1.38464C4.40028 1.38464 3.23622 1.91431 2.93446 2.76929C2.4452 4.15393 2.09755 6.00024 2.09755 6.46179ZM10.3495 5.3645C10.5028 5.82861 10.6317 6.21948 10.7597 6.46179C10.7597 6.00024 10.412 4.15393 9.92274 2.76929C9.62099 1.91431 8.45692 1.38464 7.96669 1.38464C9.29579 2.17737 9.91786 4.0603 10.3495 5.3645ZM2.09755 9.69226V16.1538C2.09755 16.8922 2.51063 18 2.99989 18L3.00087 17.5298C3.00575 15.0657 3.01454 10.5569 2.09755 9.69226ZM10.9013 16.1538V9.69226C9.98524 10.5563 9.99403 15.0592 9.99891 17.5245L9.99989 18C10.4891 18 10.9013 16.8922 10.9013 16.1538ZM6.49891 18C5.03212 18.0001 3.56434 18.1351 3.56434 18.4615C3.56337 19.385 3.56434 20.7693 4.05458 21.2308C5.03309 22.1528 7.96669 22.1539 8.9452 21.2308C9.43446 20.7693 9.43349 19.3848 9.43349 18.4615C9.43349 18.1346 7.96669 17.9999 6.49891 18Z",
                    transform: {angle: 90, translate: [26, 5]}
                },
                policeStation: {
                    url: "M11.669 0.602081L11 0L10.3311 0.602081L0.331097 9.60208C-0.0795472 9.97153 -0.11275 10.6038 0.256879 11.0143C0.626019 11.4248 1.25834 11.4581 1.66899 11.0887L11 2.69073L20.3311 11.0887C20.7417 11.4581 21.3741 11.4248 21.7432 11.0143C22.1128 10.6038 22.0796 9.97153 21.669 9.60208L11.669 0.602081ZM11 3.84537L19 10.8454V21.8454H3.00004V10.8454L11 3.84537ZM5.50004 10.8454L11 7.84537L16.5 10.8454V15.8454C16.5 18.8454 11 20.8454 11 20.8454C11 20.8454 5.50004 18.8454 5.50004 15.8454V10.8454ZM8.33354 17.8454L11 16.5822L13.6665 17.8454L13.2222 14.898L15 12.7927L12.3335 12.3717L11 9.84537L9.66655 12.3717L7.00004 12.7927L8.77787 14.898L8.33354 17.8454Z",
                    transform: {angle: 90, translate: [11, 0], scale: [.8, .8]}
                },
                hotel: {
                    url: "M2 0H14V19H15V5H22V19H24V20H0V19H2V0ZM4 6H7V8H4V6ZM12 6H9V8H12V6ZM4 10H7V12H4V10ZM12 10H9V12H12V10ZM4 14H7V16H4V14ZM12 14H9V16H12V14ZM4 2H7V4H4V2ZM12 2H9V4H12V2ZM17 7H20V9H17V7ZM20 11H17V13H20V11ZM17 15H20V17H17V15Z",
                    transform: {angle: 90, translate: [11, 0], scale: [.8, .8]}
                },
                circle: {
                    url: "M30 1.5C30 2.32843 28.9168 3 27.5806 3C26.2445 3 0 1.5 0 1.5C0 1.5 26.2445 0 27.5806 0C28.9168 0 30 0.671573 30 1.5Z",
                    transform: {angle: 5, translate: [5, 15]}
                }
            }), S = {funcQueue: [], loadLibInProgress: !1}, T = new FontFaceObserver("icomoon");
        bdpChart.setGisSpec = function (e) {
            window.HOST_TYPE = "2";
            var t = function () {
                var t = e.gisMap || new i(e);
                e.info.meta.layers && e.info.meta.layers.forEach(function (t) {
                    var i = e.info.tb_gis_type[t.tb_id] || 0;
                    t.coordType = A[i]
                }), t.render(e.$elem[0], e.data.layers, e.info.meta), e.gisMap = t, e.$elem.addClass("chart-gis"), e.$elem.data("bdp-chart-instance", e)
            }, n = function () {
                T.load().then(function () {
                    t()
                }, function () {
                    console.log("icomoon加载失败"), t()
                })
            }, a = false;
            if (a && (a = JSON.parse(a)), u) thirdPluginLoader({
                initFun: n,
                libSrc: "//m1.bdp.cn/static/js/lib/mapv/mapv.leaflet.min_0b20f62.js",
                libId: window.L && window.Mapv && window.VizToolControl
            }, S); else {
                window.BMap_loadScriptTime = (new Date).getTime();
                var r = "https://api.map.baidu.com";
                a && a.BAIDU_MAP_HOST && (r = a.BAIDU_MAP_HOST);
                var o = r + "/getscript?v=2.0&ak=1XjLLEhZhQNUzd93EjU5nOGQ";
                thirdPluginLoader({
                    initFun: n,
                    libSrc: o,
                    otherSrc: "//m1.bdp.cn/static/js/lib/mapv/mapv.min_7f3971b.js",
                    libId: window.BMap && window.VizToolControl && window.LegendControl
                }, S)
            }
        };
        var D = bdpChart.helper,
            A = {0: "bd09ll", 1: "gcj02", 2: "gcj02", 3: "gcj02", 4: "gcj02", 5: "wgs84", 6: "gcj02", 7: "wgs84"}, E = {
                SUM: "求和",
                AVERAGE: "平均值",
                AVG: "平均值",
                MIN: "最小值",
                MAX: "最大值",
                COUNT: "计数",
                COUNT_DISTINCT: "去重计数",
                sum: "求和",
                average: "平均值",
                avg: "平均值",
                min: "最小值",
                max: "最大值",
                count: "计数",
                count_distinct: "去重计数",
                YoY: "同比",
                QoQ: "环比",
                TOTAL: "总计",
                MED: "中位数",
                PERCENTILE: "百分位",
                PERCENT_5: "5",
                PERCENT_10: "10",
                PERCENT_25: "25",
                PERCENT_50: "50",
                PERCENT_75: "75",
                PERCENT_90: "90",
                PERCENT_95: "95"
            };
        i.prototype = {
            constructor: i, render: function (e, t, i) {
                var n = this;
                this.layerData = t, this.layerInfo = i.layers, n.$elem = $(e), i.center && (this.mapOption.centerLng = i.center[0], this.mapOption.centerLat = i.center[1]), i.zoom && (this.mapOption.zoom = i.zoom), this.bmap ? (this.clear(), this.setMapStyle(), this.setCenterAndZoom(), this.configData(), this.emit("loaded"), this.chartInstance.emit("load", this.chartInstance), $(e).addClass("bdp-chart-loaded"), this.vizToolControl && this.vizToolControl.reset(), this.legendControl && this.legendControl.reset(), this.labelControl && this.labelControl.reset()) : (this.initBaseMap(e), this.setMapStyle(), this.setCenterAndZoom(), this.once("tilesloaded", function () {
                    n.mobileSingleChart && n.$elem.attr("style", ""), this.initMapv(), this.configData(), this.emit("loaded"), this.chartInstance.emit("load", this.chartInstance), setTimeout(function () {
                        $(e).addClass("bdp-chart-loaded")
                    }, 200)
                }))
            }, initBaseMap: function (t, i) {
                var n = this, r = function (e) {
                    setTimeout(function () {
                        n.emit("tilesloaded")
                    })
                };
                if (u) {
                    var o = {
                        center: [this.mapOption.centerLat, this.mapOption.centerLng],
                        zoom: this.mapOption.zoom,
                        zoomControl: !1,
                        attributionControl: !1,
                        editable: !0,
                        editOptions: {skipMiddleMarkers: !0}
                    };
                    if (v) if ("string" == typeof v) ["EPSG3395", "EPSG3857", "EPSG4326", "Earth", "Simple"].indexOf(v) > -1 ? o.crs = L.CRS[v] : console.log("unsupport crs, please use L.Proj.CRS instead"); else {
                        var s = $.extend(!0, {}, v.options);
                        s.bounds && (s.bounds = L.bounds(s.bounds)), o.crs = new L.Proj.CRS(v.code, v.proj4def, s)
                    }
                    x && (o.minZoom = x), C && (o.maxZoom = C);
                    var l = this.bmap = L.map(t, o), c = bdpChart.language || "zh";
                    L.control.zoom({
                        zoomInTitle: "zh" == c ? "放大" : "Zoom in",
                        zoomOutTitle: "zh" == c ? "缩小" : "Zoom out"
                    }).addTo(l), this._usedMapStyle = this.chartInstance.theme;
                    var d;
                    if (m) {
                        var s = $.extend(!0, s, m.options);
                        "object" == (0, a.default)(s.style) && (s.style = s.style[this._usedMapStyle] || "default"), d = new L.TileLayer.WMTS(m.url, s)
                    } else {
                        var p = "dark" == this._usedMapStyle ? h : g;
                        if (void 0 === p || 0 === p.length) return;
                        var f = p[0];
                        f.options = f.options || {}, d = L.tileLayer(f.url, f.options), d.index = 0
                    }
                    this.tileLayer = d, d.addTo(l), d.on("tileload", r)
                } else {
                    i = e.extend({enableMapClick: !1, enableHighResolution: !0}, i);
                    var l = this.bmap = new BMap.Map(t, i);
                    l.enableAutoResize();
                    var n = this;
                    if (l.addEventListener("tilesloaded", r), this.scrollWheelZoom(!0), this.watermark) {
                        var y = 'url("' + this.watermark.url + '") ' + (this.watermark.repeat || "repeat");
                        $(t).find(".BMap_mask").eq(0).css("background", y)
                    }
                    var b = new BMap.ScaleControl({anchor: BMAP_ANCHOR_TOP_LEFT}), _ = new BMap.NavigationControl;
                    this.bmap.addControl(b), this.bmap.addControl(_)
                }
                var w = this.vizToolControl = new VizToolControl({gisMap: this, rectangleZoom: !v});
                this.bmap.addControl(w);
                var k = this.legendControl = new LegendControl({gisMap: this});
                this.bmap.addControl(k)
            }, showLegend: function () {
                this.legendControl && this.legendControl.show()
            }, hideLegend: function () {
                this.legendControl && this.legendControl.hide()
            }, scrollWheelZoom: function (e) {
                e ? this.bmap.enableScrollWheelZoom() : this.bmap.disableScrollWheelZoom()
            }, setMapStyle: function () {
                if (this._usedMapStyle !== this.chartInstance.theme) {
                    if (window.BMap) {
                        var e;
                        "dark" === this.chartInstance.theme ? (e = "#24273e", this.mapStyle = [{
                            featureType: "all",
                            elementType: "geometry.fill",
                            stylers: {color: "#24273e"}
                        }, {
                            featureType: "road",
                            elementType: "geometry.fill",
                            stylers: {color: "#303349"}
                        }, {
                            featureType: "administrative",
                            elementType: "labels.text.fill",
                            stylers: {color: "#555869"}
                        }, {
                            featureType: "water",
                            elementType: "all",
                            stylers: {lightness: 5, visibility: "on"}
                        }, {featureType: "green", elementType: "all", stylers: {lightness: -5}}, {
                            featureType: "poi",
                            elementType: "labels.icon",
                            stylers: {lightness: 34, visibility: "off"}
                        }, {
                            featureType: "subway",
                            elementType: "all",
                            stylers: {visibility: "off"}
                        }, {
                            featureType: "arterial",
                            elementType: "labels.text.fill",
                            stylers: {color: "#555869", visibility: "on"}
                        }, {
                            featureType: "highway",
                            elementType: "labels.icon",
                            stylers: {visibility: "off"}
                        }, {
                            featureType: "label",
                            elementType: "labels.icon",
                            stylers: {visibility: "off"}
                        }, {
                            featureType: "boundary",
                            elementType: "geometry.fill",
                            stylers: {color: "#303349", weight: "1", lightness: -1}
                        }, {
                            featureType: "arterial",
                            elementType: "labels.text.stroke",
                            stylers: {color: "#22273d"}
                        }, {
                            featureType: "road",
                            elementType: "labels.text.fill",
                            stylers: {color: "#555869"}
                        }, {
                            featureType: "all",
                            elementType: "labels.text.stroke",
                            stylers: {color: "#24273e"}
                        }, {
                            featureType: "all",
                            elementType: "geometry.stroke",
                            stylers: {color: "#24273e"}
                        }, {
                            featureType: "all",
                            elementType: "labels.text.fill",
                            stylers: {color: "#555869"}
                        }]) : (e = "#f8f8f8", this.mapStyle = [{
                            featureType: "all",
                            elementType: "labels.text.fill",
                            stylers: {color: "#999999"}
                        }, {
                            featureType: "all",
                            elementType: "geometry.fill",
                            stylers: {hue: "#d3e3f2", lightness: 50, saturation: -84}
                        }, {
                            featureType: "all",
                            elementType: "labels.text.stroke",
                            stylers: {color: "#ffffff"}
                        }, {
                            featureType: "road",
                            elementType: "geometry.stroke",
                            stylers: {lightness: 50, saturation: -84}
                        }, {
                            featureType: "label",
                            elementType: "labels.icon",
                            stylers: {visibility: "off"}
                        }, {
                            featureType: "highway",
                            elementType: "labels.icon",
                            stylers: {visibility: "off"}
                        }]), this.bmap.setMapStyle({styleJson: this.mapStyle}), this.bmap.getContainer().style.background = e
                    } else {
                        var t = "dark" == this.chartInstance.theme ? p : f;
                        this.tileLayer.setUrl(t)
                    }
                    this._usedMapStyle = this.chartInstance.theme
                }
            }, setCenterAndZoom: function (e, t) {
                if (e && (this.mapOption.centerLng = e.lng, this.mapOption.centerLat = e.lat), t && (this.mapOption.zoom = t), u) ; else {
                    var i = new BMap.Point(this.mapOption.centerLng, this.mapOption.centerLat);
                    this.bmap.centerAndZoom(i, this.mapOption.zoom)
                }
            }, getCenterAndZoom: function () {
                if (!this.bmap) return {};
                var e = this.bmap.getZoom();
                return {center: this.bmap.getCenter(), zoom: e}
            }, initMapv: function () {
                var e = this, t = {useLeaflet: u, map: this.bmap, coordType: b || "bd09ll"};
                e.isMobileMode ? t.click = function (t, i) {
                    t.length && e.showMobTooltip(t[0])
                } : t.hover = function (t, i) {
                    t.length ? e.showTooltip(t[0], i.clientX, i.clientY) : e.hideTooltip()
                };
                this.mapv = new Mapv(t)
            }, configData: function () {
                var e, t = this.layerData, i = this.layerInfo, n = (this.mapv, this), a = !1;
                this._configuredData = [], this._layers = [], this._points = [];
                for (var r = t.length - 1; r >= 0; r--) {
                    var o = t[r];
                    if (!$.isEmptyObject(o) && !i[r].invisible) {
                        var s = o.lng[0].data || [], l = o.lat[0].data || [];
                        s.forEach(function (e, t) {
                            c(e) && c(l[t]) && n._points.push({lng: +e, lat: +l[t]})
                        });
                        var d = n.configLayerData(o, $.extend({zIndex: r + 1}, i[r])), o = new Mapv.Layer(d);
                        n._layers.push(o), n._configuredData.push(d), a = a || i[r].autoViewport === !0
                    }
                }
                a && this._points.length && (e = this.bmap.getViewport(this._points), this.bmap.centerAndZoom(e.center, e.zoom)), n.isMobileMode && n._configuredData.length && n._configuredData[0].data.length && n.showMobTooltip(n._configuredData[0].data[0])
            }, getConfiguredData: function () {
                return this._configuredData
            }, getDrawedLayers: function () {
                return this.mapv.get("layers")
            }, configLayerData: function (e, i) {
                var n, a = {
                        mapv: this.mapv,
                        zIndex: i.zIndex,
                        dataType: "point",
                        drawType: this._getDrawType(i),
                        dataRangeControl: !1,
                        forceDrawEverything: y,
                        coordType: i.coordType
                    }, l = [], c = this, d = i.timeline && i.timeline.enabled && i.timeline.field, u = i.color_setting,
                    p = i.trajectoryStyle || {}, f = i.trajectoryImage, h = i.trajectoryPath || {},
                    g = !$.isEmptyObject(i.bubble_setting);
                if ("heatmap" === i.type) {
                    n = {
                        unit: i.heatmap_setting.unit || "px",
                        size: i.heatmap_setting.radius || 10,
                        type: "radius",
                        maxOpacity: .8
                    }, n.gradient = {.4: "blue", .7: "cyan", .8: "lime", .9: "yellow", "1.0": "red"};
                    var m, v = e.y[0] && e.y[0].data;
                    e.lng[0].data.forEach(function (t, i) {
                        var n = {lng: +t, lat: +e.lat[0].data[i], count: 1};
                        if (v && (m = defined(m) ? Math.max(m, +v[i]) : +v[i], n.count = +v[i]), d) {
                            if ("" == e.timeline[0].data[i] || +e.timeline[0].data[i] < 0) return;
                            n.t = +e.timeline[0].data[i]
                        }
                        l.push(n)
                    }), n.max = m
                } else if ("bubble" === i.type) {
                    if ("ripple" === i.bubble_symbol) n = {
                        fps: 24,
                        rippleStyle: "fill_stroke",
                        fillStyle: "rgb(238, 75, 75)",
                        strokeStyle: "rgb(238, 75, 75)",
                        globalCompositeOperation: "screen",
                        shuffle: !d,
                        stepIn: !d,
                        minScale: .5,
                        maxScale: 3,
                        size: 3
                    }, a.dataType = "ripple"; else {
                        n = {
                            lineWidth: 0,
                            fillStyle: "rgb(238, 75, 75)",
                            fillAlpha: 1,
                            size: "location" == i.bubble_symbol ? 16 : 4,
                            maxScale: "location" === i.bubble_symbol ? 2.5 : 2,
                            minScale: "location" === i.bubble_symbol ? .3 : .5,
                            shape: i.bubble_symbol || "circle"
                        };
                        var b;
                        if (Object.hasOwnProperty.call({
                            fly: 1,
                            train: 1,
                            car: 1,
                            police: 1,
                            policeStation: 1,
                            hotel: 1
                        }, n.shape)) {
                            b = t(k[n.shape].url);
                            var _ = k[n.shape];
                            b = t(_.url);
                            var w = _.transform || {}, x = w.scale || [1, 1];
                            $.extend(n, {
                                image: {
                                    show: !0,
                                    scale: x,
                                    path: _.url,
                                    width: b.width,
                                    height: b.height,
                                    fillStyle: "#5182e4"
                                }, fillStyle: "rgb(238, 75, 75)"
                            }), n.shape = "icon"
                        }
                        "location" === n.shape && (n.icon = {show: !0, font: "icomoon", text: ""})
                    }
                    $.isEmptyObject(i.bubble_setting) || (n.scaleRange = this._getBubbleSize(e, i));
                    var C = u && 1 == i.color_setting.mode && r(e.colors, i.color_setting.range_color),
                        S = this._getLabelAxis(e, i);
                    g && (n.size = 3), e.lng[0].data.forEach(function (t, n) {
                        var a = {lng: +t, lat: +e.lat[0].data[n]};
                        if (u) {
                            var r = e.colors;
                            if (1 == i.color_setting.mode) a.color = Highcharts.Color(C(r[n])).get(); else {
                                var s = bdpChart.getColorsByType("C400", "bdp");
                                a.color = i.color_setting.enum_color_map[r[n]] ? i.color_setting.enum_color_map[r[n]].color : s[n % s.length]
                            }
                        }
                        if (g && (a._count = +e.bubble_sizes[n], a.count = o(+e.bubble_sizes[n], e.bubble_size_groups, i.bubble_setting.reverse)), d) {
                            if ("" == e.timeline[0].data[n] || +e.timeline[0].data[n] < 0) return;
                            a.t = +e.timeline[0].data[n]
                        }
                        a.labels = S.map(function (e) {
                            var t, i = e.data[n];
                            return !e.field.aggregator && "date" === e.field.data_type && i ? (t = i, i = Highcharts.dateFormat("%Y-%b-%e %H:%M:%S", new Date(i))) : (e.field.aggregator || "number" === e.field.data_type) && i && (i = D.dataLabelFormatter(e.field.formatter, i), e.field.unit_adv && (i += e.field.unit_adv)), i = null === i ? "--" : i, {
                                name: e.name,
                                value: i,
                                value_date: t,
                                fid: e.field.fid
                            }
                        }), l.push(a)
                    })
                } else if (i.type.indexOf("trajectory") >= 0) {
                    var b, T = this.chartInstance.theme, L = i.trajectory_symbol || "circle";
                    "d_trajectory" === i.type ? (n = {
                        lineWidth: 1,
                        globalCompositeOperation: "dark" == T ? "screen" : "darken",
                        fillStyle: "#5182e4",
                        size: 0,
                        path: !0,
                        currentPath: {}
                    }, "custom" === L ? f.enabled && (n.icon = {
                        show: !0,
                        type: "image",
                        url: f.url,
                        width: 32,
                        height: 32
                    }, n.transform = {
                        translate: [10, 11],
                        angle: 45
                    }) : "circle" === L ? (n.fillStyle = "#5182e4", n.size = 2, n.icon = {
                        show: !0,
                        type: "circle"
                    }) : (L = k[L]) && (b = t(L.url), n.icon = {
                        show: !0,
                        url: L.url,
                        width: 32,
                        height: 32,
                        fillStyle: "#5182e4"
                    }, n.transform = L.transform, n.strokeStyle = h.lineColor, n.lineWidth = parseFloat(h.lineWidth, 10)), a.dataType = "trailline", $.isEmptyObject(i.bubble_setting) || (n.scaleRange = this._getBubbleSize(e, i))) : (n = {
                        strokeStyle: p.lineColor,
                        lineWidth: parseFloat(p.lineWidth, 10) || .3
                    }, p.startEndPoint && (n.endPointStyle = {
                        enable: !0,
                        color: "#2979FF",
                        size: 2
                    }), p.blend && (n.globalCompositeOperation = "lighter"), a.dataType = "polyline");
                    var A = e.trajectory ? e.trajectory[0].data : [], E = e.sequence ? e.sequence[0].data : [],
                        I = e.lng[0].data, F = e.lat[0].data, O = {}, u = i.color_setting;
                    if (C = u && 1 == i.color_setting.mode && r(e.colors, i.color_setting.range_color), A.length !== E.length) return;
                    A.forEach(function (t, a) {
                        if (O[t] || (O[t] = {geo: []}),
                            !("" == E[a] || +E[a] < 0)) {
                            var r = [+I[a], +F[a], +E[a]];
                            if (u) {
                                var s, l = e.colors;
                                s = 1 == i.color_setting.mode ? Highcharts.Color(C(l[a])).get() : i.color_setting.enum_color_map[l[a]] ? i.color_setting.enum_color_map[l[a]].color : n.fillStyle, r.push(s), O[t].color = s
                            }
                            if (g && "d_trajectory" === i.type) {
                                var c = o(+e.bubble_sizes[a], e.bubble_size_groups, i.bubble_setting.reverse),
                                    d = n.scaleRange[0] + (n.scaleRange[1] - n.scaleRange[0]) * c / e.bubble_size_groups.length;
                                d *= .3, r.push(d)
                            }
                            O[t].geo.push(r)
                        }
                    });
                    for (var M in O) O[M].geo.sort(function (e, t) {
                        return e[2] - t[2]
                    }), O[M].geo.length > 0 && l.push(O[M]);
                    O = null
                } else if ("massive" === i.type) {
                    n = {size: 2, fillStyle: "#94afdf"}, a.context = "webgl", a.preserveDrawingBuffer = !0;
                    var u = i.color_setting,
                        C = u && 1 == i.color_setting.mode && r(e.colors, i.color_setting.range_color);
                    e.lng[0].data.forEach(function (t, n) {
                        var a = {lng: +t, lat: +e.lat[0].data[n]};
                        if (u) {
                            var r = e.colors;
                            if (1 == i.color_setting.mode) a.color = Highcharts.Color(C(r[n])).get(); else {
                                var o = bdpChart.getColorsByType("C400", "bdp");
                                a.color = i.color_setting.enum_color_map[r[n]] ? i.color_setting.enum_color_map[r[n]].color : o[n % o.length]
                            }
                        }
                        if (d) {
                            if ("" == e.timeline[0].data[n] || +e.timeline[0].data[n] < 0) return;
                            a.t = +e.timeline[0].data[n]
                        }
                        l.push(a)
                    })
                } else if ("graph" === i.type) {
                    var N = bdpChart.getColorsByType("C400", "bdp"), j = [];
                    i.y.forEach(function (e, t) {
                        var i = e.series_color || N[t % N.length];
                        j.push(i)
                    });
                    var P = Math.sqrt(s());
                    n = {
                        lineWidth: 0,
                        fillStyle: "rgb(81, 130, 228)",
                        fillAlpha: 1,
                        size: 12 * P,
                        graphType: i.graph_type || "pie",
                        colors: j
                    }, $.isEmptyObject(i.bubble_setting) || (n.scaleRange = this._getBubbleSize(e, i));
                    var g = !$.isEmptyObject(i.bubble_setting), S = this._getLabelAxis(e, i);
                    g && (n.size = 6 * P), e.lng[0].data.forEach(function (t, n) {
                        var a = {lng: +t, lat: +e.lat[0].data[n], values: []};
                        if (e.y.forEach(function (e) {
                            a.values.push(+e.data[n])
                        }), a.sum = a.values.reduce(function (e, t) {
                            return e + +t
                        }, 0), g && (a.count = o(+e.bubble_sizes[n], e.bubble_size_groups, i.bubble_setting.reverse)), d) {
                            if ("" == e.timeline[0].data[n] || +e.timeline[0].data[n] < 0) return;
                            a.t = +e.timeline[0].data[n]
                        }
                        a.labels = S.map(function (e) {
                            var t, r = e.data[n];
                            if (null === r) t = "--"; else if (!e.field.aggregator && "date" === e.field.data_type && r) t = Highcharts.dateFormat("%Y-%b-%e %H:%M:%S", new Date(r)); else if ((e.field.aggregator || "number" === e.field.data_type) && r) {
                                var t = "", o = "pie" === i.graph_type && i.y.indexOf(e.field) > -1;
                                o && (t += (100 * r / a.sum).toFixed(2) + "% ("), t += D.dataLabelFormatter(e.field.formatter, r), e.field.unit_adv && (t += e.field.unit_adv), o && (t += ")")
                            } else t = r;
                            return {name: e.name, value: t}
                        }), l.push(a)
                    })
                }
                if (d) {
                    var R = this;
                    a.animation = "time";
                    var B;
                    if (B = 9 != +i.timeline.speed ? .5 * (+i.timeline.speed || 3) : +i.timeline.fps, a.animationOptions = {
                        tickFormatter: function (e, t) {
                            var n = R.chartInstance, a = "current" == t ? void 0 : "abb";
                            return n._formatTimeWithField(e, i.timeline.field, a)
                        },
                        control: {
                            onInitialize: function (e) {
                                var t = $('<div class="mapv-play-control-progress"><span class="progress-cursor"></span></div>');
                                $(e).append(t);
                                var i;
                                $(R.$elem).off("mousemove.gis_mouse_ctrl").on("mousemove.gis_mouse_ctrl", function (t) {
                                    $(e).removeClass("auto-hide"), clearTimeout(i), i = setTimeout(function () {
                                        $(e).addClass("auto-hide")
                                    }, 3e3)
                                })
                            }, onUpdate: function (e, t, i) {
                                c._points.slice(0, Math.ceil(c._points.length * i)).length, setTimeout(function () {
                                    $(e).find(".mapv-play-control-progress .progress-cursor").css("left", 100 * i + "%")
                                })
                            }, onStateChange: function (e, t) {
                                "play" === t && R.vizToolControl && R.vizToolControl.reset()
                            }
                        },
                        fps: Math.max(B, .05),
                        interval: (i.timeline.interval || 1) + "-" + (i.timeline.field.granularity || "day"),
                        loop: i.timeline.loop,
                        loopInterval: 1e3
                    }, i.type.indexOf("d_trajectory") >= 0) {
                        var z = i.timeline.field.granularity || "day", H = +i.timeline.interval || 1, W = {
                            year: 31536e6,
                            quarter: 7776e6,
                            month: 2592e6,
                            week: 6048e5,
                            day: 864e5,
                            hour: 36e5,
                            minute: 6e4
                        }, q = W[z] * H;
                        if (a.animationOptions.scope = q, 9 != +i.timeline.speed) switch (a.animationOptions.fps = 60, i.timeline.speed) {
                            case 1:
                                a.animationOptions.duration = 6e4;
                                break;
                            case 5:
                                a.animationOptions.duration = 1e4;
                                break;
                            case 3:
                            default:
                                a.animationOptions.duration = 2e4
                        } else {
                            var B = Math.max(+i.timeline.fps, .05);
                            a.animationOptions.fps = B;
                            var E = e.sequence ? e.sequence[0].data : [];
                            if (E.length > 1) {
                                var V = E[E.length - 1] - E[0];
                                V > 0 && (a.animationOptions.duration = V / B)
                            }
                        }
                    }
                } else "bubble" === i.type && "ripple" !== i.bubble_symbol && l.length <= this.animationThreshold && (a.animation = !0, a.animationOptions = {
                    duration: 600,
                    transition: "ease-out"
                });
                return a.drawOptions = n, a.data = l, a.type = i.type, a
            }, showLayer: function (e) {
                e = (this._layers || []).length - e - 1, this._layers[e] && this._layers[e].show(), this.vizToolControl.showSelectResultInLayer(e), this.layerInfo[e].tempInvisible = !1
            }, hideLayer: function (e) {
                e = (this._layers || []).length - e - 1, this._layers[e] && this._layers[e].hide(), this.vizToolControl.hideSelectResultInLayer(e), this.layerInfo[e].tempInvisible = !0
            }, pauseTimeAnimation: function () {
                this.mapv && this.mapv.pauseTimeAnimation()
            }, startTimeAnimation: function () {
                this.mapv && this.mapv.startTimeAnimation()
            }, _getDrawType: function (e) {
                return "heatmap" === e.type ? e.type : "bubble" === e.type || "massive" === e.type || "trajectory" === e.type ? "simple" : "graph" === e.type ? "graph" : void 0
            }, _getGradientColor: function (e) {
                return e.color_setting && 1 == e.color_setting.mode ? {
                    .3: e.color_setting.range_color.start_color,
                    1: e.color_setting.range_color.end_color
                } : null
            }, _getBubbleSize: function (e, t) {
                return t.bubble_setting.size_range
            }, _getLabelAxis: function (e, t) {
                for (var i = {}, a = e.x.concat(e.y), r = t.x.concat(t.y), o = [], s = !1, l = 0, c = a.length; l < c; l++) {
                    var d = r[l], u = a[l], p = (d.name, d.fid + "$" + (d.aggregator || ""));
                    s = !!d.aggregator, i[p] || (i[p] = 1, o.push({
                        name: n(d),
                        data: u.data,
                        type: d.data_type,
                        field: d
                    }))
                }
                if (t.color_setting) {
                    var f = t.color_setting.field[0];
                    f.aggregator = t.color_setting.aggregator;
                    var p = f.fid + "$" + f.aggregator;
                    i[p] || (i[p] = 1, !s && "number" !== f.data_type && f.aggregator && (e.colors = e.colors.map(function (e) {
                        return 1
                    })), o.push({name: n(f), data: e.colors, field: f}))
                }
                if (t.bubble_setting) {
                    var f = t.bubble_setting.field;
                    f.aggregator = t.bubble_setting.aggregator;
                    var p = f.fid + "$" + f.aggregator;
                    i[p] || (i[p] = 1, o.push({name: n(f), data: e.bubble_sizes, field: f}))
                }
                return o
            }, hideTooltip: function () {
                I.hideTooltip()
            }, showTooltip: function (e, t, i) {
                if ((!e.labels || 0 !== e.labels.length) && e.labels) {
                    var n = [];
                    n.push('<table style="margin: 0 6px;">');
                    for (var a = 0, r = e.labels.length; a < r; a++) n.push('<tr><td class = "text-right" style = "padding-right:4px">' + bdp.utils.encodeHTML(e.labels[a].name) + ':</td><td class = "text-left" >' + e.labels[a].value + "</td></tr>");
                    n.push("</table>"), I.showTooltip(t, i, n.join(""))
                }
            }, showMobTooltip: function (e) {
                if ((!e.labels || 0 !== e.labels.length) && e.labels) {
                    this.$elem.find(".sankey-tooltip").remove();
                    var t = [];
                    t.push('<div class="sankey-tooltip">'), t.push('<div class="tooltips-point-wrap pt10"><div class="tooltips-table">');
                    for (var i = 0, n = e.labels.length; i < n; i++) t.push('<div class="tooltips-item"><div class="tooltips-val">' + e.labels[i].value + '</div><div class="tooltips-label">' + bdp.utils.encodeHTML(e.labels[i].name) + "</div></div>");
                    t.push("</div></div></div>"), this.$elem.append(t.join(""))
                }
            }, clear: function () {
                this.mapv && this.mapv.clearAllLayer()
            }, destroy: function () {
                this.clear(), this.mapv = null, u && this.bmap.remove(), this.$elem.removeClass("chart-gis"), this.$elem.empty(), this.$elem.css("backgroundColor", "")
            }, _bMap2ImageSrc: function (e, t, i) {
                e = e || 1;
                var n = "/api/bmap/staticimage", a = this.getCenterAndZoom(), r = {
                    center: a.center.lng + "," + a.center.lat,
                    zoom: a.zoom,
                    width: t,
                    height: i,
                    copyright: 1,
                    ak: "1XjLLEhZhQNUzd93EjU5nOGQ",
                    scale: Math.round(e)
                }, o = [];
                for (var s in r) r.hasOwnProperty(s) && o.push(s + "=" + r[s]);
                return n = n + "?" + o.join("&")
            }, exportImage: function (e) {
                var t = document.createElement("canvas");
                e = Math.min(e, 2);
                var i = t.getContext("2d"), n = e || s(i), a = $.Deferred(), r = this.getBaseMapCanvas(),
                    o = this.getCoverMapCanvas(), l = this.$elem.width(), c = this.$elem.height(), d = l * n, p = c * n;
                t.width = d, t.height = p;
                var f = this.watermark, h = this.watermark, g = 0, m = 0, v = function () {
                    if (u) {
                        var e = r.box.css("transform").replace("translate3d(", "").replace(")", "").split(","),
                            t = parseInt(e[1].replace(" ", "")), s = parseInt(e[0].replace(" ", "")),
                            h = {top: t * n + "px", left: s * n + "px", transform: ""};
                        r.box.css({
                            width: "100%",
                            height: "100%",
                            overflow: "hidden",
                            transform: ""
                        }), r.map.css(h), o.canvasLayer.css(h)
                    } else r.box[0].style.left = parseInt(r.box[0].style.left) * n + "px", r.box[0].style.top = parseInt(r.box[0].style.top) * n + "px";
                    if (r.map.children("div").each(function (e, t) {
                        if (u) {
                            var i = $(t).css("transform").replace("translate3d(", "").replace(")", "").split(","),
                                a = parseInt(i[1].replace(" ", "")), r = parseInt(i[0].replace(" ", ""));
                            $(t).css({position: "absolute", top: a * n + "px", left: r * n + "px", transform: ""})
                        } else t.style.left = parseInt(t.style.left) * n + "px", t.style.top = parseInt(t.style.top) * n + "px";
                        $(t).children("img").each(function (e, t) {
                            if (g = parseInt(t.style.width), m = parseInt(t.style.height), $(t).width(g * n), $(t).height(m * n), u) {
                                var i, a, r;
                                $(t).css("transform").indexOf("matrix") >= 0 ? (i = $(t).css("transform").replace("matrix(", "").replace(")", "").split(","), a = parseInt(i[5]), r = parseInt(i[4])) : $(t).css("transform").indexOf("translate3d") >= 0 && (i = $(t).css("transform").replace("translate3d(", "").replace(")", "").split(","), a = parseInt(i[1].replace(" ", "")), r = parseInt(i[0].replace(" ", ""))), $(t).css({
                                    position: "absolute",
                                    left: r * n + "px",
                                    top: a * n + "px",
                                    transform: ""
                                })
                            } else r = parseInt(t.style.left), a = parseInt(t.style.top), t.style.left = r * n + "px", t.style.top = a * n + "px"
                        })
                    }), f) {
                        var v = i.createPattern(y, f.repeat || "repeat");
                        i.fillStyle = v, i.fillRect(0, 0, d, p)
                    }
                    o.canvasList.each(function (e, t) {
                        var i = Canvas2Image.convertToPNG(t, l, c).src, a = parseInt(t.style.left) * n + "px",
                            r = parseInt(t.style.top) * n + "px",
                            s = '<img src="' + i + '" width="' + l * n + '" height="' + c * n + '" style="position: absolute; top: ' + r + "; left: " + a + ';"/>';
                        o.canvasLayer.append(s)
                    }), o.box.append(o.canvasLayer), r.box.append(o.box), r.box.append(r.map), a.resolve(r.box)
                };
                if (f) {
                    var y = new Image;
                    y.onload = function () {
                        h = !0
                    }, y.src = f.url
                } else v();
                return a.promise()
            }, getBaseMapCanvas: function () {
                var e = {map: [], box: null};
                if (u) {
                    var t = {position: "absolute", top: 0, left: 0};
                    e.box = this.$elem.find(".leaflet-map-pane").clone(), e.box.css(t), e.map = e.box.children(".leaflet-tile-pane").children(".leaflet-layer"), e.map.css(t), e.box.children("div").remove()
                } else {
                    var i = this.$elem.children("div:first-child");
                    e.box = this.$elem.children("div:first-child").clone(), e.box.children("div").remove(), e.map = i.children("div:eq(-3)").clone()
                }
                return e
            }, getCoverMapCanvas: function () {
                var e = {box: null, canvasLayer: null, canvasList: []};
                if (u) {
                    var t = {position: "absolute", top: 0, left: 0};
                    e.box = $("<div></div>"), e.box.css(t), e.box.css("z-index", 100), e.canvasLayer = this.$elem.find(".leaflet-overlay-pane").clone(), e.canvasLayer.css(t), e.canvasLayer.children("canvas").remove(), e.canvasList = this.$elem.find(".leaflet-overlay-pane").children("canvas")
                } else {
                    var i = this.$elem.children("div:first-child");
                    e.box = i.children("div:eq(1)").clone(), e.box.children("div").remove(), e.canvasLayer = i.children("div:eq(1)").children("div:last-child").clone(), e.canvasList = this.$elem.children("div:first-child").children("div:eq(1)").children("div:last-child").children("canvas"), e.canvasLayer.children("canvas").remove()
                }
                return e
            }, toObjectURL: l
        };
        var I = function () {
            var e;
            return {
                showTooltip: function (t, i, n) {
                    e || (e = new Tooltip(void 0, {typeClass: "sankey-tooltip"})), e.content(n).position(t, i).show()
                }, hideTooltip: function () {
                    e && e.hide()
                }
            }
        }();
        bdpChart.Events.mixTo(i)
    }(angular)
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e) {
            var t = bdpChart.language, i = "zh" === t ? "当前图表无数据" : "No data to display";
            e.html('<div class="chart-error"><p>' + i + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
        }

        function t(e) {
            e.info.funnel_setting || (e.info.funnel_setting = {
                show_detail: !0,
                layout: "horizontal"
            }), this.chart = e, this.$elem = e.$elem, this.theme = e.theme, this.d3Elem = d3.selectAll(this.$elem.toArray()), this.data = [], this.tooltip = null, this.displayMode = e.mode, this.layout = e.info.funnel_setting.layout || "horizontal", this.modeColor = e.deviceStyle.bg, this.isMobileMode = e.isMobileMode
        }

        var i, n, a = bdpChart.helper;
        t.prototype = {
            constructor: t, draw: function () {
                return this.$elem.width() * this.$elem.height() != 0 && (this._setOptions(), this._setSeries(), this.data.length ? (this._setOptionsByMode(), this._bindEvents(), new D3Funnel(this.d3Elem).draw(this.data, this.options), void this.chart.emit("load", this.chart, null)) : (e(this.$elem), !1))
            }, formatXaxisLabel: function (e) {
                if ("date" === e.data_type) {
                    var t = e.granularity, i = e.granularity_name || "", n = e.month_start_day || 0;
                    "week" === t && (n = e.week_start_day_of_week);
                    var r = e.data[e.data.length - 1] - e.data[0];
                    t = bdpChart.helper.setGranularityByDate(t, r), e.data.forEach(function (r, o) {
                        e.data[o] = a.checkGranularity(t, r, i, n)
                    })
                }
                return e.data
            }, getColor: function () {
                var e = [], t = this.chart.info.funnel_setting;
                return e = t && t.color_theme || bdpChart.getColorsByType("C330", "bdp"), this.colorTheme = e, d3.scale.ordinal().range(e)
            }, _setOptions: function () {
                var e = this,
                    t = (this.displayMode, !this.chart.isDashboardMode || this.chart.isDashboardMode && ("horizontal" === e.layout && e.chart.gridHeight > 3 || "vertical" === e.layout && e.chart.gridWidth > 3));
                e.options = {
                    chart: {
                        bottomPinch: 1,
                        layout: e.layout || "horizontal",
                        width: e.$elem.width(),
                        height: e.$elem.height(),
                        isMobile: e.isMobileMode
                    },
                    block: {
                        fill: {scale: e.getColor()},
                        stroke: {color: "dark" === e.theme ? "#24273E" : "#fff"},
                        highlight: !0,
                        dynamicHeight: !1,
                        autoSlope: !0,
                        bottomBlock: {minWidth: 40, height: 30, text: {fill: "dark" === e.theme ? "#FFF" : "#333"}}
                    },
                    label: {
                        fontSize: "14px", fill: "#fff", format: function (t, i) {
                            var n = e.chart.data.y[0].formatter;
                            return a.dataLabelFormatter(n, i)
                        }
                    },
                    attrition: {
                        rate: {
                            enabled: t,
                            label: {
                                fontSize: "10px",
                                fill: "dark" === e.theme ? "rgba(255,255,255,0.3)" : "#333",
                                width: 110
                            },
                            lineColor: "dark" === e.theme ? "rgba(255,255,255,0.3)" : "#ccc"
                        },
                        count: {
                            enabled: t,
                            label: {
                                fontSize: "10px",
                                fill: "dark" === e.theme ? "rgba(255,255,255,0.3)" : "#333",
                                width: 110
                            },
                            lineColor: "dark" === e.theme ? "rgba(255,255,255,0.3)" : "#ccc"
                        }
                    }
                }
            }, _setOptionsByMode: function () {
                "fullscreen" !== this.displayMode || this.isMobileMode ? "dark" === this.chart.theme && (this.options = $.extend(!0, this.options, {
                    block: {
                        bottomBlock: {text: {fill: "#fff"}},
                        stroke: {color: "none"}
                    },
                    attrition: {
                        rate: {label: {fill: "rgba(255, 255, 255, .5)"}, lineColor: "rgba(255,255,255,0.3)"},
                        count: {label: {fill: "rgba(255, 255, 255, .5)"}, lineColor: "rgba(255,255,255,0.3)"}
                    }
                })) : this.options = $.extend(!0, this.options, {
                    chart: {animate: 200, padding: [20, 0, 20, 0]},
                    block: {bottomBlock: {text: {}}, stroke: {color: "none"}},
                    label: {fontSize: "14px"},
                    attrition: {
                        rate: {label: {fontSize: "14px", width: 200}},
                        count: {label: {fontSize: "14px", width: 200}}
                    }
                })
            }, _setSeries: function () {
                var e, t, i = this, n = i.chart.data;
                n.x.length ? (t = n.y[0].data, e = i.formatXaxisLabel(angular.copy(n.x[0])) || [], e.forEach(function (e, n) {
                    var a = [e, 1 * t[n]];
                    defined(t[n]) ? a.push(i.colorTheme[n % i.colorTheme.length]) : (a[1] = null, a.push(i.modeColor)), i.data.push(a)
                })) : n.y.forEach(function (e, t) {
                    var n = [e.nick_name || e.name, 1 * e.data[0]];
                    defined(e.data[0]) ? n.push(i.colorTheme[t % i.colorTheme.length]) : (n[1] = null, n.push(i.modeColor)), i.data.push(n)
                }), i.data.length > 0 && (i.data[i.data.length - 1][2] = i.modeColor), i._setBottomWidth()
            }, getEdgeVal: function () {
                for (var e, t = this.data, i = this.data[0][1], n = this.data[0][1], a = 0; a < t.length; a++) e = t[a][1], e < i && (i = e), e > n && (n = e);
                return n * i < 0 || n < 0 ? i = 0 : 0 === n && 0 === i && (n = 40, i = 40), {max: n, min: i}
            }, _setBottomWidth: function () {
                var e = this;
                if (e.data.length) {
                    var t = e.getEdgeVal(), i = null === t.max || isNaN(t.max) ? 1 : Math.min(1, t.min / t.max);
                    this.options = $.extend(!0, this.options, {chart: {bottomWidth: i}})
                }
            }, _bindEvents: function () {
                var e = this;
                e.isMobileMode ? (e.options.events = {}, e.options.events.click = {
                    block: function (t, i) {
                        e.selectedPoint = t, e._showTooltip(t, i)
                    }
                }, e._bindMobDrilldown()) : (e.options.events = {
                    mouseover: {
                        block: function (t, i) {
                            e._showTooltip(t, i)
                        }
                    }, mouseout: {
                        block: function (t, i) {
                            e.tooltip.remove()
                        }
                    }, mousemove: {
                        block: function (t, i) {
                            var n = e.setTooltipPosition();
                            e.updateTooltipPosition(n.x, n.y)
                        }
                    }
                }, e.chart.info.is_drill && (e.options.events.click = {
                    block: function (t, i) {
                        e.chart.emit("drilldown", t, e.chart)
                    }
                }))
            }, _bindMobDrilldown: function () {
                var e = this, t = $(".chart-drilldown");
                e.chart.info.is_drill ? (t.show(), t.off("click.drilldown").on("click.drilldown", function () {
                    e.chart.emit("drilldown", e.selectedPoint, e.chart)
                })) : t.hide()
            }, _showTooltip: function (e, t) {
                var r = this;
                r.tooltip = r.$elem.find(".sankey-tooltip");
                var o, s = r.chart.data, l = r.chart.info, c = e.index, d = r.data[c],
                    u = (c < r.data.length - 1 && r.data[c + 1], r.data[0][1], s.y[0]), p = s.y[0];
                c < r.data.length - 1 && (o = 0 === d[1] ? "--" : (r.data[c + 1][1] / d[1] * 100).toFixed(2) + "%");
                var f;
                c < r.data.length - 1 && (f = 0 === r.data[0][1] || null === r.data[0][1] || void 0 === r.data[0][1] ? "--" : (r.data[c + 1][1] / r.data[0][1] * 100).toFixed(2) + "%"), l.xAxis.length || (u = s.y[c], c < r.data.length - 1 && (p = s.y[c + 1]));
                var h = u.formatter, g = (u.nick_name || u.name, ""), m = "";
                u.hasOwnProperty("unit_adv") && (g = u.unit_adv), p.hasOwnProperty("unit_adv") && (m = p.unit_adv);
                var v, y = e.fill.actual;
                v = "dark" === r.theme ? "#FFF" : y;
                var b = r.data.length - 1;
                if (e.index === b) return !1;
                var _ = d[0], w = r.data[c + 1][0];
                if (l.xAxis.length > 0 && "date" === l.xAxis[0].data_type) {
                    var x = l.xAxis[0].granularity;
                    ["hour", "minute", "second"].indexOf(x) > -1 && (x = "g_" + x), _ = a.checkGranularity(x, r.chart.origin_data.x[0].data[c]), w = a.checkGranularity(x, r.chart.origin_data.x[0].data[c + 1])
                }
                if (r.isMobileMode) {
                    r.tooltip.remove();
                    var C = "";
                    s.x.length && (C = '<p class="tooltips-title">' + a.escapeHtml(s.y[0].nick_name || s.y[1].name) + "</p>"), r.tooltip = $('<div class="sankey-tooltip">' + C + '<div class="tooltips-point-wrap' + (0 === s.x.length ? " pt10" : "") + '"><div class="tooltips-table"><div class="tooltips-item"><div class="tooltips-val" style="color:' + y + '">' + a.dataLabelFormatter(h, e.value) + g + '</div><div class="tooltips-label">' + a.escapeHtml(_) + '</div></div><div class="tooltips-item"><div class="tooltips-val" style="color:' + y + '">' + a.dataLabelFormatter(h, r.data[c + 1][1]) + m + '</div><div class="tooltips-label">' + a.escapeHtml(w) + '</div></div><div class="tooltips-item"><div class="tooltips-val" style="color:' + y + '">' + o + '</div><div class="tooltips-label">' + i + '</div></div><div class="tooltips-item"><div class="tooltips-val" style="color:' + y + '">' + f + '</div><div class="tooltips-label">' + n + "</div></div></div></div></div>"), r.$elem.append(r.tooltip)
                } else if (!r.tooltip.length) {
                    var k = r.setTooltipPosition();
                    r.tooltip = $('<div class="sankey-tooltip" style="position:absolute; border-color:' + y + ";left:" + k.x + "px;top:" + k.y + 'px;"><table class="tooltips-table"></tr><tr><td style="color:' + y + '">' + a.escapeHtml(_) + '：</td><td style="color:' + v + '">' + a.dataLabelFormatter(h, e.value) + g + '</td></tr><tr><td style="color:' + y + '">' + a.escapeHtml(w) + '：</td><td style="color:' + v + '">' + a.dataLabelFormatter(h, r.data[c + 1][1]) + m + '</td></tr><tr><td style="color:' + y + '">' + i + '：</td><td style="color:' + v + '">' + o + '</td></tr><tr><td style="color:' + y + '">' + n + '：</td><td style="color:' + v + '">' + f + "</td></tr></table></div>"), r.$elem.append(r.tooltip)
                }
            }, setTooltipPosition: function () {
                if (null === this.tooltip) return {x: 0, y: 0};
                var e = this.tooltip.outerWidth(), t = this.tooltip.outerHeight(), i = d3.event.clientX + 10,
                    n = d3.event.clientY, a = this.$elem[0].getBoundingClientRect();
                return d3.event.pageX + e > a.right && (i = i - e - 20), d3.event.pageY + t > a.bottom - 30 && (n -= t), {
                    x: i - a.left,
                    y: n - a.top
                }
            }, updateTooltipPosition: function (e, t) {
                this.tooltip && this.tooltip.css({left: e, top: t})
            }, resize: function (e) {
                var t = this, i = e[0].offsetWidth, n = e[0].offsetHeight;
                t.d3Elem && t.d3Elem.select("svg") && t.d3Elem.select("svg").attr("width", i).attr("height", n)
            }
        }, bdpChart.setFunnelSpecialOption = function (a) {
            bdpChart.language || (bdpChart.language = "zh"), i = "zh" === bdpChart.language ? "转化率" : "Conversion Rate", n = "zh" === bdpChart.language ? "到达率" : "Arrival Rate";
            var r = a.$elem;
            if (!a.data.y[0].data.length) return void e(r);
            var o = new t(a);
            o.draw(), $(window).on("resize", function () {
                o.resize(r)
            })
        }
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(336), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        bdpChart.setWordCloudSpec = function (e, t) {
            function i() {
                var e = d3.scale.category20(), t = o.color_setting;
                return t.field && l[0].fid == t.field[0].fid && function (i) {
                    if (0 == i) {
                        var a = bdpChart.colors[t.theme || "default"];
                        if (!t.enum_color_map) {
                            var r = {};
                            angular.forEach(c, function (e, t) {
                                void 0 == r[e] && (r[e] = {name: e, color: a[t % a.length]})
                            }), t.enum_color_map = r
                        }
                        t.enum_color_map = n(c, t.enum_color_map, a), u = t.enum_color_map, e = function (e, i, n, a, r) {
                            if (t.enum_color_map.hasOwnProperty(e)) return t.enum_color_map[e].color
                        }
                    } else {
                        var r = d.map(function (e) {
                                return Number(e)
                            }), o = p.linearRangeColor(t.range_color.start_color, t.range_color.end_color),
                            s = p.createLinearScale(t.range_color, r), l = [], f = t.range_color.step;
                        if (f > 1) {
                            for (var h = 0; h < f - 1; h++) l.push(o(h / (f - 1)));
                            l.push(o(1))
                        }
                        e = function (e, t, i, n, a) {
                            var r = s(t);
                            if (f) {
                                var c = Math.floor(f * r);
                                return c = Math.min(c, f - 1), u[e] = l[c], l[c]
                            }
                            return u[e] = o(r), o(r)
                        }
                    }
                }(t.mode), e
            }

            function n(e, t, i) {
                return t = t || {}, angular.forEach(e, function (e, n) {
                    void 0 == t[e] && (t[e] = {name: e, color: i[n % i.length]})
                }), t
            }

            function r() {
                var i = e.chart_id;
                (0, a.default)({mainChartContainer: t, linkType: "chart_click", ctId: i, totalCount: 1})
            }

            var o = e.info, s = e.data, l = s.x, c = l[0].data || [], d = l[0].word_part_count || [], u = {},
                p = bdpChart.helper, f = e.$elem, h = {width: f.width(), height: f.height()}, g = e.isMobileMode;
            if (function () {
                var i = null;
                t && t.length > 0 && angular.forEach(t, function (e, t) {
                    e.ctId == o.chart_id && (i = e.pointData)
                }), e.pointData = i || {}, e.pointData[0] = e.pointData[0] || [], e.pointData[0][0] = e.pointData[0][0] || []
            }(), o.display_in_3d && !g) {
                var m = function () {
                    var t = o.wordcloud_setting && o.wordcloud_setting.text_shadow, n = i(),
                        a = d3.scale.linear().domain([d[d.length - 1], d[0]]).range([20, 40]),
                        s = c.map(function (e, i) {
                            var r = n(e, d[i]) || "#666", o = {label: e, color: r, fontSize: a(d[i])};
                            return t && (o.textShadow = "0px 0px 5px " + r), o
                        }), u = {
                            entries: s,
                            width: f.width(),
                            height: f.height(),
                            radius: "90%",
                            radiusMin: 75,
                            bgDraw: !1,
                            bgColor: "transparent",
                            opacityOver: 1,
                            opacityOut: .15,
                            opacitySpeed: 6,
                            fov: 800,
                            speed: .5,
                            fontFamily: "PingFang SC, Helvetica Neue, Helvetica, STHeitiSC-Light, WOL_SB, Segoe UI Semibold, Segoe UI, Tahoma, Helvetica, sans-serif",
                            fontSize: "26",
                            fontColor: "#666",
                            fontWeight: "normal",
                            fontStyle: "normal",
                            fontStretch: "normal",
                            fontToUpperCase: !1
                        };
                    e.canDrillDown() ? u.click = function (t) {
                        e.emit("drilldown", {value: t.label, origin_value: t.label}, e)
                    } : "2" == e.optional.linked_chart_type && (u.click = function (t) {
                        var i = e.pointData[0][0][0];
                        i && i.field_value == t.label ? (e.pointData[0][0] = [], this.play()) : (e.pointData[0][0] = [{
                            field: l[0].fid,
                            field_value: t.label,
                            index: 0
                        }], this.pause(), r()), e.emit("refreshLinkedCharts", t.label, e)
                    }), f.svg3DTagCloud(u).data("plugin_SVG3DTagCloud"), setTimeout(function () {
                        f.addClass("bdp-chart-loaded")
                    }, 100)
                }, v = {funcQueue: [], loadLibInProgress: !1}, y = {};
                thirdPluginLoader({
                    initFun: m,
                    libSrc: "//m1.bdp.cn/static/js/lib/wordcloud/svg3dtagcloud_c290ef3.js",
                    libId: window.SVG3DTagCloud
                }, v)
            } else {
                var b, u, _, y, w, x, C;
                !function () {
                    var t = function () {
                        h = {width: f.width(), height: f.height()}
                    }, n = function (e) {
                        if (t(), f.html(""), s(), e ? (x.width = h.width * b, x.height = h.height * b, x.style.width = h.width + "px", x.style.height = h.height + "px") : x = a(h), 0 == d.length) {
                            var i = "zh" === bdpChart.language ? "当前图表无数据" : "No data to display";
                            return void f.html('<div class="chart-error"><p>' + i + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
                        }
                        WordCloud(x, y), f.append(x), $(x).on("wordcloudstop", function () {
                            setTimeout(function () {
                                f.addClass("bdp-chart-loaded")
                            }, 0)
                        })
                    }, a = function (e) {
                        var t = document.createElement("canvas");
                        return t.className = "chart-canvas canvas-" + o.chart_type, t.width = e.width * b, t.height = e.height * b, t.style.width = e.width + "px", t.style.height = e.height + "px", t
                    }, s = function () {
                        var t = null;
                        p(c, d), y.color = i(), t = e.pointData[0][0][0], "2" == e.optional.linked_chart_type && t && (y.highlightWord = t.field_value), m(), S(), T()
                    }, p = function (e, t) {
                        var i = c.map(function (e, i) {
                            return [e, t[i]]
                        });
                        y && (y.list = i)
                    }, m = function () {
                        var e = 0;
                        $.each(c, function (t, i) {
                            var n = Math.sin(w(d[t]) / 100), a = 0, r = 1;
                            /[\w-]/i.test(c[t]) && (a = c[t].match(/[\w-]/gi).length, r = 1 - .5 * a / c[t].length), e += n * (i.length * n) * r
                        }), y.weightFactor = function (t, i, n) {
                            if (i = 1.2 * Math.round(Math.sin(w(i) / 100) * Math.sqrt(h.width * h.height / e)), 1 == b && (i /= 2), h.width / h.height > 2) {
                                var a = .9;
                                1 == b && (a = .8), i *= a
                            }
                            return t.length * i > h.width * b * .9 && (i = h.width * b / t.length * .9), i
                        }
                    }, v = function () {
                        if (!f.find(".sankey-tooltip").length) {
                            var e = document.createElement("div"), t = document.createElement("p"),
                                i = document.createElement("span");
                            t.className = "tooltips-title", i.className = "tooltip-value", e.className = "sankey-tooltip", $(e).css("display", "none"), $(e).append(t).append(i), f.append(e)
                        }
                        return null
                    }, k = function () {
                        if (!f.find(".sankey-tooltip").length) {
                            var e = document.createElement("div");
                            e.className = "sankey-tooltip";
                            var t = document.createElement("div");
                            t.className = "tooltips-point-wrap";
                            var i = document.createElement("div");
                            i.className = "tooltips-table";
                            var n = document.createElement("div");
                            n.className = "tooltips-item";
                            var a = document.createElement("p");
                            a.className = "tooltips-title";
                            var r = document.createElement("div");
                            r.className = "tooltips-val";
                            var o = document.createElement("div");
                            o.className = "tooltips-label", n.appendChild(r), n.appendChild(o), i.appendChild(n), t.appendChild(i), e.appendChild(a), e.appendChild(t), f.append(e)
                        }
                        return null
                    }, S = function () {
                        g ? (k(), y.highlightMaskAlpha = 1, y.click = function (e, t, i) {
                            f.find(".sankey-tooltip");
                            e && (f.find(".tooltips-title").text(e[0]), f.find(".tooltips-val").text(e[1]).css("color", u[e[0]].color), f.find(".tooltips-label").text(C))
                        }, y.list && y.list[0] && y.click(y.list[0])) : (v(), y.hover = function (t, i, n) {
                            var a = f.find(".sankey-tooltip");
                            if (t) {
                                (e.canDrillDown() || "2" == e.optional.linked_chart_type) && $(x).css("cursor", "pointer"), f.find(".tooltips-title").text(t[0]), f.find(".tooltip-value").text(C + "：" + t[1]).css("color", u[t[0]].color);
                                var r = a.outerWidth(), o = a.outerHeight(), s = f[0].getBoundingClientRect(),
                                    l = n.clientX + 10, c = n.clientY;
                                n.pageX + r > s.right && (l = l - r - 20), n.pageY + o > s.bottom - 30 && (c -= o), a.css({
                                    position: "absolute",
                                    left: l - s.left + "px",
                                    top: c - s.top + "px"
                                }), a.show()
                            } else (e.canDrillDown() || "2" == e.optional.linked_chart_type) && $(x).css("cursor", "default"), a.hide()
                        }), f.off("mouseleave.tooltip").on("mouseleave.tooltip", function () {
                            f.find(".sankey-tooltip").hide()
                        })
                    }, T = function () {
                        g ? e.canDrillDown() ? $(".chart-drilldown").show().off("click").on("click", function () {
                            var t = $(".tooltips-title").text();
                            e.emit("drilldown", {value: t, origin_value: t}, e)
                        }) : $(".chart-drilldown").hide() : e.canDrillDown() ? y.click = function (t, i, n) {
                            var a = t[0];
                            e.emit("drilldown", {value: a, origin_value: a}, e)
                        } : "2" == e.optional.linked_chart_type && (y.click = function (t, i, n) {
                            var a = e.pointData[0][0][0];
                            a && a.field_value == t[0] ? e.pointData[0][0] = [] : (e.pointData[0][0] = [{
                                field: l[0].fid,
                                field_value: t[0],
                                index: 0
                            }], r()), e.emit("refreshLinkedCharts", t[0], e)
                        })
                    }, D = function () {
                        f.width() == h.width && f.height() == h.height || (y.clearCanvas = !0, setTimeout(function () {
                            n(!0)
                        }, 10))
                    };
                    b = window.devicePixelRatio || 1, u = {}, _ = "fullscreen" == e.mode ? " #272A30" : "#fff", _ = "transparent", y = {
                        shuffle: !1,
                        rotateRatio: 1,
                        customRotations: [0, -Math.PI / 2, 0, Math.PI / 2, 0],
                        fontFamily: "Arial, Helvetica, Microsoft Yahei, sans-serif",
                        backgroundColor: _
                    }, w = d3.scale.linear().domain([d[d.length - 1], d[0]]).range([20, 157]), C = "en" == bdpChart.language ? "word frequency" : "词频", setTimeout(function () {
                        n()
                    }, 500), $(window).on("resize.wordcloud" + e.ct_id, function () {
                        "edit" != e.mode && D()
                    })
                }()
            }
        }
    }()
}, function (e, t, i) {
    "use strict";
    !function () {
        function e(e) {
            var t = bdpChart.language || "zh", i = "zh" === t ? "当前图表无数据" : "No data to display";
            e.html('<div class="chart-error"><p>' + i + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
        }

        function t(e) {
            e.info.funnel_setting || (e.info.funnel_setting = {
                show_detail: !0,
                layout: "horizontal"
            }), this.$elem = e.$elem, this.d3Elem = d3.selectAll(e.$elem.toArray()), this.data = {
                $elem: [],
                dataArray: [],
                width: "",
                height: ""
            }, this.chart = e, this.theme = e.theme, this.tooltip = null, this.data.$elem = d3.selectAll(e.$elem.toArray()), this.modeColor = this.chart.deviceStyle.bg, this.isMobileMode = e.isMobileMode, this.isDashboardMode = e.isDashboardMode
        }

        var i = bdpChart.helper;
        t.prototype = {
            constructor: t, draw: function () {
                var t = this.chart.mode, i = 0, n = 0;
                if ("edit" === t && (n = 64, i = 80), this.isMobileMode && (n = 32, i = 32, this.isDashboardMode && (n = 0, i = 0)), this.data.height = this.$elem[0].offsetHeight - n, this.data.width = this.$elem[0].offsetWidth - i, this.$elem.width() * this.$elem.height() == 0) return !1;
                var a = this._structData(this._normalizeData());
                if (!a.length || 1 === a.length && 1 === a[0].firstNull) return e(this.$elem), !1;
                this.data.dataArray = a, this._setOptions(), this._bindEvents(), new D3Sunburst(this.data, this.options), this.chart.emit("load", this.chart, null)
            }, _normalizeData: function () {
                var e = this, t = angular.copy(e.chart.data), i = bdpChart.language || "zh", n = t.y[0].data;
                e.chart.misMatchNum = [];
                for (var a = n.length - 1; a >= 0; a--) if (n[a] < 0 || null === n[a]) {
                    n.splice(a, 1);
                    var r, o = [];
                    t.x.forEach(function (t, n) {
                        r = "" === t.data[a] ? "zh" === i ? "(空白)" : "(blank)" : e.chart._formatXAxisLabel(t.data[a], n, !0), o.push(r), t.data.splice(a, 1)
                    }), e.chart.misMatchNum.push(o.join("-"))
                }
                return t
            }, _makeFirstLevelPosItem: function (e, t) {
                for (var i, n = e.data, t = t || 0, a = [], r = {}, o = this.chart.info.xAxis, s = 0, l = 0; l < o.length; l++) if (o[l].fid === e.fid) {
                    s = l;
                    break
                }
                for (var l = 0, c = n.length; l < c; l++) if (i = this.chart._formatXAxisLabel(n[l], s, !0), r = {
                    originData: n[l],
                    name: i,
                    startPos: l + t,
                    endPos: "",
                    children: [],
                    colorArray: [],
                    color: "",
                    size: ""
                }, 0 === l) a.push(r), 1 === c && (r.endPos = l + t); else if (l > 0 && n[l] !== n[l - 1]) {
                    a.push(r);
                    var d = a.length, u = l - 1 + t;
                    if (a[d - 2].endPos = u, l === c - 1) {
                        var p = l + t;
                        a[d - 1].endPos = p
                    }
                } else if (l === c - 1) {
                    var d = a.length, p = l + t;
                    a[d - 1].endPos = p
                }
                return a
            }, _makeOtherPosItem: function (e, t) {
                for (var i, n, a = e.data, r = [], o = [], s = angular.copy(e), l = 0, c = t.length; l < c; l++) {
                    i = t[l].startPos, n = t[l].endPos, s.data = [];
                    for (var d = i, u = n + 1; d < u; d++) s.data.push(a[d]);
                    r = this._makeFirstLevelPosItem(s, i), o = o.concat(r)
                }
                return o
            }, getPosArr: function (e, t) {
                for (var i, n, a = [], r = e.length, o = 0; o < r; o++) i = 0 === o ? this._makeFirstLevelPosItem(e[o]) : this._makeOtherPosItem(e[o], a[a.length - 1]), a.push(i);
                n = a[a.length - 1];
                for (var o = 0, s = n.length; o < s; o++) n[o].size = 1 * t[o];
                return a
            }, makeJsonData: function (e) {
                for (var t, i, n = e.length - 1; n >= 1; n--) t = e[n], i = e[n - 1], this.pushLevelItem(i, t);
                return i
            }, pushLevelItem: function (e, t) {
                for (var i, n, a, r, o, s, l, c = 0, d = 0, u = e.length; d < u; d++) {
                    i = e[d], n = i.startPos, a = i.endPos, c = 0;
                    for (var p = 0, f = t.length; p < f; p++) r = t[p], o = parseFloat(r.size), s = r.startPos, l = r.endPos, s >= n && l <= a && (c += o, i.size = c, ["", "(空白)", "(Blank)"].indexOf(r.name) > -1 && (r.firstNull = 1, r.children = []), i.children.push(r))
                }
            }, attrChildrenColor: function (e) {
                var t = e.children;
                if (t) for (var i = 0; i < t.length; i++) t[i].color = e.color, this.attrChildrenColor(t[i])
            }, _attrColor: function (e, t) {
                var i, n = t.data.x, a = t.info, r = bdpChart.colors.default, o = r.length, s = {}, l = a.color_setting,
                    c = e.length, d = [];
                n[0].data.forEach(function (e, t) {
                    "" !== e && ["(空白)", "(Blank)"].indexOf(e) < 0 && d.indexOf(e) < 0 && d.push(null === e ? null : e)
                }), l.enum_color_map ? s = l.enum_color_map : d.forEach(function (e, t) {
                    "" !== e && ["(空白)", "(Blank)"].indexOf(e) < 0 && !s.hasOwnProperty(e) && (s[e] = {
                        name: e,
                        color: r[t % o]
                    })
                });
                for (var u = 0; u < c; u++) i = e[u], ["date", "sub_date"].indexOf(n[0].data_type) > -1 && s.hasOwnProperty(i.originData) ? i.color = s[i.originData].color : i.color = s[i.name] ? s[i.name].color : r[u], this.attrChildrenColor(i);
                return e
            }, _structData: function (e) {
                for (var t = this, i = (t.chart.data, e.y[0].data), n = this.makeJsonData(this.getPosArr(e.x, i)), a = 0, r = n.length - 1; r >= 0; r--) "(空白)" !== n[r].name && "" !== n[r].name || (n[r].firstNull = 1, n[r].children = []), a += n[r].size;
                return n.size = a, n = t._attrColor(n, t.chart)
            }, setTooltipPosition: function () {
                if (null === this.tooltip) return {x: 0, y: 0};
                var e = this.tooltip.outerWidth(), t = this.tooltip.outerHeight(), i = d3.event.clientX + 10,
                    n = d3.event.clientY, a = this.$elem[0].getBoundingClientRect();
                return d3.event.pageX + t > a.right && (i = i - e - 20), d3.event.pageY + t > a.bottom - 30 && (n -= t), {
                    x: i - a.left,
                    y: n - a.top
                }
            }, _setOptions: function () {
                var e, t = this,
                    i = (this.displayMode, !this.chart.isDashboardMode || this.chart.isDashboardMode, Math.min(t.data.height, t.data.width)),
                    n = t.chart.info;
                e = i < 250 ? "10" : i >= 250 && i < 450 ? "12" : i >= 450 && i < 850 ? "14" : "16", t.options = {
                    chart: {
                        isMobile: t.isMobileMode,
                        fontSize: e,
                        modeColor: t.modeColor,
                        showProportion: n.sunburst_setting && n.sunburst_setting.showProportion || "text"
                    }, dataLabels: {allowOverlap: n.show_all_datalabels}, series: [], color: []
                }, n && n.style && n.style.labels && (t.options.dataLabels.style = n.style.labels.style)
            }, _getSum: function (e) {
                return e.parent ? this._getSum(e.parent) : e.size ? void 0 : e.children.size
            }, _getTitle: function (e) {
                var t = e.name;
                return e.depth > 1 ? (t = e.parent.name + "-" + t, this._getTitle(e.parent)) : e.depth, t
            }, _getHoverColor: function (e) {
                var t = d3.rgb(e.color), i = t.r + 25 > 255 ? 255 : t.r + 25, n = t.g + 25 > 255 ? 255 : t.g + 25,
                    a = t.b + 25 > 255 ? 255 : t.b + 25;
                return d3.rgb(i, n, a).toString()
            }, _showTooltip: function (e, t) {
                var n = this, a = "zh" === bdpChart.language ? "占比" : "rate", r = n.chart.data,
                    o = d3.scale.linear().range([0, 2 * Math.PI]), s = {
                        startA: Math.max(0, Math.min(2 * Math.PI, o(e.x))),
                        endA: Math.max(0, Math.min(2 * Math.PI, o(e.x + e.dx)))
                    }, l = Math.abs(s.startA - s.endA), c = $(n.$elem).find("#path-" + t);
                if (e.originColor = c.css("fill"), l > .01 && !e.firstNull) {
                    n.tooltip = n.$elem.find(".sankey-tooltip");
                    var d = d3.hsl(e.color), u = e.depth % 2 == 1 ? e.color : d3.hsl(d.h, d.s, 1.15 * d.l),
                        p = n._getSum(e), f = e.size / p * 100, h = n.chart.info, g = n._getTitle(e),
                        m = "default" === n.theme ? "#8E8E8E" : "#fff", v = h.y[0].nick_name || h.y[0].name,
                        y = h.yAxis[0].unit_adv || "",
                        b = bdpChart.helper.dataLabelFormatter(h.yAxis[0].formatter, parseFloat(e.size));
                    if (e.parent) if (d3.selectAll(".node").style("opacity", 1), c.css("opacity", .8), n.isMobileMode) n.tooltip.remove(), n.tooltip = $('<div class="sankey-tooltip"><p class="tooltips-title">' + g + '</p><div class="tooltips-point-wrap' + (0 === r.x.length ? " no-dimension" : "") + '"><div class="tooltips-table"><div class="tooltips-item"><div class="tooltips-val" style="color:' + u + '">' + b + i.escapeHtml(y) + '</div><div class="tooltips-label">' + i.escapeHtml(v) + '</div></div><div class="tooltips-item"><div class="tooltips-val" style="color:' + u + '">' + f.toFixed(1) + '</div><div class="tooltips-label">' + a + "</div></div></div></div></div>"), n.$elem.append(n.tooltip); else {
                        var _ = n.setTooltipPosition();
                        n.tooltip.length || (n.tooltip = $('<div class="sankey-tooltip" style="position:absolute; border-color:' + u + ";left:" + _.x + "px;top:" + _.y + 'px;"><p class="text-center tooltips-title" style="color: ' + m + '">' + g + '</p><table class="tooltips-table"></tr><tr><td class="nowrap" style="color:' + u + ';text-align: right; max-width: 170px; overflow:hidden; text-overflow:ellipsis ">' + i.escapeHtml(v) + '：</td><td style="color:' + u + '">' + b + i.escapeHtml(y) + '</td></tr><tr><td style="color:' + u + '; text-align: right">' + a + '：</td><td style="color:' + u + '">' + f.toFixed(1) + "%</td></tr></table></div>"), n.$elem.append(n.tooltip))
                    }
                }
            }, _bindEvents: function () {
                var e = this;
                e.isMobileMode ? e.options.events = {
                    click: function (t, i) {
                        e._showTooltip(t, i)
                    }
                } : e.options.events = {
                    mouseover: function (t, i) {
                        e._showTooltip(t, i)
                    }, mouseout: function (t, i) {
                        d3.select(e.$elem[0]).select("#path-" + i).style("fill", t.originColor), e.tooltip && e.tooltip.remove()
                    }, mousemove: function (t, i) {
                        var n = e.setTooltipPosition();
                        e.updateTooltipPosition(n.x, n.y)
                    }
                }
            }, updateTooltipPosition: function (e, t) {
                this.tooltip && this.tooltip.css({left: e, top: t})
            }, resize: function (e) {
                var t = this, i = e.width(), n = e.height();
                t.d3Elem && t.d3Elem.select("svg") && t.d3Elem.select("svg").attr("width", i).attr("height", n)
            }
        }, bdpChart.setSunburstSpecialOption = function (i) {
            var n = i.$elem;
            if (!i.data.y[0] || !i.data.y[0].data.length) return void e(n);
            var a = new t(i);
            $(window).on("resize", function () {
                a.resize(n)
            }), i.once("load", function () {
                var e = i.misMatchNum, t = bdpChart.language || "zh";
                if (e.length && "edit" === i.mode && "C360" === i.info.chart_type) {
                    var n = "";
                    n = "zh" === t ? "有" + e.length + "项负值或空值数据" : "There are " + e.length + " negative or null values.";
                    var a = '<div class="map-mismatch-text pa guide"><p><a class="cursor-pointer">' + n + '</a></p><div class="guide-tip dropdown-wrap">' + bdp.utils.encodeHTML(e.join("、")) + "</div></div>";
                    i.$elem.append(a)
                }
            }), i.on("reflow", function () {
                a.resize(n)
            }), a.draw()
        }
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    var a = i(40), r = n(a), o = i(41), s = n(o), l = i(1), c = n(l);
    !function (e) {
        function t(e, t, i) {
            var n = document.createElement(e);
            if (null === t || "null" == t || void 0 === t || "undefined" === t) {
                var a = document.createTextNode("");
                n.appendChild(a)
            } else {
                var a = document.createTextNode(t);
                n.appendChild(a)
            }
            return i && (n.className = i), n
        }

        function i(e) {
            var t = !0, n = "";
            if (f(e)) for (var a, r = 0; r < e.length; r++) {
                if (a = e[r], !g(a)) {
                    n = "不是一个标准的数据格式，每一项必须是一个{}", t = !1;
                    break
                }
                if (void 0 === a.name) {
                    n = "缺少name属性", t = !1;
                    break
                }
                if (a.children) {
                    var o = i(a.children);
                    if (!o.valid) return {valid: !1, errMsg: o.errMsg}
                }
            } else n = "非数组格式", t = !1;
            return {valid: t, errMsg: n}
        }

        function n(e) {
            var t, i = [];
            return e.forEach(function (e, n) {
                var a = !!e.info.tb_statistic.col;
                t = e.data, t.x.length ? i.push(t.x[0].data.length + a) : t.y.length ? i.push(t.y[0].data.length + a) : t.y_optional.length && i.push(t.y_optional[0].data.length + a)
            }), i.sort(function (e, t) {
                return e - t
            }).pop()
        }

        function a(e) {
            var t, i = {};
            return e.forEach(function (e, n) {
                t = e.info, t.xAxis.forEach(function (e, t) {
                    i["%T" + n + ".X" + t + "%"] = e
                }), t.yAxis.forEach(function (e, t) {
                    i["%T" + n + ".Y" + t + "%"] = e
                }), (t.compare_axis || []).forEach(function (e, t) {
                    i["%T" + n + ".C" + t + "%"] = e
                }), (t.yAxisOptional || []).forEach(function (e, t) {
                    i["%T" + n + ".Y_OPTIONAL" + t + "%"] = e
                })
            }), i
        }

        function o(e, t) {
            var i, n, a, r = [];
            return e.forEach(function (e, o) {
                i = e.info;
                var s = e.data.y, l = i.tb_statistic && i.tb_statistic.row;
                a = i.compare_axis.length && i.compare_setting && i.compare_setting.sort.index || 0, i.xAxis.forEach(function (e, i) {
                    if (n = "%T" + o + ".X" + i + "%", o > 0) {
                        var a = !1;
                        (t || []).forEach(function (e) {
                            e.indexOf(n) > -1 && (a = !0)
                        }), a || r.push({name: n, _refName: n, children: []})
                    } else r.push({name: n, _refName: n, children: []})
                }), l && "left" === i.tb_statistic.row_pos && r.push({name: s[0].name, children: []});
                var c = [{name: "", _refName: "", children: []}], d = [{name: "", _refName: "", children: []}];
                if (0 === a) {
                    for (var u = (i.compare_axis || []).length; u > 0;) n = "%T" + o + ".C" + (u - 1) + "%", c[0].name && (c[0].children = [C(c[0])]), c[0].name = n, c[0]._refName = n, u--;
                    i.yAxis.forEach(function (e, t) {
                        n = "%T" + o + ".Y" + t + "%", r.push({name: n, _refName: n, children: c[0].name ? C(c) : []})
                    })
                } else if (a > 0) {
                    for (var p = [], u = (i.compare_axis || []).length; u > 0 && a < u;) n = "%T" + o + ".C" + (u - 1) + "%", c[0].name && (c[0].children = [C(c[0])]), c[0].name = n, c[0]._refName = n, u--;
                    for (i.yAxis.forEach(function (e, t) {
                        n = "%T" + o + ".Y" + t + "%", p.push({name: n, _refName: n, children: c[0].name ? C(c) : []})
                    }); a > 0;) n = "%T" + o + ".C" + (a - 1) + "%", d[0].name ? d[0].children = [C(d[0])] : d[0].children = C(p), d[0].name = n, d[0]._refName = n, a--;
                    r.push(d[0])
                }
                s.forEach(function (e, t) {
                    "virtual" === e.data_type && e.parent_uniq_id && r.push({name: s[t].name, children: []})
                }), l && "right" === i.tb_statistic.row_pos && r.push({name: s[s.length - 1].name, children: []})
            }), r
        }

        function l(e) {
            for (var t = e.map(function (e) {
                return e.length
            }).sort().pop(), i = [], n = 0; n < t;) i[n] = [], e.forEach(function (e, t) {
                var a = e[n] || {};
                for (var r in a) a.hasOwnProperty(r) && i[n].push(a[r])
            }), n++;
            return i
        }

        function d(e, t) {
            var i = [], n = a(t);
            return e.forEach(function (e) {
                var t = [];
                for (var a in n) n.hasOwnProperty(a) && (name = n[a].nick_name || n[a].name, name === e && t.push(a));
                t.length && i.push(t)
            }), i
        }

        function u(e, t, i, r) {
            this.theadRows = 0, this.views = C(e), this.$elem = t, this.totalData = n(this.views), this.colSummaryPos = "bottom", this.rowSummaryPos = "right", this.varMap = a(this.views), this.ctId = i, this.chartInfo = r
        }

        function p(e) {
            return e && e.document && e.location && e.alert && e.setInterval
        }

        function f(e) {
            return void 0 !== e && "[object array]" === Object.prototype.toString.call(e).toLowerCase()
        }

        function h(e) {
            return "string" == typeof e
        }

        function g(e) {
            return void 0 !== e && "[object object]" === Object.prototype.toString.call(e).toLowerCase()
        }

        function m(e) {
            return "[object Date]" === Object.prototype.toString.call(e)
        }

        function v(e) {
            return "[object RegExp]" === Object.prototype.toString.call(e)
        }

        function y(e) {
            return "function" == typeof e
        }

        function b(e, t) {
            if (e.indexOf) return e.indexOf(t);
            for (var i = 0; i < e.length; i++) if (t === e[i]) return i;
            return -1
        }

        function _(e, t) {
            if (e === t) return !0;
            if (null === e || null === t) return !1;
            if (e !== e && t !== t) return !0;
            var i, n, a, o = void 0 === e ? "undefined" : (0, r.default)(e),
                s = void 0 === t ? "undefined" : (0, r.default)(t);
            if (o == s && "object" == o) {
                if (!f(e)) {
                    if (m(e)) return m(t) && e.getTime() == t.getTime();
                    if (v(e) && v(t)) return e.toString() == t.toString();
                    if (f(t)) return !1;
                    a = {};
                    for (n in e) if ("$" !== n.charAt(0) && !y(e[n])) {
                        if (!_(e[n], t[n])) return !1;
                        a[n] = !0
                    }
                    for (n in t) if (!a.hasOwnProperty(n) && "$" !== n.charAt(0) && void 0 !== t[n] && !y(t[n])) return !1;
                    return !0
                }
                if (!f(t)) return !1;
                if ((i = e.length) == t.length) {
                    for (n = 0; n < i; n++) if (!_(e[n], t[n])) return !1;
                    return !0
                }
            }
            return !1
        }

        function w(e) {
            if (null == e || p(e)) return !1;
            var t = e.length;
            return !(1 !== e.nodeType || !t) || (h(e) || f(e) || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)
        }

        function x(e, t, i) {
            var n;
            if (e) if (y(e)) for (n in e) "prototype" == n || "length" == n || "name" == n || e.hasOwnProperty && !e.hasOwnProperty(n) || t.call(i, e[n], n); else if (e.forEach && e.forEach !== x) e.forEach(t, i); else if (w(e)) for (n = 0; n < e.length; n++) t.call(i, e[n], n); else for (n in e) e.hasOwnProperty(n) && t.call(i, e[n], n);
            return e
        }

        function C(e, t, i, n) {
            if (p(e)) throw"Can't copy! Making copies of Window or Scope instances is not supported.";
            if (t) {
                if (e === t) throw"Can't copy! Source and destination are identical.";
                if (i = i || [], n = n || [], g(e)) {
                    var a = b(i, e);
                    if (a !== -1) return n[a];
                    i.push(e), n.push(t)
                }
                var r;
                if (f(e)) {
                    t.length = 0;
                    for (var o = 0; o < e.length; o++) r = C(e[o], null, i, n), g(e[o]) && (i.push(e[o]), n.push(r)), t.push(r)
                } else {
                    x(t, function (e, i) {
                        delete t[i]
                    });
                    for (var s in e) r = C(e[s], null, i, n), g(e[s]) && (i.push(e[s]), n.push(r)), t[s] = r
                }
            } else t = e, e && (f(e) ? t = C(e, [], i, n) : m(e) ? t = new Date(e.getTime()) : v(e) ? t = new RegExp(e.source) : g(e) && (t = C(e, {}, i, n)));
            return t
        }

        var k, S, T = {center: " text-center", left: " text-left", right: " text-right"}, D = bdpChart.language || "zh";
        "zh" == D ? ("当前图表无数据", "加载更多...", "表格数据超过100条不支持行列转置", k = "总计", S = "小计") : ("No data to display", "Load more...", "Table data more than 100 do not support transpose", k = "Summary", S = "Subtotal"), u.prototype = {
            theadCells: [],
            theadCellsTmp: [],
            canRender: !0,
            render: function (e) {
                var t = this;
                if (this.fixedColumn = this.chartInfo.meta.fixedColumn, !t.canRender) return !1;
                t.destory(), t.meta = e || o(t.views, t.joinArgs), t.setHeadMeta(), "JOIN" === t.action ? t._joinTable(t.joinArgs) : "UNION" === t.action || "CUSTOM" === t.action && t._doCustomRender()
            },
            viewOrder: function (e) {
                var t = !0, i = this;
                if (e && ($.isArray(e) ? e.length !== this.views.length && (t = !1, alert("请确认设置了每一个视图的顺序")) : (t = !1, alert('视图顺序请遵循["第一个视图名称","第N个视图名称",...]的形式'))), i.canRender = t, t && e) {
                    var n = [];
                    e.forEach(function (e) {
                        i.views.forEach(function (t, i) {
                            t.info.title === e && n.push(t)
                        })
                    }), i.views = n, i.varMap = a(this.views)
                }
                return t
            },
            joinTable: function (e) {
                var t = this, i = !0, n = !1;
                if (!this.canRender) return !1;
                if (e) if ($.isArray(e)) {
                    var a = $.isArray(e[0]);
                    a ? i = e.every(function (e, t) {
                        return $.isArray(e)
                    }) : (i = e.every(function (e, t) {
                        return "string" == typeof e
                    }), n = !0)
                } else i = !1;
                if (i) {
                    if (this.joinArgs = n ? d(e, this.views) : e, n && this.joinArgs.length !== e.length) return alert("请确保每一个数据集中均存在join条件中的每一项值"), !1;
                    if (n) for (var r = 0; r < t.views.length; r++) {
                        for (var o = t.views[r], s = 0, l = 0; l < e.length; l++) for (var c = 0, u = o.data.x.length; c < u; c++) {
                            var p = o.data.x[c].nick_name || o.data.x[c].name;
                            if (p === e[l]) {
                                s++;
                                break
                            }
                        }
                        if (s !== e.length) return alert("请确保每一个数据集中均存在join条件中的每一项值，否则会造成数据膨胀"), !1
                    }
                    this.action = "JOIN"
                } else alert("join条件不合法");
                return t.canRender = i, i
            },
            unionTable: function () {
                this.action = "UNION"
            },
            _drawTable: function () {
                var e = this, t = document.createElement("table");
                t.setAttribute("class", "bdp-table-normal bdp-table-custom");
                var i = this.initHeadHTML();
                t.appendChild(i);
                var n = this.initBodyHTML();
                t.appendChild(n), this.$elem.html(t), this.getTbMergeCell() && this.mergeCell(), this.viewData = null, this.theadCellsTmp = null;
                var a = !1, r = 0, o = 1;
                this.fixedColumn && (a = !!this.fixedColumn.fixedColumn, r = this.fixedColumn.fixedColumns, o = e.fixedColumn.rowNum), $(t).fixedHeaderTable({
                    borderCollapse: !1,
                    fixedColumn: a,
                    fixedColumns: r,
                    rowNum: o
                });
                var s = $(".fht-tbody").last().find("table"), l = s.find("thead").height(), c = s.html();
                if (a) {
                    var d = $(".fht-fixed-column .fht-thead"), u = $(".fht-fixed-column .fht-tbody"),
                        p = d.find("table"), f = u.find("table");
                    p.html(c), f.html(c), u.css({"margin-top": -l, height: u.height() + l})
                }
                var d = $(".fht-thead"), p = d.last().find("table");
                if (p.html(c), d.css({height: l, overflow: "hidden"}), f) {
                    $firstThChildren = f.find("thead > tr > *:lt(" + r + ")");
                    var h = $firstThChildren.eq($firstThChildren.length - 1), g = h.outerWidth(!0), m = h.offset().left;
                    fixedColumnWidth = 1 * o, fixedColumnWidth = fixedColumnWidth + g + m, $(".fht-fixed-column").css({
                        height: 0,
                        width: fixedColumnWidth
                    })
                }
                this.fixedTableColumn(), window["iframe_childCustomData_" + this.ctId] = {
                    enableExportExcel: !0,
                    head: this.theadCells,
                    body: this.tableData
                }
            },
            fixedTableColumn: function () {
                var e = this;
                $(".fht-table-wrapper th").mouseenter(function () {
                    $(this).children(".custom-fixed-row").addClass("opacity-1")
                }).mouseleave(function () {
                    var t = $(this);
                    e.fixedColumn && t.children(".custom-fixed-row").hasClass("ico-pinned-blue") || t.children(".custom-fixed-row").removeClass("opacity-1")
                }), $(".custom-fixed-row").unbind("click").bind("click", function () {
                    var t = $(this), i = t.parents("thead"), n = t.parent(),
                        a = (i.find("th"), +n.attr("rownum") || +n.attr("fixedcolumns")), r = i.find("th").index(n) + 1,
                        o = !0;
                    t.hasClass("ico-pinned-blue") && (o = !1, r = 0, a = 0), e.fixedColumn = {
                        fixedColumn: o,
                        fixedColumns: r,
                        rowNum: a
                    }, e.chartInfo.meta.fixedColumn = e.fixedColumn;
                    var s = {ct_id: e.ctId, data: (0, c.default)(e.chartInfo)};
                    /custom_chart_edit/.test(window.parent.location.href) && $.post("/api/chart/modify", s).success(function (e) {
                        0 != +e.status && console.log(e)
                    }).error(function (e) {
                        console.log(e)
                    }), e.render(e.meta)
                })
            },
            getTbMergeCell: function () {
                return this.views.some(function (e, t) {
                    return !!e.info.tb_statistic.tb_merge_cell
                })
            },
            setHeadMeta: function () {
                var e = this.meta, t = i(e);
                if (!t.valid) return void alert(t.errMsg);
                this.setMergeMeta(), this.translateMeta1(), this.theadRows = this.getHeadRows(e), this.setRowSpan(e), this.makeMetaToArray(e), this.buildTheadCells(), this.setColSpan(e)
            },
            setMergeMeta: function () {
                function e(t, n, a, r) {
                    t.forEach(function (n, a) {
                        i++, n.children && n.children.length > 0 ? (n.rowNum = i, i--, e(n.children, n.name, t, a)) : n.rowNum = i
                    })
                }

                var t = this.meta, i = (t.length, 0);
                e(t)
            },
            getHeadRows: function (e, t) {
                var i = this, n = [];
                return e.forEach(function (e, a) {
                    n[a] = 1, e.row = void 0 === t ? 0 : t + 1, e.children && e.children.length && (n[a] += i.getHeadRows(e.children, e.row))
                }), n.sort().pop()
            },
            setRowSpan: function (e) {
                var t = this;
                e.forEach(function (e, i) {
                    e.children && e.children.length ? (e.rowSpan = 1, t.setRowSpan(e.children)) : e.rowSpan = t.theadRows - (e.row || 0)
                })
            },
            makeMetaToArray: function (e, t) {
                var i = this;
                e.forEach(function (e, n) {
                    var a = i.theadCellsTmp.length;
                    e.parent = t, i.theadCellsTmp.push({
                        _i: a,
                        name: e.name,
                        row: e.row,
                        rowSpan: e.rowSpan || 1,
                        colSpan: e.colSpan || 1,
                        rowNum: e.rowNum,
                        parent: void 0 === t ? {} : t
                    }), e.children && e.children.length && i.makeMetaToArray(e.children, {
                        name: e.parent && e.parent.name ? e.parent.name + "_" + e.name : e.name,
                        _i: a
                    })
                })
            },
            buildTheadCells: function () {
                var e = this;
                e.theadCellsTmp.forEach(function (t, i) {
                    e.theadCells[t.row] || (e.theadCells[t.row] = []), e.theadCells[t.row].push(t)
                })
            },
            _getYRange: function () {
                var e, t = [], i = [];
                return (this.views || []).forEach(function (n, a) {
                    e = [], t[a] = [];
                    var r = n.data.y.concat(n.data.y_optional || []);
                    r.forEach(function (t, n) {
                        i.indexOf(t.uniq_id) < 0 && (e.push(n), i.push(t.uniq_id))
                    }), e.push(r.length);
                    for (var o = 0; o < e.length - 1; o++) t[a].push([e[o], e[o + 1]])
                }), t
            },
            translateMeta1: function () {
                function e(e, t, a, r) {
                    for (var o = 0, s = t, l = i.views[a].info, c = l.compare_axis, d = 0; d < c.length; d++) if ((c[d].nick_name || c[d].name) == s) {
                        o = d;
                        break
                    }
                    var u = [], p = [], f = [];
                    n = i._getNodeIndex(i.views[r[0]].data, e);
                    var h = i.views[a].data.y.length;
                    return (i.views[a].data.y.slice(n) || []).forEach(function (t, i) {
                        if ("row_summary" !== t.fid) {
                            var a = t.compare_names.slice(0, o + 1).join("_"), r = t.compare_names[o + 1];
                            r && (!f.length || f.indexOf(a) > -1) && p.indexOf(r) < 0 && (n++, n >= h && (n = 0), u.push({
                                name: r,
                                rowNum: e.rowNum,
                                parentName: e.parentName || null,
                                _refName: e._refName || null,
                                _parentRefName: e._parentRefName || null
                            }), p.push(r), f.push(a))
                        }
                    }), u
                }

                function t(n, r) {
                    var o, s = [];
                    n.forEach(function (l, c) {
                        o = i.varMap[l.name];
                        var d, u, p, f, h = [];
                        if (l.parentName ? (p = l.parentName, f = l._refPName) : (r ? r.parentName ? (p = r.parentName + "_" + r.name, f = r._parentRefName + "_" + r._refName) : (p = r.name, f = r._refName) : (p = null, f = null), l.parentName = p, l._parentRefName = f), /^\%T\d+\.[C,X,Y]\d+\%$/.test(l.name) && (h = l.name.match(/\d+/g).map(function (e) {
                            return +e
                        })), h.length && (d = i.views[h[0]].info, u = d.compare_axis.length && d.compare_setting && d.compare_setting.sort.index || 0), /^\%T\d+\.C\d+\%$/.test(l.name)) if (h.length && h[1] < u) {
                            var g = [];
                            (i.views[h[0]].data.y || []).forEach(function (e, t) {
                                for (var i = e.compare_names, n = {
                                    name: i[h[1]],
                                    parentName: p,
                                    _refName: l.name,
                                    _parentRefName: f,
                                    children: C(l.children)
                                }, a = !1, o = 0; o < g.length; o++) if (_(n, g[o])) {
                                    a = !0;
                                    break
                                }
                                var s = i.slice(0, h[1]).join("_");
                                a || r && (!r || p !== s) || g.push(n)
                            }), r ? r.children = C(g) : Array.prototype.splice.apply(n, [c, 1].concat(C(g))), t(i.meta)
                        } else s = e(l, o.nick_name || o.name, h[0], h), a.push(l.name); else if (/^\%T\d+\.[X,Y]\d+\%$/.test(l.name)) {
                            var m = o.nick_name || o.name;
                            l.name = m
                        }
                        s.length && r ? (r.children = C(s), l.children && l.children.length && /^\%T\d+\.C\d+\%$/.test(l.name) && (r.children.forEach(function (e) {
                            e.children = C(l.children)
                        }), r && t(r.children, r))) : l.children && l.children.length && t(l.children, l)
                    })
                }

                var i = this, n = 0, a = [];
                t(i.meta)
            },
            _getNodeIndex: function (e, t) {
                for (var i, n = 0, a = 0, r = e.y.length - 1; a < r; a++) if (i = e.y[a], i.compare_names && i.compare_names.join("_").indexOf(t.parentName) > -1) {
                    n = a;
                    break
                }
                return n
            },
            setColSpan: function (e) {
                var t, i, n = this;
                if (n.theadRows > 1) for (var a = n.theadRows - 2; a >= 0; a--) {
                    i = n.theadCells[a], t = n.theadCells[a + 1];
                    for (var r = 0; r < i.length; r++) {
                        for (var o = 0; o < t.length; o++) {
                            var s = t[o].parent, l = i[r].parent.name ? i[r].parent.name + "_" + i[r].name : i[r].name;
                            s.name === l && s._i === i[r]._i && (i[r].colSpan += t[o].colSpan)
                        }
                        i[r].colSpan > 1 && i[r].colSpan--
                    }
                }
                return n.theadCells
            },
            loadScriptAsync: function (e) {
                function t() {
                    window.AlaSql = "AlaSql", e && "function" == typeof e && e()
                }

                var i = {funcQueue: [], loadLibInProgress: !1};
                thirdPluginLoader({
                    initFun: t,
                    libSrc: "//m1.bdp.cn/static/js/lib/alasql.min_2736c18.js",
                    libId: window.AlaSql
                }, i)
            },
            _joinTable: function (e) {
                var t = this, i = [];
                (e || []).forEach(function (e, t) {
                    i[t] = [], e.forEach(function (e, n) {
                        var a = e.match(/\d+/g).map(function (e, t) {
                            return +e
                        });
                        i[t].push(a)
                    })
                });
                for (var n = 0; n < i.length; n++) for (var a = i[n], r = 0; r < a.length; r++) if (!t.views[a[r][0]].data.x[a[r][1]]) return alert("请确保第" + (a[r][0] + 1) + "个数据集有" + (a[r][1] + 1) + "个维度"), !1;
                t.joinRule = i, t.viewData = t.buildTableData();
                var o = function (e) {
                    return function (i) {
                        var n = "";
                        return t._joinKey.forEach(function (e, i) {
                            n += " table0." + e + " = table1." + e, i < t._joinKey.length - 1 && (n += " AND ")
                        }), alasql("SELECT * FROM ? table0 OUTER JOIN ? table1 ON " + n, [e, i])
                    }
                };
                this.customSql || this.joinExternalInfoMap(), e ? function () {
                    var e = t.viewData.length;
                    if (e > 1) {
                        for (var i, n, a = 1; a < e; a++) n = o(i || t.viewData[0]), alasql.options.modifier = a + 1 == e ? "MATRIX" : "", i = n(t.viewData[a]);
                        t.tableData = i, t._drawTable()
                    }
                }() : (t.tableData = l(t.viewData), t._drawTable())
            },
            buildTableData: function (e) {
                var t = this, i = [], a = [];
                t.originColData = [], t._joinKey = [], t.externalInfoMap = {};
                var r = [];
                (t.joinRule || []).forEach(function (e, t) {
                    r[t] = e.map(function (e) {
                        return "bdp" + e.join("")
                    })
                });
                var o = function (e, t, i) {
                    return e.tb_statistic.col && e.tb_statistic.subtotal && !$.isEmptyObject(t) && $.isArray(t[i])
                };
                if (t.setTableInfo(t.views), t.views.forEach(function (e, i) {
                    var n = e.info.tb_statistic.col, a = C(e.data.x || []), r = C(e.data.y || []),
                        o = C(e.data.y_optional || []);
                    a.forEach(function (t, i) {
                        t.axis = "x", n && (0 === i ? "bottom" === e.info.tb_statistic.col_pos ? t.data.push(k) : "top" === e.info.tb_statistic.col_pos && t.data.unshift(k) : "bottom" === e.info.tb_statistic.col_pos ? t.data.push("") : "top" === e.info.tb_statistic.col_pos && t.data.unshift(""))
                    }), r.forEach(function (i) {
                        i.axis = "y", n && ("bottom" === e.info.tb_statistic.col_pos ? i.data.push(i.col_summary) : "top" === e.info.tb_statistic.col_pos && i.data.unshift(i.col_summary)), i.data.forEach(function (e, n) {
                            void 0 === t.emptyValue || null !== e && void 0 !== e && "" !== e || (i.data[n] = t.emptyValue)
                        })
                    }), o.forEach(function (e) {
                        e.axis = "y", n && e.data.push(e.col_summary)
                    }), t.originColData.push([].concat(a, r, o))
                }), t.originColData.forEach(function (e, t) {
                    a[t] = [], e.forEach(function (e, i) {
                        a[t][i] = [].concat(e.data)
                    })
                }), e) {
                    var s = t.customSql;
                    s = s.replace(/\s{2,}/g, " "), a.forEach(function (e, a) {
                        var r = t.views[a].data, s = t.views[a].info, l = r.subtotal, c = s.tb_statistic;
                        if (c.col && "top" === c.col_pos) {
                            var d = {};
                            for (var u in l) d[+u + 1] = l[u];
                            l = d
                        }
                        i[a] = [];
                        for (var p = n([t.views[a]]), f = 0; f < p; f++) {
                            for (var h = {}, g = e.length, m = 0; m < g; m++) {
                                var v = t.originColData[a][m], y = v.nick_name || v.name;
                                v.compare_names && (y = v.compare_names.join("_")), h[y] = e[m][f]
                            }
                            if (i[a].push(h), o(s, l, f)) for (var b = 0, _ = l[f].length; b < _; b++) {
                                for (var w = {}, u = l[f][b], m = 0; m < u.length; m++) {
                                    var v = t.originColData[a][m], y = v.nick_name || v.name;
                                    v.compare_names && (y = v.compare_names.join("_")), w[y] = $.isArray(u[m]) ? u[m][0] : u[m], "[__subtotal__]" === w[y] ? w[y] = S : "" == w[y] && (w[y] = "__BDPHOLDER" + i[a][f][y]), t.externalInfoMap.hasOwnProperty(y) || (t.externalInfoMap[y] = C(t.originColData[a][m]), delete t.externalInfoMap[y].data)
                                }
                                i[a].push(w)
                            }
                        }
                    })
                } else a.forEach(function (e, a) {
                    var s = t.views[a].data, l = t.views[a].info, c = l.tb_statistic, d = s.subtotal;
                    if (c.col && "top" === c.col_pos) {
                        var u = {};
                        for (var p in d) u[+p + 1] = d[p];
                        d = u
                    }
                    i[a] = [];
                    for (var f = t.joinRule.length ? n([t.views[a]]) : t.totalData, h = 0; h < f; h++) {
                        for (var g = {}, m = 0; m < e.length; m++) {
                            var v = "bdp" + a.toString() + m.toString();
                            r.forEach(function (e, i) {
                                e.indexOf(v) > -1 && (t._joinKey[i] ? v = t._joinKey[i] : (v += "join", t._joinKey[i] = v))
                            }), g[v] = e[m][h], t.externalInfoMap.hasOwnProperty(v) || (t.externalInfoMap[v] = C(t.originColData[a][m]), delete t.externalInfoMap[v].data)
                        }
                        if (i[a].push(g), o(l, d, h)) for (var y = 0, b = d[h].length; y < b; y++) {
                            for (var _ = {}, p = d[h][y], m = 0; m < p.length; m++) {
                                var v = "bdp" + a.toString() + m.toString();
                                r.forEach(function (e, i) {
                                    e.indexOf(v) > -1 && (t._joinKey[i] ? v = t._joinKey[i] : (v += "join", t._joinKey[i] = v))
                                }), _[v] = $.isArray(p[m]) ? p[m][0] : p[m], "[__subtotal__]" === _[v] ? _[v] = S : "" == _[v] && (_[v] = "__BDPHOLDER" + i[a][h][v]), t.externalInfoMap.hasOwnProperty(v) || (t.externalInfoMap[v] = C(t.originColData[a][m]), delete t.externalInfoMap[v].data)
                            }
                            i[a].push(_)
                        }
                    }
                });
                return i.forEach(function (e, t) {
                    e.forEach(function (e, t) {
                        for (var i in e) null === e[i] && (e[i] = "")
                    })
                }), i
            },
            customAlaSql: function (e) {
                this.action = "CUSTOM", this.customSql = e
            },
            _doCustomRender: function () {
                var e = this.buildTableData(!0);
                alasql.options.modifier = "MATRIX", this.tableData = alasql(this.customSql, e);
                var t = alasql.parse(this.customSql);
                this.disSqlColumns(t), this._drawTable()
            },
            joinExternalInfoMap: function () {
                var e = this;
                e.externalInfoMap = (0, s.default)(e.externalInfoMap).map(function (t) {
                    return e.externalInfoMap[t]
                })
            },
            disSqlColumns: function (e) {
                var t = this, i = [];
                if (e.statements && e.statements.length > 0) {
                    var n = e.statements[0].columns, a = {}, r = [];
                    e.statements[0].from && "default" !== e.statements[0].from[0].as && r.push(e.statements[0].from[0].as), e.statements[0].joins && "default" !== e.statements[0].joins[0].as && r.push(e.statements[0].joins[0].as), n.forEach(function (t, n) {
                        var r = null;
                        t.columnid && (t.tableid ? r = t.tableid + ".[" + t.columnid + "]" : (r = "[" + t.columnid + "]", a.bool = !0, a.param = e.statements[0].from[0].param)), i.push(r)
                    })
                }
                if (!(i.length < 0)) {
                    var o = this.originColData;
                    a.bool && a.param && (o = [this.originColData[Number(a.param)]]);
                    var s = [], l = this.meta, c = [], d = l.some(function (e, t) {
                        return !!e.formatter
                    });
                    l.forEach(function (e, t) {
                        var i = e.formatterName, n = e.formatter;
                        i ? $.isArray(i) ? i.forEach(function (e, t) {
                            c.push(e)
                        }) : c.push(i) : n ? $.isArray(n) ? n.forEach(function (e, t) {
                            c.push(e)
                        }) : c.push(n) : c.push("")
                    }), d && (i = c), i.forEach(function (e, i) {
                        if (d) e ? t.views.forEach(function (i, n) {
                            var a = i.info.title, r = i.info.y, o = 0;
                            r.length;
                            r.forEach(function (i, r) {
                                var l = i.nick_name || i.name;
                                l = a + "." + l;
                                var c = C(t.views[n].data.y[r]);
                                e === l ? (c.axis = "y", delete c.data, s.push(c)) : o++
                            })
                        }) : s.push({axis: "x"}); else e:for (var n = 0, a = o.length; n < a; n++) {
                            var l = 0, u = o[n] && o[n].length || 0;
                            t:for (var p = 0; p < u; p++) {
                                var f = o[n][p], h = f.nick_name || f.name;
                                f.compare_names && (h = f.compare_names.join("_")), h = r.length > 0 ? r[n] + ".[" + h + "]" : "[" + h + "]";
                                var g = C(f);
                                if (c[i]) {
                                    this.views;
                                    if (r.length > 0) t.views.forEach(function (e, n) {
                                        e.info.y.forEach(function (e, a) {
                                            var o = e.nick_name || e.name;
                                            o = r[n] + ".[" + o + "]";
                                            var l = C(t.views[n].data.y[a]);
                                            c[i] === o && (l.axis = "y", delete l.data, s.push(l))
                                        })
                                    }); else {
                                        var m = 0;
                                        t.views[0].info.y.forEach(function (e, n) {
                                            var a = e.nick_name || e.name;
                                            a = "[" + a + "]";
                                            var r = C(t.views[0].data.y[n]);
                                            c[i] === a ? (r.axis = "y", delete r.data, s.push(r)) : m++
                                        }), m === t.views[0].info.y.length && s.push({})
                                    }
                                    break t
                                }
                                if (h === e) {
                                    delete g.data, s.push(g);
                                    break e
                                }
                                if (null === e) {
                                    if (!c[i]) {
                                        s.push({});
                                        break e
                                    }
                                    c[i] === h && (delete g.data, s.push(g))
                                } else e !== h && null !== e && l++
                            }
                            l === u && s.push({})
                        }
                    }), this.externalInfoMap = s
                }
            },
            initHeadHTML: function () {
                for (var e = document.createDocumentFragment(), i = document.createElement("thead"), n = 0, a = 0; a < this.theadCells.length; a++) {
                    for (var r = document.createElement("tr"), o = 0; o < this.theadCells[a].length; o++) {
                        n++;
                        var s = t("th", this.theadCells[a][o].name, "th");
                        s.setAttribute("rowspan", this.theadCells[a][o].rowSpan), s.setAttribute("colspan", this.theadCells[a][o].colSpan), s.setAttribute("rownum", this.theadCells[a][o].rowNum), s.setAttribute("fixedcolumns", n);
                        var l = document.createElement("i"), c = "";
                        this.fixedColumn && +this.fixedColumn.fixedColumns === n && (c = "ico-pinned-blue opacity-1"), l.setAttribute("class", "bdp-icon ico-pin-gray custom-fixed-row fr " + c), s.appendChild(l), r.appendChild(s)
                    }
                    e.appendChild(r)
                }
                return i.appendChild(e), i
            },
            initBodyHTML: function () {
                for (var e, i, n, a, r, o, s = this, l = document.createDocumentFragment(), c = "text-left", d = {}, u = document.createElement("tbody"), p = this.externalInfoMap.length, f = null, h = 0; h < this.tableData.length; h++) {
                    e = document.createElement("tr");
                    for (var g = this.tableData[h], m = g.length, v = 0; v < m; v++) {
                        var y = v;
                        if (v >= p && (y = v % p), d = this.externalInfoMap[y]) if (n = d.data_type, r = d.alignment_method ? d.alignment_method : "right", a = g[v], "x" === d.axis) if ("string" !== n || d.alignment_method ? d.alignment_method || (r = "right") : r = "left", c = T[r], [null, "", void 0].indexOf(a) > -1 || 0 === a.toString().indexOf("__BDPHOLDER")) o = ""; else {
                            o = a;
                            var b = d.granularity || "day";
                            "week" === b && (c = "text-left")
                        } else "y" === d.axis ? (r = d && d.alignment_method ? d.alignment_method : "right", c = T[r], void 0 === s.emptyValue || null !== a && void 0 !== a && "" !== a || (a = s.emptyValue), o = null === a || void 0 === a ? "--" : isNaN(parseInt(a)) ? a : bdpChart.helper.dataLabelFormatter(d.formatter, a, d.aggregator)) : (void 0 === s.emptyValue || null !== a && void 0 !== a && "" !== a || (a = s.emptyValue), o = a, c = "text-left"); else void 0 === s.emptyValue || null !== a && void 0 !== a && "" !== a || (a = s.emptyValue), o = a, c = "text-left";
                        i = t("td", "", c), f = t("div", o, "td-wrap"), i.appendChild(f), e.appendChild(i)
                    }
                    l.appendChild(e)
                }
                return u.appendChild(l), u
            },
            getRowHeight: function () {
                return 35
            },
            mergeCell: function () {
                for (var e = this.getRowHeight(), t = this.views[0].data.x.length, i = this.$elem.find("thead"), n = this.$elem.find("tbody"), a = (i.clone(), n.clone()), r = 0; r < t; r++) a.mergeCol(r, e);
                n[0] && (n[0] = bdp.utils.replaceHtml(n[0], a.html()))
            },
            destory: function () {
                this.$elem.html(""), this.theadCells = [], this.theadCellsTmp = []
            },
            formatAlasql: function (e) {
                var t = /(\+|\-|\*|\/|\%)/g, i = e;
                return t.test(e) && (i = this.formatAlasqlArith(e)), i
            },
            formatAlasqlArith: function (e) {
                return e.replace(/(\+|\-|\*|\/|\%)/g, " $1 ").replace(/(\[\S*\])/g, "Number($1)")
            },
            setTableInfo: function (e) {
                var t = this;
                this.customTable = {}, this.customTable.colPos = "bottom", this.customTable.subtotal = !1, e.map(function (e, i, n) {
                    var a = n[i].info;
                    if (a.tb_statistic.subtotal && "top" === a.tb_statistic.col_pos) return t.customTable.colPos = a.tb_statistic.col_pos, void(t.customTable.subtotal = a.tb_statistic.subtotal)
                })
            },
            strSubstr: function (e, t, i) {
                return i.split(e, 2)[1].split(t, 2)[0]
            },
            getCellData: function (e, t) {
                e = Number(e) - 1, t = Number(t) - 1;
                var i = this.tableData;
                return 0 === i.length && alert("没有数据"), i[e][t]
            },
            setCellData: function (e) {
                var t = this;
                0 !== e.length && e && (e.forEach(function (e, i) {
                    t.tableData[e[0] - 1][e[1] - 1] = e[2]
                }), this._drawTable())
            },
            setEmptyValue: function (e) {
                this.emptyValue = e
            }
        }, e.BDPTable = u
    }(window)
}, function (e, t, i) {
    "use strict";
    !function (e) {
        e.colors = {
            default: ["#5182E4", "#9BCC66", "#3FB27E", "#F7CB4A", "#F88D48", "#F35352", "#CE62D6", "#8954D4", "#5156B8", "#51B4F1", "#69D4DB", "#D42D6B"],
            contrast: ["#006BC2", "#FF8500", "#0FA8E0", "#197C90", "#4D5FB0", "#B98934", "#4D8CAE", "#72C8F2", "#FFBF9A", "#B6D0DE", "#DCE292", "#80ADC5"],
            vintage: ["#984337", "#5B6246", "#999053", "#E1D09F", "#E39971", "#9A4D2E", "#DB5546", "#E7824F", "#DBA946", "#BFA86F"],
            blue_sky: ["#4A72C9", "#6071C6", "#78A9F2", "#A3CCF8", "#89A0D3", "#4966B7", "#479CE2", "#7560BF", "#47B8E2", "#6087BF"],
            green_contrast: ["#A1CB80", "#3D8A6F", "#FFCD5D", "#C74A66", "#42A4B8", "#8B736E", "#739E90", "#08A86C", "#4294B8", "#76B55F"],
            green_contrast_2: ["#B7D62D", "#EB4B5C", "#8D9E69", "#D6D6D7", "#67B9CD", "#A4DED9", "#8AC98B"],
            green: ["#0D9347", "#00633E", "#D2EA57", "#87CD43", "#80AE9C", "#AECDC3", "#B4BBA5"],
            gray_blue: ["#8DAFCE", "#CE765B", "#6B648D", "#5491C5", "#A16D6E", "#4BB0D8", "#D9C59D"],
            purple: ["#7260AF", "#A563AC", "#D3C3DB", "#A999C9", "#D9A6D6"],
            blue_contrast: ["#515FD7", "#EEBDC1", "#C5BEDC", "#A6A7A9", "#5787D8"],
            gray_red: ["#5B68AA", "#787B9B", "#D95657", "#D8D9DA", "#85A0C1"],
            gray: ["#5A6A7B", "#9FB2BE", "#5C6B86", "#898E94", "#CBD3DA"]
        }, e.rangeColors = {
            default: ["#FFA9A9", "#EF6064"],
            golden: ["#FAD961", "#F76B1C"],
            green: ["#C7CCAC", "#0D9347"],
            blue: ["#A3CCF8", "#4A72C9"],
            purple: ["#D3C3DB", "#7260AF"],
            gray: ["#CBD3DA", "#5A6A7B"]
        }, e.theme = {
            bdp: function (t) {
                var i = e.colors.default;
                switch (t) {
                    case 7:
                        i = ["#5182E4", "#9BCC66", "#3FB27E", "#F7CB4A", "#F88D48", "#F35352", "#CE62D6", "#8954D4", "#5156B8", "#51B4F1", "#69D4DB", "#D42D6B"];
                        break;
                    case 0:
                        i = ["#5182E4", "#F7CB4A", "#3FB27E", "#F88D48", "#9BCC66", "#69D4DB", "#51B4F1", "#5156B8", "#8954D4", "#CE62D6", "#F35352", "#D42D6B"];
                        break;
                    case 14:
                        i = ["#F88D48", "#5182E4", "#F7CB4A", "#3FB27E", "#9BCC66", "#69D4DB", "#51B4F1", "#5156B8", "#8954D4", "#CE62D6", "#F35352", "#D42D6B"];
                        break;
                    case 21:
                        i = ["#3FB27E", "#F7CB4A", "#F88D48", "#5182E4", "#9BCC66", "#69D4DB", "#51B4F1", "#5156B8", "#8954D4", "#CE62D6", "#F35352", "#D42D6B"];
                        break;
                    case 300:
                        i = ["#5182E4", "#FFC064", "#3FB27E", "#F88D48", "#9ACFFE", "#81D069", "#51B4F1", "#CE62D6", "#EE4B4A", "#8954D4", "#D42D6B", "#385CD4"];
                        break;
                    case 310:
                        i = ["#A3ABB0"];
                        break;
                    case 320:
                        i = ["#EB4B5C", "#B7D62D"];
                        break;
                    case 330:
                        i = ["#9BCC66", "#FEC163", "#40A376", "#FE855A", "#EF4C4C", "#A139D5", "#6738D5", "#395DD5", "#3886D4", "#9BD0FE", "#76797C", "#71B0DA"];
                        break;
                    case 370:
                        i = ["#5182E4", "#5355B7", "#55B3F0", "#40B27E", "#9ACC67", "#F78E4B", "#F25554", "rgba(81,130,228,0.85)", "rgba(83,85,183,0.85)", "rgba(85,179,240,0.85)", "rgba(64,178,126,0.85)", "rgba(154,204,103,0.85)", "rgba(247,142,75,0.85)", "rgba(242,85,84,0.85)"]
                }
                return i
            }
        }, e.getColorsByType = function (t, i) {
            var n = e.theme[i];
            $.isFunction(n) || (n = e.theme.bdp);
            var a;
            switch (t) {
                case"C240":
                case"C242":
                case"C241":
                    a = n(14);
                    break;
                case"C210":
                case"C211":
                case"C212":
                case"C250":
                    a = n(0);
                    break;
                case"C260":
                case"C261":
                case"C220":
                    a = n(21);
                    break;
                case"C230":
                    a = n(7);
                    break;
                case"C300":
                case"C301":
                    a = n(300);
                    break;
                case"C310":
                    a = n(310);
                    break;
                case"C320":
                    a = n(320);
                    break;
                case"C330":
                    a = n(330);
                    break;
                case"C370":
                    a = n(370);
                    break;
                default:
                    a = n(0)
            }
            return a
        }, {theme: e.theme}
    }(bdpChart)
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    var a = i(41), r = n(a), o = i(40), s = n(o), l = i(1), c = n(l), d = i(338), u = n(d), p = i(158), f = n(p),
        h = i(372), g = n(h);
    !function (e, t) {
        function i(e, i, a) {
            this.maxDataLen = 1500, this.dsh_id = i.dsh_id, this.ct_id = i.ct_id, this.parent_id = i.parent_id, this.rule_id = i.rule_id, this.access_token = i.access_token, this.mode = e, this.isSubView = !!this.parent_id, this.mobileSingleChart = !!a, this.is_tpl = i.is_tpl || 0, this.is_chart_tpl = i.is_chart_tpl || 0, this.theme = i.theme || "default", this.themeColor = angular.copy(t.themeColors[this.theme]), this.displayDevice = i.device || "pc", this.deviceStyle = t.deviceStyles[this.theme][this.displayDevice], this.chartTalbe = null, this.hideNavigator = i.hideNavigator || !1, this.disableLink = i.disableLink || !1, /(\d+)\*(\d+)/.test(e) && (this.isDashboardMode = !0, this.gridWidth = RegExp.$1 >>> 0, this.gridHeight = RegExp.$2 >>> 0), this.alwaysShowDataLabels = i.alwaysShowDataLabels, this.optional = {}, this.defaultOptions = {}, this.chartTypeDelegate = t.chartTypeDelegate, this.modeDelegate = t.modeDelegate, this.isMobileMode = n.isMobile(), this.isWarnPreview = i.isWarnPreview, this.isOpenTimePredicted = !1, this.linkColor = (0, g.default)({chart: this})
        }

        var n = t.helper, a = (n.mobileHelper, t.ChartType);
        i.prototype = {
            draw: function (e, t, i, n, r, o) {
                var s = this, l = s.getChartType();
                s.readCache = t && t.read_cache || !1, "edit" === s.mode && [a.GIS, a.Custom].indexOf(l) < 0 && s.destroy(), s.$elem = e, t && (s.ct_id !== t.ct_id && s.destroy(), s.ct_id = t.ct_id, s.rule_id = t.rule_id, s.auto_play = n, s.setOptional(t.optional), s.isDashboardMode && (s.dash_setting = r.child.meta.dash_setting), t.advanced_sort && (this.advanced_sort = t.advanced_sort)), e.data("chart-data", s);
                var c = (new Date).getTime();
                s.readCache && s.isDashboardMode ? (s._loadingState(), s._drawChartWithCache(i, o, c)) : s.requestData(i, o).then(function (e) {
                    t && t.isWarnPreview && (e.result.info.chart_type = "C200"), s._drawChart(e, o, c)
                })
            }, updateInfo: function (e, i) {
                this.info = $.extend(!0, this.info, e), i && !this.loading_data && (this.getChartType() === a.GIS ? t.setGisSpec(this) : (this.destroy(), this.renderChart()))
            }, renderChart: function (e) {
                var i = this, r = (i.ct_id, i.getChartType()), o = e && e.mainChartContainer || i.mainChartContainer;
                if (i.$elem.find(".chart-error").remove(),
                    "dark" === this.theme ? this.$elem.removeClass("chart-theme-default").addClass("chart-theme-dark") : this.$elem.removeClass("chart-theme-dark").addClass("chart-theme-default"), n.isDrillChart(i.info) || this.optional.free_drill_opt ? i.isDashboardMode && i.$elem.parent().removeClass("noscroll") : i.$elem.parent().find(".drill-crumbs").remove(), this.optional.free_drill_opt ? i.isDashboardMode ? i.$elem.parents(".chart-box").find(".advance-sort-wrap").css("display", "none") : "edit" === i.mode ? $("#chartBox").find(".advance-sort-wrap").css("display", "none") : "fullscreen" === i.mode && $(".chart-fullscreen-wrap").find(".advance-sort-wrap").css("display", "none") : i.isDashboardMode ? i.$elem.parents(".chart-box").find(".advance-sort-wrap").css("display", "inline-block") : "edit" === i.mode ? $("#chartBox").find(".advance-sort-wrap").css("display", "inline-block") : "fullscreen" === i.mode && $(".chart-fullscreen-wrap").find(".advance-sort-wrap").css("display", "inline-block"), this.isMobileMode && this.info.compare_axis && this.info.compare_axis.length && (r == a.KPICard || r == a.Gauge) && (this.info.chart_type = r = a.Table, this.$elem.addClass("chart-table")), i.isSubView) return this.$elem.addClass("chart-table"), t.setTableSpecialOption(i, o);
                if ([a.Table, a.AreaMap, a.BubbleMap, a.TextMap, a.Sankey, a.KPICard, a.Funnel, a.WordCloud, a.GIS, a.BoxPlot, a.ParallelSets, a.Sunburst, a.Custom].indexOf(r) > -1) {
                    switch (r !== a.GIS && r !== a.Custom && i.destroy(), i.options = {}, [a.AreaMap, a.BubbleMap, a.TextMap].indexOf(r) > -1 && i._bindEventsOptions(), this._setMobileOptions(), r) {
                        case a.Table:
                            this.chartTalbe = this.isMobileMode ? t.setTableSpecialOption(i, o) : t.setCanvasTableOpts(i, o);
                            break;
                        case a.AreaMap:
                        case a.TextMap:
                            t.setMapAreaSpecialOption(i);
                            break;
                        case a.BubbleMap:
                            var s = i.linkColor.needSetLinkColor();
                            s || f.default.removeLinkMask(i), t.setMapBubbleSpecialOption(i, o, s);
                            break;
                        case a.Sankey:
                        case a.ParallelSets:
                            t.setSankeySpecialOption(i);
                            break;
                        case a.BoxPlot:
                            t.setBoxPlotSpecialOption(i, i._config(e));
                            break;
                        case a.KPICard:
                            t.setTextSpec(i);
                            break;
                        case a.GIS:
                            t.setGisSpec(i);
                            break;
                        case a.Funnel:
                            t.setFunnelSpecialOption(i);
                            break;
                        case a.Sunburst:
                            t.setSunburstSpecialOption(i);
                            break;
                        case a.WordCloud:
                            t.setWordCloudSpec(i, o);
                            break;
                        case a.Custom:
                            t.setCustomSpec(i);
                            break;
                        default:
                            t.setTableSpecialOption(i)
                    }
                    [a.BoxPlot, a.WordCloud, a.KPICard, a.Sankey, a.ParallelSets, a.Table].indexOf(r) > -1 && i.emit("load", i, i.chartInstance), r !== a.WordCloud && r !== a.GIS && i.$elem.addClass("bdp-chart-loaded")
                } else {
                    for (var l = i._config(e), d = l.series.length - 1; d >= 0; d--) l.series[d].id = d;
                    if (i.translateMarkPoint(), i._isStackChart()) {
                        if (!i._isSettedColor()) {
                            var u = i.data.y.length;
                            l.colors && (l.colors = l.colors.splice(0, u).reverse())
                        }
                        l.series.length > 0 && (l.series[0].borderRadiusTopLeft = 1.7, l.series[0].borderRadiusTopRight = 1.7, l.series[l.series.length - 1].borderRadiusBottomLeft = 1.7, l.series[l.series.length - 1].borderRadiusBottomRight = 1.7)
                    }
                    var p = i.chartInstance,
                        h = !p || !p.series || !p.options || [a.Radar, a.Waterfall].indexOf(r) > -1 || p.series.length !== l.series.length || p.options.legend.enabled !== l.legend.enabled || p.options.legend.align !== l.legend.align || !i.isMobileMode && i.isSplitChart() || 2 == i.optional.linked_chart_type;
                    if (l.legend && p && p.options && p.options.legend && !h && p.options.legend.itemStyle && l.legend.itemStyle && (h = (0, c.default)(p.options.legend.itemStyle) != (0, c.default)(l.legend.itemStyle)), !h && i.info.style && i.info.style.labels && (h = i.info.style.labels.changed), h || p.series.length !== l.series.length || p.options.series.forEach(function (e, t) {
                        if (e.nick_name !== l.series[t].nick_name) return h = !0, !0
                    }), !h) {
                        (p.userOptions.navigator && !l.navigator || !p.userOptions.navigator && l.navigator) && (h = !0);
                        var g = p.options.series[0].type || p.options.chart.type;
                        !!(p.options.plotOptions && p.options.plotOptions[g] && p.options.plotOptions[g].dataLabels && p.options.plotOptions[g].dataLabels.enabled) ^ !!(l.plotOptions && l.plotOptions[g] && l.plotOptions[g].dataLabels && l.plotOptions[g].dataLabels.enabled) && (h = !0)
                    }
                    if (h) i.destroy(), i.isMobileMode || !i.isSplitChart() || this.isEmptyChart() ? (p && l.series && l.series.forEach(function (e) {
                        e.animation = !0
                    }), i.chartInstance = Highcharts.chart(i.$elem[0], l), i._setNavigatorRange(!0)) : i.renderChartInSplitMode(l); else {
                        var m = i.chartInstance.series, v = r === a.Scatter,
                            y = r === a.ComparisonBar && i.info.comparison_xaxis_pos && ["pos_side", "pos_right"].indexOf(i.info.comparison_xaxis_pos) > -1;
                        if (i.info.xAxis.length > 1) i.chartInstance.update(l); else {
                            if (l.series.forEach(function (e, t) {
                                var n = m[t];
                                if (n) {
                                    if (v) {
                                        for (var a = n.points.length, r = e.data.length, o = a - r, s = !(Math.abs(o) > 50); o > 0;) {
                                            var l = a - o;
                                            n.removePoint(l, !1), o--
                                        }
                                        for (; o < 0;) n.addPoint(e.data[r - -o], s), o++;
                                        n.options.animation = !0
                                    }
                                    n.setData(e.data, !1, !0, !0), $.extend(!0, n.options, {marker: e.marker})
                                } else i.chartInstance.addSeries(e, !1, !0)
                            }), [a.Gauge].indexOf(r) > -1) i.chartInstance.update({
                                xAxis: l.xAxis,
                                yAxis: l.yAxis,
                                series: l.series
                            }); else {
                                if (l.xAxis && i.chartInstance.xAxis[0].update(l.xAxis, !1), y) {
                                    var b = i.chartInstance.xAxis[1];
                                    b && b.update(l.xAxis[1], !0)
                                }
                                i.chartInstance.yAxis.forEach(function (e, t) {
                                    l.yAxis && l.yAxis[t] && e.update(l.yAxis[t], !1)
                                }), $.extend(!0, i.chartInstance.options, l)
                            }
                            var _ = r != a.TreeMap && {duration: 800};
                            i.chartInstance.setTitle(l.title, l.subtitle, !1), i.chartInstance.redraw(_)
                        }
                        i._setNavigatorRange(!1)
                    }
                    i.$elem.addClass("bdp-chart-loaded"), i.displayMissData(), this.linkColor.needSetLinkColor() ? this.linkColor.setLinkColor(e) : f.default.removeLinkMask(this)
                }
            }, displayMissData: function () {
                var e = this, i = t.language || "zh", n = e.getChartType();
                if ([a.ComparisonBar].indexOf(n) > -1) {
                    var r = [], o = e.data.y, s = e.data.x, l = e.info.compare_axis && e.info.compare_axis.length,
                        c = l ? o[0].nick_name + "-" + o[0].name : o[0].nick_name || o[0].name,
                        d = l ? o[1] ? o[1].nick_name + "-" + o[1].name : "" : o[1] && o[1].nick_name || o[1] && o[1].name || "";
                    o[0] && o[0].data && o[0].data.forEach(function (t, i) {
                        if (t < 0 || void 0 == t) {
                            var n = e._formatXAxisLabel(s[0].data[i], 0, !1), a = n + "-" + c;
                            r.push(a)
                        }
                    }), o[1] && o[1].data && o[1].data.forEach(function (t, i) {
                        if (t < 0 || void 0 == t) {
                            var n = e._formatXAxisLabel(s[0].data[i], 0, !1), a = n + "-" + d;
                            r.push(a)
                        }
                    }), e.data.mismatch = r
                }
                var u = e.data && e.data.mismatch && e.data.mismatch.length;
                if (u && "edit" === e.mode) {
                    var p = [];
                    if ("C243" == n) p = e.data.mismatch; else for (var f in e.data.mismatch) e.data.mismatch.hasOwnProperty(f) && p.push(e._formatXAxisLabel(e.data.mismatch[f], 0, !0));
                    var h = "";
                    "zh" === i ? n !== a.Pie && n !== a.ComparisonBar || (h = "有" + u + "项负值或空值数据") : n !== a.Pie && n !== a.ComparisonBar || (h = "There are" + u + " negative or null values");
                    var g = '<div class="map-mismatch-text pa guide"><p><a class="cursor-pointer">' + h + '</a></p><div class="guide-tip dropdown-wrap">' + bdp.utils.encodeHTML(p.join("、")) + "</div></div>";
                    e.$elem.append(g)
                }
            }, drawWithOption: function (e) {
                this.draw(this.$elem, null, e)
            }, _loadingState: function () {
                var e = this;
                e.isDashboardMode || 0 !== e.$elem.find(".load-outer").length || (e.$elem.append(n.initLoadingStatus("size-1x")), e.$elem.removeClass("bdp-chart-loaded bdp-chart-error").addClass("bdp-chart-loading")), e.$elem.addClass("bdp-chart-loading"), e.emit("data-loading"), e.loading_data = !0
            }, _removeLoadingState: function () {
                var e = this;
                e.$elem.find(".base-loading-layer").remove(), e.$elem.removeClass("bdp-chart-loading"), e.emit("data-loaded"), e.loading_data = !1
            }, requestData: function (e, t) {
                e = e || {};
                var i = this, r = {ct_id: i.ct_id, dsh_id: i.dsh_id};
                i.rule_id && (r.rule_id = i.rule_id), i.access_token && (r.access_token = i.access_token), i.is_tpl && (r.is_tpl = 1), 0 != e.is_advanced_sort && this.advanced_sort && (r.advanced_sort = this.advanced_sort, r.is_advanced_sort = 1), this.is_chart_tpl && (r.is_chart_tpl = 1), $.extend(r, i.optional, e || {}), delete r.link_info, i._loadingState();
                var o = i.requestTimestamp = +new Date;
                $(".J_dash_edit_content").length && 1 == $(".J_dash_edit_content").attr("issetfilter") && (r.linked_value = []);
                var s = "/api/chart/data?_t =" + (new Date).getTime();
                r.sdo_id && (s = "/api/chart/share_data?_t =" + (new Date).getTime());
                var l = r, d = $.ajax({url: s, type: "POST", dataType: "json", data: n.params(r)});
                return d.then(function (e) {
                    if (bdp.pendingRequest.remove(s), i.requestTimestamp > o) return null;
                    if (0 == +e.status) {
                        var t = e.result.info, r = e.result.data;
                        if (t && n.timePredicted.isOpen(t.chart_type, t.yAxis)) {
                            i.isOpenTimePredicted = !0;
                            var d = {
                                category: "user_interact",
                                action: "chart_interact",
                                opt_label: (0, c.default)({
                                    ct_id: t.chart_id,
                                    result: n.timePredicted.hasYError(e.result.data.y),
                                    forecasted_qty: +new Date - o
                                }),
                                opt_value: 1
                            };
                            BDPLogger.log("forecast_run", d)
                        }
                        if (t.chart_type == a.GIS && t.meta.layers) {
                            var p;
                            t.meta.layers.some(function (e, t) {
                                return !(!e.timeline || !e.timeline.enabled) && (p = r.layers[t], !0)
                            });
                            if (p && p.timeline[0].data_count > 2e4) {
                                for (var f = Math.min(Math.ceil((p.timeline[0].data_count - 2e4) / 2e4), 9), h = [], g = p.timeline[0].start, m = p.timeline[0].end, v = 2; f > 0;) l.timeline_config = {
                                    start: g,
                                    stop: m,
                                    page: v
                                }, h.push($.ajax({
                                    url: s,
                                    type: "POST",
                                    dataType: "json",
                                    data: n.params(l)
                                })), f--, v++;
                                return $.when.apply($, h).then(function () {
                                    var t = Array.prototype.slice.call(arguments);
                                    1 == h.length && (t = [t]);
                                    var i = ["lng", "lat", "trajectory", "sequence", "timeline", "colors", "x", "y"];
                                    return r.layers.forEach(function (e, n) {
                                        e.timeline && e.timeline.length > 0 && t.forEach(function (t) {
                                            if (t[0] && 0 == +t[0].status) {
                                                var a = t[0].result.data.layers[n];
                                                i.forEach(function (t) {
                                                    "colors" == t ? $.merge(e[t], a[t]) : e[t] && e[t].forEach(function (i, n) {
                                                        e[t][n] && a[t][n] && $.merge(e[t][n].data, a[t][n].data)
                                                    })
                                                })
                                            }
                                        })
                                    }), e
                                })
                            }
                        }
                        u.default.resetData(i, t.form_dimension_info || [])
                    }
                    return e
                }), bdp.pendingRequest.add({url: s, xhr: d}), d
            }, _drawChartWithCache: function (e, t, i) {
                var n, a = this;
                n = null, n ? a._drawChart(n, t, i) : a.requestData(e, t).then(function (e) {
                    e && a._drawChart(e, t, i)
                })
            }, _drawChart: function (e, i, n) {
                var r = this;
                if (r._removeLoadingState(), e) {
                    var o = (new Date).getTime();
                    Math.ceil((o - n) / 1e3);
                    if (0 == +e.status) {
                        var s = r.getChartType(), l = e.result.info ? e.result.info.chart_type : "";
                        if (s && s !== l && r.destroy(), r.info && (r._isRefreshed = !0), r.info = e.result.info, e.result.views) r.views = angular.copy(e.result.views); else {
                            if (r.data = e.result.data, l === a.Area && !this.isSplitChart()) {
                                var c = [], d = [], u = [];
                                r.data.y.forEach(function (e, t) {
                                    c[t] = [e.data.reduce(function (e, t) {
                                        return Math.abs(e) + Math.abs(t)
                                    }, 0), t]
                                });
                                var p = c.concat();
                                bdp.utils.stableSort(p, function (e, t) {
                                    return t[0] - e[0]
                                });
                                for (var f = 0, h = r.data.y.length; f < h; f++) d.push(r.data.y[p[f][1]]), r.info.y[p[f][1]] && u.push(r.info.y[p[f][1]]);
                                r.data.y = d, r.info.y = u
                            }
                            r.chartData = angular.copy(r.data), r.origin_data = angular.copy(r.data), r.chartData.message && "" !== r.chartData.message && (setCurrentTipPosition("dataOver"), $("#dataOver").show().find("span").text(r.chartData.message), setTimeout(function () {
                                $("#dataOver").hide()
                            }, 3e3))
                        }
                        if (void 0 === r.info.show_datalabels && (r.info.show_datalabels = ["C230", "C271", "C272", "C273", "C330", "C360"].indexOf(r.info.chart_type) > -1), i = i || {}, r.mainChartContainer = i.mainChartContainer, r.mainChartIdContainer = i.mainChartIdContainer, r.mainChartColorContainer = i.mainChartColorContainer, r.emit("data", r), "edit" == r.mode && r.getChartType() == a.Custom && r._isRefreshed) {
                            if ("" !== r.info.meta.custom_chart_setting.code && !r.$elem.find(".custom-chart-refresh-hint").length) {
                                var g = "en" == t.language ? 'The data has changed and click "Run" to update the chart.' : "数据已变动，点击“运行”更新图表";
                                r.$elem.append('<div class="custom-chart-refresh-hint"><i class="bdp-icon ico-close-white"></i>' + g + "</div>"), r.$elem.on("click", ".custom-chart-refresh-hint .ico-close-white", function () {
                                    $(".custom-chart-refresh-hint").remove()
                                })
                            }
                        } else !function () {
                            var e = function () {
                                var e = $.cookie("locale");
                                Highcharts.setOptions({lang: {noData: "en" == e || !e && "en" == navigator.language ? "No data to display" : "当前图表无数据"}}), r.renderChart(i)
                            };
                            r.selectionData && (r.selectionData = null, r.selectionOptCount = null, r.hideRevertSelectionBtn()), bdp.utils.browser().safari ? setTimeout(function () {
                                e()
                            }, 50) : e()
                        }()
                    } else {
                        var m = e.errstr;
                        r.info = e.result.info, e.result.views ? r.views = angular.copy(e.result.views) : r.data = e.result.data, r.destroy(), r.$elem.html('<div class="chart-error"><p>' + m + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
                    }
                    if (r.data && 1 == r.data.compare_axis_prompt) {
                        var m = "en" == (t.language || "zh") ? "Only the first two items are compared with the others ignored" : "对比只显示结果的前两项";
                        setCurrentTipPosition("dataOver"), $("#dataOver").show().find("span").text(m), setTimeout(function () {
                            $("#dataOver").hide()
                        }, 3e3)
                    }
                }
            }, setOptional: function (e) {
                this.optional = e
            }, setMode: function (e) {
                this.mode = e, /(\d+)\*(\d+)/.test(e) && (this.isDashboardMode = !0, this.gridWidth = RegExp.$1 >>> 0, this.gridHeight = RegExp.$2 >>> 0)
            }, getChartType: function () {
                return this.info ? this.info.chart_type : ""
            }, supportPinLegend: function () {
                return [a.Line, a.Column, a.NStackColumn, a.PStackColumn, a.Area, a.NStackArea, a.PStackArea, a.Biax].indexOf(this.getChartType()) > -1
            }, supportNavigator: function () {
                var e = [a.Line, a.Column, a.NStackColumn, a.PStackColumn, a.Sankey, a.ParallelSets, a.Area, a.NStackArea, a.PStackArea, a.Biax];
                this.info;
                return e.indexOf(this.getChartType()) > -1 && this.data.x.length > 0 && this.data.y[0] && this.data.y[0].data.length > 1
            }, canDrillDown: function () {
                return !(!this.info || this.optional.free_drill_opt) && this.info.is_drill
            }, _isShowLegend: function () {
                var e = !0, t = this.info, i = t.chart_type, n = t.color_setting, r = [].concat(t.compare_axis || []),
                    o = r.map(function (e) {
                        return e.fid
                    });
                return e = (i == a.Pie || !this.isMobileMode) && (!this.isDashboardMode || this.isDashboardMode && this.dash_setting.show_legend), e && [a.Pie, a.Sunburst].indexOf(i) < 0 && (n && delete n.is_series, o && n && n.hasOwnProperty("field") && (e = n.field.every(function (e) {
                    return !(o.indexOf(e.fid) < 0)
                }))), i == a.ComparisonBar && (e = !1), e
            }, _config: function (e) {
                var i = this;
                if (this.options = {
                    title: {text: ""},
                    subtitle: {
                        text: this.info.title,
                        y: -20,
                        style: {
                            "font-family": "Microsoft Yahei",
                            "font-size": "fullscreen" === this.mode ? "20px" : "16px",
                            color: "dark" === this.theme ? "#FFFFFF" : "#333333"
                        }
                    },
                    exporting: {filename: this.info.title},
                    xAxis: {labels: {enabled: !i.isDashboardMode || i.isDashboardMode && i.dash_setting.show_axis}},
                    yAxis: [],
                    tooltip: {crosshairs: !1, formatter: this._generateTooltipFormatter()},
                    legend: {enabled: i._isShowLegend(), useHTML: !0, labelFormatter: this._generateLegendFormatter()}
                }, this.isEmptyChart()) return this._displayEmptyChart();
                this._setColorByTheme(), this._setBasicOptions(), this._setXaxisLabel(), this._setYaxisLabel(), this._setYaxisTitle(), this._setChartData(), this._bindEventsOptions(), this._setGuideLine(), this._setNavigatorOptions(), this._setSelectOption();
                var n = this.getChartType();
                "dark" === this.theme && [a.Biax, a.ComparisonBar].indexOf(n) > -1 ? (this.info.yAxisOptional.length || n == a.ComparisonBar) && (this.themeColor.yAxis[1] = angular.copy(this.themeColor.yAxis[0])) : "dark" === this.theme && this.themeColor.yAxis[1] && delete this.themeColor.yAxis[1], $.extend(!0, this.options, this.themeColor), n === a.Pie && t.setPieSpecialOption(this), n === a.Scatter && t.setScatterSpecialOption(this), this._setChartTypeOptions(), this._setColor(), this._setModeOptions(), !this.alwaysShowDataLabels && ["C200", "C261", "C300", "C301", "C310", "C340", "C400"].indexOf(this.info.chart_type) < 0 && (this.info.show_datalabels || angular.forEach(this.options.plotOptions, function (e, t) {
                    e.dataLabels ? e.dataLabels.enabled = !1 : e.dataLabels = {enabled: !1}
                })), this._setSpecialOptions(), this._setAltOption(), n === a.ComparisonBar && t.setComparisonSpecialOption(this), $.extend(!0, this.options, this.deviceStyle);
                var r = this.$elem.width() > this.$elem.height();
                this.getChartType() === a.Pie && (bdp.bdpPageStatus.isUnderDataScreen() || bdp.bdpPageStatus.isUnderAdvDash() ? r = this.$elem.width() > this.$elem.height() : this.isDashboardMode && (r = this.gridWidth > this.gridHeight + 1));
                var o = r ? {layout: "vertical", align: "right", verticalAlign: "top"} : {
                    align: "center",
                    layout: "horizontal",
                    verticalAlign: "bottom",
                    maxHeight: 55,
                    margin: 10,
                    itemDistance: this.supportPinLegend() ? 4 : 20,
                    padding: 0
                };
                if (this.getChartType() === a.Pie && $.extend(!0, o, {enabled: !(this.isDashboardMode && this.gridWidth < 5 && 3 == this.gridHeight) && this.isDashboardMode && this.dash_setting.show_legend}), this.getChartType() === a.Scatter && $.extend(!0, o, {enabled: this.info.color_setting.enum_color_map && (!this.isDashboardMode || this.isDashboardMode && this.dash_setting.show_legend)}), $.extend(!0, this.options, {legend: o}), "dark" === this.theme && "fullscreen" != this.mode) {
                    [a.Pie].indexOf(n) > -1 && this.options.series.forEach(function (e) {
                        e.shadow = !0
                    })
                }
                return n === a.TreeMap && t.setTreemapSpecialOption(this), this._setGridPlotLine(), this._setAxisExtendStyle(), this._setLegendExtend(), this._setChartTitleStyle(), this._setChartLabelStyle(), this._setMobileOptions(), this.options
            }, isEmptyChart: function () {
                if (this.getChartType() == a.GIS) return !1;
                var e;
                return e = this.views ? this.views.map(function (e) {
                    return e.data
                }) : [this.data], e.every(function (e) {
                    var t, i, n, a;
                    for (t = 0, a = e.x.length; t < a; t++) if (0 !== e.x[t].data.length) return !1;
                    for (i = 0, a = e.y.length; i < a; i++) if (0 !== e.y[i].data.length) return !1;
                    for (n = 0, a = e.y_optional.length; n < a; n++) if (0 !== e.y_optional[n].data.length) return !1;
                    return !0
                })
            }, _displayEmptyChart: function () {
                var e = this;
                return this.$elem.addClass("bdp-chart-loaded"), $.extend(this.options, {
                    noData: {style: {color: "dark" === e.theme ? "rgba(255, 255, 255, 0.36)" : "#60606a"}},
                    xAxis: {categories: []},
                    series: []
                })
            }, _setColorByTheme: function () {
                "fullscreen" != this.mode && 1 == this.theme_id && Highcharts.setOptions({
                    title: {style: {color: "rgba(255, 255, 255, 0.6)"}},
                    legend: {
                        navigation: {activeColor: "#999", inactiveColor: "#CCC", style: {color: "#666"}},
                        itemStyle: {color: "#999"}
                    },
                    xAxis: {lineColor: "rgba(255,255,255,0.1)"},
                    tooltip: {style: {color: "#FFF"}},
                    plotOptions: {
                        pie: {
                            dataLabels: {
                                style: {
                                    color: "#fefefe",
                                    textOutline: "1px 1px rgba(0,0,0,0.4)"
                                }
                            }
                        }
                    }
                })
            }, _canSetOverlapSize: function (e, t) {
                return ["C210"].indexOf(e) > -1 && 2 == t
            }, _setBasicOptions: function () {
                var e = this.getChartType(), i = this.canDrillDown(), r = n.generateTitle(e, this.data, this.info),
                    o = this.optional.chart_jump_info && this.optional.chart_jump_info.can_jump,
                    s = f.default.checkCTSupport(this), l = i || s || "1" == o ? "pointer" : "", c = {
                        colors: this.data.selectionColors || t.getColorsByType(e),
                        title: {text: r, margin: "edit" == this.mode ? 10 : 0},
                        plotOptions: {
                            series: {connectNulls: !0},
                            column: {cursor: l},
                            bar: {cursor: l},
                            line: {cursor: l},
                            spline: {cursor: l},
                            scatter: {cursor: l},
                            waterfall: {cursor: l},
                            bubble: {cursor: l},
                            area: {cursor: l},
                            areaspline: {cursor: l},
                            boxplot: {cursor: l}
                        }
                    };
                this.isOpenTimePredicted && (c.plotOptions.series.turboThreshold = 1601), this._canSetOverlapSize(e, this.info.overlapMode) ? c.plotOptions.column.grouping = !1 : c.plotOptions.column.grouping = !0, e !== a.Pie && (e !== a.Biax && 1 === this.data.y.length ? $.extend(!0, c, {
                    chart: {},
                    legend: {enabled: !1}
                }) : $.extend(!0, c, {
                    chart: {spacingTop: "" === r ? 22 : 12},
                    legend: {y: -8}
                })), $.extend(!0, this.options, c)
            }, _bindMobDrilldown: function () {
                var e = this, t = e.getChartType(), i = $(".chart-drilldown");
                i.show(), i.off("click.drilldown").on("click.drilldown", function () {
                    if ("C370" !== t) e.emit("drilldown", e.selectedPoint, e); else {
                        var i = e.selectedPoint.drillId || "", n = e.selectedPoint.series.nodeMap,
                            a = e.selectedPoint.series;
                        a.drillToNode(i), e.options.plotOptions.treemap.events.onDrillToNode(i, n, a), e.selectedPoint = e.findTreeMapFirstNode(i, n, a) || e.selectedPoint, e.refreshTooltip(e.chartInstance)
                    }
                })
            }, findTreeMapFirstNode: function (e, t, i) {
                for (var n, a = t[e].children[0].i, r = 0; r < i.points.length && (n = i.points[r], n.index !== a); r++) ;
                return n.node.children.length ? i.points[n.node.children[0].i] : n
            }, refreshTooltip: function (e) {
                var t, i = this.getChartType(), n = e.series, a = [];
                1 === this.info.xAxis.length && "date" !== this.info.xAxis[0].data_type ? n.forEach(function (e, t) {
                    null !== e.points[0].y && a.push(e.points[0])
                }) : n.forEach(function (e, i) {
                    t = e.data.length, null !== e.points[t - 1].y && a.push(e.points[t - 1])
                });
                var r;
                "C370" === i ? (r = this.selectedPoint ? this.selectedPoint : n[0].points.length > 1 ? n[0].points[1] : n[0].points[0], r.node.children.length ? $(".chart-drilldown").show() : $(".chart-drilldown").hide()) : r = "C272" === i ? [a[1]] : a, this.supportNavigator() && this.info.navigator_setting && this.info.navigator_setting.enabled && (r = r.splice(0, r.length / 2)), r.length > 0 && e.tooltip.refresh(r)
            }, _setMobileOptions: function () {
                var e = this, t = e.getChartType(), i = e.canDrillDown(),
                    n = e.isDashboardMode ? [0, 0, 0, 0] : [16, 16, 16, 16];
                if (e.isMobileMode) {
                    "C370" === t && (i = e.info.xAxis.length > 2), function (e) {
                        e.wrap(e.Tooltip.prototype, "hide", function (e) {
                        })
                    }(Highcharts);
                    var a = {
                        subtitle: {text: ""},
                        chart: {
                            spacingTop: 10, events: {
                                load: function () {
                                    e.$elem.addClass("bdp-chart-loaded"), e.emit("load", e, this), e.isDashboardMode || e.refreshTooltip(this), e.handleDountChart(this, n), i ? e._bindMobDrilldown() : $(".chart-drilldown").hide()
                                }, redraw: function () {
                                    e.emit("redraw", e, this), e.isDashboardMode || e.refreshTooltip(this), e.handleDountChart(this, n), i ? e._bindMobDrilldown() : $(".chart-drilldown").hide(), e.handleDountChart(this, n)
                                }
                            }, style: {overflow: "visible"}
                        },
                        legend: {enabled: !1},
                        tooltip: {enabled: !e.isDashboardMode, useHTML: !0, formatter: e._generateTooltipFormatter()}
                    };
                    "fullscreen" === this.mode && (a.title = {text: ""}), "C230" === t && "fullscreen" != e.mode && (a.legend.enabled = !0);
                    var r = ["column", "line", "spline", "bar", "pie", "map", "mapbubble", "scatter", "waterfall", "bubble", "area", "areaspline"];
                    return e.options.plotOptions && $.each(r, function (t, i) {
                        delete e.options.plotOptions[i].point.events
                    }), ["C271", "C272", "C273", "C370"].indexOf(t) < 0 && (a.yAxis = [], (this.options.yAxis || []).forEach(function (e, t) {
                        a.yAxis.push({title: {style: {}}, labels: {}})
                    }), "C243" === t && ("fullscreen" == e.mode ? (e.options.yAxis[0].labels.y = 10, e.options.yAxis[1].labels.y = -21, a.yAxis[0].title.offset = 14, a.yAxis[1].title.offset = -16) : (e.options.yAxis[0].labels.y = 10, e.options.yAxis[1].labels.y = -20, a.yAxis[0].title.offset = 14, a.yAxis[1].title.offset = -15))), "C261" === t ? (a.pane = {
                        center: "fullscreen" == e.mode ? ["50%", "50%"] : ["50%", "72%"],
                        size: "90%"
                    }, a.yAxis = [], (this.options.yAxis || []).forEach(function (e, t) {
                        a.yAxis.push({labels: {style: {fontSize: "13px", color: "rgba(0,0,0,0.38)"}, y: 24}})
                    })) : "C290" === t && (a.pane = {size: "70%"}), $.extend(!0, this.options, a), this.options
                }
            }, _setNavigatorOptions: function () {
                var e = this, t = e.info, i = this.getChartType();
                if (this.supportNavigator() && t.navigator_setting && t.navigator_setting.enabled && !e.hideNavigator) {
                    if (this.isDashboardMode && this.dash_setting.show_navigator === !1) return;
                    if (this.info.split_compare) return;
                    if (this.isDashboardMode && this.gridWidth < 4 && this.gridHeight < 4 || this.isDashboardMode && this.gridHeight < 4) return void $.extend(!0, this.options, {navigator: {enabled: !1}});
                    var n = "dark" === this.theme ? {
                        handles: {backgroundColor: "#3E4155", borderColor: "#717392"},
                        outlineColor: "#3E4155",
                        label: {textColor: "#bebfc6"}
                    } : {
                        handles: {backgroundColor: "#FFF", borderColor: "#BAC2C7"},
                        outlineColor: "#E8EBED",
                        label: {textColor: "#000"}
                    }, r = t.navigator_setting;
                    if ($.extend(!0, this.options, {
                        chart: {spacingRight: 3},
                        navigator: {
                            isDateAxis: "date" == this.info.x[0].data_type,
                            enabled: !0,
                            start: Math.max(0, r.start || 0),
                            end: Math.min(r.end || 1, 1),
                            label: {
                                formatter: function (t, i) {
                                    return "object" === (0, s.default)(t.category) ? t.category.parent.name + "_" + t.category.name : e._formatXAxisLabel(t.options.name || i || t.options.x, 0)
                                }
                            }
                        },
                        xAxis: {minRange: 1}
                    }, {navigator: n}), [a.PStackArea, a.NStackArea, a.NStackColumn, a.PStackColumn].indexOf(i) > -1) {
                        var o = this.options.series[this.options.series.length - 1];
                        $.extend(!0, o, {showInNavigator: !0})
                    }
                    if ("edit" === this.mode) {
                        var e = this;
                        $.extend(!0, this.options, {
                            xAxis: {
                                events: {
                                    afterSetExtremes: function (t) {
                                        var i = t.target, n = (i.series[0].data, !1), a = {}, r = t.min, o = t.max;
                                        i.oldMin !== r && (n = !0, a.start = (r - i.dataMin) / (i.dataMax - i.dataMin)), i.oldMax !== o && (n = !0, a.end = (o - i.dataMin) / (i.dataMax - i.dataMin)), n && e.emit("saveWithOpt", e.info.drill_level, {navigator_setting: a}, {only_save_meta: !0})
                                    }
                                }
                            }
                        })
                    }
                }
            }, _setNavigatorRange: function (e) {
                var t = this.options;
                if (t.navigator && t.navigator.enabled && (0 != t.navigator.start || 1 != t.navigator.end)) {
                    var i, n, a = (t.series[0].data, this.chartInstance.xAxis[0]),
                        r = Math.max(0, a.dataMax - a.dataMin);
                    i = a.dataMin + t.navigator.start * r, n = a.dataMin + t.navigator.end * r, a.setExtremes(i, n, e)
                }
            }, _setSpecialOptions: function () {
                var e, t = this, i = this.info, n = this.getChartType(), r = [], o = this, s = i.yAxis, l = s.length,
                    c = [];
                if ("C370" != n) {
                    for (var d = 0; d < l; d++) {
                        var u = {y: null};
                        e = o.options.series[d], e && e.data[d] && e.data[d].color ? u.color = e.data[d].color : e && e.color && (u.color = e.color), c.push(u)
                    }
                    if (!i.xAxis.length && !i.compare_axis.length && [a.Column, a.NStackColumn, a.PStackColumn, a.Bar, a.NStackBar, a.PStackBar].indexOf(n) > -1) {
                        for (var d = 0; d < l; d++) r.push(s[d].nick_name || s[d].name), e = o.options.series[d], e.data = [].concat(c), e.data[d] = {
                            color: e.data[d].color,
                            y: 1 * o.data.y[d].data[0]
                        };
                        $.extend(!0, this.options, {
                            xAxis: {type: "category", categories: r, labels: {enabled: !0}},
                            plotOptions: {
                                column: {pointPadding: .2, borderWidth: 0, stacking: "normal"},
                                bar: {pointPadding: .2, borderWidth: 0, stacking: "normal"}
                            }
                        })
                    }
                    if ([a.Biax].indexOf(n) > -1) {
                        var p;
                        !function () {
                            var e = function (e, t) {
                                return e + "_" + t
                            };
                            try {
                                delete t.options.plotOptions.column.stacking
                            } catch (e) {
                            }
                            p = t.info.y_optional_for_draw || [], angular.forEach(t.options.series, function (t, n) {
                                t.stack = e(t.yAxis, t.field_series_type || i.type_optional[t.yAxis]), "C220" === t.field_series_type ? t.type = +i.use_spline ? "spline" : "line" : "C210" === t.field_series_type ? t.type = "column" : "C211" === t.field_series_type ? (t.type = "column", t.stacking = "normal") : "C212" === t.field_series_type ? (t.type = "column", t.stacking = "percent", 0 === t.yAxis && p[2] ? t.yAxis = 2 : 1 === t.yAxis && p[3] && (t.yAxis = 3)) : "C211" === i.type_optional[t.yAxis] ? t.stacking = "normal" : "C212" === i.type_optional[t.yAxis] && (t.stacking = "percent", 0 === t.yAxis && p[2] ? t.yAxis = 2 : 1 === t.yAxis && p[3] && (t.yAxis = 3))
                            })
                        }()
                    }
                    i.seriesType && [a.Biax].indexOf(n) > -1 && (angular.forEach(this.options.series, function (e, t) {
                        "column" === e.type && (e.type = "bar")
                    }), this.options.navigator && (this.options.navigator.enabled = !1)), i.reversed && [a.Bar, a.NStackBar, a.PStackBar].indexOf(n) > -1 && (this.options.chart && this.options.chart.marginRight && delete this.options.chart.marginRight, this.options.title.align = "right", this.options.xAxis.reversed = !0, this.options.xAxis.opposite = !0, this.options.yAxis[0].reversed = !0, this.options.xAxis.labels || (this.options.xAxis.labels = {}), this.options.xAxis.labels.x = 10), void 0 != i.xAxisLabelsRotation && "0" !== i.xAxisLabelsRotation && 0 !== i.xAxisLabelsRotation && (this.options.xAxis.labels.rotation = parseInt(i.xAxisLabelsRotation, 10), 90 == this.options.xAxis.labels.rotation && !this.options.xAxis.reversed && ["C240", "C241", "C242"].indexOf(i.chart_type) >= 0 && (this.options.xAxis.labels.x = -10)), i.xAxisLabelsStep ? this.options.xAxis.labels.step = 1 : delete this.options.xAxis.labels.step
                }
            }, isLoadingData: function () {
                return this.$elem.hasClass("bdp-chart-loading")
            }, getCurrentPage: function () {
                var e = this;
                return e.isDashboardMode ? location.href.indexOf("dash_fullscreen") > 0 ? "dash_fullscreen" : "dashboard" : e.mode
            }, getXIndexOfPoint: function (e) {
                var t = this.data.x[this.data.x.length - 1];
                return t && t.data.indexOf(this.xMap[e.x] || e.x)
            }, handleDountChart: function (e, t) {
                var i = this;
                if (i.getChartType() === a.Pie && "donut" === i.info.shape) {
                    var r = e.series[0].data[0];
                    e.series[0].data.forEach(function (e) {
                        e.percentage > r.percentage && (r = e)
                    });
                    var o = i.info.xAxis[0], s = o && "date" === o.data_type ? o.granularity : void 0, l = r.name;
                    if (s) {
                        var c = r.x, d = o.granularity_name, u = o.month_start_day || 0;
                        "week" === s ? d && (c += 864e5 * (o.week_start_day_of_week - 1), u = o.week_start_day_of_week) : "hour" !== s && "minute" !== s && "second" !== s || (s = "g_" + s), l = n.checkGranularity(s, c, d, u)
                    }
                    var p = r.percentage.toFixed(2) + "%", f = .4 * e.plotHeight / 250 + .6, h = .6 * e.plotHeight,
                        g = "dark" === i.theme ? "#fff" : "#666", m = e.plotLeft + e.series[0].center[0],
                        v = e.plotTop + e.series[0].center[1], y = i.$elem.find(".pie-center-txt");
                    if (y.length > 0) y.find(".slice-name").text(l).css({color: r.color}), y.find(".slice-value").text(p); else {
                        var y = '<div class="pie-center-txt nowrap" style="transform: scale(' + f + "); max-width: " + h + 'px;">';
                        y += '<span class="slice-name" style="color: ' + r.color + '">' + l + "</span><br>", y += '<span class="slice-value" style="color: ' + g + '">' + p + "</span>", y += "</div>", y = $(y), i.$elem.append(y)
                    }
                    y.css({left: m + y.width() * -.5 + t[3], top: v + y.height() * -.5 + t[0]})
                }
            }, handleLegendHover: function () {
                var e = this;
                this.$elem.on("mouseenter", ".highcharts-legend-item", function (e) {
                    this.pinnedLegendItem;
                    $(this).find(".J-ico-pin").length || $(this).find(".legend-content").append("<i class='bdp-icon J-ico-pin ico-legend-focus'></i>")
                }).on("mouseleave", ".highcharts-legend-item", function (t) {
                    var i = e.pinnedLegendItem;
                    i && i.index() == $(this).index() || $(this).find(".J-ico-pin").remove()
                })
            }, _bindEventsOptions: function () {
                var e = this, t = "edit" === e.mode ? [32, 40, 32, 40] : [0, 0, 0, 0], i = {
                        chart: {
                            events: {
                                load: function () {
                                    e.$elem.addClass("bdp-chart-loaded"), e.emit("load", e, this), e.handleLegendHover(), e.handleDountChart(this, t)
                                }, redraw: function () {
                                    e.emit("redraw", e, this), e.handleDountChart(this, t)
                                }
                            }
                        }
                    }, n = function (e, t) {
                        for (var i = null; e;) {
                            if (i = e, "CANVAS" === e.tagName) return null;
                            if ((e.className || "").indexOf(t) !== -1) break;
                            e = e.parentNode
                        }
                        return i
                    }, r = function (e) {
                        var t, i = e.target || e.srcElement;
                        return i && 1 === i.nodeType && (i = n(i, "datalabels-map")) && (t = i.getAttribute("data-index")) && Dalaba.isNumber(t = parseInt(t, 10), !0) && e.series ? e.series.shapes[t] : null
                    },
                    o = ["column", "line", "spline", "bar", "pie", "map", "mapbubble", "scatter", "waterfall", "bubble", "area", "areaspline", "boxplot"],
                    s = ["column", "line", "spline", "bar", "area", "areaspline", "scatter", "bubble"];
                i.plotOptions = {};
                var l = function (t) {
                    var i = this;
                    if ("C273" === e.info.chart_type && (i = r(t)), i) {
                        if ("2" == e.optional.linked_chart_type && !t.shiftKey) {
                            f.default.checkCTSupport(e) && !e.disableLink && e.emit("refreshLinkedCharts", [i], e, !1)
                        }
                        if (t.shiftKey && e.supportSelect()) return e.selectPoint(i, t);
                        if (e.optional.free_drill_opt) return !1;
                        var n = e.canDrillDown(), a = e.optional.chart_jump_info;
                        n ? e.emit("drilldown", i, e) : (e.emit("pointClick", i, e), setTimeout(function () {
                            e.chartInstance && e.chartInstance.tooltip && e.chartInstance.tooltip.hide()
                        }, 0)), a && a.can_jump && e.emit("jumpToOtherDash", i, e)
                    }
                };
                [a.Column, a.NStackColumn, a.PStackColumn, a.Bar, a.NStackBar, a.PStackBar, a.ComparisonBar, a.Waterfall].indexOf(e.getChartType()) > -1 && e.data.x.length > 0 && "date" != e.data.x[0].data_type && $.extend(this.options, {
                    chart: {
                        events: {
                            click: function (e) {
                                var t = Math.abs(Math.round(e.xAxis[0].value));
                                this.series[0].data[t].firePointEvent("click", event)
                            }
                        }
                    }
                }, !0), $.each(o, function (t, n) {
                    i.plotOptions[n] = {point: {events: {click: l}}}, s.indexOf(n) > -1 && $.extend(!0, i.plotOptions[n], {
                        events: {
                            legendItemClick: function (t) {
                                var i = this.chart.series, n = this, a = $(t.browserEvent.target),
                                    r = "ico-legend-focus-active";
                                if (a.hasClass("J-ico-pin")) {
                                    if (a.hasClass("ico-legend-focus")) {
                                        a.addClass(r).removeClass("ico-legend-focus"), e.pinnedLegendItem && e.pinnedLegendItem.find(".J-ico-pin").remove(), e.pinnedLegendItem = a.parents(".highcharts-legend-item"), i.forEach(function (e) {
                                            e.setVisible(!1, !1)
                                        }), n.setVisible(!0, !1), n.linkedSeries.forEach(function (e) {
                                            e.setVisible(!0, !1)
                                        }), this.chart.redraw();
                                        var o = {
                                            category: "user_interact",
                                            action: "chart_interact",
                                            opt_label: (0, c.default)({ct_id: e.ct_id})
                                        };
                                        BDPLogger.log("focus_legend", o)
                                    } else a.addClass("ico-legend-focus").removeClass(r), e.pinnedLegendItem = null, i.forEach(function (e) {
                                        e.setVisible(!0, !1)
                                    }), this.chart.redraw();
                                    t.preventDefault()
                                } else if (e.pinnedLegendItem) {
                                    var s = e.pinnedLegendItem.index();
                                    n.visible ? n.index == s && (e.pinnedLegendItem.find(".J-ico-pin").addClass("ico-legend-focus").removeClass(r), e.pinnedLegendItem = null) : n.index != s && (e.pinnedLegendItem.find(".J-ico-pin").remove(), e.pinnedLegendItem = null)
                                }
                            }
                        }
                    })
                }), this.options = this.options || {}, $.extend(!0, this.options, i)
            }, _setModeOptions: function () {
                return $.extend(!0, this.options, this.modeDelegate.getModeOption(this))
            }, _setChartTypeOptions: function () {
                var e = this.getChartType(), t = this.chartTypeDelegate.getChartTypeOption(this, e);
                return $.extend(!0, this.options, t)
            }, _generateLegendFormatter: function () {
                var e = this.data;
                return function () {
                    var t = this;
                    return n.legendFormatter(t, e)
                }
            }, _getUnit: function () {
                var e = this.info;
                return {unit_left: e.yaxis_unit, unit_right: e.yaxis_unit_right}
            }, _setXaxisLabel: function () {
                var e, i = this, r = this.data, o = this.info, s = this.getChartType(), l = 0;
                o.chart_type, a.ComparisonBar;
                if (this.options.xAxis.plotLines = [], e = 1 === r.x.length ? o.xAxis[0].data_type : "", s === a.Scatter && o.yAxis) {
                    o.yAxis && (e = o.yAxis[0].data_type);
                    var c = o.chart_type === a.Scatter && !$.isEmptyObject(o.bubble_setting);
                    if ("number" == e && !c && !i.selectionData) {
                        var d, u, p, f, h = {title: {text: ""}, gridLineWidth: 0, endOnTick: !0};
                        if (p = Math.max.apply(Math, r.y[0].data), f = Math.min.apply(Math, r.y[0].data), d = n.formatNumber(p), u = n.formatNumber(f), d = d < 0 ? 0 : d, u = u > 0 ? 0 : u, h.min = u, h.max = d, d == u) return;
                        var g = [], m = Number(d.sub(u).div(4).toFixed(6));
                        if (!m) return;
                        for (var v = isInteger(m) ? 0 : m.toString().split(".")[1].length, y = u; y <= d; y = Number(y.add(m).toFixed(v))) g.push(v ? Number(y.toFixed(Math.min(v, 6))) : y);
                        g.length < 5 && g.push(y), h.tickPositions = g, $.extend(!0, this.options.xAxis, h)
                    }
                    o.xAxisRange = [], $.extend(!0, this.options.xAxis, {
                        labels: {
                            formatter: function () {
                                n.drawGridPlotLine(this, i, o, s, "x");
                                var e = r.y[0].formatter;
                                return e && "num" == e.check && e.num.unit ? n.dataLabelFormatter(e, this.value, e.aggregator) : e && "percent" == e.check ? Highcharts.numberFormat(Number(this.value).mul(100), Math.max(0, e.percent.digit)) + "%" : n.numericSymbols(this.value)
                            }
                        }
                    })
                } else {
                    for (var b = 0; b < r.y.length; b++) l = Math.max(l, r.y[b].data.length);
                    if (this.options.xAxis = this.options.xAxis || {}, o.xAxis) {
                        if ("date" === e && s !== a.Scatter) {
                            var _ = n.getGranularity(r, l), w = _.tickInterval, x = _.granularity || "day",
                                C = _.granularity_name || "", k = o.xAxis[0].month_start_day || 0, S = r.x[0].data,
                                T = S[S.length - 1] - S[0];
                            x = n.setGranularityByDate(x, T), o.xAxisRange = [], $.extend(!0, this.options, {
                                xAxis: {
                                    type: "datetime",
                                    labels: {
                                        formatter: function () {
                                            var e = this.value;
                                            if ("week" === x) {
                                                k = 1, C && (k = o.xAxis[0].week_start_day_of_week);
                                                var t = new Date(e).getDay();
                                                t > k ? e -= 864e5 * (t - k) : e += 864e5 * (k - t)
                                            }
                                            return n.drawGridPlotLine(this, i, o, s, "x_date"), n.checkGranularity(x, e, C, k)
                                        }
                                    },
                                    tickPixelInterval: 128,
                                    minTickInterval: w
                                }
                            }), s === a.Rada && (this.options.xAxis.tickPositioner = function () {
                                return r.x[0].data
                            }), this.selectionData && (this.options.xAxis.type = "category", this.options.xAxis.minTickInterval = void 0)
                        } else "sub_date" === e ? (x = r.x[0].fid.split("_")[1], $.extend(!0, this.options, {
                            xAxis: {
                                labels: {
                                    formatter: function () {
                                        return t.helper.subDateFormat(x, this.value)
                                    }
                                }
                            }
                        }), this.options.xAxis.type = "category", this.options.xAxis.minTickInterval = void 0) : "string" !== e && "number" !== e || (this.options.xAxis.type = "category", this.options.xAxis.minTickInterval = void 0, $.extend(!0, this.options, {
                            xAxis: {
                                labels: {
                                    formatter: function () {
                                        var e = s === a.BoxPlot ? this.name : this.value;
                                        return e.length > 25 ? e.substring(0, 25) + "..." : e
                                    }
                                }
                            }
                        }));
                        if (s !== a.Bar && s !== a.NStackBar && s !== a.PStackBar && s !== a.ComparisonBar || $.extend(!0, this.options, {
                            xAxis: {
                                labels: {
                                    x: -5,
                                    y: 4
                                }, tickPixelInterval: 10
                            }
                        }), 2 === o.xAxis.length) {
                            if ([a.Column, a.NStackColumn, a.PStackColumn, a.Bar, a.NStackBar, a.PStackBar, a.Biax, a.Line, a.Waterfall].indexOf(s) > -1) {
                                var D = [], L = {}, A = r.x[0], E = r.x[1], I = [], F = {}, O = this,
                                    M = "dark" === this.theme ? "rgba(81, 130, 228, .12)" : "rgba(232, 235, 237, .6)";
                                A.data.forEach(function (e, t) {
                                    e = O._formatXAxisLabel(e, 0), F.name !== e && (void 0 !== F.from && (F.to = t - .5, I.push(F)), F = {
                                        name: e,
                                        color: I.length % 2 == 0 ? M : null,
                                        from: t - .5,
                                        to: t - .5
                                    }), t === A.data.length - 1 && (F.to = t + .5, I.push(F)), L.name !== e && (L = {
                                        name: e,
                                        categories: []
                                    }, D.push(L));
                                    var i = O._formatXAxisLabel(E.data[t], 1);
                                    L.categories.push(i)
                                }), $.extend(!0, this.options.xAxis, {
                                    type: "category",
                                    categories: D,
                                    plotBands: I,
                                    minTickInterval: void 0,
                                    tickColor: "dark" === this.theme ? "rgba(255, 255, 255, .1)" : "rgba(0, 0, 0, .1)",
                                    tickWidth: 1,
                                    labels: {
                                        autoRotation: [-90], formatter: function () {
                                            var e = this.value;
                                            return e.length > 25 ? e.substring(0, 25) + "..." : e
                                        }
                                    }
                                })
                            }
                        }
                    }
                }
            }, _formatTimeWithField: function (e, t, i) {
                if (e = +e, isNaN(e)) return "NaN";
                var a = t.granularity || "day", r = t.granularity_name || "", o = t.month_start_day || 0;
                if ("hour" !== a && "minute" !== a && "second" !== a || (a = "g_" + a), "week" === a) {
                    o = 1, r && (o = t.week_start_day_of_week);
                    var s = new Date(e).getDay();
                    s > o ? e -= 864e5 * (s - o) : e += 864e5 * (o - s)
                }
                return n.checkGranularity(a, e, r, o, i)
            }, _formatXAxisLabel: function (e, i, a) {
                var r = this.data, o = this.info, s = o.xAxis[i];
                if (s && "date" === s.data_type) {
                    var l = r.x[i].data, c = n.getGranularity(r, l.length, i),
                        d = (c.tickInterval, c.granularity || "day"), u = c.granularity_name || "",
                        p = o.xAxis[i].month_start_day || 0, f = l[l.length - 1] - l[0];
                    if (a ? "hour" !== d && "minute" !== d && "second" !== d || (d = "g_" + d) : d = n.setGranularityByDate(d, f), "week" === d) {
                        p = 1, u && (p = s.week_start_day_of_week);
                        var h = new Date(e).getDay();
                        h > p ? e -= 864e5 * (h - p) : e += 864e5 * (p - h)
                    }
                    return n.checkGranularity(d, e, u, p)
                }
                if (s && "sub_date" === s.data_type) {
                    var d = s.fid.split("_")[1];
                    return t.helper.subDateFormat(d, e)
                }
                return e
            }, _getXAxisLabelMaxWidth: function (e) {
                if (!e.length) return 0;
                var t = [];
                return e.forEach(function (e) {
                    t.push(hz.cutString.getP(e, 12))
                }), Math.max.apply(null, t)
            }, _getYAxisLabelEdgeValue: function (e, t, i, r) {
                return [a.NStackColumn, a.NStackBar, a.NStackArea].indexOf(e) > -1 ? n.getSumByColumnFromMultiArray(this.data, t, i, r) : Math[i](0, n.getEdgeValueFromMultiArray(this.data, t, i, e, r))
            }, _setYaxisLabel: function () {
                function e(e, t, i, r) {
                    var l = t === a.ComparisonBar;
                    i = i || [], e = "right" === e ? "_" + e : e;
                    var d, u, p = e ? "y_optional" : "y", f = n.getPositiveOrNegative(r, p, i), h = 0, g = 0,
                        m = [a.PStackColumn, a.PStackBar, a.PStackArea].indexOf(t) > -1,
                        v = [a.NStackColumn, a.NStackBar, a.NStackArea].indexOf(t) > -1, y = t === a.Scatter;
                    if (m) "mix" === f ? (h = 100, g = -100) : "negative" === f ? (h = 0, g = -100) : "positive" === f && (h = 100, g = 0); else if (y) {
                        if (r.y[1] && r.y[1].data.length) {
                            var b = Math.max.apply(Math, r.y[1].data), _ = Math.min.apply(Math, r.y[1].data);
                            b * _ < 0 ? (o.yaxis_max_disabled ? (d = Math.max.apply(Math, r.y[1].data), h = n.formatNumber(b)) : (d = o.yaxis_max, h = d), o.yaxis_min_disabled ? (u = Math.min.apply(Math, r.y[1].data), g = n.formatNumber(_)) : (u = o.yaxis_min, g = u)) : (o.yaxis_max_disabled ? (d = Math.max.apply(Math, r.y[1].data), h = n.formatNumber(b), h = Math.max(0, h)) : (d = o.yaxis_max, h = d), o.yaxis_min_disabled ? (u = Math.min.apply(Math, r.y[1].data), g = n.formatNumber(_), g = Math.min(0, g)) : (u = o.yaxis_min, g = u)), $.cookie("yaxis_min" + e, u), $.cookie("yaxis_max" + e, d)
                        }
                    } else {
                        if (t === a.Waterfall && (o.yaxis_max_disabled = !0, o.yaxis_min_disabled = !0), "mix" !== f || l) if (l) {
                            var w = n.getEdgeValueFromMultiArray(r, "y", "max", t, i),
                                x = n.getEdgeValueFromMultiArray(r, "y", "min"), C = .05 * (w - x),
                                k = o.yaxis_min_disabled, S = o.yaxis_max_disabled,
                                T = o.yaxis_max <= 0 ? w : o.yaxis_max, D = o.yaxis_min < 0 ? 0 : o.yaxis_min;
                            "_right" !== e ? (k ? (d = 0, h = n.formatNumber(d)) : (d = -D, h = -D), S ? (u = -w, g = n.formatNumber(u)) : (u = -T, g = -T), s.info.yaxis_auto_zoom && n.canSetZoom(t) && (d = -x, h = Math.min(0, -x + C), g = -w - C)) : (k ? (u = 0, g = n.formatNumber(u)) : (u = D, g = D), S ? (d = w, h = n.formatNumber(d)) : (d = T, h = T), s.info.yaxis_auto_zoom && n.canSetZoom(t) && (u = x, g = Math.max(0, x - C), h = w + C))
                        } else {
                            if ("positive" == f ? (u = 0, d = s._getYAxisLabelEdgeValue(t, p, "max", i), h = n.formatNumber(d)) : "negative" == f && (d = 0, u = s._getYAxisLabelEdgeValue(t, p, "min", i), g = n.formatNumber(u)), (!v && "y" === p && s.info.yaxis_auto_zoom || "y_optional" === p && s.info.yaxis_auto_zoom_right) && n.canSetZoom(t)) {
                                d = n.getEdgeValueFromMultiArray(s.data, p, "max", t, i), u = n.getEdgeValueFromMultiArray(s.data, p, "min", t, i);
                                var C = .05 * (d - u);
                                "positive" == f ? (h = d + C, g = Math.max(0, u - C), h === g && (h *= 1.05, g *= .95)) : "negative" == f && (h = Math.min(0, d + C), g = u - C, h === g && (h *= .95, g *= 1.05))
                            }
                            !c["yaxis_max_disabled" + e] && c["yaxis_max" + e] && (h = Number(c["yaxis_max" + e] || o["yaxis_max" + e])), !c["yaxis_min_disabled" + e] && c["yaxis_min" + e] && (g = Number(c["yaxis_min" + e] || o["yaxis_min" + e]))
                        } else {
                            var L = e ? o.yaxis_max_disabled_right : o.yaxis_max_disabled,
                                A = e ? o.yaxis_min_disabled_right : o.yaxis_min_disabled,
                                E = e ? o.yaxis_max_right : o.yaxis_max, I = e ? o.yaxis_min_right : o.yaxis_min;
                            L ? (d = s._getYAxisLabelEdgeValue(t, p, "max", i), h = n.formatNumber(d)) : (d = E, h = d), A ? (u = s._getYAxisLabelEdgeValue(t, p, "min", i), g = n.formatNumber(u)) : (u = I, g = u)
                        }
                        $.cookie("yaxis_max" + e, d), $.cookie("yaxis_min" + e, u)
                    }
                    return {max: h, min: g, origin_max: d, origin_min: u}
                }

                function t(t, i, r, l) {
                    var c = r === a.ComparisonBar;
                    i = "right" === i ? "_" + i : i, o.yAxisRange = [];
                    var d = {
                        reversed: !1,
                        title: {text: ""},
                        gridLineWidth: 0,
                        opposite: !(!i || c),
                        labels: {
                            enabled: !s.isDashboardMode || s.isDashboardMode && s.dash_setting.show_axis,
                            formatter: function () {
                                var e = n.checkPercentLabel(this, l, r, c ? "" : i);
                                return n.drawGridPlotLine(this, s, o, r, "y"), e
                            }
                        }
                    }, u = r === a.PStackColumn || r === a.PStackBar || r === a.PStackArea, p = function () {
                        var t, c, d, u, p = (s.theme, s.mode.split("*")), f = (p[0], p[1], []),
                            h = [a.PStackColumn, a.PStackBar, a.PStackArea].indexOf(r) > -1, g = r === a.ComparisonBar,
                            m = r === a.Line, v = h || g ? 1 : 1.2, y = [], b = s._isStackChart();
                        if ("C281" === r && (this.series = s.options.series), this.series) {
                            var _ = this.series.length;
                            this.series.forEach(function (e, t) {
                                if (e.visible === !1) {
                                    var i = b ? _ - t - 1 : t;
                                    y.push(i)
                                }
                            })
                        }
                        var w = e(i, r, y, l);
                        if (c = w.min, t = w.max, c * t < 0) {
                            var x = o.yaxis_auto_zoom && n.canSetZoom(r),
                                C = !x && (i ? o.yaxis_max_disabled_right : o.yaxis_max_disabled),
                                k = !x && (i ? o.yaxis_min_disabled_right : o.yaxis_min_disabled);
                            if (C && k) {
                                var S = Math.abs(t), T = Math.abs(c), D = S > T ? 1 : -1, L = D > 0 ? S : T;
                                if (L >= 3 * (D < 0 ? S : T)) {
                                    var A = Math.max(Math.abs(w.origin_max * v), Math.abs(w.origin_min * v));
                                    if (L = n.formatNumber(A, 3), !(d = Number(L.div(3).toFixed(6)))) return;
                                    if (m) {
                                        var E = !1, $ = 1, I = 1;
                                        Math.abs(L.div(3)) <= Math.abs(w.origin_max * v) && (I = Math.abs(Math.abs(L.div(3)) - Math.abs(w.origin_max * v)), E = !0), Math.abs(L) < Math.abs(w.origin_min * v) && (I = Math.abs(Math.abs(L) - Math.abs(w.origin_min * v)), E = !0), E && ($ = Math.ceil(I.div(d)), L = n.formatNumber(A + $ * d, 3), d = Number(L.div(3).toFixed(6)))
                                    }
                                    u = isInteger(d) ? 0 : d.toString().split(".")[1].length;
                                    for (var F = 0; F <= L; F = Number(F.add(d).toFixed(u))) D > 0 ? f.push(u ? Number(F.toFixed(Math.min(u, 6))) : F) : f.push(u ? 0 === F ? 0 : -Number(F.toFixed(Math.min(u, 6))) : 0 === F ? 0 : -F);
                                    return f.length < 4 && f.push(D * F), f.push(Number((-D * d).toFixed(u))), f.sort(function (e, t) {
                                        return e - t
                                    })
                                }
                                t = n.formatNumber(L * v), c = n.formatNumber(-L * v)
                            }
                        } else {
                            var O = o.yaxis_auto_zoom_right && n.canSetZoom(r),
                                x = o.yaxis_auto_zoom && n.canSetZoom(r);
                            if (!h) {
                                var M, N;
                                i ? (M = !O && o.yaxis_max_disabled_right, N = !O && o.yaxis_min_disabled_right) : (M = !x && o.yaxis_max_disabled, N = !x && o.yaxis_min_disabled), M && N && (c = n.formatNumber(w.origin_min * v), t = n.formatNumber(w.origin_max * v))
                            }
                            if (g) {
                                var M = !x && (o.yaxis_max_disabled || o.yaxis_max_right),
                                    N = !x && o.yaxis_min_disabled;
                                "_right" !== i ? (c = M ? n.formatNumber(w.origin_min) : w.min, t = N ? n.formatNumber(w.origin_max) : w.max) : (c = N ? n.formatNumber(w.origin_min) : w.min, t = M ? n.formatNumber(w.origin_max) : w.max)
                            }
                        }
                        if (d = Number(t.sub(c).div(4).toFixed(6))) {
                            if (u = isInteger(d) ? 0 : d.toString().split(".")[1].length, g && "pos_middle" === o.comparison_xaxis_pos && "_right" !== i) {
                                for (var j = -t; j <= -c; j = Number(j.add(d).toFixed(u))) f.push(u ? Number(-j.toFixed(Math.min(u, 6))) : -j);
                                f.length < 5 && f.push(c), f.reverse()
                            } else {
                                for (var F = c; F <= t; F = Number(F.add(d).toFixed(u))) f.push(u ? Number(F.toFixed(Math.min(u, 6))) : F);
                                f.length < 5 && f.push(t)
                            }
                            return f
                        }
                    };
                    if (t.max * t.min >= 0 && t.max === t.min) return d;
                    var f = o.chart_type === a.Scatter;
                    return f && o.yaxis_min_disabled && o.yaxis_max_disabled || (d.tickPositioner = p), f && (d.getLabelRange = p), d
                }

                function i(e, t) {
                    for (var i = {C220: 0, C210: 0, C211: 0, C212: 0}, n = e.length, a = [], r = 0; r < n; r++) {
                        var o = e[r];
                        o.field_series_type ? i[o.field_series_type] = i[o.field_series_type] + 1 : i[t] = i[t] + 1
                    }
                    return _.forIn(i, function (e, t) {
                        e === n && e > 0 && (a[0] = t)
                    }), a[0] || (i.C220 > 0 && (a[0] = "C220"), i.C210 > 0 && (a[0] = "C210"), i.C211 > 0 && (a[0] = "C211"), i.C212 > 0 && (a[1] = "C212")), a
                }

                var r = this.data, o = this.info;
                this.options.yAxis = [];
                var s = this, l = this.getChartType(), c = o, d = [];
                if (l === a.Biax) {
                    var u = [];
                    u = i(r.y, o.type_optional[0]), d[0] = u[0], d[2] = u[1], u = i(r.y_optional, o.type_optional[1]), d[1] = u[0], d[3] = u[1], o.y_optional_for_draw = d, o.yAxis.length && (n.checkIsAllDataNull(r, "y") ? this.options.yAxis[0] = {
                        reversed: !1,
                        title: {text: ""},
                        gridLineWidth: 0,
                        opposite: !1,
                        labels: {
                            enabled: !s.isDashboardMode || s.isDashboardMode && s.dash_setting.show_axis,
                            formatter: function () {
                                return n.checkPercentLabel(this, r, d[0])
                            }
                        },
                        tickPositioner: function () {
                            return [0, 1, 2, 3, 4]
                        }
                    } : this.options.yAxis[0] = t(e("", d[0], "", r), "", d[0], r), d[2] && (n.checkIsAllDataNull(r, "y") ? this.options.yAxis[2] = {
                        reversed: !1,
                        title: {text: ""},
                        gridLineWidth: 0,
                        opposite: !1,
                        labels: {
                            enabled: !s.isDashboardMode || s.isDashboardMode && s.dash_setting.show_axis,
                            formatter: function () {
                                return n.checkPercentLabel(this, r, d[2])
                            }
                        },
                        tickPositioner: function () {
                            return [0, 1, 2, 3, 4]
                        }
                    } : this.options.yAxis[2] = t(e("", d[2], "", r), "", d[2], r), this.options.yAxis[2].visible = !1)), o.yAxisOptional.length && (n.checkIsAllDataNull(r, "y_optional") ? this.options.yAxis[1] = {
                        reversed: !1,
                        title: {text: ""},
                        gridLineWidth: 0,
                        opposite: !0,
                        labels: {
                            enabled: !s.isDashboardMode || s.isDashboardMode && s.dash_setting.show_axis,
                            formatter: function () {
                                return n.checkPercentLabel(this, r, d[1], "right")
                            }
                        },
                        tickPositioner: function () {
                            return [0, 1, 2, 3, 4]
                        }
                    } : this.options.yAxis[1] = t(e("right", d[1], "", r), "right", d[1], r), d[3] && (n.checkIsAllDataNull(r, "y_optional") ? this.options.yAxis[3] = {
                        reversed: !1,
                        title: {text: ""},
                        gridLineWidth: 0,
                        opposite: !0,
                        labels: {
                            enabled: !s.isDashboardMode || s.isDashboardMode && s.dash_setting.show_axis,
                            formatter: function () {
                                return n.checkPercentLabel(this, r, d[3], "right")
                            }
                        },
                        tickPositioner: function () {
                            return [0, 1, 2, 3, 4]
                        }
                    } : this.options.yAxis[3] = t(e("right", d[3], "", r), "right", d[3], r), this.options.yAxis[3].visible = !1))
                } else if (l !== a.Gauge && o.yAxis.length) {
                    if (0 === o.compare_axis.length && n.checkIsAllDataNull(r, "y")) return void(this.options.yAxis[0] ? this.options.yAxis[0].gridLineWidth = 0 : this.options.yAxis[0] = {gridLineWidth: 0});
                    l === a.ComparisonBar ? (this.options.yAxis[0] = t(e("", l, "", r), "", l, r), this.options.yAxis[1] = t(e("right", l, "", r), "right", l, r)) : this.options.yAxis[0] = t(e("", l, "", r), "", l, r)
                }
                [a.Line, a.Column, a.Bar, a.NStackColumn, a.PStackColumn, a.NStackBar, a.PStackBar, a.ComparisonBar].indexOf(l) > -1 && "dark" === this.theme && (this.options.yAxis[0].gridLineWidth = 1, this.options.yAxis[0].gridLineColor = "rgba(255, 255, 255, .06)", l == a.ComparisonBar && (this.options.yAxis[1].gridLineWidth = 1, this.options.yAxis[1].gridLineColor = "rgba(255, 255, 255, .06)"))
            }, _setYaxisTitle: function () {
                var e = this, t = this.info, i = t.yaxis_name, n = t.yaxis_unit || "";
                if (i || (i = this.getChartType() === a.Scatter ? this.data.y[1] ? this.data.y[1].name : "" : this.data.y[0] ? this.data.y[0].name : ""), t.yAxis.length > 0 && (!this.isDashboardMode || this.gridWidth > 3)) {
                    if (t.chart_type == a.ComparisonBar) {
                        var r = "";
                        t.compare_axis && t.compare_axis.length ? (r = t.yaxis_name_right || this.data.y[1] && this.data.y[1].nick_name || "", i = t.yaxis_name || this.data.y[0].nick_name) : (r = t.yaxis_name_right || this.data.y[1] && this.data.y[1].name || "", i = t.yaxis_name || this.data.y[0].name);
                        var o = $.extend(!0, this.options.yAxis[0], {title: {text: !e.isDashboardMode || e.isDashboardMode && e.dash_setting.show_axis ? i : ""}}),
                            o = $.extend(!0, this.options.yAxis[1], {title: {text: !e.isDashboardMode || e.isDashboardMode && e.dash_setting.show_axis ? r : ""}})
                    } else var o = $.extend(!0, this.options, {yAxis: [{title: {text: !e.isDashboardMode || e.isDashboardMode && e.dash_setting.show_axis ? n ? i + " (" + n + ")" : i : ""}}]});
                    if (t.chart_type === a.Biax && o.yAxis[1]) {
                        var s = t.yaxis_name_right, l = t.yaxis_unit_right || "";
                        s || (s = this.data.y_optional.length ? this.data.y_optional[0].name : ""), !e.isDashboardMode || e.isDashboardMode && e.dash_setting.show_axis ? o.yAxis[1].title.text = "" == l ? s : s + " (" + l + ")" : o.yAxis[1].title.text = ""
                    }
                } else {
                    var c = [{title: {text: ""}}];
                    t.chart_type === a.Biax && c.push({title: {text: ""}}), $.extend(!0, this.options, {yAxis: c})
                }
            }, _setChartBubbleValue: function () {
                if (this.chartData.bubble_values) for (var e = this.options.series.length, t = this.info.bubble_setting.field.name, i = 0; i < e; i++) for (var n = this.options.series[i].data, a = 0; a < n.length; a++) if (this.options.series[0].bubble_values && this.options.series[0].bubble_values.length > 0) this.options.series[i].data[a].bubbleValue = this.options.series[i].bubble_values[a].bubbleValue, this.options.series[i].data[a].bubbleName = this.options.series[i].bubble_values[a].bubbleName; else {
                    var r = this.chartData.bubble_values[i].origin_data;
                    this.options.series[i].data[a].bubbleValue = r[a], this.options.series[i].data[a].bubbleName = t
                }
            }, _setChartData: function () {
                var e = this, t = this.getChartType(), i = this.data, n = this.info, r = i.x.length, o = i.y.length,
                    s = i.y_optional.length, l = this.chartData.y, c = this.chartData.y_optional || [],
                    d = this.info.type_optional;
                if (t !== a.Scatter && t !== a.TreeMap) {
                    if (0 !== r || 0 === o && 0 === s) {
                        if (this._setSeries(0), this.options.series = this.reverseStackChartData(), n.chart_type === a.Biax) {
                            this._setSeries(1);
                            var u = 0, p = 0;
                            if (1 === n.xAxis.length && "date" === n.xAxis[0].data_type) {
                                var f = n.xAxis[0].granularity, h = {
                                    second: 1e3,
                                    minute: 6e4,
                                    hour: 36e5,
                                    day: 864e5,
                                    week: 6048e5,
                                    month: 26784e5,
                                    quarter: 79488e5,
                                    year: 316224e5
                                };
                                p = this.chartData.x[0].data.length;
                                for (var g = p - 1; g > 0; g--) {
                                    var m = g - 1, v = this.chartData.x[0].data[g] - this.chartData.x[0].data[m];
                                    if (v > h[f]) {
                                        for (var y = 0; y < this.chartData.y.length; y++) this.chartData.y[y].data.splice(g, 0, [this.chartData.x[0].data[g] - h[f], null]);
                                        for (var b = 0; b < this.chartData.y_optional.length; b++) this.chartData.y_optional[b].data.splice(g, 0, [this.chartData.x[0].data[g] - h[f], null]);
                                        u++
                                    }
                                }
                            }
                            if (["C211", "C212"].indexOf(d[0]) > -1 && (l = l.reverse(), this.data.selectionColors)) {
                                var _ = this.data.selectionColors.slice(0, l.length).reverse();
                                this.options.colors = _.concat(this.data.selectionColors.slice(l.length))
                            }
                            if (["C211", "C212"].indexOf(d[1]) > -1 && (c = c.reverse(), this.data.selectionColors)) {
                                var _ = this.data.selectionColors.slice(l.length).reverse();
                                this.options.colors = this.data.selectionColors.slice(0, l.length).concat(_)
                            }
                            this.options.series = l.concat(c), this.options.series[0] && p + u > e.maxDataLen && this.options.series.forEach(function (t, i) {
                                t.data.splice(0, p + u - e.maxDataLen)
                            })
                        }
                    } else {
                        if (t === a.Pie) return;
                        if (t === a.Radar) {
                            if (o.length < 3) return !1;
                            var w = [], x = [];
                            if (n.compare_axis.length) {
                                var C = {}, k = {};
                                angular.forEach(i.y, function (e) {
                                    var t = e.compare_names, i = t.slice(1).join("_");
                                    k[e.uniq_id] || (w.push(t[0]), k[e.uniq_id] = 1), C[i] ? C[i].data.push(1 * e.data[0]) : (C[i] = {
                                        name: i,
                                        data: [1 * e.data[0]],
                                        compare_values: e.compare_values,
                                        uniq_id: e.uniq_id
                                    }, x.push(C[i]))
                                })
                            } else {
                                var S = [];
                                angular.forEach(i.y, function (e) {
                                    w.push(e.name), S.push(1 * e.data[0])
                                }), x = [{data: S}]
                            }
                            return void $.extend(!0, this.options, {
                                xAxis: {type: "category", categories: w},
                                series: x
                            })
                        }
                        $.extend(!0, this.options, {xAxis: {type: "category", labels: {enabled: !1}}});
                        for (var T = 0; T < o; T++) for (var D = 0; D < i.y[T].data.length; D++) this.chartData.y[T].data[D] = {y: 1 * i.y[T].data[D]};
                        if (t === a.Biax) {
                            for (var L = 0; L < s; L++) for (var A = 0; A < this.chartData.y_optional[L].data.length; A++) this.chartData.y_optional[L].data[A] = {y: 1 * this.chartData.y_optional[L].data[A]};
                            var x = [];
                            if (["C211", "C212"].indexOf(d[0]) > -1 && (l = l.reverse(), this.data.selectionColors)) {
                                var _ = this.data.selectionColors.slice(0, l.length).reverse();
                                this.options.colors = _.concat(this.data.selectionColors.slice(l.length))
                            }
                            if (["C211", "C212"].indexOf(d[1]) > -1 && (c = c.reverse(), this.data.selectionColors)) {
                                var _ = this.data.selectionColors.slice(l.length).reverse();
                                this.options.colors = this.data.selectionColors.slice(0, l.length).concat(_)
                            }
                            angular.forEach(l, function (e, t) {
                                e.type = "column", e.yAxis = 0, e.zIndex = 1, x.push(e)
                            }), angular.forEach(c, function (e, t) {
                                e.type = "line", e.yAxis = 1, e.zIndex = 2, x.push(e)
                            }), this.options.series = x
                        } else this.options.series = this.reverseStackChartData()
                    }
                    var E = this.options.series.length;
                    if (this._canSetOverlapSize(t, n.overlapMode)) {
                        var I = (this.options.series, this.info.bubble_setting.size_range);
                        if (I = I || [1, 10], this.chartData.bubble_size_groups && this.chartData.bubble_size_groups.length > 1) {
                            this._setChartBubbleValue();
                            var F = this.info.bubble_setting.reverse, O = this.chartData.bubble_size_groups,
                                M = O[1][0] - O[0][0];
                            if (0 == M) for (var L = 0; L < E; L++) this.options.series[L].pointWidth = I[1]; else for (var L = 0; L < E; L++) {
                                this.options.series[L].pointPadding = 0;
                                for (var N = (this.chartData.bubble_values[L].origin_data, this.options.series[L].data), A = 0; A < N.length; A++) {
                                    var j, P = N[A].bubbleValue;
                                    if (0 == P || P) {
                                        var R = (I[1] - I[0]) / M;
                                        j = P * R + (I[0] - O[0][0] * R), F && (R = (I[0] - I[1]) / M, j = P * R + (I[1] - O[0][0] * R)), j *= 10, j = j >= 0 ? j : 0
                                    } else j = 0;
                                    this.options.series[L].data[A].pointWidth = j
                                }
                            }
                        } else for (var M = this._normalizeSize(E, I), L = 0; L < E; L++) this.options.series[L].pointPadding = 0, this.options.series[L].pointWidth = M[L] / 22 * 100
                    } else for (var L = 0; L < E; L++) void 0 != this.options.series[L].pointWidth && (delete this.options.series[L].pointWidth, this.options.series[L].pointPadding = .2);
                    this._handleLineMarker(this.options.series)
                }
            }, _normalizeSize: function (e, t, i) {
                if (e < 2) return [t[1] + 2];
                for (var n = d3.scale.linear().domain([1, e]).range(t), a = [], r = 0; r < e; r++) a.push(Math.round(n(r + 1)) + 2);
                return i ? a : a.reverse()
            }, _handleLineMarker: function (e) {
                var t = this, i = t.getChartType();
                [a.Line, a.Area, a.NStackArea, a.PStackArea].indexOf(i) > -1 ? e.forEach(function (e) {
                    1 === e.data.reduce(function (e, t) {
                        return Number(e) + Number(!!t)
                    }, 0) && $.extend(!0, e, {
                        marker: {
                            lineWidth: 2,
                            fillColor: "dark" == t.theme ? "rgba(255, 255, 255, 0)" : "#fff"
                        }
                    })
                }) : i === a.Biax && e.forEach(function (e) {
                    "line" !== e.type && "spline" !== e.type || $.extend(!0, e, {marker: {enabled: !0}})
                })
            }, _needSetColor: function () {
                return [a.Table, a.Gauge, a.Scatter, a.Waterfall].indexOf(this.info.chart_type) < 0
            }, _isSettedColor: function () {
                var e = this, t = e.info.yAxis, i = e.info.yAxisOptional;
                return [t].concat(i).some(function (e) {
                    return void 0 !== e.series_color
                })
            }, _isStackChart: function () {
                return "C211 C212 C241 C242 C351 C352".indexOf(this.info.chart_type) > -1
            }, reverseStackChartData: function () {
                return this._isStackChart() ? this.chartData.y.reverse() : this.chartData.y
            }, _setSeries: function (e) {
                var t, i = this.data, r = this.info, o = this.getChartType(), s = [], l = {},
                    c = 0 === e ? "y" : "y_optional", d = "category" === this.options.xAxis.type ? "name" : "x", u = 0;
                if ("date" === i.x[0].data_type && i.x[0].granularity_name) switch (i.x[0].granularity) {
                    case"year":
                        u = 864e5 * (r.xAxis[0].year_start_month - 1) * 30;
                        break;
                    case"month":
                        u = 864e5 * (r.xAxis[0].month_start_day - 32);
                        break;
                    case"week":
                        u = 864e5 * (r.xAxis[0].week_start_day_of_week - 1)
                }
                i.x[0].dateTimePadding = u;
                var p = i[c] && i[c].length > 0 ? i[c].length * i[c][0].data.length : 0, f = Math.ceil(p / 3e3),
                    h = p > 3e3 && $.inArray(o, ["C210", "C211", "C212", "C220", "C240", "C214"]) > -1 && f > 0;
                i[c].length > 0 && (this.xMap = {});
                for (var g = 0; g < i[c].length; g++) {
                    t = i[c][g].data, t.length, s = [], l = {};
                    for (var m = 0; m < t.length; m++) {
                        l = {};
                        var v = i.x[0].data[m];
                        if ("date" === i.x[0].data_type && i.x[0].granularity_name) if ("month" === i.x[0].granularity) {
                            var y = new Date(v).getMonth() + 1;
                            [1, 3, 5, 7, 8, 10, 12].indexOf(y) > -1 ? l[d] = v - u : [4, 6, 9, 11].indexOf(y) > -1 ? l[d] = v - u - 864e5 : 2 === y && (bdp.utils.isLeapYear(v) ? l[d] = v - u - 1728e5 : l[d] = v - u - 2592e5)
                        } else l[d] = v - u; else l[d] = v;
                        h && (l.dataLabels = l.dataLabels || {}, m % f != 0 && (l.dataLabels.enabled = !1)), this.xMap[l[d]] = this.data.x[0].data[m];
                        if (null == t[m]) l.y = null; else if ("string" == typeof t[m] || void 0 === t[m].length) l.y = null !== t[m] ? 1 * t[m] : null; else if ($.isArray(t[m])) l = [].concat(l[d], t[m]), delete l.color; else for (var b = 0; b < t[m].length; b++) l.y = null !== t[m][b] ? 1 * t[m][b] : null;
                        s.push(l)
                    }
                    var _ = r.compare_axis && r.compare_axis.length;
                    this.isOpenTimePredicted && _ && n.timePredicted.checkType(i[c][g], "open", "line") && (i[c][g].linkedTo = ":previous"), this.isOpenTimePredicted && n.timePredicted.checkType(i[c][g], "enable", "area") && n.timePredicted.extendAreaRangeOpt(i[c][g], +this.info.use_spline), this.chartData[c][g] = angular.copy(i[c][g]), this.chartData[c][g].data = s, r.chart_type === a.Biax && (i.y.length > 0 || i.y_optional.length > 0) && (this.chartData[c][g].type = "C220" === r.type_optional[e] ? "line" : "column", this.chartData[c][g].yAxis = e, this.chartData[c][g].zIndex = "line" === this.chartData[c][g].type ? 2 : 1)
                }
            }, _setColor: function () {
                var e = this.info, i = this.data, o = this.options.series, s = this.getChartType(), l = e.color_setting,
                    c = [].concat(e.y || [], e.y_optional || []), d = c.some(function (e, t) {
                        return !!e.series_color
                    }), u = t.getColorsByType(e.chart_type, "bdp");
                if ("C290" !== s || e.xAxis.length) if (this.isOpenTimePredicted && angular.forEach(o, function (e, t) {
                    n.timePredicted.checkType(e, "enable", "line") && (e.series_color = e.time_seires_setting.series_color), n.timePredicted.checkType(e, "enable", "area") && (e.series_color = e.time_seires_setting.series_color)
                }), ($.isEmptyObject(l) || l.is_series) && (e.yAxis.length > 0 || s === a.Biax) && d) {
                    if (s === a.Pie || s === a.Scatter) return;
                    if (this.isOpenTimePredicted && !this.isSplitChart()) {
                        var p = e.compare_axis && e.compare_axis.length;
                        n.timePredicted.setSeriesColor(o, p, this.options.colors)
                    } else angular.forEach(o, function (e, t) {
                        e.series_color ? e.color = e.series_color : e.color = u[t % u.length]
                    })
                } else {
                    if (delete l.is_series, $.isEmptyObject(l) || !this._needSetColor()) return void(this.isOpenTimePredicted && n.timePredicted.setSeriesColor(o, e.compare_axis.length, this.options.colors));
                    if (1 != +l.mode) {
                        u = t.colors[l.theme];
                        var f = l.enum_color_map || null, h = null === f ? [] : (0, r.default)(f).map(function (e) {
                            return e.split("_")
                        }), g = {count: 0, posInColorField: [], posInDimension: []};
                        if (angular.forEach(e.xAxis, function (e, t) {
                            for (var i = 0; i < l.field.length; i++) if (e.fid === l.field[i].fid) {
                                g.count++, g.posInColorField.push(i), g.posInDimension.push(t);
                                break
                            }
                        }), e.xAxis.length && g.count > 0) {
                            var m = [];
                            angular.forEach(o, function (t, n) {
                                angular.forEach(t.data, function (a, r) {
                                    g.posInDimension.forEach(function (o, s) {
                                        var l = i.x[o].data[r];
                                        if (m = [t.uniq_id.toString()].concat(a.name, null === l ? null : l.toString()), e.compare_axis.length > 0 && (m = m.concat(t.compare_values)), f) {
                                            for (var c = 0; c < h.length; c++) if (bdp.utils.isContain(m, h[c])) {
                                                a.color = f[h[c].join("_")].color;
                                                break
                                            }
                                            a.color || (a.color = u[(n * t.data.length + r) % u.length])
                                        } else a.color = u[(n * t.data.length + r) % u.length]
                                    })
                                })
                            })
                        } else e.compare_axis.length && angular.forEach(o, function (e, t) {
                            var i = e.compare_values.slice().reverse();
                            if (i.splice(-1, 1, e.uniq_id.toString()), f) if (f.hasOwnProperty(i.join("_"))) e.color = f[i.join("_")].color; else {
                                var n = [e.uniq_id.toString()].concat(e.compare_values);
                                (e.compare_values.indexOf("") > -1 || e.compare_values.indexOf(null) > -1) && (n = n.concat(["(空白)", "(Blank)"]));
                                for (var a = 0; a < h.length; a++) if (bdp.utils.isContain(n, h[a])) {
                                    e.color = f[h[a].join("_")].color;
                                    break
                                }
                            } else e.color = u[t % u.length]
                        })
                    } else if (1 == +l.mode) {
                        var v = e.compare_axis && e.compare_axis.length > 0;
                        if ([a.Line, a.Radar, a.Area, a.NStackArea, a.PStackArea].indexOf(s) > -1) {
                            var y = this.$elem.height() - 34;
                            if (l && l.range_color) {
                                var b, _ = l.range_color.start_color, w = l.range_color.end_color;
                                b = _ == w ? _ : {
                                    linearGradient: [0, 0, 0, y],
                                    stops: [[0, w], [1, _]]
                                }, this.options.series.forEach(function (e) {
                                    e.color = b
                                })
                            }
                        }
                        var x = i.colors.map(function (e) {
                                return Number(e)
                            }), C = n.linearRangeColor(l.range_color.start_color, l.range_color.end_color),
                            k = n.createLinearScale(l.range_color, x), S = [], T = l.range_color.step;
                        if (T > 1) {
                            for (var D = 0; D < T - 1; D++) S.push(C(D / (T - 1)));
                            S.push(C(1))
                        }
                        angular.forEach(o, function (e, t) {
                            v && (x = i.colors[t % i.colors.length].map(function (e) {
                                return Number(e)
                            }), k = n.createLinearScale(l.range_color, x)), angular.forEach(e.data, function (e, t) {
                                var i = x[t], n = k(i);
                                if (T) {
                                    var a = Math.floor(T * n);
                                    a = Math.min(a, T - 1), e.color = S[a]
                                } else e.color = C(n)
                            })
                        })
                    }
                }
            }, _setGuideLine: function () {
                var e = this, i = this.info.drill_level, r = this.getChartType(), o = this.info, s = this.options,
                    l = this.data;
                if (r === a.Pie && r === a.Table || r === a.Radar || r === a.Waterfall) return !1;
                var c, d, u, p = s.yAxis[0].tickPositioner ? s.yAxis[0].tickPositioner() : [], f = [],
                    h = s.yAxis[1] && s.yAxis[1].tickPositioner ? s.yAxis[1].tickPositioner() : [], g = 12, m = 10 * g,
                    v = "#8FC2EC", y = "dark" === this.theme ? "#EE4B4B" : "#D0021B", b = 1, _ = 3, w = [], x = [],
                    C = [], k = [],
                    S = [a.Bar, a.NStackBar, a.PStackBar, a.ComparisonBar].indexOf(r) > -1 || [a.Biax].indexOf(r) > -1 && o.seriesType;
                c = l.guide_line || [], d = l.guide_line_right || [], u = l.guide_line_x || [], w = s.yAxis[0].plotLines || [], x = s.xAxis.plotLines && s.xAxis.plotLines[0] || [], k = s.yAxis[1] && s.yAxis[1].plotLines || [];
                var T = function (e) {
                    if (e) {
                        for (var t = 0; t < e.length; t++) if (0 == +e[t]) return !0;
                        return !1
                    }
                }, D = function (t, i) {
                    var n = [{
                        color: e.deviceStyle.xAxis ? e.deviceStyle.xAxis.lineColor : "dark" === e.theme ? "rgba(255, 255, 255, .06)" : "#ccc",
                        width: 1,
                        value: 0,
                        defaultZero: !0
                    }];
                    if (!t) {
                        var a;
                        a = "dark" === e.theme ? {
                            text: "",
                            style: {color: "#fff"},
                            align: "left",
                            x: -22,
                            y: 3
                        } : {
                            text: "",
                            align: "left",
                            x: -22,
                            y: 5
                        }, "right" === i && (a.align = "right", a.x = -a.x), n[0].label = a
                    }
                    return n
                };
                if (w.length && 0 == +w[0].value) w = w.slice(0, 1); else {
                    var L = o.chart_type === a.Scatter && !$.isEmptyObject(o.bubble_setting);
                    r === a.Gauge || L ? w = [] : (w = D(T(p), "left"), C = D(T(h), "right"))
                }
                "fullscreen" !== this.mode || this.isMobileMode || (g = 13, m = 10 * g, v = "dark" === this.theme ? "rgba(255,255,255,.3)" : "rgba(0,0,0,.3)", b = 2, _ = 4);
                var A = function (e, i, o, s, l) {
                    if (s) {
                        if ("scatter_left" == e) {
                            e = "left";
                            var c = !0
                        }
                        for (var d = 50 * g, u = {}, p = 0, f = 0; f < s.length; f++) p = Math.max(p, isInteger(s[f]) ? 0 : s[f].toString().split(".")[1].length);
                        angular.forEach(i, function (i) {
                            var s = hz.cutString.cutStr(i.name, d + 1, !1, g), p = "", f = hz.cutString.getP(s, g);
                            u = {
                                width: Math.min(f, m) + 4,
                                height: 16 * Math.ceil(f / m),
                                top: 16 * -Math.ceil(f / m) - 20
                            };
                            var h = l ? -i.value : i.value;
                            i.formatter = n.transferPlotLineOldFormatter(i.formatter);
                            var y = n.formatPlotLineNumVal(i), w = y.numVal, x = y.numValWithoutDigit,
                                C = i.formatter || {};
                            if (C.hasOwnProperty("type") && "auto" != C.type) {
                                p = n.formatPlotLineLabelVal(C, x), u.width = "en" == t.language ? 100 : 90, u.height += 16, u.top -= 16;
                                var k = hz.cutString.getP(String(p), g);
                                f < k && 84 < k && (u.width = k)
                            }
                            var T = Math.ceil(hz.cutString.getP(w.toString(), g)), D = 12;
                            i.value > 1e3 && (D = 15), T = S ? -.5 * (T + D) : -(T + D), o.push({
                                color: v,
                                dashStyle: "dash",
                                value: h,
                                width: b,
                                zIndex: 4,
                                label: {
                                    text: n.formatPlotLineLabelTextHtml(i, e, w, s, p, u, S, c),
                                    align: e,
                                    verticalAlign: [a.Biax].indexOf(r) > -1 && "right" === e ? "top" : "bottom",
                                    x: "left" === e ? S ? T + 6 : T : -T,
                                    y: S ? "left" === e ? _ + 16 : [a.Biax].indexOf(r) > -1 && "right" === e ? _ - 16 : _ - 6 : _,
                                    rotation: 0,
                                    style: {
                                        color: "#fff",
                                        fontSize: g + "px",
                                        display: r === a.Gauge ? "none" : "block"
                                    },
                                    useHTML: !0,
                                    className: "highcharts-plot-line-label"
                                }
                            })
                        })
                    }
                };
                if (o.chart_type === a.Scatter && A("scatter_left", u, x, f), r == a.ComparisonBar) {
                    var E = [], I = [], F = o.y[0].uniq_id, O = o.y[1] && o.y[1].uniq_id || F;
                    k = D(T(h), "right"), k = D(T(h), "right"), angular.forEach(c, function (e) {
                        (e.uniq_id == F && "calculate" == e.value_type || "constant" == e.value_type) && E.push(e), (e.uniq_id == O && "calculate" == e.value_type || "constant" == e.value_type) && I.push(e)
                    }), A("left", E, w, p, !0), A("left", I, k, h)
                } else A("left", c, w, p);
                if (d && d.length > 0 && A("right", d, C, h), !i && [a.PStackColumn, a.PStackBar, a.PStackArea, a.Waterfall].indexOf(r) < 0) {
                    var M = t.helper.renderChartWarnGuideLine(l, o.warn_info, {
                        chartType: r,
                        isBarType: S,
                        warnColor: y,
                        lineWidth: b,
                        textTop: _,
                        fontSize: g
                    });
                    w = w.concat(M.guideLines), C = C.concat(M.guideLinesRight), k = k.concat(M.guideLinesRightSide)
                }
                r !== a.ComparisonBar && (c.length || d && d.length) && (s.legend && s.legend.enabled !== !1 ? s.legend.margin = Math.max(s.legend.margin || 0, 5) : s.chart.marginRight = Math.max(s.chart.marginRight || 0, 10)), angular.isArray(s.yAxis) ? (s.yAxis[0].plotLines = w, o.chart_type === a.Biax && s.yAxis[1] && (s.yAxis[1].plotLines = C), r == a.ComparisonBar && s.yAxis[1] && (s.yAxis[1].plotLines = k)) : s.yAxis.plotLines = w, o.chart_type === a.Scatter && (s.xAxis.plotLines = x)
            }, _setXaxisPlotLines: function () {
                var e = this.info, t = this.data, i = e.xAxis[0];
                if (i && "date" === i.data_type) {
                    var a = i.granularity, r = this.options, o = new Date(t.x[0].data[0]),
                        s = new Date(t.x[0].data[t.x[0].data.length - 1]), l = n.getTimeZoneOffset(),
                        c = {year: o.getFullYear(), month: o.getMonth()},
                        d = {year: s.getFullYear(), month: s.getMonth()};
                    if (c.year === d.year && c.month === d.month || "year" === a) return;
                    if ("day" === a) for (var u = c.year; u <= d.year; u++) for (var p = 0; p < 12; p++) r.xAxis.plotLines.push({
                        dashStyle: "ShortDash",
                        color: "#CCC",
                        width: 1,
                        value: Date.UTC(u, p, 1) + 3600 * l * 1e3
                    }); else for (var f = c.year; f <= d.year; f++) r.xAxis.plotLines.push({
                        dashStyle: "ShortDash",
                        color: "#CCC",
                        width: 1,
                        value: Date.UTC(f, 0, 1) + 3600 * l * 1e3
                    })
                }
            }, canDrawMarkPoint: function () {
                var e = this.getChartType(), t = !1;
                if (e) {
                    var i = this.info;
                    t = ["C210", "C211", "C212", "C220", "C240", "C241", "C242", "C243", "C250", "C320", "C350", "C351", "C352", "C360"].indexOf(e) > -1 && 1 === i.x.length && (!i.compare_axis || 0 === i.compare_axis.length)
                }
                return t
            }, translateMarkPoint: function () {
                var e = this.info.field_comment;
                if ($.isEmptyObject(e) || 0 === this.data.x.length || !this.canDrawMarkPoint()) return this.markPoints = [];
                var t = [], i = this.data.x[0].data, n = this.info.yAxis.concat(this.info.yAxisOptional),
                    a = this.data.x[0].data_type;
                return angular.forEach(e, function (e) {
                    for (var r = 0, o = n.length; r < o; r++) {
                        var s = e.xaxis_value;
                        "date" !== a && "sub_date" !== a || (s = Number(s));
                        var l = angular.indexOf(i, s), c = n[r].uniq_id + "";
                        if (n[r].fid === e.yaxis_id && c == e.yaxis_uniq_id && l > -1) {
                            t.push(angular.extend(e, {seriesIndex: r, xDataIndex: l}));
                            break
                        }
                    }
                }), this.markPoints = t
            }, destroy: function () {
                if (!this.$elem) return !0;
                this.chartInstance && "function" == typeof this.chartInstance.destroy && this.chartInstance.destroy(), this.chartInstance = null;
                var t = this.$elem.data("chart-data"), i = this.$elem.highcharts();
                this.$elem.removeClass("bdp-chart-loaded bdp-chart-loading bdp-chart-error");
                var n = t && t.info ? t.info.chart_type : "";
                if ($(".global-tooltip").empty(), i && "function" == typeof i.destroy) this.$elem.off("mouseleave mouseenter"), i.destroy(), this.$elem.html(""); else if (a.Table === n || a.KPICard === n || a.Custom == n) this.$elem.off("click"), this.$elem.html(""), this.chartTalbe && this.chartTalbe.destroy && this.chartTalbe.destroy(); else if ("C300 C301 C330 C360".indexOf(n) > -1) {
                    var r = d3.selectAll(this.$elem.toArray());
                    r.selectAll("svg").remove(), r.selectAll("*").remove(), r.text("")
                } else a.GIS === n ? this.gisMap && (this.gisMap.destroy(), delete this.gisMap) : a.WordCloud.indexOf(n) > -1 && ($(e).off("resize.wordcloud" + this.ct_id), this.$elem.off("mouseleave"), this.$elem.find("canvas").off("mousemove"), this.$elem.data("plugin_SVG3DTagCloud", void 0), this.$elem.html(""));
                this.supportSelect() && ($(".selection-tooltip-overlay").remove(), $(".selected-tooltip").remove())
            }
        }, t.Events.mixTo(i), t.Chart = i
    }(window, bdpChart)
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.default = function (e) {
        var t = {}, i = $.extend({chart: null}, e), n = {
            checkParams: function () {
                if (!i.chart) throw"The chart param is needed!"
            }, objs: {
                init: function () {
                },
                needSetLinkColor: function () {
                    var e = i.chart;
                    e.optional.linked_value;
                    return !e.isEmptyChart() && (!($.inArray(e.mode, ["edit", "fullscreen"]) > -1) && $.inArray(e.info.chart_id, e.mainChartIdContainer) != -1)
                }, setLinkColor: function (e) {
                    var t = i.chart, r = t.getChartType(), o = (t.info, t.data), s = t.info.chart_id, l = [], c = !1,
                        d = "C220" === r || "C250" === r, u = $.inArray(r, ["C350", "C351", "C352"]) > -1;
                    n.objs.isStack = a.default.checkStack(i.chart);
                    if ($.isArray(t.mainChartContainer) && 0 == t.mainChartContainer.length && (t.mainChartContainer = e && e.mainChartContainer || [], t.mainChartColorContainer = e && e.mainChartColorContainer || []), 0 != t.mainChartContainer.length) {
                        angular.forEach(t.mainChartContainer, function (e, t) {
                            e.ctId == s && (l = e.pointData, c = e.isSelection)
                        });
                        var p = (t.options.xAxis, a.default.getPointDataVals(l));
                        if (d || u) {
                            var f = t.chartInstance.series;
                            if ("C250" == r) {
                                var h;
                                f && f.forEach(function (e) {
                                    "line" == e.type && (h = !0)
                                }), h && n.objs.setLinkLineColor(f, o, p, c), !c && n.objs.setLinkBarColor(f, o, p, c)
                            } else n.objs.setLinkLineColor(f, o, p, c)
                        } else if (["pie", "map"].indexOf(t.options.chart.type) > -1) {
                            var g, m = t.chartInstance.series[0].data;
                            m.length > 1 && (angular.forEach(o.x[0].data, function (e, t) {
                                e == p[0] ? g = t : angular.isNumber(t)
                            }), angular.isNumber(g) && m[g].select(!0))
                        } else {
                            var f = t.chartInstance.series;
                            n.objs.setLinkBarColor(f, o, p, c)
                        }
                    }
                }, setLinkBarColor: function (e, t, i, r) {
                    var o = t.x, s = t.y.concat(t.y_optional || []);
                    angular.forEach(e, function (e, l) {
                        r ? e.points.forEach(function (e) {
                            for (var t = [], r = e.series.index, l = n.objs.isStack ? s.length - 1 - r : r, c = s[l] ? s[l].compare_names.slice(1) : [], d = !1, u = 0, p = o.length; u < p; u++) {
                                var f = o[u], h = a.default.getXDataIndex(e.series.data, f.data, e.index),
                                    g = f.data[h];
                                t.push(g)
                            }
                            if (t = t.concat(c), t = _.compact(t), i.forEach(function (e) {
                                angular.equals(t, e) && (d = !0)
                            }), !e.graphic) return !0;
                            d || .3 == e.graphic.attr("opacity") || e.graphic.attr("opacity", .3)
                        }) : angular.forEach(e.data, function (e, n) {
                            var a = [];
                            angular.forEach(t.x, function (e, t) {
                                a.push(e.data[n])
                            }), angular.equals(a, i[0]) || e.graphic && .3 != e.graphic.attr("opacity") && e.graphic.attr("opacity", .3)
                        })
                    })
                }, setLinkLineColor: function (e, t, r, o) {
                    var s, l = i.chart;
                    angular.forEach(e, function (e, i) {
                        o ? e.points.forEach(function (e) {
                            for (var i = t.x, o = t.y.concat(t.y_optional || []), s = [], l = e.series.index, c = n.objs.isStack ? o.length - 1 - l : l, d = o[c] ? o[c].compare_names.slice(1) : [], u = !1, p = 0, f = i.length; p < f; p++) {
                                var h = i[p], g = a.default.getXDataIndex(e.series.data, h.data, e.index),
                                    m = h.data[g];
                                s.push(m)
                            }
                            s = s.concat(d), r.forEach(function (e) {
                                angular.equals(s, e) && (u = !0)
                            }), u && e.select(!0, !0)
                        }) : angular.forEach(e.data, function (e, i) {
                            var n = [];
                            angular.forEach(t.x, function (e, t) {
                                n.push(e.data[i])
                            }), angular.equals(n, r[0]) && (s = i, 0 == l.chartInstance.xAxis[0].options.plotLines.length && l.chartInstance.xAxis[0].addPlotLine({
                                value: s,
                                color: "rgba(134,139,156,0.5)",
                                width: 1,
                                id: "chartLinkPlotLine"
                            }))
                        })
                    })
                }, setColorCache: function (e, t, n) {
                    function a() {
                        return r.mainChartColorContainer[e].chartColor[n].length < t.length
                    }

                    var r = i.chart;
                    if (r.mainChartColorContainer && r.data) {
                        var o = r.data.x;
                        r.mainChartColorContainer[e] = r.mainChartColorContainer[e] || {}, r.mainChartColorContainer[e].chartColor = r.mainChartColorContainer[e].chartColor || [], r.mainChartColorContainer[e].chartColor[n] = r.mainChartColorContainer[e].chartColor[n] || [], a() && angular.forEach(t, function (t, i) {
                            var s = [];
                            angular.forEach(t.data, function (e, t) {
                                var i = e.color, n = [], a = {};
                                angular.forEach(o, function (e, i) {
                                    n.push(e.data[t])
                                }), a[n.toString()] = i, s.push(a)
                            }), a() && r.mainChartColorContainer[e].chartColor[n].push(s)
                        })
                    }
                }
            }, eventFuns: {}, initPlugins: function () {
            }, bindDomFuns: function (e) {
            }, destroy: function () {
                if (n && n.objs) {
                    for (var e in n.objs) {
                        var t = n.objs[e];
                        t && t.destroy && t.destroy()
                    }
                    n = null
                }
            }
        };
        return function () {
            n.checkParams(), n.initPlugins(), n.bindDomFuns(), n.objs.init()
        }(), t.destroy = n.destroy, t.needSetLinkColor = n.objs.needSetLinkColor, t.setLinkColor = n.objs.setLinkColor, t.setColorCache = n.objs.setColorCache, t
    };
    var n = i(158), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n)
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function () {
        function e() {
            (0, window.__BDP_CALL_NATIVE__)("rendered", {}, "")
        }

        function t(e, t) {
            console.error(t);
            var i;
            if ("edit" == e.mode) {
                if (i = "zh" == bdpChart.language ? "代码运行异常，请检查代码" : "code error，please check your code", t && t.stack && "string" == typeof t.stack) {
                    var n = t.stack.split("\n"), a = n.length > 1 && /<anonymous>:(\d+)/.exec(n[1]);
                    if (a && a.length > 1) {
                        var r = a[1];
                        r = +r - 2;
                        var o = document.createElement("pre");
                        o.innerHTML = "<span>" + n[0] + "</span><span class='line-number'>line: " + r + "</span>", $(o).addClass("error"), $(o).find(".line-number").attr("data-linenum", r), $("#console-message").append(o)
                    }
                }
            } else i = "zh" == bdpChart.language ? "图表配置异常，请检查图表视图配置" : "Chart error，please check settings";
            e.$elem.html('<div class="empty-custom-chart-tip">' + i + "</div>")
        }

        function i(e, t, i) {
            var n = new vega.View(vega.parse(t)).logLevel(vega.Warn).initialize(e.get(0)).hover().run();
            e.find("canvas").addClass("chart-canvas"), i && (window.BDPVegaView = n)
        }

        var n = bdpChart.helper;
        bdpChart.getCustomChartData = function (e) {
            var t = {info: e.info, views: e.views, chartInfo: e.info};
            return t.lang = bdpChart.language || "zh", t.theme = e.theme, t.mode = e.mode, t.ct_id = e.ct_id, t.mobile = e.mobile, t.displayDevice = e.displayDevice, t.isMobileMode = e.isMobileMode, t
        }, bdpChart.setCustomSpec = function (r) {
            var o = r.$elem, s = r.info, l = (r.views.map(function (e) {
                return e.info.x
            }), r.views.map(function (e) {
                return e.info.y
            }), r.views.map(function (e) {
                return e.info.compare_axis
            }), r.info.meta.custom_chart_setting), c = l.mode || "vega", d = l.code;
            if (d) {
                var u = [], p = [], f = [], h = [], g = [];
                r.views.forEach(function (e, t) {
                    var i = [], a = e.info, r = e.data, o = e.data.x.concat(r.y), s = a.x.map(function (e, t) {
                        return e.id = "x" + t, e.id
                    }), l = a.y.map(function (e, t) {
                        return e.id = "y" + t, e.id
                    }), c = (a.compare_axis.map(function (e, t) {
                        return e.id = "c" + t, e.id
                    }), s.concat(l)), d = "ds" + t;
                    if (c.length > 0) for (var p = 0, m = o[0].data.length; p < m; p++) {
                        var v = {};
                        s.forEach(function (t, i) {
                            v[t] = n._formatXAxisLabel.apply(e, [r.x[i].data[p], i])
                        }), l.forEach(function (e, t) {
                            v[e] = +r.y[t].data[p]
                        }), i.push(v)
                    }
                    u.push({name: d, values: i}), f.push(a.x), h.push(a.y), g.push(a.compare_axis)
                }), p = u.map(function (e) {
                    return e.name
                });
                var m = bdp.utils.getQueryString("debug"), v = bdp.utils.getQueryString("disablejs");
                if ("vega" == c) {
                    var y = function () {
                        d = "var spec = " + d + ";return spec;";
                        try {
                            var n = new Function("$DATA_VIEWS", "$X_FIELDS", "$Y_FIELDS", "$C_FIELDS", d),
                                a = n(p, f, h, g);
                            a = $.extend(!0, {
                                autosize: "fit",
                                padding: 10,
                                data: []
                            }, a), a.data = u.concat(a.data), "fit" == a.autosize && (void 0 === a.width && (a.width = o.width() - 2 * a.padding - 12), void 0 === a.height && (a.height = o.height() - 2 * a.padding - 12)), i(o, a, "edit" == r.mode), r.mobile && window.requestAnimationFrame(e)
                        } catch (e) {
                            console.error(e), t(r, e)
                        }
                    };
                    r.mobile ? window.mobVage({
                        initFun: y,
                        libSrc: "//m1.bdp.cn/static/js/lib/vega/vega_4b0988d.js",
                        libId: window.vega
                    }, {funcQueue: [], loadLibInProgress: !1}) : thirdPluginLoader({
                        initFun: y,
                        libSrc: "//m1.bdp.cn/static/js/lib/vega/vega_4b0988d.js",
                        libId: window.vega
                    }, {funcQueue: [], loadLibInProgress: !1})
                } else {
                    if (s.code_check_result && 0 != +s.code_check_result.status) return t(r, "代码运行检测异常 status: " + s.code_check_result.status + ", msg: " + s.code_check_result.msg);
                    try {
                        var b = bdpChart.getCustomChartData(r);
                        if ("true" == m && console.debug("Chart " + b.ct_id + " : ", b), "true" != v) {
                            var _;
                            r.$elem.find("iframe").length > 0 ? (_ = r.$elem.find("iframe").get(0), _.contentWindow.postMessage((0, a.default)(bdpChart.getCustomChartData(r)), window.location.origin || "/")) : (_ = document.createElement("iframe"), _.src = "/custom_chart.html", _.id = "_iframe_" + r.ct_id, _.className = "J-export-iframe-img", _.scrolling = "no", r.$elem.html(_), _.onload = function () {
                                _.contentWindow.postMessage((0, a.default)(bdpChart.getCustomChartData(r)), window.location.origin || "/")
                            })
                        }
                    } catch (e) {
                        t(r, e)
                    }
                }
            } else {
                var w;
                w = "edit" == r.mode ? "zh" == bdpChart.language ? "运行代码即可预览图表" : "Run to preview the results" : "zh" == bdpChart.language ? "无可用图表，请检查图表视图配置" : "No chart, please check settings", r.$elem.html('<div class="empty-custom-chart-tip">' + w + "</div>")
            }
        }
    }()
}, function (e, t, i) {
    "use strict";
    var n = i(1), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    !function (e, t) {
        function i(e, t) {
            if (s && s.supportAlt() && void 0 !== Highcharts.hoverChartIndex) {
                var i = Highcharts.charts[Highcharts.hoverChartIndex];
                if (i && i.hoverPoint && (localStorage.setItem("BDP_useAltTooltip", 1), s.getChartType() == c.TreeMap ? i.tooltip.refresh(i.hoverPoint, e) : i.tooltip.refresh(i.hoverPoints, e)), "keydown" == t) {
                    var n = s, r = {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, a.default)({
                            ct_id: n.ct_id,
                            page: n.getCurrentPage(),
                            hover_mode: n.info.hover_mode
                        })
                    };
                    BDPLogger.log("alt_hover", r)
                }
            }
        }

        function n(i, n) {
            var a = t.ChartType, r = n.getChartType(), o = n.data, s = n.info, l = n._getUnit(),
                c = i.key || i.points[0].key, u = l.unit_left || "", p = "", f = !1, h = !0, g = i.points || [i.point],
                m = "";
            if ("C370" === r) {
                var v = i.point.parent;
                if (v) {
                    var y = c, b = i.series.nodeMap[v].name;
                    c = g.length > 1 ? b : b + " - " + y
                } else m = c
            }
            if ("C320" === r && (0 === i.point.index && 0 === i.point.category, f = i.point.isSum, (!s.xAxis.length || s.xAxis.length && f) && (h = !1)), 1 === o.x.length && "date" === s.xAxis[0].data_type && "C370" !== r) {
                var _ = s.xAxis[0], w = _.granularity || "day", x = _.granularity_name || "",
                    C = _.month_start_day || 0;
                "week" === w ? (x && (c += 864e5 * (_.week_start_day_of_week - 1)), C = _.week_start_day_of_week) : "hour" !== w && "minute" !== w && "second" !== w || (w = "g_" + w), m = d.checkGranularity(w, c, x, C), "week" === w && (m += "（" + Highcharts.dateFormat("%m/%d", new Date(c)) + "~" + Highcharts.dateFormat("%m/%d", new Date(c + 5184e5)) + "）")
            } else if (1 === o.x.length && "sub_date" === o.x[0].data_type && "C370" !== r) {
                var k = o.x[0].fid.split("_")[1];
                m = d.subDateFormat(k, c)
            } else {
                var S = [a.Column, a.NStackColumn, a.PStackColumn, a.Bar, a.NStackBar, a.PStackBar, a.Line, a.Waterfall, a.TreeMap, a.Biax].indexOf(r) > -1;
                m = 2 === o.x.length && S && !f && i.x && i.x.parent ? i.x.parent.name + " - " + i.x.name : c
            }
            h && (p = "C281" === r ? 1 === o.x.length && "" === c ? "" : '<p class="text-center tooltips-title">' + d.escapeHtml(m) + "</p>" : 0 === o.x.length && 0 === c ? "" : '<p class="text-center tooltips-title">' + d.escapeHtml(m) + "</p>"), p += '<table class="tooltips-table">';
            var T, D = Math.floor($(e).height() / 30);
            if ("C370" === r) {
                var b = i.point.parent && i.series.nodeMap[i.point.parent], L = i.color,
                    A = o.y[0] && $.trim(bdp.utils.encodeHTML(o.y[0].nick_name || o.y[0].name)) || "",
                    E = i.point.sum || i.point.series.nodeMap[""].val, I = o.y[0] && o.y[0].formatter,
                    F = o.y[0] && o.y[0].aggregator, O = function (e) {
                        return I && F ? d.dataLabelFormatter(I, e, F) : e
                    };
                if (1 == g.length) {
                    var M, N = (A || ("en" == t.language ? "count" : "数值")) + "：",
                        j = "en" == t.language ? "rate of total" : "占总值", P = "";
                    if (o.y[0] && o.y[0].hasOwnProperty("unit_adv") && (M = o.y[0].unit_adv), P = M || u, p += '<tr><td style="text-align:right;color:' + i.color + '">' + N + '</td><td style="text-align: left; color:' + L + '">' + O(i.point.value) + P + '</td></tr><tr><td style="text-align: right;color:' + i.color + '">' + j + '：</td><td style="text-align: right; color:' + L + '">' + (i.point.value / E * 100).toFixed(2) + "% </td></tr>", b) {
                        var R = ("en" == t.language ? "rate of " : "占") + b.name;
                        p += '<tr><td style="text-align: right;color:' + i.color + '">' + R + '：</td><td style="text-align: right; color:' + L + '">' + (i.point.value / b.val * 100).toFixed(2) + "% </td></tr>"
                    }
                    i.point.drillId = i.point.id
                } else {
                    var M, P = "";
                    if (o.y[0] && o.y[0].hasOwnProperty("unit_adv") && (M = o.y[0].unit_adv), b) {
                        var B = A + ("en" == t.language ? " Total" : "总值");
                        p += '<tr><td style="text-align:right;color:' + i.color + '">' + B + '：</td><td style="text-align: right; color:' + L + '">' + O(b.val) + M + '&nbsp;&nbsp;</td><td style="text-align: right; color:' + L + '">(' + (100 * b.val / E).toFixed(2) + "%)</td></tr>"
                    }
                    g.sort(function (e, t) {
                        return t.value - e.value
                    }), g.forEach(function (e) {
                        p += '<tr><td style="text-align:right;">' + $.trim(bdp.utils.encodeHTML(e.name + "：")) + '</td><td style="text-align: right;">' + O(e.value) + M + '&nbsp;&nbsp;</td><td style="text-align: right;">(' + (100 * e.value / E).toFixed(2) + "%)</td></tr>"
                    }), i.point.drillId = i.point.series.drillToByGroup(i.point)
                }
            } else if (["C271", "C272", "C273"].indexOf(r) > -1) {
                var z, M, I = o.y[0].formatter, H = o.y[0].nick_name || o.y[0].name;
                "C271" === r ? (z = i.point.value, T = i.point.color || "#72AFD9") : "C272" === r ? (z = i.point.z, T = i.point.color, H = i.point.series.name) : "C273" == r && (z = i.point.value, T = i.point.textColor || "#72AFD9");
                var P = "";
                o.y[0].hasOwnProperty("unit_adv") && (M = o.y[0].unit_adv), P = "" != M ? M : u, p += '<tr><td style="text-align:right;color:' + T + '">' + $.trim(bdp.utils.encodeHTML(H)) + '</td><td style="text-align: left; color:' + T + '">： ' + d.dataLabelFormatter(I, z) + P + "</td></tr>"
            } else {
                if (["C211", "C241", "C351"].indexOf(r) > -1) {
                    var W, q = t.language || "zh", V = "en" === q ? "Total" : "总计", F = "", I = "",
                        U = g[0].point.index, G = [];
                    i.series.chart.series.forEach(function (e) {
                        e.visible && !/^Navigator/.test(e.name) && G.push(e.data[U])
                    }), W = G.reduce(function (e, t) {
                        return e + t.y
                    }, 0), W = d.dataLabelFormatter(o.y[0].formatter, W, o.y[0].aggregator), p += '<tr><td style="text-align: right; " class="total">' + V + '：</td><td style="text-align: left; " class="total">' + W + "</td></tr>"
                }
                var J = 0;
                $.each(g, function (e) {
                    if (!(J > D - 1 || this.isNull)) {
                        J++;
                        var i, n = this, a = n.series || n, c = n.color || n.series.color, h = a._i;
                        if ("C320" === r) {
                            if (i = n.point.nick_name || n.point.name, f) {
                                var m = t.language || "zh";
                                i = s.waterfall_setting ? s.waterfall_setting.sum_name : "en" === m ? "Sum" : "累计值"
                            }
                        } else i = a.options && a.options.nick_name || a.options.name;
                        i += "：";
                        var v, y = n.series.options.formatter, b = n.series.options.aggregator, _ = n.y, w = "", x = "";
                        if (a.options.hasOwnProperty("unit_adv") && (x = a.options.unit_adv), ["C212", "C242", "C352"].indexOf(r) > -1) {
                            var C = "";
                            C = "" != x ? x : u, _ = d.dataLabelFormatter(y, _, b), p += '<tr><td style="text-align:right;color:' + c + '">' + $.trim(bdp.utils.encodeHTML(i)) + '</td><td style="text-align: left; color:' + c + '">' + _ + C + "（" + n.percentage.toFixed(1) + "%）</td></tr>"
                        } else {
                            var k = o.y_optional ? o.y.concat(o.y_optional) : o.y, S = k[h] || k[e];
                            if (["C211", "C241", "C351"].indexOf(r) > -1 && (S = k[k.length - 1 - (h || e)]), "C243" === r) _ = d.dataLabelFormatter(S.formatter, Math.abs(_), b); else if ("C281" === r) {
                                var L = y || S && S.formatter, A = ["最大值", "Q3", "中位数", "Q1", "最小值"];
                                i = a && a.nick_name || a.name, "scatter" === a.type ? _ = "<p>" + i + "：" + n.source[1] + "</p>" : (_ = '<p style="text-align:center;">' + i + "</p><table>", $.isArray(n.source) && n.source.slice(0, 5).reverse().forEach(function (e, t) {
                                    _ += '<tr><td style="text-align:right;">' + A[t] + "： </td><td>" + d.dataLabelFormatter(L, e, b) + "</td></tr>"
                                }), _ += "</table>"), i = ""
                            } else {
                                var L = y || S && S.formatter;
                                _ = d.timePredicted.checkType(this.series.options, "enable", "area") ? d.dataLabelFormatter(L, this.low || this.point.low, b) + " ~ " + d.dataLabelFormatter(L, this.high || this.point.high, b) : d.dataLabelFormatter(L, _, b)
                            }
                            if ("C250" === r) {
                                s.type_optional;
                                a.options.yAxis && (u = s.zero_aligned ? l.unit_left || "" : l.unit_right || "");
                                var E = s.y_optional_for_draw[a.options.yAxis];
                                "column" === a.options.type && "C212" === E && (w = "（" + n.percentage.toFixed(1) + "%）")
                            }
                            "C290" === r && (u = ""), "C320" === r && (o.x && 0 == o.x.length ? o.y[n.x] && (x = o.y[n.x].unit_adv) : o.y[0] && (x = o.y[0].unit_adv)), v = "" != x ? _ + x + w : _, T = n.color || a.color, d.timePredicted.checkType(this.series.options, "enable", "area") && (T = g[e - 1].color), c = T;
                            var I = n.point && n.point.options ? n.point.options.bubbleValue : "", F = "";
                            if (I || 0 === I) {
                                F = "（" + n.point.options.bubbleName + "：" + I + "）"
                            }
                            p += '<tr><td style="text-align:right;color:' + T + '">' + $.trim(bdp.utils.encodeHTML(i)) + '</td><td style="text-align: left; color:' + c + '">' + v + F + "</td></tr>"
                        }
                    }
                })
            }
            p += "</table>";
            var Y = g.reduce(function (e, t) {
                return e + (t.isNull ? 0 : 1)
            }, 0);
            if (Y > D) {
                var X = "zh" == t.language ? "以及其他%d项" : "and other %d items";
                p += '<div class="exceed-hint">' + X.replace("%d", Y - D) + "</div>"
            }
            return '<div class="tooltip-content">' + p + "</div>"
        }

        function r(t, i, a, r) {
            var s, l = (i.getChartType(), i.data, i.info, t.altKey && !t.ctrlKey && !t.shiftKey && !t.metaKey);
            i._getUnit();
            s = bdp.bdpDash.getCurFullScreenElement() ? $(bdp.bdpDash.getCurFullScreenElement()) : $("body");
            var c = s.children(".global-tooltip"), d = n(r, i), u = "";
            if (!l) {
                var p = o(r, i);
                p && (u = '<div class="altClass"><div><p class="altText nowrap">' + p + "</p></div></div>")
            }
            var f = d + u;
            c.length ? c.html(f) : (c = $('<div class="global-tooltip">' + f + "</div>"), $(".global-tooltip").remove(), s.append(c));
            var h = $(e).width(), g = $(e).height(), m = c.width(), v = c.height();
            c.css({
                top: Math.min(t.clientY, g - v - 20),
                left: Math.min(t.clientX + 20, h - m - 20)
            }), c.hasClass("chart-theme-" + i.theme) || (c.removeClass("chart-theme-dark chart-theme-default").addClass("chart-theme-" + i.theme), c.removeClass("display-theme-dark display-theme-light").addClass("display-theme-" + ("default" == i.theme ? "light" : "dark"))), c.hasClass("display-device-" + i.displayDevice) || c.removeClass("display-device-pc display-device-projector display-device-tv").addClass("display-device-" + i.displayDevice), c.show()
        }

        function o(e, i) {
            var n = localStorage.getItem("useAltTooltipCount");
            if (localStorage.getItem("BDP_useAltTooltip") || n && "single" != i.info.hover_mode) return !1;
            if (i.getChartType() == c.TreeMap) {
                if (e.point.parent == e.series.rootNode) return !1
            } else {
                for (var a = 0, r = i.chartInstance.series, o = 0; o < r.length && !(r[o].visible && ++a > 1); o++) ;
                if (a < 2) return !1
            }
            return '<span style="font-weight:bold">Alt</span>' + ("zh" == t.language ? "键切换多点/单点" : " to switch view-mode")
        }

        var s, l = t.Chart, c = t.ChartType, d = t.helper, u = d.mobileHelper;
        $(e).on("keydown.alt-tooltip", function (t) {
            if (!e._interectingSplitChart) {
                t.altKey && !t.ctrlKey && !t.shiftKey && !t.metaKey && i(t, "keydown")
            }
        }), $(e).on("keyup.alt-tooltip", function (t) {
            if (!e._interectingSplitChart) {
                var n;
                e.event ? n = t.keyCode : t.which && (n = t.which), "18" == n && i(t)
            }
        }), l.prototype.supportAlt = function () {
            var e = [c.Line, c.Column, c.NStackColumn, c.PStackColumn, c.Area, c.NStackArea, c.PStackArea, c.Biax, c.ComparisonBar, c.Bar, c.NStackBar, c.PStackBar, c.TreeMap];
            this.info;
            return e.indexOf(this.getChartType()) > -1 && !this.isSplitChart() && !this.isMobileMode
        }, l.prototype.hideHoverTooltip = function () {
            var e = this;
            e.chartInstance && e.chartInstance.tooltip && e.chartInstance.tooltip.hide(), $(".global-tooltip").hide()
        }, l.prototype._setAltOption = function () {
            var e = this;
            e.supportAlt() && $.extend(!0, e.options.plotOptions, {
                series: {
                    stickyTracking: !0,
                    events: {
                        mouseOut: function (t) {
                            s = null, e.hideHoverTooltip()
                        }, mouseOver: function (t) {
                            s = e, this.chart.getSelectedPoints().length || $(".global-tooltip").show()
                        }
                    }
                }
            })
        }, l.prototype._generateTooltipFormatter = function () {
            var e = this;
            return e.supportAlt() ? (e.info.hover_mode || (e.getChartType() == c.TreeMap ? e.info.hover_mode = "single" : e.info.hover_mode = "multiple"), function (t, i) {
                if (!i || $(".selected-tooltip").length > 0) return !1;
                var n = i.altKey && !i.ctrlKey && !i.shiftKey && !i.metaKey, a = e.info.hover_mode,
                    o = "single" == a && !n || "single" !== a && n, s = t.chart, l = (s.series, s.hoverPoint);
                s.hoverPoint.index;
                if ((isNaN(i.chartX) || isNaN(i.chartY)) && (i.chartX = s.pointer.lastPos.x, i.chartY = s.pointer.lastPos.y), o) {
                    if (s.hoverPoints) {
                        e.getChartType() !== c.TreeMap && (l = d.findNearestPoint(e, i));
                        var u = [];
                        e.isOpenTimePredicted && d.timePredicted.checkType(l.series.options, "enable", "line") && l.series.linkedSeries.forEach(function (e) {
                            u.push(e.index)
                        });
                        for (var p = s.hoverPoints.length - 1; p >= 0; p--) {
                            var f = s.hoverPoints[p];
                            f !== l && u.indexOf(f.series.index) < 0 && (f.setState(), this.points && this.points.splice(p, 1))
                        }
                    }
                } else {
                    var h = [];
                    if (e.getChartType() == c.TreeMap) {
                        if (s.hoverPoints && s.hoverPoints.forEach(function (e) {
                            e !== l && e.setState()
                        }), l.node.parent == l.series.rootNode) o = !0, h.push(l); else {
                            var g = l.parent;
                            if (g) {
                                var m = this.series.nodeMap[g];
                                if (m && m.children.length) {
                                    var v = this.series.points;
                                    m.children.forEach(function (e) {
                                        var t = v[e.i];
                                        t !== l && t.setState("hover"), h.push(t)
                                    })
                                }
                            }
                        }
                        s.hoverPoints = this.points = h
                    }
                }
                return this.point = this.point || l, this.points = this.points || [this.point], this.series = l.series, r(i, e, t, this), !1
            }) : function () {
                if ($(".selected-tooltip").length > 0) return !1;
                if (!(["C271", "C272", "C273"].indexOf(e.getChartType()) > -1 && null === this.point.value)) {
                    var t = this;
                    return t.point || $.extend(!0, t, this.points[0]), e.isMobileMode ? (e.selectedPoint = t.points ? t.points[0].point : t.point, u.tooltipFormatter(t, e.getChartType(), e.data, e.info, e._getUnit())) : n(t, e)
                }
            }
        }
    }(window, bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e, t) {
        var i = t.Chart, n = t.ChartType;
        i.prototype._getCurThemeBaseColor = function (e) {
            var i = this, n = t.themeColors, a = i.theme, r = "";
            switch (e) {
                case"axisLine":
                    r = "dark" == a ? n.dark.xAxis.lineColor : "#ccc";
                    break;
                case"axisTitle":
                case"axisLabels":
                    r = "dark" == a ? "rgba(255, 255, 255, 0.5)" : "#666666"
            }
            return r
        }, i.prototype.canSetAxisExtend = function () {
            var e = this.getChartType();
            return ["C210", "C211", "C212", "C220", "C240", "C241", "C242", "C243", "C250", "C280", "C290", "C320", "C350", "C351", "C352"].indexOf(e) > -1
        }, i.prototype.getLabelMaxMinForScreen = function (e, i, a) {
            var r = e.getChartType(), o = e.data, s = e.info, l = e, c = s, d = t.helper, u = r === n.ComparisonBar;
            a = a || [];
            var p, f, h = i, g = d.getPositiveOrNegative(o, h, a), m = 0, v = 0,
                y = [n.PStackColumn, n.PStackBar, n.PStackArea].indexOf(r) > -1,
                b = [n.NStackColumn, n.NStackBar, n.NStackArea].indexOf(r) > -1, _ = r === n.Scatter;
            if (y) "mix" === g ? (m = 100, v = -100) : "negative" === g ? (m = 0, v = -100) : "positive" === g && (m = 100, v = 0); else if (_) {
                if (o.y[1] && o.y[1].data.length) {
                    var w = Math.max.apply(Math, o.y[1].data), x = Math.min.apply(Math, o.y[1].data);
                    w * x < 0 ? (s.yaxis_max_disabled ? (p = Math.max.apply(Math, o.y[1].data), m = d.formatNumber(w)) : (p = s.yaxis_max, m = p), s.yaxis_min_disabled ? (f = Math.min.apply(Math, o.y[1].data), v = d.formatNumber(x)) : (f = s.yaxis_min, v = f)) : (s.yaxis_max_disabled ? (p = Math.max.apply(Math, o.y[1].data), m = d.formatNumber(w), m = Math.max(0, m)) : (p = s.yaxis_max, m = p), s.yaxis_min_disabled ? (f = Math.min.apply(Math, o.y[1].data), v = d.formatNumber(x), v = Math.min(0, v)) : (f = s.yaxis_min, v = f))
                }
            } else if (r === n.Waterfall && (s.yaxis_max_disabled = !0, s.yaxis_min_disabled = !0), "mix" !== g || u) if (u) {
                var C = d.getEdgeValueFromMultiArray(o, "y", "max", r, a),
                    k = d.getEdgeValueFromMultiArray(o, "y", "min"), S = .05 * (C - k), T = s.yaxis_min_disabled,
                    D = s.yaxis_max_disabled, L = s.yaxis_max <= 0 ? C : s.yaxis_max,
                    A = s.yaxis_min < 0 ? 0 : s.yaxis_min;
                "_right" !== i ? (T ? (p = 0, m = d.formatNumber(p)) : (p = -A, m = -A), D ? (f = -C, v = d.formatNumber(f)) : (f = -L, v = -L), l.info.yaxis_auto_zoom && (p = -k, m = Math.min(0, -k + S), v = -C - S)) : (T ? (f = 0, v = d.formatNumber(f)) : (f = A, v = A), D ? (p = C, m = d.formatNumber(p)) : (p = L, m = L), l.info.yaxis_auto_zoom && (f = k, v = Math.max(0, k - S), m = C + S))
            } else {
                if ("positive" == g ? (f = 0, p = l._getYAxisLabelEdgeValue(r, h, "max", a), m = d.formatNumber(p)) : "negative" == g && (p = 0, f = l._getYAxisLabelEdgeValue(r, h, "min", a), v = d.formatNumber(f)), !b && "y" === h && l.info.yaxis_auto_zoom || "y_optional" === h && l.info.yaxis_auto_zoom_right) {
                    p = d.getEdgeValueFromMultiArray(l.data, h, "max", r, a), f = d.getEdgeValueFromMultiArray(l.data, h, "min", r, a);
                    var S = .05 * (p - f);
                    "positive" == g ? (m = p + S, v = Math.max(0, f - S), m === v && (m *= 1.05, v *= .95)) : "negative" == g && (m = Math.min(0, p + S), v = f - S, m === v && (m *= .95, v *= 1.05))
                }
                !c["yaxis_max_disabled" + i] && c["yaxis_max" + i] && (m = Number(c["yaxis_max" + i] || s["yaxis_max" + i])), !c["yaxis_min_disabled" + i] && c["yaxis_min" + i] && (v = Number(c["yaxis_min" + i] || s["yaxis_min" + i]))
            } else {
                var E = i ? s.yaxis_max_disabled_right : s.yaxis_max_disabled,
                    $ = i ? s.yaxis_min_disabled_right : s.yaxis_min_disabled, I = i ? s.yaxis_max_right : s.yaxis_max,
                    F = i ? s.yaxis_min_right : s.yaxis_min;
                E ? (p = l._getYAxisLabelEdgeValue(r, h, "max", a), m = d.formatNumber(p)) : (p = I, m = p), $ ? (f = l._getYAxisLabelEdgeValue(r, h, "min", a), v = d.formatNumber(f)) : (f = F, v = f)
            }
            return {max: m, min: v, origin_max: p, origin_min: f}
        }, i.prototype._setGridPlotLine = function () {
            function i(e) {
                if ("fullscreen" == n.mode) {
                    var t = [];
                    e.plotLines.map(function (e) {
                        e.className && "highcharts-grid-plot-line" == e.className || t.push(e)
                    }), e.plotLines = t
                } else "C243" == o && n.options.yAxis.map(function (e) {
                    e.gridLineWidth = 0
                })
            }

            var n = this, a = n.info, r = n.data, o = this.getChartType(), s = a.style;
            if (!t.configurable.canEditGridPlotLine(o)) return !1;
            if (!s || !s.gridPlotLine) return !1;
            var l = 0, c = 0, d = {}, u = {}, p = n.options.xAxis && "datetime" == n.options.xAxis.type,
                f = this.getLabelMaxMinForScreen, h = e.location.href.indexOf("data_screen") >= 0,
                g = e.location.href.indexOf("adv_dash") >= 0;
            (h || g) && n.options.yAxis.map(function (e) {
                e.gridLineWidth = 0
            });
            var m = s.gridPlotLine, v = n._getCurThemeBaseColor("axisLine");
            if (n.options.xAxis && m.xAxis && r.x && r.x.length) if (m.xAxis.enabled) {
                if (["C280"].indexOf(o) < 0 && !p) {
                    l = m.xAxis.splitNum, u = r.x.length > 0 ? r.x[0].data : 0, c = 1 * u.length / l;
                    var y = 1, b = l;
                    if (["C240", "C241", "C242", "C243"].indexOf(o) >= 0 && (y = 0, b = l - 1), m.xAxis.colorAdaption && (m.xAxis.color = v), c) for (var _ = y; _ <= b; _++) n.options.xAxis.plotLines = n.options.xAxis.plotLines || [], n.options.xAxis.plotLines.push({
                        className: "highcharts-grid-plot-line",
                        color: m.xAxis.color,
                        dashStyle: s.gridPlotLine.xAxis.dashStyle,
                        value: 0 + c * _ - .5,
                        width: s.gridPlotLine.xAxis.width,
                        zIndex: 0
                    })
                }
            } else "C280" != o && (n.options.xAxis.plotLines = []);
            n.options.yAxis && m.yAxis && m.yAxis.enabled && r.y && r.y.length && ["C280", "C320"].indexOf(o) < 0 && (l = m.yAxis.splitNum, n.options.yAxis.map(function (e) {
                if (e.tickPositions) d = e.tickPositions, d.max = d[d.length - 1], d.min = d[0]; else if (e.tickPositioner) d = e.tickPositioner(), d.max = d[d.length - 1], d.min = d[0]; else {
                    var t = f(n, "y");
                    d.max = t.max, d.min = t.min
                }
                i(e), c = Math.abs(d.max - d.min) / l, m.yAxis.colorAdaption && (m.yAxis.color = v);
                for (var a = 1; a <= l; a++) e.plotLines = e.plotLines || [], e.plotLines.push({
                    className: "highcharts-grid-plot-line",
                    color: m.yAxis.color,
                    dashStyle: m.yAxis.dashStyle,
                    value: d.min + c * a,
                    width: m.yAxis.width,
                    zIndex: 0
                });
                e.gridLineWidth = 0
            }))
        }, i.prototype._setLegendExtend = function () {
            var e = this, i = e.info, n = i.style, a = this.getChartType(),
                r = !(!this.dash_setting || !this.dash_setting.show_legend);
            if (!t.configurable.canEditChartLegend(a, {info: i})) return $.extend(!0, n, {legend: {enabled: !1}}), !1;
            if (!n || !n.legend) return $.extend(!0, n, {legend: {enabled: !1}}), !1;
            var o = angular.copy(n.legend), s = 0;
            if (o.itemStyle && o.itemStyle.colorAdaption && delete o.itemStyle.color, o.itemStyle && "inherit" == o.itemStyle.fontSize && delete o.itemStyle.lineHeight, this.isDashboardMode && (o.enabled = !!r && o.enabled), o.enabled) {
                var l = o.itemStyle.fontSize;
                ["top", "bottom"].indexOf(o.pos) >= 0 ? (l = parseInt(l), isNaN(l) ? (delete o.itemStyle.lineHeight, o.maxHeight = 55) : (s = l <= 14 ? 18 : l, o.maxHeight = l <= 14 ? 2 * s + 20 : s + 20, "bottom" == o.pos && (o.y = 0)), o.margin = 10, o.padding = 1, "fullscreen" == e.mode && "bottom" == o.pos && (o.y = -8)) : "vertical" == n.layout ? e.options.legend.maxHeight = "inherit" == l ? 55 : void 0 : e.options.legend.maxHeight = void 0
            }
            var c = o.pos;
            if (delete o.pos, c) {
                if ("C280" == a && !i.color_setting.enum_color_map) return !1;
                $.extend(!0, e.options.legend, o)
            } else $.extend(!0, e.options.legend, {itemStyle: o.itemStyle})
        }, i.prototype._setAxisLineStyle = function (e, t) {
            var i = this, n = i._getCurThemeBaseColor("axisLine");
            t.lineColorAdaption ? e.lineColor = n : e.lineColor = t.lineColor ? t.lineColor : e.lineColor, e.lineWidth = t.lineWidth ? t.lineWidth : e.lineWidth, e.lineDashStyle = t.lineStyle ? t.lineStyle : e.lineDashStyle, t.enabled || (e.lineWidth = 0)
        }, i.prototype._setAxisLabelsStyle = function (e, t) {
            var i = this, n = angular.copy(t);
            e.labels && t.labels && (n.labels.colorAdaption && (n.labels.color = i._getCurThemeBaseColor("axisLabels")), e.labels.style ? $.extend(e.labels.style, n.labels) : e.labels.style = n.labels, e.labels.enabled = n.labels.enabled)
        }, i.prototype._setAxisTitleStyle = function (e, t) {
            var i = this, n = angular.copy(t);
            if (e.title && t.title) {
                var a = $(".J_chart_box");
                t.title.enabled ? (n.title.colorAdaption && (n.title.color = i._getCurThemeBaseColor("axisTitle")), e.title.style ? $.extend(e.title.style, n.title) : e.title.style = n.title, delete e.title.enabled, a.removeClass("hide-axis-title-style")) : (e.title.text = null, a.addClass("hide-axis-title-style"))
            }
        }, i.prototype._setXAxisExtendStyle = function () {
            var e = this, t = e.info, i = this.getChartType(), n = t.style.axis.xAxis;
            this._setAxisLineStyle(e.options.xAxis, n), this._setAxisLabelsStyle(e.options.xAxis, n), "C280" == i && this._setAxisTitleStyle(e.options.xAxis, n), $.cookie("yaxis_min") < 0 || $.cookie("yaxis_min_right") < 0 || e.options.yAxis.map(function (t) {
                t.plotLines && t.plotLines.length > 0 && t.plotLines.map(function (t) {
                    if (t.defaultZero) {
                        var i = e._getCurThemeBaseColor("axisLine");
                        n.lineColorAdaption ? t.color = i : t.color = n.lineColor ? n.lineColor : t.color, t.width = n.lineWidth ? n.lineWidth : t.width, t.dashStyle = n.lineStyle ? n.lineStyle : t.dashStyle, n.enabled || (t.width = 0)
                    }
                })
            })
        }, i.prototype._setYAxisExtendStyle = function () {
            for (var e = this, t = e.info, i = t.style.axis, n = 0, a = e.options.yAxis.length; n < a; n++) {
                var r = e.options.yAxis[n];
                r.opposite ? i.yOptionalAxis && (this._setAxisLineStyle(r, i.yOptionalAxis), this._setAxisLabelsStyle(r, i.yOptionalAxis), this._setAxisTitleStyle(r, i.yOptionalAxis)) : i.yAxis && (this._setAxisLineStyle(r, i.yAxis), this._setAxisLabelsStyle(r, i.yAxis), this._setAxisTitleStyle(r, i.yAxis))
            }
        }, i.prototype._setAxisExtendStyle = function () {
            var e = this, i = e.info, n = i.style, a = this.getChartType();
            if (!this.canSetAxisExtend()) return !1;
            if (!n || !n.axis) return !1;
            var r = n.axis;
            if (t.helper.transferAxisOldStyle(r), r.xAxis && this._setXAxisExtendStyle(), (r.yAxis || r.yOptionalAxis) && (this._setYAxisExtendStyle(), "C243" == a)) {
                var o = e.options.yAxis[1];
                o.labels.y = 20, o.offset = 0
            }
        }, i.prototype._setChartTitleStyle = function () {
            var e = this, i = e.info, n = i.style, a = $("#" + this.ct_id).find(".J_chart_box"),
                r = this.getChartType();
            if (!t.configurable.canEditChartSummary(r, {info: i})) return !1;
            if (bdp.bdpPageStatus.isUnderChartEdit() && (a = $(".J_chart_box")), "fullscreen" == e.mode && (a = $(".fullscreen-chart")), !i.show_total) return a.removeClass("custom-title-style"), a.removeClass("custom-big-title-style"), !1;
            if (!n || !n.title) return a.removeClass("custom-title-style"), a.removeClass("custom-bigtitle-style"), !1;
            if (i.show_total) {
                var o = n.title.style;
                if (o.colorAdaption && (o.color = "inherit"), "inherit" == o.fontSize && (o.fontSize = "36px"), o && a.addClass("custom-title-style"), "inherit" == o.fontSize) o.fontSize = "36px"; else {
                    var s = 0, l = parseInt(o.fontSize);
                    l <= 60 ? (48 == l ? s = -9 : (s = -12, bdp.bdpPageStatus.isUnderAdvChartEdit() && (s += 3)), a.removeClass("custom-big-title-style")) : a.addClass("custom-big-title-style"), e.options.title.y = parseInt(o.fontSize) + s
                }
                $.extend(!0, e.options.title, {style: o})
            }
        }, i.prototype._setChartLabelStyle = function () {
            var e = this, i = e.info, n = i.style, a = this.getChartType();
            if (!t.configurable.canEditChartDataLabels(a, {info: i})) return !1;
            if (!i.show_datalabels) return !1;
            if (!n || !n.labels) return !1;
            if ("C230" === a) return !1;
            var r = n.labels.style, o = e.options.plotOptions;
            for (var s in o) o[s].dataLabels && (r.colorAdaption || (o[s].dataLabels.color = r.color), o[s].dataLabels.style.fontSize = r.fontSize, o[s].dataLabels.style.fontFamily = r.fontFamily)
        }
    }(window, bdpChart)
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    var a = i(41), r = n(a), o = i(1), s = n(o), l = i(40), c = n(l), d = i(158), u = n(d);
    !function (e, t) {
        function i(e) {
            m && m.supportSelect() && (e ? m.removeSelectionMask() : m.addSelectionMask())
        }

        function n(e) {
            var t = e;
            if (!$(".selection-tooltip-overlay").length) {
                var i;
                i = bdp.bdpDash.getCurFullScreenElement() ? $(bdp.bdpDash.getCurFullScreenElement()) : $("body"), $('<div class="selection-tooltip-overlay"></div>').appendTo(i).on("mousedown", function (e) {
                    if ($(".selected-tooltip").find(".action-drilldown").hasClass("active")) ; else if (e.shiftKey) {
                        var i = t.chartInstance.series.map(function (e) {
                            var t = e.options.states;
                            return e.options.states = {hover: {enabled: !1}}, t
                        });
                        t.chartInstance.pointer.onContainerMouseMove(e.originalEvent), t.chartInstance.series.forEach(function (e, t) {
                            e.options.states = i[t]
                        }), t.chartInstance.pointer.onContainerMouseDown(e.originalEvent)
                    } else t.cancelSelection(), t.chartInstance.lastSelectedPoints = []
                }).on("mousemove", function (e) {
                    "mousedown" == t.chartInstance.mouseIsDown && t.chartInstance.pointer.onContainerMouseMove(e.originalEvent)
                }).on("click", function (e) {
                    var i = $(".selected-tooltip"), n = i.find(".action-drilldown");
                    if (n.hasClass("active")) return n.removeClass("active"), n.find(".dropdown-list").remove(), !1;
                    if (e.shiftKey) {
                        var a;
                        if (e = t.chartInstance.pointer.normalize(e), t.chartInstance.hoverPoints) a = g.findNearestPoint(t, e); else if (t.getChartType() == h.Scatter) for (var r = t.chartInstance.series[0].points, o = r.length - 1; o >= 0; o--) {
                            var s = r[o], l = s.graphic.radius || s.shapeArgs && s.shapeArgs.r;
                            if (Math.abs(e.chartX - s.series.chart.plotLeft - s.plotX) < l && Math.abs(e.chartY - s.series.chart.plotTop - s.plotY) < l) {
                                a = s;
                                break
                            }
                        }
                        a && t.selectPoint(a)
                    } else $(this).remove()
                })
            }
        }

        function a() {
            $(".selection-tooltip-overlay").remove()
        }

        function o(i, n) {
            var r, o = n.getChartType(), d = (n.data, n.info), p = (n._getUnit(), n.disableLink);
            r = bdp.bdpDash.getCurFullScreenElement() ? $(bdp.bdpDash.getCurFullScreenElement()) : $("body");
            var f = r.children(".selected-tooltip"), m = i.target.getSelectedPoints();
            if (!m.length) return f.remove();
            var v, y = m[0], b = m.length, _ = o == t.ChartType.ComparisonBar;
            t.language = t.language || "zh", y && "object" == (0, c.default)(y.category) ? v = y.category.parent ? y.category.parent.name + "-" + (y.category.userOptions || y.category.name) : y.category.userOptions || y.category.name : y && (v = n._formatXAxisLabel(y.name || y.category, 0, !0));
            var w;
            if (1 == d.y.length) {
                var x = d.y[0].formatter, C = d.y[0].aggregator;
                w = function (e) {
                    return g.dataLabelFormatter(x, e, C)
                }
            } else w = function (e) {
                return Highcharts.numberFormat(e, 2)
            }
            ;
            var k = n.ct_id + "," + o + "," + b;
            BDPLogger.log("feStatistics", {
                category: "user_interact",
                action: "selectTooltip",
                opt_label: k,
                opt_value: 1
            });
            var S = "zh" == t.language ? {sum: "总计", avg: "平均值", selected: "选择", items: "项"} : {
                sum: "Sum",
                avg: "Avg",
                selected: "selected",
                items: "items"
            };
            if (o !== h.Scatter) if (1 == b) {
                0 == n.info.x.length && n.info.compare_axis.length && (v = n.data.y[y.series.index].compare_names.slice(1).join("_"));
                var T = y.color || y.series.color,
                    D = '<p class="tooltips-title nowrap" title="' + v + '">' + S.selected + ": " + v + '</p><table class="tooltips-table"><tr><td style="text-align:left; color:' + T + '">' + y.series.name + '：</td><td style="text-align:left; color:' + T + '">' + y.y + "</td></tr></table>"
            } else {
                var L = 0;
                m.forEach(function (e, t) {
                    L += _ && e.negative ? -e.y : e.y
                });
                var A = "";
                if (i.target.xAxis[0] && i.target.xAxis[0].isDatetimeAxis) {
                    var E = m.map(function (e) {
                        return e.x
                    });
                    E.sort(function (e, t) {
                        return e - t
                    });
                    var I = n._formatTimeWithField(E[0], n.data.x[0], "abb"),
                        F = n._formatTimeWithField(E[E.length - 1], n.data.x[0], "abb"),
                        O = "zh" == t.language ? "至" : "to";
                    A = "<span class='tooltip-text-light need-split-line'>" + I + "</span><span class='ml4 mr4'>" + O + "</span><span class='tooltip-text-light'>" + F + "</span>"
                }
                var D = '<div class="tooltips-hd"><div class="row"><span class="tooltip-text">' + S.selected + '<strong class="mr4">' + b + "</strong>" + S.items + "</span>" + A + '</div><div class="row"><span class="tooltip-text">' + S.sum + '<strong class="tooltip-num">' + w(L) + '</strong></span><span class="tooltip-text">' + S.avg + '<strong class="tooltip-num">' + w(L / b) + "</strong></span></div></div>"
            } else {
                var M = d.y[0].nick_name || d.y[0].name, N = d.y[1].nick_name || d.y[1].name;
                if (1 == b) var D = '<p class="tooltips-title">' + S.selected + ": " + v + '</p><table class="tooltips-table"><tr><td style="text-align:left; color:' + y.color + '">' + M + '：</td><td style="text-align:left; color:' + y.color + '">' + y.x + '</td></tr><tr><td style="text-align:left; color:' + y.color + '">' + N + '：</td><td style="text-align:left; color:' + y.color + '">' + y.y + "</td></tr></table>"; else {
                    var j = 0, P = 0;
                    m.forEach(function (e, t) {
                        j += e.x, P += e.y
                    });
                    var D = '<p class="tooltips-title"><span class="tooltip-text">' + S.selected + "<strong>" + b + "</strong>" + S.items + '</span></p><table class="tooltips-table"><tr><td class="tooltip-text tooltip-text-light">' + M + '</td><td class="tooltip-text need-split-line">' + S.sum + '<strong class="tooltip-num">' + w(j) + '</strong></td><td class="tooltip-text">' + S.avg + '<strong class="tooltip-num">' + w(j / b) + '</strong></td></tr><tr><td class="tooltip-text tooltip-text-light">' + N + '</td><td class="tooltip-text need-split-line">' + S.sum + '<strong class="tooltip-num">' + w(P) + '</strong></td><td class="tooltip-text">' + S.avg + '<strong class="tooltip-num">' + w(P / b) + "</strong></td></tr></table>"
                }
            }
            D += '<div class="selected-data-table-wrap"></div>';
            var R = f.length > 0;
            if (!R) {
                f = $('<div class="selected-tooltip"><div class="tooltip-content"></div><div class="toolbar"></div></div>');
                var B = n.supportFreeDrilldown() ? ["focus", "exclude", "drilldown", "viewdata"] : ["focus", "exclude", "viewdata"];
                u.default.checkSTSupport(n) && B.push("link");
                var z = "zh" == t.language ? {
                    focus: "聚焦",
                    exclude: "排除",
                    drilldown: "下钻",
                    link: "联动"
                } : {focus: "Focus", exclude: "Exclude", drilldown: "Drill-down", link: "Interactive"};
                p && u.default.checkSTSupport(n) && (delete z.link, B.pop()), B.forEach(function (e) {
                    var i = "drilldown" == e && !n.getAvailableDrillFields(), a = z[e] || "",
                        r = "zh" == t.language ? "当前无可下钻维度" : "No available field";
                    f.find(".toolbar").append('<span class="action action-%action% %action-display% %action-drill-nodata%" data-action="%action%" ><span class="action-text" title="%action-title%"><i class="bdp-icon"></i>%action-text%</span>%downlist%</span>'.replace(/%action%/g, e).replace(/%action-text%/g, a).replace(/%action-display%/g, function () {
                        return "exclude" === e ? "hide" : ""
                    }).replace(/%downlist%/g, function () {
                        return "focus" === e ? '<span class="action-dropdown"><i class="bdp-icon ico-dropdown-menu J-icon-dropdown"></i></span>' : ""
                    }).replace(/%action-drill-nodata%/g, function () {
                        return i ? "dropdown-item-disabled" : ""
                    }).replace(/%action-title%/g, function () {
                        return i ? r : a
                    }))
                }), f.on("click", ".action:not(.disabled)", function (e) {
                    var t = $(this).data("action");
                    switch (t) {
                        case"focus":
                            if ($(e.target).hasClass("action-dropdown") || $(e.target).hasClass("J-icon-dropdown")) {
                                var i = $(".action-exclude");
                                i.toggleClass("hide"), i.hasClass("hide") ? i.hide() : i.show();
                                break
                            }
                        case"exclude":
                            $(".selection-tooltip-overlay").remove(), n.enterSelectionView(t), f.remove();
                            break;
                        case"drilldown":
                            $(this).find(".dropdown-list").length ? ($(this).removeClass("active"), $(this).find(".dropdown-list").remove()) : ($(this).addClass("active"), n.showAvailableDrillFields(), $(this).siblings(".action-viewdata").hasClass("active") && ($(this).siblings(".action-viewdata").removeClass("active"), $(".selected-tooltip .selected-data-table-wrap").removeClass("show").animate({height: 0}, 200, "swing")));
                            break;
                        case"viewdata":
                            $(this).toggleClass("active"), $(this).hasClass("active") ? (n.showSelectedPointsData(), $(this).siblings(".action-drilldown").hasClass("active") && ($(this).siblings(".action-drilldown").removeClass("active"), $(this).siblings(".action-drilldown").find(".dropdown-list").remove())) : $(".selected-tooltip .selected-data-table-wrap").removeClass("show").animate({height: 0}, 200, "swing");
                            break;
                        case"link":
                            var r = n.getSelectedPoints();
                            $(this).toggleClass("active"), a(), n.emit("refreshLinkedCharts", r, n, !0)
                    }
                }), $(".selected-tooltip").remove(), r.append(f), f.draggable({
                    handle: ".drag-handle",
                    drag: function (e, t) {
                        f.css("bottom", "auto")
                    },
                    stop: function (t, i) {
                        var a = $(e).height() - f.offset().top - f.height();
                        f.css({bottom: a, top: "auto"});
                        var r = {
                            category: "user_interact",
                            action: "chart_interact",
                            opt_label: (0, s.default)({
                                ct_id: n.ct_id,
                                page: n.getCurrentPage(),
                                view_data: $(".selected-tooltip").find(".selected-data-table").length > 0
                            })
                        };
                        BDPLogger.log("move_selection_tooltip", r)
                    }
                })
            }
            if (n.supportFreeDrilldown()) if (f.addClass("drilldown-enabled"), n.isOpenTimePredicted && g.timePredicted.hasPredictPonier(m)) {
                var H = "zh" == t.language ? "时序预测结果不支持自由下钻" : "Free Drill-down unavailable if use the prediction";
                f.find(".action-drilldown").attr("title", H).addClass("disabled")
            } else f.find(".action-drilldown").attr("title", "").removeClass("disabled");
            if (f.find(".tooltip-content").html('<div class="drag-handle"></div>' + D), f.find(".action-viewdata").hasClass("active") && n.showSelectedPointsData(!0), !R) {
                var W, q, V = $(e).width(), U = $(e).height(), G = f.outerWidth(), J = f.outerHeight(),
                    Y = i.originalEvent.chartX, X = i.originalEvent.chartY, K = i.target.mouseDownX,
                    Q = i.target.mouseDownY;
                "click" == i.originalEvent.type ? (W = i.originalEvent.clientX + 10, q = U - i.originalEvent.clientY, W = Math.min(W, V - 30 - G)) : (W = Y > K ? Math.min(i.selectionBounding.right, V - 30 - G) : Math.max(i.selectionBounding.left - G, 30), q = X > Q ? U - i.selectionBounding.bottom : U - i.selectionBounding.top - J), f.css({
                    top: "auto",
                    left: W,
                    bottom: q
                }), l(f, n)
            }
        }

        function l(e, t) {
            e.hasClass("chart-theme-" + t.theme) || (e.removeClass("chart-theme-dark chart-theme-default").addClass("chart-theme-" + t.theme), e.removeClass("display-theme-dark display-theme-light").addClass("display-theme-" + ("default" == t.theme ? "light" : "dark"))), e.hasClass("display-device-" + t.displayDevice) || e.removeClass("display-device-pc display-device-projector display-device-tv").addClass("display-device-" + t.displayDevice)
        }

        function d(e) {
            var t = 0;
            return e && e.series.forEach(function (e) {
                e.visible && !/^Navigator/.test(e.name) && (t += e.points.reduce(function (e, t) {
                    return e + (t.isNull ? 0 : 1)
                }, 0))
            }), t
        }

        function p(e, t, i) {
            if ("date" == t.data_type) {
                if (e = +e, isNaN(e)) return "NaN";
                var n = t.granularity || "day", a = t.granularity_name || "", r = t.month_start_day || 0;
                if ("hour" !== n && "minute" !== n && "second" !== n || (n = "g_" + n), "week" === n && !i) {
                    r = 1, a && (r = t.week_start_day_of_week);
                    var o = new Date(e).getDay();
                    o > r ? e -= 864e5 * (o - r) : e += 864e5 * (r - o)
                }
                return g.checkGranularity(n, e, a, r)
            }
            return e
        }

        var f = t.Chart, h = t.ChartType, g = t.helper, m = null;
        $(e).on("keydown.shift-select", function (t) {
            if (!e._interectingSplitChart) {
                !t.altKey && !t.ctrlKey && t.shiftKey && !t.metaKey && i(!0)
            }
        }), $(e).on("keyup.shift-select", function (t) {
            if (!e._interectingSplitChart) {
                var n;
                e.event ? n = t.keyCode : t.which && (n = t.which), "16" == n && i(!1)
            }
        }), f.prototype.supportSelect = function () {
            var e = [h.Line, h.Column, h.NStackColumn, h.PStackColumn, h.Area, h.NStackArea, h.PStackArea, h.Biax, h.ComparisonBar, h.Bar, h.NStackBar, h.PStackBar, h.Scatter, h.Waterfall, h.Table];
            this.info;
            return e.indexOf(this.getChartType()) > -1 && !this.isSplitChart() && !this.isMobileMode
        }, f.prototype.supportFreeDrilldown = function () {
            var e = this.info.free_drill_fields;
            return e && e.length > 0
        }, f.prototype._setSelectOption = function () {
            var e = this;
            e.supportSelect() && (e.options.chart.zoomType = "xy", $.extend(!0, e.options.chart.events, {
                mouseenterYAxisArea: function (t) {
                    var i = e.$elem.find(".set-yaxis-sort");
                    if (i.length && i.addClass("visible"), "fullscreen" == e.mode) {
                        var n = e.$elem.find(".zoom.bdp-icon");
                        n.length && n.addClass("visible")
                    }
                }, mouseoutYAxisArea: function (t) {
                    var i = e.$elem.find(".set-yaxis-sort");
                    if (i.length && i.removeClass("visible"), "fullscreen" == e.mode) {
                        var n = e.$elem.find(".zoom.bdp-icon");
                        n.length && n.removeClass("visible")
                    }
                }, dragStart: function (t) {
                    e.hideHoverTooltip(), this.hoverPoints && (this.hoverPoints.forEach(function (e) {
                        e.setState()
                    }), this.hoverPoints = []), e.chartInstance.tooltip.hide(), n(e)
                }, dragOver: function (t) {
                    var i = this.getSelectedPoints();
                    if (i.length > 0) {
                        t.originalEvent.shiftKey || e.addSelectionMask();
                        var n = this.options.chart.type || "line";
                        "scatter" != n && "bubble" != n || i.forEach(function (t) {
                            !t.graphic || e.chartInstance.lastSelectedPoints && e.chartInstance.lastSelectedPoints.indexOf(t) > -1 || t.selected && t.select(!0, !0)
                        }), m = e, o(t, e)
                    } else a();
                    $(".selection-range-hint").remove(), e.chartInstance.lastSelectedPoints = [].concat(i)
                }, selection: function (t) {
                    return e.selectPointsByDrag(this, t, e), !1
                }
            }))
        }, f.prototype.disableSelect = function () {
            this.supportSelect() && this.chartInstance && (this.chartInstance.options.disableSelection = !0)
        }, f.prototype.enableSelect = function () {
            this.supportSelect() && this.chartInstance && delete this.chartInstance.options.disableSelection
        }, f.prototype.selectPoint = function (e, t) {
            var i = this, r = i.chartInstance.getSelectedPoints();
            if (m = i, h.Waterfall == i.getChartType() && e.isSum) return !1;
            if ($(".selection-tooltip-overlay").length || (n(i), i.chartInstance.hoverPoints && i.chartInstance.hoverPoints.forEach(function (t) {
                t !== e && t.setState()
            })), i.hideHoverTooltip(), e.selected) {
                e.select(!1, !0);
                var s = r.indexOf(e);
                r.splice(s, 1), r.length || a()
            } else e.select(!0, !0), r.push(e);
            i.chartInstance.lastSelectedPoints = [].concat(r), o({originalEvent: t, target: i.chartInstance}, i)
        }, f.prototype.getSelectedPoints = function () {
            var e = this, t = e.chartInstance;
            t.options.chart.type;
            return t.getSelectedPoints()
        }, f.prototype.cancelSelection = function (e, t) {
            var i = this, n = i.chartInstance,
                a = (n.options.chart.type, n.getSelectedPoints ? n.getSelectedPoints() : []);
            t || i.removeSelectionMask(), $(".selected-tooltip").remove(), e || (m = null, a.forEach(function (e) {
                e.select && e.select(!1, !0)
            }), n.selectedPoints = null)
        }, f.prototype.removeSelectionMask = function () {
            var e = this, t = e.chartInstance, i = t.options.chart.type || "line";
            "line spline area areaspline".indexOf(i) > -1 ? t.series.forEach(function (e) {
                /^Navigator/.test(e.name) || e.group && e.group.attr("opacity", 1)
            }) : t.series.forEach(function (e) {
                var t = e.shapes || e.points;
                /^Navigator/.test(e.name) || t.forEach(function (e) {
                    e.graphic && !e.selected && e.graphic.attr("opacity", 1)
                })
            })
        }, f.prototype.addSelectionMask = function () {
            var e = this, t = e.chartInstance, i = t.options.chart.type || "line", n = t.getSelectedPoints();
            if (n.length) if ("line spline area areaspline".indexOf(i) > -1) {
                var a = {};
                n.forEach(function (e) {
                    a[e.series.index] = !0
                }), t.series.forEach(function (e) {
                    e.visible && !/^Navigator/.test(e.name) && !a[e.index] && e.group && e.group.attr("opacity", .3)
                })
            } else t.series.forEach(function (e) {
                e.visible && !/^Navigator/.test(e.name) && e.points.forEach(function (e) {
                    !e.selected && e.graphic && e.graphic.attr("opacity", .3)
                })
            })
        }, f.prototype.selectPointsByDrag = function (e, i, n) {
            var a = n.info.chart_type == h.ComparisonBar && "pos_side" == n.info.comparison_xaxis_pos,
                r = n.chartInstance.lastSelectedPoints || [], o = [];
            Highcharts.each(e.series, function (e) {
                if (n.isOpenTimePredicted && g.timePredicted.checkType(e.options, "enable", "area")) return !1;
                var t = n.getChartType(), s = t == h.Scatter, l = 0;
                t == h.Biax && (l = i.yAxis.map(function (e) {
                    return e.axis
                }).indexOf(e.yAxis)), /^(Navigator|Trendline)/.test(e.name) || Highcharts.each(e.points, function (e) {
                    if (!(i.originalEvent.shiftKey && r.indexOf(e) > -1)) {
                        var c;
                        if (s) c = e.x >= i.xAxis[0].min && e.x <= i.xAxis[0].max && e.y >= i.yAxis[0].min && e.y <= i.yAxis[0].max, c ? (o.push(e), e.selected = !0) : e.selected = !1; else {
                            var d = $(i.target.container).find(".highcharts-plot-background")[0].getBoundingClientRect(),
                                u = $(i.target.container).find(".highcharts-root")[0].getBoundingClientRect(),
                                p = d.left - u.left, f = d.top - u.top, m = i.target.mouseDownX - p,
                                v = i.target.mouseDownY - f, y = i.originalEvent.chartX - p,
                                b = i.originalEvent.chartY - f, _ = Math.min(m, y), w = Math.max(m, y),
                                x = Math.min(v, b), C = Math.max(v, b);
                            if (t == h.Biax) {
                                var k = e.series.options.type;
                                "column" == k ? t = e.stackTotal ? h.NStackColumn : h.Column : ["line", "spline"].indexOf(k) > -1 && (t = h.Line)
                            }
                            if (a) {
                                var S = $(i.target.container)[0].getBoundingClientRect(), T = d.left - S.left,
                                    D = d.width + T, L = d.right + T;
                                d = {left: d.left, right: L, bottom: d.bottom, top: d.top, width: D, height: d.height}
                            }
                            var c, A = g.pointAbsPosInPlotArea(e, n.getChartType(), d, l), E = A.pointLeftX,
                                I = A.pointRightX, F = A.pointTopY, O = A.pointBottomY;
                            if ([h.Line, h.Area, h.NStackArea, h.PStackArea].indexOf(t) < 0) c = (E <= _ && I >= _ || E >= _ && I <= w || E <= _ && I >= w || w >= E && _ <= E) && (O >= x && F <= x || F >= x && O <= C || F <= C && O >= C), h.Waterfall == t && e.isSum && (c = !1); else if (t == h.Line) c = e.x >= i.xAxis[0].min && e.x <= i.xAxis[0].max && e.y >= i.yAxis[l].min && e.y <= i.yAxis[l].max; else {
                                var M = t == h.PStackArea ? e.stackY : e.stackY || F;
                                c = E >= i.xAxis[0].min && E <= i.xAxis[0].max && M >= i.yAxis[0].min && M <= i.yAxis[0].max
                            }
                            c && null !== e.y && e.series.visible ? (e.select(!0, !0), o.push(e)) : !c && e.selected && e.select(!1, !0)
                        }
                    }
                })
            });
            var s = e.pointer.selectionMarker;
            if (s) if (i.xAxis[0].max < i.xAxis[0].axis.min || i.xAxis[0].min > i.xAxis[0].axis.max || !o.length) $(".selection-range-hint").remove(); else {
                var c = s.element.getBoundingClientRect(), d = $(".selection-range-hint");
                if (!d.length) {
                    d = $('<div class="selection-range-hint"></div>'), l(d, n);
                    var u;
                    u = bdp.bdpDash.getCurFullScreenElement() ? $(bdp.bdpDash.getCurFullScreenElement()) : $("body"), d.appendTo(u)
                }
                if (e.xAxis[0] && e.xAxis[0].isDatetimeAxis) {
                    var p = o.map(function (e) {
                        return e.x
                    });
                    p.sort(function (e, t) {
                        return e - t
                    });
                    var f = n._formatTimeWithField(p[0], n.data.x[0], "abb"),
                        m = n._formatTimeWithField(p[p.length - 1], n.data.x[0], "abb"),
                        v = "zh" == t.language ? "至" : "to",
                        y = "<span class='selection-range'><span class='start-time'>" + f + "</span><span class='ml4 mr4'>" + v + "</span><span class='end-time'>" + m + "</span></span>";
                    d.html(y), d.css({top: c.top - 30, left: c.left})
                } else {
                    var b = o.length;
                    d.html('<span class="selection-range"><strong>' + b + "</strong>项"), d.css({
                        top: c.top - 30,
                        left: c.left
                    })
                }
            }
            i.originalEvent.shiftKey && (o = o.concat(r)), e.selectedPoints = o, n.hideHoverTooltip()
        }, f.prototype.enterSelectionView = function (e) {
            var t = this;
            if (this.chartInstance) {
                var i = this.chartInstance.getSelectedPoints();
                if (i && i.length > 0) {
                    var n = {
                        category: "user_interact",
                        action: "chart_interact",
                        opt_label: (0, s.default)({
                            ct_id: t.ct_id,
                            page: t.getCurrentPage(),
                            total_count: d(t.chartInstance),
                            selected_count: i.length,
                            view_data: $(".selected-tooltip").find(".selected-data-table").length > 0
                        })
                    };
                    BDPLogger.log("selection_" + e, n);
                    var a;
                    if ("focus" == e) a = t.getSelectedData(); else {
                        var o = {}, l = [], c = (t._isStackChart(), t.getChartType() == h.Scatter),
                            u = t.getChartType() == h.ComparisonBar, p = t.getChartType() == h.Biax,
                            f = t.chartInstance.xAxis[0] && t.chartInstance.xAxis[0].isDatetimeAxis;
                        i.forEach(function (e) {
                            var i = e.series.index, n = e.index;
                            if (f && (n = t.getXIndexOfPoint(e)), o[n] || (o[n] = []), e.series.stackKey && !u) {
                                var a = e.series.chart.series.length - 1;
                                e.series.chart.navigator && e.series.chart.navigator.baseSeries && (a -= e.series.chart.navigator.baseSeries.length), i = a - i, p && (i = e.series.options.yAxis ? t.data.y.length + i : i - t.data.y_optional.length)
                            }
                            o[n].push(i), l.indexOf(i) < 0 && l.push(i)
                        });
                        var g = (0, r.default)(o).map(function (e) {
                            return +e
                        });
                        g.sort(function (e, t) {
                            return t - e
                        }), l.sort(function (e, t) {
                            return e - t
                        });
                        var m = t.selectionData || t.origin_data;
                        if (a = angular.copy(m), m.bubble_values) {
                            var v = null, y = "";
                            m.bubble_values.forEach(function (e, t) {
                                e.data.forEach(function (i, n) {
                                    v = i, y = e.original_name, a.y[t].bubble_values = a.y[t].bubble_values ? a.y[t].bubble_values : [], a.y[t].bubble_values.push({
                                        bubbleValue: v,
                                        bubbleName: y
                                    })
                                })
                            })
                        }
                        var b = [];
                        g.forEach(function (e) {
                            var t = !0;
                            a.y.concat(a.y_optional).forEach(function (i, n) {
                                (o[e].indexOf(n) > -1 || c || $.isArray(i.data[e]) || !i.data[e]) && (i.data[e] = null), null !== i.data[e] && (t = !1)
                            }), t && b.push(e)
                        });
                        var _ = a.x.concat(a.y).concat(a.y_optional);
                        b.forEach(function (e) {
                            _.forEach(function (t) {
                                t.data.splice(e, 1), t.bubble_values && t.bubble_values.splice(e, 1)
                            }), c && a.bubble_sizes.splice(e, 1)
                        })
                    }
                    t.data = a, t.chartData = angular.copy(a), t.selectionData = angular.copy(a), t.destroy(), t.renderChart(), t.selectionOptCount || (t.selectionOptCount = {
                        focus: 0,
                        exclude: 0
                    }), t.selectionOptCount[e] += 1;
                    var w;
                    t.isDashboardMode ? (w = t.$elem.parents(".chart-box").find(".J-revert-selection"), "dashboard") : "edit" == t.mode ? (w = t.$elem.parents("#chartBox").find(".J-revert-selection"), "edit") : "fullscreen" == t.mode && (w = $(".fullscreen-modal").find(".J-revert-selection"), "fullscreen"), w.show()
                }
            }
        }, f.prototype.exitSelectionView = function () {
            var e = this;
            e.data = angular.copy(e.origin_data), e.chartData = angular.copy(e.origin_data), e.selectionData = null, e.destroy(), e.renderChart(), e.hideRevertSelectionBtn();
            var t = {
                category: "user_interact",
                action: "chart_interact",
                opt_label: (0, s.default)({
                    ct_id: e.ct_id,
                    page: e.getCurrentPage(),
                    focus_count: e.selectionOptCount.focus,
                    exclude_count: e.selectionOptCount.exclude,
                    view_data: $(".selected-tooltip").find(".selected-data-table").length > 0
                })
            };
            BDPLogger.log("selection_revert", t), e.selectionOptCount = null
        }, f.prototype.hideRevertSelectionBtn = function () {
            this.isDashboardMode ? this.$elem.parents(".chart-box").find(".J-revert-selection").hide() : "edit" == this.mode ? this.$elem.parents("#chartBox").find(".J-revert-selection").hide() : "fullscreen" == this.mode && $(".fullscreen-modal").find(".J-revert-selection").hide()
        }, f.prototype.showAvailableDrillFields = function () {
            var i = this.getAvailableDrillFields();
            if (i) {
                var n = "zh" == t.language ? "请选择下钻维度" : "Select dimension to drill-down",
                    a = "zh" == t.language ? "无维度可用" : "No available field", r = $('<div class="dropdown-list"></div>'),
                    o = $('<ul class="list-bd"></ul>'), s = !1;
                i.length > 5 ? r.append('<div class="query-text-wrap"><i class="bdp-icon ico-search"></i><input type="text" class="query-text" placeholder="' + n + '"/></div>') : 0 == i.length ? r.append('<div class="nodata-text nowrap">' + a + "</div>") : r.append('<div class="hint nowrap">' + n + "</div>"), i.forEach(function (e, i) {
                    var n = $('<li class="field-item"></li>'), a = e.name;
                    if ("date" == e.data_type) {
                        s = !0;
                        var r = ["year", "quarter", "month", "week", "day", "hour", "minute", "second"],
                            l = "zh" == t.language ? {
                                year: "按年",
                                quarter: "按季",
                                month: "按月",
                                week: "按周",
                                day: "按日",
                                hour: "按时",
                                minute: "按分",
                                second: "按秒"
                            } : {
                                year: "by Year",
                                quarter: "by Quarter",
                                month: "by Month",
                                week: "by Week",
                                day: "by Day",
                                hour: "by Hour",
                                minute: "by Minute",
                                second: "by Second"
                            };
                        n.append('<div class="item-content-wrap"><i class="bdp-icon ico-triangle-right"></i>' + a + "</div>");
                        var c = $('<div class="sub-item-list nowrap"></div>');
                        r.forEach(function (e) {
                            var t = $('<div class="field-item sub-item item-content-wrap nowrap">' + l[e] + "</div>");
                            t.attr("data-granularity", e), t.attr("data-index", i), c.append(t)
                        }), n.append(c)
                    } else n.append('<div class="item-content-wrap">' + a + "</div>");
                    n.attr("title", a), n.attr("data-index", i), o.append(n)
                }), s && r.addClass("need-more-pl"), r.append(o);
                var l = this;
                o.on("click", ".field-item", function () {
                    var e = +$(this).attr("data-index"), t = $(this).attr("data-granularity"), n = i[e];
                    return "date" == n.data_type && (n.granularity = t || "day"), $(".selection-tooltip-overlay").remove(), l.drilldownSelectedPoints(n), !1
                }), o.on("click", ".ico-triangle-right", function (e) {
                    return $(this).parents(".field-item").toggleClass("show-sub-list"), !1
                }), r.find(".query-text").change(function () {
                    var e = $(this).val();
                    e ? (o.find(".item-content-wrap:not(.sub-item):not(:contains(" + e + "))").parent().hide(), o.find(".item-content-wrap:contains(" + e + ")").parent().show()) : o.find(".field-item").show()
                }).keyup($.debounce(300, function () {
                    $(this).change()
                })).click(function (e) {
                    return !1
                });
                var c = $(".selected-tooltip");
                c.find(".action-drilldown").append(r);
                var d = $(e).height(), u = $(e).width(), p = r.width(), f = r.height(), h = r.offset(),
                    g = {left: Math.max(p + h.left - (u - 30), 0), top: Math.max(f + h.top - (d - 10), 0)};
                (g.left > 0 || g.top > 0) && c.css({bottom: d - (h.top - g.top), left: c.offset().left - g.left})
            }
        }, f.prototype.getAvailableDrillFields = function () {
            var e = this.info.x.concat(this.info.compare_axis).map(function (e) {
                return "date" !== e.data_type ? e.fid : ""
            }), t = this.optional.free_drill_opt;
            t && (e = e.concat(t.target_fields.map(function (e) {
                return "date" !== e.data_type ? e.fid : ""
            })));
            var i = this.info.free_drill_fields || [];
            return i = i.filter(function (t) {
                return e.indexOf(t.fid) < 0 && t
            }), i.length > 0 && i
        }, f.prototype.drilldownSelectedPoints = function (e) {
            var i = this, n = this.optional.free_drill_opt || {target_fields: [], filters: []},
                a = this.chartInstance.getSelectedPoints(), r = this.info.x.length > 0,
                o = this.info.compare_axis.length > 0, l = i.getChartType() == h.Scatter,
                c = i.getChartType() == h.ComparisonBar, d = [], u = {};
            a.forEach(function (e) {
                var t = [];
                if (r) if (l) {
                    var n = e.index;
                    t = i.data.x.map(function (e) {
                        return "" + e.data[n]
                    })
                } else if (e.category && e.category.parent) i.data.x.forEach(function (i) {
                    t.push(i.data[e.index] + "")
                }); else {
                    var a = e.name && "slice" !== e.name.toString().toLowerCase() ? e.name : e.x;
                    t.push(a + "")
                }
                if (o) {
                    var p = e.series.index;
                    e.series.stackKey && !c && (p = i.data.y.length - 1 - p);
                    var f = i.data.y[p];
                    if (f) {
                        var h = f.compare_values.slice(1);
                        t = t.concat(h)
                    }
                }
                u[(0, s.default)(t)] || (u[(0, s.default)(t)] = 1, d.push(t))
            });
            var p = this.info.x.concat(this.info.compare_axis);
            p.forEach(function (e, t) {
                if ("date" == e.data_type && "week" == e.granularity && e.granularity_name) {
                    var i = e.week_start_day_of_week || 1;
                    d.forEach(function (e) {
                        var n = +e[t], a = new Date(n).getDay();
                        a > i ? n -= 864e5 * (a - i) : n += 864e5 * (i - a), e[t] = n + ""
                    })
                }
            }), n.filters.push({fields: p, values: d}), n.target_fields.push(e), this.optional.free_drill_opt = n;
            var f = {
                category: "user_interact",
                action: "chart_interact",
                opt_label: (0, s.default)({
                    ct_id: i.ct_id,
                    drill_level: n.filters.length,
                    field_type: e.data_type,
                    page: i.getCurrentPage(),
                    view_data: $(".selected-tooltip").find(".selected-data-table").length > 0
                })
            };
            BDPLogger.log("free_drilldown", f), t.helper.renderCrumbs(this), this.emit("refreshData"), $(".selected-tooltip").remove()
        }, f.prototype.showSelectedPointsData = function (i) {
            var n = this, a = this.getSelectedData();
            if (a) {
                var r = this.info, o = (r.x.concat(r.compare_axis).concat(r.y), []),
                    l = a.x[0] && a.x[0].data.length || 1, c = {}, d = [], u = +new Date;
                if (n.isOpenTimePredicted && r.compare_axis.length > 0) var f = {}, h = !1, m = !1;
                a.x.concat(r.compare_axis).concat(a.y).concat(a.y_optional).forEach(function (e) {
                    var t = e.uniq_id;
                    t || (t = e.uniq_id = u++), n.isOpenTimePredicted && (r.compare_axis.length > 0 ? (g.timePredicted.checkType(e, "enable", "line") && (h = !0), g.timePredicted.checkType(e, "enable", "area") && (m = !0)) : g.timePredicted.checkType(e, "enable", "all") && (t = e.uniq_id = u++)), c[t] || ((a.y.indexOf(e) > -1 || a.y_optional.indexOf(e) > -1) && (e.align = "right"), c[t] = e, d.push(t))
                });
                var v, y;
                if (r.compare_axis.length > 0) {
                    if (n.isOpenTimePredicted && h) {
                        var b = u + 10;
                        f.val = b, c[b] = {name: "zh" == t.language ? "预测值" : "Predicted value"}, d.push(b), m && (b = u + 100, f.range = b, c[b] = {name: "zh" == t.language ? "置信区间" : "Prediction interval"}, d.push(b))
                    }
                    v = {}, y = [], a.y.concat(a.y_optional).forEach(function (e, t) {
                        var i = (0, s.default)(e.compare_values.slice(1));
                        void 0 === v[i] && (v[i] = [], y.push(i)), v[i].push(e)
                    })
                }
                for (var _ = 0; _ < l; _++) {
                    var w = {};
                    a.x.forEach(function (e) {
                        var t = e.uniq_id, i = e.data[_];
                        i = null === i || void 0 === i ? "--" : p(i, e), w[t] = i
                    }), y ? y.forEach(function (e) {
                        var t = $.extend({}, w);
                        JSON.parse(e).forEach(function (e, i) {
                            var n = r.compare_axis[i], a = n.uniq_id;
                            e = null === e || void 0 === e ? "--" : p(e, n), t[a] = e
                        });
                        var i = !0;
                        v[e].forEach(function (e) {
                            var a = e.uniq_id, r = e.data[_];
                            n.isOpenTimePredicted && g.timePredicted.checkType(e, "enable", "line") && (a = f.val), n.isOpenTimePredicted && g.timePredicted.checkType(e, "enable", "area") && (a = f.range), null === r || void 0 === r ? r = "--" : (i = !1, r = $.isArray(e.data[_]) ? null === e.data[_][0] || void 0 === e.data[_][0] ? "--" : g.dataLabelFormatter(e.formatter, e.data[_][0], e.aggregator) + " ~ " + g.dataLabelFormatter(e.formatter, e.data[_][1], e.aggregator) : g.dataLabelFormatter(e.formatter, e.data[_], e.aggregator)), t[a] = r
                        }), i || o.push(t)
                    }) : (a.y.concat(a.y_optional).forEach(function (e, t) {
                        var i = e.uniq_id, n = e.data[_];
                        n = null === n || void 0 === n ? "--" : $.isArray(e.data[_]) ? null === e.data[_][0] || void 0 === e.data[_][0] ? "--" : g.dataLabelFormatter(e.formatter, e.data[_][0], e.aggregator) + " ~ " + g.dataLabelFormatter(e.formatter, e.data[_][1], e.aggregator) : g.dataLabelFormatter(e.formatter, e.data[_], e.aggregator), w[i] = n
                    }), o.push(w))
                }
                var x = $('<table class="selected-data-table"><thead><tr></tr></thead><tbody></tbody></table>'),
                    C = x.find("thead tr"), k = x.find("tbody");
                d.forEach(function (e) {
                    var t = c[e];
                    C.append("<th>" + (t.compare_names && t.compare_names[0] || t.nick_name || t.alias_name || t.name) + "</th>")
                }), o.forEach(function (e) {
                    var t = $("<tr></tr>");
                    d.forEach(function (i) {
                        var n = c[i], a = e[i], r = n.align || "center";
                        null !== a && void 0 !== a || (a = "--", r = "center"), t.append('<td style="text-align:' + r + '">' + a + "</td>")
                    }), k.append(t)
                });
                var S = $(".selected-tooltip .selected-data-table-wrap");
                S.html(x);
                var T = 32 * (Math.min(6, o.length) + 1);
                i ? S.css("height", T) : S.animate({height: T}, 200, "swing"), o.length > 6 ? S.addClass("overflow-y-scroll").addClass("show") : S.removeClass("overflow-y-scroll").addClass("show");
                var D = ($(e).height(), $(e).width()), L = $(".selected-tooltip").get(0).getBoundingClientRect(), A = {
                    bottom: Math.max(L.height + T + 10 - L.bottom, 0),
                    left: Math.max(L.left + L.width - (D - 10), 0)
                };
                (A.bottom > 0 || A.left > 0) && $(".selected-tooltip").css({
                    bottom: parseInt($(".selected-tooltip").css("bottom")) - A.bottom,
                    left: L.left - A.left
                });
                var E = {
                    category: "user_interact",
                    action: "chart_interact",
                    opt_label: (0, s.default)({
                        ct_id: n.ct_id,
                        page: n.getCurrentPage(),
                        view_data: $(".selected-tooltip").find(".selected-data-table").length > 0
                    })
                };
                BDPLogger.log("view_selected_data", E)
            }
        }, f.prototype.getSelectedData = function () {
            var e = this, t = this.chartInstance.getSelectedPoints();
            if (t && t.length > 0) {
                var i = {}, n = {}, a = [], o = e.getChartType() == h.Scatter, s = e.getChartType() == h.ComparisonBar,
                    l = e.getChartType() == h.Biax,
                    c = (e._isStackChart(), e.chartInstance.xAxis[0] && e.chartInstance.xAxis[0].isDatetimeAxis);
                t.forEach(function (t) {
                    var r = t.series.index, o = t.index;
                    if (c && (o = e.getXIndexOfPoint(t)), i[o] || (i[o] = []), t.series.stackKey && !s) {
                        var d = t.series.chart.series.length - 1;
                        t.series.chart.navigator && t.series.chart.navigator.baseSeries && (d -= t.series.chart.navigator.baseSeries.length), r = d - r, l && (r = t.series.options.yAxis ? e.data.y.length + r : r - e.data.y_optional.length)
                    }
                    i[o].push(r), a.indexOf(r) < 0 && (a.push(r), e.isOpenTimePredicted && g.timePredicted.checkType(t.series.options, "enable", "line") && t.series.linkedSeries && t.series.linkedSeries.length > 0 && t.series.linkedSeries.forEach(function (e) {
                        a.push(e.index)
                    }), n[r] = t.series.color)
                });
                var d = (0, r.default)(i).map(function (e) {
                    return +e
                }), u = e.selectionData || e.origin_data, p = angular.copy(u);
                return d.sort(function (e, t) {
                    return e - t
                }), o ? a = e.origin_data.y.map(function (e, t) {
                    return t
                }) : (a.sort(function (e, t) {
                    return e - t
                }), p.selectionColors = [], a.forEach(function (e) {
                    n[e] && p.selectionColors.push(n[e])
                })), p.x.concat(p.y).concat(p.y_optional).forEach(function (e) {
                    e.data = [], e.bubble_values = []
                }), o && (p.bubble_sizes = []), d.forEach(function (e) {
                    u.x.forEach(function (t, i) {
                        p.x[i].data.push(t.data[e])
                    }), o && p.bubble_sizes.push(u.bubble_sizes[e]), u.y.concat(u.y_optional).forEach(function (t, n) {
                        if (!(a.indexOf(n) < 0)) {
                            var r = null, s = null, l = "";
                            (i[e].indexOf(n) > -1 || o || $.isArray(t.data[e])) && (r = t.data[e], u.bubble_values && (s = u.bubble_values[n].origin_data[e], l = u.bubble_values[n].original_name)), n < u.y.length ? (p.y[n].data.push(r), u.bubble_values && p.y[n].bubble_values.push({
                                bubbleValue: s,
                                bubbleName: l
                            })) : p.y_optional[n - u.y.length].data.push(r)
                        }
                    })
                }), e.getChartType() == h.ComparisonBar ? 0 == p.y[0].data.length ? p.y[0].data = p.y[1].data.map(function (e) {
                    return null
                }) : 0 == p.y[1].data.length && (p.y[1].data = p.y[0].data.map(function (e) {
                    return null
                })) : (p.y_optional = p.y_optional.filter(function (e, t) {
                    return a.indexOf(t + p.y.length) > -1
                }), p.y = p.y.filter(function (e, t) {
                    return a.indexOf(t) > -1
                })), p
            }
            return !1
        }
    }(window, bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e, t) {
        var i = t.helper, n = t.ChartType;
        i.findNearestPoint = function (e, t) {
            var i, a = e.chartInstance, r = e.getChartType(), o = 1 / 0;
            if (r == n.Waterfall) i = a.hoverPoints[0]; else if (r == n.Scatter) i = a.hoverPoint; else {
                var s = e.getChartType() == n.ComparisonBar, l = t.chartX - a.plotLeft, c = t.chartY - a.plotTop;
                a.hoverPoints.forEach(function (t) {
                    if (t.series.visible && !/^Navigator/.test(t.series.name) && t.graphic) {
                        var n, r;
                        if ("circle" == t.graphic.symbol) n = Math.abs(l - t.plotX), r = Math.abs(c - t.plotY), n = n > t.graphic.radius ? n : 0, r = r > t.graphic.radius ? r : 0; else if ("rect" == t.shapeType || "path" == t.shapeType) {
                            var d = "path" == t.shapeType ? t.dlBox : t.shapeArgs, u = d.width, p = d.height;
                            if ("bar" == t.series.type) {
                                var f = d.x, h = d.y;
                                if (s && ("pos_side" == e.info.comparison_xaxis_pos && 2 * a.yAxis[0].width + 16, 0 == t.series.index)) switch (e.info.comparison_xaxis_pos) {
                                    case"pos_left":
                                    case"pos_middle":
                                        h += a.yAxis[0].right;
                                        break;
                                    case"pos_right":
                                        h += a.yAxis[0].right - 50;
                                        break;
                                    case"pos_side":
                                        h += a.yAxis[0].width + 10
                                }
                                d = {
                                    width: p,
                                    height: u,
                                    x: a.plotWidth - p - h,
                                    y: a.plotHeight - u - f
                                }, u = d.width, p = d.height
                            }
                            void 0 === t.stackTotal || s ? "column" == t.series.type || s ? (r = 0, n = Math.max(d.x - l, 0, l - (d.x + u))) : "bar" == t.series.type && (n = 0, r = Math.max(d.y - c, 0, c - (d.y + p))) : (n = Math.max(d.x - l, 0, l - (d.x + u)), r = Math.max(d.y - c, 0, c - (d.y + p)))
                        }
                        var g = n * n + r * r;
                        g < o ? (o = g, i = t) : g == o && t.series.index > i.series.index && (o = g, i = t)
                    }
                })
            }
            return i
        }
    }(window, bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e, t) {
        var i = t.helper, n = (i.mobileHelper, t.ChartType, {
            setSeriesColor: function (e, t, i) {
                var n = 0, a = this;
                t ? angular.forEach(e, function (t, r) {
                    a.checkType(t, "open", "all") ? (n += 1, "area" == t.time_seires_setting.series_type ? t.color = e[r - 1].color : "line" == t.time_seires_setting.series_type && (t.color = e[r - 1] ? e[r - 1].color : i[r])) : t.series_color ? t.color = t.series_color : t.color || (t.color = i[(r - n) % i.length])
                }) : angular.forEach(e, function (t, r) {
                    a.checkType(t, "open", "all") ? "area" == t.time_seires_setting.series_type ? (n += 1, t.time_seires_setting.series_color ? t.color = t.time_seires_setting.series_color : t.color = e[r - 1].color) : "line" == t.time_seires_setting.series_type && (t.time_seires_setting.series_color ? t.color = t.time_seires_setting.series_color : t.color = i[(r - n) % i.length]) : t.series_color ? t.color = t.series_color : t.color = i[(r - n) % i.length]
                })
            }, isOpen: function (e, t) {
                if ("C220" != e || !e || !t) return !1;
                for (var i = 0, n = t.length; i < n; i++) if (this.checkType(t[i], "open")) return !0;
                return !1
            }, hasPredictPonier: function (e) {
                for (var t = 0; t < e.length; t++) if (this.checkType(e[t].series.options, "open", "all")) return !0;
                return !1
            }, hasYError: function (e) {
                var t = 0;
                return e.forEach(function (e, i) {
                    e.time_seires_setting && e.time_seires_setting.predictable === !1 && (t += 1)
                }), t > 0 && (t == e.length ? "chart.timePredicted.allError" : "chart.timePredicted.partError")
            }, checkType: function (e, t, i) {
                var n = !0;
                if (e.time_seires_setting) switch (i) {
                    case"all":
                        n = "line" == e.time_seires_setting.series_type || "area" == e.time_seires_setting.series_type;
                        break;
                    case"origin":
                        n = "line" != e.time_seires_setting.series_type && "area" != e.time_seires_setting.series_type;
                        break;
                    case"line":
                        n = "line" == e.time_seires_setting.series_type;
                        break;
                    case"area":
                        n = "area" == e.time_seires_setting.series_type;
                        break;
                    default:
                        n = !0
                }
                return e.time_seires_setting && (!t || e.time_seires_setting.enable) && n
            }, extendAreaRangeOpt: function (e, t) {
                e.type = t ? "areasplinerange" : "arearange", e.lineWidth = 0, e.lineColor = "transparent", e.linkedTo = ":previous", e.zIndex = 0, e.fillOpacity = .2
            }, getSubsChartBySplit: function (e) {
                for (var t = {}, i = 0; i < e.length; i++) {
                    var n = e[i].compare_values.slice(1).join("");
                    t[n] ? t[n].push(i) : t[n] = [i]
                }
                var a = [];
                for (var r in t) a.push(t[r]);
                return a
            }
        });
        $.extend(!0, i, {timePredicted: n})
    }(window, bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e, t) {
        function i(i) {
            if (e.localStorage) {
                if (!(e.localStorage.getItem("BDP_hasShowAltGuide") || !1) && !i.$elem.find(".alt-guide").length) {
                    var n = $("<div>").addClass("alt-guide"),
                        a = "zh" == t.language ? "按住<strong>Alt</strong>键显示全部选中项的标签" : "Hold<strong>Alt</strong>to show all selected labels";
                    n.html(a), i.$elem.append(n)
                }
            }
        }

        function n(e, t, i) {
            t.find("ul.bdp-legend").remove();
            var n = $("<ul>").addClass("bdp-legend").css({
                position: "absolute",
                top: parseInt(t.css("padding-top")) + 5 + "px",
                left: parseInt(t.css("padding-left")) + 5 + "px",
                "z-index": 2,
                width: t.width() - 10,
                "text-align": "left"
            });
            return e.forEach(function (e) {
                var t = $("<li>").css({
                    display: "inline-block",
                    "margin-right": "20px",
                    cursor: "pointer"
                }).addClass("bdp-legend-item"), i = $("<i>").css({
                    display: "inline-block",
                    background: e.color,
                    width: "6px",
                    height: "6px",
                    "border-radius": "50%",
                    verticalAlign: "middle",
                    "margin-right": "3px"
                }), a = $("<span>").text(e.text);
                t.append(i).append(a), n.append(t)
            }), t.append(n), n.on("click", "li.bdp-legend-item", function () {
                var e = $(this).index();
                $(this).hasClass("disabled") ? $(this).css("opacity", "1") : $(this).css("opacity", ".5"), $(this).toggleClass("disabled"), i.chartInstances.forEach(function (t) {
                    for (var i = t.series.length, n = e, a = 0; a < i && !(n < 0); a++) {
                        var r = t.series[a].options;
                        o.timePredicted.checkType(r, "enable", "all") || (n -= 1)
                    }
                    var s = t.series[a - 1];
                    s.hoverPoint && s.hoverPoint.setState(), s.setVisible(!s.visible)
                })
            }), n
        }

        var a = t.Chart, r = t.ChartType, o = t.helper, s = !1, l = !1;
        $(e).off("keydown.split").on("keydown.split", function (t) {
            if (t.altKey) {
                if (65 == t.keyCode && (s = !s), l = !0, e._interectingSplitChart) {
                    var i = e._interectingSplitChart.chartInstances, n = e._interectingSplitChart;
                    i.forEach(function (e) {
                        if (e != n._interectingSubChart) {
                            var t = e.series.map(function (e) {
                                return e.hoverPoint
                            });
                            t && (t = t.filter(function (e) {
                                return e && !e.isNull
                            }), t.length && e.tooltip.refresh(t))
                        }
                    })
                }
                if (e.localStorage) {
                    e.localStorage.getItem("BDP_hasShowAltGuide") || !1 || (e.localStorage.setItem("BDP_hasShowAltGuide", 1), $("body").find(".chart .alt-guide").remove())
                }
            } else l = !1
        }), $(e).off("keyup.split").on("keyup.split", function (t) {
            if (l && (l = !1, e._interectingSplitChart && !s)) {
                var i = e._interectingSplitChart;
                i.chartInstances.forEach(function (e) {
                    e != i._interectingSubChart && e.tooltip.hide()
                })
            }
        }), a.prototype.isSplitChart = function () {
            var e = this.getChartType(),
                t = [r.Line, r.Column, r.Bar, r.Area].indexOf(e) >= 0 && this.info.compare_axis.length && this.info.split_compare || (e == r.Gauge || e == r.KPICard) && this.info.compare_axis.length;
            return !this.isMobileMode && t
        }, a.prototype.renderChartInSplitMode = function (e) {
            this.chartInstances && this.chartInstances.length && (this.chartInstances.forEach(function (e) {
                e.destroy()
            }), this.$elem.off("click", ".load-more"), this.$elem.html(""));
            var i = [];
            this.chartInstances = i, this._visibleSubChartsCount = 0;
            var a = (this.info.yAxis, this), o = a.getChartType();
            if ([r.Gauge, r.KPICard].indexOf(o) < 0) {
                var s = [];
                this.info.yAxis.forEach(function (t, i) {
                    t && t.name && s.push({
                        text: t.nick_name || t.name,
                        color: t.series_color || e.colors[i % e.colors.length]
                    })
                }), n(s, this.$elem, this)
            }
            var l = this._getGridSetting(), c = l.rows, d = l.cols, u = l.splitCount;
            l.offset, l.boxWidth, l.boxHeight;
            if (u > c * d) {
                this.$elem.css({"overflow-y": "auto", "overflow-x": "hidden"}), u = c * d;
                var p = ("zh" == t.language ? "加载更多" : "Load more") + "...";
                this.$elem.append("<div class='load-more' style='position: absolute; line-height: 30px; height: 30px; text-align: center; width: " + this.$elem.width() + "px;'>" + p + "</div>"), this.$elem.on("click", ".load-more", function () {
                    a.renderSubCharts(e)
                })
            }
            this._allSeries = e.series, this.renderSubCharts(e)
        }, a.prototype.renderSubCharts = function (n) {
            var a = this.chartInstances, c = this.info.yAxis, d = this._getGridSetting(), u = d.rows, p = d.cols,
                f = Math.min(d.splitCount - this._visibleSubChartsCount, u * p), h = d.offset, g = d.boxWidth,
                m = d.boxHeight, v = this, y = this.data;
            this.getChartType();
            if (v.isOpenTimePredicted) {
                var b = o.timePredicted.getSubsChartBySplit(this._allSeries);
                d.splitCount = b.length, f = Math.min(d.splitCount - this._visibleSubChartsCount, u * p)
            }
            if (!(f <= 0)) {
                for (var _ = (n.yAxis[0].plotLines.filter(function (e) {
                    return "highcharts-grid-plot-line" == e.className && e
                }), this._visibleSubChartsCount); _ < f + this._visibleSubChartsCount; _++) {
                    var w = $("<div>"), x = {left: g * (_ % p) + h.left, top: m * parseInt(_ / p) + h.top};
                    w.css({
                        position: "absolute",
                        left: x.left + "px",
                        top: x.top + "px",
                        width: g,
                        height: m
                    }), _ == d.splitCount - 1 && w.css("margin-bottom", this.$elem.css("padding-bottom")), this.$elem.append(w), n.series = null;
                    var C = angular.copy(n);
                    if (n.series = this._allSeries, this.data.guide_line && (this.data.guide_line.forEach(function (e) {
                        "calculate" === e.value_type && (e.value = e.values[_])
                    }), this._setGuideLine(), this._setGridPlotLine()), this.getChartType() == r.Gauge) {
                        C.yAxis[_].plotLines = n.yAxis[0].plotLines, C.yAxis = [C.yAxis[_], {lineWidth: 0}], C.series = [this._allSeries[_]];
                        var k = C.series[0].data[0], S = this.data.gauge_setting.name || this.data.y[0].name,
                            T = this.info.gauge_setting.unit || "",
                            D = '<div class="solidgauge-title"><p class="unit">' + t.helper.dataLabelFormatter(y.y[0].formatter, k, y.y[0].aggregator) + T + '</p><p class="title" >' + this.data.y[_].compare_names.slice(1).join("_") + '</p><p class="title" >' + S + "</p></div>";
                        C.title = {text: D, floating: !0, y: .05 * m}
                    } else {
                        if (v.isOpenTimePredicted) {
                            for (var L = [], A = 0; A < b[_].length; A++) L.push(this._allSeries[b[_][A]]);
                            o.timePredicted.setSeriesColor(L, !0, this.options.colors)
                        } else for (var L = [], E = this._allSeries.length / c.length, I = 0; I < c.length; I++) L.push(this._allSeries[_ + I * E]);
                        C.series = L;
                        var F = L[0].compare_names.slice(1).join("_");
                        $.extend(!0, C, {
                            title: {text: F, align: "center", style: {height: "22px"}},
                            legend: {enabled: !1},
                            yAxis: [{plotLines: n.yAxis[0].plotLines}],
                            tooltip: {shared: !0},
                            plotOptions: {
                                series: {
                                    stickyTracking: !0, events: {
                                        mouseOut: function (t) {
                                            var i = this.chart;
                                            (!this.chart.hoverPoint || this.chart.hoverPoint && "" == this.chart.hoverPoint.state) && (a.forEach(function (e) {
                                                e != i && (e.series.forEach(function (e) {
                                                    e.hoverPoint && e.hoverPoint.setState(), e.hoverPoint = null
                                                }), e.tooltip.hide())
                                            }), v._interectingSubChart = null, e._interectingSplitChart = null, v._triggerPointIndex = -1, v.$elem.find(".alt-guide").hide())
                                        }, mouseOver: function () {
                                            v.$elem.find(".alt-guide").show()
                                        }
                                    }, point: {
                                        events: {
                                            mouseOver: function (t) {
                                                var n = this.index;
                                                this.series.index;
                                                if (t && v._triggerPointIndex !== n) {
                                                    var r = this.series.chart;
                                                    v._interectingSubChart = r, e._interectingSplitChart = v, v._triggerPointIndex = n, a.forEach(function (e) {
                                                        e != r && e.series.forEach(function (t) {
                                                            var i = t.points[n];
                                                            if (!i) return !1;
                                                            if (t.hoverPoint && t.hoverPoint.setState(), i.setState("hover"), t.hoverPoint = i, l || s) {
                                                                var a = e.series.map(function (e) {
                                                                    return e.points[n]
                                                                });
                                                                a && (a = a.filter(function (e) {
                                                                    return e && !e.isNull
                                                                }), a.length ? e.tooltip.refresh(a) : (e.tooltip.hide(), t.hoverPoint = null))
                                                            }
                                                        })
                                                    }), i(v)
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        })
                    }
                    w.highcharts(C), a.push(w.highcharts())
                }
                this._visibleSubChartsCount += f, this._visibleSubChartsCount >= d.splitCount ? (this.$elem.find(".load-more").remove(), this.$elem.off("click", ".load-more"), n = null, this.$elem.find("")) : this.$elem.find(".load-more").css({top: m * Math.ceil(this._visibleSubChartsCount / p) + h.top})
            }
        }, a.prototype._getGridSetting = function () {
            var e, t = this.info.yAxis, i = this.data.y.length / t.length, n = 20, a = this.getChartType();
            a != r.Gauge && a != r.KPICard || (i = this.data.y.length, n = 0);
            var o, s;
            return this.info.split_compare_setting ? (o = this.info.split_compare_setting.rows, s = this.info.split_compare_setting.cols) : o = s = i > 16 ? 4 : Math.ceil(Math.sqrt(i)), e = i > o * s ? 30 : 0, {
                rows: o,
                cols: s,
                boxWidth: (o * s < i && this.isDashboardMode ? this.$elem.width() - 15 : this.$elem.width()) / s,
                boxHeight: (this.$elem.height() - n - e) / o,
                offset: {
                    left: parseInt(this.$elem.css("padding-left")),
                    top: parseInt(this.$elem.css("padding-top")) + n
                },
                splitCount: i
            }
        }
    }(window, bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e, t) {
        var i = (t.helper, t.ChartType, t.Chart), n = {
            dark: {
                title: {style: {color: "rgba(255, 255, 255, 0.5)"}},
                xAxis: {
                    title: {style: {color: "rgba(255, 255, 255, 0.5)"}},
                    labels: {style: {color: "rgba(255, 255, 255, 0.5)"}},
                    lineColor: "rgba(255, 255, 255, 0.1)"
                },
                yAxis: [{
                    title: {style: {color: "rgba(255, 255, 255, 0.5)"}},
                    labels: {style: {color: "rgba(255, 255, 255, 0.5)"}},
                    lineColor: "rgba(255, 255, 255, 0.1)"
                }],
                legend: {itemStyle: {color: "#fff"}},
                tooltip: {backgroundColor: "none", borderWidth: 0, style: {padding: 0}}
            }, default: {}
        }, a = {
            default: {
                pc: {bg: "#fff"},
                projector: {
                    bg: "#fff",
                    xAxis: {
                        title: {style: {color: "rgba(0, 0, 0, 0.8)"}},
                        labels: {style: {color: "rgba(0, 0, 0, 0.8)"}},
                        lineColor: "rgba(0, 0, 0, 0.1)"
                    },
                    yAxis: [{
                        title: {style: {color: "rgba(0, 0, 0, 0.8)"}},
                        labels: {style: {color: "rgba(0, 0, 0, 0.8)"}},
                        lineColor: "rgba(0, 0, 0, 0.1)"
                    }],
                    legend: {itemStyle: {color: "rgba(0, 0, 0, 0.6)"}},
                    plotOptions: {map: {nullColor: "#DCDEE0", dataLabels: {style: {color: "rgba(0, 0, 0, 0.8)"}}}}
                },
                tv: {
                    bg: "#fff",
                    xAxis: {
                        title: {style: {color: "rgba(0,0,0,0.8)"}},
                        labels: {style: {color: "rgba(0,0,0,0.8)"}},
                        lineColor: "rgba(0, 0, 0, 0.05)"
                    },
                    yAxis: [{
                        title: {style: {color: "rgba(0,0,0,0.8)"}},
                        labels: {style: {color: "rgba(0,0,0,0.8)"}},
                        lineColor: "rgba(0, 0, 0, 0.05)"
                    }],
                    plotOptions: {map: {dataLabels: {style: {color: "gba(0, 0, 0, 0.8)"}}}}
                }
            },
            dark: {
                pc: {bg: "#24273E"},
                projector: {
                    bg: "#1a1d29",
                    xAxis: {
                        title: {style: {color: "rgba(255, 255, 255, .8)"}},
                        labels: {style: {color: "rgba(255, 255, 255, .8)"}},
                        lineColor: "rgba(255, 255, 255, 0.3)"
                    },
                    yAxis: [{
                        title: {style: {color: "rgba(255, 255, 255, .8)"}},
                        labels: {style: {color: "rgba(285, 255, 255, .8)"}},
                        lineColor: "rgba(255, 255, 255, 0.3)"
                    }],
                    plotOptions: {
                        map: {
                            nullColor: "rgba(0, 0, 0, .4)",
                            dataLabels: {style: {color: "rgba(255, 255, 255, .8)"}}
                        }
                    }
                },
                tv: {
                    bg: "#000000",
                    xAxis: {
                        title: {style: {color: "rgba(255, 255, 255, .5)"}},
                        labels: {style: {color: "rgba(255, 255, 255, .5)"}},
                        lineColor: "rgba(255, 255, 255, 0.3)"
                    },
                    yAxis: [{
                        title: {style: {color: "rgba(255, 255, 255, .5)"}},
                        labels: {style: {color: "rgba(255, 255, 255, .5)"}},
                        lineColor: "rgba(255, 255, 255, 0.3)"
                    }],
                    plotOptions: {
                        map: {
                            nullColor: "rgba(255, 255, 255, .05)",
                            dataLabels: {style: {color: "rgba(255, 255, 255, .8)"}}
                        }
                    }
                }
            }
        };
        i.prototype.setDisplayStyle = function (e, t, i) {
            this.displayDevice === e && this.theme === t || (this.theme = t, this.themeColor = n[t], this.displayDevice = e, this.deviceStyle = a[t][e], this.info && (this.destroy(), this.renderChart(i)))
        }, i.prototype.setDisplayDevice = function (e, t) {
            this.setDisplayStyle(e, this.theme, t)
        }, i.prototype.setTheme = function (e, t) {
            this.setDisplayStyle(this.displayDevice, e, t)
        }, t.themeColors = n, t.deviceStyles = a
    }(window, bdpChart)
}, function (e, t, i) {
    "use strict";
    !function () {
        var e = {
            font_family: '"Avenir", "wf_SegoeUI", "Segoe UI", "Segoe", "Segoe WP", "Tahoma", "Verdana", "Arial", "sans-serif"',
            date_format: {
                millisecond: "%H:%M:%S.%L",
                second: "%H:%M:%S",
                minute: "%H:%M",
                hour: "%H:%M",
                day: "%Y年%b月%e日"
            }
        };
        Highcharts.setOptions({
            global: {useUTC: !1},
            lang: {
                contextButtonTitle: "图表导出菜单",
                printChart: "打印图表",
                downloadJPEG: "导出为JPEG格式",
                downloadPDF: "导出为PDF格式",
                downloadPNG: "导出为PNG格式",
                downloadSVG: "导出SVG格式",
                drillUpText: "向下攥取",
                loading: "",
                shortMonths: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"],
                months: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
                weekdays: ["星期一", "星期二", "星期三", "星期四", "星期五", "星期六", "星期日"],
                numericSymbols: ["K", "M", "B", "T", "P", "E"],
                thousandsSep: ",",
                resetZoom: "重置缩放",
                resetZoomTitle: "重置到默认级别",
                noData: "当前图表无数据"
            },
            chart: {
                backgroundColor: null,
                spacingTop: 10,
                spacingLeft: 1,
                spacingRight: 0,
                spacingBottom: 4,
                style: {fontFamily: e.font_family}
            },
            title: {
                useHTML: !0,
                align: "left",
                margin: 10,
                style: {height: "60px", lineHeight: "20px", fontSize: "12px", color: "#333", zIndex: 0},
                y: 3
            },
            exporting: {enabled: !1, url: "/api/chart/export_png", buttons: {contextButton: {}}},
            legend: {
                layout: "vertical",
                align: "right",
                verticalAlign: "top",
                itemMarginBottom: 0,
                symbolRadius: 3,
                symbolHeight: 6,
                symbolWidth: 6,
                navigation: {
                    activeColor: "#999",
                    animation: !0,
                    arrowSize: 8,
                    inactiveColor: "#CCC",
                    style: {color: "#666", fontSize: "12px"}
                },
                itemStyle: {color: "#a5a5a5", fontFamily: e.font_family, fontSize: "12px", fontWeight: "normal"}
            },
            xAxis: {allowDecimals: !1, lineColor: "#ccc", labels: {style: {fontSize: "10px"}}, tickLength: 0},
            yAxis: [{
                title: {text: "", style: {fontSize: "10px"}},
                labels: {style: {fontSize: "10px"}},
                maxPadding: .02,
                gridLineWidth: 0
            }],
            tooltip: {
                animation: !1,
                borderWidth: 0,
                borderRadius: 0,
                shadow: !1,
                followPointer: !0,
                followTouchMove: !0,
                shared: !0,
                useHTML: !0,
                hideDelay: 0,
                backgroundColor: "none",
                style: {padding: "0px"}
            },
            plotOptions: {
                column: {borderWidth: 0},
                bar: {borderWidth: 0},
                pie: {
                    cursor: "pointer",
                    showInLegend: !0,
                    dataLabels: {
                        distance: -24,
                        style: {color: "#fefefe", fontSize: "10px", textOutline: "1px 1px rgba(0,0,0,0.4)"},
                        softConnector: !0
                    },
                    states: {hover: {halo: {size: 0}}},
                    borderWidth: 0
                },
                series: {turboThreshold: 1501, animation: !1}
            },
            credits: {enabled: !1}
        })
    }()
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.default = function (e) {
        var t = {}, i = $.extend({chart: null}, e), n = {
            checkParams: function () {
                if (!i.chart) throw"The params opts.chart is needed."
            }, objs: {
                init: function () {
                    n.objs.checkIsAll() && n.objs.create()
                }, checkIsAll: function () {
                    return "1" == i.chart.info.map.region || i.force
                }, checkEnlarge: function () {
                    setTimeout(function () {
                        var e = i.chart, t = e.$elem, n = t.outerWidth(), a = t.outerHeight(), r = n > a,
                            o = t.find(".highcharts-plot-border"), s = t.find(".highcharts-series-group"),
                            l = s[0].getBoundingClientRect(), c = o[0].getBoundingClientRect(),
                            d = t.find(".J-south-China-sea");
                        (r ? c.height < l.height : c.width < l.width) ? d.hide() : d.show()
                    }, 1e3)
                }, create: function () {
                    var e = i.chart, t = e.$elem;
                    if (!t.find(".J-south-China-sea").length) {
                        var a = $('                        <div class="map-south-sea J-south-China-sea" style="position: absolute;right: 10px;z-index:-1; width: 100%; height: 100%;bottom:0;left:0;">                             <i class="bdp-icon ico-chart-map-south-sea J-icon-south-sea ico-no-opacity"></i>                         </div>                         ');
                        t.append(a), n.objs.setPos()
                    }
                }, setPos: function () {
                    var e = i.chart, t = e.$elem, n = t.find(".highcharts-series-group")[0], a = null;
                    if (n) {
                        var r = n.getBoundingClientRect(), o = Math.round(r.width), s = Math.round(r.height),
                            l = t.outerWidth(), c = t.outerHeight(), d = l > c, u = 0, p = 0, f = 0;
                        u = l !== o ? (l - o) / 2 + o - o / 8 : 0, p = d ? 0 : c !== s ? (c - s) / 2 : 0, a = t.find(".J-icon-south-sea"), f = u + a.outerWidth() > l ? l - u : a.outerWidth(), a.css({
                            left: u,
                            bottom: p,
                            maxWidth: f
                        })
                    }
                }
            }, initPlugins: function () {
            }, bindDomFuns: function (e) {
                $(window).on("resize.southSea", bdp.utils.debounce(n.eventFuns.resize, 300))
            }, eventFuns: {
                resize: function () {
                    var e = i.chart.getChartType(), t = bdpChart.ChartType;
                    $.inArray(e, [t.BubbleMap, t.AreaMap, t.TextMap]) > -1 && n.objs.checkIsAll() && n.objs.setPos()
                }
            }, destroy: function () {
                if (n && n.objs) {
                    for (var e in n.objs) {
                        var t = n.objs[e];
                        t && t.destroy && t.destroy()
                    }
                    n = null
                }
            }
        };
        return t.destroy = n.destroy, t.checkEnlarge = n.objs.checkEnlarge, t
    }
}, function (e, t, i) {
    "use strict";
    !function (e) {
        angular.module("bdp.charts").service("chartEditService", ["$filter", function (e) {
            var t = {}, i = {}, n = {};
            this.currMeta = t, this.info = i, this.data = n, this.destory = function () {
                t = {}, i = {}, n = {}
            }
        }]);
        e.helper, e.ChartType
    }(bdpChart)
}, function (e, t, i) {
    "use strict";
    !function (e) {
        function t(e, t, i) {
            return i ? e.offsetTop : $(e).position(t).top
        }

        var i = null, n = function (e, t, i) {
            i = i || {}, e = e || document, this.container = $(e), this.containerParent = e !== document ? this.container.parent() : $(window), this.diff = i.diff || 100, this.selector = t, this.options = i || {}, this.timer = null, this.isMobile = i.isMobile || !1, this.isMobile && "J_ScrollWrap" !== this.containerParent.attr("id") && (this.containerParent = this.containerParent.parents("#J_ScrollWrap")), this._init()
        };
        n.prototype = {
            _init: function () {
                this.threshold = this._getThreshold(), this.items = this._filterItems(), this.items.length && (this._loader(!0), this._initLoadEvent())
            }, _getThreshold: function () {
                return this.containerParent.height() + this.diff
            }, _filterItems: function () {
                return this.container.find(this.selector)
            }, _initLoadEvent: function () {
                var e = this, t = this.containerParent;
                this.containerParent.on("scroll.lazy", bdp.utils.debounce(function (i) {
                    t.removeClass("scroll-cover"), 0 !== e.items.length && e._loader()
                }, 25)), t.on("scroll.cover", function (e) {
                    $("body").trigger("dashboard-scroll-start"), t.hasClass("scroll-cover") || t.addClass("scroll-cover")
                }), this.options.handleResize && $(window).on("resize.lazy", function () {
                    e.threshold = e._getThreshold(), e._loader(!0)
                })
            }, _loader: function (e) {
                var t = this;
                this.container, this.containerParent;
                t._loadItems(e), 0 === t.items.length && $(window).off("resize.lazy")
            }, fireLoad: function () {
                this.threshold = this._getThreshold(), this._loader(!0)
            }, destroy: function () {
                $(window).off("resize.lazy"), this.containerParent.off("scroll.lazy"), this.containerParent.off("scroll.cover"), clearTimeout(i), clearTimeout(this.timer), i = null
            }, _loadItems: function (e) {
                var i = this.options;
                if ($.isFunction(i.onItemLoad)) {
                    var n = this.containerParent.scrollTop();
                    if (e || !(n < this.options.diff)) {
                        for (var a = this.items, r = this.container, o = this.threshold + n, s = !1, l = [], c = 0, d = a.length; c < d; c++) {
                            var u = a[c], p = t(u, r, this.isMobile);
                            p <= o && p + $(u).height() >= n ? (s = !0, i.onItemLoad(u)) : l.push(u)
                        }
                        s && $.isFunction(i.onItemsLoad) && i.onItemsLoad(), this.items = l, clearTimeout(this.timer), l.length <= 0 || (this.timer = setTimeout(function () {
                            for (var e, n = 0, s = l.length; n < s; n++) {
                                var c = a[n];
                                t(c, r) <= o ? (e = !0, i.onItemLoad(c)) : l.push(c)
                            }
                            e && $.isFunction(i.onItemsLoad) && i.onItemsLoad(), this.items = l
                        }, 6e4))
                    }
                }
            }
        }, e.LazyLoad = n
    }(bdpChart)
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t, i) {
    "use strict";
    !function () {
        i(346), i(347), i(348), i(349), i(350), i(351), i(352), i(353), i(354), i(355), i(356), i(672), i(358), i(359), i(360), i(361), i(362), i(673), i(363), i(364), i(365), i(366), i(367), i(368), i(369), i(370), i(371), i(373), i(374), i(375), i(376), i(377), i(378), i(379), i(380), i(381), i(674), i(383), i(679), i(384)
    }()
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    var a = i(1), r = n(a), o = i(338), s = n(o), l = i(158), c = (n(l), i(336)), d = n(c);
    !function () {
        bdpChart.setCanvasTableOpts = function (e, t, n) {
            e.$elem.attr("id", "chart_" + e.info.chart_id);
            var a, o, l, c, u, p, f, h, g, m, v, y, b = {
                    empty: 0,
                    thin: 1,
                    medium: 2,
                    dashed: 3,
                    dotted: 4,
                    thick: 5,
                    double: 6,
                    hair: 7,
                    mediumDashed: 8,
                    dashDot: 9,
                    mediumDashDot: 10,
                    dashDotDot: 11,
                    mediumDashDotDot: 12,
                    slantedDashDot: 13
                }, w = {
                    light: {
                        bgColor: "#FFF",
                        headerRowHeight: 32,
                        headerBgColor: "#ECEFF1",
                        headerFontItalic: "normal",
                        headerFontBold: "normal",
                        headerFontFamily: "Arial",
                        headerFontSize: "12px",
                        headerFontColor: "rgba(0, 0, 0, .6)",
                        headerFontAlignment: "center",
                        headerBorderOutLineShow: !0,
                        headerBorderOutLineColor: "#DFE4E7",
                        headerBorderInLineShow: !0,
                        headerBorderInLineColor: "#DFE4E7",
                        rowHeight: 32,
                        backgroundOddColor: "#FFF",
                        backgroundEvenColor: "#F7F8F9",
                        borderLineShow: !0,
                        borderLineColor: "#DFE4E7",
                        borderLineStyle: b.thin,
                        horizontalLineShow: !0,
                        horizontalLineColor: "#DFE4E7",
                        horizontalLineStyle: b.thin,
                        verticalLineShow: !0,
                        verticalLineColor: "#DFE4E7",
                        verticalLineStyle: b.thin,
                        fontItalic: "normal",
                        fontBold: "normal",
                        fontSize: "12px",
                        fontFamily: "Arial",
                        oddFontColor: "rgba(0, 0, 0, .82)",
                        evenFontColor: "rgba(0, 0, 0, .82)",
                        fontAlignment: "default",
                        scrollbarWrapperColor: "#f8f9f9",
                        scrollbarWrapperHoverColor: "#edeeef",
                        scrollbarColor: "#dcdeed0",
                        scrollbarHoverColor: "#d3d7d9",
                        scrollbarArrowHoverColor: "#edeeef",
                        warnColor: "#E45151",
                        mergeBgColor: "#FFF",
                        mergeFontItalic: "normal",
                        mergeFontBold: "normal",
                        mergeFontSize: "12px",
                        mergeFontFamily: "Arial",
                        mergeFontColor: "rgba(0, 0, 0, .82)",
                        mergeFontAlignment: "default",
                        colSummaryColor: "#E3E8EC",
                        colSummaryFontItalic: "normal",
                        colSummaryFontBold: "normal",
                        colSummaryFontSize: "12px",
                        colSummaryFontFamily: "Arial",
                        colSummaryFontColor: "rgba(0, 0, 0, .82)",
                        colSummaryFontAlignment: "default",
                        setLineHeight: !1,
                        setInterlacing: !0
                    },
                    dark: {
                        bgColor: "#313449",
                        headerRowHeight: 32,
                        headerBgColor: "#1E2033",
                        headerFontItalic: "normal",
                        headerFontBold: "normal",
                        headerFontFamily: "Arial",
                        headerFontSize: "12px",
                        headerFontColor: "rgba(255, 255, 255, .5)",
                        headerFontAlignment: "center",
                        headerBorderOutLineShow: !0,
                        headerBorderOutLineColor: "#24273E",
                        headerBorderInLineShow: !0,
                        headerBorderInLineColor: "#24273E",
                        rowHeight: 32,
                        backgroundOddColor: "#313449",
                        backgroundEvenColor: "#2B2E44",
                        borderLineShow: !0,
                        borderLineColor: "#24273E",
                        borderLineStyle: b.thin,
                        horizontalLineShow: !0,
                        horizontalLineColor: "#24273E",
                        horizontalLineStyle: b.thin,
                        verticalLineShow: !0,
                        verticalLineColor: "#24273E",
                        verticalLineStyle: b.thin,
                        fontItalic: "normal",
                        fontBold: "normal",
                        fontSize: "12px",
                        fontFamily: "Arial",
                        oddFontColor: "#FFF",
                        evenFontColor: "#FFF",
                        fontAlignment: "default",
                        scrollbarWrapperColor: "#2b2c42",
                        scrollbarWrapperHoverColor: "#37394d",
                        scrollbarColor: "#4f5163",
                        scrollbarHoverColor: "#d3d7d9",
                        scrollbarArrowHoverColor: "#37394d",
                        warnColor: "#E45151",
                        mergeBgColor: "#313449",
                        mergeFontItalic: "normal",
                        mergeFontBold: "normal",
                        mergeFontSize: "12px",
                        mergeFontFamily: "Arial",
                        mergeFontColor: "#FFF",
                        mergeFontAlignment: "default",
                        colSummaryColor: "#2E324D",
                        colSummaryFontItalic: "normal",
                        colSummaryFontBold: "normal",
                        colSummaryFontSize: "12px",
                        colSummaryFontFamily: "Arial",
                        colSummaryFontColor: "#FFF",
                        colSummaryFontAlignment: "default",
                        setLineHeight: !1,
                        setInterlacing: !0
                    }
                }, x = void 0, C = "transparent", k = "default", S = "blue", T = "grey", D = "row_summary",
                L = "[__subtotal__]", A = "", E = /^(http:|https:|ftp:)[\S]+\.(jpg|jpeg|bmp|gif|png)$/i,
                I = "0 16 0 16", F = "rgba(81,130,227,0.20)", O = $.extend({iconCount: 3}, n), M = e.$elem,
                N = bdpChart.language || "zh", j = e.theme == k ? "LIGHT" : "DARK", P = "LIGHT" == j,
                R = "edit" === e.mode, B = "fullscreen" === e.mode, z = window.location.href,
                H = z.indexOf("/dash_fullscreen/") > -1, W = z.indexOf("/embed/") > -1, q = z.indexOf("/share/") > -1,
                V = (z.indexOf("dash_edit") >= 0 || z.indexOf("third_iframe") >= 0) && z.indexOf("mode/adv") >= 0 && z.indexOf("adv_dash_edit") < 0,
                U = z.indexOf("adv_dash_edit") >= 0 && z.indexOf("mode/adv") >= 0,
                G = z.indexOf("adv_dash_fullscreen") >= 0 && z.indexOf("mode/adv") >= 0,
                J = z.indexOf("data_screen/") > -1,
                Y = (z.indexOf("data_screen/") > -1 && z.indexOf("data_screen_edit/"), z.indexOf("data_screen_edit/") > -1),
                X = (e.isMobileMode, e.isWarnPreview), K = (M.width(), M.height(), 24 * O.iconCount), Q = {
                    objs: {
                        pageNum: 1,
                        perPageNum: 30,
                        descTipEle: null,
                        imgPreviewEle: null,
                        linkDimensionIndexCache: [],
                        autoWordwrapCellCache: [],
                        init: function () {
                            var e = Q.objs.spread;
                            Q.objs.initThemeProps(), Q.objs.initLangProps(), Q.objs.initModeProps(), e.suspendPaint(), Q.objs.config(), Q.objs.customCell.init(), Q.objs.draw(), Q.objs.setStyles(), e.resumePaint(), Q.objs.autoFitLastColumn(), Q.objs.guide.widthChangeGuide(), Q.objs.guide.wordWrapGuide(), Q.objs.exportDashConfig(), Q.objs.menu.init()
                        },
                        initThemeProps: function () {
                        },
                        initLangProps: function () {
                            if ("zh" === N) return a = "行总计", o = "列总计", l = "小计", c = "表格数据超过100条不支持行列转置", u = "加载更多", y = "当前图表无数据", p = "复制", m = "您可以单击鼠标右键进行复制", void(v = "列宽恢复自适应");
                            a = "Row Summary", o = "Col Summary", l = "Subtotal", c = "Table data more than 100 do not support transpose", u = "Load more...", y = "No data to display", p = "copy", m = "You can right-click and copy", v = "Restore to Auto-Width"
                        },
                        initModeProps: function () {
                        },
                        config: function () {
                            var e = Q.objs.spread, t = Q.objs.sheet, i = Q.objs.spreadNS, n = null;
                            e.options.backColor = x.backgroundOddColor, e.options.grayAreaBackColor = C, t.options.gridline.color = C, t.options.gridline.showHorizontalGridline = !1, t.options.gridline.showVerticalGridline = !1, t.options.gridline.showVerticalScrollbar = !1, e.options.scrollbarMaxAlign = !0, e.options.scrollbarShowMax = !0, e.options.tabEditable = !1, e.options.tabStripVisible = !1, e.options.allowUserZoom = !1, e.options.tabNavigationVisible = !1, e.options.newTabVisible = !1, e.options.allowUserDragFill = !1, e.options.allowUserDragDrop = !1, e.options.cutCopyIndicatorVisible = !1, e.options.autoFitType = i.AutoFitType.cellWithHeader, t.options.selectionBorderColor = "rgb(81,130,228)", t.options.selectionBackColor = "rgba(81,130,228,0.06)", t.clearSelection(), t.options.frozenlineColor = C, t.options.isProtected = !0, n = {
                                allowFilter: !1,
                                allowSort: !1,
                                allowResizeRows: !1,
                                allowResizeColumns: !0,
                                allowEditObjects: !1
                            }, t.options.protectionOptions = n, t.defaults.rowHeight = x.rowHeight, t.defaults.colHeaderRowHeight = x.headerRowHeight
                        },
                        getDefaultStyle: function () {
                            return _.cloneDeep(w["default" === e.theme ? "light" : e.theme])
                        },
                        initStyles: function () {
                            e.info.styles = e.info.styles || {};
                            var t = e.info.styles;
                            "edit" == e.mode || void 0 === t.table ? (x = Q.objs.getDefaultStyle(), t.table = x) : x = t.table, t.defaultStyles = w
                        },
                        setStyles: function (t) {
                            var i = Q.objs.sheet, n = Q.objs.spread, a = Q.objs.spreadNS,
                                r = (Q.objs.lineStyle, Q.objs.sheetStyles = new a.Style),
                                o = (Q.objs.headerRowStyle = new a.Style, Q.objs.viewport), s = Q.objs.colHeader,
                                l = Q.objs.rowHeader, c = Q.objs.isFlipped,
                                d = (e && e.isMobileMode, Q.objs.viewportCompareRange), u = Q.objs.headerValueRange,
                                p = i.getRowCount(), f = i.getColumnCount(), h = Q.objs.colHeaderCount,
                                g = Q.objs.colHeaderRealCount, m = Q.objs.headerRowRange, v = Q.objs.viewportRange,
                                y = Q.objs.rowHeaderRange, b = 0, _ = Q.objs.colSummaryRange,
                                w = Q.objs.flipColSummaryRange, k = Q.objs.subtotalRanges || [],
                                S = Q.objs.warnHitSpan || [], T = (Q.objs.cellStyleHitSpan, Q.objs.info), D = Q.objs.xLen,
                                L = T.tb_statistic, A = L.col && D > 0, E = $.extend({}, t), I = E.lazyLoad,
                                F = (E.range, $(Q.objs.canvas).height()),
                                O = ($(Q.objs.canvas).width(), Q.objs.autoWordwrapCellCache);
                            r.foreColor = x.fontColor;
                            for (var M = 0; M < p; M++) {
                                var N = i.getRange(M, -1, 1, -1, o);
                                (M + 1) % 2 == 0 ? (N.backColor(x.backgroundEvenColor), N.foreColor(x.evenFontColor)) : (N.backColor(x.backgroundOddColor), N.foreColor(x.oddFontColor)), b += i.getRowHeight(M)
                            }
                            for (var j = 1; j < g; j++) b += i.getRowHeight(j, s);
                            Q.objs.resetHScrollBar(I), n.options.showVerticalScrollbar = !(b <= F), Q.objs.resetTableBackground();
                            var P = new a.LineBorder(x.borderLineColor, x.borderLineShow ? x.borderLineStyle : 0),
                                R = new a.LineBorder(x.horizontalLineColor, x.horizontalLineShow ? x.horizontalLineStyle : 0),
                                B = new a.LineBorder(x.verticalLineColor, x.verticalLineShow ? x.verticalLineStyle : 0);
                            v.font(x.fontItalic + " " + x.fontBold + " " + x.fontSize + " " + x.fontFamily), v.setBorder(P, {
                                right: !0,
                                bottom: !0
                            }), v.setBorder(R, {innerHorizontal: !0}), v.setBorder(B, {innerVertical: !0}), m.font(x.headerFontItalic + " " + x.headerFontBold + " " + x.headerFontSize + " " + x.headerFontFamily), m.backColor(x.headerBgColor), m.foreColor(x.headerFontColor);
                            var z = new a.LineBorder(x.borderLineColor, x.borderLineShow ? 1 : 0);
                            m.setBorder(z, {innerHorizontal: !0, right: !0}), Q.objs.initCustomTheme();
                            var H = new a.LineBorder(x.verticalLineColor, x.verticalLineShow ? x.verticalLineStyle : 0);
                            m.setBorder(H, {innerVertical: !0});
                            var W = new a.LineBorder(x.horizontalLineColor, x.horizontalLineShow ? x.horizontalLineStyle : 0);
                            if (m.setBorder(W, {bottom: !0}), c && (d.backColor(x.headerBgColor), d.font(x.headerFontBold + " " + x.headerFontSize + " " + x.headerFontFamily), d.foreColor(x.headerFontColor), u.font(x.headerFontItalic + " " + x.headerFontBold + " " + x.headerFontSize + " " + x.headerFontFamily), u.foreColor(x.fontColor), w && w.backColor(x.headerBgColor)), v.vAlign(a.VerticalAlign.center), v.hAlign(a.HorizontalAlign.center), _ && (_.backColor(x.colSummaryColor), _.font(x.colSummaryFontItalic + " " + x.colSummaryFontBold + " " + x.colSummaryFontSize + " " + x.colSummaryFontFamily), _.foreColor(x.colSummaryFontColor)), k.length > 0) for (var q = 0, V = k.length; q < V; q++) {
                                var U = k[q];
                                U.backColor(x.colSummaryColor)
                            }
                            S && S.length > 0 && S.forEach(function (e) {
                                var t = c ? h : 0;
                                if (c && (A && "top" === L.col_pos && (t += 1), "flipped_y" == e.type)) {
                                    var n = i.getCell(e.row, e.col + t, s);
                                    n.foreColor(x.warnColor)
                                }
                                var n = i.getCell(e.row, e.col + t, o);
                                n.foreColor(x.warnColor)
                            }), i.setRowHeight(0, 1, s), i.setColumnWidth(0, 1, l), y.foreColor(C), y.setBorder(P, {right: !0}), i.setColumnResizable(f - 1, !1, s);
                            for (var G = 0; G < O.length; G++) {
                                var J = O[G];
                                Q.objs.handleAutoWordwrap(J)
                            }
                            Q.objs.resetVScrollBar()
                        },
                        setFontStyles: function (e, t, i) {
                            if ($.isPlainObject(i)) {
                                var n = Q.objs.spreadNS, a = Q.objs.sheet, r = a.getStyle(e, t) || new n.Style,
                                    o = $("<span></span>");
                                return o.css(i), r.font = o.css("font"), a.setStyle(e, t, r, Q.objs.colHeader), r
                            }
                        },
                        resetHScrollBar: function (e) {
                            for (var t = Q.objs.spread, i = Q.objs.sheet, n = i.getColumnCount(), a = 0, r = 0, o = Q.objs.getCanvasWidth(), s = 0; s < n; s++) a += i.getColumnWidth(s);
                            a <= o && !e && Q.objs.resetWidth(a);
                            for (var s = 0; s < n; s++) r += i.getColumnWidth(s);
                            t.options.showHorizontalScrollbar = !(r <= o)
                        },
                        resetVScrollBar: function () {
                            for (var e = Q.objs.sheet, t = Q.objs.colHeader, i = Q.objs.spread, n = 0, a = Q.objs.getCanvasHeight(), r = Q.objs.isFlipped ? Q.objs.xLen + 1 : Q.objs.colHeaderRealCount, o = e.getRowCount(), s = 0; s < o; s++) n += e.getRowHeight(s);
                            for (var l = 0; l < r; l++) n += e.getRowHeight(l, t);
                            i.options.showVerticalScrollbar = !(n <= a), Q.objs.resetTableBackground()
                        },
                        resetTableBackground: function () {
                            var e = Q.objs.spread, t = e.options.showVerticalScrollbar;
                            e.options.backColor = t ? C : x.backgroundOddColor
                        },
                        autoFitColumn: function (e) {
                            var t = Q.objs.sheet, i = e.cell, n = e.sheetType, a = i.col, r = t.getColumnCount(),
                                o = i.value(), s = Q.objs.getTextWidth(o, n), l = t.getColumnWidth(a),
                                c = Q.objs.getCanvasWidth(), d = 0, u = Q.objs.widthOpts, p = Q.objs.getWidthOptsKey(a);
                            if (p in u) {
                                if (a != r - 1) return void t.setColumnWidth(a, u[p], n);
                                delete u[p]
                            }
                            (s += K) > l && (d = s >= c ? c - 2 : s, d > c / 2 && (d = c / 2), t.setColumnWidth(a, d, n))
                        },
                        autoFitLastColumn: function () {
                            for (var e = Q.objs.sheet, t = (Q.objs.viewport, Q.objs.pinIndex), i = e.getColumnCount(), n = (e.getRowCount(), e.getViewportLeftColumn(1)), a = i - 1, r = (e.getColumnWidth(a), Q.objs.getCanvasWidth()), o = 0, s = 0, l = 0, c = Q.objs.widthOpts, d = 0, u = 0; u < t; u++) {
                                var p = Q.objs.getWidthOptsKey(u);
                                p in c ? d += c[p] : o += e.getColumnWidth(u)
                            }
                            for (var f = n; f < a; f++) {
                                var p = Q.objs.getWidthOptsKey(f);
                                p in c ? d += c[p] : o += e.getColumnWidth(f)
                            }
                            o >= r || (s = r - d - o - 1, l = Q.objs.getAutoColumn(s), e.setColumnWidth(a, l))
                        },
                        getAutoColumn: function (e) {
                            for (var t = Q.objs.sheet, i = Q.objs.colHeader, n = Q.objs.viewport, a = t.getRowCount(), r = Q.objs.getCanvasWidth(), o = t.getColumnCount() - 1, s = 0, l = 1; l < Q.objs.colHeaderRealCount; l++) {
                                var c = t.getCell(l, o, i).value(), d = Q.objs.getTextWidth(c, i) + K;
                                d < r && d > s && (s = d)
                            }
                            for (var u = 0; u < a; u++) {
                                var p = t.getCell(u, o), f = Q.objs.getTextWidth(p.value(), n) + 32;
                                f < r && f > s && (s = f)
                            }
                            return s > e ? s : e
                        },
                        resetWidth: function (e) {
                            for (var t = Q.objs.sheet, i = (Q.objs.spread, t.getColumnCount()), n = Q.objs.getCanvasWidth(), a = Q.objs.widthOpts, r = Q.objs.getChangelessOpt(), o = i - r.len, s = o > 0 ? o : 1, l = Math.round((n - e) / s), c = 0; c < i; c++) {
                                if (!(Q.objs.getWidthOptsKey(c) in a)) {
                                    var d = t.getColumnWidth(c);
                                    t.setColumnWidth(c, d + l - 1)
                                }
                            }
                        },
                        getChangelessOpt: function () {
                            for (var e = Q.objs.sheet, t = Q.objs.widthOpts, i = e.getColumnCount(), n = 0, a = 0, r = [], o = 0; o < i; o++) {
                                var s = Q.objs.getWidthOptsKey(o);
                                r.push(s)
                            }
                            for (var l in t) if ($.inArray(l, r) > -1) {
                                var c = t[l];
                                Q.objs.isFlipped ? isNaN(1 * l) || (n += c, a++) : isNaN(1 * l) && (n += c, a++)
                            } else delete t[l];
                            return {width: n, len: a}
                        },
                        getCanvas: function () {
                            var e = Q.objs.sheet, t = e.getParent().getHost(), i = t.id + "vp_vp";
                            return $("#" + i, t)[0]
                        },
                        getCanvasWidth: function () {
                            return $(Q.objs.canvas).width()
                        },
                        getCanvasHeight: function () {
                            return $(Q.objs.canvas).height()
                        },
                        draw: function () {
                            function i() {
                                var e = 0;
                                l.setRowCount(y, r), l.setColumnCount(b + _, r), Q.objs.drawHeader(), Q.objs.drawViewport(), e = l.getRowCount(), Q.objs.headerRowRange = l.getRange(0, -1, y, -1, r), Q.objs.viewportRange = l.getRange(0, -1, e, -1, s), Q.objs.rowHeaderRange = l.getRange(-1, 0, e, 1, o)
                            }

                            function n() {
                                var e = c.tb_statistic, t = 0;
                                l.setRowCount(b + 1, r), l.setColumnCount(v + w, r), Q.objs.drawFlipHeader(), Q.objs.drawFlipViewport(), t = l.getRowCount(), Q.objs.headerRowRange = l.getRange(0, -1, b + 1, -1, r), Q.objs.headerValueRange = l.getRange(0, v, b + 1, w, r), Q.objs.viewportCompareRange = l.getRange(0, 0, _, v, s), Q.objs.viewportRange = l.getRange(0, -1, _, -1, s), Q.objs.rowHeaderRange = l.getRange(-1, 0, t + v, 1, o), e.col && (Q.objs.drawFlipColSummary(e.col_pos || "bottom"), "top" === e.col_pos && (Q.objs.headerValueRange = l.getRange(0, v + 1, b + 1, w, r)))
                            }

                            function a(i) {
                                var n = null, a = 0;
                                if (i && i.length > 0) {
                                    Q.objs.linkDimensionIndexCache = [];
                                    for (var r = 0, o = u.length; r < o; r++) {
                                        var s = u[r];
                                        2 === s.form_dimension_type && a++, angular.forEach(i[0].field_map, function (e) {
                                            var t = e.index;
                                            t += a, e.field === s.fid && Q.objs.linkDimensionIndexCache.push(t)
                                        })
                                    }
                                    t && t.length > 0 && angular.forEach(t, function (e, t) {
                                        e.ctId == c.chart_id && (n = e.pointData)
                                    }), e.pointData = n || {}, e.pointData[0] = e.pointData[0] || [], e.pointData[0][0] = e.pointData[0][0] || new Array(b - a)
                                }
                            }

                            var r = Q.objs.colHeader, o = Q.objs.rowHeader, s = Q.objs.viewport, l = Q.objs.sheet,
                                c = Q.objs.info = Q.objs.info || e.info, d = Q.objs.data = Q.objs.data || e.data,
                                u = Q.objs.xData = d.x, p = Q.objs.yOptData = d.y_optional || [],
                                f = Q.objs.yData = d.y.concat(p), h = Q.objs.isFlipped = c.tb_flip,
                                g = Q.objs.showRowOrder = c.tb_statistic.showRowOrder || !1,
                                m = Q.objs.showColOrder = c.tb_statistic.showColOrder || !1;
                            h && (g = Q.objs.showRowOrder = [g, m], m = Q.objs.showColOrder = g[0], g = Q.objs.showRowOrder = g[1]), g && function () {
                                if (!u[0] || !u[0].rowOrderReady) {
                                    var e = {
                                        data: [],
                                        data_type: "string",
                                        export_tag: 0,
                                        fid: "0",
                                        formula: "0",
                                        name: "",
                                        nick_name: "",
                                        tb_id: "",
                                        uniq_id: "0",
                                        rowOrderReady: !0
                                    }, t = u[0] ? u[0].data.length : f[0].data.length;
                                    if (h) for (var i = 1; i <= t; i++) e.data.push(Q.objs._getLetterOrder(i)); else for (var i = 1; i <= t; i++) e.data.push(i);
                                    c.xAxis.unshift(e), u.unshift(e)
                                }
                            }();
                            var v = Q.objs.colHeaderCount = Q.objs.getColHeaderCount(),
                                y = Q.objs.colHeaderRealCount = v + 1, b = Q.objs.xLen = u.length,
                                _ = Q.objs.yLen = f.length,
                                w = Q.objs.totalDataLen = u[0] && u[0].data.length || d.y[0] && d.y[0].data.length || p[0] && p[0].data.length || 0;
                            Q.objs.isMergeCell = void 0 === c.tb_merge_cell || c.tb_merge_cell, Q.objs.drillLevel = c.drill_level, Q.objs.sortInfo = c.sort, Q.objs.pinIndex = Q.objs.pinIndex || c.tb_pinned_index || 0,
                                Q.objs.isAdvancedSort = c.is_advanced_sort, Q.objs.jumpInfo = e.optional && e.optional.chart_jump_info, Q.objs.linkInfo = e.optional && e.optional.link_info, Q.objs.widthOpts = Q.objs.widthOpts || c.width_opts || {}, Q.objs.isShareChart = $.inArray(e.info.type, [1, 2, 3]) > -1, Q.objs.isFreeDrillSetting = c.free_drill_setting && c.free_drill_setting.enabled, Q.objs.isDrill = c.is_drill, Q.objs.imgLoadInterval = 0, Q.objs.imgLoadIntervalFunc = null, Q.objs.imgLoadTimeoutFunc = null, function () {
                                a(Q.objs.linkInfo), h ? n() : i()
                            }()
                        },
                        checkViewportDraw: function () {
                            Q && Q.objs.sheet.getRowCount() < Q.objs.totalDataLen + Q.objs.totalNum && setTimeout(function () {
                                Q && Q.objs.lazyLoad()
                            })
                        },
                        _drawColOrder: function (e) {
                            var t = Q.objs.showRowOrder ? 1 : 0;
                            if (Q.objs.showColOrder) for (var i = Q.objs.sheet, n = Q.objs.ColumnItemsCellType, a = 0; a <= e.xLen + e.yLen - t; a++) {
                                var r = Q.objs._getLetterOrder(a + 1 - t), o = i.getCell(1, a, e.colHeader);
                                o.value(r);
                                var s = {
                                    value: r,
                                    type: "default",
                                    axis: "y",
                                    cell: o,
                                    sheetType: e.colHeader,
                                    colIndex: a,
                                    allowOverflow: !1
                                };
                                i.setCellType(1, a, new n(s), e.colHeader)
                            }
                        },
                        drawHeader: function (e) {
                            function t(e, t, i) {
                                var n = Q.objs.sortInfo, a = !n.col_index || n.col_index && i === n.col_index;
                                return !n || n && "x" !== n.axis ? k : t && n.uniq_id && n.uniq_id === t && a ? n.type || k : n.fid === e && a ? n.type || k : k
                            }

                            function i(e) {
                                return b > 0 && b == e + 1 ? S : T
                            }

                            function n(n) {
                                for (var a = 0; a < m; a++) {
                                    var r = h[a], o = r.nick_name || r.name, s = r.fid, c = r.uniq_id, d = r.description,
                                        g = t(s, c, a), v = i(a), y = u.getCell(n, a, f), b = {
                                            value: o,
                                            fid: s,
                                            uniqId: c,
                                            axis: "x",
                                            colIndex: a,
                                            type: g,
                                            pinType: v,
                                            desc: d,
                                            cell: y,
                                            sheetType: f,
                                            warnData: r.warn_data || []
                                        };
                                    y.value(o), y.cellPadding(I), y.hAlign(Q.objs.hAlign[x.headerFontAlignment]);
                                    var _ = new p.LineBorder(C, 0);
                                    y.setBorder(_, {left: !0}), Q.objs.autoFitColumn(b), d && y.textDecoration(Q.objs.underlineStyle), l(n, a), Q.objs.customCell.setHeaderCellType(n, a, b, e)
                                }
                            }

                            function r(e, t, i) {
                                var n = t - 1;
                                if (Q.objs.showColOrder && n--, !(t < 0 || i < 0)) {
                                    var r = e.compare_names || [e.nick_name || e.name], o = A;
                                    return 1 == r.length && e.name == a && (r[n] = r[0]), o = r[n], o = o && o.length > 50 ? o.slice(0, 50) + "..." : o
                                }
                            }

                            function o(e, t, i, n) {
                                var a = Q.objs.sortInfo, r = "y" == a.axis,
                                    o = defined(a.uniq_id) && a.uniq_id == n || !defined(a.uniq_id), s = a.fid === i;
                                return a && r && s && o ? defined(a.uniq_id) && 1 == e ? a.type || k : defined(a.col_index) ? a.col_index === t && a.type ? a.type : k : 1 === e ? a.type || k : k : k
                            }

                            function s(t) {
                                y[t] = [], y.from = 0, y.spanCount = 1;
                                for (var n = 0; n < v; n++) {
                                    var a = g[n], s = r(a, t, n), l = m + n, h = a.fid, b = a.uniq_id, _ = a.description,
                                        w = o(t, l, h, b), k = i(l), S = u.getCell(t, l, f), T = {
                                            value: s,
                                            fid: h,
                                            uniqId: b,
                                            axis: "y",
                                            colIndex: l,
                                            type: w,
                                            pinType: k,
                                            desc: _,
                                            cell: S,
                                            warnData: a.warn_data || [],
                                            sheetType: f
                                        };
                                    S.value(s), S.cellPadding(I), S.hAlign(Q.objs.hAlign[x.headerFontAlignment]);
                                    var L = new p.LineBorder(C, 0);
                                    S.setBorder(L, {left: !0}), Q.objs.autoFitColumn(T), _ && 1 === t && S.textDecoration(Q.objs.underlineStyle), h === D ? d(t, l) : c(t, n, s), Q.objs.customCell.setHeaderCellType(t, l, T, e)
                                }
                            }

                            function l(e, t) {
                                var i = Q.objs.showColOrder ? 2 : 1;
                                _ > i && e === w - 1 && u.addSpan(i, t, _, 1, f)
                            }

                            function c(e, t, i) {
                                var n = Q.objs.pinIndex, a = e - 1, o = t - 1, s = g[o], l = r(s, e, o),
                                    c = Q.objs.showColOrder ? 2 : 1;
                                l && e !== _ && l === i && (e === c || $.inArray(t, y[a]) > -1) && t + m != n ? (u.getCell(e, m + y.from, f), u.addSpan(e, m + y.from, 1, ++y.spanCount, f), y[e] = y[e] || [], y[e].push(t)) : (y.spanCount = 1, y.from = t)
                            }

                            function d(e, t) {
                                l(e, t)
                            }

                            var u = Q.objs.sheet, p = Q.objs.spreadNS, f = Q.objs.colHeader,
                                h = (Q.objs.info, Q.objs.data, Q.objs.xData), g = (Q.objs.yOptData, Q.objs.yData),
                                m = Q.objs.xLen, v = Q.objs.yLen, y = {}, b = (Q.objs.ColumnItemsCellType, Q.objs.pinIndex),
                                _ = (Q.objs.spread, Q.objs.colHeaderCount), w = Q.objs.colHeaderRealCount;
                            !function () {
                                u.suspendPaint();
                                var e = Q.objs.showColOrder ? 2 : 1, t = (Q.objs.showColOrder, w);
                                for (e; e < t; e++) n(e), s(e);
                                Q.objs._drawColOrder({
                                    xLen: m,
                                    yLen: v,
                                    colHeader: f
                                }), u.frozenColumnCount(b), u.resumePaint(), u.showColumn(b, p.HorizontalPosition.left)
                            }()
                        },
                        drawViewport: function (t) {
                            function i(t, i) {
                                for (var n = A, a = Q.objs.ColumnItemsCellType, r = 0; r < h; r++) {
                                    var o = s.getCell(i, r, c), l = p[r], u = Q.objs.getAlignment("x", r), f = null,
                                        g = l.data[t];
                                    n = Q.objs.fixXVal(g, d.xAxis[r]), n = l.data[t], n = Q.objs.fixXVal(n, d.xAxis[r]);
                                    var m = Q.objs.getCellDrillData(l, l.data[t], n, d), v = l.data_show_type,
                                        y = l.data_type, b = l.uniq_id;
                                    l.fid;
                                    if (f = {
                                        fid: l.fid,
                                        value: n,
                                        cell: o,
                                        dataType: y,
                                        sheetType: c,
                                        jumpInfo: Q.objs.jumpInfo,
                                        linkInfo: Q.objs.linkInfo,
                                        drillData: m,
                                        showType: "img" == v ? v : A,
                                        orignVal: g,
                                        axis: "x",
                                        uniqId: b
                                    }, o.value(n), o.cellPadding(I), "string" == y) {
                                        "img" == v && E.test(n) && o.value(A);
                                        var _ = $.trim(n.toString());
                                        if ("http://" === _.substr(0, 7) || "https://" === _.substr(0, 8)) {
                                            if (void 0 !== l.link_fid && l.link_data) {
                                                if (f.link_field = l.link_data[t], "date" === l.link_data_type) {
                                                    for (var w = !1, x = 0; x < p.length; x++) if (l.link_fid === p[x].fid) {
                                                        "date" === p[x].data_type && (f.link_field = Q.objs.fixXVal(f.link_field, d.xAxis[x]), w = !0);
                                                        break
                                                    }
                                                    w || (f.link_field = Q.objs.fixXVal(f.link_field, {data_type: "date"}))
                                                }
                                                o.value(f.link_field)
                                            }
                                            o.cellPadding("0 16 0 32")
                                        }
                                    }
                                    o.hAlign(u), l.is_auto_wordwrap && o.wordWrap(!0) && Q.objs.autoWordwrapCellCache.push(o), m && !!m.isDrill && o.textDecoration(Q.objs.underlineStyle), e.pointData[0] && e.pointData[0][0][r] && !R && g === e.pointData[0][0][r].field_value && o.backColor(F), Q.objs.autoFitColumn(f), Q.objs.getWarnHitSpan(l, t, i, o, f), s.setCellType(i, r, new a(f), c)
                                }
                            }

                            function n(e, t) {
                                for (var i, n, a, r = Q.objs.ColumnItemsCellType, o = 0; o < g; o++) {
                                    var l = s.getCell(t, o + h, c), d = Q.objs.getAlignment("y", o), u = f[o],
                                        p = {fid: u.fid, uniqId: u.uniq_id, sheetType: c, cell: l, originValue: u.data[e]};
                                    i = u.aggregator, n = u.formatter, a = Q.objs.fixYVal(u.data[e], n, i), l.value(a), l.hAlign(d), l.cellPadding(I), Q.objs.autoFitColumn(p), Q.objs.getWarnHitSpan(u, e, t, l, p), Q.objs.getCellStyleSpan(u, e, t, l, p), s.setCellType(t, o + h, new r(p), c)
                                }
                            }

                            function a(e) {
                                var t = "bottom" === e ? s.getRowCount() : 0, i = s.getCell(t, 0, c);
                                ++S, s.addRows(t, 1), Q.objs.colSummaryRange = s.getRange(t, -1, 1, -1, c), i.value(o), i.cellPadding(I), "default" === x.colSummaryFontAlignment ? i.hAlign(Q.objs.hAlign["default" == x.fontAlignment ? "left" : x.fontAlignment]) : i.hAlign(Q.objs.hAlign[x.colSummaryFontAlignment]), Q.objs.setColSummarySpan(t);
                                for (var n = 0; n < g; n++) {
                                    var a = f[n], r = a.col_summary, l = a.formatter, d = a.aggregator,
                                        u = s.getCell(t, h + n, c), p = Q.objs.getAlignment("y", n),
                                        m = {fid: a.fid, uniqId: a.uniq_id, sheetType: c, cell: u};
                                    r = a.statistic_method === A ? A : Q.objs.fixYVal(r, l, d), u.value(r), "default" === x.colSummaryFontAlignment ? u.hAlign(p) : u.hAlign(Q.objs.hAlign[x.colSummaryFontAlignment]), u.cellPadding(I), Q.objs.autoFitColumn(m)
                                }
                            }

                            function r(e) {
                                Q.objs.subtotalRanges = Q.objs.subtotalRanges || [];
                                var t = Q.objs.showRowOrder, i = k[e];
                                if (t) {
                                    var n = [i[0][0], ""].concat(i[0].slice(1));
                                    i[0] = n
                                }
                                for (var a = 0, r = i.length; a < r; a++) {
                                    var o = i[a], u = 0, p = 0, g = 0;
                                    ++S, u = 1 * e + S, s.addRows(u, 1);
                                    for (var m = 0, v = o.length; m < v; m++) {
                                        var y = o[m], b = s.getCell(u, m, c);
                                        if (m < h) {
                                            var _ = d.xAxis[m];
                                            y === L ? (p = m, y = l) : y = Q.objs.fixXVal(y, d.xAxis[m]), b.hAlign(Q.objs.hAlign.left)
                                        } else {
                                            var _ = f[m - h], w = _.formatter, x = _.aggregator,
                                                C = Q.objs.getAlignment("y", m - h);
                                            y = $.isArray(y) ? y[0] : y, y = _.statistic_method === A ? A : Q.objs.fixYVal(y, w, x), b.hAlign(C)
                                        }
                                        var T = {fid: _.fid, uniqId: _.uniq_id, sheetType: c, cell: b};
                                        b.value(y), b.cellPadding(I), Q.objs.autoFitColumn(T)
                                    }
                                    s.addSpan(u, p, 1, h - p, c), g = u, Q.objs.subtotalRanges.push(s.getRange(g, -1, 1, -1, c))
                                }
                            }

                            var s = Q.objs.sheet, c = (Q.objs.spreadNS, Q.objs.viewport), d = Q.objs.info, u = Q.objs.data,
                                p = Q.objs.xData, f = (Q.objs.yOptData, Q.objs.yData), h = Q.objs.xLen, g = Q.objs.yLen,
                                m = Q.objs.totalDataLen, v = Q.objs.pageNum, y = Q.objs.perPageNum,
                                b = Q.objs.startIndex = Q.objs.startIndex || 0, _ = v * y,
                                w = Q.objs.endIndex = _ > m ? m : _, C = d.tb_statistic, k = u.subtotal || {},
                                S = Q.objs.totalNum || 0, T = C.col && h > 0;
                            !function () {
                                var e;
                                s.suspendPaint(), s.setRowCount(w + S, c), e = s.getRowCount(), T && (C.col_pos = C.col_pos || "bottom", "top" === C.col_pos && !t && a(C.col_pos));
                                for (var o = b; o < w; o++) {
                                    var l = o + S;
                                    i(o, l), n(o, l), C.col && C.subtotal && !$.isEmptyObject(k) && $.isArray(k[o]) && r(o)
                                }
                                Q.objs.mergeViewport(s.getRowCount(), h), e = s.getRowCount(), T && (C.col_pos = C.col_pos || "bottom", "bottom" === C.col_pos && e === m + S && a(C.col_pos)), Q.objs.totalNum = S, s.resumePaint()
                            }(), Q.objs.checkViewportDraw()
                        },
                        drawFlipHeader: function () {
                            function t(e) {
                                if (Q.objs.showColOrder) {
                                    var t = e;
                                    Q.objs.showRowOrder && (e += 1);
                                    var i = a.getCell(e, 0, r), n = {
                                        value: t,
                                        axis: "x",
                                        cell: i,
                                        sheetType: r,
                                        jumpInfo: Q.objs.jumpInfo,
                                        linkInfo: Q.objs.linkInfo
                                    };
                                    i.value(t), Q.objs.autoFitColumn(n), a.setCellType(e, 0, new d(n), r)
                                }
                            }

                            function i(e, t) {
                                for (var i = Q.objs.showColOrder ? 1 : 0, n = i; n < c; n++) {
                                    var o = t.nick_name || t.name, s = t.description, l = a.getCell(e, n, r), u = {
                                        value: o,
                                        axis: "x",
                                        desc: s,
                                        cell: l,
                                        fid: t.fid,
                                        sheetType: r,
                                        jumpInfo: Q.objs.jumpInfo,
                                        linkInfo: Q.objs.linkInfo,
                                        warnData: t.warn_data
                                    };
                                    l.value(o), Q.objs.autoFitColumn(u), s && l.textDecoration(Q.objs.underlineStyle), Q.objs.mergeFlipXHeader(e, n, r), a.setCellType(e, n, new d(u), r)
                                }
                            }

                            function n(t, i) {
                                for (var n = t - 1, l = i.data, u = Q.objs.getAlignment("x", n), p = o.xAxis[n], f = 0; f < l.length; f++) {
                                    var h = l[f], g = a.getCell(t, c + f, r), m = null, v = p.data_show_type,
                                        y = p.data_type, b = Q.objs.fixXVal(h, p), _ = Q.objs.getCellDrillData(p, h, b, o);
                                    if (m = {
                                        value: b,
                                        cell: g,
                                        dataType: y,
                                        fid: i.fid,
                                        sheetType: r,
                                        jumpInfo: Q.objs.jumpInfo,
                                        linkInfo: Q.objs.linkInfo,
                                        drillData: _,
                                        warnData: i.warn_data,
                                        showType: "img" == v ? v : A,
                                        orignVal: h,
                                        axis: "y"
                                    }, g.value(b), g.hAlign(u), g.cellPadding(I), "string" == y) {
                                        "img" == v && E.test(b) && g.value(A);
                                        var w = $.trim(b.toString());
                                        if ("http://" === w.toString().substr(0, 7) || "https://" === w.toString().substr(0, 8)) {
                                            if (void 0 !== i.link_fid && i.link_data) {
                                                if (m.link_field = i.link_data[f], "date" === i.link_data_type) {
                                                    for (var x = !1, C = 0; C < s.length; C++) if (i.link_fid === s[C].fid) {
                                                        "date" === s[C].data_type && (m.link_field = Q.objs.fixXVal(m.link_field, o.xAxis[C]), x = !0);
                                                        break
                                                    }
                                                    x || (m.link_field = Q.objs.fixXVal(m.link_field, {data_type: "date"}))
                                                }
                                                g.value(m.link_field)
                                            }
                                            g.cellPadding("0 16 0 32")
                                        }
                                    }
                                    _ && !!_.isDrill && g.textDecoration(Q.objs.underlineStyle), e.pointData[0] && e.pointData[0][0][t - 1] && !R && h === e.pointData[0][0][t - 1].field_value && g.backColor(F), Q.objs.autoFitColumn(m), a.setCellType(t, c + f, new d(m), r)
                                }
                            }

                            var a = Q.objs.sheet, r = Q.objs.colHeader, o = Q.objs.info, s = Q.objs.xData, l = Q.objs.xLen,
                                c = (Q.objs.yLen, Q.objs.colHeaderCount),
                                d = (Q.objs.totalDataLen, Q.objs.ColumnItemsCellType);
                            !function () {
                                a.suspendPaint();
                                for (var e = 0; e < l; e++) {
                                    var r = s[e];
                                    t(e + 1), i(e + 1, r), n(e + 1, r)
                                }
                                a.resumePaint()
                            }()
                        },
                        drawFlipViewport: function () {
                            function e(e, t, i) {
                                if (!(t < 0)) {
                                    return i = t > 0 ? A : i, n.tb_statistic && n.tb_statistic.row && c > 1 && 1 === e.length && e[0] === a ? a : e[t] + i
                                }
                            }

                            function t(e, t) {
                                if (!e) return [];
                                var i = (e.compare_names || [e.nick_name || e.name]).slice(0);
                                if (e.fid === D && c > 0) for (var n = 0; n <= c - i.length; n++) i.push(i[0] + t);
                                return i
                            }

                            function i(e) {
                                if (e) return e.unit_adv ? "(" + e.unit_adv + ")" : A
                            }

                            var n = Q.objs.info, r = (Q.objs.data, Q.objs.yLen), o = Q.objs.yData, s = Q.objs.sheet,
                                l = Q.objs.viewport, c = Q.objs.colHeaderCount, d = Q.objs.ColumnItemsCellType;
                            !function () {
                                var a = n.virtual_wordwrap, u = [];
                                a && (u = angular.copy(n.compare_axis), u.splice(a.index, 0, a), Q.objs.compareData = u), s.setRowCount(r, l);
                                for (var p = 0; p < r; p++) {
                                    var f = o[p], h = f.formatter, g = f.aggregator, m = i(f), v = t(f, m),
                                        y = Q.objs.getAlignment("y", p), b = f.description, _ = f.fid;
                                    if (Q.objs.showColOrder) {
                                        var w = s.getCell(p, 0, l), x = p + 1 + Q.objs.xLen;
                                        Q.objs.showRowOrder && (x -= 1);
                                        var C = {
                                            value: x,
                                            axis: "y",
                                            desc: b,
                                            cell: w,
                                            warnData: f.warn_data || [],
                                            sheetType: l,
                                            fid: _
                                        };
                                        w.value(x), Q.objs.autoFitColumn(C), s.setCellType(p, 0, new d(C), l)
                                    }
                                    for (var k = Q.objs.showColOrder ? 1 : 0, S = 0; S < v.length; S++) {
                                        var w = s.getCell(p, S + k, l), x = e(v, S, m), C = {
                                            value: x,
                                            axis: "y",
                                            desc: b,
                                            cell: w,
                                            warnData: f.warn_data || [],
                                            sheetType: l,
                                            fid: _
                                        };
                                        w.value(x), b && 0 === S && w.textDecoration(Q.objs.underlineStyle), _ === D && Q.objs.mergeFlipXHeader(p, S, l), u[S] && u[S].is_auto_wordwrap && w.wordWrap(!0) && Q.objs.autoWordwrapCellCache.push(w), Q.objs.autoFitColumn(C), s.setCellType(p, S, new d(C), l)
                                    }
                                    for (var T = 0; T < f.data.length; T++) {
                                        var w = s.getCell(p, c + T, l), L = f.data[T],
                                            C = {value: L, axis: "y", cell: w, sheetType: l, fid: f.fid};
                                        L = Q.objs.fixYVal(L, h, g), w.value(L), w.hAlign(y), w.cellPadding(I), Q.objs.autoFitColumn(C), Q.objs.getWarnHitSpan(f, T, T, w, C), Q.objs.getCellStyleSpan(f, T, T, w, C)
                                    }
                                }
                                Q.objs.mergeViewport(r, c)
                            }()
                        },
                        drawFlipColSummary: function (e) {
                            function t() {
                                var e = a.getRange(0, f, u, 1, d), t = a.getSpans(e, d);
                                Q.objs.removeSpan(t, d), a.addSpan(0, f, r + 1, 1, d)
                            }

                            function i() {
                                var e = a.getCell(0, f, d);
                                a.addColumns(f, 1), e.value(o), Q.objs.totalDataLen = p + 1, t(), a.setCellType(0, f, new h({
                                    cell: e,
                                    sheetType: d
                                }), d)
                            }

                            function n() {
                                for (var e = 0; e < s; e++) {
                                    var t = l[e], i = t.col_summary, n = t.formatter, r = t.aggregator,
                                        o = a.getCell(e, f, c), d = Q.objs.getAlignment("y", e),
                                        u = {cell: o, sheetType: c};
                                    i = t.statistic_method === A ? A : Q.objs.fixYVal(i, n, r), o.value(i), o.hAlign(d), o.cellPadding(I), Q.objs.autoFitColumn(u)
                                }
                            }

                            var a = Q.objs.sheet, r = Q.objs.xLen, s = Q.objs.yLen, l = Q.objs.yData, c = Q.objs.viewport,
                                d = Q.objs.colHeader, u = Q.objs.colHeaderCount, p = Q.objs.totalDataLen,
                                f = "bottom" === e ? u + p : u, h = Q.objs.ColumnItemsCellType;
                            !function () {
                                i(), n(), Q.objs.flipColSummaryRange = a.getRange(0, f, s, 1, c)
                            }()
                        },
                        mergeFlipXHeader: function (e, t, i) {
                            var n = Q.objs.colHeaderCount, a = Q.objs.sheet;
                            n > (Q.objs.showColOrder ? 2 : 1) && t === n - 1 && (Q.objs.showColOrder ? a.addSpan(e, 1, 1, n - 1, i) : a.addSpan(e, 0, 1, n, i))
                        },
                        getColHeaderCount: function () {
                            var e = 1, t = Q.objs.yData, i = Q.objs.yOptData;
                            return t.length ? t[0].name == a && t[1] && t[1].compare_names ? e = t[1].compare_names.length : t[0].compare_names && (e = t[0].compare_names.length || e) : i.length && i[0].compare_names && (e = i[0].compare_names.length), Q.objs.showColOrder && (e += 1), e
                        },
                        fixXVal: function (e, t) {
                            var i, n = "", a = t.data_type;
                            if (!e) return A;
                            if ("date" === a) {
                                n = t.granularity || "day";
                                var r = t.granularity_name || A, o = t.month_start_day || 0;
                                "hour" !== n && "minute" !== n && "second" !== n || (n = "g_" + n), "week" === n && (o = t.week_start_day_of_week || 1), ["(空白)", "(Blank)"].indexOf(e) > -1 ? i = e : (i = bdpChart.helper.checkGranularity(n, e, r, o), "week" === n && (i += "（" + Highcharts.dateFormat("%b/%e", new Date(e)) + "~" + Highcharts.dateFormat("%b/%e", new Date(e + 5184e5)) + "）"))
                            } else "sub_date" == a ? (n = t.fid.split("_")[1], i = bdpChart.helper.subDateFormat(n, e)) : i = e;
                            return i = i ? i.toString() : A
                        },
                        fixYVal: function (e, t, i) {
                            return e ? bdpChart.helper.dataLabelFormatter(t, e, i) : "--"
                        },
                        setColSummarySpan: function (e) {
                            var t = Q.objs.colSummaryRange;
                            if (t && !$.isEmptyObject(t)) {
                                var i = Q.objs.sheet, n = Q.objs.pinIndex, a = Q.objs.viewport, r = Q.objs.xLen,
                                    o = n > 0 && n < r ? n : r, s = r - o, l = i.getSpans(t, a);
                                Q.objs.removeSpan(l, a), o > 0 && i.addSpan(e, 0, 1, o, a), s > 0 && i.addSpan(e, n, 1, s, a)
                            }
                        },
                        getAlignment: function (e, t) {
                            var i, n, a, r = Q.objs.data, o = r[e][t], s = r.y.length, l = t + 1 - s;
                            return o = "y" === e && l > 0 && !o ? Q.objs.getFixYOptItem(l - 1) : o, i = o.data_type, n = o.alignment_method, a = n || "right", "x" !== e || "string" !== i || n || (a = "left", Q.objs.showRowOrder && 0 === t && (a = "center")), "default" !== x.fontAlignment && (a = x.fontAlignment), Q.objs.hAlign[a]
                        },
                        handleAutoWordwrap: function (e, t) {
                            for (var i = Q.objs.sheet, n = e.row, a = i.getRowHeight(n), r = i.getCellRect(n, e.col), o = 0, s = Q.objs.getCanvasHeight() / 2, l = (r.height, i.getSpans()), c = function (e, t) {
                                for (var i = 0; i < l.length; i++) {
                                    var n = l[i];
                                    if (n.contains(e, t) && n.rowCount > 0) return !0
                                }
                                return !1
                            }, d = t ? 1 : Q.objs.getCellLineCount(e), u = 0; u < i.getColumnCount(); u++) if (!c(n, u)) {
                                var p = i.getCell(n, u), f = i.getCellRect(n, u), h = (f.height, 1);
                                c(n, u) || (h = Q.objs.getCellLineCount(p), d = Math.max(d, h), o = function (e) {
                                    var t = 0;
                                    return t = e > 1 ? 16 * e + 32 : x.headerRowHeight, t > s && (t = s), t
                                }(d))
                            }
                            o !== a && (i.suspendPaint(), i.setRowHeight(n, o), i.resumePaint())
                        },
                        getCellLineCount: function (e) {
                            var t = Q.objs.sheet, i = Q.objs.viewport, n = e.cellPadding(), a = [], r = e.col,
                                o = t.getColumnWidth(r), s = e.value(), l = Q.objs.getTextWidth(s, i), c = 0, d = 0, u = 0;
                            return e.value() && Q.objs.checkIsWordwrap(r) ? (n && (a = n.split(" "), c = 1 * a[3], d = 1 * a[1]), u = o - c - d, u = (u < 0 ? l : u) || l, Math.ceil(l / u)) : 1
                        },
                        getFixYOptItem: function (e) {
                            return Q.objs.data.y_optional[e]
                        },
                        getWarnHitSpan: function (e, t, i, n, a) {
                            var r = i, o = Q.objs.info, s = Q.objs.xLen, l = o.tb_statistic, c = (l.col, Q.objs.isFlipped);
                            if (Q.objs.warnHitSpan = Q.objs.warnHitSpan || [], e.hasOwnProperty("warn_data")) {
                                1 === (e.warn_data || [])[t] && (c ? (a.hitWarn = !0, Q.objs.warnHitSpan.push({
                                    row: n.row,
                                    col: r,
                                    type: "flipped_" + a.axis
                                })) : (a.hitWarn = !0, Q.objs.warnHitSpan.push({
                                    row: r,
                                    col: n.col,
                                    type: "normal_" + a.axis
                                })))
                            }
                        },
                        getCellStyleSpan: function (e, t, i, n, a) {
                            var r = Q.objs.info, o = Q.objs.xLen, s = r.tb_statistic;
                            s.col, Q.objs.isFlipped;
                            if (Q.objs.cellStyleHitSpan = Q.objs.cellStyleHitSpan || [], e.hasOwnProperty("cell_data_style") && !$.isEmptyObject(e.cell_data_style)) a.cellStyles = _.extend({}, e.cell_data_style.style), a.cellStyles.min = +e.cell_data_style.data[1], a.cellStyles.max = +e.cell_data_style.data[0]; else if (e.hasOwnProperty("cell_styles")) {
                                var l = e.cell_styles || [];
                                null == l[t] || $.isEmptyObject(l[t]) || (a.cellStyles = l[t])
                            }
                        },
                        getCellDrillData: function (e, t, i, n) {
                            var a = n.is_drill, r = n.level_fields, o = n.drill_level;
                            null !== t && void 0 !== t || (t = "");
                            var s = {isDrill: !1, drillValue: ""};
                            return a && e.fid === r[o].fid && (s = {isDrill: !0, drillValue: {val: t, text: i}}), s
                        },
                        getTextWidth: function (e, t) {
                            var i = document.createElement("canvas"), n = i.getContext("2d");
                            n.font = t === Q.objs.colHeader ? x.headerFontSize + " " + x.headerFontFamily : x.fontBold + " " + x.fontSize + " " + x.fontFamily;
                            var a = n.measureText(e).width;
                            return i = null, n = null, a
                        },
                        getCellOriginBgColor: function (e, t, i) {
                            var n = Q.objs.isFlipped;
                            return e === Q.objs.colHeader ? x.headerBgColor : n ? "x" === t ? x.headerBgColor : (i + 1) % 2 == 0 ? x.backgroundEvenColor : x.backgroundOddColor : void 0
                        },
                        exportDashConfig: function () {
                            var e = Q.objs.canvas;
                            $(e).hasClass("chart-canvas") || $(e).addClass("chart-canvas")
                        },
                        hideTip: function () {
                            var e = Q.objs.descTipEle;
                            e && (e.style.display = "none")
                        },
                        isFrameSelection: function () {
                            var e, t = Q.objs.sheet, i = t.getSpans(), n = t.getSelections();
                            if (!n || !n.length) return !1;
                            if (e = n[0], 1 == e.colCount && 1 == e.rowCount) return !1;
                            for (var a = 0, r = i.length; a < r; a++) if (angular.equals(i[a], n[0])) return !1;
                            return !0
                        },
                        isSingleSelection: function () {
                            var e = Q.objs.sheet, t = e.getSelections();
                            return !(!t || !t.length || Q.objs.isFrameSelection())
                        },
                        mergeViewport: function (e, t) {
                            var i = Q.objs.sheet, n = Q.objs.viewport, a = {}, r = 1, o = 0, s = Q.objs.isMergeCell,
                                l = Q.objs.yData, c = Q.objs.isFlipped;
                            if (s) {
                                var d = !c && Q.objs.showRowOrder ? 1 : 0;
                                c && Q.objs.showColOrder && (d = 1);
                                for (var u = 0; u < t; u++) for (var p = 0; p < e; p++) {
                                    var f = i.getCell(p, u).text(), h = i.getCell(p - 1, u).text(),
                                        g = h && f === h && (u === d || $.inArray(p, a[u - 1]) > -1);
                                    if (c && l[p].fid === D && (g = !1), g && ["(空白)", "(Blank)"].indexOf(f) >= 0 && ["(空白)", "(Blank)"].indexOf(h) >= 0 && f === h && (g = !1), g) {
                                        var m = i.getCell(o, u);
                                        if (i.addSpan(o, u, ++r, 1, n), a[u] = a[u] || [], a[u].push(p), m.vAlign(Q.objs.vAlign.top), m.cellPadding(Q.objs.fixCellPadding(m, {top: (i.getRowHeight(p) - 16) / 2})), m.backColor() !== F) {
                                            var v = i.getRange(o, u, r, 1, n);
                                            v.backColor(x.mergeBgColor), v.font(x.mergeFontItalic + " " + x.mergeFontBold + " " + x.mergeFontSize + " " + x.mergeFontFamily), v.foreColor(x.mergeFontColor), "default" !== x.mergeFontAlignment && v.hAlign(Q.objs.hAlign[x.mergeFontAlignment])
                                        }
                                    } else r = 1, o = p
                                }
                            }
                        },
                        removeSpan: function (e, t) {
                            for (var i = Q.objs.sheet, n = 0; n < e.length; n++) {
                                var a = e[n];
                                i.removeSpan(a.row, a.col, t)
                            }
                        },
                        removeViewportSpan: function () {
                            var e = Q.objs.sheet, t = Q.objs.viewport, i = e.getSpans();
                            Q.objs.removeSpan(i, t)
                        },
                        removeHeaderSpan: function () {
                            var e = Q.objs.sheet, t = Q.objs.colHeader, i = e.getSpans(Q.objs.headerRowRange, t);
                            Q.objs.removeSpan(i, t)
                        },
                        removeAllSpan: function () {
                            Q.objs.removeHeaderSpan(), Q.objs.removeViewportSpan()
                        },
                        destroy: function () {
                            Q.objs.subtotalRanges = [], Q.objs.warnHitSpan = [], Q.objs.cellStyleHitSpan = [], Q.objs.autoWordwrapCellCache = [], Q.objs.startIndex = 0, Q.objs.pageNum = 1, Q.objs.endIndex = 0, Q.objs.totalNum = 0
                        },
                        redraw: function (t) {
                            var i = Q.objs.spread, n = t.data, a = t.info;
                            i.destroy(), Q.objs.destroy(), Q.objs.data = n, Q.objs.info = a, e.data = n, e.info = a, ne()
                        },
                        customCell: {
                            init: function () {
                                Q.objs.ColumnItemsCellType = this.cellIconType()
                            }, setHeaderCellType: function (e, t, i, n) {
                                var a = Q.objs.sheet, r = Q.objs.colHeader, o = Q.objs.ColumnItemsCellType;
                                $.isPlainObject(n) && t === n.col && e === n.row || ($.isPlainObject(n) && (i.pinType = T), a.setCellType(e, t, new o(i), r))
                            }, cellIconType: function () {
                                function t(e) {
                                    var t = "/static/images/chart-table/";
                                    this.SORT_ASC_ICON_LIGHT = t + "asc-sort-arrow-light.svg", this.SORT_ASC_ICON_DARK = t + "asc-sort-arrow-dark.svg", this.SORT_DESC_ICON_LIGHT = t + "desc-sort-arrow-light.svg", this.SORT_DESC_ICON_DARK = t + "desc-sort-arrow-dark.svg", this.SORT_ICON_DESC_PREFIX = "SORT_DESC_ICON_", this.SORT_ICON_ASC_PREFIX = "SORT_ASC_ICON_", this.PIN_GREY_ICON_LIGHT = t + "pin-gray-light.svg", this.PIN_GREY_ICON_DARK = t + "pin-gray-dark.svg", this.PIN_BLUE_ICON_LIGHT = t + "pinned-blue-light.svg", this.PIN_BLUE_ICON_DARK = t + "pinned-blue-dark.svg", this.PIN_ICON_GREY_PREFIX = "PIN_GREY_ICON_", this.PIN_ICON_BLUE_PREFIX = "PIN_BLUE_ICON_", this.WARN_ICON_LIGHT = t + "warn-icon-light.svg", this.WARN_ICON_DARK = t + "warn-icon-dark.svg", this.HREF_ICON_LIGHT = t + "href-light.svg", this.HREF_ICON_DARK = t + "href-dark.svg", this.ICON_SIZE = 16, this.cell = e.cell, this.canvas = Q.objs.canvas, this.cellInfo = e, this.textWidth = Q.objs.getTextWidth(e.value, e.sheetType), this.sheetType = e.sheetType, this.isColheader = e.sheetType === l, this.sortState = e.type, this.sortStateUC = e.type && e.type.toUpperCase(), this.sortIconSrc = this[this["SORT_ICON_" + this.sortStateUC + "_PREFIX"] + j], this.sortIconSrcForDesc = this[this.SORT_ICON_DESC_PREFIX + j], this.pinState = e.pinType, this.pinStateUC = e.pinType && e.pinType.toUpperCase(), this.pinIconSrc = this[this["PIN_ICON_" + this.pinStateUC + "_PREFIX"] + j], this.warnIconSrc = this["WARN_ICON_" + j], this.hrefIconSrc = this["HREF_ICON_" + j], o.apply(this)
                                }

                                var i = Q.objs.spreadNS, n = Q.objs.sheet, a = Q.objs.underlineStyle, o = i.CellTypes.Base,
                                    l = Q.objs.colHeader, c = (Q.objs.viewport, {});
                                return t.prototype = new o, t.prototype.paint = function (e, t, i, a, r, s, c, d) {
                                    if (e) {
                                        var u = d.row, p = d.col, f = this.textWidth,
                                            h = (Q.objs.xLen, Q.objs.colHeaderCount), g = n.getRange(0, p, h, 1, l),
                                            m = n.getSpans(g, l), v = Q.objs.isFlipped,
                                            y = u === h || m.length && m[0].rowCount === h && r > f + 2 * this.ICON_SIZE + 2 * (this.ICON_SIZE - 4);
                                        Q.objs.showRowOrder && 0 === p && (y = !1);
                                        var b = !0;
                                        Q.objs.showColOrder && 1 === u && (b = !1);
                                        var _ = function (e) {
                                            var t = e.drill_level, i = e.warn, n = e.warn_info;
                                            return 0 == t && 1 === i && !!n.length
                                        }(Q.objs.info) && function (e) {
                                            if (!e) return !1;
                                            for (var t = 0, i = e.length; t < i; t++) if (1 === Number(e[t])) return !0;
                                            return !1
                                        }(this.cellInfo.warnData), w = this._canShowImgHref();
                                        if (this.cellInfo.cellStyles && !this.isColheader || o.prototype.paint.apply(this, arguments), _ && this._paintWarnIcon(e, t, i, a, r, s, c, d), w && (w.icon || w.img) && this._paintImgHrefIcon(e, t, i, a, r, s, c, d), !v) if (this.isColheader) {
                                            if (X) return;
                                            "processMouseMove" === this.state || "processMouseUp" === this.state ? (this.sortState !== k || this.sortIconSrc || (this.sortIconSrc = this[this.SORT_ICON_DESC_PREFIX + j]), this.pinState !== k || this.pinIconSrc || (this.pinIconSrc = this[this.PIN_ICON_GREY_PREFIX + j]), b && this._paintSortIcon(e, t, i, a, r, s, c, d), y && this._paintPinIcon(e, t, i, a, r, s, c, d)) : (this.sortState !== k && this.sortIconSrc && b && this._paintSortIcon(e, t, i, a, r, s, c, d), this.pinIconSrc && this.pinState === S && y && this._paintPinIcon(e, t, i, a, r, s, c, d))
                                        } else this.cellInfo.cellStyles && this._paintCellSpanStyle(e, t, i, a, r, s, c, d)
                                    }
                                }, t.prototype.getHitInfo = function (e, t, i, a, r) {
                                    var o = this.ICON_SIZE, s = a.x + a.width - 4, l = a.y + a.height / 2,
                                        c = a.x + a.width / 2, d = this.textWidth / 2, u = this.cell.cellPadding(),
                                        p = this.cell.hAlign(), f = null, h = null, g = null, m = !1, v = !1;
                                    u && (f = 1 * u.split(" ")[3], h = 1 * u.split(" ")[0], g = 1 * u.split(" ")[1]);
                                    var y = {
                                        x: e,
                                        y: t,
                                        row: r.row,
                                        col: r.col,
                                        cellRect: a,
                                        sheetArea: r.sheetArea,
                                        sheet: r.sheet,
                                        padding: {left: f, top: h}
                                    };
                                    this.cell = n.getCell(y.row, y.col, y.sheetArea);
                                    var b = Q.objs.cellLayer.getTextHeight(this.cell);
                                    if (m = f ? e >= a.x && e <= this.textWidth + a.x : Math.abs(e - c) <= d, v = h ? t >= a.y && t <= b + a.y : Math.abs(t - l) <= b / 2, Math.abs(e - s) <= o && Math.abs(t - l) <= o && a.width + g >= this.textWidth + 2 * o + 2 * (o - 4) && (y.isPinReservedLocation = !0), m && v && (y.isTextReservedLocation = !0), 1 == p) {
                                        var _ = a.x + a.width / 2 - this.textWidth / 2 - 4, w = _ + this.textWidth + 4;
                                        y.isTextReservedLocation = e >= _ && e <= w && v
                                    }
                                    if (2 == p) {
                                        var _ = a.x + a.width - this.textWidth - 4, w = a.x + a.width;
                                        y.isTextReservedLocation = e >= _ && e <= w && v
                                    }
                                    return e <= a.x + a.width && e >= a.x && (y.isReservedLocation = !0), y
                                }, t.prototype.processMouseEnter = function (e) {
                                    if (this.state = "processMouseEnter", !X) {
                                        var t = this._canShowImgHref();
                                        t && (t.img || t.icon) && this._handleImgUrl(e, "in")
                                    }
                                }, t.prototype.processMouseMove = function (t) {
                                    var i = this._canShowImgHref();
                                    this.state = "processMouseMove", X || (this._checkSetPointer(t) ? this._setPointer() : this._setCursorDefault(), this._canShowDesc(t) && this._handleDesc(t), this._canDrillDown() && this._handleDrillDown(t, "in"), i && (i.img || i.icon) && this._handleImgUrl(t, "in"), (!Q.objs.isShareChart || Q.objs.isFreeDrillSetting) && s.default.eventFuns.handleMouseover({
                                        props: this,
                                        objs: Q.objs,
                                        hitInfo: t,
                                        bdpTheme: j,
                                        chart: e,
                                        isEditMode: R,
                                        removeLayers: Q.eventFuns.removeLayers
                                    }))
                                }, t.prototype.processMouseUp = function (e) {
                                    this.state = "processMouseUp";
                                    var t = Q.objs.isFrameSelection(), i = this._canShowImgHref();
                                    if (!(Q.objs.showRowOrder && 0 === e.col || Q.objs.showColOrder && 1 === e.row && e.isReservedLocation) && (this.isColheader || !t) && !X) {
                                        if (this.isColheader && n.clearSelection(), e.isPinReservedLocation && !Q.objs.isFlipped && this.pinState && this.isColheader) return void this._handlePin(e);
                                        if (!Q.objs.isFlipped && this.isColheader) return void this._handleSort();
                                        this._hasLink(e) && this._handleLink(e), this._canJump(e) && this._handleJump(e), this._canDrillDown() && this._handleDrillDown(e, "click"), i && (i.icon || i.img) && this._handleImgUrl(e, "click")
                                    }
                                }, t.prototype.processMouseDown = function (e) {
                                    this.isColheader ? n.clearSelection() : e.isReservedLocation = !1
                                }, t.prototype.processMouseLeave = function (e) {
                                    this.state = "processMouseLeave", this._hideTip(), this._canDrillDown() && this._handleDrillDown(e, "out");
                                    var t = this._canShowImgHref();
                                    t && (t.icon || t.img) && this._handleImgUrl(e, "out")
                                }, t.prototype.getAutoFitWidth = function (e, t, i, n, a, r) {
                                    var o = this.textWidth;
                                    return Q.objs.isFlipped ? o + this.ICON_SIZE : o + K
                                }, t.prototype._paintCellSpanStyle = function (t, i, n, a, r, s, l, c) {
                                    var d = this.cellInfo.cellStyles;
                                    if (this.cellInfo.hitWarn) return l.foreColor = w["default" === e.theme ? "light" : e.theme].warnColor, void o.prototype.paint.apply(this, arguments);
                                    if (3 != d.color_type) return l.foreColor = d.color, l.backColor = d.backgroundColor, void o.prototype.paint.apply(this, arguments);
                                    t.save(), t.fillStyle = l.backColor, t.fillRect(n, a, r, s);
                                    var u = d.bar_color, p = d.axis_pos, f = r / 2;
                                    "auto" === p && (f = d.min >= 0 ? 0 : d.max <= 0 ? r - 1 : r * (Math.abs(d.min) / (d.max - d.min))), t.beginPath();
                                    for (var h = 0; h < 6; h++) t.moveTo(n + f, a + h * (s / 6)), t.lineTo(n + f, a + h * (s / 6) + s / 12);
                                    t.closePath(), t.strokeStyle = u.axis, t.stroke();
                                    var g = this.cellInfo.originValue, m = void 0 === g ? 0 : g, v = 0, y = 0;
                                    if (m < 0) {
                                        v = f - f * (m / ("auto" === p ? d.min : -Math.max(Math.abs(d.min), Math.abs(d.max)))), y = f - .5, t.fillStyle = u.left
                                    }
                                    if (m > 0) {
                                        var b = "auto" === p ? d.max : Math.max(Math.abs(d.min), Math.abs(d.max));
                                        v = f + .5, y = f + m / b * (r - f), t.fillStyle = u.right
                                    }
                                    t.fillRect(n + v, a + 4, y - v, s - 8), t.restore(), l.foreColor = u.text_color, l.backColor = void 0, o.prototype.paint.apply(this, arguments)
                                }, t.prototype._paintSortIcon = function (e, t, i, n, a, r, o, s) {
                                    var c = this, d = this.textWidth, u = s.row, p = s.col, f = s.sheet,
                                        h = f.getTag(u, p, l), g = this.cell.cellPadding(), m = 0, v = 0,
                                        y = this.sortIconSrc;
                                    Q.objs.isAdvancedSort;
                                    if (g ? (m = 1 * g.split(" ")[3], v = m + d + 4) : v = (d + a) / 2, !(a < d + 2 * this.ICON_SIZE - 2 || Q.objs.showRowOrder && 0 === p)) {
                                        var b = this.cell.hAlign();
                                        if (0 == b ? v = d + +g.split(" ")[3] + 4 : 1 == b ? v = (d + a) / 2 : 2 == b && (v = a - d - +g.split(" ")[1] - this.ICON_SIZE - 4), h && h.sortImg && this.sortState === h.sortState) e.drawImage(h.sortImg, i + v, n + (r - this.ICON_SIZE) / 2 + 1, this.ICON_SIZE, this.ICON_SIZE); else {
                                            var _ = function (e) {
                                                f && f.setTag(u, p, $.extend({}, h, e), l)
                                            }, w = c.sortState;
                                            "custom" == w && (y = this.sortIconSrcForDesc), this._initCustomCellIcon({
                                                type: "sort",
                                                src: y,
                                                state: w
                                            }, _)
                                        }
                                    }
                                }, t.prototype._handleSort = function () {
                                    var t = this.cellInfo, i = Q.objs.drillLevel;
                                    switch (this.sortState) {
                                        case k:
                                            this.sortState = "desc";
                                            break;
                                        case"asc":
                                            this.sortState = k;
                                            break;
                                        case"desc":
                                            this.sortState = "asc"
                                    }
                                    var n = this.sortState === k ? A : this.sortState,
                                        a = {axis: t.axis, type: n, fid: t.fid, uniq_id: t.uniqId, col_index: t.colIndex};
                                    if (R) e.emit("saveWithOpt", i, {sort: a, is_advanced_sort: 0}); else {
                                        var o;
                                        o = B ? M.parents(".J-chart-fullscreen-wrap-export") : M.parents(".gridster-item");
                                        var s = o.data("form-dimension-opt"),
                                            l = {sort: (0, r.default)(a), is_advanced_sort: 0};
                                        s && (l = $.extend(l, {form_dimension_opt: s})), e.requestData(l).then(function (t) {
                                            t && (0 == t.status ? (Q.objs.redraw(t.result), e.emit("data-loaded")) : errorHandle(t))
                                        }), e.emit("dashboard_click_sort")
                                    }
                                }, t.prototype._paintPinIcon = function (e, t, i, a, r, o, s, c) {
                                    var d = this, u = this.textWidth, p = c.row, f = c.col, h = n.getTag(p, f, l);
                                    if (!(r < u + 2 * this.ICON_SIZE + 2 * (this.ICON_SIZE - 4))) if (h && h.pinImg && this.pinState === h.pinState) e.drawImage(h.pinImg, i + r - this.ICON_SIZE - 4, a + (o - this.ICON_SIZE) / 2 + 1, this.ICON_SIZE, this.ICON_SIZE); else {
                                        var g = new Image;
                                        g.onload = function () {
                                            n.setTag(p, f, $.extend({}, h, {
                                                pinImg: g,
                                                pinState: d.pinState
                                            }), l), n.repaint()
                                        }, g.src = this.pinIconSrc
                                    }
                                }, t.prototype._paintWarnIcon = function (e, t, i, a, r, o, s, l) {
                                    var c = this.textWidth, d = l.row, u = l.col, p = this.sheetType,
                                        f = this.cell.cellPadding(), h = 0, g = 0, m = 0, v = 0, y = Q.objs.isFlipped,
                                        b = this.warnIconSrc;
                                    if (y && "x" != this.cellInfo.axis) return !1;
                                    if (f && !y) {
                                        var _ = 1 * f.split(" ")[3];
                                        g = r / 2 - c / 2 - this.ICON_SIZE - 4 - _, h = _
                                    } else h = 0, g = r / 2 - c / 2 - this.ICON_SIZE - 4;
                                    if (f && y) {
                                        var w = 1 * f.split(" ")[0];
                                        v = w ? w + 1 : (o - this.ICON_SIZE) / 2 + 1, m = v
                                    } else m = (o - this.ICON_SIZE) / 2 + 1;
                                    if (!(r < c + 2 * (h - g + this.ICON_SIZE))) {
                                        var x = n.getTag(d, u, p);
                                        if (x && x.warnImg) e.drawImage(x.warnImg, i + h + g, a + m, this.ICON_SIZE, this.ICON_SIZE); else {
                                            var C = function (e) {
                                                n && n.setTag(d, u, $.extend({}, x, e), p)
                                            };
                                            this._initCustomCellIcon({type: "warn", src: b}, C)
                                        }
                                    }
                                }, t.prototype._paintImgHrefIcon = function (e, t, i, a, r, o, s, l) {
                                    var c = l.row, d = l.col, u = this.sheetType, p = this.cellInfo, f = Q.objs.isFlipped,
                                        h = "", g = 0, m = 0, v = 0, y = 0, b = this.cell.cellPadding(), _ = 0;
                                    b && !f && (_ = 1 * b.split(" ")[0]);
                                    var w = "href";
                                    if (p && "img" == p.showType && E.test(p.value)) {
                                        var x = document.createElement("img");
                                        x.src = p.value;
                                        var C = parseInt(x.width) * (20 / parseInt(x.height));
                                        h = x.src, g = i + 16, m = a + (o - 20) / 2 + 1, v = C, y = 20, x = null, w = "img"
                                    } else p.showType && "img" == p.showType || (h = this.hrefIconSrc, g = i + this.ICON_SIZE, m = _ ? a + _ + 1 : a + (o - this.ICON_SIZE) / 2 + 1, v = this.ICON_SIZE, y = this.ICON_SIZE);
                                    var k = n.getTag(c, d, u);
                                    if (k && k.hrefImg) e.drawImage(k.hrefImg, g, m, v, y); else {
                                        var S = function (e) {
                                            n && n.setTag(c, d, $.extend({}, k, e), u)
                                        };
                                        this._initCustomCellIcon({type: w, src: h}, S)
                                    }
                                }, t.prototype._initCustomCellIcon = function (e, t) {
                                    function i() {
                                        clearInterval(Q.objs.imgLoadIntervalFunc), Q.objs.imgLoadInterval && (Q.objs.imgLoadIntervalFunc = setInterval(function () {
                                            Q.objs.imgLoadInterval = 0, clearInterval(Q.objs.imgLoadIntervalFunc), n.repaint()
                                        }, 1e3)), 1 == Q.objs.imgLoadInterval && (Q.objs.imgLoadTimeoutFunc = setTimeout(function () {
                                            Q && clearTimeout(Q.objs.imgLoadTimeoutFunc), n.repaint()
                                        }, 3e3))
                                    }

                                    if (!e) return !1;
                                    var a = e || {}, r = a.type, o = a.src, s = a.state;
                                    if ("warn" == r && (f ? t({warnImg: f}) : (f = new Image, f.onload = function () {
                                        t({warnImg: f}), n.repaint()
                                    }, f.src = o)), "href" == r && (h ? t({hrefImg: h}) : (h = new Image, h.onload = function () {
                                        t({hrefImg: h}), n.repaint()
                                    }, h.src = o)), "img" == r) if (g = g || {}, o && g[o]) t({hrefImg: g[o]}); else {
                                        var l = new Image;
                                        l.src = o, l.onload = function () {
                                            t({hrefImg: l}), g[o] = l, Q.objs.imgLoadInterval++, i()
                                        }, l.onerror = function () {
                                            Q.objs.imgLoadInterval++
                                        }
                                    }
                                    if ("sort" == r) {
                                        var c = void 0;
                                        c ? t({sortImg: c, sortState: s}) : (c = new Image, c.onload = function () {
                                            t({sortImg: c, sortState: s}), n.repaint()
                                        }, c.src = o)
                                    }
                                }, t.prototype._handlePin = function (t) {
                                    var i = (this.cellInfo, Q.objs.drillLevel), n = (Q.objs.spread, t.row), a = t.col,
                                        r = 0, o = {row: n, col: a};
                                    switch (this.pinState) {
                                        case T:
                                            this.pinState = S, r = a + 1, Q.objs.pinIndex = r;
                                            break;
                                        case S:
                                            this.pinState = T, Q.objs.pinIndex = 0
                                    }
                                    this.pinStateUC = this.pinState.toUpperCase(), this.pinIconSrc = this[this["PIN_ICON_" + this.pinStateUC + "_PREFIX"] + j], R && e.emit("saveWithOpt", i, {tb_pinned_index: r}, {not_need_redraw: !0}), e.emit("pin", {exceptPinObj: o})
                                }, t.prototype._handleDesc = function (e) {
                                    e.isTextReservedLocation ? (this.cell.textDecoration("none"), this._showTip(e)) : (this.cell.textDecoration(a), this._hideTip(e))
                                }, t.prototype._handleJump = function (t) {
                                    var i = this.cellInfo.value;
                                    this._setPointer(), e.emit("jumpToOtherDash", i, e)
                                }, t.prototype._handleLink = function (t) {
                                    var i = this.cellInfo, a = i.orignVal, r = this.cell, o = t.row, l = t.col,
                                        d = s.default.getAddDimensionCount(Q.objs.xData, l), u = Q.objs.isFlipped,
                                        p = (u ? o - 1 : l) - d, f = r.backColor(),
                                        h = (c[p], Q.objs.getCellOriginBgColor(this.sheetType, i.axis, o));
                                    if (u) for (var g = 0, m = n.getColumnCount(); g < m; g++) {
                                        var v = n.getCell(o, g, this.sheetType);
                                        v.backColor() === F && v.backColor(h)
                                    } else for (var y = 0, b = n.getRowCount(); y < b; y++) {
                                        var _ = n.getCell(y, p), w = Q.objs.getCellOriginBgColor(this.sheetType, i.axis, y);
                                        _.backColor() === F && _.backColor(w)
                                    }
                                    f === F ? (r.backColor(h), delete e.pointData[0][0][p]) : (r.backColor(F), e.pointData[0][0][p] = {
                                        field: i.fid,
                                        field_value: a,
                                        index: p
                                    }, Q.objs.bdpLogger.link()), c[p] = this.cell, e.emit("refreshLinkedCharts", a, e)
                                }, t.prototype._handleDrillDown = function (t, i) {
                                    var n = {x: t.cellRect.x, y: t.cellRect.y}, r = t.x + 16 - n.x, o = t.y - n.y,
                                        s = !!t.isTextReservedLocation, l = this.cellInfo;
                                    if ("img" == l.showType && E.test(l.value) && (s = o >= 10 && o <= 30 && r >= -2 && r <= 20), s && ["in", "click"].indexOf(i) >= 0) {
                                        if (this.cell.textDecoration("none"), this._setPointer(), "click" == i) {
                                            this.toggleCellImgLayer(t, "hide")
                                            ;var c = this.cellInfo.drillData.drillValue, d = {val: c.val, text: c.text};
                                            e.emit("drilldown", d, e)
                                        }
                                    } else this.cell.textDecoration(a), this._setCursorDefault()
                                }, t.prototype._handleImgUrl = function (e, t) {
                                    if (!Q || !Q.objs) return !1;
                                    var i = {x: e.cellRect.x, y: e.cellRect.y}, n = e.x + 16 - i.x, a = e.y - i.y,
                                        r = Q.objs.isFlipped, o = this.cell.cellPadding() || " 0 0 0 0", s = 0, l = 0;
                                    o && !r && (s = 1 * o.split(" ")[0], a = e.y - i.y + s, s && (l = s - 8));
                                    var c = !1, d = this.cellInfo;
                                    c = "img" == d.showType && E.test(d.value) ? a >= 10 + l && a <= 30 + l && n >= -2 && n <= 20 : "click" !== t || (s ? a >= 9 + l && a <= 25 + l && n >= 0 && n <= 14 : a > (e.cellRect.height - this.ICON_SIZE) / 2 && a < (e.cellRect.height + this.ICON_SIZE) / 2 && n >= 0 && n <= 14), "out" == t && (c = !1), c ? (this._setPointer(), "img" !== d.showType ? "click" === t ? window.open(this.cellInfo.value, "target") : "in" === t && this.cellInfo.orignVal && this.cellInfo.link_field && this.toggleCellTip(!0, e, this.cellInfo.orignVal) : this.toggleCellImgLayer(e, "show")) : (this._setCursorDefault(), "img" !== d.showType ? this.toggleCellTip(!1) : this.toggleCellImgLayer(e, "hide"))
                                }, t.prototype.toggleCellTip = function (e, t, i) {
                                    if (Q) {
                                        var n = $(this.canvas).offset(), a = null;
                                        if (!e) return a = Q.objs.tipElement, a && (a.style.display = "none"), !1;
                                        if (!Q.objs.tipElement) {
                                            var r = document.createElement("div");
                                            r.id = "table-tip-ele", document.body.insertBefore(r, null), Q.objs.tipElement = r
                                        }
                                        a = Q.objs.tipElement, a.innerText = i;
                                        var o = a.style;
                                        o.position = "absolute", o.color = "LIGHT" === j ? "rgba(0, 0, 0, .6)" : "rgba(255, 255, 255, .5)", o.background = "LIGHT" === j ? "#FFFFFF" : "#2B2E44", o.lineHeight = "20px", o.wordWrap = "break-word", o.wordBreak = "break-all", o.zIndex = 1e4, o.padding = "2px 8px", o.boxShadow = "0px 0px 4px 0px rgba(0, 0, 0, 0.2)", o.maxWidth = t.cellRect.width + "px", o.borderRadius = "2px", o.top = n.top + t.cellRect.y + t.cellRect.height - 3 + "px", o.left = n.left + t.cellRect.x + "px", o.display = "block"
                                    }
                                }, t.prototype.toggleCellImgLayer = function (e, t) {
                                    if (Q) {
                                        var i = $(this.canvas).offset(), n = null;
                                        if ("hide" == t) return n = Q.objs.imgPreviewEle, n && (n.style.display = "none"), !1;
                                        if (!Q.objs.imgPreviewEle) {
                                            var a = document.createElement("img");
                                            a.id = "img-preview-ele", document.body.insertBefore(a, null), Q.objs.imgPreviewEle = a
                                        }
                                        n = Q.objs.imgPreviewEle, n.src = this.cellInfo.value;
                                        var r = n.style;
                                        r.position = "absolute", r.zIndex = 1e4, r.maxWidth = "100px";
                                        var o = $(n).outerWidth(), s = $(n).height();
                                        r.top = i.top + e.cellRect.y + e.cellRect.height / 2 - s / 2 + "px", r.left = i.left + e.cellRect.x + o / 2 + "px", n.style.display = "block"
                                    }
                                }, t.prototype._showTip = function (e) {
                                    var t = $(this.canvas).offset();
                                    if (!Q.objs.descTipEle) {
                                        var i = document.createElement("span");
                                        i.className = "tbTipBox", document.body.insertBefore(i, null), Q.objs.descTipEle = i
                                    }
                                    var n = Q.objs.descTipEle, a = n.style;
                                    n.textContent = this.cellInfo.desc;
                                    var r = $(n).outerWidth(), o = $(n).height(),
                                        s = e.padding.left ? (this.textWidth - r) / 2 : (e.cellRect.width - r) / 2,
                                        l = e.padding.top ? this.ICON_SIZE / 2 - o : e.cellRect.height / 2 - o;
                                    a.top = t.top + e.cellRect.y + l - 2 * this.ICON_SIZE - 4 + "px", a.left = t.left + e.cellRect.x + s + "px", n.style.display = "block"
                                }, t.prototype._hideTip = Q.objs.hideTip, t.prototype._checkSetPointer = function (e) {
                                    return (!Q.objs.showRowOrder || 0 !== e.col) && ((!Q.objs.showColOrder || 1 !== e.row) && (!!this._canShowDesc(e) || (!!this._hasLink(e) || (!!this._canJump(e) || (!(!this.isColheader || Q.objs.isFlipped) || void 0)))))
                                }, t.prototype._canShowDesc = function (e) {
                                    var t = this.cellInfo, i = t.desc, n = Q.objs.isFlipped;
                                    if (i && (n || "y" !== this.cellInfo.axis || 1 === e.row) && (!n || "y" !== this.cellInfo.axis || 0 == e.col)) return !0
                                }, t.prototype._canJump = function (e) {
                                    var t = this.cellInfo, i = t.jumpInfo, n = e.col, a = e.row, r = Q.objs.isFlipped,
                                        o = r ? a - 1 : n;
                                    if (!R && i && i.fid === t.fid && i.f_index == o) return !0
                                }, t.prototype._hasLink = function (e) {
                                    var t = this.cellInfo, i = e.col, n = e.row, a = Q.objs.isFlipped, r = a ? n - 1 : i;
                                    if (a) {
                                        if (!this.isColheader) return !1;
                                        if ("x" === t.axis) return
                                    }
                                    if (!R && !Q.objs.isDrill && $.inArray(r, Q.objs.linkDimensionIndexCache) > -1) return !0
                                }, t.prototype._canDrillDown = function (e) {
                                    var t = this.cellInfo;
                                    if (t.drillData && t.drillData.isDrill) return !0
                                }, t.prototype._canShowImgHref = function (e) {
                                    var t = this.cellInfo, i = t.value || "", n = $.trim(i.toString());
                                    return !i || "http://" !== n.substr(0, 7) && "https://" !== n.substr(0, 8) || "string" != t.dataType ? {
                                        icon: !1,
                                        img: !1
                                    } : "img" == t.showType && E.test(i) ? {icon: !1, img: !0} : {icon: !0, img: !1}
                                }, t.prototype._canShowToggle = function () {
                                }, t.prototype._setPointer = function () {
                                    this.canvas.style.cursor = "pointer"
                                }, t.prototype._setCursorDefault = function () {
                                    this.canvas.style.cursor = "default"
                                }, t
                            }
                        },
                        lazyLoad: function () {
                            var e = Q.objs.sheet, t = e.getRowCount(), i = e.getViewportBottomRow(1), n = Q.objs.endIndex,
                                a = Q.objs.totalDataLen, r = Q.objs.totalNum, o = Q.objs.viewport;
                            t >= a + r || Q.objs.isFlipped || i === t - 1 && (e.suspendPaint(), Q.objs.removeViewportSpan(), e.addRows(t, 30), Q.objs.pageNum = ++Q.objs.pageNum, Q.objs.startIndex = n, Q.objs.drawViewport(!0), Q.objs.viewportRange = e.getRange(0, -1, e.getRowCount(), -1, o), Q.objs.rightSpaceLock = !1, Q.objs.autoWordwrapCellCache = [], Q.objs.setStyles({
                                lazyLoad: !0,
                                range: e.getRange(t, -1, 30 + r + 1, -1, o)
                            }), e.resumePaint(), Q.objs.autoFitLastColumn(), Q.objs.resetHScrollBar(!0))
                        },
                        checkIsWordwrap: function (e) {
                            var t = Q.objs.xLen, i = Q.objs.xData, n = Q.objs.isFlipped,
                                a = (Q.objs.yData, Q.objs.compareData || []), r = null;
                            if (n) {
                                if (e > Q.objs.colHeaderCount - 1) return;
                                r = a[e] || {}
                            } else {
                                if (e > t - 1) return;
                                r = i[e]
                            }
                            return r.is_auto_wordwrap
                        },
                        fixedFid: function (e) {
                            return e.slice(0, 5) + "_" + e.slice(5)
                        },
                        getWidthOptsKey: function (e) {
                            if (Q.objs.isFlipped) return e;
                            var t = Q.objs.xLen, i = Q.objs.xData, n = Q.objs.yData, a = e > t - 1 ? n[e - t] : i[e],
                                r = Q.objs.fixedFid(a.fid || A), o = a.uniq_id || A, s = A;
                            return a.compare_names && (s = a.compare_names.join("_")), r + o + s
                        },
                        handleRightSpaceOptimize: function () {
                            if (!Q.objs.rightSpaceLock) {
                                for (var e = Q.objs.sheet, t = (Q.objs.spreadNS, e.getColumnCount()), i = 0, n = Q.objs.getCanvasWidth(), a = e.getViewportLeftColumn(1), r = t - 1; r >= a; r--) {
                                    i += e.getColumnWidth(r)
                                }
                                i < n && e.setColumnWidth(t - 1, n - i + e.getColumnWidth(t - 1) - 1)
                            }
                        },
                        fixCellPadding: function (e, t) {
                            var i = e.cellPadding() || "0 0 0 0", n = i.split(" ");
                            return t.top && (n[0] = t.top), t.left && (n[3] = t.left), n.join(" ")
                        },
                        fixViewportPos: function () {
                            var e = Q.objs.sheet, t = e.getViewportTopRow(1),
                                i = Q.objs.isFlipped ? Q.objs.colHeaderCount : Q.objs.xLen;
                            e.suspendPaint();
                            for (var n = 0; n < i; n++) {
                                var a = e.getRange(t, n, 1, 1), r = e.getSpans(a), o = r[0];
                                if (0 !== r.length) {
                                    var s = o.row, l = e.getCell(s, n), c = function (t, i) {
                                            for (var n = 0, a = t; a < i; a++) n += e.getRowHeight(a);
                                            return n
                                        }(s, t), d = e.getRowHeight(t), u = c + (d - 16) / 2,
                                        p = Q.objs.fixCellPadding(l, {top: u});
                                    l.cellPadding(p)
                                }
                            }
                            e.resumePaint()
                        },
                        fixColHeaderPos: function () {
                            if (!Q.objs.isFlipped) {
                                var e = Q.objs.sheet, t = Q.objs.colHeader, i = e.getViewportLeftColumn(1), n = Q.objs.xLen,
                                    a = Q.objs.yLen, r = Q.objs.colHeaderRealCount - 1;
                                if (i = i < n ? n : i, !(a > 0 && Q.objs.yData[i - n].fid === D)) {
                                    e.suspendPaint();
                                    for (var o = 1; o < r; o++) {
                                        var s = e.getRange(o, i, 1, 1, t), l = e.getSpans(s, t), c = l[0];
                                        if (0 !== l.length) {
                                            var d = c.col, u = e.getCell(o, d, t), p = Q.objs.getTextWidth(u.value(), t),
                                                f = function (t, i) {
                                                    for (var n = 0, a = t; a < i; a++) n += e.getColumnWidth(a);
                                                    return n
                                                }(d, i), h = e.getColumnWidth(i), g = f + (h - p) / 2,
                                                m = Q.objs.fixCellPadding(u, {left: g});
                                            u.cellPadding(m)
                                        }
                                    }
                                    e.resumePaint()
                                }
                            }
                        },
                        getCornerTheme: function (e) {
                            var t = ".gc-corner-triangle-normal {border-style:solid !important;border-left-color: $borderTbHeader !important;border-right-color: $borderTbHeader !important;border-bottom-color: $borderTbHeader !important;border-top-color: $borderTbHeader !important;background-color: $borderTbHeader !important;}";
                            return t = t.replace(/\$borderTbHeader/g, e)
                        },
                        getScrollbarTheme: function () {
                            var t = e.$elem.attr("id");
                            return "\n                        #" + t + " .gc-scroll-container,\n                        #" + t + " .gc-scrollbar-wrapper{\n                            background: " + x.scrollbarWrapperColor + " !important;;\n                         }\n                         #" + t + " .gc-scrollbar-wrapper:hover{\n                            background: " + x.scrollbarWrapperHoverColor + " !important;\n                        }\n                        #" + t + " .gc-scroll-bar {\n                            background: " + x.scrollbarColor + " !important;\n                        }\n                        #" + t + " .gc-scroll-bar:hover{\n                            background: " + x.scrollbarHoverColor + " !important;\n                        }\n                        #" + t + " .gc-scroll-arrow:hover{\n                            background: " + x.scrollbarArrowHoverColor + " !important;\n                        }\n                    "
                        },
                        initCustomTheme: function () {
                            var t = e.$elem.attr("id"), i = t + "_table_style";
                            $("#" + i).length > 0 && $("#" + i).remove();
                            var n = x.borderLineShow ? x.borderLineColor : "transparent", a = Q.objs.getCornerTheme(n),
                                r = Q.objs.getScrollbarTheme(), o = a + r, s = document.createElement("style");
                            s.type = "text/css", s.id = i, s.styleSheet ? s.styleSheet.cssText = o : s.innerHTML = o, document.getElementsByTagName("head")[0].appendChild(s)
                        },
                        getHitTest: function (e, t) {
                            var i = Q.objs.sheet, n = $(Q.objs.canvas).offset(), a = e - n.left, r = t - n.top;
                            return i.hitTest(a, r)
                        },
                        getCellInSelections: function (e, t, i) {
                            for (var n, a = e.length, r = 0; r < a; r++) if (n = e[r], n.contains(t, i)) return n;
                            return null
                        },
                        handleThemeStyleClass: function (e, t) {
                            return e.removeClass("chart-theme-dark chart-theme-default").addClass("chart-theme-" + t.theme), e.removeClass("display-theme-dark display-theme-light").addClass("display-theme-" + ("default" == t.theme ? "light" : "dark")), e.removeClass("display-device-pc display-device-projector display-device-tv").addClass("display-device-" + t.displayDevice), e
                        },
                        getCellPos: function (e, t, i) {
                            for (var n = Q.objs.sheet, a = Q.objs.colHeader, r = $(Q.objs.canvas).offset(), o = 0, s = 0, l = 0, c = Q.objs.isFlipped ? Q.objs.xLen : Q.objs.colHeaderCount, d = Q.objs.pinIndex, u = n.getViewportTopRow(1), p = d > 0 && d > t ? 0 : n.getViewportLeftColumn(1), f = 1, h = c + 1; f < h; f++) l += n.getRowHeight(f, a);
                            for (var g = u; g < e; g++) o += n.getRowHeight(g);
                            for (var m = p; m < t; m++) s += n.getColumnWidth(m);
                            for (var v = 0; v < d; v++) t + 1 > d && (s += n.getColumnWidth(v));
                            return {left: r.left + s, top: r.top + l + o}
                        },
                        _getLetterOrder: function (e) {
                            if (0 === e) return "";
                            for (var t = ""; e > 0;) {
                                var i = e % 26;
                                0 === i && (i = 26), t = String.fromCharCode(i + 64) + t, e = parseInt((e - i) / 26)
                            }
                            return t
                        },
                        menu: {
                            init: function () {
                                bdp.loadjs({
                                    callback: Q.objs.menu.destroy,
                                    src: "//m1.bdp.cn/static/js/lib/clipboard.min_3e5e0fa.js"
                                })
                            }, createMenu: function () {
                                if (Q && !X) {
                                    var e = Q.objs.menu,
                                        t = '<div class="J-menu-wrap cope-menutext-layer" style="display:none;z-index:10000;position:absolute;"><ul class="dropdown-wrap create-op-list"><li><a href="javascript:;" class="dropdown-item J_table_copy" data-action="copy" style="display: block;text-align:center;">' + p + '</a></li><li><a href="javascript:;" class="dropdown-item J_table_autoFit" data-action="autoFitWidth" style="display: none;text-align:center;">' + v + "</a></li></ul></div>";
                                    e.destroy(), $("body").append(t);
                                    var i = e.getMenuDom();
                                    e.getCopyDom();
                                    i.off("click.contextmenu").on("click.contextmenu", function (e) {
                                        Q.eventFuns.handleContextmenuItem(e)
                                    })
                                }
                            }, remove: function () {
                                $(".J-menu-wrap").remove()
                            }, show: function (t) {
                                var i = Q.objs.sheet, n = Q.objs.menu, a = Q.objs.widthOpts, r = null,
                                    o = i.getSelections(), s = o[0];
                                n.createMenu(t), Q.objs.handleThemeStyleClass($(".J-menu-wrap"), e), n.getMenuDom().show(), r = n.getAutoFitWidthDom();
                                for (var l = s.col; l < s.col + s.colCount; l++) {
                                    var c = Q.objs.getWidthOptsKey(l);
                                    if (R && c in a) {
                                        r.css({display: "block"});
                                        break
                                    }
                                }
                            }, getMenuDom: function () {
                                return $(".J-menu-wrap")
                            }, getCopyDom: function () {
                                return $(".J_table_copy")
                            }, getAutoFitWidthDom: function () {
                                return $(".J_table_autoFit")
                            }, parseCopyHtml: function (e) {
                                for (var t = $(e).find("tr"), i = A, n = 0, a = t.length; n < a; n++) {
                                    for (var r = $(t[n]).find("td"), o = 0, s = r.length; o < s; o++) {
                                        i = i + $(r[o]).html() + "\t"
                                    }
                                    i += "\r\n"
                                }
                                return i
                            }, destroy: function () {
                                if (Q) {
                                    var e = Q.objs.menu, t = e.getCopyDom();
                                    e.remove(), t.off("click.contextmenu")
                                }
                            }
                        },
                        cellLayer: {
                            hook: null, create: function (e) {
                                if (Q) {
                                    var t = Q.objs.cellLayer,
                                        i = '<div class="cell-dom-layer ' + t.hook + '" style="display:none;z-index:10000;position:absolute;"><div class="dropdown-wrap create-op-list J-cell-layer-inner"><div class="J-cell-layer-text">' + bdp.utils.encodeHTML(e || "") + "</div></div></div>";
                                    $("body").append(i);
                                    Q.objs.cellLayer.getLayerDom().off("click.cellDomLayer").on("click.cellDomLayer", function (e) {
                                        return e.preventDefault(), !1
                                    })
                                }
                            }, show: function (t, i) {
                                var n = Q.objs.sheet, a = t.value(), r = Q.objs.cellLayer, o = null, s = null;
                                return r.hook = i, r.remove(), r.create(a), o = r.getLayerDom(), Q.objs.handleThemeStyleClass($("." + i), e), s = "J-cell-layer" === i, s && n.clearSelection(), o.show(), r.setSize(t, s), r
                            }, destroy: function () {
                                var e = $(".cell-dom-layer");
                                e.off("click.cellDomLayer"), e.remove()
                            }, remove: function () {
                                Q.objs.cellLayer.getLayerDom().remove()
                            }, getLayerDom: function () {
                                return $("." + Q.objs.cellLayer.hook)
                            }, getLayerInnerDom: function () {
                                return Q.objs.cellLayer.getLayerDom().find(".J-cell-layer-inner")
                            }, getLayerTextDom: function () {
                                return Q.objs.cellLayer.getLayerDom().find(".J-cell-layer-text")
                            }, setPos: function (e) {
                                var t = (Q.objs.sheet, e.row), i = e.col, n = Q.objs.cellLayer, a = Q.objs.getCellPos(t, i),
                                    r = n.getLayerDom(), o = a.left + 1, s = a.top + 1;
                                r.css({left: o, top: s})
                            }, setSize: function (e, t) {
                                var i = Q.objs.sheet, n = e.col, a = e.row, r = i.getCellRect(e.row, e.col),
                                    e = i.getCell(a, n), o = r.width, s = r.height, l = Q.objs.cellLayer.getLayerInnerDom(),
                                    c = Q.objs.cellLayer.getLayerTextDom(), d = e.cellPadding() || "0 0 0 0",
                                    u = e.hAlign(), p = 0, f = 0, h = 0, g = 0, m = 0, v = 0,
                                    y = Q.objs.getCellPos(a, n).top - $(Q.objs.canvas).offset().top,
                                    b = Q.objs.getCellPos(a, n).left - $(Q.objs.canvas).offset().left, _ = 1,
                                    w = {0: "left", 1: "center", 2: "right"}, C = w[u],
                                    k = $.inArray("bold", e.font().split(" ")) > -1 ? "bold" : "normal";
                                if (o -= 1, s -= 1, d = d.split(" ").map(function (e, t) {
                                    return e + "px"
                                }).join(" "), !e.text() && !e.value()) return !1;
                                if (l.css({
                                    width: o,
                                    padding: d,
                                    minHeight: s,
                                    textAlign: C,
                                    fontSize: x.fontSize,
                                    fontFamily: x.fontFamily,
                                    color: e.foreColor(),
                                    wordWrap: "break-word",
                                    overflowY: "auto",
                                    overflowX: "hidden",
                                    fontWeight: k,
                                    backgroundColor: e.backColor()
                                }), h = l.height(), g = c.height(), d = d.split(" ").map(function (e, t) {
                                    if (0 == t) {
                                        if ("0px" == e) {
                                            var i = h - g;
                                            i = i ? i < 16 ? 16 : i : 16, e = Math.round(i / 2)
                                        }
                                        e += "px"
                                    }
                                    return 2 == t && "0px" == e && (e = "8px"), e
                                }).join(" "), p = Q.objs.getCanvasHeight(), f = Q.objs.getCanvasWidth(), m = l.outerHeight(), v = l.outerWidth(), y + m > p) {
                                    var S = p - y - 1;
                                    l.css({height: S, minHeight: S})
                                }
                                if (b + v > f) {
                                    var T = f - b - 1;
                                    l.css({width: T, minWidth: T})
                                }
                                l.css({padding: d}), t && (_ = m > s || v > o ? 0 : 1, Q.objs.bdpLogger.cellDetail(_))
                            }, getTextHeight: function (e) {
                                var t = "J-cell-getStyle";
                                $(t).length > 0 && $(t).remove();
                                var i = Q.objs.cellLayer.show(e, t);
                                return i.getLayerDom().css({top: -1e4, left: -1e4}), i.getLayerTextDom().height()
                            }
                        },
                        guide: {
                            widthChangeGuide: function () {
                                var e = Q.objs.sheet, t = e.getColumnCount(),
                                    i = "zh" === N ? "您可以拖动或双击表头分隔线调整列宽" : "Now you can drag and drop or double-click here to adjust the column width",
                                    n = e.getColumnWidth(0), a = null, r = null, o = 0, s = 0, l = 0,
                                    c = "zh" === N ? "我知道了" : "I Know",
                                    d = P ? "//m1.bdp.cn/static/theme/light/icons/table_column_guide_7d50f8e.png" : "//m1.bdp.cn/static/theme/dark/icons/table_column_guide_9f67d12.png",
                                    u = '<div style="z-index: 100001; position: absolute;" class="J-widthchange-icon-wrap"><img width="84px" height="84px" class="J-width-change-icon" src="' + d + '"></div>',
                                    p = '<div class="common-dot-guide display-inline-block dotguide J-widthchange-tip-wrap"><div class="dot-guide-tip J-dot-guide-tips"><p class="dot-guide-tip-text">' + i + '</p><div class="tip-operate clearfix"><div class="know-and-close J-dot-i-kone">' + c + "</div></div></div></div>",
                                    f = null, h = null, g = ($(".gridster"), $(".dash-wrapper")),
                                    m = M.parents(".gridster-item"), v = 0, y = 0, b = null;
                                n >= Q.objs.getCanvasWidth() || window.__width_change_guide__ || R || B || H || W || q || window.bdpGuide && 0 == window.bdpGuide.getApi("__width_change_guide__") || t < 2 || 0 != g.length && (v = m.position(".gridster").top, y = m.position(".gridster").left, g.scrollTop(v), g.scrollLeft(y), b = Q.objs.guide.mask(), f = $(u), l = $(Q.objs.canvas).offset(), a = e.getCellRect(1, 1, -1), r = e.getCellRect(0, 1), Q.objs.isFlipped ? (o = l.left + r.x - 42, s = l.top + a.y - 42 + 21) : (o = l.left + a.x - 42, s = l.top + a.y - 42 + 21), f.css({
                                    left: o,
                                    top: s
                                }), $("body").append(f), h = $(p), h.css({
                                    position: "absolute",
                                    left: o,
                                    top: s
                                }), $("body").append(h), h.find(".J-dot-i-kone").off("click.widthChangeGuideBtn").on("click.widthChangeGuideBtn", Q.objs.guide.handlewidthChangeTipBtn), b.off("click.widthChangeGuideBtn").on("click.widthChangeGuideBtn", Q.objs.guide.handlewidthChangeTipBtn), f.off("click.widthChangeGuideBtn").on("click.widthChangeGuideBtn", Q.objs.guide.handlewidthChangeTipBtn), window.__width_change_guide__ = !0)
                            }, handlewidthChangeTipBtn: function () {
                                window.bdpGuide.setApi("__width_change_guide__", 0), Q.objs.guide.widthChangeGuideDestroy()
                            }, mask: function () {
                                var e = document.createElement("div");
                                return $(e).addClass("J-table-mask guide-bg-see"), $(e).css({
                                    position: "absolute",
                                    left: 0,
                                    top: 0,
                                    width: "100%",
                                    height: "100%",
                                    opacity: .72,
                                    zIndex: 1e4
                                }), $("body").append(e), $(e)
                            }, widthChangeGuideDestroy: function () {
                                var e = $(".J-widthchange-tip-wrap"), t = $(".J-table-mask"),
                                    i = $(".J-widthchange-icon-wrap");
                                e.find("J-dot-i-kone").off("click.widthChangeGuideBtn"), i.off("click.widthChangeGuideBtn"), t.off("click.widthChangeGuideBtn"), i.remove(), t.remove(), e.remove()
                            }, wordWrapGuide: function () {
                                if ("zh" === N && R && (!window.bdpGuide || 0 != window.bdpGuide.getApi("__wordwrap_guide__"))) {
                                    var e = null, t = null, i = Q.objs.isFlipped, n = Q.objs.colHeaderCount,
                                        a = P ? "//m1.bdp.cn/static/theme/light/icons/table-guide-wordwrap_62382a2.png" : "//m1.bdp.cn/static/theme/dark/icons/table-guide-wordwrap_af79de8.png",
                                        r = '<div style="z-index: 100001; position: absolute;" class="J-wordWrapGuide-icon-wrap"><img width="178px" height="192px" class="J-wordwrap-icon" src="' + a + '"></div>',
                                        o = null, s = null, l = null;
                                    if (i) {
                                        if (n <= 1) return;
                                        t = $("#dragCompare_axis").find(".drag-item").first().find(".ui-select")
                                    } else t = $("#dragX").find(".drag-item").first().find(".ui-select");
                                    if (t[0]) {
                                        o = t.offset();
                                        var c = window.bdpGuideVeil.creatVeil({element: t, mask: !0});
                                        e = $(r), e.css({
                                            left: o.left - 24,
                                            top: o.top + t.height() - 12
                                        }), $("body").append(e), s = c.creatDotGuide({
                                            element: e,
                                            tipsText: "您可以在下拉菜单中设置自动换行",
                                            callback: Q.objs.guide.handleWordWrapGuide,
                                            isfixed: !0,
                                            custom: {left: o.left, top: o.top + t.height() + 152, parent: "body"},
                                            className: "J-wordwrap-dotlayer"
                                        }), s.css({zIndex: 100002}), l = s.find(".J-circle-group"), l.css({
                                            top: -46,
                                            left: 9,
                                            zIndex: 100002
                                        }), c.maskDom.off("click.wordWrapGuide").on("click.wordWrapGuide", Q.objs.guide.handleWordWrapGuide)
                                    }
                                }
                            }, handleWordWrapGuide: function () {
                                window.bdpGuide.setApi("__wordwrap_guide__", 0), Q.objs.guide.wordWrapGuideDestroy()
                            }, wordWrapGuideDestroy: function () {
                                $(".J-wordWrapGuide-icon-wrap").remove(), $(".J-mask-wrap").remove(), $(".J-wordwrap-dotlayer").remove()
                            }, cellLayerGuide: function (e) {
                                var t = "zh" === N ? "您可以双击单元格查看完整信息" : "Now you can double-click the cell to view full details";
                                if (!(B || H || W || q || window.bdpGuide && 0 == window.bdpGuide.getApi("__cell_layer_guide__"))) {
                                    for (var i = Q.objs.sheet, n = i.getViewportTopRow(1), a = (i.getCell(n, e), i.getCellRect(n, e)), r = $(Q.objs.canvas).offset(), o = i.getRowHeight(n), s = 0, l = Q.objs.isFlipped ? Q.objs.xLen : Q.objs.colHeaderCount, c = null, d = 1, u = l + 1; d < u; d++) s += i.getRowHeight(d, Q.objs.colHeader);
                                    c = window.bdpGuideVeil.creatVeil({
                                        mask: !0,
                                        custom: {
                                            left: r.left + a.x,
                                            top: r.top + s,
                                            right: r.left + a.x + a.width,
                                            bottom: r.top + s + o
                                        },
                                        className: "table-guide-mask"
                                    }), c.creatDotGuide({
                                        tipsText: t,
                                        callback: Q.objs.guide.handleCellLayerGuide,
                                        isfixed: !0,
                                        custom: {
                                            left: r.left + a.x + a.width - 10,
                                            top: r.top + s - (o + 15) / 2,
                                            parent: "body"
                                        },
                                        direction: "right",
                                        className: "J-cellLayer-dotlayer"
                                    }), c.maskDom.off("click.cellLayerGuide").on("click.cellLayerGuide", Q.objs.guide.handleCellLayerGuide)
                                }
                            }, handleCellLayerGuide: function () {
                                window.bdpGuide.setApi("__cell_layer_guide__", 0), Q.objs.guide.cellLayerDestroy()
                            }, cellLayerDestroy: function () {
                                $(".J-cellLayer-dotlayer").remove(), $(".J-mask-wrap").remove()
                            }, destroy: function () {
                                Q.objs.guide.widthChangeGuideDestroy(), Q.objs.guide.wordWrapGuideDestroy(), Q.objs.guide.cellLayerDestroy()
                            }
                        },
                        bdpLogger: {
                            adjustWidth: function () {
                                BDPLogger.log("AdjustWidth", {
                                    category: "user_interact",
                                    action: "adjust_width",
                                    opt_label: (0, r.default)({ct_id: Q.objs.info.chart_id})
                                })
                            }, restoreAutoWidth: function (e) {
                                BDPLogger.log("RestoreAutoWidth", {
                                    category: "user_interact",
                                    action: "restore_auto_width",
                                    opt_label: (0, r.default)({
                                        ct_id: Q.objs.info.chart_id,
                                        col_num: e.colCount,
                                        row_num: e.rowCount
                                    })
                                })
                            }, cellDetail: function (e) {
                                BDPLogger.log("CellDetail", {
                                    category: "user_interact",
                                    action: "cell_detail",
                                    opt_label: (0, r.default)({ct_id: Q.objs.info.chart_id, is_complete_display: e})
                                })
                            }, cellCopy: function (e) {
                                BDPLogger.log("CellCopy", {
                                    category: "user_interact",
                                    action: "table_copy",
                                    opt_label: (0, r.default)({
                                        ct_id: Q.objs.info.chart_id,
                                        col_num: e.colCount,
                                        row_num: e.rowCount
                                    })
                                })
                            }, link: function () {
                                var i = Q.objs.info.chart_id, n = _.compact(e.pointData[0][0]).length;
                                (0, d.default)({mainChartContainer: t, linkType: "chart_click", ctId: i, totalCount: n})
                            }
                        }
                    }, eventFuns: {
                        flip: function () {
                            if (Q.objs.totalDataLen > 100) return alert(c), !1;
                            e.emit("saveWithOpt", Q.objs.drillLevel, {tb_flip: !Q.objs.isFlipped})
                        }, pin: function (e) {
                            var t = Q.objs.spread, i = Q.objs.sheet, n = e.exceptPinObj, a = Q.objs.info,
                                r = a.tb_statistic || {}, o = r.col_pos;
                            if (i.clearSelection(), t.suspendPaint(), Q.objs.removeHeaderSpan(), Q.objs.drawHeader(n), t.resumePaint(), r && o) {
                                var s = "bottom" === o ? i.getRowCount() - 1 : 0;
                                Q.objs.setColSummarySpan(s)
                            }
                        }, handleTopRowChange: function () {
                            Q.objs.sheet;
                            Q.eventFuns.removeLayers(), Q.objs.lazyLoad(), Q.objs.fixViewportPos()
                        }, handleLeftColumnChanged: function () {
                            Q.eventFuns.removeLayers(), Q.objs.autoFitLastColumn(), Q.objs.hideTip(), s.default.layer.destroy()
                        }, handleDocument: function (e, t) {
                            if (Q) return Q.eventFuns.removeLayers(e), Q.eventFuns.handleSelection(e, t), Q.objs.hideTip(), s.default.layer.destroy(t.e), e.preventDefault(), !1
                        }, mousemoveDocument: function (e, t) {
                            if (Q) return s.default.eventFuns.handleMousemove({
                                e: t.e,
                                objs: Q.objs,
                                isEditMode: R,
                                removeLayers: Q.eventFuns.removeLayers
                            }), e.preventDefault(), !1
                        }, handleSelection: function (e, t) {
                            var i = $(t.e.target), n = Q.objs.sheet, a = i.parents(".chart-table"),
                                r = (a.attr("data-ctid"), n.getSelections());
                            r && r.length > 0 && (i.is("select") || i.parents(".J-menu-wrap").length > 0 || 0 === a.length && n.clearSelection())
                        }, removeLayers: function (e) {
                            Q && (Q.objs.menu.destroy(), Q.objs.cellLayer.destroy(), e && "dashboard-scroll-start" === e.type && s.default.layer.destroy())
                        }, handleContextmenu: function (e) {
                            var t = Q.objs.menu, i = Q.objs.sheet, n = Q.objs.getHitTest(e.pageX, e.pageY),
                                a = n.hitTestType, r = n.row, o = n.col, l = i.getSelections(), c = Q.objs.viewport,
                                d = null;
                            a === c && (null === Q.objs.getCellInSelections(l, r, o) && (i.clearSelection(), i.endEdit(), i.setActiveCell(r, o)), void 0 !== r && void 0 !== o && (t.show(), d = t.getMenuDom(), d.data("sheetArea", a), d.css({
                                left: e.pageX,
                                top: e.pageY
                            }), d.focus(), Q.eventFuns.preventMenuDefault(e), s.default.layer.destroy()))
                        }, preventMenuDefault: function (e) {
                            var t = Q.objs.sheet.getParent().getHost(), i = t.id + "vp_vp";
                            if ($(e.target).attr("id") === i) return event.preventDefault(), !1
                        }, handleContextmenuItem: function (t) {
                            if (Q) {
                                var i = Q.objs.spread, n = Q.objs.sheet, a = $(t.target), r = a.data("action"),
                                    o = n.getSelections(), s = o[0], l = Q.objs.menu;
                                switch (r) {
                                    case"copy":
                                        i.commandManager().execute({
                                            cmd: "copy",
                                            sheetName: n.name(),
                                            callback: function (e) {
                                                l.getCopyDom().attr("aria-label", e.copyText), new Clipboard(".J_table_copy", {
                                                    text: function (e) {
                                                        return l.remove(), e.getAttribute("aria-label")
                                                    }
                                                }), Q.objs.bdpLogger.cellCopy(s)
                                            }
                                        });
                                        break;
                                    case"autoFitWidth":
                                        for (var c = Q.objs.widthOpts, d = s.col; d < s.col + s.colCount; d++) {
                                            var u = Q.objs.getWidthOptsKey(d);
                                            u in c && (delete c[u], e.emit("saveWithOpt", Q.objs.drillLevel, {
                                                width_opts: c,
                                                need_replace: !0
                                            }))
                                        }
                                        Q.objs.bdpLogger.restoreAutoWidth(s)
                                }
                            }
                        }, handleCellClick: function (e, t) {
                            var i = Q.objs.sheet, n = t.sheetArea, a = t.row, r = t.col, o = i.getSelections(),
                                s = Q.objs.viewport;
                            i.getCell(a, r, n);
                            n === s && (X || Q.objs.isSingleSelection() && (Q.objs.getCellInSelections(o, a, r) || i.clearSelection()))
                        }, handleColWidthChange: function (t, i) {
                            var n = i.colList[0], a = Q.objs.sheet, r = Q.objs.widthOpts, o = a.getRowCount(),
                                s = a.getColumnWidth(n), l = Q.objs.getWidthOptsKey(n), c = Q.objs.checkIsWordwrap(n),
                                d = Q.objs.getCanvasWidth();
                            s > d - 2 && (s = d - 2, a.setColumnWidth(n, s)), r[l] = s, Q.objs.autoFitLastColumn();
                            for (var u = 0; u < o; u++) {
                                var p = a.getCell(u, n);
                                c && Q.objs.handleAutoWordwrap(p, !0)
                            }
                            R && e.emit("saveWithOpt", Q.objs.drillLevel, {
                                width_opts: r,
                                need_replace: !0
                            }, {not_need_redraw: !0}), Q.objs.resetHScrollBar(), Q.objs.resetVScrollBar(), Q.objs.guide.cellLayerGuide(n), Q.objs.bdpLogger.adjustWidth(), Q.objs.isFlipped || Q.objs.isShareChart || G || !(!V || V && U) || !(!J || J && Y) || W || q || M.trigger("hasChangeColWidth")
                        }, handleCellDoubleClick: function (e, t) {
                            var i = Q.objs.sheet, n = t.col, a = t.row, r = t.sheetArea, o = i.getCell(a, n, r);
                            o.value(), Q.objs.cellLayer;
                            r !== Q.objs.colHeader && void 0 !== a && void 0 !== n && (X || (Q.objs.fixViewportPos(), Q.objs.autoFitLastColumn(), Q.objs.cellLayer.show(o, "J-cell-layer").setPos(o)))
                        }, saveDashTableWidth: function () {
                            if (Q) {
                                var t = Q.objs.info, i = t.chart_id;
                                $.get("/api/chart/meta", {ct_id: i}).then(function (n) {
                                    if (0 == +n.status) {
                                        var a = n.result;
                                        return a.level[Q.objs.drillLevel].width_opts = Q.objs.widthOpts, $.post("/api/chart/modify", {
                                            ct_id: i,
                                            _t: +new Date,
                                            data: (0, r.default)({
                                                meta: a,
                                                tb_id: t.tb_id,
                                                name: t.title,
                                                description: t.description
                                            })
                                        })
                                    }
                                    e.emit("saveFail")
                                }).then(function (t) {
                                    0 == +t.status ? e.emit("saveSuccess") : e.emit("saveFail")
                                })
                            }
                        }
                    }
                }, Z = function () {
                    if (Q && Q.objs) {
                        Q.objs.spread && Q.objs.spread.unbindAll(), Q.objs.menu && Q.objs.menu.destroy(), Q.objs.cellLayer && Q.objs.cellLayer.destroy(), Q.objs.guide && Q.objs.guide.destroy(), s.default.layer.destroy();
                        for (var t in Q.objs) {
                            var i = Q.objs[t];
                            i && i.destroy && i.destroy()
                        }
                        Q = null
                    }
                    $(".table-flip").off(), M.off("contextmenu"), e.off("pin"), e.off("clearSelection")
                }, ee = function () {
                    var t = e.data;
                    if (0 === (t.x[0] && t.x[0].data.length || t.y[0] && t.y[0].data.length || t.y_optional[0] && t.y_optional[0].data.length || 0)) {
                        var i = bdpChart.language || "zh", n = "zh" === i ? "当前图表无数据" : "No data to display";
                        return M.append('<div class="chart-error"><p class="no-data" style="font-size: 12px; font-weight: bold; color: #60606a">' + n + "</p></div>"), !0
                    }
                }, te = function () {
                    if (!Q) return !1;
                    var t = Q.objs.spread = new GC.Spread.Sheets.Workbook(M[0], {sheetCount: 1}),
                        i = Q.objs.spreadNS = GC.Spread.Sheets,
                        n = (Q.objs.lineStyle = i.LineStyle.thin, Q.objs.sheetArea = i.SheetArea),
                        a = Q.objs.events = i.Events;
                    Q.objs.sheet = t.getActiveSheet(), Q.objs.colHeader = n.colHeader, Q.objs.viewport = n.viewport, Q.objs.rowHeader = n.rowHeader, Q.objs.corner = n.corner, Q.objs.hAlign = i.HorizontalAlign, Q.objs.vAlign = i.VerticalAlign, Q.objs.underlineStyle = i.TextDecorationType.underline, Q.objs.TopRowChangedEvt = a.TopRowChanged, Q.objs.LeftColumnChangedEvt = a.LeftColumnChanged, Q.objs.cellClickEvt = a.CellClick, Q.objs.ColumnWidthChangedEvt = a.ColumnWidthChanged, Q.objs.CellDoubleClickEvt = a.CellDoubleClick, e.pointData = {}, Q.objs.canvas = Q.objs.getCanvas(), Q.objs.rightSpaceLock = !1, ae.sheet = Q.objs.sheet, Q.objs.init()
                }, ie = function () {
                    if (!Q) return !1;
                    var t = Q.objs.sheet;
                    $(".table-flip").off().on("click", Q.eventFuns.flip), M.on("contextmenu", Q.eventFuns.handleContextmenu), M.on("saveDashTableWidth", Q.eventFuns.saveDashTableWidth), $(document).on("clickTable", Q.eventFuns.handleDocument), $(document).on("mousemoveTable", Q.eventFuns.mousemoveDocument), $(document).on("dashboardAutoplay", Q.eventFuns.removeLayers), e.off("chartFullScreen").on("chartFullScreen", function (e) {
                        Q && Q.objs.redraw(e)
                    }), e.off("pin").on("pin", Q.eventFuns.pin), $("body").off("dashboard-scroll-start.tableCanvas").on("dashboard-scroll-start.tableCanvas", Q.eventFuns.removeLayers), t.bind(Q.objs.TopRowChangedEvt, Q.eventFuns.handleTopRowChange), t.bind(Q.objs.LeftColumnChangedEvt, Q.eventFuns.handleLeftColumnChanged), t.bind(Q.objs.cellClickEvt, Q.eventFuns.handleCellClick), t.bind(Q.objs.ColumnWidthChangedEvt, Q.eventFuns.handleColWidthChange), t.bind(Q.objs.CellDoubleClickEvt, Q.eventFuns.handleCellDoubleClick)
                }, ne = function () {
                    ee() || (te(), ie())
                };
            !function (e) {
                var t = i(85)();
                i.e(15).then(function (n) {
                    var a = [];
                    return a.push(i(917)), t ? t(function () {
                        e(a)
                    }) : e(a)
                }.bind(null, i)).catch(i.oe)
            }(function (e) {
                window.GC = e[0], ne()
            }), Q.objs.initStyles();
            var ae = {};
            return ae.destroy = Z, ae
        }
    }()
}, function (e, t, i) {
    "use strict";
    !function (e) {
        var t, i = Dalaba.pack, n = Dalaba.defined, a = Dalaba.extend, r = Dalaba.isNumber, o = Dalaba.isString,
            s = Dalaba.Numeric.quartile, l = Dalaba.Numeric.valueOf, c = function (e, t, i) {
                var n = [], a = [], c = [];
                i = i || "horizontal";
                var d, u, p, f = !0;
                t = t === !0;
                for (var d = 0; d < e.length; d++) {
                    var h, g, m = e[d], v = m[2].length, y = null, b = m[2].map(function (e) {
                        return e.value
                    });
                    for (f = b.length > 4, y = s(b, t), null !== y && (h = y[0], g = y[4], y.push(m[0], m[1])), n.push(y), c.push(m[0]), u = 0; u < v; u++) {
                        var _ = b[u], w = m[2][u].name;
                        o(_) && (_ = l(_)), r(_, !0) && (f ? (_ < h || _ > g) && (p = [d, _, w, m[1]], "vertical" === i && p.reverse(), a.push(p)) : (p = [d, _, w, m[1]], a.push(p)))
                    }
                }
                return {
                    isQuar: e.some(function (e) {
                        return e[2].length > 4
                    }), inner: n, outer: a, indexs: c
                }
            };
        e.setBoxPlotSpecialOption = function (r) {
            function o(t, i) {
                var n, a = i.data_type, r = "";
                if ("date" === a) {
                    r = i.granularity || "day";
                    var o = i.granularity_name || "", s = i.month_start_day || 0;
                    "hour" !== r && "minute" !== r && "second" !== r || (r = "g_" + r), "week" === r && (s = i.week_start_day_of_week || 1, "text-left"), ["(空白)", "(Blank)"].indexOf(t) > -1 ? n = t : (n = e.helper.checkGranularity(r, t, o, s), "week" === r && (n += "（" + Highcharts.dateFormat("%b/%e", new Date(t)) + "~" + Highcharts.dateFormat("%b/%e", new Date(t + 5184e5)) + "）"))
                } else "sub_date" == a ? (r = i.fid.split("_")[1], n = e.helper.subDateFormat(r, t)) : n = t;
                return n = n ? n.toString() : ""
            }

            var s = r.$elem, l = (r.mode, r.theme, r.info), d = r.options, u = r.data,
                p = (r.info.yAxis[0].formatter, e.helper), f = "dark" === r.theme ? 1 : 2;
            if (r.chartMapInstance && r.chartMapInstance.destroy(), e.language || (e.language = "zh"), 0 === r.options.yAxis.length) {
                var h = "zh" === e.language ? "当前图表无数据" : "No data to display";
                return void s.html('<div class="chart-error"><p style="font-weight:bold;">' + h + "</p></div>").addClass("bdp-chart-loaded bdp-chart-error")
            }
            var g = [], m = [];
            u.x[0].data.length > 0 && (u.x[0].data.forEach(function (e) {
                g.push(o(e, u.x[0])), m.push(e)
            }), u.x[0].data = g, ["sub_date", "date"].indexOf(u.x[0].data_type) > -1 && (u.x[0].data_type = "string"));
            for (var v = [], y = 0; y < u.y.length; y++) {
                var b = u.y[y].data || [], _ = u.x[y].data || [];
                "[object Array]" !== {}.toString.call(b) && (b = [b]);
                for (var w = 0; w < b.length; w++) {
                    var x = b[w].y_data || [], C = b[w].classify_axis_data || [], k = [];
                    x.forEach(function (e, t) {
                        k.push({value: e, name: C[t]})
                    }), v.push([_.length ? _[w] : "", m.length ? m[w] : "", k])
                }
            }
            var S = ("fullscreen" === r.mode && localStorage.getItem("fs_data_label"), d.yAxis[0]), T = d.xAxis,
                D = ((l.style || {}).labels || {}).style || {}, L = (l.style || {}).axis || {},
                A = (l.style || {}).boxPlot || {}, E = (l.style || {}).scatter || {};
            void 0 === E.disabled && (E.disabled = !0);
            var I = c(v, !E.disabled);
            I.isQuar || (setCurrentTipPosition("dataOver"), $("#dataOver").show().find("span").text("部分维度对应数据过少，以散点形式显示数据"), setTimeout(function () {
                $("#dataOver").hide()
            }, 3e3));
            var F = a(r.options.yAxis[0], {
                plotLines: (S.plotLines || []).map(function (e) {
                    return n(e.label) && (l.seriesType ? (e.label.verticalAlign = "middle", e.label.align = "left", e.label.y = 0) : (e.label.align = "center", e.label.verticalAlign = "bottom", e.label.x = 0)), e
                }),
                tickPositions: l.yaxis_positions,
                gridLineWidth: S.gridLineWidth,
                tickWidth: 0,
                lineWidth: 0,
                enabled: S.enabled,
                labels: {
                    maxWidth: 120,
                    style: {color: "#666666", fontSize: "inherit", fontFamily: "inherit", colorAdaption: !0}
                },
                title: {
                    rotation: 270,
                    style: {color: "#666666", fontSize: "inherit", fontFamily: "inherit", colorAdaption: !0}
                }
            }), O = a(r.options.xAxis, {
                type: "categories",
                categories: I.indexs,
                plotLines: T.plotLines,
                tickPositions: l.xaxis_positions,
                gridLineWidth: 0,
                tickWidth: 0,
                labels: {
                    style: {color: "#666666", fontSize: "inherit", fontFamily: "inherit", colorAdaption: !0},
                    maxWidth: 120,
                    enabled: !0
                },
                title: {
                    style: {color: "#666666", fontSize: "inherit", fontFamily: "inherit", colorAdaption: !0},
                    enabled: !1
                },
                crosshair: {margin: "25%"}
            });
            n(L = L.yAxis) && (n(L.title) && (F.title = a({
                rotation: 270,
                enabled: L.title.enabled,
                text: S.title.text
            }, {style: L.title})), n(L.labels) && (F.labels = a({
                maxWidth: 120,
                enabled: L.labels.enabled
            }, {style: L.labels})), n(L.lineColor) && (F.lineColor = L.lineColor), n(L.lineStyle) && (F.lineDashStyle = L.lineStyle), F.lineWidth = L.enabled ? L.lineWidth : 0), L = (l.style || {}).axis || {}, n(L = L.xAxis) && (n(L.labels) && (O.labels = a({
                maxWidth: 120,
                enabled: L.labels.enabled
            }, {style: L.labels})), n(L.lineColor) && (O.lineColor = L.lineColor), n(L.lineStyle) && (O.lineDashStyle = L.lineStyle), O.lineWidth = L.enabled ? L.lineWidth : 0), l.yaxis_max_disabled || (F.max = l.yaxis_max), l.yaxis_min_disabled || (F.min = l.yaxis_min);
            var M = [{type: "scatter", color: E.color || "#2979FF"}];
            if (I.isQuar && (M.push($.extend({type: "boxplot"}, r.options.series[0])), $.extend(M[1], {
                color: 2 === f ? "rgba(10,18,32,0.64)" : "rgba(255,255,255,0.7)",
                series_color: 2 === f ? "rgba(10,18,32,0.64)" : "rgba(255,255,255,0.7)"
            })), !l.seriesType) {
                var N = O;
                O = F, O.type = "linear", O.categories = void 0, O.title && (O.title.rotation = 0), F = N, F.title.enabled = !1
            }
            var j = function () {
                    var e = r.options.chart;
                    return e = (e.events || {}).redraw || function () {
                    }
                }
            ;2 === f ? ("rgba(255, 255, 255, 0.1)" === F.lineColor && (F.lineColor = "#cccccc"), "rgba(255, 255, 255, 0.5)" === F.labels.style.color && (F.labels.style.color = "#666666"), "rgba(255, 255, 255, 0.5)" === F.title.style.color && (F.title.style.color = "#666666"), "rgba(255, 255, 255, 0.1)" === O.lineColor && (O.lineColor = "#cccccc"), "rgba(255, 255, 255, 0.5)" === O.labels.style.color && (O.labels.style.color = "#666666"), "rgba(255, 255, 255, 0.5)" === O.title.style.color && (O.title.style.color = "#666666"), "rgba(255, 255, 255, 0.6)" === D.color && (D.color = "rgba(0, 0, 0, 0.6)"), A.isAdaption && (A.border_color = "rgba(0, 0, 0, 0.64)")) : A.isAdaption && (A.border_color = "rgba(255, 255, 255, 0.48)");
            var P = $.extend(!0, r.options, {
                type: "boxplot",
                chart: {
                    className: "highcharts-container", backgroundColor: null, events: {
                        redraw: function (e) {
                            "resize" === e.type && j.call(this, e)
                        }
                    }
                },
                title: {text: ""},
                subtitle: {
                    text: l.title,
                    y: 0,
                    style: {
                        "font-size": "fullscreen" === r.mode ? "20px" : "16px",
                        color: "dark" === r.theme ? "#FFFFFF" : "#333333"
                    }
                },
                plotOptions: a(r.options.plotOptions, {
                    boxplot: {
                        cursor: l.is_drill || "2" == r.optional.linked_chart_type ? "pointer" : "default",
                        dataLabels: {
                            enabled: "fullscreen" === r.mode || l.show_datalabels,
                            allowOverlap: void 0 !== l.show_all_datalabels && l.show_all_datalabels,
                            crop: !0,
                            useHTML: !0,
                            className: "highcharts-data-labels",
                            style: {color: D.color, fontSize: D.fontSize, textOutline: "none"},
                            formatter: function () {
                                var e = this.series.formatter, t = this.series.aggregator;
                                return p.dataLabelFormatter(e, this.value, t)
                            }
                        },
                        q1Color: i("string", A.q1color, "rgba(41, 121, 255, 0.48)"),
                        q3Color: i("string", A.q3color, "rgba(41, 121, 255, 0.8)"),
                        q1LineWidth: 1,
                        q3LineWidth: 1,
                        borderColor: i("string", A.border_color, 2 == f ? "rgba(0, 0, 0, 0.64)" : "rgba(255, 255, 255, 0.48)"),
                        borderWidth: 0,
                        lineWidth: i("number", A.border_width, 1),
                        whiskerLength: "50%",
                        whiskerWidth: 1,
                        whiskerColor: i("string", A.border_color, 2 == f ? "rgba(0, 0, 0, 0.64)" : "rgba(255, 255, 255, 0.48)"),
                        states: {hover: {enabled: !1}}
                    },
                    scatter: {
                        dataLabels: {
                            enabled: "fullscreen" === r.mode || l.show_datalabels,
                            allowOverlap: void 0 !== l.show_all_datalabels && l.show_all_datalabels,
                            style: {color: D.color, fontSize: D.fontSize, textOutline: "none"},
                            useHTML: !0,
                            className: "highcharts-data-labels"
                        }, radius: i("number", E.radius, 3), color: E.color || "#2979FF"
                    }
                }),
                yAxis: F,
                xAxis: O,
                legend: {enabled: !1},
                tooltip: {
                    crosshairs: null,
                    shared: !1,
                    borderRadius: 0,
                    boxShadow: "none",
                    border: "none",
                    backgroundColor: "inherit",
                    className: "highcharts-tooltip",
                    formatter: r._generateTooltipFormatter()
                },
                credits: {enabled: !1},
                series: M
            });
            P.series[0].data = I.outer, I.isQuar && (P.series[1].data = I.inner), P.series.forEach(function (e) {
                e.inverted = !l.seriesType
            }), "fullscreen" === r.mode && $.extend(!0, P, {tooltip: {style: {fontSize: "14px"}}}), "dark" === r.theme && $.extend(!0, P, {
                tooltip: {
                    backgroundColor: "none",
                    borderWidth: 0,
                    style: {padding: 0}
                }
            }), l.seriesType ? $.extend(P.plotOptions.scatter.dataLabels, {
                align: void 0,
                verticalAlign: void 0,
                x: 0
            }) : (F.categories = void 0, F.crosshair = void 0, $.extend(P.plotOptions.scatter.dataLabels, {
                align: "right",
                verticalAlign: "middle",
                x: 5
            })), (P.yAxis.plotLines || []).concat(P.xAxis.plotLines || []).forEach(function (e) {
                e.label || delete e.value, e.defaultZero !== !0 && "warn" != e.lineType || (e.width = 0, e.label = "")
            }), delete P.yAxis.labels.rotation, t = Dalaba.Chart(r.$elem[0], P), r.chartMapInstance = t, r.chartInstance = t, t.canvas.className = "chart-canvas"
        }
    }(bdpChart)
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    var a = i(40), r = n(a), o = i(675), s = n(o), l = i(158), c = n(l), d = i(382), u = n(d);
    !function (e) {
        function t(e, t) {
            if (!Array.isArray(e)) return !1;
            for (var i = 0, n = e.length; i < n; i++) if (e[i].uniq_id == t) return !0;
            return !1
        }

        function i(t, i, r, o, l, u, f, h, g, m, v, y, b, w, x, D, L, A, E, I, F, O) {
            return {
                restrict: "A", link: function (y, M, N) {
                    function j() {
                        y.$watch(N.bdpChart, function (i) {
                            if (i && null == se && (y.$bdpChart = se = new e.Chart(N.displayMode, i), A.set(se.ct_id, se), se.on("data", q).on("load", function (e, i) {
                                if ("C281" !== e.getChartType() || i) {
                                    var n = e.getChartType();
                                    [S.WordCloud, S.Sankey, S.ParallelSets, S.Table].indexOf(n) < 0 && (p(e, y, i, u), n !== S.KPICard && Q(i, e)), d(e, y, f, {is_load: !0}, t)
                                }
                            }).on("redraw", function (e, i) {
                                ("C281" !== e.getChartType() || i) && (p(e, y, i, u), d(e, y, f, {is_redraw: !0}, t), e.canDrawMarkPoint() && (Q(i, e), y.$broadcast("reflow")))
                            }).on("drilldown", function (e, t) {
                                y.inAddingMarkPoint ? ee(e, t) : t.isLoadingData() || h(function () {
                                    J(e, t)
                                }, 10)
                            }).on("refreshData", function () {
                                this.destroy(), i.optional._t = +new Date, y.$$phase || y.$digest()
                            }).on("saveWithOpt", G).on("setOperateRecord", function (e) {
                                u.setOperateRecord(e.type, e.params)
                            }).on("data-loading", function () {
                                M.parents("li.gridster-item").addClass("data-loading")
                            }).on("data-loaded", function () {
                                M.parents("li.gridster-item").removeClass("data-loading"), M.removeClass("bdp-chart-loading"), V()
                            }).on("jumpToOtherDash", ae).on("saveSuccess", function () {
                                M.parents("li.gridster-item").find(".J-width-change").hide(), window.bdpGuide && 1 == window.bdpGuide.getApi("tableGuideDashColWidthChange") && window.bdpGuide.setApi("tableGuideDashColWidthChange", 0), v(y.tips["chart.saveColWidthSuccess"])
                            }).on("saveFail", function () {
                                v(y.tips.saveFail)
                            }), "edit" == se.mode ? se.on("pointClick", function (e, t) {
                                y.inAddingMarkPoint && ee(e, t)
                            }).on("setNickName", function (e, t) {
                                u.setNickName(e, t)
                            }).on("correctMismatch", function (e, t) {
                                y.mapSetting.correctMismatch(e, t)
                            }) : se.isDashboardMode ? (se.on("refreshLinkedCharts", ne), y.$watch(function () {
                                return N.displayMode
                            }, function (e) {
                                se.setMode(e)
                            }), se.on("reflow", function () {
                                i.read_cache = !1, i.optional._t = new Date
                            })) : "fullscreen" === se.mode && se.on("reflow", function () {
                                i.optional._t = new Date
                            }), se.on("exportSave", function () {
                                var e = this.chartInstance;
                                if (e) {
                                    var t = e.xAxis[0];
                                    t._oldMax = t.oldUserMax, t._oldMin = t.oldUserMin
                                }
                            }), se.on("exportAll", function () {
                                var e = this.chartInstance;
                                if (e) {
                                    var t = e.xAxis[0], i = t.dataMax, n = t.dataMin;
                                    t.setExtremes && t.setExtremes(n, i, !0)
                                }
                            }), se.on("exportBack", function () {
                                var e = this.chartInstance;
                                if (e) {
                                    var t = e.xAxis[0], i = t._oldMax, n = t._oldMin;
                                    t.setExtremes && t.setExtremes(n, i, !0), t.userMax = i, t.userMin = n
                                }
                            })), se) {
                                var n = c.default.getLinkValue(i.ct_id, u.mainChartContainer || []), a = !1;
                                "fullscreen" === se.mode && (a = y.$eval(N.autoplay));
                                var r = {};
                                if ("edit" != se.mode) {
                                    n && n.length > 0 && (r.linked_value = n);
                                    var o = y.global.globalDashFilterItems;
                                    !o || $.isEmptyObject(o) || i.optional.dsh_filter || (r.dsh_filter = [], angular.forEach(o, function (e, t) {
                                        r.dsh_filter.push({
                                            df_id: e.df_id,
                                            range: e.range,
                                            data_type: e.data_type,
                                            granularity: e.granularity,
                                            range_type: e.range_type
                                        })
                                    }))
                                }
                                var s = M.attr("data-from-websocket");
                                if (s && (r.from = s, M.removeAttr("data-from-websocket")), window.BDP_visibilityChangeFlag) {
                                    var l = M.attr("data-page-active");
                                    l && (r.page_active = l, M.removeAttr("data-page-active"))
                                }
                                se.draw(M, i, r, a, y, u)
                            }
                        }, !0)
                    }

                    function P() {
                        var e = $(".J_filterWrap"), t = $(".J_filterWrap_hidden"), i = $(".J_filter", e),
                            n = $(".J_dateGranularity", e), a = $(".J_filter_hidden", t),
                            r = $(".J_dateGranularity_hidden", t), o = e.width(), s = o / 2 - 40, l = a.width(),
                            c = r.width() + 24, d = (l + 2) / o * 100, u = c / o * 100;
                        e.css({visibility: "hidden"}), i.css({width: (d > 100 ? 100 : d) + "%"}), n.css({width: (u > 100 ? 100 : u) + "%"}), l < s && c < s ? i.css({width: "50%"}) : l >= s && c >= s ? (i.css({width: "50%"}), n.css({width: "50%"})) : l + c >= o && l >= s && c <= s ? i.css({width: (o - c - 40) / o * 100 + "%"}) : l + c >= o && l <= s && c >= s && 0 != l && n.css({width: (o - l - 40) / o * 100 + "%"}), e.attr("has-add-diff", "true"), e.css({
                            visibility: "visible",
                            minWidth: "1000px"
                        })
                    }

                    function R(t) {
                        var i = "zh" === e.language ? "行" : " Row ", n = [];
                        if ([].concat(t.y, t.y_optional || []).map(function (e) {
                            var t = angular.copy(e);
                            n.push(t)
                        }), "C200" == t.chart_type && t.tb_statistic && (t.tb_statistic.number_row && t.y.forEach(function (e, t) {
                            var a = e.number_row_formula;
                            if ("SUM" == a && (a = "TOTAL"), a) {
                                var o = angular.copy(e.row_setting);
                                o.name = (e.nick_name || e.name) + "(" + i + r[a] + ")", n.push(o)
                            }
                        }), t.tb_statistic.row)) {
                            var a = angular.copy(t.tb_statistic.row_setting);
                            a.name = y.tips.rowSummary, n.push(a)
                        }
                        return n
                    }

                    function B(e, t, i) {
                        var n, a = e.sort_items.sort_item_type, r = e.data_type;
                        if (0 == a) {
                            if (void 0 === r) for (var o = i.length - 1; o >= 0; o--) if (i[o].uniq_id === e.uniq_id) {
                                r = i[o].data_type;
                                break
                            }
                            n = "date" === r ? y.tips.date : y.tips.letter
                        } else if (2 == a) n = y.tips.custom; else if (1 == a) {
                            var s = e.sort_items.aggregator_sort.uniq_id;
                            "uniqIdForSum" === s ? n = y.tips["chart.totalOfMeasures"] : t.forEach(function (e) {
                                e.uniq_id === s && (n = e.nick_name || e.name + y.setAdvanceAggregatorName(e))
                            })
                        } else 3 == a ? n = y.tips.percentage : 4 == a && (n = D.instant("9c4d5b9f"));
                        return n
                    }

                    function z(e, t) {
                        for (var i, n = 0, a = t.length; n < a; n++) {
                            var r = t[n];
                            if (e.uniq_id === r.uniq_id) {
                                "x" === e.axis || "compare_axis" === e.axis ? i = r.nick_name || r.name : "y" === e.axis && (i = r.nick_name || r.name + y.setAdvanceAggregatorName(r));
                                break
                            }
                        }
                        return i
                    }

                    function H(e, t) {
                        if (t && t.length) {
                            var i = R(e);
                            t.forEach(function (t) {
                                void 0 === t.sort_items && (t.sort_items = {sort_item_type: 0}, "y" === t.axis && (t.sort_items = {
                                    sort_item_type: 1,
                                    aggregator_sort: {uniq_id: t.uniq_id, parent_uniq_id: t.parent_uniq_id}
                                })), t.sort_items.selectedName = B(t, i, e.x), t.name = z(t, [].concat(e.x, e.compare_axis || [], i)), t.sort_items.aggregator_sort && t.sort_items.aggregator_sort.fid && (y.tbInfoForChart ? t.sort_items.aggregator_sort.schame_name = _.find(y.tbInfoForChart.schema, {fid: t.sort_items.aggregator_sort.fid}).name : W(e.tb_id).then(function () {
                                    t.sort_items.aggregator_sort.schame_name = _.find(y.tbInfoForChart.schema, {fid: t.sort_items.aggregator_sort.fid}).name
                                })), t.sort_items.aggregator_sort && t.sort_items.aggregator_sort.aggregator && (t.sort_items.aggregator_sort.formula_name = _.find(O, {type: t.sort_items.aggregator_sort.aggregator}).name), "sum" === t.fid && (t.name = y.tips["chart.totalOfMeasures"])
                            })
                        }
                    }

                    function W(e) {
                        var t = {tb_id: e, query_for_ct: 1, need_param: 1};
                        return m.field.getList(t).then(function (e) {
                            "0" == e.status && (y.tbInfoForChart = e.result)
                        })
                    }

                    function q(t) {
                        var i = e.language || "zh";
                        y.selected_type = t.getChartType(), y.global.watch = new Date, y.global.chartData = t.data, y.global.chartInfo = t.info;
                        var r = t.info, o = t.data;
                        void 0 !== r.drill_level && (y.drill_level = r.drill_level), y.description = r.description, y.right_comment = r.right_comment;
                        var s;
                        if ("C500" == y.selected_type) {
                            y.description = t.views.length > 0 ? t.views[0].info.description : r.description;
                            var l = function e(t, i, n) {
                                t.ct_id = i, t.tb_id = n, t.items && t.items.length > 0 && t.items.forEach(function (t) {
                                    e(t, i, n)
                                })
                            }, c = t.views && t.views.map(function (e) {
                                return e.info.filter_list_inner.forEach(function (t) {
                                    l(t, e.info.chart_id, e.info.tb_id)
                                }), e.info.filter_list_inner
                            });
                            s = Array.prototype.concat.apply([], c)
                        } else s = t.info.filter_list_inner;
                        var u;
                        if ("edit" === t.mode) {
                            var p = function (e) {
                                function t(e) {
                                    angular.forEach(e, function (e) {
                                        e.hasOwnProperty("uniq_id") ? e.hasOwnProperty("aggregator") || (b[e.uniq_id] ? (m[e.fid] ? e.uniq_id = m[e.fid] : (e.uniq_id = y.temp_uniq_id++, m[e.fid] = e.uniq_id), b[e.uniq_id] = !0) : (m[e.fid] = e.uniq_id, b[e.uniq_id] = !0)) : m[e.fid] ? e.uniq_id = m[e.fid] : (e.uniq_id = y.temp_uniq_id++, m[e.fid] = e.uniq_id), e.items && e.items.length > 0 && t(e.items)
                                    })
                                }

                                t(e)
                            };
                            if (["C400", "C500"].indexOf(y.selected_type) < 0 && !t.isSubView && (y.viewMeta = y.chart_ops.meta.level[r.drill_level], H(r, y.viewMeta.advanced_sort), y.chart_ops.meta.param_setting = r.param_setting || [], "C27" == y.selected_type.slice(0, 3) && r.drill_level > 0 && (y.viewMeta.map.region_area || (y.viewMeta.map.region_area = {
                                province: "auto",
                                city: "auto"
                            }))), ["C250", "C281"].indexOf(y.selected_type) > -1 && void 0 == y.viewMeta.seriesType && (y.viewMeta.seriesType = !1), ["C240", "C241", "C242"].indexOf(y.selected_type) > -1 && void 0 == y.viewMeta.reversed && (y.viewMeta.reversed = !1), ["C400", "C500"].indexOf(y.selected_type) < 0 && !t.isSubView && (void 0 == y.viewMeta.xAxisLabelsRotation && (y.viewMeta.xAxisLabelsRotation = "0"), void 0 == y.viewMeta.xAxisLabelsStep && (y.viewMeta.xAxisLabelsStep = !1)), L.info = r, L.data = o, r && window.bdpChart.helper.timePredicted.isOpen(y.selected_type, r.yAxis)) {
                                var g = window.bdpChart.helper.timePredicted.hasYError(o.y);
                                g && v(D.instant(g))
                            }
                            y.temp_uniq_id = (new Date).getTime(), y.isGranularity = r.enable_change_granularity;
                            var m = {}, b = {};
                            if (p(s), y.chart_ops.meta.filter_list_inner instanceof Array) p(y.chart_ops.meta.filter_list_inner); else if (t.info.level_fields) for (var _ = t.info.level_fields.length || 1, w = 0; w < _; w++) p(y.chart_ops.meta.filter_list_inner[w]);
                            u = y.chart_ops.meta.filter_list_inner, u = angular.copy(s), T.handler(t, u), s = u, y.$broadcast("checkChartTypeCondition", y.selected_type, "");
                            var x = e.ChartType;
                            if ([x.GIS, x.Custom].indexOf(y.selected_type) < 0) {
                                y.selected_type == x.WordCloud && (y.wordCloudValues = o.x[0].data, y.global.colorSetting = r.color_setting);
                                var C = y.chart_ops.meta.level[y.drill_level];
                                if (t.isSplitChart() && !C.split_compare_setting) {
                                    var S = t.data.y.length / t.info.y.length;
                                    t.info.split_compare_setting = C.split_compare_setting = S < 16 ? {
                                        rows: Math.ceil(Math.sqrt(S)),
                                        cols: Math.ceil(Math.sqrt(S))
                                    } : {rows: 4, cols: 4}
                                }
                                t.supportNavigator() && void 0 === t.info.navigator_setting && (y.chart_ops.meta.level[y.drill_level].navigator_setting = {
                                    enabled: !1,
                                    start: 0,
                                    end: 1
                                }, y.saveChartImmediate({only_save_meta: !0}), t.info.navigator_setting = {
                                    enabled: !1,
                                    start: 0,
                                    end: 1
                                })
                            }
                            if ("C500" == r.chart_type && y.codeEditor) {
                                var A = y.codeEditor.getValue();
                                !A && r.meta.custom_chart_setting && r.meta.custom_chart_setting.code !== A && y.codeEditor.setValue(r.meta.custom_chart_setting.code || "")
                            }
                            y.adv_date_list = (y.adv_date_list || []).concat(r.adv_date_list || []), y.adv_date_list = E.advDateListUnique(y.adv_date_list), E.setChartSchemeCache(r.chart_id + "_info", r.adv_date_list)
                        } else if ("chartTpl" === t.mode) ; else {
                            n(t, r.filter_list);
                            var F, C;
                            if (s && (F = bdp.utils.handleInnerFilterLevel(s), T.handler(t, F)), y.dashStandardItems[le]) {
                                if (C = y.dashStandardItems[le].children[0].meta, C.chart_type = r.chart_type, C.x = r.xAxis, C.y = r.yAxis, "C400" === C.chart_type && (C.layers = r.meta.layers), C.compare_axis = r.compare_axis || [], C.y_optional = r.yAxisOptional || [], C.compare_axis = r.compare_axis || [], C.allMetricFields = (r.y || []).concat(r.y_optional || []), C.allMetricFields.forEach(function (e) {
                                    e.row_setting && !$.isEmptyObject(e.row_setting) && C.allMetricFields.push(angular.copy(e.row_setting))
                                }), r.tb_statistic && angular.isObject(r.tb_statistic.row_setting) && r.tb_statistic.row) {
                                    var O = r.tb_statistic.row_setting;
                                    O.name = O.nick_name || ("zh" == i ? "行总计" : "Row Summary"), C.allMetricFields.splice(O.pos, 0, O)
                                }
                                C.tb_statistic = r.tb_statistic, C.hasTotal = r.yAxis && 1 == r.yAxis.length, C.filter_list_inner = F, C.diff_filter = r.diff_filter, C.adv_date_list = r.adv_date_list || [], E.setChartSchemeCache(r.chart_id + "_info", C.adv_date_list), "C500" == t.getChartType() && t.views && t.views.length > 0 && (C.adv_date_list = t.views[0].info.adv_date_list, C.diff_filter = t.views[0].info.diff_filter), $.inArray(t.getChartType(), ["C271", "C272", "C273"]) > -1 && (C.map = r.map), C.supportChain = I.getLinkSupport(C, y.draw_chart_url, y.dashStandardItems), C.dash_setting && (C.dash_setting.show_datalabels = r.show_datalabels, C.show_total = r.show_total), "C500" == t.getChartType() ? t.views && (C.tb_update_time = 1e3 * (Math.max.apply(null, t.views.map(function (e) {
                                    return e.info.tb_update_time
                                })) || r.update_time)) : C.tb_update_time = 1e3 * r.tb_update_time, "fullscreen" === t.mode ? ("C500" == t.getChartType() && (y.fullscreen.views = t.views.length ? t.views : ""), y.fullscreen.info.filter_opts.meta.param_setting = r.param_setting || []) : t.isDashboardMode && h(function () {
                                    C.param_setting = r.param_setting || []
                                }, 10), C.description = r.description, C.isGranularity = r.enable_change_granularity, C.is_js_chart = "C500" == r.chart_type && r.meta && r.meta.custom_chart_setting && "javascript" == r.meta.custom_chart_setting.mode, "C500" == t.getChartType() && t.views && t.views.length > 0 && (C.adv_date_list = t.views[0].info.adv_date_list, C.diff_filter = t.views[0].info.diff_filter), defined(r.fullscreen_granularity) || (r.fullscreen_granularity = !0), C.fullscreen_granularity = r.fullscreen_granularity
                            }
                            var M = [];
                            [].concat(r.y || [], r.y_optional || []).forEach(function (e) {
                                e.yoyQoqSetting && e.yoyQoqSetting.allow_dash && (e.yoyQoqSetting.name = e.nick_name || e.name, e.yoyQoqSetting.aggregatorName = y.setAdvanceAggregatorName(e, !0), e.yoyQoqSetting.uniq_id = e.uniq_id, M.push(angular.copy(e.yoyQoqSetting)))
                            }), C.compareDateFilter && M.forEach(function (e) {
                                C.compareDateFilter.forEach(function (t) {
                                    e.uniq_id == t.uniq_id && (e.compareType = t.compareType, e.customName = t.customName)
                                })
                            }), C.compareDateFilter = M, k.canSetAdvancedSort(r, r.chart_type) && (C.advanced_sort = r.advanced_sort, C.is_advanced_sort = r.is_advanced_sort, H(r, C.advanced_sort), t.on("dashboard_click_sort", function () {
                                h(function () {
                                    C.is_advanced_sort = 0
                                })
                            }));
                            var x = e.ChartType;
                            if (C.show_navigator = r.navigator_setting && r.navigator_setting.enabled && [x.Line, x.Column, x.NStackColumn, x.PStackColumn, x.Sankey, x.Area, x.NStackArea, x.PStackArea, x.Biax].indexOf(r.chart_type) > -1, void 0 === r.show_datalabels && (r.show_datalabels = ["C230", "C271", "C272", "C273", "C330", "C360"].indexOf(r.chart_type) > -1), C.drillChartType = t.getChartType(), "fullscreen" === t.mode) {
                                clearTimeout(ce), ce = setTimeout(function () {
                                    P()
                                });
                                var N, j = $(".fullscreen-modal"), R = j.find(".dash-filter-wrap").height(),
                                    B = j.find(".drill-crumbs-wrap").height();
                                N = R > 0 ? R + B + 79 : 15 + B + 111, t.$elem.css({top: N})
                            }
                        }
                        if ("C280" == t.getChartType() && t.data.bubble_size_groups && (y.bubble_size_groups = t.data.bubble_size_groups), "C210" == t.getChartType() && t.data.bubble_size_groups && 2 == t.info.overlapMode && (y.bubble_size_groups = t.data.bubble_size_groups), y.fullscreen && (y.fullscreen.chart_type = y.selected_type), "C500" == y.selected_type || y.$$phase || y.$digest(), "edit" === t.mode && (y.getChartArgsHeight && y.getChartArgsHeight(), y.loadingData = !1, "C400" !== y.selected_type && $("#chartBox").find(".chart-inner-filter").length ? t.$elem.css({top: $("#chartBox").find(".chart-inner-filter").height() + 10}) : "C400" !== y.selected_type && t.$elem.css({top: 47}), setTimeout(function () {
                            y.draw_chart_url && y.draw_chart_url.options && bdp.utils.reDrawWithoutHighCharts(y.draw_chart_url.options, t.getChartType())
                        }, 100)), t.data && t.data.y && t.data.y.length > 0 && a(t.data, t.info), U(t), "C400" !== y.selected_type && t.isEmptyChart() && d(t, y, f, {is_load: !0}), de.isHit() && !ue.is_df && !de.getUpdateTimes(t.ct_id)) {
                            var z = de.matchDashFilter(t.dsh_id, t.ct_id, s);
                            if (z.ct_id == t.ct_id && z.list.length) for (var W in y.draw_chart_url) {
                                var q = y.draw_chart_url[W].options;
                                if (q.ct_id == t.ct_id) {
                                    if ("C500" == t.info.chart_type) {
                                        var V = {};
                                        z.list.forEach(function (e) {
                                            V[e.ct_id] || (V[e.ct_id] = []), V[e.ct_id].push(e)
                                        }), q.optional.filter_list_map = V
                                    } else q.optional.filter_list = z.list;
                                    de.setUpdateTimes(t.ct_id, 1)
                                }
                            }
                        }
                        y.$broadcast("chart_data_load", t), y.$broadcast("chart_data_warn", t.info.warn_info), y.$broadcast("current_level_inner_filter", s, t.info.chart_id)
                    }

                    function V() {
                        if (de.isHit() && !ue.is_df) for (var e in y.draw_chart_url) {
                            var t = y.draw_chart_url[e].options;
                            if (t.optional.filter_list_map && !$.isEmptyObject(t.optional.filter_list) || t.optional.filter_list && t.optional.filter_list.length) {
                                var i = $(".J_item_chart").find('div[data-ctid="' + t.ct_id + '"]');
                                i && i.removeClass("chart-loading-cover")
                            }
                        }
                    }

                    function U(e) {
                        if ("edit" != e.mode && (y.dashLayoutInfo.show_block || "fullscreen" == e.mode)) {
                            var t = e.theme || "";
                            bdp.waterMark.set(e.$elem.parent()[0], t)
                        }
                    }

                    function G(e, t, i) {
                        C(t, e, y, i)
                    }

                    function J(e, t) {
                        var i, n, a = t.info.xAxis[0], r = a.granularity || "day", o = a.granularity_name || "",
                            s = a.month_start_day || 0, l = t.getChartType(), c = "C200" === l, d = "C280" === l;
                        if (d) {
                            var u = e.index;
                            i = t.data.x[0].data[u], n = "date" == a.data_type ? k.checkGranularity(r, i, o, s) : "sub_date" == a.data_type ? k.subDateFormat(a.fid.split("_")[1], i) : i
                        } else if (c) i = e.val, n = e.text; else if ("C300" === l) {
                            var p = e.source, f = e.target;
                            i = {
                                type: "C300",
                                fid: t.info.xAxis[0].fid,
                                source: {stage: p.origin_value, state: p.origin_name_value},
                                target: {stage: f.origin_value, state: f.origin_name_value}
                            }, n = "date" == a.data_type ? k.checkGranularity(r, p.origin_value, o, s) + p.name + " ~ " + k.checkGranularity(r, f.origin_value, o, s) + f.name : "sub_date" == a.data_type ? k.subDateFormat(a.fid.split("_")[1], p.origin_value) + p.name + " ~ " + k.subDateFormat(a.fid.split("_")[1], f.origin_value) + f.name : p.origin_value + p.name + " ~ " + f.origin_value + f.name
                        } else if ("C330" === l) n = e.label.raw, i = t.origin_data.x[0].data[e.index]; else if (l == S.WordCloud) n = e.value, i = e.origin_value; else if ("C271 C272 C273".indexOf(l) > -1) {
                            if (null === e.value) return;
                            i = (e["hz-code"] || e.code) + "", n = e.name
                        } else {
                            if ("C320" === l && e.isSum) return;
                            i = e.name && "slice" !== e.name.toString().toLowerCase() ? e.name : e.x, "date" === a.data_type ? ("week" === r && o && (i += 864e5 * (a.week_start_day_of_week - 1), s = a.week_start_day_of_week), n = k.checkGranularity(r, i, o, s), i = 2 == t.info.x.length ? t.xMap[e.name] : t.xMap[e.x], "C230" === l && ["其它", "Else"].indexOf(e.options.x) >= 0 && (n = e.options.x, i = e.options.x)) : n = "sub_date" == a.data_type ? k.subDateFormat(a.fid.split("_")[1], e.name) : e.name, "C281" === l && (i = e.source.slice(-1)[0], n = e.key, "sub_date" == a.data_type && (n = k.subDateFormat(a.fid.split("_")[1], i)), i = "" + i)
                        }
                        var h = t.optional;
                        h.drill_field = t.info.xAxis[0].fid, h.drill_level = 1 + (h.drill_level >>> 0), angular.isArray(h.drill_value) ? h.drill_value.push(i) : h.drill_value = [i], "edit" == t.mode && (y.drill_field = h.drill_field, y.drill_value = h.drill_value), y.drillOption = t.optional, K(h.drill_level, t);
                        var g = t.info.xAxis[0];
                        t.info.tb_statistic && t.info.tb_statistic.showRowOrder && (g = t.info.xAxis[1]), Y(t.$elem, g, n, t.optional)
                    }

                    function Y(e, t, i, n) {
                        function a() {
                            r.find(".drill-crumbs").remove(), r.find(".drill-crumbs-wrap").append(o), r.find(".backToMainChart").off("click").on("click", {chart: se}, X), r.find(".back-chart" + n.drill_level).on("click", {chart: se}, X)
                        }

                        var r = e.parent();
                        "fullscreen" === se.mode && (r = $(".fullscreen-modal"));
                        var o = r.find(".drill-crumbs");
                        if (i = bdp.utils.encodeHTML(i), o.length > 0) o.append('<i class="bdp-icon ico-slicesnav-arrow"></i><span><a href="javascript:;" class="drill-point-name back-chart' + n.drill_level + '" data-level="' + n.drill_level + '" title="' + i + '">' + i + "</a></span>"), r.find(".back-chart" + n.drill_level).off("click").on("click", {chart: se}, X); else {
                            o = angular.element('<div class="drill-crumbs"></div>');
                            var s = bdp.utils.encodeHTML(t.nick_name || t.name),
                                l = angular.element('<span class="nowrap drill-crumbs-name" title="' + s + '"><a href="javascript:;" class="backToMainChart" data-level="0">' + s + "</a></span>");
                            o.append(l).append('<i class="bdp-icon ico-slicesnav-arrow"></i><span><a href="javascript:;" class="drill-point-name back-chart' + n.drill_level + '" data-level="' + n.drill_level + '" title="' + i + '">' + i + "</a></span>"), bdp.bdpPageStatus.isUnderDataScreen() || bdp.bdpPageStatus.isUnderAdvDash() ? setTimeout(function () {
                                a()
                            }, 10) : a()
                        }
                        e.css({bottom: 22}), "chart_edit" == u.view && e.css({bottom: 48})
                    }

                    function X(e) {
                        var t = angular.element(this), i = t.parents(".drill-crumbs-wrap").siblings(".chart");
                        $(".chart-error").remove();
                        var n = t.attr("data-level") >>> 0;
                        0 == n ? (i.css({bottom: 0}), bdp.bdpPageStatus.isUnderDataScreen() || bdp.bdpPageStatus.isUnderAdvDash() ? setTimeout(function () {
                            t.parents(".drill-crumbs").remove()
                        }, 10) : t.parents(".drill-crumbs").remove()) : t.parent().nextAll().remove(), K(n, e.data.chart, i), i.attr("data-drill", "true"), i.attr("data-drill-status", "false")
                    }

                    function K(e, t, i) {
                        var n = t && t.$elem || i, a = {};
                        t && (a = t.optional || {});
                        var r = y.$eval(N.bdpChart);
                        r.read_cache = !1, $.extend(r.optional, a);
                        var o = r.optional || {};
                        if (0 == e) delete o.drill_field, delete o.drill_level, delete o.drill_value; else {
                            var s = o.drill_value.slice(0, e), l = e;
                            if (i && l == o.drill_level && o.drill_value.join("") == s.join("")) return !1;
                            o.drill_level = e, o.drill_value = o.drill_value.slice(0, e)
                        }
                        delete o.free_drill_opt, y.isDrawDrillChart = !0, t && t.destroy(), y.$$phase || y.$digest(), n.attr("data-drill-status", "true"), t.info.drill_level !== e && t.emit("level-change")
                    }

                    function Q(e, t) {
                        if (t.canDrawMarkPoint()) {
                            var n = $(e.container).parent();
                            n.find(".hchart-mark-point").remove();
                            var a = $("<div chart-mark-points></div>").appendTo(n), r = [], o = t.info.chart_type;
                            angular.forEach(t.markPoints, function (i) {
                                var n = Z(e, i, t.getChartType());
                                if (null != n) {
                                    var a = i.comment.length > 25 ? 150 : hz.cutString.getP(i.comment);
                                    a += 5, a = Math.min(150, a), "edit" == t.mode && (a = Math.max(100, a)), r.push({
                                        point: n,
                                        pointModel: i,
                                        pos: ie(n, 16, 16, t.mode, o),
                                        widthStyle: {width: a + "px"},
                                        posStyle: {"margin-left": -a / 2 - 15 + "px"},
                                        show: y.show_chart_description
                                    })
                                }
                            });
                            var s = y.$new();
                            s.markPoints = r, s.mode = t.mode, s.ct_id = t.ct_id, s.$on("toggleAllPoints", function (e, t) {
                                angular.forEach(s.markPoints, function (e) {
                                    e.show = void 0 == t ? !e.show : t
                                })
                            }), s.$on("displayMarkPointModel", function (e, t) {
                                angular.forEach(s.markPoints, function (e, i) {
                                    e.show = i == t
                                })
                            }), s.$on("reflow", function () {
                                bdp.utils.throttle(function () {
                                    angular.forEach(s.markPoints, function (e) {
                                        e.pos = ie(e.point, 16, 16, t.mode)
                                    }), s.$$phase || s.$digest()
                                }, 100)()
                            }), setTimeout(function () {
                                i(a)(s)
                            }, 100)
                        }
                    }

                    function Z(e, t, i) {
                        var n = e.series[t.seriesIndex].points;
                        if ("C240" == i || "C243" == i) {
                            var a = e.series.length, r = "C243" == i ? t.seriesIndex : a - 1 - t.seriesIndex;
                            n = e.series[r].points
                        }
                        if (t.xDataIndex >= n.length) return null;
                        if ("C243" !== i) for (var o = 0; o <= t.xDataIndex; o++) if (n[o].index == t.xDataIndex) return n[o];
                        return n[t.xDataIndex]
                    }

                    function ee(e, i) {
                        var n = e.series._i, a = e.index, r = i.info.yAxis.concat(i.info.yAxisOptional),
                            o = 2 == i.info.xAxis.length, s = o ? 1 : 0, l = e.series.options.time_seires_setting;
                        if (l && l.series_type) return v("暂不支持对预测值做数据标注"), !1;
                        var c = null;
                        (c = te(e, i)) ? y.editMarkPoint(c, i.ct_id) : t.open({
                            template: "/static/chart-edit/mark-point/mark-point-modal.html",
                            className: "ngdialog-theme-default ngdialog-small",
                            scope: y,
                            data: {
                                point: {
                                    ct_id: i.ct_id,
                                    xaxis_id: i.info.xAxis[s].fid,
                                    xaxis_value: i.data.x[s].data[a],
                                    yaxis_id: r[n].fid,
                                    yaxis_uniq_id: r[n].uniq_id,
                                    originPoint: e
                                }, xAxis: i.info.xAxis[s], type: "create"
                            },
                            controller: "EditMarkPointCtrl"
                        })
                    }

                    function te(e, t) {
                        for (var i = t.getChartType(), n = 0, a = t.markPoints.length; n < a; n++) {
                            var r = t.markPoints[n];
                            if (Z(e.series.chart, r, i) == e) return r
                        }
                        return null
                    }

                    function ie(e, t, i, n, a) {
                        if (e.series) {
                            var r, o = e.series, s = o.chart, l = o.type, c = "C243" == a, d = {},
                                u = s.options.plotOptions[l] && void 0 != s.options.plotOptions[l].stacking && !c;
                            if (u) {
                                var p = e.index;
                                e = s.series[0].points[p] || e
                            }
                            if (!o.visible) return {left: -100, top: -100};
                            switch (l) {
                                case"line":
                                case"spline":
                                    var f = Math.round(e.plotX), h = Math.round(e.plotY);
                                    d.left = o.xAxis.pos + f, d.top = o.yAxis.pos + h, e.dataLabel && y.show_data_label && h >= 20 && (d.top -= 16);
                                    break;
                                case"column":
                                case"waterfall":
                                    r = u || e.series.options.borderRadiusBottomLeft ? e.originShapeArgs : e.shapeArgs, d.left = o.xAxis.pos + r.x + r.width / 2, d.top = o.yAxis.pos + Math.max(0, r.y), e.dataLabel && y.show_data_label && r.y >= 20 && (d.top -= 16);
                                    break;
                                case"bar":
                                    r = (u || e.series.options.borderRadiusTopLeft ? e.originShapeArgs : e.shapeArgs) || e.shapeArgs, d.left = c ? e.series._i ? o.yAxis.pos + r.height + 6 : o.yAxis.len + o.yAxis.pos - Math.max(0, r.height) + 12 : o.yAxis.len + o.yAxis.pos - Math.max(0, r.y), d.top = o.xAxis.len + o.xAxis.pos - r.x - r.width;
                                    break;
                                case"area":
                                case"areaspline":
                                    var f = Math.round(e.plotX), h = Math.round(e.plotY);
                                    d.left = o.xAxis.pos + f, d.top = o.yAxis.pos + h, e.dataLabel && y.show_data_label && h >= 20 && (d.top -= 16)
                            }
                            return "bar" != l ? (d.left -= t / 2, d.top = d.top - i - 3) : (d.left = d.left - t, d.top = d.top - 3 - i), "edit" === n && (d.left = d.left + 40, d.top = d.top + 32), d
                        }
                    }

                    function ne(e, t, i) {
                        t.disableLink || ($(".J_dash_edit_content").length && $(".J_dash_edit_content").attr("issetFilter", "0"), $.isArray(e) || (e = [e]), re = (0, s.default)({
                            isSelection: i,
                            points: e,
                            chart: t,
                            charts: y.draw_chart_url,
                            mainChartContainer: u.mainChartContainer,
                            mainChartIdContainer: u.mainChartIdContainer,
                            mainChartColorContainer: u.mainChartColorContainer,
                            cb: function () {
                                y.$$phase || y.$apply()
                            }
                        }))
                    }

                    function ae(e, t) {
                        if (window.location.href.indexOf("/share/index") >= 0) return !1;
                        var i = y.all_project_list || angular.copy(w.getTreeCache());
                        if (i) b.check(e, t, i); else {
                            var n = [];
                            (bdp.bdpPageStatus.isUnderAdvDash() || "dash-fullscreen" === y.view) && (n = [0, 2]), bdp.bdpPageStatus.isUnderDataScreen() && (n = [1]);
                            var a = {categories: angular.toJson(n)};
                            m.project.getTree(a).then(function (n) {
                                n && (i = angular.copy(n.proj), x.initDeep(i, 0), w.setTreeCache(i), b.check(e, t, i))
                            })
                        }
                    }

                    g(["date", "letter", "custom", "percentage", "rowSummary", "chart.totalOfMeasures", "chart.saveColWidthSuccess", "saveFail"], y);
                    var re = {};
                    y.filterDisplay = !1;
                    var oe = y.$watch(N.lazyLoaded, function (e) {
                        e === !1 && (j(), oe())
                    }), se = null, le = y.$eval(N.index), ce = null;
                    y.chartOptions = {}, y.formulaKeyMap = r, y.setAdvanceAggregatorName = o, y.formatFieldPercentile = l;
                    var de = new F;
                    de.parseUrlParam();
                    var ue = de.getUrlObj();
                    void 0 != N.index && y.$watch(N.index, function (e) {
                        le = e
                    }), y.getCurrentLayerFilter = function (e) {
                        var t = y.drill_level || 0;
                        return e instanceof Array ? e : e[t]
                    }, y.$on("$destroy", function () {
                        re.destroy && re.destroy(), se && se.destroy && se.destroy(), se && A.remove(se.ct_id)
                    })
                }
            }
        }

        function n(e, t) {
            var i = e.info.drill_level, n = e.info.level_fields;
            if (angular.forEach(t, function (e) {
                void 0 != e.inner_range && delete e.disabled
            }), i) for (var a = 0, r = Number(i); a < r; a++) angular.forEach(t, function (e) {
                for (var t = 0; t < i; t++) void 0 != e.inner_range && e.fid == n[t].fid && (e.disabled = !0)
            })
        }

        function a(e, t) {
            for (var i, n = 0; n < e.y.length; n++) {
                i = e.y[n].data;
                for (var a = 0; a < i.length; a++) "INF" === i[a] && (i[a] = 0)
            }
            if ("C250" === t.type) for (var r, o = 0; o < e.y_optional.length; o++) {
                r = e.y_optional[o].data;
                for (var s = 0; s < r.length; s++) "INF" == r[s] && (r[s] = 0)
            }
        }

        function o(e, t, i) {
            var n = e.info, a = n.yAxis || [], r = n.yAxisOptional || [], o = a.concat(r);
            o = f(o.slice(), t);
            for (var s, l, c = [], d = 0; d < o.length; d++) s = o[d], s && (l = s.nick_name || s.name + t.setAdvanceAggregatorName(s)), l || (l = s.name), c.push({
                uniq_id: s.uniq_id,
                name: s.nick_name || s.name,
                color: s.series_color || i[(d + 0) % i.length],
                show_name: l
            });
            return c
        }

        function l(e) {
            var t = e.info, i = $("g.highcharts-legend-item");
            if (t && t.style && t.style.legend && t.style.legend.enabled) {
                var n = t.style.legend, a = n.itemStyle.fontSize;
                if ("inherit" == a) return !1;
                a = parseInt(a), i.children().each(function (e, t) {
                    (a = a < 12 ? 12 : a) > 12 && $(t).css("transform", "translateY(-" + (a - 8) / 2 + "px)")
                })
            }
        }

        function d(t, i, n, a, r) {
            var o = t.getChartType();
            if ((bdp.bdpPageStatus.isUnderDataScreen() || bdp.bdpPageStatus.isUnderAdvDash()) && (i.$emit("emitChartStyle", {
                chart: t,
                needFresh: !!i.isDrawDrillChart,
                opts: a || {}
            }), i.isDrawDrillChart = !1), n.path().indexOf("chart_edit") >= 0) {
                var a = {chart: t, isOnlyRedraw: !!i.saveChartOnlyRedraw};
                i.$emit("emitChartConfiguration", a)
            }
            i.saveChartOnlyRedraw = void 0, e.configurable.canEditPlotLine(o, t) && x(t, i, r)
        }

        function p(t, i, n, a) {
            var s = $.cookie("locale"), c = t.getChartType(), d = e.ChartType, p = t.info;
            if ("edit" === t.mode) {
                c !== d.GIS && g(t, i);
                var f;
                if (c === d.Waterfall) {
                    var m = p.waterfall_setting && p.waterfall_setting.color_theme || e.getColorsByType("C320", "bdp");
                    i.seriesColors = [{
                        name: "en" === s ? "Increased" : "增长",
                        color: m[0],
                        show_name: "en" === s ? "Increased" : "增长"
                    }, {name: "en" === s ? "Decreased" : "下降", color: m[1], show_name: "en" === s ? "Decreased" : "下降"}]
                } else if (c === d.Funnel) {
                    var m = p.funnel_setting && p.funnel_setting.color_theme || e.getColorsByType("C330", "bdp");
                    if (i.seriesColors = [], t.data.x.length) for (var y = t.data.x[0].data, _ = 0; _ < y.length; _++) {
                        if ("date" === t.data.x[0].data_type) {
                            var x = t.data.x[0].granularity;
                            ["hour", "minute", "second"].indexOf(x) > -1 && (x = "g_" + x), f = k.checkGranularity(x, y[_])
                        } else f = y[_];
                        i.seriesColors.push({name: y[_], color: m[_ % m.length], show_name: f})
                    } else {
                        var C = p.yAxis || [], S = p.yAxisOptional || [], T = C.concat(S);
                        T.forEach(function (e) {
                            delete e.series_color
                        }), i.seriesColors = o(t, i, m)
                    }
                    i.seriesColors.splice(i.seriesColors.length - 1, 1)
                } else if (c === d.Pie) {
                    var m = e.getColorsByType("C230", "bdp");
                    delete t.info.color_setting.is_seires, t.data.x.length && !$.isEmptyObject(t.info.color_setting) || (p.y[0].series_color && (m = [].concat(p.y).map(function (e) {
                        return e.series_color
                    })), i.seriesColors = o(t, i, m))
                } else if (c === d.KPICard) {
                    var m = e.getColorsByType("C310", "bdp");
                    i.seriesColors = o(t, i, m);
                    var D = i.chart_ops.meta.level[0].tb_conditional_formatting;
                    $.isEmptyObject(D) || 0 === D.length || D.forEach(function (e, t) {
                        for (var n = 0; n < i.seriesColors.length; n++) if (e.uniq_id === i.seriesColors[n].uniq_id) {
                            i.seriesColors.splice(n, 1);
                            break
                        }
                    })
                } else if (c === d.GIS) {
                    var L = i.viewData.currentLayer;
                    if (L) {
                        i.seriesColors = [];
                        for (var A = 0, E = L.y.length; A < E; A++) {
                            var I = L.y[A];
                            i.seriesColors.push({color: I.series_color, show_name: I.nick_name || I.name})
                        }
                    }
                } else if ([d.AreaMap, d.BubbleMap, d.TextMap].indexOf(c) > -1) {
                    if (!t.$elem.find(".map-mismatch-text").length) {
                        var F = t.data.x[0].mismatch;
                        if (F && F.length) {
                            var O = F.length, M = "", s = e.language || "zh";
                            M = "zh" === s ? "有" + O + "条未知地区" : "There are " + O + " unknown area";
                            var N = bdp.utils.encodeHTML(F.filter(function (e) {
                                    return !!e
                                }).join("、")),
                                j = $('<div class="map-mismatch-text pa guide"><p><a class="J-mismatch-count font-underline cursor-pointer">' + M + '</a></p><div class="guide-tip dropdown-wrap">' + N + "</div></div>");
                            t.$elem.append(j), t.$elem.addClass("has-mismatch-text")
                        }
                    }
                } else [d.Sunburst, d.TreeMap].indexOf(c) < 0 && (i.seriesColors = h(n, i, t));
                t._isStackChart() && (i.seriesColors = i.seriesColors.reverse()), i.$$phase || i.$digest()
            }
            [d.BubbleMap, d.AreaMap, d.TextMap].indexOf(c) > -1 && (t.info.map.region_area = t.info.map.region_area || {}, (0, u.default)({
                chart: t,
                force: "auto" === t.info.map.region_area.province && !t.data.y[0].data.length
            }));
            var P = !!n && $(n.container).find(".highcharts-yaxis").length > 0;
            P || (P = t.options.yAxis,
                P = "object" === (void 0 === P ? "undefined" : (0, r.default)(P)) ? P.enabled !== !1 : !!$.isArray(P) && t.options.yAxis.forEach(function (e) {
                    P = P || e.enabled !== !1
                })), (n && P && "C370" !== c || "C250" === c || "C261" === c) && (["C210", "C211", "C212", "C220", "C240", "C242", "C241", "C243", "C250", "C350", "C351", "C352"].indexOf(c) > -1 && v(i, t, n, a), "fullscreen" === t.mode && ["C210", "C220", "C240", "C243", "C250", "C350"].indexOf(c) > -1 && "mix" !== k.getPositiveOrNegative(t.data, "y") && b(t, n), "edit" === t.mode && (w(i, i.chart_ops), i.originChartTitle = i.chart_ops.name)), e.configurable.canEditChartLegend(c, t) && l(t)
        }

        function f(e, t) {
            return angular.forEach(e, function (e) {
                t.formatFieldPercentile(e)
            }), e
        }

        function h(i, n, a) {
            var r = a.info;
            if (r.compare_axis && r.compare_axis.length) {
                return o(a, n, e.getColorsByType(r.chart_type, "bdp"))
            }
            var s = r.hasOwnProperty("yAxis") ? r.yAxis : [],
                l = r.hasOwnProperty("yAxisOptional") ? r.yAxisOptional : [], c = [], d = i && i.options.colors || [],
                u = i && i.options.plotOptions || [],
                p = u.bar && ("percent" === u.bar.stacking || "normal" === u.bar.stacking) || u.column && ("percent" === u.column.stacking || "normal" === u.column.stacking) || u.area && ("percent" === u.area.stacking || "normal" === u.area.stacking);
            (0 === r.xAxis.length && p || "C250" == r.chart_type || "C243" == r.chart_type) && (p = !1), "C250" === r.chart_type && (["C211", "C212"].indexOf(r.type_optional[0]) > -1 && s.reverse(), ["C211", "C212"].indexOf(r.type_optional[1]) > -1 && l.reverse());
            var h = s.concat(l);
            h = f(angular.copy(h), n);
            for (var g = i && i.options.series || [], m = g.length, v = "", y = "", b = 0, _ = 0, w = m; _ < w; _++) {
                var x = g[_], C = h[_ - b];
                if (k.timePredicted.checkType(x, "enable", "all")) {
                    if (b += 1, "area" == x.time_seires_setting.series_type) continue;
                    v = x.nick_name ? x.nick_name : x.name + n.setAdvanceAggregatorName(x), y = x.name, c.push({
                        uniq_id: x.uniq_id,
                        fid: x.fid,
                        aggregator: x.aggregator,
                        name: y,
                        color: x.color || d[x._colorIndex],
                        show_name: v || y,
                        time_seires_setting: {enable: !0}
                    })
                } else t(c, x.uniq_id) || (p && (C = h[m - 1 - _]), C && (v = C.nick_name ? C.nick_name : C.name + n.setAdvanceAggregatorName(C), y = C.name), v || (p ? (v = g[m - 1 - _].name, y = g[m - 1 - _].name) : (v = x.name, y = x.name)), c.push({
                    uniq_id: x.uniq_id,
                    fid: x.fid,
                    aggregator: x.aggregator,
                    name: y,
                    color: x.color || d[x._colorIndex],
                    show_name: v || y
                }))
            }
            return p ? c.reverse() : c
        }

        function g(e, t) {
            var i = e.$elem, n = i.find(".highcharts-title"), a = e.info.drill_level, r = e.getChartType(), o = e.info,
                s = !o.hasOwnProperty("show_total") || !!o.show_total,
                l = o.xAxis.length > 0 ? o.xAxis[0].data_type : "", c = "sub_date" === l || "date" === l,
                d = "C200 C230 C250 C261 C271 C300 C310 C330".indexOf(r) < 0 && !o.split_compare;
            if (n.length > 0 && d) {
                var u = $(n[0]), p = u.context.offsetTop, f = "",
                    h = "C240 C241 C242".indexOf(r) > -1 && "right" == e.options.title.align ? "J-set-layer-title-right" : "";
                f = c ? o.title_formula || "LAST" : o.title_formula || "TOTAL";
                var g = t.formulaKeyMap, m = g[f] || ("zh" === t.language ? "总计" : "Total"), v = "";
                c && (v = '<li class="dropdown-item"><a>' + g.LAST + "</a></li>");
                var y = $('<div class="set-layer-title ' + h + '"><div class="pa hz-chart-title-set"><span class="cursor-pointer hz-chart-title">' + m + '<i class="bdp-icon ico-triangle-down"></i></span><ul class="hz-chart-title-formula dropdown-wrap cursor-pointer"><li class="dropdown-item"><a>' + g.TOTAL + '</a></li><li class="dropdown-item"><a>' + g.AVG + '</a></li><li class="dropdown-item"><a>' + g.MAX + '</a></li><li class="dropdown-item"><a>' + g.MIN + "</a></li>" + v + "</ul></div></div>").appendTo(i),
                    b = 0, _ = "auto", w = $(".highcharts-title .hz-chart-title-default");
                "LAST" == f && (b = w.width(), _ = 5 - w.width(), p -= 5), y.find(".hz-chart-title-set").css({
                    left: b,
                    right: _,
                    top: p - 3
                }).hover(function () {
                    $(this).find(".hz-chart-title-formula").show()
                }, function () {
                    $(this).find(".hz-chart-title-formula").hide()
                });
                var x = ["TOTAL", "AVERAGE", "MAX", "MIN", "LAST"];
                i.find(".hz-chart-title-formula").children("li").click(function () {
                    var e = $(this).index(), i = x[e];
                    t.$root.setOperateRecord("chart.op.config.chooseChartFormula", [$(this).text()]), C({title_formula: i}, a, t), $(this).parent().hide()
                }), s ? $(".set-layer-title").show() : $(".set-layer-title").hide()
            }
        }

        function m(e, t) {
            var i = e.axisTitle && e.axisTitle.element, n = t.getBoundingClientRect(), a = Math.ceil(n.width),
                r = Math.ceil(n.height);
            return {x: i && y(i.attributes, "x"), y: i && y(i.attributes, "y"), width: a, height: r}
        }

        function v(e, t, i, n) {
            var a = t.info, r = a.sort, o = r && r.type || "default",
                s = a.xAxis.length > 0 ? a.xAxis[0].data_type : "", l = a.chart_type, c = t.$elem,
                d = c.find(".highcharts-axis-title"), u = c.find(".set-yaxis-sort"),
                p = c.find(".set-yaxis-sort:eq(1)"), f = c.find(".dot-guide-sort"),
                h = a.compare_axis && a.compare_axis.length, g = r && "" !== r.type ? r.type : "default", v = "default",
                y = "default";
            if (d.position() && i.yAxis) {
                if ("date" !== s && a.xAxis.length && a.yAxis.length && !u.length) {
                    if (["C243"].indexOf(l) > -1 && t.data.y.length > 1 || "C250" == l ? (r && (h ? 1 == r.col_index ? v = g : 2 == r.col_index && (y = g) : (v = r.fid == a.y[0].fid ? g : "default", ("C243" == l && r.fid == a.y[1].fid || "C250" == l && a.y_optional && a.y_optional.length > 0 && r.fid == a.y_optional[0].fid) && (y = g))), u = $('<span class="set-yaxis-sort ' + v + '"><i class="bdp-icon ico-sort-' + v + '1"></i></span>').appendTo(c), p = $('<span class="set-yaxis-sort ' + y + '"><i class="bdp-icon ico-sort-' + y + '1"></i></span>').appendTo(c), p.click(function (i) {
                        D(i, t, e, n, 1)
                    })) : u = $('<span class="set-yaxis-sort ' + o + '"><i class="bdp-icon ico-sort-' + o + '1"></i></span>').appendTo(c), 3 == n.enterprise_type && n.personalInfo && 5 == n.personalInfo.chart_guide && location.href.indexOf("chart_edit") >= 0) {
                        var b = $('                    <div class="pa dot-guide-sort">                         <div class="circle-group">                            <div class="circle4"></div>                            <div class="circle3"></div>                            <div class="circle2"></div>                            <div class="circle1"></div>                        </div>                    </div>                ').appendTo(c).position({
                            my: "left top",
                            at: "left top",
                            of: ".set-yaxis-sort"
                        });
                        b.on("click.dotguideSort", function (e) {
                            b.remove(), n.personalInfo.chart_guide = 0;
                            $.ajax({
                                url: "/api/user/guide_set",
                                type: "POST",
                                dataType: "json",
                                data: {chart_guide: "0"}
                            }).done(function (e) {
                                0 !== e.status && errorHandle(e.errstr)
                            }).fail(function (e) {
                                errorHandle(e)
                            })
                        }), f = b
                    }
                    u.click(function (i) {
                        D(i, t, e, n, 0)
                    })
                }
                var _ = function (e, n) {
                    var a = m(i.yAxis[n], d[n]), r = "edit" === t.mode ? {
                        left: +a.x - .5 * a.width + 18,
                        bottom: i.chartHeight - a.y + 26,
                        transform: "rotate(90deg)"
                    } : {left: +a.x - .5 * a.width - 22, bottom: i.chartHeight - a.y - 6, transform: "rotate(90deg)"};
                    e.css(r), 0 == n && f && f.css({left: r.left - 6, top: r.top + 11})
                }, w = function (e, n) {
                    var a = m(i.yAxis[n], d[n]), r = "edit" === t.mode ? +a.x + 26 : +a.x - 14;
                    1 == n && (r += 8);
                    var o = "edit" === t.mode ? {left: r, top: +a.y - .5 * a.height + 6} : {
                        left: r,
                        top: +a.y - .5 * a.height - 26
                    };
                    e.css(o), 0 == n && f && f.css({left: o.left - 6, top: o.top + 11})
                };
                ["C240", "C241", "C242", "C243"].indexOf(l) > -1 || "C250" == l && a.seriesType ? (d[0] && _(u, 0), ["C243", "C250"].indexOf(l) > -1 && d[1] && _(p, 1)) : "C261" !== l && (d[0] && w(u, 0), "C250" == l && d[1] && w(p, 1))
            }
        }

        function y(e, t) {
            if (e.length) {
                return e.getNamedItem(t).value
            }
        }

        function b(e, t) {
            var i, n, a = e.$elem, r = e.info.chart_type, o = a.find(".highcharts-axis-title"), s = a.find(".zoom"),
                l = a.find(".zoom:eq(1)");
            if (o.position() && t.yAxis) {
                e.zoomYaxis = void 0 === e.zoomYaxis ? e.info.yaxis_auto_zoom : e.zoomYaxis, e.zoomYaxisRight = void 0 === e.zoomYaxisRight ? e.info.yaxis_auto_zoom_right : e.zoomYaxisRight;
                var c = e.zoomYaxis ? "ico-zoomout-white" : "ico-zoomin-white",
                    d = e.zoomYaxisRight ? "ico-zoomout-white" : "ico-zoomin-white";
                e.info.xAxis.length && e.info.yAxis.length && !s.length && (s = $('<i class="pa cursor-pointer zoom bdp-icon ' + c + '"></i>').appendTo(a), (["C243"].indexOf(r) > -1 && e.data.y.length > 1 || "C250" == r) && (l = $('<i class="pa cursor-pointer zoom bdp-icon ' + d + '"></i>').appendTo(a), l.on("click", function (t) {
                    L(t, e, 1)
                })), s.on("click", function (t) {
                    L(t, e, "C243" == r ? 1 : 0)
                }));
                var u = function (e, n) {
                    var a = m(t.yAxis[n], o[n]);
                    i = a.x - .5 * a.width - 44, e.css({left: i, bottom: t.chartHeight - a.y - 3})
                }, p = function (a, r) {
                    var s = m(t.yAxis[r], o[r]);
                    i = s.x - 11, n = s.y - .5 * s.height - 48, "edit" === e.mode && (i += 40, n += 32), 1 == r && (i += 8), a.css({
                        left: i,
                        top: n
                    })
                };
                ["C240", "C241", "C242", "C243"].indexOf(r) > -1 ? (o[0] && u(s, 0), "C243" == r && o[1] && u(l, 1)) : "C261" !== r && (o[0] && p(s, 0), "C250" == r && o[1] && p(l, 1))
            }
        }

        function w(t, i) {
            var n = i.meta;
            t.chartSetting = {};
            var a = e.helper, r = n.level[t.drill_level], o = "", s = $.cookie("yaxis_max"), l = $.cookie("yaxis_min"),
                c = r.yaxis_max, d = r.yaxis_min;
            if (r.yaxis_name ? o = r.yaxis_name : "C280" == r.chart_type && r.y_scatter ? o = r.y_scatter.length && r.y_scatter[0].name : r.y.length > 0 && (o = r.y[0].name), t.chartSetting.yaxis_left = {}, "C243" === r.chart_type) {
                var u = "", p = t.$bdpChart.data;
                r.compare_axis && r.compare_axis.length ? (o = r.yaxis_name || p.y[0].nick_name, u = r.yaxis_name_right || p.y[1] && p.y[1].nick_name || "") : u = r.yaxis_name_right || r.y[1] && r.y[1].name || o;
                var f = a.getEdgeValueFromMultiArray(p, "y", "max");
                s = f, l = 0;
                var h = r.yaxis_max, g = r.yaxis_min;
                c = h <= 0 ? f : h, d = g < 0 ? 0 : g
            }
            if (t.chartSetting.yaxis_left = {
                name: o,
                unit: r.yaxis_unit,
                max_value: +(r.yaxis_max_disabled ? s : c),
                min_value: +(r.yaxis_min_disabled ? l : d),
                max_disabled: "C261" !== i.type && !!r.yaxis_max_disabled,
                min_disabled: !!r.yaxis_min_disabled,
                auto_zoom: r.yaxis_auto_zoom || !1
            }, "C243" === r.chart_type && (t.chartSetting.yaxis_left.rightName = u), "C280" === r.chart_type) {
                var m = r.xaxis_name;
                !m && r.y.length && (m = r.y[0].name), t.chartSetting.xaxis = {name: m, unit: r.xaxis_unit}
            }
            if ("C250" === r.chart_type) {
                var v = void 0 === r.yaxis_max_disabled_right, y = void 0 === r.yaxis_min_disabled_right,
                    b = r.yaxis_name_right;
                b || (b = r.y_optional.length ? r.y_optional[0].name : ""), t.chartSetting.yaxis_right = {
                    name: b,
                    unit: r.yaxis_unit_right,
                    max_value: +(v || r.yaxis_max_disabled_right ? $.cookie("yaxis_max_right") : r.yaxis_max_right),
                    min_value: +(y || r.yaxis_min_disabled_right ? $.cookie("yaxis_min_right") : r.yaxis_min_right),
                    max_disabled: !!v || !!r.yaxis_max_disabled_right,
                    min_disabled: !!y || !!r.yaxis_min_disabled_right,
                    auto_zoom: r.yaxis_auto_zoom_right || !1
                }
            }
            t.originChartSetting = angular.copy(t.chartSetting)
        }

        function x(e, t, i) {
            function n(e, t, n) {
                if (e.stopPropagation(), $(".ngdialog-plotline-numerical-format").length > 1) return !1;
                var a = $(e.target);
                a.hasClass("guide-label-text") && !a.data("label-id") && (a = a.closest("guide-label-left"));
                var r = a.data("label-line"), o = angular.fromJson(r) || {}, s = a.data("axis-type"),
                    l = n.chart_ops.meta.level[n.drill_level];
                i.open({
                    template: "/static/chart-edit/plotline/chart-plotline-numerical-format.html",
                    className: "ngdialog-theme-default ngdialog-plotline-numerical-format",
                    scope: n,
                    data: {chartOpsMeta: l, lineData: o, axisType: s},
                    controller: "plotlineNumericalFormatCtrl"
                })
            }

            function a(e, t) {
                e.stopPropagation();
                var i = $(e.target);
                i.hasClass("guide-label-text") && !i.data("label-id") && (i = i.closest("guide-label-left"));
                var n = $(e.target).offset(), a = i.find(".guide-label-text"),
                    o = i.find(".guide-label-text").height() + 16, s = i.data("label-top"), l = i.data("axis-type"),
                    c = $(r).find(".highcharts-container").offset();
                "over" == t && "left" == l && (c.left > n.left && a.css({left: c.left - n.left + 1 + "px"}), c.top > n.top - o ? a.css({top: s + o + 18 + "px"}) : a.css({top: s}), $(r).addClass("J-guide-line-tip-visible")), "leave" == t && (a.css({left: 0}), $(r).removeClass("J-guide-line-tip-visible"))
            }

            var r = e.$elem, o = r.find(".highcharts-plot-line-label");
            bdp.bdpPageStatus.isUnderChartEdit() && o.off("click.plotLineLabel").on("click.plotLineLabel", function (i) {
                n(i, e, t)
            }), o.off("mouseover.plotLineLabel").on("mouseover.plotLineLabel", function (e) {
                a(e, "over")
            }), o.off("mouseleave.plotLineLabel").on("mouseleave.plotLineLabel", function (e) {
                a(e, "leave")
            })
        }

        function C(e, t, i, n) {
            n || (n = {not_need_redraw: !1});
            var a = i.chart_ops.meta.level[t];
            if (e.need_replace) for (var r in e) "need_replace" !== r && (a[r] = e[r]); else $.extend(!0, a, e);
            i.saveChartImmediate({
                only_save_meta: n.only_save_meta,
                not_need_redraw: n.not_need_redraw,
                only_refresh_data: !0,
                is_drill_chart: !!t
            })
        }

        angular.module("bdp.charts", []).directive("bdpChart", i);
        var k = e.helper, S = e.ChartType;
        i.$inject = ["ngDialog", "$compile", "formulaKeyMap", "setAdvanceAggregatorName", "formatFieldPercentile", "$rootScope", "$location", "$timeout", "$jsTipTranslate", "commonService", "errHint", "$state", "chartJumpFuns", "projectTreeCache", "multipleProService", "$translate", "chartEditService", "chartInstService", "globalDateSchemeService", "dashChartLinkService", "bdpOuterParamService", "formula"];
        var T = {
            travase: function (e) {
                angular.forEach(e, function (e) {
                    delete e.disabled, e.items && e.items.length > 0 && T.travase(e.items)
                })
            }, disabledItem: function (e, t) {
                angular.forEach(t, function (t) {
                    t.hasOwnProperty("inner_adv_type") || (t.inner_adv_type = ""), t.fid == e && "" == t.inner_adv_type ? t.disabled = !0 : t.items && t.items.length > 0 && T.disabledItem(e, t.items)
                })
            }, handler: function (e, t) {
                var i = e.info.drill_level, n = e.info.level_fields;
                if (T.travase(t), i) for (var a = 0, r = Number(i); a < r; a++) T.disabledItem(n[a].fid, t)
            }
        }, D = function (e, t, i, n, a) {
            e.stopPropagation();
            var r, o = t.info, s = o.chart_type, l = (t.$elem, e.currentTarget.className), c = "default",
                d = t.info.sort, u = t.data.y[0];
            switch (/(?:^|\s+)(desc|asc)(?:\s+|$)/.test(l) && (c = RegExp.$1), c) {
                case"desc":
                    r = "asc";
                    break;
                case"asc":
                    r = "";
                    break;
                default:
                    r = "desc"
            }
            var p = "C243" == s && o.compare_axis && o.compare_axis.length;
            "C250" == s && 1 == a && (u = t.data.y_optional[0]);
            var f = u.uniq_id;
            d && d.uniq_id && "y" == d.axis && d.uniq_id === f || (d = {fid: u.fid, uniq_id: f});
            var h = {axis: "y", type: r, fid: d.fid, uniq_id: d.uniq_id};
            p ? h.col_index = a + 1 : "C243" == s && (h.col_index = a, a && (h.fid = t.data.y[1].fid, h.uniq_id = t.data.y[1].uniq_id)), "edit" === t.mode ? C({
                is_advanced_sort: 0,
                sort: h
            }, o.drill_level, i) : t.drawWithOption({
                sort: h,
                rootScope: n
            }), $(e.currentTarget).removeClass(c).addClass(r || "default"), $(e.currentTarget).find(".bdp-icon").removeClass("ico-sort-" + c + "1").addClass("ico-sort-" + (r || "default") + "1")
        }, L = function (t, i, n) {
            t.stopPropagation();
            var a, r, o = (i.$elem, i.info.chart_type), s = [S.PStackColumn, S.PStackBar, S.PStackArea].indexOf(o) > -1,
                l = o === S.ComparisonBar, c = s || l ? 1 : 1.2, d = "y", u = i.zoomYaxis;
            "C250" == o && 1 == n && (d = "y_optional", u = i.zoomYaxisRight);
            var p = !1;
            if ("C250" === o && "C211" === i.info.type_optional[n] && (p = !0), p ? (a = k.getSumByColumnFromMultiArray(i.data, d, "min"), r = k.getSumByColumnFromMultiArray(i.data, d, "max")) : (a = k.getEdgeValueFromMultiArray(i.data, d, "min"), r = k.getEdgeValueFromMultiArray(i.data, d, "max")), r !== a) {
                if (u) {
                    var f = i.options.yAxis[n].tickPositions || i.options.yAxis[n].tickPositioner(),
                        h = e.helper.formatNumber(f[f.length - 1] * c), g = [0, h.mul(.25), h.mul(.5), h.mul(.75), h];
                    if (f[f.length - 1] > 0) {
                        if (i.options.yAxis[n].tickPositions = g, "C243" === o) {
                            var m = [-g[4], -g[3], -g[2], -g[1], -g[0]];
                            i.options.yAxis[0].tickPositions = m, i.options.yAxis[1].tickPositions = g
                        }
                    } else h = e.helper.formatNumber(f[0]), i.options.yAxis[n].tickPositions = [h, h.mul(.75), h.mul(.5), h.mul(.25), 0]
                } else {
                    var v, y = r > 0 && a >= 0 ? "positive" : r <= 0 && a < 0 ? "negative" : "mix", b = .05 * (r - a);
                    "positive" == y ? v = k.getAdjustValue(r + b, Math.max(0, a - b)) : "negative" == y && (v = k.getAdjustValue(Math.min(0, r + b), a - b));
                    var _ = v.max.sub(v.min),
                        g = [v.min, v.min.add(_.mul(.25)), v.min.add(_.mul(.5)), v.min.add(_.mul(.75)), v.max];
                    if (i.options.yAxis[n].tickPositions = g, "C243" === o) {
                        var m = [-g[4], -g[3], -g[2], -g[1], -g[0]];
                        i.options.yAxis[0].tickPositions = m, i.options.yAxis[1].tickPositions = g
                    }
                }
                i._setGridPlotLine(), "C250" == o && 1 == n ? i.zoomYaxisRight = !i.zoomYaxisRight : i.zoomYaxis = !i.zoomYaxis, i.chartInstance = Highcharts.chart(i.$elem[0], i.options)
            }
        }
    }(bdpChart)
}, function (e, t, i) {
    "use strict";

    function n(e) {
        return e && e.__esModule ? e : {default: e}
    }

    Object.defineProperty(t, "__esModule", {value: !0}), t.default = function (e) {
        var t = ["C271", "C272", "C273"], i = {}, n = $.extend({
            isSelection: !0,
            points: [],
            chart: null,
            charts: [],
            mainChartContainer: [],
            mainChartIdContainer: [],
            mainChartColorContainer: {},
            cb: function () {
            }
        }, e), a = {
            checkParams: function () {
                if (!n.points || !n.chart) throw"The points & chart params is needed!"
            }, objs: {
                init: function () {
                    var e = a.objs.isTable = "C200" === n.chart.info.chart_type,
                        i = a.objs.isWordCloud = "C340" === n.chart.info.chart_type,
                        o = "C400" === n.chart.getChartType();
                    if (a.objs.linkInfo = n.chart.optional.link_info, e || i) return void a.objs.initFromTable();
                    if (o) return a.objs.initFromGisMap(), !1;
                    var s = (a.objs.isStack = r.default.checkStack(n.chart), a.objs.isFreeField = "free_drill_opt" in n.chart.optional),
                        l = (a.objs.isMapType = $.inArray(n.chart.info.chart_type, t) > -1, a.objs.getPointData(s));
                    a.objs.setMask(), a.objs.setAllMainChartData(!0, l), n.isSelection ? a.objs.updateColor.updateSTColor() : a.objs.updateColor.updateCTColor(n.points[0], l), $.isEmptyObject(l) || a.objs.refreshSubCharts(), a.objs.setLogger()
                }, setLogger: function (e) {
                    var t = e ? "button_click" : "chart_click", i = n.chart.ct_id, a = n.points.length;
                    (0, u.default)({mainChartContainer: n.mainChartContainer, linkType: t, ctId: i, totalCount: a})
                }, initFromTable: function () {
                    var e = n.chart, t = (e.ct_id, e.data.x, e.info.chart_type, e.pointData);
                    a.objs.setAllMainChartData(!0, t), a.objs.refreshSubCharts()
                }, initFromGisMap: function () {
                    if (n.points && 0 == n.points.length) a.objs.setAllMainChartData(!1, n.points); else {
                        var e = a.objs.getGisMapPointData();
                        a.objs.setAllMainChartData(!0, e)
                    }
                    a.objs.refreshSubCharts()
                }, getGisMapPointData: function () {
                    var e = n.chart.optional.master_layer_id || t[0].layer_id, t = n.chart.gisMap.layerInfo,
                        i = _.find(t, function (t) {
                            return t.layer_id === e
                        }), a = t.indexOf(i), r = n.points.filter(function (e) {
                            return e.layerIndex === a
                        }), o = _.keyBy(i.x, "fid"), s = {};
                    return r.forEach(function (e, t) {
                        var n = [], a = [];
                        e.point.labels.forEach(function (e, t) {
                            var n = o[e.fid];
                            n && a.push({
                                field: e.fid,
                                field_value: e.value_date ? e.value_date : e.value,
                                index: i.x.indexOf(n)
                            })
                        }), a.length > 0 && n.push(a), n.length > 0 && (s[t] = n)
                    }), s
                }, getPointData: function () {
                    for (var e = {}, t = n.points, i = n.chart.data.x, o = n.chart.data.y.concat(n.chart.data.y_optional || []), s = n.chart.info.compare_axis, l = 0, c = t.length; l < c; l++) {
                        var d = t[l];
                        if (!(d = d && d.series ? d : n.chart.chartInstance.getSelectedPoints()[l]) || d && !d.series) return e;
                        if (a.objs.isMapType && null === d.value) return e;
                        var u = d.index, p = d.series.type, f = [];
                        if (e[u] = e[u] || [], "C281" === n.chart.info.chart_type) {
                            var h = i[0], g = r.default.getXDataIndex(d.series.data, h.data, d.index);
                            f.push({
                                field: h.fid,
                                index: 0,
                                field_value: d.source.slice(-1)[0]
                            }), "scatter" === p && (f = [{
                                field: h.fid,
                                index: 0,
                                field_value: d.source.slice(-1)[0]
                            }, {field: i[1].fid, index: 1, field_value: d.source[2]}])
                        } else {
                            for (var m = 0, v = i.length; m < v; m++) {
                                var h = i[m], g = r.default.getXDataIndex(d.series.data, h.data, d.index), y = {
                                    field: h.fid,
                                    index: m,
                                    field_value: a.objs.isMapType ? d["hz-code"].toString() : h.data[g]
                                };
                                a.objs.isFreeField && "date" === h.data_type && (y.granularity = h.granularity), f.push(y)
                            }
                            if (n.isSelection) for (var b = d.series.index, _ = a.objs.isStack ? o.length - 1 - b : b, w = o[_] ? o[_].compare_names.slice(1) : [], x = 0, C = w.length; x < C; x++) {
                                var k = w[x], S = s[x].fid;
                                f.push({field: S, field_value: k})
                            }
                        }
                        e[u].push(f), "mapbubble" != p && "map" !== p || (e.hzCode = d["hz-code"] || d.code)
                    }
                    return n.chart.pointData = e, e
                }, getFids: function (e) {
                    for (var t = [], i = 0, n = e.length; i < n; i++) {
                        var a = e[i];
                        t.push(a.fid)
                    }
                    return t
                }, refreshSubCharts: function () {
                    var e = a.objs.linkInfo;
                    for (var t in n.charts) for (var i = n.charts[t], o = i.options.ct_id, s = 0, l = e.length; s < l; s++) {
                        var c = e[s];
                        if (o === c.link_ct_id) {
                            var d = r.default.getLinkValue(o, n.mainChartContainer);
                            delete i.options.optional.filter_list, i.options.read_cache = !1, i.options.optional.linked_value = d, i.options.optional._t = +new Date
                        }
                    }
                    n.cb()
                }, setAllMainChartData: function (e, t) {
                    var i = a.objs.linkInfo, r = n.chart.ct_id, o = n.mainChartContainer,
                        s = $.inArray(r, n.mainChartIdContainer);
                    a.objs.isTable;
                    if (e) {
                        if (s > -1) return o[s].pointData = t, o;
                        var l = {
                            ctId: r,
                            linkInfo: i,
                            pointData: t,
                            isSelection: n.isSelection,
                            isFreeField: a.objs.isFreeField ? 1 : 0
                        };
                        o.push(l), n.mainChartContainer = o, n.mainChartIdContainer.push(r)
                    } else angular.forEach(o, function (e, t) {
                        e.ctId == r && o.splice(t, 1)
                    }), n.mainChartContainer = o, n.mainChartIdContainer.splice(s, 1)
                }, setMask: function () {
                    var e = n.chart.$elem, t = (n.chart.ct_id, e.parent()), i = document.createElement("div"), r = $(i);
                    r.addClass("link-mask J-link-mask"), t.append(r), r.off("click.linkMask").on("click.linkMask", function () {
                        var e = a.objs.getPointData(a.objs.isFreeField);
                        n.isSelection ? a.objs.updateColor.recoverySTColor() : a.objs.updateColor.recoveryCTColor(), a.objs.setAllMainChartData(!1, e), $.isEmptyObject(e) || a.objs.refreshSubCharts(), r.off("click.linkMask"), r.remove(), a.objs.maskTip.hide()
                    }), r.off("mousemove.linkMask").on("mousemove.linkMask", function (e) {
                        a.objs.maskTip.show({evt: e})
                    }), r.off("mouseleave.linkMask").on("mouseleave.linkMask", function (e) {
                        a.objs.maskTip.hide()
                    })
                }
            }, initPlugins: function () {
                bdpChart.language = bdpChart.language || "zh";
                var e = "zh" === bdpChart.language ? "点击取消联动" : "Cancel interactive when clicking";
                a.objs.updateColor = (0, s.default)({
                    points: n.points,
                    chart: n.chart,
                    mainChartContainer: n.mainChartContainer,
                    mainChartColorContainer: n.mainChartColorContainer
                }), a.objs.maskTip = (0, c.default)({content: e})
            }, eventFuns: {}, bindDomFuns: function (e) {
            }, destroy: function () {
                if (a && a.objs) {
                    for (var e in a.objs) {
                        var t = a.objs[e];
                        t && t.destroy && t.destroy()
                    }
                    a = null
                }
            }
        };
        return function () {
            a.checkParams(), a.initPlugins(), a.bindDomFuns(), a.objs.init()
        }(), i.destroy = a.destroy, i
    };
    var a = i(158), r = n(a), o = i(676), s = n(o), l = i(677), c = n(l), d = i(336), u = n(d)
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.default = function (e) {
        var t = ["pie", "map"], i = {},
            n = $.extend({points: [], chart: null, mainChartContainer: [], mainChartColorContainer: {}}, e), r = {
                objs: {
                    init: function () {
                        var e = n.chart.info.chart_type;
                        (r.objs.isTable = "C200" === n.chart.info.chart_type) || (r.objs.isLineType = "C220" === e || "C250" === e, r.objs.isAreaType = $.inArray(e, ["C350", "C351", "C352"]) > -1, r.objs.isPieOrMapType = r.objs.checkPieOrMapType())
                    }, checkPieOrMapType: function () {
                        var e = n.chart;
                        if (e.isSplitChart()) return !1;
                        var i = e.chartInstance ? e.chartInstance.series : e.options.series;
                        if (!e.options.chart) return !1;
                        var a = e.options.chart.type;
                        if (i) for (var r = 0, o = i.length; r < o && !(a = a || i[r].type); r++) ;
                        return $.inArray(a, t) > -1
                    }, checkHasLineChart: function () {
                        var e = [], t = !1, i = n.chart.chartInstance;
                        return $.each(i.series, function (t) {
                            /^Navigator/.test(i.series[t].name) || e.push(i.series[t])
                        }), e && e.forEach(function (e) {
                            "line" == e.type && (t = !0)
                        }), t
                    }, updateSTColor: function () {
                        var e = r.objs.isLineType || r.objs.isAreaType;
                        n.chart.cancelSelection(e, !0)
                    }, recoverySTColor: function () {
                        var e = n.chart;
                        e.isSplitChart() ? e.chartInstances.forEach(function (e) {
                            e.chartInstance.selectedPoints = null
                        }) : e.chartInstance.selectedPoints = null, e.cancelSelection()
                    }, updateCTColor: function (e, t) {
                        var i = n.chart, a = (i.ct_id, i.info.chart_type), o = r.objs.ctHandlers;
                        if (r.objs.isLineType || r.objs.isAreaType) if ("C250" === a) {
                            var s = i.chartInstance;
                            r.objs.checkHasLineChart() && o.lineChart.update(e, s), o.otherChart.update(e, t, s.series, 0)
                        } else if (i.isSplitChart()) i.chartInstances.forEach(function (t) {
                            o.lineChart.update(e, t)
                        }); else {
                            var s = i.chartInstance;
                            o.lineChart.update(e, s)
                        } else if (i.isSplitChart()) i.chartInstances.forEach(function (i, n) {
                            r.objs.isPieOrMapType ? o.pieOrMapChart.update(e, t, i.series) : o.otherChart.update(e, t, i.series, n)
                        }); else {
                            var s = i.chartInstance;
                            r.objs.isPieOrMapType ? o.pieOrMapChart.update(e, t, s.series) : o.otherChart.update(e, t, s.series, 0)
                        }
                    }, recoveryCTColor: function () {
                        var e = n.chart, t = (e.ct_id, e.info.chart_type), i = r.objs.ctHandlers;
                        if (r.objs.isLineType || r.objs.isAreaType) if ("C250" === t) {
                            var a = e.chartInstance;
                            r.objs.checkHasLineChart() && i.lineChart.recovery(a), i.otherChart.recovery(a.series, 0)
                        } else if (e.isSplitChart()) e.chartInstances.forEach(function (e) {
                            i.lineChart.recovery(e)
                        }); else {
                            var a = e.chartInstance;
                            i.lineChart.recovery(a)
                        } else if (e.isSplitChart()) e.chartInstances.forEach(function (e, t) {
                            r.objs.isPieOrMapType ? i.pieOrMapChart.recovery(e.series) : i.otherChart.recovery(e.series, t)
                        }); else {
                            var a = e.chartInstance;
                            r.objs.isPieOrMapType ? i.pieOrMapChart.recovery(a.series) : i.otherChart.recovery(a.series, 0)
                        }
                    }, ctHandlers: {
                        lineChart: {
                            update: function (e, t) {
                                t.xAxis[0].removePlotLine("chartLinkPlotLine"), t.xAxis[0].addPlotLine({
                                    value: e.x,
                                    color: "rgba(134,139,156,0.5)",
                                    width: 1,
                                    id: "chartLinkPlotLine"
                                })
                            }, recovery: function (e) {
                                e.xAxis[0].removePlotLine("chartLinkPlotLine")
                            }
                        }, pieOrMapChart: {
                            update: function (e, t, i) {
                                var a = (n.chart, []), r = e.index;
                                if (null !== e.value) {
                                    for (var o = t[r][0], s = 0, l = o.length; s < l; s++) a.push(o[s].field_value);
                                    angular.forEach(i, function (e, t) {
                                        var i = e.data, n = null;
                                        if (i.length > 1 && (angular.forEach(i, function (e, t) {
                                            (e.name || e.x) == a[0] && (n = t)
                                        }), angular.isNumber(n))) {
                                            var r = !(!i[n].selected && !i[n].sliced);
                                            i[n].select ? i[n].select(!r) : (e._color = i[n].color, e._index = n, i[n].color = r ? e._color : "#ccc", e.update({data: i}))
                                        }
                                    })
                                }
                            }, recovery: function (e) {
                                angular.forEach(e, function (e, t) {
                                    var i = e.data, n = !1;
                                    i.length > 1 && (angular.forEach(i, function (t, a) {
                                        i[a].select ? (n = n || !0, i[a].select(!1)) : i[a].color = e._index === a ? e._color : t.color
                                    }), n || e.update({data: i}), delete e._index, delete e._color)
                                })
                            }
                        }, otherChart: {
                            update: function (e, t, i, r) {
                                for (var o = n.chart, s = (o.ct_id, e.index), l = o.data.x, c = [], d = t[s][0], u = 0, p = d.length; u < p; u++) c.push(d[u].field_value);
                                angular.forEach(i, function (e, t) {
                                    angular.forEach(e.data, function (t, i) {
                                        var n = [];
                                        angular.forEach(l, function (t, r) {
                                            var o = a.default.getXDataIndex(e.data, t.data, i);
                                            n.push(t.data[o])
                                        }), angular.equals(c, n) ? t && t.graphic && t.graphic.attr("opacity", 1) : t && t.graphic && t.graphic.attr("opacity", .3)
                                    })
                                })
                            }, recovery: function (e, t) {
                                var i = n.chart;
                                i.ct_id;
                                angular.forEach(e, function (e, t) {
                                    angular.forEach(e.data, function (e, t) {
                                        e && e.graphic && e.graphic.attr("opacity", 1)
                                    })
                                })
                            }
                        }
                    }
                }, checkParams: function () {
                    if (!n.chart) throw"The chart param is needed!"
                }, initPlugins: function () {
                }, bindDomFuns: function (e) {
                }, eventFuns: {}, destroy: function () {
                    if (r && r.objs) {
                        for (var e in r.objs) {
                            var t = r.objs[e];
                            t && t.destroy && t.destroy()
                        }
                        r = null
                    }
                }
            };
        return function () {
            r.checkParams(), r.initPlugins(), r.bindDomFuns(), r.objs.init()
        }(), i.destroy = r.destroy, i.updateSTColor = r.objs.updateSTColor, i.updateCTColor = r.objs.updateCTColor, i.recoveryCTColor = r.objs.recoveryCTColor, i.recoverySTColor = r.objs.recoverySTColor, i
    };
    var n = i(158), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n)
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {value: !0}), t.default = function (e) {
        var t = {}, i = $.extend({wrap: "body", title: null, content: null}, e), n = {
            checkParams: function () {
                if (!i.content) throw"The args content is needed."
            }, objs: {
                init: function () {
                }, show: function (e) {
                    var t = null, r = null;
                    t = (0, a.default)({
                        title: i.title,
                        content: i.content
                    }), r = n.objs.getOuter(), r.length || ($(i.wrap).append(t), r = n.objs.getOuter()), n.objs.setPos(e)
                }, remove: function () {
                    n.objs.getOuter().remove()
                }, setPos: function (e) {
                    var t = e.evt, i = n.objs.getOuter(), a = i.outerWidth(), r = i.outerHeight(),
                        o = $(window).width(), s = $(window).height(), l = t.clientY, c = t.clientX, d = l + 10,
                        u = c + 10;
                    c + 10 + a > o && (u = c - 10 - a), d + r > s && (d = l - 10 - r), i.css({top: d, left: u})
                }, getOuter: function () {
                    return $(i.wrap).find(".J-tip-layer")
                }
            }, initPlugins: function () {
            }, bindDomFuns: function (e) {
            }, eventFuns: {}, destroy: function () {
                if (n && n.objs) {
                    n.objs.remove();
                    for (var e in n.objs) {
                        var t = n.objs[e];
                        t && t.destroy && t.destroy()
                    }
                    n = null
                }
            }
        };
        return function () {
            n.checkParams(), n.initPlugins(), n.bindDomFuns(), n.objs.init()
        }(), t.destroy = n.destroy, t.show = n.objs.show, t.hide = n.objs.remove, t
    };
    var n = i(678), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n)
}, function (e, t, i) {
    function n(e) {
        var t, i = "", n = e || {};
        return function (e, n) {
            i = i + '<div class="dropdown-wrap chart-info-summary dropdown-tips-layer J-tip-layer"><em class="arrow-up"></em><div class="summary-content-wrap"><ul><li class="label" style="width:50px;">' + a.escape(null == (t = n) ? "" : t) + '</li><li class="text ng-binding">' + a.escape(null == (t = e) ? "" : t) + "</li></ul></div></div>"
        }.call(this, "content" in n ? n.content : "undefined" != typeof content ? content : void 0, "title" in n ? n.title : "undefined" != typeof title ? title : void 0), i
    }

    var a = i(99);
    e.exports = n
}, function (e, t, i) {
    "use strict";
    var n = i(84), a = function (e) {
        return e && e.__esModule ? e : {default: e}
    }(n);
    angular.module("bdp.charts").service("chartInstService", [function () {
        var e = {}, t = {};
        this.all = function () {
            return e
        }, this.set = function (i, n) {
            e[i] = n, t[i] && (t[i].forEach(function (e) {
                e(n)
            }), delete t[i])
        }, this.get = function (t) {
            return e[t]
        }, this.on = function (i) {
            return new a.default(function (n) {
                e[i] ? n(e[i]) : (t[i] = t[i] || [], t[i].push(function (e) {
                    n(e)
                }))
            })
        }, this.getAll = function () {
            return e
        }, this.remove = function (t) {
            delete e[t]
        }, this.destory = function () {
            e = null, t = null
        }
    }])
}]);
angular.module('BC').run(['$templateCache', function ($templateCache) {
    $templateCache.put('/static/js/common/tpl/nav-notice.html', '<div class="pr" click-outside="vm.show = false" outside-active="vm.show" bindonce="">\n    <div ng-click="showNoticeList()" title="\u6D88\u606F\u4E2D\u5FC3">\n        <span class="bdp-icon-wrap pr" ng-class="{\'unread\':unread > 0}">\n            <i class="bdp-icon ico-alarm-line"></i>\n            <i class="unwatched active" ng-show="vm.common.allUnReadLen > 0"></i>\n        </span>\n    </div>\n    \n    <div class="nav-unread-wrap J_personal_notice_layer" ng-show="vm.unreadShow" ng-click="vm.unreadShow = false;showNoticeList()">\n        \u60A8\u6709\u65B0\u7684\u672A\u8BFB\u6D88\u606F\n        <!-- <a class="btn ml4" ng-click="showNoticeList()">\u70B9\u51FB\u67E5\u770B</a> -->\n        <!-- <a class="btn font-w-b cr-bdp text-decoration-hover-underline ml4" ng-click="showNoticeList()">\u70B9\u51FB\u67E5\u770B</a> -->\n        <!-- <i class="bdp-icon ico-delete ml4" ng-click="vm.unreadShow = false"></i> -->\n    </div>\n    <div class="nav-notice-list-wrap J_personal_notice_layer" ng-show="vm.show">\n        <ul class="bdp-tab-wrap clearfix notice-tab">\n            <li class="bdp-tab-item notice-tab-item" ng-repeat="tab in vm.tabs" ng-class="{\'bdp-tab-active\': tab.active}" ng-click="vm.changeNoticeType(tab.typeId)">\n                {{tab.title}}\n                <span ng-if="tab.unReadNewsLen > 0" class="unread-len">{{tab.unReadNewsLen}}</span>\n            </li>\n        </ul>\n        <div class="notice-list-scroll">\n            <ul class="notice-list" ng-if="vm.currentTab.typeId != 4">\n                <li class="notice-item-wrap clearfix" ng-repeat="noticeItem in vm.noticeList" ng-class="{\'notice-unread\': noticeItem.isRead === 0}" ng-click="vm.openMessagePage(noticeItem, $event)">\n                    <div class="notice-item" title="{{noticeItem.link.title}}">\n                        <div class="notice-html too-long">\n                            <div ng-bind-html="noticeItem.content | toSce"></div>\n                        </div>\n                        <div class="notice-sendtime">{{noticeItem.releaseTime}}</div>\n                    </div>\n                </li>\n            </ul>\n            <div class="notice-list warn-type" ng-if="vm.currentTab.typeId == 4">\n                <dl ng-repeat="item in vm.noticeList">\n                    <dt class="time-title nowrap">{{item.time}}</dt>\n                    <dd>\n                        <ul>\n                            <li class="notice-item-wrap clearfix" ng-repeat="it in item.list" ng-class="{\'notice-unread\': it.status == 0}" ng-click="vm.goDash(it.proj_id,it.dsh_id, it.rule_id, it.ct_id, it)">\n                                <div class="notice-item">\n                                    <p class="notice-html">\n                                        <span class="detail" ng-if="!!it.is_new ">{{it.result}}</span>\n                                        <span ng-repeat="result in it.result track by $index" ng-if="!it.is_new">\n                                            <span class="detail" ng-repeat="detail in result.detail track by $index">\n                                                {{detail}}<i ng-hide="$last">\u3001</i>\n                                        </span> {{result.field_name}}\n                                        <span ng-if="result.compare == 7">\u4F4D\u4E8E \u9884\u8B66\u503C \u533A\u95F4</span>\n                                        <span ng-if="result.compare != 7">\n                                            {{warnOperatorMap[result.compare]}} <span>\u9884\u8B66\u503C</span>\n                                        </span>\n                                        <span ng-if="!$last">\uFF1B</span>\n                                        </span>\n                                        <br>\n                                    </p>\n                                    <p class="notice-sendtime">\n                                        <span class="loc">{{it.warnProjPath}} / {{it.dsh_name}} / {{it.ct_name}}</span>\n                                    </p>\n                                </div>\n                            </li>\n                        </ul>\n                    </dd>\n                </dl>\n            </div>\n            <div class="no-notice" ng-if="vm.noticeList.length == 0">\n                <i class="bdp-icon ico-no-opacity" ng-class="{\'ico-no-message\': vm.currentTab.typeId != 4, \'ico-no-alarm\': vm.currentTab.typeId == 4}"></i>\n                <div class="font-text-tip">\u6682\u65E0\u6D88\u606F</div>\n            </div>\n        </div>\n        \n        <div class="nav-notice-operate clearfix">\n            <div class="read-all" ng-click="vm.setNoticeReadAll()">\n                \u5168\u90E8\u6807\u4E3A\u5DF2\u8BFB\n            </div>\n            <div class="see-all" ng-click="goToListPage()">\n                \u67E5\u770B\u5168\u90E8\n                <i class="bdp-icon ico-triangle-right"></i>\n            </div>\n        </div>\n        <div ng-loading-gif="" ng-show="vm.loading"></div>\n    </div>\n</div>');
    $templateCache.put('/static/js/common/tpl/nav-project-list.html', '<div class="side-nouse-wrap"></div>\n<a class="drag-btn" resize-project-list="" data-draw-chart-url="draw_chart_url" bindonce="" ng-if="view != \'dash_tpl\'" title="\u62D6\u52A8\u8C03\u6574\u5BBD\u5EA6"></a>\n\n<div class="create-block" bindonce="">\n    <p class="fl" ng-if="view != \'dash_tpl\' && view != \'data_screen\'">\u4EEA\u8868\u76D8</p>\n    <p class="fl" ng-if="view == \'dash_tpl\'">\u6A21\u677F\u5217\u8868</p>\n    <p class="fl" ng-if="view == \'data_screen\'">\u6570\u636E\u5927\u5C4F</p>\n    <div class="pa">\n        <div class="display-inline-block search-chart-wrap" search-chart="" ng-class="{open : showSearchBox}">\n            <a class="bdp-icon-wrap" ng-click="showSearchBar()">\n                <i class="bdp-icon ico-search"></i>\n            </a>\n            <div class="dropdown-wrap search-chart-box" ng-show="showSearchBox">\n                <div>\n                    <input class="dash-search-input" type="text" ng-model="search_name" ng-keyup="onSearchKeyUp($event)" placeholder="\u8F93\u5165\u540D\u79F0\u641C\u7D22">\n                    <div class="empty-tip height-32 pl16" ng-if="search_name && search_result_empty">\u6CA1\u6709\u627E\u5230\u76F8\u5173\u6570\u636E</div>\n                    <div ng-loading-gif="" size="size-1x" ng-show="showSearchBoxLoading"></div>\n                    <ul class="search-chart-list" ng-show="!!search_name && !showSearchBoxLoading">\n\n                        <li class="search-result-type" ng-if="old_search_chart_list.length > 0">\n                            <span>\u56FE\u8868</span>\n                            <span class="search-result-list-num">{{old_search_chart_list.length}}</span>\n                            <span class="search-result-list-more fr cursor-pointer" ng-click="getMoreSearchList($event,\'chart\')" ng-show="old_search_chart_list.length > 3 && old_search_chart_list.length != search_chart_list.length">\u66F4\u591A</span>\n                            <span class="search-result-list-more fr cursor-pointer" ng-click="getFoldUpSearchList($event,\'chart\')" ng-show="old_search_chart_list.length > 3 && old_search_chart_list.length == search_chart_list.length">\u6536\u8D77</span>\n                        </li>\n                        <li ng-repeat="item in search_chart_list" class="cursor-pointer search-result-item" ng-click="jumpToSearchChart(item)">\n                            <p class="nowrap chart-name" bo-title="item.ct_name" bo-text="item.ct_name"></p>\n                            <p class="nowrap dash-name" bo-title="item.path" bo-text="item.path"></p>\n                        </li>\n\n                        <li class="search-result-type" ng-if="old_search_dashboard_list.length > 0">\n                            <span>\u4EEA\u8868\u76D8</span>\n                            <span class="search-result-list-num">{{old_search_dashboard_list.length}}</span>\n                            <span class="search-result-list-more fr cursor-pointer" ng-click="getMoreSearchList($event,\'dashboard\')" ng-show="old_search_dashboard_list.length > 3 && old_search_dashboard_list.length != search_dashboard_list.length">\u66F4\u591A</span>\n                            <span class="search-result-list-more fr cursor-pointer" ng-click="getFoldUpSearchList($event,\'dashboard\')" ng-show="old_search_dashboard_list.length > 3 && old_search_dashboard_list.length == search_dashboard_list.length">\u6536\u8D77</span>\n                        </li>\n                        <li ng-repeat="item in search_dashboard_list" class="cursor-pointer search-result-item" ng-click="jumpToSearchDashboard(item)">\n                            <p class="nowrap chart-name" bo-title="item.dsh_name" bo-class="{\'has-label\': !!item.label}">\n                                <span class="chart-name-span nowrap" bo-text="item.dsh_name"></span><span class="item-label dash nowrap" bo-show="!!item.label" bo-text="item.label"></span>\n                            </p>\n                            <p class="nowrap dash-name" bo-title="item.path" bo-text="item.path"></p>\n                        </li>\n\n                        <li class="search-result-type" ng-if="old_search_project_list.length > 0">\n                            <span>\u6587\u4EF6\u5939</span>\n                            <span class="search-result-list-num">{{old_search_project_list.length}}</span>\n                            <span class="search-result-list-more fr cursor-pointer" ng-click="getMoreSearchList($event,\'project\')" ng-show="old_search_project_list.length > 3 && old_search_project_list.length != search_project_list.length">\u66F4\u591A</span>\n                            <span class="search-result-list-more fr cursor-pointer" ng-click="getFoldUpSearchList($event,\'project\')" ng-show="old_search_project_list.length > 3 && old_search_project_list.length == search_project_list.length">\u6536\u8D77</span>\n                        </li>\n                        <li ng-repeat="item in search_project_list" class="cursor-pointer search-result-item" ng-click="jumpToSearchProject(item)">\n                            <p class="nowrap chart-name" bo-title="item.name" bo-text="item.name"></p>\n                            <p class="nowrap dash-name" bo-title="item.path" bo-text="item.path"></p>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n\n        <div class="display-inline-block show-add op-add-icon" ng-if="permision.projEdit" ng-click="show_add = !show_add" click-outside="show_add = false" outside-active="show_add">\n            <a class="bdp-icon-wrap"><i class="bdp-icon ico-plus1"></i></a>\n            <ul class="dropdown-wrap create-op-list" ng-show="show_add">\n                <li>\n                    <a ng-click="showCreateProjDialog()" class="dropdown-item">\u521B\u5EFA\u6587\u4EF6\u5939</a>\n                </li>\n                <li>\n                    <a ng-click="showCreateDashDialog()" class="dropdown-item" bo-if="view != \'data_screen\'">\u521B\u5EFA\u4EEA\u8868\u76D8</a>\n                    <a ng-click="showCreateDashDialog(\'dataScreen\')" class="dropdown-item" bo-if="view == \'data_screen\'">\u521B\u5EFA\u5927\u5C4F</a>\n                    <a ng-click="showCreateTemplateDialog()" class="dropdown-item" ng-class="{\'dropdown-item-disabled\':!dashTemplateActive}" bo-if="view == \'data_screen\' && showTemplateHandle===true"></a>\n                </li>\n            </ul>\n        </div>\n\n        <div class="display-inline-block show-add" ng-if="permision.projEdit" ng-click="show_add = !show_add" click-outside="show_add = false" outside-active="show_add">\n            <a class="bdp-icon-wrap"><i class="bdp-icon ico-more"></i></a>\n            <ul class="dropdown-wrap create-op-list" ng-show="show_add" ng-class="{\'switch-all\': !permision.dashHidden}">\n                <li>\n                    <a ng-click="tapAllProject(all_project_list,1)" class="dropdown-item">\u6536\u8D77\u5168\u90E8</a>\n                </li>\n                <li>\n                    <a ng-click="tapAllProject(all_project_list,0)" class="dropdown-item">\u5C55\u5F00\u5168\u90E8</a>\n                </li>\n                <li ng-if="view != \'data_screen\'">\n                    <a ng-click="setHideDash(all_project_list)" class="dropdown-item" ng-if="permision.dashHidden">\u8BBE\u7F6E\u9690\u85CF</a>\n                </li>\n                <li>\n                    <a ng-click="click_show_view(\'dash_manage\')" class="dropdown-item" ng-if="!!permision.canDashManage && !permision.isSuperAdminInPersonal && view != \'data_screen\'">\u4EEA\u8868\u76D8\u534F\u540C</a>\n                </li>\n\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="J-scroll-project project-nav project-list project-list-common">\n    <div class="list-hd" ui-tree="navListOption" ng-show="all_project_list.length > 0" data-drag-enabled="navListOption.enabled" data-max-depth="5">\n        \n        <div ng-if="isThirdIframeMobile.type" class="thirdIframe-dash-list-title">\u6211\u7684\u4EEA\u8868\u76D8</div> \n        \n        <ul class="own-project-list" ui-tree-nodes="" ng-model="all_project_list">\n\n            <li class="project-item J-project-item" ng-class="{\'J-sort-disabled\':view == \'dash_tpl\' || isThirdIframeMobile.type || !!node.hidden}" bo-show="!node.hidden" ng-repeat="node in all_project_list" ui-tree-node="" ng-include="\'navListTreeTpl\'">\n            </li>\n        </ul>\n        \n    </div>\n    <script type="text/ng-template" id="navListTreeTpl">\n\n        <div class="cat-op-parent level-{{node.deep}}" ng-mouseenter="showTooltip(node, $event)" ng-mouseleave="hideTooltip(node, $event)" data-project-id="{{node.proj_id}}" ui-tree-handle="">\n            <i bo-class="{\n                \'bdp-icon fl\': node.attribute == \'project\', \n                \'ico-folder1\': node.type == 0 && projFolding[node.proj_id + node.type] && !node.property, \n                \'ico-folder2-open\': node.type == 0 && !projFolding[node.proj_id + node.type] && !node.property,\n                \'ico-folder-rule\':(node.property || node.type == 2) && projFolding[node.proj_id + node.type], \n                \'ico-folder-rule-open\': (node.property || node.type == 2) && !projFolding[node.proj_id + node.type],\n                \'ico-folder-shared\': node.type == 1 && projFolding[node.proj_id + node.type],\n                \'ico-folder-shared-open\': node.type == 1 && !projFolding[node.proj_id + node.type]\n            }" class="J-folder-icon" ng-click="tapNodeName($event, true, node)"></i>\n            <div class="cat-op cat-op-show fr" bo-hide="node.type !== 0 && node.attribute == \'project\' || node.parent && node.parent.type !== 0 || node.only_display || node.property">\n                <div class="bdp-icon-wrap" ng-click="node.handler_more_show = !node.handler_more_show;copyDashboard.handlerMorePos($event);" ng-show="node.handler_more_show || node.over_handler_more == true" nav-project-drop-down="" drop-down-flag="node.handler_more_show" outside-active="node.handler_more_show" click-outside="node.handler_more_show = false">\n                    <i class="bdp-icon ico-more" title="More"></i>\n                    <ul class="dropdown-wrap field-editable-handler-more" ng-style="moreListPosStyle" ng-if="node.handler_more_show && node.attribute == \'project\'">\n                        <li class="dropdown-item" ng-if="node.subs.length > 0 && share && node.type == 0 && permision.innerShare" ng-click="shareCtrl.open(\'folder\', node.proj_id)" bo-text="\'share\' | translate"></li>\n                        <li ng-click="getProName(node, $parentNodesScope.$modelValue)" class="dropdown-item ng-binding" bo-text="\'edit\' | translate"></li>\n                        <li ng-click="moveProject.open(node)" class="dropdown-item" bo-text="\'move\' | translate"></li>\n                        <li ng-click="delProject($index,node,$event)" class="ng-binding dropdown-item" bo-text="\'remove\' | translate"></li>\n                    </ul>\n                    <ul class="dropdown-wrap field-editable-handler-more" ng-style="moreListPosStyle" ng-if="node.handler_more_show && node.attribute == \'dashboard\'">\n                        <li ng-click="dashboard.edit($event, node)" class=" dropdown-item ng-binding" ng-hide="node.modify_permission == 0" bo-text="\'edit\' | translate"></li>\n                        <li class="dropdown-item" ng-if="permision.innerShare" ng-click="shareCtrl.open(\'dashboard\', node.dsh_id)" bo-text="\'share\' | translate"></li>\n                        <li ng-click="copyDashboard.open(node)" ng-if="node.attribute == \'dashboard\'" class="dropdown-item" ng-hide="node.modify_permission == 0" bo-text="\'copy\' | translate"></li>\n                        <li ng-click="moveDashboard.open(node)" class="dropdown-item" ng-hide="node.modify_permission == 0" bo-text="\'move\' | translate"></li>\n                        <li ng-click="delDashboard($index,node, $parentNodesScope.$modelValue)" class="ng-binding dropdown-item" ng-hide="node.modify_permission == 0" bo-text="\'remove\' | translate"></li>\n                        <li class="dropdown-item" ng-if="node.net_mod_allow === 1 || node.net_info_allow === 1" ng-click="networkCtrl.open(\'dashboard\', node)" bo-text="\'dash.network\' | translate"></li>\n                    </ul>\n                </div>\n            </div>\n            <a class="nowrap" ng-class="{\'project-name\':node.attribute == \'project\',\'dash-name\':node.attribute == \'dashboard\'}" ng-click="tapNodeName($event, false, node)">\n                <i class="bdp-icon mt-2" bo-if="node.attribute == \'dashboard\' && node.category != 1" bo-class="{\'ico-dashboard\': node.category == 0, \'ico-dashboard-pro\':node.category == 2}"></i>\n                <span>{{node.name}}</span>\n            </a>\n        </div> \n        <ul ui-tree-nodes="" class="dash-list" ng-model="node.subs" bo-class="{\'own-dash-list\': node.type == 0 && node.attribute !== \'dashboard\'}" ng-if="node.attribute == \'project\' && !projFolding[node.proj_id + node.type] || node.attribute == \'dashboard\' && !projFolding[node.dsh_id]">\n            <li class="J-project-item" ng-class="{\n                    \'active\':node.attribute==\'dashboard\' && node.dsh_id+node.type == selected.dsh_id_type, \n                    \'has-label\': !!node.label || !!node.comment, \n                    \'J-sort-disabled\':view == \'dash_tpl\' || isThirdIframeMobile.type || !!node.hidden, \n                    \'project-item\':node.attribute==\'project\', \n                    \'dashboard-item\':node.attribute==\'dashboard\'}" bo-show="!node.hidden" ng-repeat="node in node.subs" ui-tree-node="" ng-include="\'navListTreeTpl\'" data-scroll-container=".J-scroll-project">\n            </li>\n        </ul>\n        <div class="mb8 empty-placeholder" ng-if="node.subs.length == 0 && !projFolding[node.proj_id + node.type]"></div>\n    </script>\n</div>\n');
    $templateCache.put('/static/js/common/tpl/directive/labelCommentTooltip.html', '<div class="tooltip {{placement}} tooltip-bg-white bdp-tips label-comment-tooltip" ng-class="{ in: isOpen(), fade: animation() }" ng-show="!!content.name || (!!content.origin_name && content.origin_name != content.name) || !!content.owner_name || !!content.label || !!content.comment || !!content.share_name || !!content.rule_user">\n    <div class="tooltip-inner">\n        <div class="box" bindonce="">\n            <div class="tooltip-block" ng-show="!!content.name">\n                <span>\u540D\u79F0</span>\n                <span>{{content.name}}</span>\n            </div>\n            <div class="tooltip-block mt4" ng-show="!!content.origin_name && content.origin_name != content.name">\n                <span>\u539F\u540D</span>\n                <span>{{content.origin_name}}</span>\n            </div>\n            <div class="tooltip-block mt4" ng-show="!!content.label">\n                <span>\u6807\u7B7E</span>\n                <span>{{content.label}}</span>\n            </div>\n            <div class="tooltip-block mt4" ng-show="!!content.comment">\n                <span>\u5907\u6CE8</span>\n                <span>{{content.comment}}</span>\n            </div>\n            <div class="tooltip-block mt4" ng-show="!!content.share_name">\n                <span>\u5206\u4EAB\u81EA</span>\n                <span>{{content.share_name}}</span>\n            </div>\n            <div class="tooltip-block mt4" ng-show="!!content.rule_user">\n                <span>\u5206\u914D\u81EA</span>\n                <span>{{content.rule_user}}</span>\n            </div>\n            <div class="tooltip-block mt4" ng-show="!!content.owner_name">\n                <span>\u5206\u4EAB\u81EA</span>\n                <span>{{content.owner_name}}</span>\n            </div>\n            <div class="tooltip-block mt4" ng-show="content.type == \'graft\'">\n                <span></span>\n                <span>\u76F4\u8FDE\u6570\u636E\u8868\u65E0\u6CD5\u4F7F\u7528\u8BE5\u529F\u80FD\uFF0C\u4F7F\u7528\u6570\u636E\u6E90\u52A0\u901F\uFF08\u540C\u6B65\uFF09\u540E\u4F7F\u7528</span>\n            </div>\n\n        </div>\n    </div>\n</div>\n');
    $templateCache.put('/static/js/common/tpl/guide/database_guide.html', '<div class="database-view guide-page" ng-if="showGuide" bindonce="">\n    <div class="nav" ng-if="[3].indexOf(guide) != -1"><span>\u6570\u636E\u6E90</span></div>\n    <div class="dashed pa" ng-if="[3].indexOf(guide) != -1"></div>\n    <div class="init-guide pr" ng-if="[3].indexOf(guide) != -1">\n        <div class="db-guide-init"></div>\n        <i class="close-init pa opacity6" ng-click="closeInit()"></i>\n        <a class="btn-blue pa font-size-14 font-w-b cursor-pointer" ng-click="gotoDataSource()"><span class="font-w-b">\u7ACB\u5373\u4F53\u9A8C</span></a>\n    </div>\n    <div class="statistics-layer pr" ng-if="viewGuide == \'guide-step1\'">\n        <ul>\n            <li class="pr">\n                <div class="box">\n                    <span class="mb4">\u5168\u90E8</span>\n                    <b>21</b>\n                </div>\n            </li>\n            <li>\n                <div class="box box-other">\n                    <span class="mb4">\u5DF2\u5B8C\u6210</span>\n                    <b>12</b>\n                </div>\n            </li>\n            <li>\n                <div class="box box-other">\n                    <span class="mb4">\u6B63\u5728\u8FD0\u884C</span>\n                    <b>3</b>\n                </div>\n            </li>\n            <li>\n                <div class="box box-other">\n                    <span class="cr-hint mb4">\u5931\u8D25</span>\n                    <b>3</b>\n                </div>\n            </li>\n            <li>\n                <div class="box box-other">\n                    <span class="mb4">\u505C\u7528</span>\n                    <b>3</b>\n                </div>\n            </li>\n        </ul>\n        <div class="db-guide-tooltip center pr">\n            <div class="triangle-up"></div>\n            \u5168\u5C40\u72B6\u6001\u7B5B\u9009\uFF0C\u5DF2\u6709\u6570\u636E\u6E90\u6982\u51B5\u4E00\u89C8\u65E0\u4F59\u3002\n            <span class="pa guide-step1">1/4</span>\n            <a class="pa know1 font-size-14 cursor-pointer font-w-b" ng-click="goOn(\'guide-step2\')">\u7EE7\u7EED</a>\n\n        </div>\n    </div>\n    <div class="guide-main mt16 no-padding">\n        <div class="view-side-list pt16 pr" ng-if="viewGuide == \'guide-step2\'">\n            <div class="db-guide-tooltip pa guide-tip2">\n                <div class="triangle-up head-left"></div>\n                \u5C40\u90E8\u7C7B\u578B\u7B5B\u9009\u4E0E\u641C\u7D22\uFF0C\u914D\u5408\u72B6\u6001\u7B5B\u9009\uFF0C\u5FEB\u901F\u627E\u5230\u76EE\u6807\u6570\u636E\u6E90\uFF0C\u53EF\u641C\u7D22\u6E90\u6807\u7B7E\u641C\u7D22\u3002\n                <span class="pa guide-step1">2/4</span>\n                <a class="pa know1 font-size-14 cursor-pointer font-w-b" ng-click="goOn(\'guide-step3\')">\u7EE7\u7EED</a>\n            </div>\n            <div class="list-masking pa" style="width: 200px;height: 200px;z-index: 9999"></div>\n            <div class="view-list-header pl16 pr">\n                <span class="title">\u6211\u7684\u6570\u636E\u6E90</span>\n                <div class="search-bar pa">\n                    <i class="bdp-icon ico-search cursor-pointer"></i>\n                </div>\n            </div>\n            <div class="view-list-body">\n                <ul>\n                    <li class="active pl24">\u5168\u90E8</li>\n                    <li class="pl24">\n                    MySQL</li>\n                    <li class="pl24">\u767E\u5EA6\u5B9E\u51B5</li>\n                    <li class="pl24">\u767E\u5EA6\u641C\u7D22\u63A8\u5E7F</li>\n                </ul>\n            </div>\n        </div>\n        <div class="view-main-body pt16 pr24 pr" style="top: 210px;overflow: initial" id="table_list" ng-if="viewGuide == \'guide-step3\'">\n            <div class="db-guide-tooltip pa guide-tip3">\n                <div class="triangle-up head-bottom"></div>\n                <!-- \u6570\u636E\u6E90\u5217\u8868\u65B0\u9762\u8C8C\uFF0C\u9F20\u6807\u79FB\u52A8\u81F3\u4E0A\u65B9\u663E\u793A\u76F8\u5173\u64CD\u4F5C\u3001\u7C7B\u578B\u53CA\u8BE6\u7EC6\u65F6\u95F4\uFF0C\u70B9\u51FB\u6570\u636E\u6E90\u540D\u79F0\u53EF\u67E5\u770B\u540C\u6B65\u8BB0\u5F55\u548C\u5176\u4E0B\u5DE5\u4F5C\u8868\u7684\u4F7F\u7528\u60C5\u51B5\u3002 -->\n                \u7B80\u6D01\u7684\u6570\u636E\u6E90\u5217\u8868\uFF0C\u9F20\u6807\u79FB\u52A8\u81F3\u6570\u636E\u6E90\u4E0A\u65B9\uFF0C\u663E\u793A\u76F8\u5173\u64CD\u4F5C\u3001\u63D0\u793A\u4FE1\u606F\uFF0C\u5220\u9664\u652F\u6301\u76F4\u63A5\u5220\u9664\u6570\u636E\u6E90\u53CA\u5176\u4E0B\u5DE5\u4F5C\u8868\uFF1B\u70B9\u51FB\u6570\u636E\u6E90\u540D\u79F0\u53EF\u67E5\u770B\u540C\u6B65\u8BB0\u5F55\u548C\u5176\u4E0B\u5DE5\u4F5C\u8868\u7684\u4F7F\u7528\u60C5\u51B5\u3002\n                <span class="pa guide-step1">3/4</span>\n                <a class="pa know1 font-size-14 cursor-pointer font-w-b" ng-click="goOn(\'guide-step4\')">\u7EE7\u7EED</a>\n            </div>\n            <div class="masking2"></div>\n            <table class="bdp-table-normal w100 database-table">\n                <thead>\n                    <tr>\n                        <th class="db-name cursor-pointer">\u540D\u79F0</th>\n                        <th class="cursor-pointer db-status">\u72B6\u6001</th>\n                        <th class="cursor-pointer db-sync-time">\u6700\u8FD1\u540C\u6B65\u65F6\u95F4</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td class="pr">\n                            <img ng-src="/static/images/s-logo.png" width="40" class="fl">\n                            <div class="database-table-name pr">\n                                <div>\n                                    <a class="ds-name">\u6211\u7684\u6570\u636E\u6E901</a>\n                                    <span class="display-block tag-label">#\u6807\u7B7E1#</span>\n                                </div>\n                                <div class="operate-layer pa" style="display: block">\n                                    <a class="bdp-btn-blue cursor-pointer">\u8BE6\u60C5\u914D\u7F6E</a>\n                                    <a class="bdp-btn-blue cursor-pointer">\u540C\u6B65</a>\n                                    <a class="bdp-btn-blue cursor-pointer">\u5408\u5E76</a>\n                                    <a class="bdp-btn-blue cursor-pointer">\u5220\u9664</a>\n                                </div>\n                            </div>\n                        </td>\n                        <td>\n                            <span>\u6B63\u5728\u8FD0\u884C</span>\n                        </td>\n                        <td>\n                            <span>\u4E00\u5929\u524D</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="pr">\n                            <img ng-src="/static/images/s-logo.png" width="40" class="fl">\n                            <div class="database-table-name pr">\n                                <div class="line-height-40">\n                                    <a class="ds-name">\u6211\u7684\u6570\u636E\u6E902</a>\n                                </div>\n                            </div>\n                        </td>\n                        <td>\n                            <span class="cr-hint">\u5931\u8D25:\u4F59\u989D\u4E0D\u8DB3\uFF0C\u8BF7\u5145\u503C</span>\n                        </td>\n                        <td>\n                            <span>\u4E00\u5929\u524D</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="pr">\n                            <img ng-src="/static/images/s-logo.png" width="40" class="fl">\n                            <div class="database-table-name pr">\n                                <div>\n                                    <a class="ds-name">\u6211\u7684\u6570\u636E\u6E903</a>\n                                    <span class="display-block tag-label">#\u6807\u7B7E1#</span>\n                                </div>\n                            </div>\n                        </td>\n                        <td>\n                            <span>\u6B63\u5728\u8FD0\u884C</span>\n                        </td>\n                        <td>\n                            <span>\u4E00\u5929\u524D</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="pr">\n                            <img ng-src="/static/images/s-logo.png" width="40" class="fl">\n                            <div class="database-table-name pr">\n                                <div class="line-height-40">\n                                    <a class="ds-name">\u6211\u7684\u6570\u636E\u6E904</a>\n                                </div>\n                            </div>\n                        </td>\n                        <td>\n                            <span>\u6B63\u5728\u8FD0\u884C</span>\n                        </td>\n                        <td>\n                            <span>\u4E00\u5929\u524D</span>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n    <div ng-if="viewGuide == \'guide-step4\'">\n        <div class="btn-layer">\n            <a class="nowrap add">\n                <i class="bdp-icon ico-add-database ico-opacity"></i>\n                <span class="pr ml4">\n                    \u6DFB\u52A0\u6570\u636E\u6E90\n                </span>\n            </a>\n            <div class="db-guide-tooltip pa guide-tip4">\n                <div class="triangle-up head-top"></div>\n                \u5168\u65B0\u7684\u6570\u636E\u6E90\u5217\u8868\u9875\uFF0C\u5168\u9762\u76F4\u89C2\u6D4F\u89C8\u5168\u90E8\u53EF\u7528\u6570\u636E\u6E90\uFF0C\u4F18\u5316\u4E86\u6DFB\u52A0\u6D41\u7A0B\uFF0C\u64CD\u4F5C\u66F4\u52A0\u4FBF\u6377\u3002\n                <span class="pa guide-step1">4/4</span>\n                <a class="pa know1 font-size-14 cursor-pointer font-w-b" ng-click="quit()">\u6211\u77E5\u9053\u4E86</a>\n            </div>\n        </div>\n    </div>\n    <div ng-if="viewGuide == \'guide-step5\'">\n            <div class="block-beta pa"><i class="ico-beta"></i></div>\n        <div class="db-guide-tooltip pa guide-tip5">\n            <div class="triangle-up head-bottom1"></div>\n            <p class="font-size-14 mb8 font-w-b">\u516C\u5F00\u8BD5\u7528</p>\n            \u5E26\u6709BETA\u6807\u8BC6\u6570\u636E\u6E90\u4E3A\u6700\u8FD1\u4E0A\u7EBF\uFF0C\u7531\u4E8E\u7B2C\u4E09\u65B9\u9650\u5236\uFF0C\u53EF\u80FD\u4F1A\u5076\u5C14\u540C\u6B65\u5931\u8D25\u6216\u5EF6\u8FDF\uFF0CBDP\u4F1A\u7ED3\u6210\u63A8\u52A8\u7B2C\u4E09\u65B9\u4F18\u5316\uFF0C\u7A33\u5B9A\u540E\u5C06\u81EA\u52A8\u5347\u7EA7\u4E3A\u6B63\u5F0F\u670D\u52A1\u3002\n            <a class="pa know1 font-size-14 cursor-pointer font-w-b" ng-click="quit()">\u6211\u77E5\u9053\u4E86</a>\n        </div>\n    </div>\n    <div ng-if="viewGuide == \'guide-step6\'">\n        <div class="guide-usage pa" ng-style="style">\n            <div class="db-guide-tooltip pa guide-tip6">\n                <div class="triangle-up head-right"></div>\n                <p class="font-size-14 mb8 font-w-b">\u4F7F\u7528\u8BF4\u660E</p>\n                \u53EF\u4EE5\u5728\u53F3\u4FA7\u67E5\u770B\u6570\u636E\u6E90\u914D\u7F6E\u7684\u6240\u9700\u4FE1\u606F\uFF0C\u5E2E\u52A9\u4F60\u5FEB\u901F\u5B8C\u6210\u6DFB\u52A0\u914D\u7F6E\u3002\n                <a class="pa know1 font-size-14 cursor-pointer" ng-click="quit()">\u6211\u77E5\u9053\u4E86</a>\n            </div>\n            <div class="mg24" style="overflow: auto">\n                <p class="form-desc-title mb16 font-w-b">\u4F7F\u7528\u8BF4\u660E</p>\n                <dl ng-repeat="it in descInfo" class="mb8">\n                    <dt>{{it.name[language]}}</dt>\n                    <dd ng-bind-html="it.desc[language] | htmlFilter"></dd>\n                </dl>\n            </div>\n        </div>\n    </div>\n    <a class="quit pa font-underline cursor-pointer" ng-click="quit(\'quit\')" ng-if="showGuide && [3].indexOf(guide) == -1">\u9000\u51FA\u5F15\u5BFC</a>\n</div>\n<div ng-if="showManualSync" class="database-view guide-page" bindonce="">\n    <div class="view-main-body" style="margin-top:277px">\n        <table class="bdp-table-normal w100 db-guide-table">\n            <tr>\n                <td width="55%">\n                    <div class="bdp-btn-blue display-inline-block pr fr mt16" style="margin-right:40px">\n                        <a class="display-block">\u540C\u6B65</a>\n                        <div class="db-guide-tooltip center pa text-left" style="left:-128px;top:38px">\n                            <div class="triangle-up"></div>\n                            \u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\u4E0D\u652F\u6301\u81EA\u52A8\u540C\u6B65\uFF0C\u9700\u8981\u6BCF\u6B21\u624B\u52A8\u70B9\u51FB\u540C\u6B65\u6309\u94AE\u626B\u7801\u6765\u5B8C\u6210\u6570\u636E\u6E90\u7684\u540C\u6B65\u3002\n                            <a class="pa know1 font-size-14 cursor-pointer font-w-b" ng-click="closeManualSyncGuide()">\u5173\u95ED</a>\n                        </div>\n                    </div>\n                </td>\n                <td></td>\n                <td></td>\n            </tr>\n        </table>\n    </div>\n</div>\n');
    $templateCache.put('/static/js/common/tpl/guide/dot_guide.html', '<div ng-if="watchStatus == dotGuideData[guideItem].guideNum">\n    <div class="dot-guide" ng-hide="dotMask == true || !dotGuideData[guideItem].tooltipText" ng-click="clickShowInfo()">\n        <!-- {{showDotGuideTip}} -->\n    </div>\n    <div class="circle-group" ng-click="guideItem == \'drillChart\' ? clickShowInfo() : null" ng-class="{\'cursor-pointer\': guideItem == \'drillChart\'}"><!--  ng-click="clickShowInfo()" -->\n        <div class="circle4"></div>\n        <div class="circle3"></div>\n        <div class="circle2"></div>\n        <div class="circle1"></div>\n    </div>\n    <div class="dot-guide-tip J_dash_dot_guide" ng-show="showDotGuideTip == true && dotGuideData[guideItem].tooltipText">\n        <p class="dot-guide-tip-text" ng-bind-html="dotGuideData[guideItem].tooltipText | toSce"></p>\n        <div class="tip-operate clearfix">\n            <div class="see-help" ng-show="dotGuideData[guideItem].videoSrc">\n                <span class="" ng-click="seeHelpVideo();showDotVideo = true">\n                    <i class="bdp-icon ico-help"></i>\n                    <span class="ico-help-text">\u67E5\u770B\u89C6\u9891</span><!-- {{\'operatorHelp\'|translate}} -->\n                </span>\n            </div>\n            <div class="know-and-close" ng-click="iKnowClick()">\u6211\u77E5\u9053\u4E86</div>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/js/common/tpl/personal/social-share.html', '<div class="J-dot-share text-hover-line-wrap" ng-click="showShareDialog()">\n    <i class="bdp-icon ico-share2 pr">\n        <i class="unwatched ng-hide" ng-show="outerShareInfo.unread_total > 0" ng-class="{\'active\': outerShareInfo.unread_total > 0}"></i>\n    </i>\n    <span class="text-hover-line">{{outerShareInfo.sdo_id ? \'\u67E5\u770B\u5206\u4EAB\' : \'\u5206\u4EAB\'}}</span>\n</div>\n');
    $templateCache.put('/static/dashboard/adv-page/page-ele.html', '<div bindonce="">\n    <!-- COPY \u6B64\u5904\u903B\u8F91\u6682\u65F6\u590D\u7528\u4EEA\u8868\u76D8\u8BBE\u8BA1\u539F\u903B\u8F91 -->\n    <div class="chart-style-container grid-item-display-setting" ng-if="elePartialsConf.canSetStatus.displaySetting">\n        <p class="container-title has-toggle" ng-click="toggleNextBlock($event)"> \u663E\u793A\u8BBE\u7F6E</p>\n        <div class="style-block J-style-block">\n            <div class="block-row" ng-if="elePartialsConf.canSetStatus.title">\n                <label class="cursor-pointer">\n                    <input type="checkbox" ng-model="elePartialsConf.meta.dash_setting.show_title" ng-change="elePartialsConf.saveDashSetting(\'title\')" ng-disabled="dashLayoutInfo.chart_type == \'C310\'"> \u663E\u793A\u56FE\u8868\u6807\u9898\n                </label>\n            </div>\n            <div class="block-row" ng-if="elePartialsConf.canSetStatus.total">\n                <label class="cursor-pointer">\n                    <input type="checkbox" ng-model="elePartialsConf.meta.dash_setting.show_total" ng-change="elePartialsConf.saveDashSetting(\'total\')"> \u663E\u793A\u56FE\u5185\u603B\u8BA1\n                </label>\n                <div class="sub-block" normal-text-style="" chart-info="elePartialsConf" save-func="elePartialsConf.modifyDashChartStyle(\'title\')" text-type="\'title\'" ng-if="elePartialsConf.meta.dash_setting.show_total && elePartialsConf.canSetStatus.total"></div>\n            </div>\n            <div class="block-row" ng-if="elePartialsConf.canSetStatus.dataLabels">\n                <label class="cursor-pointer">\n                    <input type="checkbox" ng-model="elePartialsConf.meta.dash_setting.show_datalabels" ng-change="elePartialsConf.saveDashSetting(\'datalabels\')"> \u663E\u793A\u56FE\u8868\u6807\u7B7E\u503C\n                </label>\n                <div class="sub-block" normal-text-style="" chart-info="elePartialsConf" save-func="elePartialsConf.modifyDashChartStyle(\'labels\')" text-type="\'labels\'" ng-if="elePartialsConf.meta.dash_setting.show_datalabels && elePartialsConf.canSetStatus.dataLabels && [\'C271\',\'C272\', \'C273\', \'C330\'].indexOf(elePartialsConf.meta.type) < 0"></div>\n            </div>\n        </div>\n    </div>\n    <!-- COPY END -->\n    <div class="chart-style-container grid-item-style">\n        <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u5143\u7D20\u4F4D\u7F6E\n            <label class="container-title-opt fr">\n                <input type="checkbox" class="mr4-i" ng-model="lockPos" ng-change="changeLockPos()">\u9501\u5B9A\n             </label>\n        </p>\n        <div class="style-block J-style-block">\n            <div class="block-row">\n                <label class="cursor-pointer">\n                    <label class="small-label">X</label><input class="ele-pos ml8" ng-model="eleStyle.left" ng-blur="modifyEleBox(\'left\', true)" ng-keyup="keyUpModify($event, \'left\', true)" ng-focus="cancelDocumentEvent()" type="number" ng-disabled="lockPos"> px\n                </label>\n                <label class="cursor-pointer ml12">\n                    <label class="small-label">Y</label><input class="ele-pos ml8" ng-model="eleStyle.top" ng-blur="modifyEleBox(\'top\', true)" ng-keyup="keyUpModify($event, \'top\', true)" ng-focus="cancelDocumentEvent()" type="number" ng-disabled="lockPos"> px\n                </label>\n            </div>\n        </div>\n        <p class="container-title mt8 has-toggle" ng-click="toggleNextBlock($event)">\u5143\u7D20\u5927\u5C0F</p>\n        <div class="style-block J-style-block">\n            <div class="block-row">\n                <label class="cursor-pointer">\n                    <label class="small-label">\u5BBD</label><input class="ele-size ml8" ng-model="eleStyle.width" ng-blur="modifyEleBox(\'width\', true)" ng-keyup="keyUpModify($event, \'width\', true)" ng-focus="cancelDocumentEvent()" type="number" ng-disabled="lockPos"> px\n                </label>\n                <label class="cursor-pointer ml12">\n                    <label class="small-label">\u9AD8</label><input class="ele-size ml8" ng-model="eleStyle.height" ng-blur="modifyEleBox(\'height\', true)" ng-keyup="keyUpModify($event, \'height\', true)" ng-focus="cancelDocumentEvent()" type="number" ng-disabled="lockPos"> px\n                </label>\n            </div>\n        </div>\n        <p class="container-title mt8 has-toggle" ng-click="toggleNextBlock($event)">\u5143\u7D20\u5185\u8FB9\u8DDD</p>\n        <div class="style-block J-style-block">\n            <div class="block-row">\n                <label class="cursor-pointer">\n                    <label class="small-label">\u4E0A</label><input class="ele-size ml8" ng-model="eleStyle.paddingTop" ng-blur="modifyEleBox(\'paddingTop\', true)" ng-keyup="keyUpModify($event, \'paddingTop\', true)" ng-focus="cancelDocumentEvent()" type="number" ng-disabled="lockPos"> px\n                </label>\n                <label class="cursor-pointer ml12">\n                    <label class="small-label">\u4E0B</label><input class="ele-size ml8" ng-model="eleStyle.paddingBottom" ng-blur="modifyEleBox(\'paddingBottom\', true)" ng-keyup="keyUpModify($event, \'paddingBottom\', true)" ng-focus="cancelDocumentEvent()" type="number" ng-disabled="lockPos"> px\n                </label>\n            </div>\n            <div class="block-row">\n                <label class="cursor-pointer">\n                    <label class="small-label">\u5DE6</label><input class="ele-size ml8" ng-model="eleStyle.paddingLeft" ng-blur="modifyEleBox(\'paddingLeft\', true)" ng-keyup="keyUpModify($event, \'paddingLeft\', true)" ng-focus="cancelDocumentEvent()" type="number" ng-disabled="lockPos"> px\n                </label>\n                <label class="cursor-pointer ml12">\n                    <label class="small-label">\u53F3</label><input class="ele-size ml8" ng-model="eleStyle.paddingRight" ng-blur="modifyEleBox(\'paddingRight\', true)" ng-keyup="keyUpModify($event, \'paddingRight\', true)" ng-focus="cancelDocumentEvent()" type="number" ng-disabled="lockPos"> px\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class="chart-style-container grid-item-style">\n        <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u5143\u7D20\u80CC\u666F\u53CA\u8FB9\u6846</p>\n        <div class="block-row style-block J-style-block">\n            <span class="choose-color-wrap">\n                <i class="bdp-icon ico-fill-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{eleStyle.bgColor}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAlpha: true, changeAlphaNone: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" on-change="" on-complete="modifyEleStyle(true, color)" ng-model="eleStyle.bgColor"></color-picker>\n            </span>\n            <select class="ml4" ng-model="eleStyle.borderType" ng-options="item.value as item.name for item in EleBorderTypes" ng-change="modifyEleStyle(true)">></select>\n            <div class="custom-border-setting mt8" ng-if="eleStyle.borderType == \'CUSTOM\'">\n                <span class="choose-color-wrap">\n                    <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                    <span class="select-color-exp" style="background-color: {{eleStyle.customBorder.color}}"></span>\n                    <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                    <color-picker options="{showAlpha: true, changeAlphaNone: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" on-change="" on-complete="modifyEleStyle(true, color)" ng-model="eleStyle.customBorder.color"></color-picker>\n                </span>\n                <i class="bdp-icon ico-line-style ico-no-opacity ml4"></i>\n                <select class="line-style ml4" ng-model="eleStyle.customBorder.style" ng-options="item.value as item.name for item in EleBorderLineStyle" ng-change="modifyEleStyle(true)">\n                </select>\n                <i class="bdp-icon ico-line-width ico-no-opacity ml8"></i>\n                <input class="line-width ml4" ng-model="eleStyle.customBorder.width" ng-click="cancelDocumentEvent($event)" ng-change="modifyEleStyle(true)" type="number">\n            </div>\n        </div>\n    </div>\n</div>\n');
    $templateCache.put('/static/dashboard/adv-page/page-wrap.html', '<div bindonce="">\n    <div class="chart-style-container" ng-show="dashLayoutInfo.dashMode == \'dataScreen\'">\n        <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u9875\u9762\u50CF\u7D20</p>\n        <div class="style-block J-style-block">\n            <div class="block-row line-height-32">\n                <label class="cursor-pointer"><input type="radio" class="mr4-i" name="screenSize" value="1" ng-model="screenSizeObj.type" ng-change="modifyResolution()">\u5206\u8FA8\u7387</label>\n                <select class="customize-set" ng-model="screenSizeResolution" ng-change="modifyResolution()" ng-options="item.value as item.name for item in screenSizeList">\n                </select>\n            </div>\n            <div class="block-row line-height-32">\n                <label class="cursor-pointer"><input type="radio" class="mr4-i" name="screenSize" value="2" ng-model="screenSizeObj.type" ng-change="modifyResolution()">\u81EA\u5B9A\u4E49</label>\n                <input class="customize-px" type="number" ng-model="screenSizeObj.width" ng-change="modifyResolution()" placeholder="\u5BBD">\n                <span class="display-inline-block">X</span>\n                <input class="customize-px" type="number" ng-model="screenSizeObj.height" ng-change="modifyResolution()" placeholder="\u9AD8">\n            </div>\n        </div>\n    </div>\n    <div class="chart-style-container" ng-show="dashLayoutInfo.dashMode == \'adv\'">\n        <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u9875\u9762\u5C3A\u5BF8</p>\n        <div class="style-block J-style-block">\n            <div class="block-row line-height-32">\n                <label>\u5BBD\u5EA6</label>\n                <input class="customize-px mr4" type="number" ng-model="screenSizeObj.width" ng-change="modifyResolution()" placeholder="\u5BBD">px\n            </div>\n        </div>\n    </div>\n    <div class="chart-style-container" ng-show="dashLayoutInfo.dashMode == \'dataScreen\'">\n        <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u9875\u9762\u80CC\u666F\u56FE\u7247</p>\n        <div class="style-block J-style-block">\n            <div class="line-height-32">\n                <input class="bg-url-input" type="text" ng-model="pageImageSrc" ng-keyup="keyUpModify($event)" placeholder="\u8BF7\u8F93\u5165\u80CC\u666F\u56FE\u7247URL">\n                <button class="bdp-btn" ng-click="showPageImage()">\u5E94\u7528</button>\n            </div>\n        </div>\n    </div>\n    <div class="chart-style-container no-shadow">\n        <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u9875\u9762\u5E95\u8272\u53CA\u8FB9\u6846</p>\n        <div class="block-row style-block J-style-block">\n            <span class="choose-color-wrap" id="page_bg_color">\n                <i class="bdp-icon ico-fill-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{pageStyle.bgColor}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAlpha: true, changeAlphaNone: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" on-change="" on-complete="changeColor(color, \'bg\')" ng-model="pageStyle.bgColor"></color-picker>\n            </span>\n            <span class="choose-color-wrap ml8" id="page_border_color">\n                <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{pageStyle.lineColor}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAlpha: true, changeAlphaNone: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" on-change="" ng-model="pageStyle.lineColor" on-complete="changeColor(color, \'line\')"></color-picker>\n            </span>\n            <i class="bdp-icon ico-line-style ico-no-opacity ml16"></i>\n            <select class="line-style ml4" ng-model="pageStyle.style" ng-options="dashStyle.value as dashStyle.name for dashStyle in screenLineDashStyle" ng-change="modifyLine()"></select>\n            <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n            <select class="line-width ml4" ng-model="pageStyle.width" ng-options="lineWidth.value as lineWidth.name for lineWidth in screenLineWidth" ng-change="modifyLine()"></select>\n\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/create-chart/chart-select-table.html', '<div bindonce="">\n    <div class="ngdialog-title">\u6DFB\u52A0\u56FE\u8868</div>\n    <div class="ngdialog-message">\n        <!-- \u5DE6\u4FA7\u56FE\u8868\u5DE5\u4F5C\u7C7B\u578B & \u9009\u62E9\u5DE5\u4F5C\u8868 -->\n        <div class="choose-tb">\n            <p class="hd select-chart">\u9009\u62E9\u56FE\u8868\u7C7B\u578B</p>\n            <div class="tab">\n                <div class="tab-hd">\n                    <a class="tab-hd-item first" ng-class="{active: chartAddView.tabIndex === 0}" ng-click="chartAddView.showTab(0)">\n                        <i class="bdp-icon ico-sheet-active" ng-show="chartAddView.tabIndex === 0"></i>\n                        <i class="bdp-icon mr8" ng-class="{\'ico-normal-chart-active\': chartAddView.tabIndex === 0, \'ico-normal-chart\': chartAddView.tabIndex !== 0}"></i><span>\u666E\u901A\u56FE\u8868</span>\n                    </a>\n                    <a class="tab-hd-item" ng-class="{active: chartAddView.tabIndex === 1}" ng-click="chartAddView.showTab(1)">\n                        <i class="bdp-icon ico-sheet-active" ng-show="chartAddView.tabIndex === 1"></i>\n                        <i class="bdp-icon mr8" ng-class="{\'ico-gis-chart-active\': chartAddView.tabIndex === 1, \'ico-gis-chart\': chartAddView.tabIndex !== 1}"></i><span>\u7ECF\u7EAC\u5EA6\u5730\u56FE</span>\n                    </a>\n                    <a class="tab-hd-item" ng-if="permision.canUseCustomChart" ng-class="{active: chartAddView.tabIndex === 2}" ng-click="chartAddView.showTab(2)" flash-guide="customChartStoreGuide" fg-show="guideApi.customChartStoreGuide">\n                        <i class="bdp-icon ico-sheet-active" ng-show="chartAddView.tabIndex === 2"></i>\n                        <i class="bdp-icon mr8" ng-class="{\'ico-custom-chart-active\': chartAddView.tabIndex === 2,\'ico-custom-chart\': chartAddView.tabIndex !== 2}"></i><span>\u81EA\u5B9A\u4E49\u56FE\u8868</span>\n                    </a>\n                </div>\n                <div class="tab-bd">\n                    <wtb-list class="tab-bd-item chart-add-view{{chartAddView.tabIndex}}" wtb-list-output="wtbList">\n                        <p class="mt8">\u9009\u62E9\u5DE5\u4F5C\u8868</p>\n                        <wtb-search class="wtb-search"></wtb-search>\n                        <wtb-content class="mt8 folder-scroll-wrap pr">\n                            <div ng-repeat="folder in wtbList.vm" ng-include="\'creatChart\'" wtb-folder="folder"></div>\n                        </wtb-content>\n                    </wtb-list>\n                    <script type="text/ng-template" id="creatChart">\n                        <div class="folder-name cursor-pointer white-space-nowrap" wtb-load-handle="" wtb-folder-content="">\n                            <i class="bdp-icon ico-folder1" ng-class="{\'ico-folder1-open\':folderCtrl.open, \n                                \'ico-folder-record-open\': folderCtrl.open && folder.folderId == \'recently_use_folder\', \n                                \'ico-folder-record\': !folderCtrl.open && folder.folderId == \'recently_use_folder\'}"></i>\n                            <span class="display-inline-block vm" bo-text="folder.name"></span>\n                        </div>\n                        <wtb-folder-child>\n                            <ul>\n                                <li ng-repeat="folder in folder.sub_folders" ng-include="\'creatChart\'" wtb-folder="folder">\n                                </li>\n                            </ul>\n                            <ul>\n                                <li class="table-wrap" ng-repeat="tb in folder.tb_list" wtb-table="tb">\n                                    <div class="add-chart-radio">\n                                        <label class="tb-label">\n                                            <input type="radio" ng-model="chartAddView.selectedTbId" ng-value="tb.tb_id">\n                                            <wtb-label label-host="tb" unlimit-width="true" class="display-inline-block">\n                                                <span bo-text="tb.name | cutLength : 300"></span>\n                                            </wtb-label>\n                                        </label>\n                                    </div>\n                                    <div class="add-chart-checkbox">\n                                        <label class="tb-label" ng-class="{\'graft-disabled-wrapper\': tb.type == \'graft\'}">\n                                            <input type="checkbox" ng-model="chartAddView.selectTbMap[tb.tbId]" ng-disabled="tb.type == \'graft\'">\n                                            <wtb-label label-host="tb" unlimit-width="true" class="display-inline-block">\n                                                <span class="graft-font-disabled" bo-text="tb.name | cutLength : 300"></span>\n                                            </wtb-label>\n                                        </label>\n                                    </div>\n                                </li>\n                            </ul>\n                        </wtb-folder-child>\n                    </script>\n                </div>\n            </div>\n        </div>\n        <!-- \u53F3\u4FA7\u56FE\u8868\u6A21\u677F\u62BD\u5C49 -->\n        <div class="dialog-drawer">\n            <div class="vsplit-line"></div>\n            <div class="drawer-content choose-tpl" ng-show="chartAddView.tabIndex === 0">\n                <div class="choosetpl-title auto">\n                    <span>\u9009\u62E9\u6A21\u677F</span>\n                    <!-- \u666E\u901A\u56FE\u8868\u4E0D\u9700\u8981\u7F16\u8F91 -->\n                    <!-- <span class="bright-font choosetpl-setting hide bdp-icon ico-edit"\n                            ng-click="chartAddView.openSetDialog()"></span> -->\n                    <div class="query-box auto">\n                        <input type="text" class="fr query-text" ng-input-text="" ng-model="queryTpl">\n                    </div>\n                </div>\n                <div class="tpl-label">\n                    <span class="label-content bright-font" ng-class="{\'label-active\': !chartAddView.selectedTplType}" ng-click="chartAddView.chooseType()">\u5168\u90E8\u6807\u7B7E</span>\n                    <span class="label-content bright-font" ng-class="{\'label-active\': chartAddView.selectedTplType == type}" ng-repeat="type in chartAddView.tplTypeList" ng-click="chartAddView.chooseType(type)" bo-bind="type"></span>\n                </div>\n                <div class="tpl-list">\n                    <ul>\n                        <li class="tpl-content" ng-show="!chartAddView.selectedTplType" ng-click="chartAddView.chooseTpl()">\n                            <div class="tpl-content-chart tpl-null" ng-class="{\'tpl-active\': !chartAddView.selectedTpl }">\n                                <i class="chart-type-skview null"></i>\n                            </div>\n                            <span class="tpl-content-title">\u7A7A\u767D</span>\n                        </li>\n                        <li class="tpl-content" ng-repeat="tpl in chartAddView.tplList | nameFilter:queryTpl" ng-click="chartAddView.chooseTpl(tpl)">\n                            <div class="tpl-content-chart" ng-class="{\'tpl-active\': tpl && chartAddView.selectedTpl.tpl_id == tpl.tpl_id}">\n                                <i ng-hide="tpl.error" class="chart-type-skview {{tpl.chart_type}}"></i>\n                                <p ng-if="tpl.error" class="mt20 text-center" bo-bind="tpl.error"></p>\n                            </div>\n                            <span class="nowrap tpl-content-title" bo-title="tpl.name" bo-bind="tpl.name"></span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="drawer-content choose-tpl custom-tpl" ng-show="chartAddView.tabIndex === 2">\n                <div class="choosetpl-title auto">\n                    <span ng-if="!customChart.isEdit">\u56FE\u8868\u7C7B\u578B</span>\n                    <span ng-if="!customChart.isEdit" class="bright-font choosetpl-setting hide bdp-icon ico-edit" ng-click="editCustomChart()"></span>\n                    <span ng-if="customChart.isEdit" class="edit-words">\u5220\u9664\u81EA\u9009\u56FE\u8868\u4E0D\u5F71\u54CD\u5DF2\u5E94\u7528\u56FE\u8868</span>\n                    <button ng-if="customChart.isEdit" class="esc-edit common-dropdown-btn" ng-click="escEdit()">\u8FD4\u56DE</button>\n                    <div ng-if="!customChart.isEdit" class="query-box auto">\n                        <input type="text" class="fr query-text" ng-input-text="" ng-model="customChart.keyword" ng-keyup="searchCustomChart($event)">\n                    </div>\n                </div>\n                <!-- <div class="tpl-label">\n                    <span class="label-content bright-font" ng-class="{\'label-active\': !customChart.selectedTplType}" ng-click="getCustomChartListOfTag()" bo-text="\'chartTemplate.allLabel\' | translate"></span>\n                    <span class="label-content bright-font" ng-class="{\'label-active\': customChart.selectedTplType == tag}" ng-repeat="tag in customChart.tags" ng-click="getCustomChartListOfTag(tag)" bo-bind="tag"></span>\n                </div> -->\n                <div class="tpl-list">\n                    <ul class="clearfix">\n                        <li class="tpl-content" ng-click="!customChart.isEdit && selectedCustomTplType(-2)" ng-if="!customChart.isEdit" flash-guide="customChartTemplateGuide" fg-show="guideApi.customChartTemplateGuide">\n                            <div class="tpl-content-chart">\n                                <i class="chart-type-skview ico-chart-store"></i>\n                            </div>\n                            <span class="tpl-content-title">\u6DFB\u52A0\u65B0\u56FE\u8868</span>\n                        </li>\n                        <li class="tpl-content" ng-repeat="tpl in customChart.tplList" ng-click="!customChart.isEdit && selectedCustomTplType(tpl)" ng-mouseenter="showChartTip(tpl.notice, $event)" ng-mouseleave="hideChartTip()">\n                            <div class="tpl-content-chart custom-tpl" ng-class="{\'tpl-active\': tpl && !customChart.isEdit && customChart.cty_id == tpl.cty_id}">\n                                <img ng-src="{{tpl.thumbnail_url}}" width="100%" height="100%">\n                            </div>\n                            <span class="nowrap tpl-content-title" bo-title="tpl.name" bo-bind="tpl.name"></span>\n                            <span class="del" ng-click="delCustomTemplate($index, tpl.cty_id)" ng-show="!!customChart.isEdit"></span>\n                        </li>\n                        <li class="tpl-content" ng-click="!customChart.isEdit && selectedCustomTplType(-1)" ng-if="!customChart.isEdit">\n                            <div class="tpl-content-chart" ng-class="{\'tpl-active\': customChart.cty_id == -1}">\n                                <i class="chart-type-skview ico-custom-templates custom-tpl"></i>\n                            </div>\n                            <span class="tpl-content-title">\u81EA\u5B9A\u4E49\u6A21\u677F</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" ng-hide="customChart.isEdit" class="ngdialog-button ngdialog-button-primary" promise-button="" pb-click="chartAddView.confirm()" pb-completed="global.clickComplete">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>\n');
    $templateCache.put('/static/dashboard/dash-chart-extend/chart-screen-img.html', '<div bindonce="">\n    <div class="chart-style-container">\n        <p class="container-title">\u56FE\u7247\u94FE\u63A5</p>\n        <div class="style-block">\n            <div class="block-row">\n                <input class="bg-url-input" type="text" placeholder="http://www.bdp.cn/image.jpg" ng-model="screenImg.url" ng-keyup="keyUpModify($event)" ng-click="cancelDocumentEvent($event)">\n                <button class="bdp-btn" ng-click="modifyImgData()">\u5E94\u7528</button>\n            </div>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/dash-chart-extend/chart-screen-numerical.html', '<div class="chart-style-container chart-scrren-numercial">\n    <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u6570\u503C\u8BBE\u7F6E</p>\n    <div class="style-block J-style-block">\n        <div class="block-row">\n            <label class="cursor-pointer"><input type="checkbox" class="mr8" ng-model="chartNumericalSetting.trendLine" ng-change="chartNumericalSetting.showTrendLine()">\u8D8B\u52BF\u7EBF</label>\n        </div>\n        <div class="block-row">\n            <label class="cursor-pointer"><input type="checkbox" class="mr8" ng-model="chartNumericalSetting.cumulative" ng-change="chartNumericalSetting.showCumulative()">\u7D2F\u8BA1\u503C</label>\n        </div>\n        <div class="block-row">\n            <label class="cursor-pointer"><input type="checkbox" class="mr8" ng-model="chartNumericalSetting.innerTotal" ng-change="chartNumericalSetting.showInnerTotal()">\u56FE\u5185\u603B\u8BA1</label>\n        </div>\n        <div class="block-row">\n            <label class="cursor-pointer"><input type="checkbox" class="mr8" ng-model="chartNumericalSetting.dataZoom" ng-change="chartNumericalSetting.showDataZoom()">\u56FE\u8868\u7F29\u7565\u8F74</label>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/dash-chart-extend/chart-screen-video.html', '<div>\n    <div class="chart-style-container">\n        <p class="container-title">\u89C6\u9891\u94FE\u63A5</p>\n        <div class="style-block">\n            <div class="block-row">\n                <input class="bg-url-input" type="text" placeholder="http://www.bdp.cn/video.mp4" ng-model="screenVideo.src" ng-keyup="keyUpModify($event)" ng-click="cancelDocumentEvent($event)">\n                <button class="bdp-btn" ng-click="modifyVideoData()">\u5E94\u7528</button>\n            </div>\n        </div>\n    </div>\n    <div class="chart-style-container">\n        <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u64AD\u653E\u8BBE\u7F6E</p>\n        <div class="style-block J-style-block">\n            <div class="line-height-32">\n                <label>\n                    <input type="checkbox" ng-model="screenVideo.autoplay" ng-change="modifyVideoData();">\n                    \u81EA\u52A8\u64AD\u653E\n                </label>\n            </div>\n            <div class="line-height-32">\n                <label>\n                    <input type="checkbox" ng-model="screenVideo.loop" ng-change="modifyVideoData();">\n                    \u81EA\u52A8\u5FAA\u73AF\n                </label>\n            </div>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/dash-chart-extend/chart-style-edit.html', '<div class="chart-style-container chart-style-edit-container" ng-if="visible">\n    <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\n        undefined</p>\n    <chart-style class="J-style-block" data="data.ct_id"></chart-style>\n</div>');
    $templateCache.put('/static/dashboard/dash-chart-extend/chart-style-extend.html', '<div class="chart-style-container chart-style-extend" ng-show="chartStyleExtendSetting.visible" bindonce="">\n    <p class="container-title has-toggle" ng-click="toggleNextBlock($event, \'multi\')">\u56FE\u8868\u6837\u5F0F</p>\n    <div class="style-block J-style-block" ng-if="chartStyleExtendSetting.canSetGridLine()">\n        <div class="block-title">\u7F51\u683C\u663E\u793A</div>\n        <div class="block-row" ng-if="chartInfo.chart_type != \'C320\'">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.gridPlotLine.yAxis.enabled" ng-change="chartStyleExtendSetting.configGridPlotLine(\'yAxis\')"> \u6A2A\u5411\u7F51\u683C\n            </label>\n            <label class="ml16" ng-show="!!chartStyle.gridPlotLine.yAxis.enabled">\n                \u6570\u91CF\n                <input class="grid-slit-num ml16" type="number" ng-model="chartStyle.gridPlotLine.yAxis.splitNum" ng-blur="chartStyleExtendSetting.configGridPlotLine(\'yAxis\')" ng-keyup="chartStyleExtendSetting.changeSplitNum($event, \'yAxis\')" ng-focus="chartStyleExtendSetting.cancelDocumentEvent()">\n            </label>\n        </div>\n        <div class="block-row" ng-show="chartInfo.chart_type != \'C320\'">\n            <div class="block-title display-block pl16"> \u7EBF\u6761\u6837\u5F0F</div>\n            <div class="pl16">\n                <i class="bdp-icon ico-line-style ico-no-opacity"></i>\n                <div line-style-select="" class="ml4" val-selected="chartStyle.gridPlotLine.yAxis.dashStyle" val-change="chartStyleExtendSetting.configGridPlotLine(\'yAxis\')" click-disabled="!chartStyle.gridPlotLine.yAxis.enabled"></div>\n                <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n                <select class="line-width-select ml4" ng-model="chartStyle.gridPlotLine.yAxis.width" ng-change="chartStyleExtendSetting.configGridPlotLine(\'yAxis\')" ng-options="lineWidth.value as lineWidth.name for lineWidth in chartStyleExtendSetting.chartLineWidth" ng-disabled="!chartStyle.gridPlotLine.yAxis.enabled">\n                </select>\n                <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.gridPlotLine.yAxis.enabled}">\n                    <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                    <span class="select-color-exp" style="background-color: {{chartStyle.gridPlotLine.yAxis.color}}"></span>\n                    <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                    <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.gridPlotLine.yAxis.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.gridPlotLine.yAxis.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'y_gridPlot\')"></color-picker>\n                </span>\n            </div>\n        </div>\n        <div class="block-row">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.gridPlotLine.xAxis.enabled" ng-change="chartStyleExtendSetting.configGridPlotLine(\'xAxis\')">  \u7EB5\u5411\u7F51\u683C\n            </label>\n            <label class="ml16" ng-show="!!chartStyle.gridPlotLine.xAxis.enabled">\n                \u6570\u91CF\n                <input class="grid-slit-num ml16" type="number" ng-model="chartStyle.gridPlotLine.xAxis.splitNum" ng-blur="chartStyleExtendSetting.configGridPlotLine(\'xAxis\')" ng-keyup="chartStyleExtendSetting.changeSplitNum($event, \'xAxis\')" ng-focus="chartStyleExtendSetting.cancelDocumentEvent()">\n            </label>\n        </div>\n        <div class="block-row">\n            <div class="block-title display-block pl16"> \u7EBF\u6761\u6837\u5F0F</div>\n            <div class="pl16">\n                <i class="bdp-icon ico-line-style ico-no-opacity"></i>\n                <div line-style-select="" class="ml4" val-selected="chartStyle.gridPlotLine.xAxis.dashStyle" val-change="chartStyleExtendSetting.configGridPlotLine(\'xAxis\')" click-disabled="!chartStyle.gridPlotLine.xAxis.enabled"></div>\n                <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n                <select class="line-width-select ml4" ng-model="chartStyle.gridPlotLine.xAxis.width" ng-change="chartStyleExtendSetting.configGridPlotLine(\'xAxis\')" ng-options="lineWidth.value as lineWidth.name for lineWidth in chartStyleExtendSetting.chartLineWidth" ng-disabled="!chartStyle.gridPlotLine.xAxis.enabled">\n                </select>\n                <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.gridPlotLine.xAxis.enabled}">\n                    <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                    <span class="select-color-exp" style="background-color: {{chartStyle.gridPlotLine.xAxis.color}}"></span>\n                    <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                    <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.gridPlotLine.xAxis.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.gridPlotLine.xAxis.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'x_gridPlot\')"></color-picker>\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class="style-block J-style-block mt8 legend-style-block" ng-if="chartStyleExtendSetting.canSetLegend()">\n        <div class="block-title">\u56FE\u4F8B\u8BBE\u7F6E</div>\n        <div class="block-row">\n            <span class="legend-item style-square-item mr8" bdp-tooltip="popupTips.noLegend" tooltip-placement="bottom" ng-class="{\'active\': chartStyle.legend.pos == \'null\'}" ng-click="chartStyleExtendSetting.configLegend({\'pos\':\'null\'})"><i class="bdp-icon ico-legend-none bdp-icon-bgcol"></i></span>\n            <span class="legend-item style-square-item mr8" bdp-tooltip="popupTips.rightLegend" tooltip-placement="bottom" ng-class="{\'active\': chartStyle.legend.pos == \'right\'}" ng-click="chartStyleExtendSetting.configLegend({\'pos\':\'right\'})"><i class="bdp-icon ico-legend-right bdp-icon-bgcol"></i></span>\n            <span class="legend-item style-square-item mr8" bdp-tooltip="popupTips.bottomLegend" tooltip-placement="bottom" ng-class="{\'active\': chartStyle.legend.pos == \'bottom\'}" ng-click="chartStyleExtendSetting.configLegend({\'pos\':\'bottom\'})"><i class="bdp-icon ico-legend-bottom bdp-icon-bgcol"></i></span>\n            <span class="legend-item style-square-item" bdp-tooltip="popupTips.topLegend" tooltip-placement="bottom" ng-class="{\'active\': chartStyle.legend.pos == \'top\'}" ng-click="chartStyleExtendSetting.configLegend({\'pos\':\'top\'})"><i class="bdp-icon ico-legend-top bdp-icon-bgcol"></i></span>\n        </div>\n        <div class="block-row">\n            <div class="block-title display-block">\u6807\u7B7E</div>\n            <div class="pl16">\n                <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n                <select class="font-family-select ml4" ng-model="chartStyle.legend.itemStyle.fontFamily" ng-change="chartStyleExtendSetting.configLegend()" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartStyleExtendSetting.chartFontFamily" ng-disabled="!chartStyle.legend.enabled">\n                </select>\n                <select class="font-size-select ml4" ng-model="chartStyle.legend.itemStyle.fontSize" ng-change="chartStyleExtendSetting.configLegend()" ng-options="fontSize.value as fontSize.name for fontSize in chartStyleExtendSetting.chartFontSize" ng-disabled="!chartStyle.legend.enabled">\n                </select>\n                <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.legend.enabled}">\n                    <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                    <span class="select-color-exp" style="background-color: {{chartStyle.legend.itemStyle.color}}"></span>\n                    <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                    <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.legend.itemStyle.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.legend.itemStyle.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'legend\')"></color-picker>\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class="style-block J-style-block mt8" ng-if="chartStyleExtendSetting.canSetAxis(\'x\')">\n        <div class="block-title">X\u8F74\u8BBE\u7F6E</div>\n        <div class="block-row">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.axis.xAxis.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'x\')"> \u663E\u793A\u5750\u6807\u8F74\n            </label>\n        </div>\n        <div class="block-row sub-block-row">\n            <i class="bdp-icon ico-line-style ico-no-opacity"></i>\n            <div line-style-select="" class="ml4" val-selected="chartStyle.axis.xAxis.lineStyle" val-change="chartStyleExtendSetting.configAxisLine(\'x\')" click-disabled="!chartStyle.axis.xAxis.enabled"></div>\n            <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n            <select class="line-width-select ml4" ng-model="chartStyle.axis.xAxis.lineWidth" ng-change="chartStyleExtendSetting.configAxisLine(\'x\')" ng-options="lineWidth.value as lineWidth.name for lineWidth in chartStyleExtendSetting.chartLineWidth" ng-disabled="!chartStyle.axis.xAxis.enabled">\n            </select>\n            <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.xAxis.enabled}">\n                <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.xAxis.lineColor}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.xAxis.lineColorAdaption" ng-model="chartStyle.axis.xAxis.lineColor" on-change="chartStyleExtendSetting.changeColor(color)" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'x_axis\')"></color-picker>\n            </span>\n        </div>\n        <div class="block-row sub-block-row" ng-if="chartInfo.chart_type == \'C280\'">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.axis.xAxis.title.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')"> \u663E\u793A\u6807\u9898\u548C\u5355\u4F4D\n            </label>\n        </div>\n        <div class="block-row sub-block-row" ng-if="chartInfo.chart_type == \'C280\'">\n            <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n            <select class="font-family-select ml4" ng-model="chartStyle.axis.xAxis.title.fontFamily" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartStyleExtendSetting.chartFontFamily" ng-disabled="!chartStyle.axis.xAxis.title.enabled">\n            </select>\n            <select class="font-size-select ml4" ng-model="chartStyle.axis.xAxis.title.fontSize" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')" ng-options="fontSize.value as fontSize.name for fontSize in chartStyleExtendSetting.chartFontSize" ng-disabled="!chartStyle.axis.xAxis.title.enabled">\n            </select>\n             <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.xAxis.title.enabled}">\n                <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.xAxis.title.color}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.xAxis.title.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.axis.xAxis.title.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'x_axis_title\')"></color-picker>\n            </span>\n        </div>\n        <div class="block-row sub-block-row">\n            <label>\n                <input type="checkbox" ng-model="chartStyle.axis.xAxis.labels.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')"> \u663E\u793A\u6807\u7B7E\n            </label>\n        </div>\n        <div class="block-row sub-block-row">\n            <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n            <select class="font-family-select ml4" ng-model="chartStyle.axis.xAxis.labels.fontFamily" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartStyleExtendSetting.chartFontFamily" ng-disabled="!chartStyle.axis.xAxis.labels.enabled">\n            </select>\n            <select class="font-size-select ml4" ng-model="chartStyle.axis.xAxis.labels.fontSize" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')" ng-options="fontSize.value as fontSize.name for fontSize in chartStyleExtendSetting.chartFontSize" ng-disabled="!chartStyle.axis.xAxis.labels.enabled">\n            </select>\n            <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.xAxis.labels.enabled}">\n                <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.xAxis.labels.color}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.xAxis.labels.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.axis.xAxis.labels.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'x_axis_labels\')"></color-picker>\n            </span>\n        </div>\n    </div>\n    <div class="style-block J-style-block mt8" ng-if="chartStyleExtendSetting.canSetAxis(\'y\')">\n        <div class="block-title">Y\u8F74\u8BBE\u7F6E(\u4E3B\u8F74)</div>\n        <div class="block-row">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.axis.yAxis.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'y\')"> \u663E\u793A\u5750\u6807\u8F74\n            </label>\n        </div>\n        <div class="block-row sub-block-row">\n            <i class="bdp-icon ico-line-style ico-no-opacity"></i>\n            <div line-style-select="" class="ml4" val-selected="chartStyle.axis.yAxis.lineStyle" val-change="chartStyleExtendSetting.configAxisLine(\'y\')" click-disabled="!chartStyle.axis.yAxis.enabled"></div>\n            <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n            <select class="line-width-select ml4" ng-model="chartStyle.axis.yAxis.lineWidth" ng-change="chartStyleExtendSetting.configAxisLine(\'y\')" ng-options="lineWidth.value as lineWidth.name for lineWidth in chartStyleExtendSetting.chartLineWidth" ng-disabled="!chartStyle.axis.yAxis.enabled">\n            </select>\n            <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.yAxis.enabled}">\n                <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.yAxis.lineColor}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.yAxis.lineColorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.axis.yAxis.lineColor" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'y_axis\')"></color-picker>\n            </span>\n        </div>\n        <div class="block-row sub-block-row">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.axis.yAxis.title.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')"> \u663E\u793A\u6807\u9898\u548C\u5355\u4F4D\n            </label>\n        </div>\n        <div class="block-row sub-block-row">\n            <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n            <select class="font-family-select ml4" ng-model="chartStyle.axis.yAxis.title.fontFamily" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartStyleExtendSetting.chartFontFamily" ng-disabled="!chartStyle.axis.yAxis.title.enabled">\n            </select>\n            <select class="font-size-select ml4" ng-model="chartStyle.axis.yAxis.title.fontSize" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')" ng-options="fontSize.value as fontSize.name for fontSize in chartStyleExtendSetting.chartFontSize" ng-disabled="!chartStyle.axis.yAxis.title.enabled">\n            </select>\n             <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.yAxis.title.enabled}">\n                <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.yAxis.title.color}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.yAxis.title.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.axis.yAxis.title.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'y_axis_title\')"></color-picker>\n            </span>\n        </div>\n        <div class="block-row sub-block-row">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.axis.yAxis.labels.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')"> \u663E\u793A\u6807\u7B7E\n            </label>\n        </div>\n        <div class="block-row sub-block-row">\n            <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n            <select class="font-family-select ml4" ng-model="chartStyle.axis.yAxis.labels.fontFamily" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartStyleExtendSetting.chartFontFamily" ng-disabled="!chartStyle.axis.yAxis.labels.enabled">\n            </select>\n            <select class="font-size-select ml4" ng-model="chartStyle.axis.yAxis.labels.fontSize" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')" ng-options="fontSize.value as fontSize.name for fontSize in chartStyleExtendSetting.chartFontSize" ng-disabled="!chartStyle.axis.yAxis.labels.enabled">\n            </select>\n             <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.yAxis.labels.enabled}">\n                <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.yAxis.labels.color}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.yAxis.labels.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.axis.yAxis.labels.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'y_axis_labels\')"></color-picker>\n            </span>\n        </div>\n    </div>\n    <div class="style-block J-style-block mt8" ng-if="chartStyleExtendSetting.canSetAxis(\'yOptional\')">\n        <div class="block-title">Y\u8F74\u8BBE\u7F6E(\u6B21\u8F74)</div>\n        <div class="block-row">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.axis.yOptionalAxis.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'yOptional\')"> \u663E\u793A\u5750\u6807\u8F74\n            </label>\n        </div>\n        <div class="block-row sub-block-row">\n            <i class="bdp-icon ico-line-style ico-no-opacity"></i>\n            <div line-style-select="" class="ml4" val-selected="chartStyle.axis.yOptionalAxis.lineStyle" val-change="chartStyleExtendSetting.configAxisLine(\'yOptional\')" click-disabled="!chartStyle.axis.yOptionalAxis.enabled"></div>\n            <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n            <select class="line-width-select ml4" ng-model="chartStyle.axis.yOptionalAxis.lineWidth" ng-change="chartStyleExtendSetting.configAxisLine(\'yOptional\')" ng-options="lineWidth.value as lineWidth.name for lineWidth in chartStyleExtendSetting.chartLineWidth" ng-disabled="!chartStyle.axis.yOptionalAxis.enabled">\n            </select>\n            <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.yOptionalAxis.enabled}">\n                <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.yOptionalAxis.lineColor}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.yOptionalAxis.lineColorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.axis.yOptionalAxis.lineColor" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'yOptional_axis\')"></color-picker>\n            </span>\n        </div>\n        <div class="block-row sub-block-row">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.axis.yOptionalAxis.title.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')"> \u663E\u793A\u6807\u9898\u548C\u5355\u4F4D\n            </label>\n        </div>\n        <div class="block-row sub-block-row">\n            <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n            <select class="font-family-select ml4" ng-model="chartStyle.axis.yOptionalAxis.title.fontFamily" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartStyleExtendSetting.chartFontFamily" ng-disabled="!chartStyle.axis.yOptionalAxis.title.enabled">\n            </select>\n            <select class="font-size-select ml4" ng-model="chartStyle.axis.yOptionalAxis.title.fontSize" ng-change="chartStyleExtendSetting.configAxisLine(\'title\')" ng-options="fontSize.value as fontSize.name for fontSize in chartStyleExtendSetting.chartFontSize" ng-disabled="!chartStyle.axis.yOptionalAxis.title.enabled">\n            </select>\n             <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.yOptionalAxis.title.enabled}">\n                <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.yOptionalAxis.title.color}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.yOptionalAxis.title.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.axis.yOptionalAxis.title.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'yOptional_axis_title\')"></color-picker>\n            </span>\n        </div>\n        <div class="block-row sub-block-row">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="chartStyle.axis.yOptionalAxis.labels.enabled" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')"> \u663E\u793A\u6807\u7B7E\n            </label>\n        </div>\n        <div class="block-row sub-block-row">\n            <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n            <select class="font-family-select ml4" ng-model="chartStyle.axis.yOptionalAxis.labels.fontFamily" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartStyleExtendSetting.chartFontFamily" ng-disabled="!chartStyle.axis.yOptionalAxis.labels.enabled">\n            </select>\n            <select class="font-size-select ml4" ng-model="chartStyle.axis.yOptionalAxis.labels.fontSize" ng-change="chartStyleExtendSetting.configAxisLine(\'labels\')" ng-options="fontSize.value as fontSize.name for fontSize in chartStyleExtendSetting.chartFontSize" ng-disabled="!chartStyle.axis.yOptionalAxis.labels.enabled">\n            </select>\n             <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!chartStyle.axis.yOptionalAxis.labels.enabled}">\n                <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyle.axis.yOptionalAxis.labels.color}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyle.axis.yOptionalAxis.labels.colorAdaption" on-change="chartStyleExtendSetting.changeColor(color)" ng-model="chartStyle.axis.yOptionalAxis.labels.color" on-complete="chartStyleExtendSetting.modifyColor(color, opt, \'yOptional_axis_labels\')"></color-picker>\n            </span>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/dash-chart-extend/chart-style-text.html', '<div class="chart-style-container chart-text-style">\n    <p class="container-title has-toggle" ng-click="toggleNextBlock($event)" ng-if="chartStyleTextSetting.mode == \'content\'">\u6587\u672C\u5C5E\u6027\u8BBE\u7F6E</p>\n    <p class="container-title has-toggle" ng-click="toggleNextBlock($event)" ng-if="chartStyleTextSetting.mode == \'title\'">\u6807\u9898\u5C5E\u6027\u8BBE\u7F6E</p>\n    <div class="style-block J-style-block">\n        <div class="block-row">\n            <label>\u5B57\u4F53\u8BBE\u7F6E</label>\n            <select class="ml16" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartStyleTextSetting.chartFontFamily" ng-model="chartStyleTextSetting.viewMeta.style.fontFamily" ng-change="chartStyleTextSetting.applyConfig()"></select>\n        </div>\n        <div class="block-row">\n            <label>\u5B57\u4F53\u989C\u8272</label>\n            <span class="choose-color-wrap ml16">\n                <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartStyleTextSetting.viewMeta.style.fontColor}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="{showAdaption: true, showAlpha: true, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="chartStyleTextSetting.viewMeta.style.fontColorAdaption" on-change="chartStyleTextSetting.changeColor(color)" ng-model="chartStyleTextSetting.viewMeta.style.fontColor" on-complete="chartStyleTextSetting.applyConfig(color, opt)"></color-picker>\n            </span>\n        </div>\n        <div class="block-row">\n            <label>\u5B57\u4F53\u5927\u5C0F</label>\n            <input type="text" class="set-font-size ml16" ng-model="chartStyleTextSetting.viewMeta.style.fontSize" ng-blur="chartStyleTextSetting.applyConfig()" ng-keyup="chartStyleTextSetting.keyUpModify( $event )">\n            <span class="text-square-wrap style-square-item ml8" ng-click="chartStyleTextSetting.viewMeta.style.fontBold = !chartStyleTextSetting.viewMeta.style.fontBold;chartStyleTextSetting.applyConfig()" ng-class="{\'active\': chartStyleTextSetting.viewMeta.style.fontBold}"><i class="bdp-icon ico-text-bold ico-no-opacity"></i></span>\n            <span class="text-square-wrap style-square-item ml8" ng-click="chartStyleTextSetting.viewMeta.style.fontItalic = !chartStyleTextSetting.viewMeta.style.fontItalic;chartStyleTextSetting.applyConfig()" ng-class="{\'active\': chartStyleTextSetting.viewMeta.style.fontItalic}"><i class="bdp-icon ico-text-italic ico-no-opacity"></i></span>\n            <span class="text-square-wrap style-square-item ml8" ng-click="chartStyleTextSetting.viewMeta.style.fontUnderline = !chartStyleTextSetting.viewMeta.style.fontUnderline;chartStyleTextSetting.applyConfig()" ng-class="{\'active\': chartStyleTextSetting.viewMeta.style.fontUnderline}"><i class="bdp-icon ico-text-underline ico-no-opacity"></i></span>\n        </div>\n        <div class="block-row">\n            <label>\u5BF9\u9F50\u65B9\u5F0F</label>\n            <span class="text-square-wrap style-square-item ml16" ng-click="chartStyleTextSetting.changeFontAlign(\'center\')" ng-class="{\'active\': chartStyleTextSetting.viewMeta.style.fontAlign == \'center\'}"><i class="bdp-icon ico-text-center ico-no-opacity"></i></span>\n            <span class="text-square-wrap style-square-item ml8" ng-click="chartStyleTextSetting.changeFontAlign(\'left\')" ng-class="{\'active\': chartStyleTextSetting.viewMeta.style.fontAlign == \'left\'}"><i class="bdp-icon ico-text-left ico-no-opacity"></i></span>\n            <span class="text-square-wrap style-square-item ml8" ng-click="chartStyleTextSetting.changeFontAlign(\'right\')" ng-class="{\'active\': chartStyleTextSetting.viewMeta.style.fontAlign == \'right\'}"><i class="bdp-icon ico-text-right ico-no-opacity"></i></span>\n            <span class="text-square-wrap style-square-item ml8" ng-click="chartStyleTextSetting.changeFontAlign(\'justify\')" ng-class="{\'active\': chartStyleTextSetting.viewMeta.style.fontAlign == \'justify\'}"><i class="bdp-icon ico-text-justify ico-no-opacity"></i></span>\n        </div>\n        <div class="block-row" ng-show="chartStyleTextSetting.mode == \'content\'">\n            <label>\u884C\u9AD8</label>\n            <input type="text" class="ml16" ng-model="chartStyleTextSetting.viewMeta.style.lineHeight" ng-blur="chartStyleTextSetting.applyConfig()" ng-keyup="chartStyleTextSetting.keyUpModify($event)">\n        </div>\n        <div class="block-row" ng-show="chartStyleTextSetting.mode == \'content\'">\n            <label>\u9996\u884C\u7F29\u8FDB</label>\n            <input type="text" class="ml16" ng-model="chartStyleTextSetting.viewMeta.style.textIndent" ng-blur="chartStyleTextSetting.applyConfig()" ng-keyup="chartStyleTextSetting.keyUpModify($event)">\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/dash-edit/dash-edit.html', '<div class="view-header dash-edit-wrapper clearfix" ng-if="dashEditMode">\n    <div class="dash-edit-inner">\n        <h3 class="design-title">\u8BBE\u8BA1\u4EEA\u8868\u76D8</h3>\n        <div class="btn-layer">\n            <div class="item design-mob" ng-if="dashLayoutInfo.layout_style == 2">\n                <a ng-click="setMobLayout(true)">\n                    <i class="bdp-icon ico-mobile"></i>\n                    <span class="btn-layer-opt">\n                        <span>\u79FB\u52A8\u7AEF\u5E03\u5C40</span>\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                </a>\n            </div>\n            <div class="item">\n                <div class="view-header-seperate-line" ng-if="dashLayoutInfo.layout_style == 2"></div>\n                <a class="make-dash-edit-done" ng-click="makeDashEdit(false)">\n                    <i class="bdp-icon ico-ok-blue"></i>\n                    <span class="btn-layer-opt">\n                        <span>\u5B8C\u6210</span>\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                </a>\n                <!-- <button class="cube-btn-radius btn-primary" bo-text="\'save\' | translate" ng-click="makeDashEdit(false)"></button> -->\n            </div>\n        </div>\n\n        <!-- \u5E03\u5C40\u8BBE\u7F6E -->\n        <div class="chart-style-container" ng-if="dashLayoutInfo.layout_style != 2 && !dashLayoutInfo.id">\n            <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u5E03\u5C40\u8BBE\u7F6E</p>\n            <div class="style-block J-style-block">\n                <div class="line-height-32">\n                    <label>\n                        <input type="checkbox" ng-model="dashLayoutInfo.show_block" ng-change="dash.modify(\'show_block\')">\n                        <span>\u663E\u793A\u5143\u7D20\u8FB9\u6846</span>\n                    </label>\n                </div>\n                <div class="line-height-32">\n                    <label>\n                        <input type="checkbox" ng-model="dashLayoutInfo.fixed_width" ng-change="dash.modify(\'fixed_width\')">\n                        <span>\u56FA\u5B9A\u5BBD\u5EA6</span>\n                    </label>\n                </div>\n            </div>\n        </div>\n        <!-- \u95F4\u8DDD\u8BBE\u7F6E -->\n        <div class="chart-style-container" ng-if="dashLayoutInfo.layout_style != 2 && !dashLayoutInfo.id">\n            <p class="container-title has-toggle" ng-click="toggleNextBlock($event)"></p>\n            <div class="style-block J-style-block">\n                <div class="line-height-32">\n                    <label>\n                        <span></span>\n                        <input type="number" placeholder="4" ng-model="dashLayoutInfo.chart_padding_margin.chart_margin" ng-blur="dash.modify(\'chart_margin\')" ng-keyup="dash.modify(\'chart_margin\', $event)" ng-disabled="!dashLayoutInfo.show_block">\n                        <span></span>\n                    </label>\n                </div>\n                <div class="line-height-32">\n                    <label>\n                        <span></span>\n                        <input type="number" placeholder="24" ng-model="dashLayoutInfo.chart_padding_margin.chart_padding_v" ng-blur="dash.modify(\'chart_padding_v\')" ng-keyup="dash.modify(\'chart_padding_v\', $event)">\n                        <span></span>\n                    </label>\n                </div>\n                <div class="line-height-32">\n                    <label>\n                        <span></span>\n                        <input type="number" placeholder="32" ng-model="dashLayoutInfo.chart_padding_margin.chart_padding_h" ng-blur="dash.modify(\'chart_padding_h\')" ng-keyup="dash.modify(\'chart_padding_h\', $event)">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n        </div>\n        <!-- \uFF0A\u70B9\u51FB\u5355\u56FE\u5355\u72EC\u8FDB\u884C\u8BBE\u7F6E -->\n        <div class="block ml16" ng-if="!dashLayoutInfo.id">\n            <div class="view-header-seperate-line"></div>\n            <span class="setting-tip mr16">\uFF0A\u70B9\u51FB\u5355\u56FE\u5355\u72EC\u8FDB\u884C\u8BBE\u7F6E</span>\n        </div>\n        <!-- \u56FE\u8868\u663E\u793A -->\n        <div class="chart-style-container" ng-if="dashLayoutInfo.dash_setting" ng-show="dash.canSetTitle()">\n            <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u56FE\u8868\u663E\u793A</p>\n            <div class="style-block J-style-block">\n                <div class="line-height-32" ng-show="dash.canSetTitle()">\n                    <label>\n                        <input type="checkbox" ng-model="dashLayoutInfo.dash_setting.show_title" ng-change="dash.modify(\'title\')" ng-disabled="dashLayoutInfo.chart_type == \'C310\'">\n                        <span>\u6807\u9898</span>\n                    </label>\n                </div>\n                <div class="line-height-32" ng-show="dash.canSetLegend()">\n                    <label>\n                        <input type="checkbox" ng-model="dashLayoutInfo.dash_setting.show_legend" ng-change="dash.modify(\'legend\')">\n                        <span>\u56FE\u4F8B</span>\n                    </label>\n                </div>\n                <div class="line-height-32" ng-show="dash.canSetAxis()">\n                    <label>\n                        <input type="checkbox" ng-model="dashLayoutInfo.dash_setting.show_axis" ng-change="dash.modify(\'axis\')">\n                        <span>\u5750\u6807\u8F74</span>\n                    </label>\n                </div>\n                <div class="line-height-32" ng-show="dash.canSetDataLabels()">\n                    <label>\n                        <input type="checkbox" ng-model="dashLayoutInfo.dash_setting.show_datalabels" ng-change="dash.modify(\'datalabels\')">\n                        <span>\u6807\u7B7E\u503C</span>\n                    </label>\n                </div>\n                <div class="line-height-32" ng-show="dash.canSetTotal()">\n                    <label>\n                        <input type="checkbox" ng-model="dashLayoutInfo.dash_setting.show_total" ng-change="dash.modify(\'total\')">\n                        <span>\u603B\u8BA1</span>\n                    </label>\n                </div>\n                <div class="line-height-32" ng-show="dash.canSetNavigator()">\n                    <label>\n                        <input type="checkbox" ng-model="dashLayoutInfo.dash_setting.show_navigator" ng-change="dash.modify(\'navigator\')">\n                        <span>\u7F29\u7565\u8F74</span>\n                    </label>\n                </div>\n            </div>\n        </div>\n        <!-- \u8FB9\u6846\u8BBE\u7F6E -->\n        <div class="chart-style-container" ng-if="dashLayoutInfo.ct_id && !dashLayoutInfo.show_block">\n            <p class="container-title has-toggle" ng-click="toggleNextBlock($event)">\u8FB9\u6846</p>\n            <div class="style-block J-style-block clearfix">\n                <div class="block dash-border">\n                    <!-- <div class="hd" bo-text="\'border\'|translate"></div> -->\n                    <div class="bd">\n                        <a class="bdp-icon-wrap" ng-class="{\'active\':dashLayoutInfo.dash_setting.border_null}" ng-click="dash.toggleBorder(\'null\')">\n                            <i class="bdp-icon ico-border-null"></i>\n                        </a>\n                        <a class="bdp-icon-wrap" ng-class="{\'active\':dashLayoutInfo.dash_setting.border_top}" ng-click="dash.toggleBorder(\'top\')">\n                            <i class="bdp-icon ico-border-top"></i>\n                        </a>\n                        <a class="bdp-icon-wrap" ng-class="{\'active\':dashLayoutInfo.dash_setting.border_right}" ng-click="dash.toggleBorder(\'right\')">\n                            <i class="bdp-icon ico-border-right"></i>\n                        </a>\n                        <a class="bdp-icon-wrap" ng-class="{\'active\':dashLayoutInfo.dash_setting.border_bottom}" ng-click="dash.toggleBorder(\'bottom\')">\n                            <i class="bdp-icon ico-border-bottom"></i>\n                        </a>\n                        <a class="bdp-icon-wrap" ng-class="{\'active\':dashLayoutInfo.dash_setting.border_left}" ng-click="dash.toggleBorder(\'left\')">\n                            <i class="bdp-icon ico-border-left"></i>\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- \u6837\u5F0F\u8BBE\u7F6E -->\n        <div class="chart-style-container chart-style-edit-container" ng-if="dashLayoutInfo.ct_id">\n            <p class="container-title has-toggle" ng-click="toggleNextBlock($event)"></p>\n            <chart-style class="J-style-block" data="dashLayoutInfo.ct_id"></chart-style>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/dash-template/dashTemplate.html', '<div bindonce="" class="dash-template">\n    <div class="dash-template-header">\n        <!-- header -->\n        <div class="dash-template-title view-header">\n            <a class="dash-template-exit" ng-click="exit()">\n                <i class="bdp-icon ico-back"></i>\n            </a>\n            <div class="dash-template-head">\n                <span></span>\n            </div>\n        </div>\n        <!-- config -->\n        <div class="dash-template-config clearfix">\n            <div class="dash-template-config-item">\n                <span class="dash-template-config-header"></span>\n                <div class="dash-template-config-content folder">\n                    <!-- \u6587\u4EF6\u5939\u9009\u62E9\u4E0B\u62C9\u6846 -->\n                    <div class="form-field project-folder-dropdown" click-outside="dashData.showDropdown = false" outside-active="dashData.showDropdown">\n                        <p class="selected-item nowrap" ng-click="dashData.showDropdown = !dashData.showDropdown" title="{{dashData.selectedFolderName}}">\n                            <span>{{dashData.selectedFolderName}}</span>\n                            <i class="bdp-icon ico-triangle-down"></i>\n                        </p>\n                        <div class="dropdown-wrap select-list project-list-common" ng-show="dashData.showDropdown" ui-tree="">\n                            <ul ui-tree-nodes="" ng-model="all_project_list" class="select-list-box">\n                                <li ng-if="all_project_list.length != 0 && projItem.attribute == \'project\' && projItem.type == 0" class="project-item nowrap" ng-repeat="projItem in all_project_list track by $index" title="{{projItem.name}}" ui-tree-node="" ng-include="\'createDashboardTpl\'" data-nodrag="">{{projItem.name}}</li>\n                                <li class="no-item" ng-if="all_project_list.length == 0">\n                                    \u65E0\u6587\u4EF6\u5939\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="dash-template-config-item">\n                <span class="dash-template-config-header"></span>\n                <input class="dash-template-config-content" ng-model="dashData.name">\n            </div>\n\n            <div class="dash-template-config-item">\n                <span class="dash-template-config-header"></span>\n                <input class="dash-template-config-content" ng-model="dashData.label">\n            </div>\n\n            <div class="dash-template-config-item">\n                <span class="dash-template-config-header"></span>\n                <input class="dash-template-config-content" ng-model="dashData.comment">\n            </div>\n        </div>\n        <!-- select template -->\n        <div class="dash-template-desc ml24"></div>\n    </div>\n    <!-- template -->\n    <div class="dash-template-content">\n        <div lazy-container="" class="dash-template-content-grid">\n            <ul class="dash-template-content-col" ng-style="gridStyle" ng-repeat="templateCol in templateShowList">\n                <li class="dash-template-grid-item" ng-repeat="template in templateCol">\n                    <!-- \u9009\u62E9\u65E0\u6A21\u677F\u7684\u521B\u5EFA | \u6CA1\u6709\u6A21\u677F\u65F6\u663E\u793A\u6682\u65E0\u6A21\u677F -->\n                    <div class="dash-template-item" ng-if="template.default" ng-style="template.style" ng-click="selectTemplate(template)" ng-class="{active:template.selected}">\n                        <img style="visibility: hidden" ng-if="!template.hideImage" ng-src="{{template.image}}">\n                        <div class="dash-tempalte-empty-wrapper">\n                            <div class="dash-tempalte-empty-inner">\n                                <i class="bdp-icon ico-create-dash-screen" ng-click="createEmptyTemplate()"></i>\n                                <span></span>\n                            </div>\n                        </div>\n                    </div>\n                    <!-- \u6709\u6A21\u677F\u7684\u521B\u5EFA -->\n                    <div class="dash-template-item" ng-click="selectTemplate(template)" ng-class="{active:template.selected}">\n                        <!-- <img lazy-src="{{template}}" lazy-src="{{template.image}}"> -->\n                        <img lazy-src="template" lazy-template="true">\n                        <div class="dash-template-info">\n                            <span class="fl">{{template.name}}</span>\n                            <span class="fr">{{template.sizeX+\'*\'+template.sizeY}}</span>\n                            <span class="fr"></span>\n                        </div>\n                        <div class="dash-template-opera-item">\n                            <div class="dash-template-opera-preview fl" ng-click="preview(template,$event)">\n                                <i class="bdp-icon ico-fullscreen-2"></i>\n                                <span></span>\n                            </div>\n                            <div ng-if="enterprise_type == 11" class="dash-template-opera-delete fl ml6" ng-click="delete(template,$event)">\n                                <i class="bdp-icon ico-delete-template"></i>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <!-- opera -->\n    <div class="dash-template-opera">\n        <!-- <button class="dash-tempalte-btn" promise-button pb-click="ok()" pb-completed="global.clickComplete">\n            <span bo-text="\'\u786E\u5B9A\'| translate"></span>\n        </button> -->\n        <button ripple-button="" class="dash-tempalte-btn" ng-click="ok()">\n            <span></span>\n        </button>\n        <button class="ngdialog-button ngdialog-button-secondary" ng-click="exit()">\n            <span></span>\n        </button>\n    </div>\n\n    <!-- preview -->\n    <div class="dash-template-preview" ng-if="previewTemplate">\n        <div class="dash-template-preview-header view-header">\n            <a ng-click="exitPreview()">\n                <i class="bdp-icon ico-no-opacity ico-delete"></i>\n            </a>\n            <span>{{previewTemplate.name}}</span>\n        </div>\n        <div class="dash-template-preview-content">\n            <div class="dash-template-preview-content-wrapper">\n                <ul>\n                    <li ng-repeat="template in previewList">\n                        <img ng-if="template.ready" ng-src="{{template.image}}">\n                    </li>\n                </ul>\n                <a class="dash-template-preview-tip tip-left" ng-class="{active:showPrevActive}" ng-click="showPrev()">\n                    <i class="bdp-icon ico-no-opacity ico-dash-preview-prev" ng-show="showPrevActive"></i>\n                    <i class="bdp-icon ico-no-opacity ico-dash-preview-prev-disable" ng-show="!showPrevActive"></i>\n                </a>\n                <a class="dash-template-preview-tip tip-right" ng-class="{active:showNextActive}" ng-click="showNext()">\n                    <i class="bdp-icon ico-no-opacity ico-dash-preview-next" ng-show="showNextActive"></i>\n                    <i class="bdp-icon ico-no-opacity ico-dash-preview-next-disable" ng-show="!showNextActive"></i>\n                </a>\n            </div>\n        </div>\n        <div class="dash-template-preview-opera">\n            <button class="dash-tempalte-btn" ng-click="okPreview()">\n                <span></span>\n            </button>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="createDashboardTpl">\n    <div class="cat-op-parent level-{{projItem.deep}}" ng-click="treeSelectParent(projItem, \'dashboard\')">\n        <span class="name-wrap no-wrap">\n        <i class="bdp-icon ico-triangle-down node-prefix-triangle ng-scope ico-no-opacity" ng-click="nodeCollapseHandle( $event, projItem)" ng-if="!projItem.nodeCollapse"></i>\n        <i class="bdp-icon ico-triangle-right node-prefix-triangle ng-scope" ng-if="projItem.nodeCollapse" ng-click="nodeCollapseHandle( $event, projItem)"></i>\n        {{projItem.name}}</span>\n    </div>\n    <ul ui-tree-nodes="" ng-model="projItem.subs" ng-if="projItem.subs.length > 0 && !projItem.nodeCollapse">\n        <li class="project-item nowrap" ng-repeat="projItem in projItem.subs" ui-tree-node="" ng-if="projItem.attribute == \'project\' && projItem.type == 0" ng-include="\'createDashboardTpl\'" data-nodrag="">\n        </li>\n    </ul>\n</script>');
    $templateCache.put('/static/dashboard/dash-template/editChartTemplate.html', '<div class="edit-chart-template" bindonce="">\n    <div class="ngdialog-title"></div>\n\n    <div class="ngdialog-message">\n        <!-- \u9996\u90E8\u4FE1\u606F -->\n        <div></div>\n        <div class="edit-template-tab">\n            <div class="edit-template-tab-line">\n            </div>\n            <div class="edit-template-tab-process process-1">\n                <i>1</i>\n                <div></div>\n            </div>\n            <div class="edit-template-tab-process process-2">\n                <i>2</i>\n                <div></div>\n            </div>\n        </div>\n\n        <!-- \u5DE5\u4F5C\u8868tab -->\n        <div class="edit-template-process">\n            <div class="tab-header">\n                <div class="tab-header-wrap">\n                    <div class="tab-header-item" ng-click="tabWorkTable(data)" ng-repeat="data in editChartList" ng-class="{\'active\':data.active}">\n                        {{data.name}}\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="edit-template-tip"></div>\n\n        <div class="edit-template-select-wrap" on-edit-template-scroll="">\n            <ul>\n                <!-- \u9009\u62E9\u5DE5\u4F5C\u8868 -->\n                <li class="edit-template-map-item clearfix">\n                    <span class="dimension-name"></span>\n                    <div class="edit-template-dropdown ml10" ng-click="clickSelect()" click-outside="clickSelectOutside()" outside-active="chartAddView.showSelect">\n                        {{editChartInfo.workTableInfo.selectedName||\'\u8BF7\u5148\u9009\u62E9\u5DE5\u4F5C\u8868\'}}\n                        <div class="edit-template-dropdown-content" ng-click="stopPropagation($event)" ng-show="chartAddView.showSelect">\n                            <wtb-list class="tab-bd-item chart-add-view{{chartAddView.tabIndex}}" wtb-list-output="wtbList">\n                                <!-- <p class="mt8" bo-text="\'dash.selectTbTitle\' | translate"></p> -->\n                                <wtb-search class="wtb-search"></wtb-search>\n                                <wtb-content class="mt8 folder-scroll-wrap pr">\n                                    <div ng-repeat="folder in wtbList.vm" ng-include="\'editTemplateTable\'" wtb-folder="folder"></div>\n                                </wtb-content>\n                            </wtb-list>\n                            <script type="text/ng-template" id="editTemplateTable">\n                                    <div class="folder-name cursor-pointer white-space-nowrap" wtb-load-handle="" wtb-folder-content="">\n                                        <i class="bdp-icon ico-folder1" ng-class="{\'ico-folder1-open\':folderCtrl.open, \n                                            \'ico-folder-record-open\': folderCtrl.open && folder.folderId == \'recently_use_folder\', \n                                            \'ico-folder-record\': !folderCtrl.open && folder.folderId == \'recently_use_folder\'}"></i>\n                                        <span class="display-inline-block vm" bo-text="folder.name"></span>\n                                    </div>\n                                    <wtb-folder-child>\n                                        <ul>\n                                            <li ng-repeat="folder in folder.sub_folders" ng-include="\'editTemplateTable\'" wtb-folder="folder">\n                                            </li>\n                                        </ul>\n                                        <ul>\n                                            <li class="table-wrap" ng-repeat="tb in folder.tb_list" wtb-table="tb">\n                                                <div class="add-chart-radio" ng-if="!chartAddView.showMultiple">\n                                                    <label class="tb-label">\n                                                        <input type="radio" ng-click="selectTb()" ng-model="chartAddView.selectedTbId" ng-value="tb.tb_id">\n                                                        <wtb-label label-host="tb" unlimit-width="true" class="display-inline-block">\n                                                            <span bo-text="tb.name | cutLength : 300"></span>\n                                                        </wtb-label>\n                                                    </label>\n                                                </div>\n                                                <div class="add-chart-checkbox" ng-if="chartAddView.showMultiple">\n                                                    <label class="tb-label" ng-class="{\'graft-disabled-wrapper\': tb.type == \'graft\'}">\n                                                        <input type="checkbox" ng-model="chartAddView.selectTbMap[tb.tbId]" ng-disabled="tb.type == \'graft\'">\n                                                        <wtb-label label-host="tb" unlimit-width="true" class="display-inline-block">\n                                                            <span class="graft-font-disabled" bo-text="tb.name | cutLength : 300"></span>\n                                                        </wtb-label>\n                                                    </label>\n                                                </div>\n                                            </li>\n                                        </ul>\n                                    </wtb-folder-child>\n                                </script>\n                        </div>\n                    </div>\n                </li>\n\n                <!-- \u9009\u62E9\u7EF4\u5EA6\u5217\u6570\u503C\u5217 -->\n                <li class="edit-template-map-item clearfix mt15" ng-repeat="data in editChartInfo.dataMapList">\n                    <span class="dimension-name">{{data.name}}</span>\n                    <div class="dimension-select ml10" select-search-list="" select-data="data.selected" search-list="data.list"></div>\n                </li>\n\n            </ul>\n        </div>\n    </div>\n\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" promise-button="" pb-click="confirm()" pb-completed="global.clickComplete">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="exit()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/dash-template/publishDashTemplate.html', '<div class="publish-dash-template" bindonce="">\n    <div class="ngdialog-title">\u63D0\u4EA4\u53D1\u5E03</div>\n    <div class="ngdialog-message pr form-group">\n        <div class="row mb10">\n            <label class="form-label mr10"></label>\n            <input class="form-field ng-pristine ng-valid" ng-model="templateName" maxlength="10" type="text">\n        </div>\n        <div class="row mb10">\n            <label class="form-label mr10"></label>\n        </div>\n        <div class="row mb10">\n            <img ng-if="!!imageData.imageDataURI" ng-src="{{imageData.imageDataURI}}">\n            <div ng-if="!imageData.imageDataURI" class="upload-dash-template-wrapper">\n                <div class="upload-dash-template" id="upload_dash_template_btn" ngf-select="" ngf-multiple="false" ng-model="imageFile" ngf-accept="imageData.acceptType" ngf-max-files="1" ngf-change="imageData.upload(imageFile)">\n                    <!-- <span bdp-replace bo-text="\'\u4E0A\u4F20\u56FE\u7247\'|translate"></span> -->\n                    <i class="bdp-icon ico-dash-template-upload"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" promise-button="" pb-click="submit()" pb-completed="global.clickComplete">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/export-dashboard/export-dash-modal.html', '<div bindonce="">\n    <div class="ngdialog-title" ng-if="exportType == \'img\'">\u5BFC\u51FA\u4EEA\u8868\u76D8</div>\n    <div class="ngdialog-title" ng-if="exportType == \'pdf\'">\u5BFC\u51FAPDF</div>\n    <div class="ngdialog-title" ng-if="exportType == \'word\'">\u5BFC\u51FAWord</div>\n    <div class="ngdialog-message">\n\n        <div ng-if="state == \'init\'">\n            <div ng-if="exportType == \'img\'">\n                <label class="hd">\u5BFC\u51FA\u5C3A\u5BF8</label><br>\n                <div class="export-options">\n                    <label>\n                        <input type="radio" value="scale_1" ng-model="exportSetting.scale">\n                        1x\n                    </label>\n                    <label class="ml40">\n                        <input type="radio" value="scale_2" ng-model="exportSetting.scale">\n                        2x\n                    </label>\n                </div>\n            </div>\n            <div ng-if="exportType == \'pdf\'">\u662F\u5426\u5C06\u786E\u5B9A\u6B64\u4EEA\u8868\u76D8\u5BFC\u51FA\u4E3APDF\uFF1F</div>\n            <div ng-if="exportType == \'word\'">\u662F\u5426\u5C06\u786E\u5B9A\u6B64\u4EEA\u8868\u76D8\u5BFC\u51FA\u4E3AWord\uFF1F</div>\n        </div>\n\n        <div ng-if="state == \'wait-chart-loading\'" class="text-center font-size-14">\n            <span>\u6B63\u5728\u52A0\u8F7D\u56FE\u8868</span> {{loadedState.loaded}}/{{loadedState.total}}\n        </div>\n\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="exportDashConfirm()" ng-show="state != \'wait-chart-loading\'">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()" ng-show="state != \'wait-chart-loading\'">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/network-project/add-network-segment.html', '<div bindonce="">\n    <div class="ngdialog-title">\u6DFB\u52A0\u7F51\u6BB5</div>\n    <div class="ngdialog-message">\n        <div class="form-group mt10 dashboard-message">\n            <div class="row mb10">\n                <label class="form-label mr10">\u7F51\u6BB5\u540D\u79F0</label><input class="form-field network-name-input" type="text" ng-model="form.bridge_name">\n            </div>\n            <div class="row mb10 line-height-32 clearfix">\n                <label class="form-label fl mr10">IP\u8303\u56F4</label>\n                <div class="fl">\n                    <label class="cursor-pointer network-ip-input">\n                        <input class="form-field" type="text" ng-model="form.ip_start">\n                    </label>\n                    -\n                    <label class="cursor-pointer network-ip-input">\n                        <input class="form-field" type="text" ng-model="form.ip_end">\n                    </label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="editNetworkSegment()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeDialog()">\u53D6\u6D88</button>\n    </div>\n    <div ng-loading-gif="" ng-if="form.loading"></div>\n</div>');
    $templateCache.put('/static/dashboard/network-project/network-dashboard.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u7F51\u6BB5\u8BBE\u7F6E</div>\n\t<div class="ngdialog-message">\n\t\t<div class="network-title auto">\n\t\t\t{{\'dash.checkNetwork\'|translate}}\n\t\t\t<button class="network-button" ng-click="openAddNetworkSegment()" ng-if="ngDialogData.net_info_allow">\u6DFB\u52A0\u7F51\u6BB5</button>\n\t\t</div>\n\t\t<div class="network-box">\n\t\t\t<div class="chart-error" ng-if="tableData.length === 0"><p>\u6682\u65E0\u7F51\u6BB5\uFF0C\u8BF7\u6DFB\u52A0</p></div>\n\t\t\t<table class="bdp-table-a no-shadow" ng-if="tableData.length > 0">\n\t\t\t\t<colgroup>\n\t\t\t\t\t<col width="48px">\n\t\t\t\t\t<col width="115px">\n\t\t\t\t\t<col width="228px">\n\t\t\t\t</colgroup>\n\t\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th></th>\n\t\t\t\t\t<th>\u7F51\u6BB5\u540D\u79F0</th>\n\t\t\t\t\t<th>IP\u8303\u56F4</th>\n\t\t\t\t\t<th bo-if="ngDialogData.net_info_allow"></th>\n\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t<tr class="ng-scope" ng-class="{\'edit-mode\': row.edit}" ng-repeat="row in tableData">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="checkbox" class="ng-pristine ng-valid" ng-checked="row.check" ng-model="row.check">\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td class="ns-name" ng-if="!row.edit">{{row.bridge_name}}</td>\n\t\t\t\t\t<td class="ns-name" ng-if="row.edit">\n\t\t\t\t\t\t<input type="text" class="query-text ng-pristine ng-valid" ng-class="{\'has-text\': row.form.bridge_name}" ng-model="row.form.bridge_name">\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td class="ns-range" ng-if="!row.edit">{{row.ip_start}} - {{row.ip_end}}</td>\n\t\t\t\t\t<td class="ns-range" ng-if="row.edit">\n\t\t\t\t\t\t<input type="text" class="query-text ng-pristine ng-valid" ng-class="{\'has-text\': row.form.ip_start}" ng-model="row.form.ip_start">\n\t\t\t\t\t\t-\n\t\t\t\t\t\t<input type="text" class="query-text ng-pristine ng-valid" ng-class="{\'has-text\': row.form.ip_end}" ng-model="row.form.ip_end">\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td class="authorization-operator" ng-if="ngDialogData.net_info_allow && !row.edit">\n\t\t\t\t\t\t<i class="bdp-icon ico-edit ng-scope" ng-click="editLine(row)"></i>\n\t\t\t\t\t\t<i class="bdp-icon ico-trash ng-scope" ng-click="delLine(row, $index)"></i>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class="authorization-operator" ng-if="ngDialogData.net_info_allow && row.edit">\n\t\t\t\t\t\t<i class="bdp-icon ico-ok ng-scope" ng-click="sumbitEditLine(row)"></i>\n\t\t\t\t\t\t<i class="bdp-icon ico-delete ng-scope" ng-click="row.edit = !row.edit"></i>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="commitNetworkSegment()">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeDialog()">\u53D6\u6D88</button>\n\t</div>\n</div>');
    $templateCache.put('/static/dashboard/project-list/add-network-segment.html', '<div bindonce="">\n    <div class="ngdialog-title">\u6DFB\u52A0\u7F51\u6BB5</div>\n    <div class="ngdialog-message">\n        <div class="form-group mt10 dashboard-message">\n            <div class="row mb10">\n                <label class="form-label mr10">\u7F51\u6BB5\u540D\u79F0</label><input class="form-field network-name-input" type="text" ng-model="form.bridge_name">\n            </div>\n            <div class="row mb10 line-height-32 clearfix">\n                <label class="form-label fl mr10">IP\u8303\u56F4</label>\n                <div class="fl">\n                    <label class="cursor-pointer network-ip-input">\n                        <input class="form-field" type="text" ng-model="form.ip_start">\n                    </label>\n                    -\n                    <label class="cursor-pointer network-ip-input">\n                        <input class="form-field" type="text" ng-model="form.ip_end">\n                    </label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="editNetworkSegment()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/dashboard/project-list/copy-dashboard.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u590D\u5236\u4EEA\u8868\u76D8</div>\n\t<div class="ngdialog-message">\n\t    <div class="copy-chart-box form-group">\n\t        <p class="hd">\n\t        \t<span>\u5C06\u4EEA\u8868\u76D8</span>\n\t        \t<span class="dash-name">{{ngDialogData.dash_name}}</span>\n\t        \t<span>\u590D\u5236\u5230</span>\uFF1A</p>\n\t        <div select-proj-dash="" proj-list="ngDialogData.proj_list" proj-id="ngDialogData.cur_proj_id" opt-type="copyDash" new-dash-name="ngDialogData.dash_new_name"></div>\n\t    </div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t    <button type="button" class="ngdialog-button ngdialog-button-primary" promise-button="" pb-completed="global.clickComplete" pb-click="ngDialogData.save(ngDialogData)">\u786E\u5B9A</button>\n\t    <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\t</div>\n</div>');
    $templateCache.put('/static/dashboard/project-list/create-dashboard.html', '<div bindonce="">\n    <div class="ngdialog-title" ng-show="createDashData.type == \'create\'">\u65B0\u5EFA\u4EEA\u8868\u76D8</div>\n    <div class="ngdialog-title" ng-show="createDashData.type == \'edit\'">\u7F16\u8F91\u4EEA\u8868\u76D8</div>\n    <div class="ngdialog-message">\n        <div class="form-group mt10 dashboard-message">\n            <div class="row mb10 clearfix" ng-show="createDashData.type == \'create\'">\n                <label class="form-label mr10 fl">\u6587\u4EF6\u5939\u540D\u79F0</label>\n                <div class="form-field project-folder-dropdown fl" click-outside="createDashData.showDropdown = false" outside-active="createDashData.showDropdown">\n                    <p class="selected-item nowrap" ng-click="createDashData.showDropdown = !createDashData.showDropdown" title="{{createDashData.selectedName}}">\n                        <span>{{createDashData.selectedName}}</span>\n                        <i class="bdp-icon ico-triangle-down"></i>\n                    </p>\n                    <div class="dropdown-wrap select-list project-list-common" ng-show="createDashData.showDropdown" ui-tree="">\n                        <ul ui-tree-nodes="" ng-model="all_project_list" class="select-list-box">\n                            <li ng-if="all_project_list.length != 0 && projItem.attribute == \'project\' && projItem.property != 1 && projItem.type == 0" class="project-item nowrap" ng-repeat="projItem in all_project_list track by $index" title="{{projItem.name}}" ui-tree-node="" ng-include="\'createDashboardTpl\'" data-nodrag="">{{projItem.name}}</li>\n                            <li class="no-item" ng-if="all_project_list.length == 0">\u65E0\u6587\u4EF6\u5939</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class="row mb10">\n                <label class="form-label mr10">\u4EEA\u8868\u76D8\u540D\u79F0</label><input class="form-field" type="text" ng-model="newDash.name">\n            </div>\n            <div class="row mb10 line-height-32 dashboard-type-select" ng-show="createDashData.type == \'create\' && permision.navAdvDashboard">\n                <label class="form-label mr10">\u4EEA\u8868\u76D8\u7C7B\u578B</label>\n                <label class="mr10 cursor-pointer">\n                    <input type="radio" ng-model="newDash.category" value="0">\n                    <span>\u666E\u901A\u4EEA\u8868\u76D8</span>\n                </label>\n                <label class="mr10 cursor-pointer" bdp-tooltip="popupTips.advanceDashTip" tooltip-placement="bottom">\n                    <input type="radio" ng-model="newDash.category" value="2">\n                    <span>\u9AD8\u7EA7\u4EEA\u8868\u76D8</span><i class="bdp-icon bdp-icon-beta ico-beta-small"></i></label>\n            </div>\n            <div class="row mb10" ng-show="createDashData.type == \'create\' && permision.navAdvDashboard">\n                <div class="dashboard-type-preview normal-type" ng-class="{\'light-theme\': usedThemeId == 2, \'dark-theme\': usedThemeId == 1 }" ng-if="newDash.category == 0"></div>\n                <div class="dashboard-type-preview adv-type" ng-class="{\'light-theme\': usedThemeId == 2, \'dark-theme\': usedThemeId == 1 }" ng-if="newDash.category == 2"></div>\n            </div>\n            <div class="row mb10 pr" ng-mouseleave="hitLabelList.show = false">\n                <label class="form-label mr10">\u5206\u7C7B\u6807\u7B7E</label>\n                    <input class="form-field" type="text" ng-model="newDash.label" maxlength="20" ng-keydown="labelLimit($event,newDash.label)" ng-keyup="hitExistDashLabel(newDash.label)" ng-click="hitExistDashLabel(newDash.label)">\n                <div class="item-label-list" ng-show="hitLabelList.show && hitLabelList.list.length > 0">\n                    <p ng-repeat="item in hitLabelList.list track by $index" ng-click="newDash.label = item;hitLabelList.show = false;" class="nowrap" title="{{item}}">{{item}}</p>\n                </div>\n            </div>\n            <div class="row mb10 pt12">\n                <label class="form-label mr10 vt">\u4EEA\u8868\u76D8\u5907\u6CE8</label>\n                <textarea class="form-field" type="text" ng-model="newDash.comment" maxlength="100" ng-keydown="newDash.commentLimit($event,newDash.comment)"></textarea>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-show="createDashData.type == \'create\'" ng-click="createDashboard(newDash, selectFolder, closeThisDialog)">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-show="createDashData.type == \'edit\'" ng-click="saveEdit(newDash, closeThisDialog)">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>\n\n<script type="text/ng-template" id="createDashboardTpl">\n    <div class="cat-op-parent level-{{projItem.deep}}" ng-click="treeSelectParent(projItem, \'dashboard\')">\n        <span class="name-wrap no-wrap">\n        <i class="bdp-icon ico-triangle-down node-prefix-triangle ng-scope ico-no-opacity" ng-click="nodeCollapseHandle( $event, projItem)" ng-if="!projItem.nodeCollapse"></i>\n        <i class="bdp-icon ico-triangle-right node-prefix-triangle ng-scope" ng-if="projItem.nodeCollapse" ng-click="nodeCollapseHandle( $event, projItem)"></i>\n        {{projItem.name}}</span>\n    </div>\n    <ul ui-tree-nodes="" ng-model="projItem.subs" ng-if="projItem.subs.length > 0 && !projItem.nodeCollapse">\n        <li class="project-item nowrap" ng-repeat="projItem in projItem.subs" ui-tree-node="" ng-if="projItem.attribute == \'project\' && projItem.property != 1 && projItem.type == 0" ng-include="\'createDashboardTpl\'" data-nodrag="">\n        </li>\n    </ul>\n</script>');
    $templateCache.put('/static/dashboard/project-list/create-data-screen.html', '<div bindonce="">\n<div class="ngdialog-title" ng-show="createDashData.type == \'create\'">\u65B0\u5EFA\u6570\u636E\u5927\u5C4F</div>\n<div class="ngdialog-title" ng-show="createDashData.type == \'edit\'">\u7F16\u8F91\u6570\u636E\u5927\u5C4F</div>\n<div class="ngdialog-message">\n    <div class="form-group mt10 dashboard-message">\n        <div class="clearfix row mb10" ng-show="createDashData.type == \'create\'">\n            <label class="form-label mr10 fl">\u6240\u5C5E\u6587\u4EF6\u5939</label>\n            <div class="form-field project-folder-dropdown fl" click-outside="createDashData.showDropdown = false" outside-active="createDashData.showDropdown">\n                <p class="selected-item nowrap" ng-click="createDashData.showDropdown = !createDashData.showDropdown" title="{{createDashData.selectedName}}">\n                    <span>{{createDashData.selectedName}}</span>\n                    <i class="bdp-icon ico-triangle-down"></i>\n                </p>\n                <div class="dropdown-wrap select-list project-list-common" ng-show="createDashData.showDropdown" ui-tree="">\n                    <ul ui-tree-nodes="" ng-model="all_project_list" class="select-list-box">\n                        <li ng-if="all_project_list.length != 0 && projItem.attribute == \'project\' && projItem.type == 0" class="project-item nowrap" ng-repeat="projItem in all_project_list track by $index" title="{{projItem.name}}" ui-tree-node="" ng-include="\'createDashboardTpl\'" data-nodrag="">{{projItem.name}}</li>\n                        <li class="no-item" ng-if="all_project_list.length == 0">\u65E0\u6587\u4EF6\u5939</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="clearfix row mb10">\n            <label class="form-label mr10 fl">\u5927\u5C4F\u540D\u79F0</label>\n            <input class="form-field" type="text" ng-model="newDash.name">\n        </div>\n        <div class="row mb10 data-screen-resolution">\n            <label class="form-label mr10 vt">\u5927\u5C4F\u5206\u8FA8\u7387</label>\n            <span class="display-inline-block">\n                <label class="display-inline"><input type="radio" name="screenSize" value="1" ng-model="newDash.screenSizeObj.type"></label>\n                <select class="form-field-screen-size" ng-model="newDash.screenSizeResolution" ng-options="item.value as item.name for item in newDash.screenSizeList">\n                </select>\n                <br>\n                <span class="display-inline-block mt8">\n                    <label class="display-inline"><input type="radio" name="screenSize" value="2" ng-model="newDash.screenSizeObj.type">\u81EA\u5B9A\u4E49</label>\n                    <input class="customize-px" type="number" ng-model="newDash.screenSizeObj.width" placeholder="\u5BBD">\n                    <span class="display-inline-block">X</span>\n                    <input class="customize-px" type="number" ng-model="newDash.screenSizeObj.height" placeholder="\u9AD8">\n                </span>\n            </span>\n        </div>\n        <div class="row mb10 pr" ng-mouseleave="hitLabelList.show = false">\n            <label class="form-label mr10 fl">\u5927\u5C4F\u6807\u7B7E</label>\n            <input class="form-field" type="text" ng-model="newDash.label" maxlength="20" ng-keydown="labelLimit($event,newDash.label)" ng-keyup="hitExistDashLabel(newDash.label)" ng-click="hitExistDashLabel(newDash.label)">\n            <div class="item-label-list" ng-show="hitLabelList.show && hitLabelList.list.length > 0">\n                <p ng-repeat="item in hitLabelList.list track by $index" ng-click="newDash.label = item;hitLabelList.show = false;" class="nowrap" title="{{item}}">{{item}}</p>\n            </div>\n        </div>\n        <div class="row mb10 pt12">\n            <label class="form-label mr10 vt fl">\u5927\u5C4F\u5907\u6CE8</label>\n            <textarea class="form-field" type="text" ng-model="newDash.comment" maxlength="100" ng-keydown="commentLimit($event,newDash.comment)"></textarea>\n        </div>\n    </div>\n</div>\n<div class="ngdialog-buttons">\n    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-show="createDashData.type == \'create\'" ng-click="createDashboard(newDash, selectFolder, closeThisDialog)">\u786E\u5B9A</button>\n    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-show="createDashData.type == \'edit\'" ng-click="saveEdit(newDash, closeThisDialog)">\u786E\u5B9A</button>\n    <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n</div>\n</div>\n<script type="text/ng-template" id="createDashboardTpl">\n    <div class="cat-op-parent level-{{projItem.deep}}" ng-click="treeSelectParent(projItem, \'dashboard\')">\n        <span class="name-wrap no-wrap">\n        <i class="bdp-icon ico-triangle-down node-prefix-triangle ng-scope ico-no-opacity" ng-click="nodeCollapseHandle( $event, projItem)" ng-if="!projItem.nodeCollapse"></i>\n        <i class="bdp-icon ico-triangle-right node-prefix-triangle ng-scope" ng-if="projItem.nodeCollapse" ng-click="nodeCollapseHandle( $event, projItem)"></i>\n        {{projItem.name}}</span>\n    </div>\n    <ul ui-tree-nodes="" ng-model="projItem.subs" ng-if="projItem.subs.length > 0 && !projItem.nodeCollapse">\n        <li class="project-item nowrap" ng-repeat="projItem in projItem.subs" ui-tree-node="" ng-if="projItem.attribute == \'project\' && projItem.type == 0" ng-include="\'createDashboardTpl\'" data-nodrag="">\n        </li>\n    </ul>\n</script>');
    $templateCache.put('/static/dashboard/project-list/create-project.html', '<div bindonce="">\n    <div class="ngdialog-title">\u65B0\u5EFA\u6587\u4EF6\u5939</div>\n    <div class="ngdialog-message">\n        <div class="form-group mt10 create-folder dashboard-message">\n\n        \t<div class="row mb10 clearfix">\n                <label class="form-label mr14 fl">\u6240\u5C5E\u6587\u4EF6\u5939</label>\n                <div class="form-field project-folder-dropdown fl" click-outside="createFolderData.showDropdown = false" outside-active="createFolderData.showDropdown">\n                    <p class="selected-item nowrap" ng-click="createFolderData.showDropdown = !createFolderData.showDropdown" title="{{createFolderData.selectedProjectName}}">\n                        <span>{{createFolderData.selectedProjectName}}</span>\n                        <i class="bdp-icon ico-triangle-down"></i>\n                    </p>\n                    <div class="dropdown-wrap select-list project-list-common" ui-tree="" ng-show="createFolderData.showDropdown && all_project_list.length > 0">\n                        <ul>\n                            <li class="project-item nowrap" data-nodrag="" title="\u6839\u76EE\u5F55">\n                                <div class="cat-op-parent level-0" ng-click="treeSelectParent(null, \'project\')">\n                                    <span class="name-wrap no-wrap">\n                                        <i class="bdp-icon ico-triangle-down node-prefix-triangle ico-no-opacity" ng-click="nodeCollapseHandle( $event, root)" ng-if="!root.nodeCollapse"></i>\n                                        <i class="bdp-icon ico-triangle-right node-prefix-triangle" ng-if="root.nodeCollapse" ng-click="nodeCollapseHandle( $event, root)"></i>\n                                        <span>\u6839\u76EE\u5F55</span> \n                                    </span>\n                                </div>\n                                <ul ui-tree-nodes="" ng-model="all_project_list" class="select-list-box" ng-if="!root.nodeCollapse">\n                                    <li ng-if="all_project_list.length > 0 && projItem.attribute == \'project\' && projItem.type == 0 && projItem.property != 1" class="project-item nowrap" ng-repeat="projItem in all_project_list" title="{{projItem.name}}" ui-tree-node="" ng-include="\'createChart\'" data-nodrag=""></li>\n                                </ul>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class="clearfix">\n                <label class="form-label mr10">\u6587\u4EF6\u5939\u540D\u79F0</label>\n                <input class="form-field" type="text" ng-model="project_name">\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="createProject(project_name, createFolderData.selectFolder, closeThisDialog)">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>\n<script type="text/ng-template" id="createChart">\n    <div class="cat-op-parent level-{{projItem.deep + 1}}" ng-click="treeSelectParent(projItem, \'project\')">\n        <span class="name-wrap no-wrap">\n            <i class="bdp-icon ico-triangle-down node-prefix-triangle ico-no-opacity" ng-click="nodeCollapseHandle( $event, projItem)" ng-if="!projItem.nodeCollapse"></i>\n            <i class="bdp-icon ico-triangle-right node-prefix-triangle" ng-if="projItem.nodeCollapse" ng-click="nodeCollapseHandle($event, projItem)"></i>\n        {{projItem.name}}</span>\n    </div>\n    <ul ui-tree-nodes="" ng-model="projItem.subs" ng-if="projItem.subs.length > 0 && projItem.attribute == \'project\' && projItem.type == 0 && !projItem.nodeCollapse">\n        <li class="project-item nowrap" ng-repeat="projItem in projItem.subs" ui-tree-node="" ng-if="projItem.attribute == \'project\' && projItem.type == 0" ng-include="\'createChart\'" data-nodrag="">\n        </li>\n    </ul>\n</script>');
    $templateCache.put('/static/dashboard/project-list/edit-project.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u7F16\u8F91\u6587\u4EF6\u5939</div>\n\t<div class="ngdialog-message">\n\t\t<div class="form-group mt10 create-folder dashboard-message">\n\t\t\t<div class="clearfix">\n\t\t\t\t<label class="form-label mr10">\u6587\u4EF6\u5939\u540D\u79F0</label>\n\t\t\t\t<input class="form-field" type="text" ng-model="editData.name">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="editProject(editData.name)">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\t</div>\n</div>');
    $templateCache.put('/static/dashboard/project-list/move-project-dashboard.html', '<div bindonce="">\n\t<div ng-if="ngDialogData.attribute == \'project\'">\n\t\t<div class="ngdialog-title">\u79FB\u52A8\u6587\u4EF6\u5939</div>\n\t\t<div class="ngdialog-message">\n\t\t\t<div class="copy-chart-box form-group">\n\t\t\t\t<p class="hd">\n\t\t\t\t\t<span>\u5C06\u6587\u4EF6\u5939</span>\n\t\t\t\t\t<span class="dash-name">{{ngDialogData.dash_name}}</span>\n\t\t\t\t\t<span>\u79FB\u52A8\u5230</span>\uFF1A</p>\n\t\t\t\t<div select-proj-dash="" proj-list="ngDialogData.proj_list" proj-id="ngDialogData.cur_proj_id" select-item="ngDialogData.select_item" opt-type="moveProject" new-dash-name="ngDialogData.proj_new_name"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="ngdialog-buttons">\n\t\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" promise-button="" pb-completed="global.clickComplete" pb-click="ngDialogData.save(ngDialogData)">\u786E\u5B9A</button>\n\t\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\t\t</div>\n\t</div>\n\t<div ng-if="ngDialogData.attribute == \'dashboard\'">\n\t\t<div class="ngdialog-title">\u79FB\u52A8\u4EEA\u8868\u76D8</div>\n\t\t<div class="ngdialog-message">\n\t\t\t<div class="copy-chart-box form-group">\n\t\t\t\t<p class="hd">\n\t\t\t\t\t<span>\u5C06\u4EEA\u8868\u76D8</span>\n\t\t\t\t\t<span class="dash-name">{{ngDialogData.dash_name}}</span>\n\t\t\t\t\t<span>\u79FB\u52A8\u5230</span>\uFF1A</p>\n\t\t\t\t<div select-proj-dash="" proj-list="ngDialogData.proj_list" proj-id="ngDialogData.cur_proj_id" select-item="ngDialogData.select_item" new-dash-name="ngDialogData.proj_new_name" opt-type="moveDashboard" move-item="ngDialogData.move_item"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="ngdialog-buttons">\n\t\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" promise-button="" pb-completed="global.clickComplete" pb-click="ngDialogData.save(ngDialogData)">\u786E\u5B9A</button>\n\t\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\t\t</div>\n\t</div>\n</div>');
    $templateCache.put('/static/dashboard/project-list/network-dashboard.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u7F51\u6BB5\u8BBE\u7F6E</div>\n\t<div class="ngdialog-message">\n\t\t<div class="network-title auto">\n\t\t\t\u8BF7\u52FE\u9009\u5141\u8BB8\u8BBF\u95EE\u8BE5\u6570\u636E\u7684\u7F51\u6BB5\n\t\t\t<button class="network-button" ng-click="openAddNetworkSegment()" ng-if="$root.userInfoObj.role === 0">\u6DFB\u52A0\u7F51\u6BB5</button>\n\t\t</div>\n\t\t<div class="network-box">\n\t\t\t<div class="chart-error" ng-if="tableData.length === 0"><p>\u6682\u65E0\u7F51\u6BB5\uFF0C\u8BF7\u6DFB\u52A0</p></div>\n\t\t\t<table class="bdp-table-a no-shadow" ng-if="tableData.length > 0">\n\t\t\t\t<colgroup>\n\t\t\t\t\t<col width="48px">\n\t\t\t\t\t<col width="115px">\n\t\t\t\t\t<col width="228px">\n\t\t\t\t</colgroup>\n\t\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th></th>\n\t\t\t\t\t<th>\u7F51\u6BB5\u540D\u79F0</th>\n\t\t\t\t\t<th>IP\u8303\u56F4</th>\n\t\t\t\t\t<th bo-if="$root.userInfoObj.role === 0"></th>\n\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t<tr class="ng-scope" ng-class="{\'edit-mode\': row.edit}" ng-repeat="row in tableData">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="checkbox" class="ng-pristine ng-valid" ng-checked="row.check" ng-model="row.check">\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td class="ns-name" ng-if="!row.edit">{{row.bridge_name}}</td>\n\t\t\t\t\t<td class="ns-name" ng-if="row.edit">\n\t\t\t\t\t\t<input type="text" class="query-text ng-pristine ng-valid" ng-class="{\'has-text\': row.form.bridge_name}" ng-model="row.form.bridge_name">\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td class="ns-range" ng-if="!row.edit">{{row.ip_start}} - {{row.ip_end}}</td>\n\t\t\t\t\t<td class="ns-range" ng-if="row.edit">\n\t\t\t\t\t\t<input type="text" class="query-text ng-pristine ng-valid" ng-class="{\'has-text\': row.form.ip_start}" ng-model="row.form.ip_start">\n\t\t\t\t\t\t-\n\t\t\t\t\t\t<input type="text" class="query-text ng-pristine ng-valid" ng-class="{\'has-text\': row.form.ip_end}" ng-model="row.form.ip_end">\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td class="authorization-operator" ng-if="$root.userInfoObj.role === 0 && !row.edit">\n\t\t\t\t\t\t<i class="bdp-icon ico-edit ng-scope" ng-click="editLine(row)"></i>\n\t\t\t\t\t\t<i class="bdp-icon ico-trash ng-scope"></i>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class="authorization-operator" ng-if="row.edit">\n\t\t\t\t\t\t<i class="bdp-icon ico-ok ng-scope" ng-click="sumbitEditLine(row)"></i>\n\t\t\t\t\t\t<i class="bdp-icon ico-delete ng-scope" ng-click="row.edit = !row.edit"></i>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="commitNetworkSegment()">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeDialog()">\u53D6\u6D88</button>\n\t</div>\n</div>');
    $templateCache.put('/static/dashboard/project-list/set-dash-hide.html', '<div bindonce="">\n    <div class="ngdialog-title">\u4EEA\u8868\u76D8\u9690\u85CF\u8BBE\u7F6E</div>\n    <div class="ngdialog-message project-list-common">\n        <p class="ngdialog-message-derc">\u8BF7\u8BBE\u7F6E\u5E0C\u671B\u9690\u85CF\u7684\u4EEA\u8868\u76D8\u548C\u6587\u4EF6\u5939</p>\n        <div class="tab-header">\n            <div class="tab-header-wrap">\n                <div class="tab-header-item" ng-class="{\'active\': hideDashDialog.activeTab === \'web\'}">\n                    <a class="cursor-pointer" ng-click="hideDashDialog.changeTab(\'web\')">web\u7AEF</a>\n                </div>\n                <div class="tab-header-item" ng-class="{\'active\': hideDashDialog.activeTab === \'mobile\'}">\n                    <a class="cursor-pointer" ng-click="hideDashDialog.changeTab(\'mobile\')">\u79FB\u52A8\u7AEF</a>\n                </div>\n            </div>\n        </div>\n        <div class="query-box auto mt8">\n            <input type="text" class="query-text" ng-model="hideDashDialog.queryDash" ng-class="{\'has-text\': !!hideDashDialog.queryDash}" ng-keyup="hideDashDialog.keyUpSearch($event)">\n        </div>\n        <div class="proj-dash-list mt8" ui-tree="">\n            <div ng-if="hideDashDialog.projList.length > 0 && hideDashDialog.noResult && !!hideDashDialog.queryDash">\u65E0\u68C0\u7D22\u7ED3\u679C</div>\n            <ul ui-tree-nodes="" ng-model="hideDashDialog.projList">\n                <li ng-repeat="projItem in hideDashDialog.projList track by $index" class="project-item" ng-class="{\'item-hidden\': hideDashDialog.itemIdHideMap[projItem.itemId][hideDashDialog.activeTab]}" ng-show="(projItem.subs || []).length > 0 && projItem.isQueryDisplay" ui-tree-node="" ng-include="\'hidden_list\'">\n                </li>\n            </ul>\n        </div>\n        <div ng-loading-gif="" ng-show="hideDashDialog.isSaving"></div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="hideDashDialog.saveHideSetting()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>\n<script type="text/ng-template" id="hidden_list">\n    <div class="cat-op-parent level-{{projItem.deep}}" ng-click="hideDashDialog.clickOnItem($event, projItem, projItem.parent)">\n        <span class="bdp-icon-wrap" ng-if="projItem.attribute == \'project\'">\n            <i class="bdp-icon" ng-class="{\n                \'ico-folder-rule\':!projItem.isOpen && projItem.type == 2,\n                \'ico-folder-rule-open\':projItem.isOpen && projItem.type == 2,\n                \'ico-folder-shared\':!projItem.isOpen && projItem.type == 1,\n                \'ico-folder-shared-open\':!!projItem.isOpen && projItem.type == 1}"></i>\n        </span><span class="name-wrap nowrap" title="{{projItem.name}}" ng-class="{\'short\': !!hideDashDialog.childHideNum[projItem.itemId][hideDashDialog.activeTab]}">{{projItem.name}}</span>\n        <span class="hidden-num" ng-if="hideDashDialog.childHideNum[projItem.itemId][hideDashDialog.activeTab] > 0">\n            \uFF08<span>{{hideDashDialog.childHideNum[projItem.itemId][hideDashDialog.activeTab]}}</span>\n            <span ng-if="hideDashDialog.childHideNum[projItem.itemId][hideDashDialog.activeTab] == 1" bo-text="\'dash.dashHasBeHidden\' | translate"></span>\n            <span ng-if="hideDashDialog.childHideNum[projItem.itemId][hideDashDialog.activeTab] > 1" bo-text="\'dash.dashesHaveBeHidden\' | translate"></span>\uFF09\n        </span>\n        <i class="bdp-icon fr ico-hide-eye cursor-pointer" ng-click="hideDashDialog.clickOnIconBtn($event, projItem, projItem.parent)" bdp-tooltip="hideDashDialog.getOptTip(projItem)" tooltip-placement="top"></i>\n    </div>\n    <ul ui-tree-nodes="" ng-model="projItem.subs" ng-if="projItem.subs.length > 0 && projItem.isOpen">\n        <li ng-repeat="projItem in projItem.subs" ng-class="{\'item-hidden\': hideDashDialog.itemIdHideMap[projItem.itemId][hideDashDialog.activeTab],\'project-item\': projItem.attribute == \'project\'}" ng-show="projItem.isQueryDisplay" ui-tree-node="" ng-include="\'hidden_list\'">\n        </li>\n    </ul>\n</script>');
    $templateCache.put('/static/dashboard/project-list/share-dashboard.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u5171\u4EAB</div>\n\t<div class="ngdialog-message">\n\t\t<div class="share-tab" ng-model="shareView.sharetab">\n\t\t\t<ul>\n\t\t\t\t<li class="cursor-pointer" ng-class="{\'active\':shareView.sharetab == \'user\'}" ng-click="shareView.sharetab = \'user\'">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span>\u5171\u4EAB\u5230\u7528\u6237</span>\n\t\t\t\t\t\t<span ng-hide="shareUserNum==0">({{shareUserNum}})</span>\n\t\t\t\t\t</p>\n\t\t\t\t</li>\n\t\t\t\t<li class="cursor-pointer" ng-class="{\'active\':shareView.sharetab == \'group\'}" ng-click="shareView.sharetab = \'group\'">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span>\u5171\u4EAB\u5230\u7EC4</span>\n\t\t\t\t\t\t<span ng-hide="shareGroupNum==0">({{shareGroupNum}})</span>\n\t\t\t\t\t</p>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="share-box">\n\t\t\t<div ng-show="shareView.sharetab == \'user\'" class="share-box-user" ng-class="{\'user\':role !=\'admin\'}">\n\t\t\t\t<div class="query-box auto">\n\t\t\t\t\t<!--<input type="text" class="query-text" ng-input-text ng-model="share_query" />-->\n\t\t\t\t\t<i class="bdp-icon ico-search"></i>\n\t\t\t\t\t<input type="text" class="query-input-half" ng-input-text="" ng-model="share_query" ng-attr-placeholder="{{\'searchName\'|translate}}">\n\t\t\t\t\t<input type="text" class="query-input-half" ng-input-text="" ng-model="shareId_query" ng-attr-placeholder="{{\'searchUsername\'|translate}}">\n\t\t\t\t</div>\n\t\t\t\t<ul>\n\t\t\t\t\t<li class="cursor-pointer" ng-hide="!!share_query || !!shareId_query">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" ng-model="shareView.select.all_user" ng-change="checkAllFun(\'user\')">\n\t\t\t\t\t\t\t<span>\u5168\u9009</span> \n\t\t\t\t\t\t</label>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li ng-repeat="it in userList.share_user | query_user:share_query:shareId_query" class="cursor-pointer">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" ng-checked="it.checked" ng-model="it.checked" ng-change="checkUserFun(\'user\')">\n\t\t\t\t\t\t\t{{it.name}}\n\t\t\t\t\t\t\t<span class="sub-span" ng-if="it.username">({{it.username}})</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li ng-repeat="it in userList.other_user | query_user:share_query:shareId_query" class="cursor-pointer">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" ng-checked="it.checked" ng-model="it.checked" ng-change="checkUserFun(\'user\')">\n\t\t\t\t\t\t\t{{it.name}}\n\t\t\t\t\t\t\t<span class="username" ng-if="it.username">({{it.username}})</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div ng-show="shareView.sharetab == \'group\'" class="share-box-group">\n\t            <p class="pl24 mt8" ng-if="userList.group_tree.length == 0">\u6682\u65E0\u5206\u7EC4</p>\n\t            <div class="J-flat-tree-scroll" ng-if="userList.group_tree.length > 0" flat-tree-map="" tpl-type="\'checkNode\'" tree-data="userList.group_tree" resize-width="296" node-tooltip="shareView.nodeTooltip" check-func="checkGroupFun(node)"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-class="{\'ngdialog-button-secondary\' : commitData.share_user.length == 0 &&\n\t\tcommitData.cancel_user.length == 0 && commitData.share_group.length == 0 && commitData.cancel_group.length == 0}" ng-click="commitShare()">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeDialog()">\u53D6\u6D88</button>\n\t</div>\n</div>');
    $templateCache.put('/static/dashboard/select-proj-dash/select-proj-dash.html', '<div bindonce="">\n    <div class="row clearfix">\n        <label class="form-label fl mr10">\u9009\u62E9\u6587\u4EF6\u5939</label>\n        <div class="form-field project-folder-dropdown" click-outside="projDashData.showDropdown = false" outside-active="projDashData.showDropdown">\n            <p class="selected-item nowrap" ng-click="projDashData.showDropdown = !projDashData.showDropdown" title="{{projDashData.selectedProjName}}">\n                <span>{{projDashData.selectedProjName}}</span>\n                <i class="bdp-icon ico-triangle-down"></i>\n            </p>\n            <div class="dropdown-wrap select-list project-list-common" ui-tree="" ng-show="projDashData.showDropdown">\n                <ul>\n                    <li class="project-item nowrap" data-nodrag="" title="\u6839\u76EE\u5F55">\n                        <div class="cat-op-parent level-0" ng-if="[\'copyDash\', \'copyChart\', \'moveChart\', \'moveDashboard\'].indexOf(optType) < 0" ng-click="treeSelectParent(projItem, \'project\')">\n                            <span class="name-wrap no-wrap">\n                            <i class="bdp-icon ico-triangle-down node-prefix-triangle ico-no-opacity" ng-click="nodeCollapseHandle( $event, root)" ng-if="!root.nodeCollapse"></i>\n                            <i class="bdp-icon ico-triangle-right node-prefix-triangle" ng-if="root.nodeCollapse" ng-click="nodeCollapseHandle( $event, root)"></i>\n                            \u6839\u76EE\u5F55</span>\n                        </div>\n                        <ul ui-tree-nodes="" ng-model="projList" class="select-list-box" ng-if="!root.nodeCollapse">\n                            <li ng-if="projList.length > 0 && projItem.attribute == \'project\' && projItem.type == 0" class="project-item nowrap" ng-repeat="projItem in projList" title="{{projItem.name}}" ui-tree-node="" ng-include="\'moveChartFolderTpl\'" data-nodrag=""></li>\n                        </ul>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div class="row clearfix" ng-if="[\'copyDash\', \'moveProject\', \'moveDashboard\'].indexOf(optType) < 0">\n        <label class="form-label mr10 fl">\u9009\u62E9\u4EEA\u8868\u76D8</label>\n        <div class="form-field project-folder-dropdown fl" click-outside="projDashData.showDashList = false" outside-active="projDashData.showDashList">\n            <p class="selected-item nowrap" ng-click="projDashData.showDashList = !projDashData.showDashList" title="{{projDashData.selectedDashName}}">\n                <span>{{projDashData.selectedDashName}}</span>\n                <i class="bdp-icon ico-triangle-down"></i>\n            </p>\n            <div class="dropdown-wrap select-list project-list-common" ng-show="projDashData.showDashList">\n                <ul class="select-list-box">\n                    <li class="project-item nowrap" ng-repeat="dash in dashList track by $index">\n                        <div class="cat-op-parent level-0" ng-click="selectDashItem(dash.dsh_id, dash.name)">\n                            <span class="name-wrap no-wrap" title="{{dash.name}}">{{dash.name}}</span>\n                        </div>\n                    </li>\n                    <li class="no-item" ng-if="dashList.length == 0">\u65E0\u4EEA\u8868\u76D8</li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div class="row clearfix" ng-show="optType == \'copyDash\'">\n        <label class="form-label mr10 fl">\u91CD\u547D\u540D</label>\n        <input class="form-field" type="text" ng-model="newDashName">\n    </div>\n\n    <script type="text/ng-template" id="moveChartFolderTpl">\n        <div class="cat-op-parent" ng-class="{true: \'level-\' + (projItem.deep + 1), false:\'level-\' + projItem.deep}[[\'copyDash\', \'copyChart\', \'moveChart\', \'moveDashboard\'].indexOf(optType) < 0]" ng-click="selectProjItem(projItem)">\n            <span class="name-wrap no-wrap">\n                <i class="bdp-icon ico-triangle-down node-prefix-triangle ico-no-opacity" ng-click="nodeCollapseHandle( $event, projItem)" ng-if="!projItem.nodeCollapse"></i>\n                <i class="bdp-icon ico-triangle-right node-prefix-triangle" ng-if="projItem.nodeCollapse" ng-click="nodeCollapseHandle( $event, projItem)"></i>\n            {{projItem.name}}</span>\n        </div>\n        <ul ui-tree-nodes="" ng-model="projItem.subs" ng-if="projItem.subs.length > 0 && !projItem.nodeCollapse">\n            <li class="project-item nowrap" ng-repeat="projItem in projItem.subs" ui-tree-node="" ng-if="projItem.attribute == \'project\'" ng-include="\'moveChartFolderTpl\'" data-nodrag="">\n            </li>\n        </ul>\n    </script>\n</div>\n');
    $templateCache.put('/static/dashboard/tpl/adv-dashboard-edit.html', '<div class="data-screen-wrap adv-dashboard-wrap adv-dashboard-edit-wrap" bindonce="">\n    <div class="view-header">\n        <a class="back-btn" ng-click="backAdvDash()" href="javascript:;">\n            <i class="bdp-icon ico-back"></i>\n        </a>\n        <h2 class="text-center data-screen-edit-title">\n            <div class="edit-title-detail">{{dashTitle}}</div>\n        </h2>\n        <div class="btn-layer">\n            <a ng-click="backAdvDash()" href="javascript:;">\n                <i class="bdp-icon ico-ok-blue"></i>\n                <span class="btn-layer-opt">\n                    \u5B8C\u6210\n                    <span class="btn-layer-hover-line"></span>\n                </span>\n            </a>\n        </div>\n    </div>\n    <div class="data-screen-content">\n        <div class="screen-main">\n            <div class="screen-wrap">\n                <div class="screen-btn-bar clearfix">\n                    <div class="toolbar-left bdp-icon-hover-light">\n                        <span class="display-inline-block toolbar-title">\u6DFB\u52A0\u5143\u7D20</span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addChart" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-screen-chart cursor-pointer" ng-click="addItem()"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addTitle" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-attr cursor-pointer" ng-click="dash.addTextComponent(\'C105\')"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addText" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-text cursor-pointer" ng-click="dash.addTextComponent(\'C101\')"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addImage" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-img cursor-pointer" ng-click="dash.addImageComponent()"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addVideo" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-video cursor-pointer" ng-click="dash.addVideoComponent()"></i>\n                        </span>\n                        <span class="display-inline-block seperate-line ml16"></span>\n                        <span class="display-inline-block ml16 toolbar-title">\u7F51\u683C\u53C2\u8003\u7EBF</span>\n                        <label class="cursor-pointer ml8">\n                            <input type="checkbox" ng-click="showDataScreenGrid = !showDataScreenGrid" ng-model="showDataScreenGrid"><span class="ml4">\u663E\u793A</span>\n                        </label>\n                        <span class="display-inline-block seperate-line ml16"></span>\n                        <span class="display-inline-block ml16 toolbar-title">\u5C42\u7EA7</span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.top" tooltip-placement="bottom" ng-click="dash.setZIndex(\'top\')">\n                            <i class="bdp-icon ico-layer-rise cursor-pointer J_set_zindex"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.bottom" tooltip-placement="bottom" ng-click="dash.setZIndex(\'bottom\')">\n                            <i class="bdp-icon ico-layer-fall cursor-pointer J_set_zindex"></i>\n                        </span>\n                        <span class="display-inline-block seperate-line ml16"></span>\n                        <span class="display-inline-block ml16 toolbar-title">\u7F29\u653E</span>\n                        <label class="display-inline-block ml16">\n                            <select ng-model="dash.scaleDashbord.selectedData" ng-change="dash.scaleDashbord.modifyScale();">\n                                <option value="1">\u5B9E\u9645\u5BBD\u9AD8</option>\n                                <option value="2">\u81EA\u9002\u5E94\u5BBD\u9AD8</option>\n                            </select>\n                        </label>\n                        <span class="display-inline-block seperate-line ml16"></span>\n                        <span class="global-filter-set cursor-pointer ml16 toolbar-title" ng-if="!proj_share && dashSelected" global-filter-set="" original-global-filter="global.originalGlobalFilter" global-dash-filter="global.globalDashFilter" global-dash-filter-display="global.globalDashFilterDisplay" dash-standard-items="dashStandardItems" global-dash-filter-items="global.globalDashFilterItems" rule-id="global.rule_id" draw_chart_url="draw_chart_url">\n                            \u5168\u5C40\u7B5B\u9009\n                            <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.globalFilter" tooltip-placement="bottom">\n                                <i class="bdp-icon ico-add-filter cursor-pointer"></i>\n                            </span>\n                        </span>\n                    </div>\n                </div>\n                <div ng-if="!dashLoading && global.globalDashFilter.length && global.globalDashFilterDisplay.length" class="dash-global-wrap" global-filter="" original-global-filter="global.originalGlobalFilter" global-dash-filter="global.globalDashFilter" global-dash-filter-items="global.globalDashFilterItems" global-dash-filter-display="global.globalDashFilterDisplay" rule-id="global.rule_id" show-loading="showLoading" on-share-page="isThirdIframe" draw-chart-url="draw_chart_url">\n                </div>\n                <div class="screen-dashboard-wrap screen-dashboard-edit-wrap">\n                    <div class="screen-dashboard adv-dash-screen-dashboard">\n                        <div class="dash-edit-content-view J-dash-edit-content-view">\n                            <div ng-include="\'./static/dashboard/tpl/adv-dashboard-main.html\'"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="side-panel J_side_panel adv-dash-side-panel">\n            <div datascreen-page-ele="" ng-if="dash.editChartMetaVisible.pageEle"></div>\n            <div chart-style-text="" save-func="saveDashboard()" ng-if="dash.editChartMetaVisible.text"></div>\n            <div chart-style-extend="" save-func="dash.saveChartStyle(chart)" ng-if="dash.editChartMetaVisible.style"></div>\n            <div chart-screen-numerical="" ng-if="dash.editChartMetaVisible.numerical"></div>\n            <div chart-screen-video="" ng-if="dash.editChartMetaVisible.video"></div>\n            <div chart-screen-img="" ng-if="dash.editChartMetaVisible.img"></div>\n            <div datascreen-page-wrap="" ng-show="dash.editChartMetaVisible.pageWrap"></div>\n        </div>\n    </div>\n</div>\n');
    $templateCache.put('/static/dashboard/tpl/adv-dashboard-fullscreen.html', '<div class="dash-fullscreen-wrap display-device-{{fullDisplayDevice}} display-theme-{{fullDisplayTheme === 1 ? \'dark\' : \'light\'}} dash-edit-content-view data-screen-wrap adv-dashboard-wrap" bindonce="">\n    <div class="dash-title-wrap view-header-wrap">\n        <div class="clearfix dash-title view-header">\n            <h2>{{dashTitle}}</h2>\n            <div class="btn-layer">\n                <a class="full-display-setting" ng-click="show_display_theme = !show_display_theme" click-outside="show_display_theme = false" outside-active="show_display_theme">\n                    <span class="setting-label">\u5E95\u8272\u8BBE\u7F6E</span>\n                    <span class="btn-layer-opt">\n                        {{fullDisplayTheme === 1 ? \'dash.darkTheme\' : \'dash.lightTheme\' | translate}}\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                    <i class="bdp-icon ico-triangle-down"></i>\n                    <ul class="dropdown-wrap" ng-show="show_display_theme">\n                        <li class="dropdown-item" ng-click="setFullDisplayTheme(1)">\u661F\u7A7A\u84DD</li>\n                        <li class="dropdown-item" ng-click="setFullDisplayTheme(2)">\u5178\u96C5\u767D</li>\n                    </ul>\n                </a>\n                <a class="full-display-setting" ng-click="show_display_devices = !show_display_devices" click-outside="show_display_devices = false" outside-active="show_display_devices">\n                    <span class="setting-label">\u9002\u914D\u8BBE\u5907</span>\n                    <span class="btn-layer-opt">\n                        <i class="bdp-icon ico-device ico-device-{{fullDisplayDevice}}"></i>\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                    <i class="bdp-icon ico-triangle-down"></i>\n                    <ul class="dropdown-wrap" ng-show="show_display_devices">\n                        <li class="dropdown-item" ng-click="setFullDisplayDevice(\'pc\')">\n                            <i class="bdp-icon ico-device-pc" title="PC\u663E\u793A\u5C4F"></i>\n                        </li>\n                        <li class="dropdown-item" ng-click="setFullDisplayDevice(\'projector\')">\n                            <i class="bdp-icon ico-device-projector" title="\u6295\u5F71\u4EEA"></i>\n                        </li>\n                        <li class="dropdown-item" ng-click="setFullDisplayDevice(\'tv\')">\n                            <i class="bdp-icon ico-device-tv" title="TV\u663E\u793A\u5C4F"></i>\n                        </li>\n                    </ul>\n                </a>\n                <a ng-click="exitFullScreen();removeFullDisplayStyle()">\n                    <i class="bdp-icon ico-exit-fullscreen"></i>\n                    <span class="btn-layer-opt">\n                        \u9000\u51FA\u5168\u5C4F\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                </a>\n            </div>\n        </div>\n    </div>\n    <div class="screen-dashboard-wrap screen-dashboard-edit-wrap">\n        <div class="screen-dashboard adv-dash-screen-dashboard">\n            <div ng-if="!dashLoading && global.globalDashFilter.length && global.globalDashFilterDisplay.length" class="dash-global-wrap" global-filter="" original-global-filter="global.originalGlobalFilter" global-dash-filter="global.globalDashFilter" global-dash-filter-display="global.globalDashFilterDisplay" global-dash-filter-items="global.globalDashFilterItems" rule-id="global.rule_id" show-loading="showLoading" on-share-page="isThirdIframe" draw-chart-url="draw_chart_url">\n            </div>\n            <div ng-include="\'./static/dashboard/tpl/adv-dashboard-main.html\'"></div>\n        </div>\n    </div>\n\n</div>\n');
    $templateCache.put('/static/dashboard/tpl/adv-dashboard-main.html', '<div class="dash-wrapper J-dash-wrapper" ng-class="{\n    \'dash-one-block\':!dashLayoutInfo.show_block,\n    \'edit-mode\':dashEditMode,\n    \'readonly-mode\': !dashEditMode,\n    \'dash-fixed-width\':dashLayoutInfo.fixed_width,\n    \'dash-mode-free\':dashLayoutInfo.layout_style == 2,\n    \'has-global-filter\': global.globalDashFilter.length > 0 && global.globalDashFilterDisplay.length\n    }" ng-style="dashLayoutInfo.dashWrapperStyle">\n\n    <div class="folder-empty" ng-if="noDashes">\n        <i class="bdp-icon ico-new-dashboard ico-no-opacity"></i>\n        <p class="mt8 font-text-tip">\u6587\u4EF6\u5939\u4E3A\u7A7A\uFF0C\u8BF7\u4ECE\u5DE6\u4FA7\u521B\u5EFA\u4EEA\u8868\u76D8</p>\n    </div>\n    <div gridster="gridsterOpts" id="J-export-dashboard-height" class="J_data_screen_hook" ng-style="dashLayoutInfo.gridsterStyle">\n\n        <ul id="J_gridster" ng-if="dashLayoutInfo.layout_style == 2">\n            <li gridster-item="item" class="J-export-img-elem-item" ng-repeat="item in dashStandardItems" ng-style="item.itemStyle" ng-hide="chartdel[\'chart\'+current_item.meta.ct_id]" id="{{item.children[0].meta.ct_id}}" data-chart-type="{{item.children[0].meta.type}}" data-chart-id="{{item.children[0].meta.ct_id}}" data-is-special-chart="{{item.children[0].meta.is_special_chart}}" ng-mouseleave="mouseleaveItem()" ng-class="{\n                        \'selected\':dashLayoutInfo.ct_id === item.children[0].meta.ct_id,\n                        \'border-left\':item.children[0].meta.dash_setting.border_left,\n                        \'border-right\':item.children[0].meta.dash_setting.border_right,\n                        \'border-top\':item.children[0].meta.dash_setting.border_top,\n                        \'border-bottom\':item.children[0].meta.dash_setting.border_bottom,\n                        \'no-title\': item.children[0].meta.type === \'C310\' || !item.children[0].meta.dash_setting.show_title,\n                        \'no-axis\': !item.children[0].meta.dash_setting.show_axis,\n                        \'no-legend\': !item.children[0].meta.dash_setting.show_legend,\n                        \'component-text\': item.children[0].meta.ct_id.indexOf(\'text_\') > -1 || item.children[0].meta.type == \'C105\',\n                        \'no-edit-mode\': !dashEditMode,\n                        \'top-index-layer\': item.isTopIndex,\n                        \'gridster-no-resize\': lockItemPosMap && lockItemPosMap[item.children[0].meta.ct_id]\n                    }">\n                <div class="data-screen-item-box gridbox-border-{{item.borderType}}" ng-show="item.borderType && item.borderType != \'CUSTOM\'">\n                    <div class="data-screen-item-top">\n                        <div class="data-screen-item-left"></div>\n                        <div class="data-screen-item-center"></div>\n                        <div class="data-screen-item-right"></div>\n                    </div>\n                    <div class="data-screen-item-middle">\n                        <div class="data-screen-item-left"></div>\n                        <div class="data-screen-item-center"></div>\n                        <div class="data-screen-item-right"></div>\n                    </div>\n                    <div class="data-screen-item-bottom">\n                        <div class="data-screen-item-left"></div>\n                        <div class="data-screen-item-center"></div>\n                        <div class="data-screen-item-right"></div>\n                    </div>\n                </div>\n                <div ng-repeat="child in item.children" ng-class="{\'chart-box\': [\'C102\',\'C104\'].indexOf(child.meta.type) < 0, \'gridster-no-drag\': lockItemPosMap && lockItemPosMap[child.meta.ct_id] }" class="auto-size J_chart_box" ng-click="dash.clickGridsterItem(child, item)">\n                    <!-- \u6587\u672C\u7EC4\u4EF6\u5DF2\u4E0D\u9700\u8981\uFF0C\u5148\u4FDD\u7559 -->\n                    <div ng-if="child.meta.ct_id.indexOf(\'text_\') > -1 || child.meta.type == \'C105\'" ng-class="{\'ta-edit-mode-on\':dashEditMode && textComponentEditMode[child.meta.ct_id]}">\n                        <div class="chart-operate" ng-if="!proj_share && dashProperty == 0 && dashEditMode">\n                            <div class="chart-operate-more bdp-icon-wrap" ng-click="more_show = !more_show;dash.setOperatorIndex(more_show,false,item);$event.stopPropagation();" ng-mouseleave="more_show = false;dash.setOperatorIndex(more_show,false,item);">\n                                <i class="bdp-icon ico-more cursor-pointer"></i>\n                                <ul ng-show="more_show" class="dropdown-wrap">\n                                    <li class="dropdown-item" ng-click="dash.editTextFromMore(child,item)">\u7F16\u8F91</li>\n                                    <li class="dropdown-item" ng-click="dash.copyComponent(child,item)">\u590D\u5236\u5143\u7D20</li>\n                                    <li class="dropdown-item" ng-click="dash.moveComponent(child,item)">\u79FB\u52A8\u5143\u7D20</li>\n                                    <li class="dropdown-item" ng-click="dash.delComponent(child.meta.ct_id)">\u5220\u9664</li>\n                                </ul>\n                            </div>\n                        </div>\n                        <div ng-if="dashEditMode" text-angular="" ng-model="child.meta.html" ng-style="child.meta.style" ng-blur="dash.saveTextComponent(child)" name="{{child.meta.ct_id}}" ta-toolbar="[[]]" ta-unsafe-sanitizer="true"></div>\n                        <div ng-if="!dashEditMode" text-angular="" class="item-text-chart" ng-style="child.meta.style" ng-model="child.meta.html" ta-disabled="true" ta-unsafe-sanitizer="true"></div>\n                        <div ng-show="dashEditMode && !textComponentEditMode[child.meta.ct_id]" class="base-loading-layer" ng-click="dash.clickGridsterItem(child, item);$event.stopPropagation();"></div>\n                    </div>\n\n                    <div ng-if="child.meta.type && child.meta.type.indexOf(\'C102\') > -1" class="auto-size screen-item-image">\n                        <div ng-if="item.url" class="auto-size" style="background:url({{item.url}}) no-repeat center; background-size: contain"></div>\n                        <div ng-if="!item.url" class="auto-size screen-item-placeholder-image"></div>\n                        <div class="chart-operate" ng-if="!proj_share && dashProperty == 0 && dashEditMode">\n                            <div class="chart-operate-more bdp-icon-wrap" ng-click="more_show = !more_show;dash.setOperatorIndex(more_show,false,item)" ng-mouseleave="more_show = false;dash.setOperatorIndex(more_show,false,item);">\n                                <i class="bdp-icon ico-more"></i>\n                                <ul ng-show="more_show" class="dropdown-wrap">\n                                    <li class="dropdown-item" ng-click="dash.copyComponent(child,item)">\u590D\u5236\u5143\u7D20</li>\n                                    <li class="dropdown-item" ng-click="dash.moveComponent(child,item)">\u79FB\u52A8\u5143\u7D20</li>\n                                    <li class="dropdown-item" ng-click="dash.delComponent(child.meta.ct_id);$event.stopPropagation();">\u5220\u9664</li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div ng-if="child.meta.type && child.meta.type.indexOf(\'C103\') > -1" class="auto-size screen-item-image" ng-class="{\'screen-item-video\': dashLayoutInfo.ct_id === item.children[0].meta.ct_id}">\n                        <div ng-if="!item.src" class="auto-size screen-item-placeholder-video"></div>\n                        <video class="auto-size ng-hide" ng-if="item.autoplay  && item.loop && item.src" ng-show="item.autoplay  && item.loop" muted="muted" preload="auto" controls="controls" autoplay="autoplay" loop="loop" ng-src="{{item.src | trustUrl}}">\n                        </video>\n                        <video class="auto-size ng-hide" ng-if="item.autoplay  && !item.loop && item.src" ng-show="item.autoplay  && !item.loop" muted="muted" preload="auto" controls="controls" autoplay="autoplay" ng-src="{{item.src | trustUrl}}">\n                        </video>\n                        <video class="auto-size ng-hide" ng-if="!item.autoplay  && item.loop && item.src" ng-show="!item.autoplay  && item.loop" muted="muted" preload="auto" controls="controls" loop="loop" ng-src="{{item.src | trustUrl}}">\n                        </video>\n                        <video class="auto-size ng-hide" ng-if="!item.autoplay  && !item.loop && item.src" ng-show="!item.autoplay  && !item.loop" muted="muted" preload="auto" controls="controls" ng-src="{{item.src | trustUrl}}">\n                        </video>\n\n                        <div class="chart-operate" ng-if="!proj_share && dashProperty == 0 && dashEditMode">\n                            <div class="chart-operate-more bdp-icon-wrap" ng-click="more_show = !more_show;dash.setOperatorIndex(more_show,false,item)" ng-mouseleave="more_show = false;dash.setOperatorIndex(more_show,false,item);">\n                                <i class="bdp-icon ico-more"></i>\n                                <ul ng-show="more_show" class="dropdown-wrap">\n                                    <li class="dropdown-item" ng-click="dash.copyComponent(child,item)">\u590D\u5236\u5143\u7D20</li>\n                                    <li class="dropdown-item" ng-click="dash.moveComponent(child,item)">\u79FB\u52A8\u5143\u7D20</li>\n                                    <li class="dropdown-item" ng-click="dash.delComponent(child.meta.ct_id);$event.stopPropagation();">\u5220\u9664</li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- \u6CE8\u610FngIf\u589E\u52A0\u4E86\u4E00\u4E2A\u5B50\u4F5C\u7528\u57DF\uFF0C\u6240\u4EE5$parent\u8981\u589E\u52A0\u4E00\u5C42 -->\n                    <div ng-if="child.meta.type && [\'C101\',\'C102\',\'C103\',\'C104\',\'C105\'].indexOf(child.meta.type) < 0">\n                        <div class="item-chart-title">\n                            <div class="item-chart-title-bd nowrap J-item-chart-title-bd">\n                                <div class="display-inline-block drill-tip" ng-if="child.meta.level_fields.length > 1">\n                                    <i class="bdp-icon ico-drill"></i>\n                                    <div class="dropdown-wrap drill-tip-bd">\n                                            <span ng-repeat="drill_field in child.meta.level_fields">\n                                                <i class="bdp-icon ico-slicesnav-arrow" ng-show="!$first"></i>\n                                                {{drill_field.nick_name || drill_field.name}}\n                                            </span>\n                                    </div>\n                                </div>\n                                <i class="bdp-icon ico-linked" ng-if="child.meta.chart_link.linked_chart_type == \'2\'"></i>\n                                <i class="bdp-icon ico-chart-jump" ng-if="child.meta.chart_jump.can_jump == \'1\'"></i>\n                                <span class="no-margin" ng-click="">{{child.meta.name}}</span>\n                                <div class="loading-wrap">\n                                    <div class="loader-inner ball-spin-fade-loader">\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                    </div>\n                                </div>\n                                    <span class="filter-item" ng-repeat="it in child.meta.filter_list_inner" ng-if="it.range.length && !it.adv_type">\n                                        <em ng-if="it.data_type === \'date\' && !it.granularity" ng-hide="AllMap.indexOf( (it.range | format_date:child.meta.adv_date_list ) ) >= 0">\n                                            {{it.range | format_date:child.meta.adv_date_list}}\n                                            <span ng-if="it.granularity == \'week\'">({{it.range[0] | weekFormat:it.range[0]}})</span>\n                                        </em>\n                                        <em ng-if="it.data_type === \'date\' && it.granularity">{{it.range | inner_range_date_format:it}}\n                                            <span ng-if="it.granularity == \'week\'">({{it.range[0] | weekFormat:it.range[0]}})</span>\n                                        </em>\n                                        <em ng-if="it.data_type !== \'date\' && !it.inner_adv_type && it.range_type != 0">{{it.range | dash_sub_date:it}}</em>\n                                        <em ng-if="it.data_type !== \'date\' && ( (it.inner_adv_type && it.rangeNumber != 1) || it.range_type == 0 )">\n                                            <span ng-if="!it.nick_name">{{it.name}}</span>\n                                            <span ng-if="!!it.nick_name">{{it.nick_name}}</span>\n                                            \u81EA\u5B9A\u4E49\n                                        </em>\n                                        <em ng-if="it.data_type !== \'date\' && it.inner_adv_type && it.rangeNumber == 1 && it.range_type != 0 ">\n                                            {{it.rangeFirstField | dash_sub_date:it}}\n                                        </em>\n                                    </span>\n                                    <span class="filter-item" ng-repeat="it in child.meta.diff_filter track by $index">\n                                        <em>{{it}}</em>\n                                    </span>\n                            </div>\n                        </div>\n                        <div class="item-chart gridster-no-drag" ng-class="{\'noscroll\':selected_type === \'C200\' || selected_type === \'C400\'}" id="{{child.dom_id}}" size-x="{{item.sizeX}}" size-y="{{item.sizeY}}">\n                            <div class="drill-crumbs-wrap"></div>\n                            <div bdp-chart="draw_chart_url[child.dom_id].options" display-mode="{{item.sizeX + \'*\' + item.sizeY}}" data-updatetime="{{child.meta.update_time}}" data-index="$parent.$parent.$index" data-domid="child.dom_id" data-lazy-loaded="draw_chart_url[child.dom_id].lazyload" class="chart J-export-img-elem-chart" ng-class="{\'chart-table\':selected_type === \'C200\',\n                                        \'chart-canvas-table\': selected_type === \'C200\',\n                                        \'chart-map\':selected_type === \'C271\' || selected_type === \'C272\' || selected_type == \'C273\',\n                                        \'chart-funnel overflow-hidden\':selected_type === \'C330\',\n                                        \'show-datalabels\': child.meta.dash_setting.show_datalabels,\n                                        \'hide-total\':!child.meta.dash_setting.show_total}" data-ctid="{{draw_chart_url[child.dom_id].options.ct_id}}"></div>\n                            <div class="loading-wrap" ng-if="item.children[0].meta.type === \'C310\'">\n                                <div class="loader-inner ball-spin-fade-loader">\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                </div>\n                            </div>\n                        </div>\n                        <div chart-operate="" data-ct-id="{{child.meta.ct_id}}" class="gridster-no-drag" data-origin="adv_dash_edit"></div>\n                    </div>\n                </div>\n\n            </li>\n        </ul>\n        <div ng-show="showDataScreenGrid" class="data-screen-grid"></div>\n    </div>\n\n</div>\n');
    $templateCache.put('/static/dashboard/tpl/adv-dashboard.html', '<div class="dash-edit-content-view data-screen-wrap adv-dashboard-wrap" bindonce="">\n    <div class="dash-title-wrap view-header-wrap">\n        <div class="clearfix dash-title view-header">\n            <h2>{{dashTitle}}</h2>\n            <div class="btn-layer" ng-if="!dashFullscreen && permision.dashEdit && property == 0 && !isThirdIframeMobile.type">\n                <div class="display-inline-block pr">\n                    <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.design" guide-item="design" guide-type="dash_edit" watch-status="personalInfo.dashboard_guide" btn-class="J-dot-design" add-class="\'dot-guide-design\'"></div>\n\n                    <a ng-if="!proj_share && !(enterprise_type == 5 || enterprise_type == 6)" ng-click="enterEditAdvDash()" class="J-design-button J-dot-design">\n                        <i class="bdp-icon ico-edit-layout"></i>\n                        <span class="btn-layer-opt">\n                            <span>\u8BBE\u8BA1</span>\n                            <span class="btn-layer-hover-line"></span>\n                        </span>\n                    </a>\n                </div>\n\n                <a ng-click="enterFullScreen()">\n                    <i class="bdp-icon ico-fullscreen-2"></i>\n                    <span class="btn-layer-opt">\n                            \u5168\u5C4F\n                            <span class="btn-layer-hover-line"></span>\n                    </span>\n                </a>\n                \n                <div class="outer-share pr display-inline-block cursor-pointer J-share-button" ng-if="permision.dashEdit && property == 0 && permision.outerShare">\n                    <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.share" guide-item="share" guide-type="dash_edit" watch-status="personalInfo.dashboard_guide" btn-class="J-dot-share" add-class="\'dot-guide-share\'"></div>\n                    <social-share outer-share-info="outer_share_info" dash-selected="currDash.dashSelected" dash-title="dashTitle"></social-share>\n                </div>\n                \n\n                <a class="more-btn" ng-click="btn_layer.show_more_btn = !btn_layer.show_more_btn" click-outside="btn_layer.show_more_btn = false" outside-active="btn_layer.show_more_btn">\n                    <i class="bdp-icon ico-more"></i>\n                    <ul class="dropdown-wrap dash-more-list J_dashboard_more_btn" ng-show="btn_layer.show_more_btn">\n                        <li ng-if="permision.allowExporting" export-dashboard="" ng-click="showExportDialog(\'img\')" class="dropdown-item dash-add-item-btn">\n                            \u5BFC\u51FA\u4EEA\u8868\u76D8\n                        </li>\n                        <li ng-if="permision.allowExporting" export-dashboard="" ng-click="showExportDialog(\'pdf\')" class="dropdown-item dash-add-item-btn">\n                            \u5BFC\u51FAPDF\n                        </li>\n                    </ul>\n                </a>\n            </div>\n        </div>\n    </div>\n    <div class="screen-dashboard adv-dash-screen-dashboard">\n        <div ng-if="!dashLoading && global.globalDashFilter.length && global.globalDashFilterDisplay.length" class="dash-global-wrap" global-filter="" original-global-filter="global.originalGlobalFilter" global-dash-filter="global.globalDashFilter" global-dash-filter-display="global.globalDashFilterDisplay" global-dash-filter-items="global.globalDashFilterItems" rule-id="global.rule_id" show-loading="showLoading" on-share-page="isThirdIframe" draw-chart-url="draw_chart_url">\n        </div>\n        <div ng-include="\'./static/dashboard/tpl/adv-dashboard-main.html\'"></div>\n    </div>\n</div>\n\n<div ng-loading-gif="" ng-show="dashLoading"></div>\n');
    $templateCache.put('/static/dashboard/tpl/capacity-overflow.html', '<h3 class="ngdialog-title">\u63D0\u793A</h3>\n<p class="ngdialog-message">\n<span ng-if="ngDialogData.vipLevel == 0">\u6570\u636E\u5B58\u50A8\u7A7A\u95F4\u5DF2\u8FBE\u4E0A\u9650{{ngDialogData.maxCapacity}}\uFF0C\u5982\u9700\u7EE7\u7EED\u6DFB\u52A0\u6570\u636E\u6E90\uFF0C\u53EF\u5347\u7EA7\u4F1A\u5458\u83B7\u5F97\u66F4\u591A\u5B58\u50A8\u7A7A\u95F4\u54E6</span>\n<span ng-if="ngDialogData.vipLevel == 1">\u6570\u636E\u5B58\u50A8\u7A7A\u95F4\u5DF2\u8FBE\u4E0A\u9650{{ngDialogData.maxCapacity}}\uFF0C\u5982\u9700\u7EE7\u7EED\u6DFB\u52A0\u6570\u636E\u6E90\uFF0C\u53EF\u5347\u7EA7\u91D1\u94BB\u4F1A\u5458\u83B7\u5F97\u66F4\u591A\u5B58\u50A8\u7A7A\u95F4\u54E6</span>\n<span ng-if="ngDialogData.vipLevel == 2">\u6570\u636E\u5B58\u50A8\u7A7A\u95F4\u5DF2\u8FBE\u4E0A\u9650{{ngDialogData.maxCapacity}}\uFF0C\u5982\u9700\u7EE7\u7EED\u6DFB\u52A0\u6570\u636E\u6E90\uFF0C\u8BF7\u8054\u7CFBBDP\u5546\u52A1\u70ED\u7EBF <span class="cr-bdp">400-063-9966</span></span>\n</p>\n<div class="ngdialog-buttons">\n    <button type="button" ng-hide="memberData.vipLevel == 2" class="ngdialog-button ngdialog-button-secondary" ng-click="upgrade(memberData.vipLevel)">\u7ACB\u5373\u5347\u7EA7</button>\n    <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n</div>\n<div ng-loading-gif="" ng-show="showLoading"></div>\n');
    $templateCache.put('/static/dashboard/tpl/dash-edit.html', '<div ng-if="!global.showMobLayout" id="J_dashEditView" class="dash-edit-content-view" ng-class="{\'add-chart-ref\':newChartFunc.showHandlers, \'edit-mode\':dashEditMode}" bindonce="">\n\n    <div class="dash-title-wrap view-header-wrap">\n        <div class="clearfix dash-title view-header">\n            <h2>{{dashTitle}}</h2>\n            <div class="btn-layer" ng-if="!dashFullscreen && permision.dashEdit && property == 0 && !isThirdIframeMobile.type">\n\n                <a ng-if="!proj_share && !dashEditMode && !(enterprise_type == 5 || enterprise_type == 6)" class="dash-add-item-btn" flash-guide="btnNewChartGuide" fg-show="guideApi.btnNewChartGuide && guideApi.customChartStoreGuide && enterprise_type == 3">\n                    <i class="bdp-icon ico-add-chart" ng-click="addItem()"></i>\n                    <span class="btn-layer-opt" ng-click="addItem()">\n                        <span>\u6DFB\u52A0\u56FE\u8868</span>\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                    <i class="bdp-icon ico-triangle-down" ng-if="dashStandardItems.length > 0" ng-click="btn_layer.show_addchart_opt = !btn_layer.show_addchart_opt" click-outside="btn_layer.show_addchart_opt = false" outside-active="btn_layer.show_addchart_opt"></i>\n                    <ul class="dropdown-wrap" ng-show="btn_layer.show_addchart_opt">\n                        <li class="dropdown-item" ng-click="newChartFunc.editState(true)">\n                            <i class="bdp-icon ico-designate"></i>\n                            <span>\u6307\u5B9A\u4F4D\u7F6E\u6DFB\u52A0\u56FE\u8868</span>\n                        </li>\n                    </ul>\n                </a>\n                <div class="display-inline-block pr">\n                    <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.design" guide-item="design" guide-type="dash_edit" watch-status="personalInfo.dashboard_guide" btn-class="J-dot-design" add-class="\'dot-guide-design\'"></div>\n\n                    <a ng-if="!proj_share && !dashEditMode && !(enterprise_type == 5 || enterprise_type == 6)" ng-click="makeDashEdit(true)" class="J-design-button J-dot-design">\n                        <i class="bdp-icon ico-edit-layout"></i>\n                        <span class="btn-layer-opt">\n                            <span>\u8BBE\u8BA1</span>\n                            <span class="btn-layer-hover-line"></span>\n                        </span>\n                    </a>\n                </div>\n\n                <a ng-if="!dashEditMode">\n                    <i class="bdp-icon ico-fullscreen-2" ng-click="enterFullScreen(false)"></i>\n                    <span class="btn-layer-opt" ng-click="enterFullScreen(false)">\n                        <span>\u5168\u5C4F</span>\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                    <i class="bdp-icon ico-triangle-down" ng-click="btn_layer.show_presentation_mode = !btn_layer.show_presentation_mode" click-outside="btn_layer.show_presentation_mode = false" outside-active="btn_layer.show_presentation_mode"></i>\n                    <ul class="dropdown-wrap dash-display-mode-list J_dashboard_presentation" ng-show="btn_layer.show_presentation_mode">\n                        <li class="dropdown-item" ng-click="enterFullScreen(true)">\n                            <i class="bdp-icon ico-presentation-mode"></i>\n                            <span>\u6F14\u793A\u6A21\u5F0F</span>\n                        </li>\n                    </ul>\n                </a>\n                \n                <div class="outer-share pr display-inline-block cursor-pointer J-share-button" ng-if="permision.dashEdit && property == 0 && permision.outerShare">\n                    <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.share" guide-item="share" guide-type="dash_edit" watch-status="personalInfo.dashboard_guide" btn-class="J-dot-share" add-class="\'dot-guide-share\'"></div>\n                    <social-share outer-share-info="outer_share_info" dash-selected="currDash.dashSelected" dash-title="dashTitle"></social-share>\n                </div>\n\n                <a class="more-btn" ng-if="!dashEditMode" ng-click="btn_layer.show_more_btn = !btn_layer.show_more_btn" click-outside="btn_layer.show_more_btn = false" outside-active="btn_layer.show_more_btn">\n                    <i class="bdp-icon ico-more"></i>\n                    <ul class="dropdown-wrap dash-more-list J_dashboard_more_btn" ng-show="btn_layer.show_more_btn">\n                        <li class="dropdown-item global-filter-set" ng-if="!proj_share && dashSelected" global-filter-set="" original-global-filter="global.originalGlobalFilter" global-dash-filter="global.globalDashFilter" global-dash-filter-display="global.globalDashFilterDisplay" dash-standard-items="dashStandardItems" global-dash-filter-items="global.globalDashFilterItems" rule-id="global.rule_id" draw_chart_url="draw_chart_url">\u5168\u5C40\u7B5B\u9009</li>\n                        <li bo-if="permision.allowExporting" export-dashboard="" ng-click="showExportDialog(\'img\')" class="dropdown-item dash-add-item-btn">\u5BFC\u51FA\u4EEA\u8868\u76D8</li>\n                        <li bo-if="permision.allowExporting" export-dashboard="" ng-click="showExportDialog(\'pdf\')" class="dropdown-item dash-add-item-btn">\u5BFC\u51FAPDF</li>\n                        <li bo-if="permision.allowExporting" export-dashboard="" ng-click="showExportDialog(\'word\')" class="dropdown-item dash-add-item-btn">\u5BFC\u51FAWord</li>\n                    </ul>\n                </a>\n            </div>\n            <div class="mobile-dash-list" ng-if="isThirdIframeMobile.type" ng-click="showThirdIframeDshList()">\n                <i class="icon-third-back"></i>\n            </div>\n        </div>\n        <div class="clearfix dash-title view-header designate-header" ng-class="{\'fixed-width\':dashLayoutInfo.fixed_width}" ng-if="newChartFunc.showHandlers">\n            <h2>\u6307\u5B9A\u4F4D\u7F6E\u6DFB\u52A0\u56FE\u8868</h2>\n            <div class="btn-layer designate-btn">\n                <a href="javascript:;" class="bdp-icon ico-f-close" ng-click="newChartFunc.editState(false)"></a>\n            </div>\n        </div>\n    </div>\n\n    <dash-edit></dash-edit>\n    <div ng-if="!dashLoading && global.globalDashFilter.length && global.globalDashFilterDisplay.length" class="dash-global-wrap" global-filter="" original-global-filter="global.originalGlobalFilter" global-dash-filter="global.globalDashFilter" global-dash-filter-display="global.globalDashFilterDisplay" global-dash-filter-items="global.globalDashFilterItems" rule-id="global.rule_id" show-loading="showLoading" on-share-page="isThirdIframe" draw-chart-url="draw_chart_url"></div>\n    <div class="dash-wrapper normal-dash-wrapper" ng-class="{\n            \'create-chart-mode\': newChartFunc.showHandlers,\n            \'dash-one-block\':!dashLayoutInfo.show_block,\n            \'edit-mode\':dashEditMode,\n            \'dash-fixed-width\':dashLayoutInfo.fixed_width,\n            \'has-global-filter\': global.globalDashFilter.length > 0 && global.globalDashFilterDisplay.length > 0,\n            \'operate-none-gridster\': proj_share || !permision.dashOperate}">\n        <div class="folder-empty" ng-if="noDashes">\n            <i class="bdp-icon ico-new-dashboard ico-no-opacity"></i>\n            <p class="mt8 font-text-tip">\u6587\u4EF6\u5939\u4E3A\u7A7A\uFF0C\u8BF7\u4ECE\u5DE6\u4FA7\u521B\u5EFA\u4EEA\u8868\u76D8</p>\n        </div>\n        <div id="J-export-dashboard-height" gridster="gridsterOpts">\n            <div ng-if="!selected.proj_share" ng-hide="dashInit.load">\n                <div ng-if="!proj_share && selected.dsh_id  && dashStandardItems.length == 0" ng-click="addItem()" class="empty-dash-add">\n                    <span>\n                        <i class="a"></i>\n                        <i class="b"></i>\n                    </span>\n                    <div class="textalign-center empty-dash-add-tip">\u6DFB\u52A0\u56FE\u8868</div>\n                </div>\n                <ul id="J_gridster">\n                    <li gridster-item="item" class="J-export-img-elem-item" ng-repeat="item in dashStandardItems" row="item.row" col="item.col" size-x="item.sizeX" size-y="item.sizeY" ng-hide="chartdel[\'chart\'+current_item.meta.ct_id]" id="{{item.children[0].meta.ct_id}}" data-chart-type="{{item.children[0].meta.type}}" data-chart-id="{{item.children[0].meta.ct_id}}" ng-mouseleave="mouseleaveItem()" ng-class="{\n                            \'selected\':dashLayoutInfo.ct_id === item.children[0].meta.ct_id,\n                            \'border-left\':item.children[0].meta.dash_setting.border_left,\n                            \'border-right\':item.children[0].meta.dash_setting.border_right,\n                            \'border-top\':item.children[0].meta.dash_setting.border_top,\n                            \'border-bottom\':item.children[0].meta.dash_setting.border_bottom,\n                            \'no-border\':item.children[0].meta.dash_setting.border_null,\n                            \'no-title\': item.children[0].meta.type === \'C310\' || !item.children[0].meta.dash_setting.show_title,\n                            \'no-axis\': !item.children[0].meta.dash_setting.show_axis,\n                            \'no-legend\': !item.children[0].meta.dash_setting.show_legend,\n                            \'component-text\': item.children[0].meta.ct_id.indexOf(\'text_\') > -1,\n                            \'J-dot-dash-edit-wrap\': $first\n                            }">\n                        <div class="pr" ng-if="$index === 0 && enterprise_type == 3" ng-show="!dashEditMode" ng-class="{\'dot-guide-C310\': item.children[0].meta.type == \'C310\', \'dot-guide-C101\': item.children[0].meta.type == \'C101\'}">\n                            <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.dashEdit" guide-item="dashEdit" guide-type="dash_edit" watch-status="personalInfo.dashboard_guide" btn-class="J-dot-dash-edit-wrap .J-dot-dash-edit" add-class="\'dot-guide-dash-edit\'"></div>\n                        </div>\n                        <div ng-repeat="child in item.children" class="chart-box J_chart_box" ng-style="dashLayoutInfo.dashChartPadding" ng-click="dash.clickChartOutside($event, child)">\n\n                            <!-- \u6CE8\u610FngIf\u589E\u52A0\u4E86\u4E00\u4E2A\u5B50\u4F5C\u7528\u57DF\uFF0C\u6240\u4EE5$parent\u8981\u589E\u52A0\u4E00\u5C42 -->\n                            <div ng-if="child.meta.ct_id.indexOf(\'text_\') < 0">\n                                <div class="item-chart-title">\n                                    <div class="item-chart-title-bd nowrap J-item-chart-title-bd" data-chart-title="{{child.meta.name}}">\n                                        <div class="display-inline-block drill-tip" ng-if="child.meta.level_fields.length > 1">\n                                            <i class="bdp-icon ico-drill"></i>\n                                            <div class="dropdown-wrap drill-tip-bd">\n                                                <span class="nowrap" ng-repeat="drill_field in child.meta.level_fields">\n                                                    <i class="bdp-icon ico-slicesnav-arrow" ng-show="!$first"></i>\n                                                    {{drill_field.nick_name || drill_field.name}}\n                                                </span>\n                                            </div>\n                                        </div>\n                                        <i class="bdp-icon ico-linked" ng-if="child.meta.chart_link.linked_chart_type == \'2\'"></i>\n                                        <i class="bdp-icon ico-chart-jump" ng-if="child.meta.chart_jump.can_jump == \'1\'"></i>\n                                        <span class="no-margin">{{child.meta.name}}</span>\n                                        <div class="loading-wrap">\n                                            <div class="loader-inner ball-spin-fade-loader">\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                            </div>\n                                        </div>\n                                        <span class="filter-item" ng-repeat="it in child.meta.filter_list_inner" ng-if="it.range.length && !it.adv_type">\n                                            <em ng-if="it.data_type === \'date\' && !it.granularity" ng-hide="AllMap.indexOf( (it.range | format_date:child.meta.adv_date_list ) ) >= 0">\n                                                {{it.range | format_date:child.meta.adv_date_list}}\n                                                <span ng-if="it.granularity == \'week\'">({{it.range[0] | weekFormat:it.range[0]}})</span>\n                                            </em>\n                                            <em ng-if="it.data_type === \'date\' && it.granularity">{{it.range | inner_range_date_format:it}}\n                                                <span ng-if="it.granularity == \'week\'">({{it.range[0] | weekFormat:it.range[0]}})</span>\n                                            </em>\n                                            <em ng-if="it.data_type !== \'date\' && !it.inner_adv_type && it.range_type != 0">{{it.range | dash_sub_date:it}}</em>\n                                            <em ng-if="it.data_type !== \'date\' && ( (it.inner_adv_type && it.rangeNumber != 1) || it.range_type == 0 )">\n                                                <span ng-if="!it.nick_name">{{it.name}}</span>\n                                                <span ng-if="!!it.nick_name">{{it.nick_name}}</span>\n                                                <span>\u81EA\u5B9A\u4E49</span>\n                                            </em>\n                                            <em ng-if="it.data_type !== \'date\' && it.inner_adv_type && it.rangeNumber == 1 && it.range_type != 0 ">\n                                                {{it.rangeFirstField | dash_sub_date:it}}\n                                            </em>\n                                        </span>\n                                        <span class="filter-item" ng-repeat="it in child.meta.diff_filter track by $index">\n                                            <em>{{it}}</em>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class="item-chart gridster-no-drag J_item_chart" ng-class="{\'noscroll\':selected_type === \'C200\' || selected_type === \'C400\'}" id="{{child.dom_id}}" size-x="{{item.sizeX}}" size-y="{{item.sizeY}}" ng-style="dashLayoutInfo.dashChartPosition[child.meta.ct_id]">\n                                    <div class="drill-crumbs-wrap"></div>\n                                    <div bdp-chart="draw_chart_url[child.dom_id].options" display-mode="{{item.sizeX + \'*\' + item.sizeY}}" data-updatetime="{{child.meta.update_time}}" data-index="$parent.$parent.$index" data-domid="child.dom_id" data-lazy-loaded="draw_chart_url[child.dom_id].lazyload" class="chart J-export-img-elem-chart" ng-class="{\'chart-table\':selected_type === \'C200\',\n                                            \'chart-canvas-table\': selected_type === \'C200\',\n                                            \'chart-custom\': selected_type === \'C500\',\n                                            \'chart-funnel overflow-hidden\':selected_type === \'C330\',\n                                            \'show-datalabels\': child.meta.dash_setting.show_datalabels,\n                                            \'hide-total\':!child.meta.dash_setting.show_total}" data-ctid="{{draw_chart_url[child.dom_id].options.ct_id}}"></div>\n                                    <div class="loading-wrap" ng-if="item.children[0].meta.type === \'C310\'">\n                                        <div class="loader-inner ball-spin-fade-loader">\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div chart-operate="" data-ct-id="{{child.meta.ct_id}}" class="gridster-no-drag"></div>\n                                <!-- <div ng-show="dashEditMode" class="base-loading-layer" ng-click="dash.editChartMeta(child)"></div> -->\n                                <div ng-if="newChartFunc.showHandlers" class="base-loading-layer bdp-pos-handler-layer" ng-mouseover="newChartFunc.moveHandlersTo($event, item)"></div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n\n                <div id="J_bdpPosHandlers" class="bdp-pos-handlers" ng-mousemove="newChartFunc._onMouseMove($event)" ng-mouseleave="newChartFunc._onMouseOut($event)" ng-click="newChartFunc.create()">\n                    <div class="bdp-pos-handler bdp-pos-handler-top">\n                        <i class="bdp-pos-handler-add bdp-icon ico-plus-blue ico-always-opacity"></i>\n                    </div>\n                    <div class="bdp-pos-handler bdp-pos-handler-bottom">\n                        <i class="bdp-pos-handler-add bdp-icon ico-plus-blue ico-always-opacity"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div ng-if="global.showMobLayout" class="dash-mode-mob dash-edit-content-view">\n    <div class="view-header dash-edit-wrapper clearfix">\n        <div class="block mr16">\n            <a class="back-web" ng-click="setMobLayout(false)">\n                <i class="bdp-icon ico-back1"></i>\n                <span>\u8FD4\u56DE\u7535\u8111\u7AEF\u5E03\u5C40</span>\n            </a>\n        </div>\n        <div class="block ml16">\n            <div class="view-header-seperate-line"></div>\n            <span class="setting-tip mr16">\uFF0A\u53EF\u62D6\u62FD\u8C03\u6574\u79FB\u52A8\u7AEF\u6587\u672C\u548C\u56FE\u8868\u7684\u5C55\u793A\u987A\u5E8F</span>\n        </div>\n    </div>\n\n    <div class="dash-wrapper">\n        <ul ui-sortable="sortMobCharts" ng-model="dashStandardItems">\n            <li ng-repeat="item in dashStandardItems" class="gridster-item" ng-class="{\n                    \'selected\':dashLayoutInfo.ct_id === item.children[0].meta.ct_id,\n                    \'no-title\': item.children[0].meta.type === \'C310\' || !item.children[0].meta.dash_setting.show_title,\n                    \'no-axis\': !item.children[0].meta.dash_setting.show_axis,\n                    \'no-legend\': !item.children[0].meta.dash_setting.show_legend,\n                    \'component-text\': item.children[0].meta.ct_id.indexOf(\'text_\') > -1\n                    }">\n                <div ng-repeat="child in item.children" class="chart-box">\n                    <!-- \u6CE8\u610FngIf\u589E\u52A0\u4E86\u4E00\u4E2A\u5B50\u4F5C\u7528\u57DF\uFF0C\u6240\u4EE5$parent\u8981\u589E\u52A0\u4E00\u5C42 -->\n                    <div ng-if="child.meta.ct_id.indexOf(\'text_\') < 0">\n                        <div class="item-chart-title">\n                            <div class="item-chart-title-bd nowrap">\n                                <span class="no-margin" ng-click="">{{child.meta.name}}</span>\n                                <div class="loading-wrap">\n                                    <div class="loader-inner ball-spin-fade-loader">\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="item-chart gridster-no-drag J_item_chart" ng-class="{\n                                \'noscroll\':selected_type === \'C200\'\n                                || selected_type === \'C400\'\n                            }" id="{{child.dom_id}}">\n                            <div class="drill-crumbs-wrap"></div>\n                            <div bdp-chart="draw_chart_url[child.dom_id].options" display-mode="{{item.sizeX + \'*\' + item.sizeY}}" data-updatetime="{{child.meta.update_time}}" data-index="$parent.$parent.$index" data-domid="child.dom_id" data-lazy-loaded="draw_chart_url[child.dom_id].lazyload" class="chart" ng-class="{\'chart-table\': selected_type === \'C200\',\n                                    \'chart-canvas-table\': selected_type === \'C200\',\n                                    \'chart-custom\': selected_type === \'C500\',\n                                    \'chart-funnel overflow-hidden\':selected_type === \'C330\',\n                                    \'show-datalabels\': child.meta.dash_setting.show_datalabels,\n                                    \'hide-total\':!child.meta.dash_setting.show_total}" data-ctid="{{draw_chart_url[child.dom_id].options.ct_id}}"></div>\n                            <div class="loading-wrap" ng-if="item.children[0].meta.type === \'C310\'">\n                                <div class="loader-inner ball-spin-fade-loader">\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div ng-show="dashEditMode" class="base-loading-layer" ng-click="dash.editChartMeta(child)"></div>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n\n<div ng-loading-gif="" ng-show="dashLoading"></div>\n');
    $templateCache.put('/static/dashboard/tpl/dash-fullscreen.html', '<div class="dash-fullscreen-wrap display-device-{{fullDisplayDevice}} display-theme-{{fullDisplayTheme === 1 ? \'dark\' : \'light\'}}" bindonce="">\n    <div class="dash-title-wrap view-header-wrap">\n        <div class="clearfix dash-title view-header">\n            <h2 ng-bind="dashTitle"></h2>\n            <div class="btn-layer">\n                <a class="full-display-setting" ng-click="show_display_theme = !show_display_theme" click-outside="show_display_theme = false" outside-active="show_display_theme">\n                    <span class="setting-label">\u5E95\u8272\u8BBE\u7F6E</span>\n                    <span class="btn-layer-opt">\n                        <span ng-bind="fullDisplayTheme === 1 ? \'dash.darkTheme\' : \'dash.lightTheme\' | translate"></span>\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                    <i class="bdp-icon ico-triangle-down"></i>\n                    <ul class="dropdown-wrap" ng-show="show_display_theme">\n                        <li class="dropdown-item" ng-click="setFullDisplayTheme(1)">\u661F\u7A7A\u84DD</li>\n                        <li class="dropdown-item" ng-click="setFullDisplayTheme(2)">\u5178\u96C5\u767D</li>\n                    </ul>\n                </a>\n                <a class="full-display-setting" ng-click="show_display_devices = !show_display_devices" click-outside="show_display_devices = false" outside-active="show_display_devices">\n                    <span class="setting-label">\u9002\u914D\u8BBE\u5907</span>\n                    <span class="btn-layer-opt">\n                        <i class="bdp-icon ico-device ico-device-{{fullDisplayDevice}}"></i>\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                    <i class="bdp-icon ico-triangle-down"></i>\n                    <ul class="dropdown-wrap" ng-show="show_display_devices">\n                        <li class="dropdown-item" ng-click="setFullDisplayDevice(\'pc\')">\n                           <i class="bdp-icon ico-device-pc" title="PC\u663E\u793A\u5C4F"></i>\n                        </li>\n                        <li class="dropdown-item" ng-click="setFullDisplayDevice(\'projector\')">\n                           <i class="bdp-icon ico-device-projector" title="\u6295\u5F71\u4EEA"></i>\n                        </li>\n                        <li class="dropdown-item" ng-click="setFullDisplayDevice(\'tv\')">\n                           <i class="bdp-icon ico-device-tv" title="TV\u663E\u793A\u5C4F"></i>\n                        </li>\n                    </ul>\n                </a>\n                <a ng-click="exitFullScreen();removeFullDisplayStyle()">\n                    <i class="bdp-icon ico-exit-fullscreen"></i>\n                    <span class="btn-layer-opt">\n                        <span>\u9000\u51FA\u5168\u5C4F</span>\n                        <span class="btn-layer-hover-line"></span>\n                    </span>\n                </a>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!dashLoading && global.globalDashFilter.length && global.globalDashFilterDisplay.length" class="dash-global-wrap" global-filter="" original-global-filter="global.originalGlobalFilter" global-dash-filter="global.globalDashFilter" global-dash-filter-display="global.globalDashFilterDisplay" global-dash-filter-items="global.globalDashFilterItems" rule-id="global.rule_id" show-loading="showLoading" draw_chart_url="draw_chart_url"></div>\n    <div class="dash-wrapper operate-none-gridster" ng-class="{\n        \'dash-one-block\':!dashLayoutInfo.show_block,\n        \'edit-mode\':dashEditMode,\n        \'dash-fixed-width\':dashLayoutInfo.fixed_width,\n        \'has-global-filter\': global.globalDashFilter.length > 0 && global.globalDashFilterDisplay.length,\n        \'normal-dash-wrapper\': dashLayoutInfo.dashCategory == 0\n        }">\n\n        <div class="folder-empty" ng-if="noDashes">\n            <i class="bdp-icon ico-new-dashboard ico-no-opacity"></i>\n            <p class="font-text-tip">\u6587\u4EF6\u5939\u4E3A\u7A7A\uFF0C\u8BF7\u4ECE\u5DE6\u4FA7\u521B\u5EFA\u4EEA\u8868\u76D8</p>\n        </div>\n\n        <slick class="slider single-item" on-before-change="onSlickBeforeChange" id="dash-slider" draggable="false" lazy-load="ondemand" autoplay="false" autoplay-speed="10000" init-onload="true" data="dashPages" infinite="true" dots="false" append-arrows=".page-nav">\n            <div class="gridster-page" ng-repeat="dashPageItems in dashPages" gridster="gridsterOpts">\n                <div ng-if="!selected.proj_share" ng-hide="dashInit.load">\n                    <div ng-if="selected.dsh_id  && dashPageItems.length == 0" ng-click="addItem()" class="empty-dash-add">\n                        <span>\n                            <i class="a"></i>\n                            <i class="b"></i>\n                        </span>\n                        <div class="textalign-center empty-dash-add-tip">\u6DFB\u52A0\u56FE\u8868</div>\n                    </div>\n                </div>\n                <ul>\n                    <li gridster-item="item" ng-repeat="item in dashPageItems" row="item.row" col="item.col" size-x="item.sizeX" size-y="item.sizeY" ng-hide="chartdel[\'chart\'+current_item.meta.ct_id]" id="{{item.children[0].meta.ct_id}}" class="no-border" data-chart-id="{{item.children[0].meta.ct_id}}" ng-mouseleave="mouseleaveItem()" ng-class="{\n                            \'selected\':dashLayoutInfo.ct_id === item.children[0].meta.ct_id,\n                            \'no-title\': item.children[0].meta.type === \'C310\' || !item.children[0].meta.dash_setting.show_title,\n                            \'no-axis\': !item.children[0].meta.dash_setting.show_axis,\n                            }">\n                        <div ng-repeat="child in item.children" class="chart-box J_chart_box" ng-style="dashLayoutInfo.dashChartPadding">\n                            <!-- \u6CE8\u610FngIf\u589E\u52A0\u4E86\u4E00\u4E2A\u5B50\u4F5C\u7528\u57DF\uFF0C\u6240\u4EE5$parent\u8981\u589E\u52A0\u4E00\u5C42 -->\n                            <div ng-if="child.meta.ct_id.indexOf(\'text_\') < 0">\n                                <div class="item-chart-title">\n                                    <div class="item-chart-title-bd nowrap">\n                                        <div class="display-inline-block drill-tip" ng-if="child.meta.level_fields.length > 1">\n                                            <i class="bdp-icon ico-drill"></i>\n                                            <div class="drill-tip-bd mt5">\n                                                <span ng-repeat="drill_field in child.meta.level_fields">\n                                                    <i class="bdp-icon ico-slicesnav-arrow" ng-show="!$first"></i>\n                                                    {{drill_field.nick_name || drill_field.name}}\n                                                </span>\n                                                <div class="arrow"><em></em><span></span></div>\n                                            </div>\n                                        </div>\n                                        <i class="bdp-icon ico-linked" ng-if="child.meta.chart_link.linked_chart_type == \'2\'"></i>\n                                        <i class="bdp-icon ico-chart-jump" ng-if="child.meta.chart_jump.can_jump == \'1\'"></i>\n                                        <span class="no-margin" ng-click="">{{child.meta.name}}</span>\n                                        <span class="filter-item" ng-repeat="it in child.meta.filter_list_inner" ng-if="it.range.length && !it.adv_type">\n                                            <em ng-if="it.data_type === \'date\' && !it.granularity" ng-hide="AllMap.indexOf( (it.range | format_date:child.meta.adv_date_list ) ) >= 0">\n                                                {{it.range | format_date:child.meta.adv_date_list}}\n                                                <span ng-if="it.granularity == \'week\'">({{it.range[0] | weekFormat:it.range[0]}})</span>\n                                            </em>\n                                            <em ng-if="it.data_type === \'date\' && it.granularity">{{it.range | inner_range_date_format:it}}\n                                                <span ng-if="it.granularity == \'week\'">({{it.range[0] | weekFormat:it.range[0]}})</span>\n                                            </em>\n                                            <em ng-if="it.data_type !== \'date\' && !it.inner_adv_type">{{it.range | dash_sub_date:it}}</em>\n                                            <em ng-if="it.data_type !== \'date\' && it.inner_adv_type && (it.rangeNumber != 1 || it.range_type == 0 )">\n                                                <span ng-if="!it.nick_name">{{it.name}}</span>\n                                                <span ng-if="!!it.nick_name">{{it.nick_name}}</span>\n                                                <span>\u81EA\u5B9A\u4E49</span>\n                                            </em>\n                                            <em ng-if="it.data_type !== \'date\' && it.inner_adv_type && it.rangeNumber == 1 && it.range_type != 0 ">\n                                                {{it.rangeFirstField | dash_sub_date:it}}\n                                            </em>\n                                        </span>\n                                        <span class="filter-item" ng-repeat="it in child.meta.diff_filter track by $index">\n                                            <em>{{it}}</em>\n                                        </span>\n                                        <div class="loading-wrap">\n                                            <div class="loader-inner ball-spin-fade-loader">\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="item-chart gridster-no-drag J_item_chart" ng-class="{\'noscroll\':selected_type === \'C200\'}" id="{{child.dom_id}}" size-x="{{item.sizeX}}" size-y="{{item.sizeY}}" ng-style="dashLayoutInfo.dashChartPosition[child.meta.ct_id]">\n                                    <div class="drill-crumbs-wrap"></div>\n                                    <div bdp-chart="draw_chart_url[child.dom_id].options" display-mode="{{item.sizeX + \'*\' + item.sizeY}}" data-updatetime="{{child.meta.update_time}}" data-index="item.index" data-domid="child.dom_id" data-lazy-loaded="draw_chart_url[child.dom_id].lazyload" class="chart" ng-class="{\'chart-table\':selected_type === \'C200\',\n                                            \'chart-canvas-table\': selected_type === \'C200\',\n                                            \'chart-custom\': selected_type === \'C500\',\n                                            \'chart-funnel overflow-hidden\':selected_type === \'C330\',\n                                            \'chart-sankey\': selected_type === \'C300\' || selected_type === \'C301\',\n                                            \'show-datalabels\': child.meta.dash_setting.show_datalabels,\n                                            \'hide-total\':!child.meta.dash_setting.show_total}"></div>\n                                </div>\n                                <div chart-operate="" data-ct-id="{{child.meta.ct_id}}" class="gridster-no-drag hidden"></div>\n                            </div>\n\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        </slick>\n\n    </div>\n    <div class="page-nav">\n        <span class="page-ctrl-play" ng-click="toggleDashboardAutoplay()">\n            <i class="bdp-icon" ng-class="{\'ico-pause\': dashboardAutoplay, \'ico-play\': !dashboardAutoplay}"></i>\n        </span>\n    </div>\n</div>\n');
    $templateCache.put('/static/dashboard/tpl/data-screen-edit.html', '<div class="data-screen-wrap" bindonce="">\n    <div class="view-header">\n        <a class="back-btn" ng-click="backDataScreen()" href="javascript:;">\n           <i class="bdp-icon ico-back"></i>\n        </a>\n        <h2 class="text-center data-screen-edit-title">\n            <div class="edit-title-detail">{{dashTitle}}</div>\n        </h2>\n        <div class="btn-layer">\n            <a ng-click="backDataScreen()" href="javascript:;">\n                <i class="bdp-icon ico-ok-blue"></i>\n                <span class="btn-layer-opt">\n                    \u5B8C\u6210\n                    <span class="btn-layer-hover-line"></span>\n                </span>\n            </a>\n        </div>\n    </div>\n    <div class="data-screen-content">\n        <div class="screen-main">\n            <div class="screen-wrap">\n                <div class="screen-btn-bar clearfix">\n                    <div class="toolbar-left bdp-icon-hover-light">\n                        <span class="display-inline-block">\u6DFB\u52A0\u5143\u7D20</span>\n                        <span class="display-inline-block seperate-line ml8"></span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addChart" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-screen-chart cursor-pointer" ng-click="addItem()"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addTitle" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-attr cursor-pointer" ng-click="dash.addTextComponent(\'C105\')"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addText" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-text cursor-pointer" ng-click="dash.addTextComponent(\'C101\')"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addImage" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-img cursor-pointer" ng-click="dash.addImageComponent()"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addVideo" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-video cursor-pointer" ng-click="dash.addVideoComponent()"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.addBorder" tooltip-placement="bottom">\n                            <i class="bdp-icon ico-add-border cursor-pointer" ng-click="dash.addBorderComponent()"></i>\n                        </span>\n                        <span class="display-inline-block seperate-line ml16"></span>\n                        <span class="display-inline-block ml16 toolbar-title">\u7F51\u683C\u53C2\u8003\u7EBF</span>\n                        <label class="cursor-pointer ml8">\n                            <input type="checkbox" ng-click="showDataScreenGrid = !showDataScreenGrid" ng-model="showDataScreenGrid"><span class="ml4">\u663E\u793A</span>\n                        </label>\n                        <span class="display-inline-block seperate-line ml16"></span>\n                        <span class="display-inline-block ml16 toolbar-title">\u5C42\u7EA7</span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.top" tooltip-placement="bottom" ng-click="dash.setZIndex(\'top\')">\n                            <i class="bdp-icon ico-layer-rise cursor-pointer J_set_zindex"></i>\n                        </span>\n                        <span class="bdp-icon-wrap bdp-icon-bgcol cursor-pointer ml8" bdp-tooltip="pageContent.bottom" tooltip-placement="bottom" ng-click="dash.setZIndex(\'bottom\')">\n                            <i class="bdp-icon ico-layer-fall cursor-pointer J_set_zindex"></i>\n                        </span>\n                        <span class="display-inline-block seperate-line ml16"></span>\n                        <span class="display-inline-block ml16 toolbar-title">\u7F29\u653E</span>\n                        <label class="display-inline-block ml16">\n                            <select ng-model="dash.scaleDashbord.selectedData" ng-change="dash.scaleDashbord.modifyScale();">\n                                <option value="1">\u5B9E\u9645\u5BBD\u9AD8</option>\n                                <option value="2">\u81EA\u9002\u5E94\u5BBD\u9AD8</option>\n                            </select>\n                        </label>\n                    </div>\n                </div>\n                <div class="screen-dashboard-wrap screen-dashboard-edit-wrap">\n                    <div class="screen-dashboard data-screen-dashboard">\n                        <div class="dash-edit-content-view">\n                            <div ng-include="\'./static/dashboard/tpl/data-screen-main.html\'"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="side-panel J_side_panel">\n            <div datascreen-page-ele="" save-func="dash.saveChartStyle(chart)" ng-if="dash.editChartMetaVisible.pageEle"></div>\n            <div chart-style-text="" save-func="saveDashboard()" ng-if="dash.editChartMetaVisible.text"></div>\n            <div chart-style-extend="" save-func="dash.saveChartStyle(chart)" ng-if="dash.editChartMetaVisible.style"></div>\n            <div chart-screen-numerical="" ng-if="dash.editChartMetaVisible.numerical"></div>\n            <div chart-screen-video="" ng-if="dash.editChartMetaVisible.video"></div>\n            <div chart-screen-img="" ng-if="dash.editChartMetaVisible.img"></div>\n            <div datascreen-page-wrap="" ng-show="dash.editChartMetaVisible.pageWrap"></div>\n            <div chart-style-edit="" data="dashLayoutInfo"></div>\n        </div>\n    </div>\n</div>\n');
    $templateCache.put('/static/dashboard/tpl/data-screen-main.html', '<div class="dash-wrapper J-dash-wrapper" ng-class="{\n    \'dash-one-block\':!dashLayoutInfo.show_block,\n    \'edit-mode\':dashEditMode,\n    \'readonly-mode\': !dashEditMode,\n    \'dash-fixed-width\':dashLayoutInfo.fixed_width,\n    \'dash-mode-free\':dashLayoutInfo.layout_style == 2\n    }" ng-style="dashLayoutInfo.dashWrapperStyle">\n\n    <div class="folder-empty" ng-if="noDashes">\n        <i class="bdp-icon ico-new-dashboard ico-no-opacity"></i>\n        <p class="font-text-tip">\u6587\u4EF6\u5939\u4E3A\u7A7A\uFF0C\u8BF7\u4ECE\u5DE6\u4FA7\u521B\u5EFA\u6570\u636E\u5927\u5C4F</p>\n    </div>\n    <div gridster="gridsterOpts" id="J-export-dashboard-height" class="J_data_screen_hook" ng-style="dashLayoutInfo.gridsterStyle">\n            <ul id="J_gridster" ng-if="dashLayoutInfo.layout_style == 2">\n                <li gridster-item="item" class="J-export-img-elem-item" ng-repeat="item in dashStandardItems" ng-style="item.itemStyle" ng-hide="chartdel[\'chart\'+current_item.meta.ct_id]" id="{{item.children[0].meta.ct_id}}" data-chart-type="{{item.children[0].meta.type}}" data-chart-id="{{item.children[0].meta.ct_id}}" data-is-special-chart="{{item.children[0].meta.is_special_chart}}" ng-mouseleave="mouseleaveItem()" ng-class="{\n                        \'selected\':dashLayoutInfo.ct_id === item.children[0].meta.ct_id && !!dashEditMode,\n                        \'border-left\':item.children[0].meta.dash_setting.border_left,\n                        \'border-right\':item.children[0].meta.dash_setting.border_right,\n                        \'border-top\':item.children[0].meta.dash_setting.border_top,\n                        \'border-bottom\':item.children[0].meta.dash_setting.border_bottom,\n                        \'no-title\': item.children[0].meta.type === \'C310\' || !item.children[0].meta.dash_setting.show_title,\n                        \'no-axis\': !item.children[0].meta.dash_setting.show_axis,\n                        \'no-legend\': !item.children[0].meta.dash_setting.show_legend,\n                        \'component-text\': item.children[0].meta.ct_id.indexOf(\'text_\') > -1 || item.children[0].meta.type == \'C105\',\n                        \'no-edit-mode\': !dashEditMode,\n                        \'top-index-layer\': item.isTopIndex,\n                        \'resize-disable\': lockItemPosMap && lockItemPosMap[item.children[0].meta.ct_id]\n                    }">\n                    <div class="data-screen-item-box gridbox-border-{{item.borderType}}" ng-show="item.borderType && item.borderType != \'CUSTOM\'">\n                        <div class="data-screen-item-top">\n                            <div class="data-screen-item-left"></div>\n                            <div class="data-screen-item-center"></div>\n                            <div class="data-screen-item-right"></div>\n                        </div>\n                        <div class="data-screen-item-middle">\n                            <div class="data-screen-item-left"></div>\n                            <div class="data-screen-item-center"></div>\n                            <div class="data-screen-item-right"></div>\n                        </div>\n                        <div class="data-screen-item-bottom">\n                            <div class="data-screen-item-left"></div>\n                            <div class="data-screen-item-center"></div>\n                            <div class="data-screen-item-right"></div>\n                        </div>\n                    </div>\n                    <div ng-repeat="child in item.children" ng-class="{\'chart-box\': [\'C102\',\'C104\'].indexOf(child.meta.type) < 0, \'gridster-no-drag\': lockItemPosMap && lockItemPosMap[child.meta.ct_id] }" class="auto-size J_chart_box" ng-click="dash.editChartMeta(child, item);dash.handleKeyBoardMoveEvent(child, item)">\n                        <!-- \u6587\u672C\u7EC4\u4EF6\u5DF2\u4E0D\u9700\u8981\uFF0C\u5148\u4FDD\u7559 -->\n                        <div ng-if="child.meta.ct_id.indexOf(\'text_\') > -1 || child.meta.type == \'C105\'" ng-class="{\'ta-edit-mode-on\':dashEditMode && textComponentEditMode[child.meta.ct_id]}">\n                            <div class="chart-operate" ng-if="!proj_share && dashProperty == 0 && dashEditMode">\n                                <div class="chart-operate-more bdp-icon-wrap" ng-click="more_show = !more_show;dash.setOperatorIndex(more_show,false,item);$event.stopPropagation();" ng-mouseleave="more_show = false;dash.setOperatorIndex(more_show,false,item)">\n                                    <i class="bdp-icon ico-more cursor-pointer"></i>\n                                    <ul ng-show="more_show" class="dropdown-wrap">\n                                        <li class="dropdown-item" ng-click="dash.editTextFromMore(child,item)">\u7F16\u8F91</li>\n                                        <li class="dropdown-item" ng-click="dash.copyComponent(child,item)">\u590D\u5236\u5143\u7D20</li>\n                                        <li class="dropdown-item" ng-click="dash.moveComponent(child,item)">\u79FB\u52A8\u5143\u7D20</li>\n                                        <li class="dropdown-item" ng-click="dash.delComponent(child.meta.ct_id)">\u5220\u9664</li>\n                                    </ul>\n                                </div>\n                            </div>\n                            <div ng-if="dashEditMode" text-angular="" ng-model="child.meta.html" ng-style="child.meta.style" ng-blur="dash.saveTextComponent(child)" name="{{child.meta.ct_id}}" ta-toolbar="[[]]" ta-unsafe-sanitizer="true"></div>\n                            <div ng-if="!dashEditMode" text-angular="" class="item-text-chart" ng-style="child.meta.style" ng-model="child.meta.html" ta-disabled="true" ta-unsafe-sanitizer="true"></div>\n                            <div ng-show="dashEditMode && !textComponentEditMode[child.meta.ct_id]" class="base-loading-layer" ng-click="dash.editChartMeta(child, item)"></div>\n                        </div>\n\n                        <div ng-if="child.meta.type && child.meta.type.indexOf(\'C102\') > -1" class="auto-size screen-item-image">\n                            <div ng-if="item.url" class="auto-size" style="background:url({{item.url}}) no-repeat center; background-size: contain"></div>\n                            <div ng-if="!item.url" class="auto-size screen-item-placeholder-image"></div>\n                            <div class="chart-operate" ng-if="!proj_share && dashProperty == 0 && dashEditMode">\n                                <div class="chart-operate-more bdp-icon-wrap" ng-click="more_show = !more_show;dash.setOperatorIndex(more_show,false,item)" ng-mouseleave="more_show = false;dash.setOperatorIndex(more_show,false,item)">\n                                    <i class="bdp-icon ico-more"></i>\n                                    <ul ng-show="more_show" class="dropdown-wrap">\n                                        <li class="dropdown-item" ng-click="dash.copyComponent(child,item)">\u590D\u5236\u5143\u7D20</li>\n                                        <li class="dropdown-item" ng-click="dash.moveComponent(child,item)">\u79FB\u52A8\u5143\u7D20</li>\n                                        <li class="dropdown-item" ng-click="dash.delComponent(child.meta.ct_id);$event.stopPropagation();">\u5220\u9664</li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div ng-if="child.meta.type && child.meta.type.indexOf(\'C103\') > -1" class="auto-size screen-item-image" ng-class="{\'screen-item-video\': dashLayoutInfo.ct_id === item.children[0].meta.ct_id}">\n                            <div ng-if="!item.src" class="auto-size screen-item-placeholder-video"></div>\n                            <video class="auto-size ng-hide" ng-if="item.autoplay  && item.loop && item.src" ng-show="item.autoplay  && item.loop" preload="auto" muted="muted" controls="controls" autoplay="autoplay" loop="loop" ng-src="{{item.src | trustUrl}}">\n                            </video>\n                            <video class="auto-size ng-hide" ng-if="item.autoplay  && !item.loop && item.src" ng-show="item.autoplay  && !item.loop" preload="auto" muted="muted" controls="controls" autoplay="autoplay" ng-src="{{item.src | trustUrl}}">\n                            </video>\n                            <video class="auto-size ng-hide" ng-if="!item.autoplay  && item.loop && item.src" ng-show="!item.autoplay  && item.loop" preload="auto" muted="muted" controls="controls" loop="loop" ng-src="{{item.src | trustUrl}}">\n                            </video>\n                            <video class="auto-size ng-hide" ng-if="!item.autoplay  && !item.loop && item.src" ng-show="!item.autoplay  && !item.loop" preload="auto" muted="muted" controls="controls" ng-src="{{item.src | trustUrl}}">\n                            </video>\n\n                            <div class="chart-operate" ng-if="!proj_share && dashProperty == 0 && dashEditMode">\n                                <div class="chart-operate-more bdp-icon-wrap" ng-click="more_show = !more_show;dash.setOperatorIndex(more_show,false,item)" ng-mouseleave="more_show = false;dash.setOperatorIndex(more_show,false,item)">\n                                    <i class="bdp-icon ico-more"></i>\n                                    <ul ng-show="more_show" class="dropdown-wrap">\n                                        <li class="dropdown-item" ng-click="dash.copyComponent(child,item)">\u590D\u5236\u5143\u7D20</li>\n                                        <li class="dropdown-item" ng-click="dash.moveComponent(child,item)">\u79FB\u52A8\u5143\u7D20</li>\n                                        <li class="dropdown-item" ng-click="dash.delComponent(child.meta.ct_id);$event.stopPropagation();">\u5220\u9664</li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div ng-if="child.meta.type && child.meta.type.indexOf(\'C104\') > -1" class="auto-size">\n                            <div class="chart-operate" ng-if="!proj_share && dashProperty == 0 && dashEditMode">\n                                <div class="chart-operate-more bdp-icon-wrap" ng-if="dashEditMode" ng-click="more_show = !more_show;dash.setOperatorIndex(more_show,false,item)" ng-mouseleave="more_show = false;dash.setOperatorIndex(more_show,false,item)">\n                                    <i class="bdp-icon ico-more"></i>\n                                    <ul ng-show="more_show" class="dropdown-wrap">\n                                        <li class="dropdown-item" ng-click="dash.delComponent(child.meta.ct_id);$event.stopPropagation();">\u5220\u9664</li>\n                                    </ul>\n                                </div>\n                            </div>\n                            <div ng-show="dashEditMode && !textComponentEditMode[child.meta.ct_id]" class="base-loading-layer" ng-click="dash.editChartMeta(child, item)"></div>\n                        </div>\n\n                        <!-- \u6CE8\u610FngIf\u589E\u52A0\u4E86\u4E00\u4E2A\u5B50\u4F5C\u7528\u57DF\uFF0C\u6240\u4EE5$parent\u8981\u589E\u52A0\u4E00\u5C42 -->\n                        <div ng-if="child.meta.type && [\'C101\', \'C102\',\'C103\',\'C104\',\'C105\'].indexOf(child.meta.type) < 0">\n                            <div class="item-chart-title">\n                                <div class="item-chart-title-bd nowrap">\n                                    <div class="display-inline-block drill-tip" ng-if="child.meta.level_fields.length > 1">\n                                        <i class="bdp-icon ico-drill"></i>\n                                        <div class="dropdown-wrap drill-tip-bd">\n                                            <span ng-repeat="drill_field in child.meta.level_fields">\n                                                <i class="bdp-icon ico-slicesnav-arrow" ng-show="!$first"></i>\n                                                {{drill_field.nick_name || drill_field.name}}\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <i class="bdp-icon ico-linked" ng-if="child.meta.chart_link.linked_chart_type == \'2\'"></i>\n                                    <i class="bdp-icon ico-chart-jump" ng-if="child.meta.chart_jump.can_jump == \'1\'"></i>\n                                    <span class="no-margin">{{child.meta.name}}</span>\n                                    <div class="loading-wrap">\n                                        <div class="loader-inner ball-spin-fade-loader">\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                        </div>\n                                    </div>\n                                    <span class="filter-item" ng-repeat="it in child.meta.filter_list_inner" ng-if="it.range.length && !it.adv_type">\n                                        <em ng-if="it.data_type === \'date\' && !it.granularity" ng-hide="AllMap.indexOf( (it.range | format_date:child.meta.adv_date_list ) ) >= 0">\n                                            {{it.range | format_date:child.meta.adv_date_list}}\n                                            <span ng-if="it.granularity == \'week\'">({{it.range[0] | weekFormat:it.range[0]}})</span>\n                                        </em>\n                                        <em ng-if="it.data_type === \'date\' && it.granularity">{{it.range | inner_range_date_format:it}}\n                                            <span ng-if="it.granularity == \'week\'">({{it.range[0] | weekFormat:it.range[0]}})</span>\n                                        </em>\n                                        <em ng-if="it.data_type !== \'date\' && !it.inner_adv_type && it.range_type != 0">{{it.range | dash_sub_date:it}}</em>\n                                        <em ng-if="it.data_type !== \'date\' && ( (it.inner_adv_type && it.rangeNumber != 1) || it.range_type == 0 )">\n                                            <span ng-if="!it.nick_name">{{it.name}}</span>\n                                            <span ng-if="!!it.nick_name">{{it.nick_name}}</span>\n                                            \u81EA\u5B9A\u4E49\n                                        </em>\n                                        <em ng-if="it.data_type !== \'date\' && it.inner_adv_type && it.rangeNumber == 1 && it.range_type != 0 ">\n                                            {{it.rangeFirstField | dash_sub_date:it}}\n                                        </em>\n                                    </span>\n                                    <span class="filter-item" ng-repeat="it in child.meta.diff_filter track by $index">\n                                        <em>{{it}}</em>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class="item-chart gridster-no-drag" ng-class="{\'noscroll\':selected_type === \'C200\' || selected_type === \'C400\'}" id="{{child.dom_id}}" size-x="{{item.sizeX}}" size-y="{{item.sizeY}}">\n                                <div class="drill-crumbs-wrap"></div>\n                                <div bdp-chart="draw_chart_url[child.dom_id].options" display-mode="{{item.sizeX + \'*\' + item.sizeY}}" data-updatetime="{{child.meta.update_time}}" data-index="$parent.$parent.$index" data-domid="child.dom_id" data-lazy-loaded="draw_chart_url[child.dom_id].lazyload" class="chart J-export-img-elem-chart" ng-class="{\'chart-table\':selected_type === \'C200\',\n                                        \'chart-canvas-table\': selected_type === \'C200\',\n                                        \'chart-map\':selected_type === \'C271\' || selected_type === \'C272\' || selected_type === \'C273\',\n                                        \'chart-funnel overflow-hidden\':selected_type === \'C330\',\n                                        \'show-datalabels\': child.meta.dash_setting.show_datalabels,\n                                        \'hide-total\':!child.meta.dash_setting.show_total}" data-ctid="{{draw_chart_url[child.dom_id].options.ct_id}}"></div>\n                                <div class="loading-wrap" ng-if="item.children[0].meta.type === \'C310\'">\n                                    <div class="loader-inner ball-spin-fade-loader">\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div chart-operate="" data-ct-id="{{child.meta.ct_id}}" class="gridster-no-drag" data-origin="data_screen_edit"></div>\n                        </div>\n                    </div>\n\n                </li>\n            </ul>\n        <div ng-show="showDataScreenGrid" class="data-screen-grid"></div>\n    </div>\n\n</div>\n');
    $templateCache.put('/static/dashboard/tpl/data-screen.html', '<div class="dash-edit-content-view data-screen-wrap data-screen-dashboard-wrap" bindonce="">\n    <div class="dash-title-wrap view-header-wrap">\n        <div class="clearfix dash-title view-header">\n            <h2>{{dashTitle}}</h2>\n            <div class="btn-layer" ng-if="!dashFullscreen && permision.dashEdit && property == 0 && !isThirdIframeMobile.type">\n                <div class="display-inline-block pr">\n                    <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.design" guide-item="design" guide-type="dash_edit" watch-status="personalInfo.dashboard_guide" btn-class="J-dot-design" add-class="\'dot-guide-design\'"></div>\n                    \n                    <a ng-if="!proj_share && !(enterprise_type == 5 || enterprise_type == 6) && permision.dashEdit && property == 0 && !isThirdIframe" ng-click="enterEditScreen()" class="J-design-button J-dot-design">\n                        <i class="bdp-icon ico-edit-layout"></i>\n                        <span class="btn-layer-opt">\n                            <span>\u8BBE\u8BA1</span>\n                            <span class="btn-layer-hover-line"></span>\n                        </span>\n                    </a>\n                </div>\n\n                <a>\n                    <i class="bdp-icon ico-fullscreen-2" ng-click="enterFullScreen()"></i><span class="btn-layer-opt" ng-click="enterFullScreen()">                \n                            \u5168\u5C4F\n                            <span class="btn-layer-hover-line"></span>\n                    </span>\n                    <i class="bdp-icon ico-triangle-down" ng-if="adaptiveFullScreen" ng-click="btn_layer.show_presentation_mode = !btn_layer.show_presentation_mode" click-outside="btn_layer.show_presentation_mode = false" outside-active="btn_layer.show_presentation_mode"></i>\n                    <ul class="dropdown-wrap dash-display-mode-list J_dashboard_presentation" ng-show="btn_layer.show_presentation_mode">\n                        <li class="dropdown-item" ng-click="enterAdaptiveFullScreen()">\n                            <i class="bdp-icon ico-screen-stretch mr4"></i>\n                            <span>\u5168\u5C4F\u62C9\u4F38</span>\n                            <!--<span bo-text="\'\u5168\u5C4F\u62C9\u4F38\'|translate"></span>-->\n                        </li>\n                    </ul>\n                </a>\n\n                <a ng-if="enterprise_type == 11">\n                    <i class="bdp-icon ico-dash-publish" ng-click="publish()"></i>\n                    <span class="btn-layer-opt" ng-click="publish()">                \n                            undefined\n                            <span class="btn-layer-hover-line"></span>\n                    </span>\n                </a>\n\n            </div>\n        </div>\n    </div>\n    <div class="screen-dashboard data-screen-dashboard">\n        <div ng-include="\'./static/dashboard/tpl/data-screen-main.html\'"></div>\n    </div>\n</div>\n\n<div ng-loading-gif="" ng-show="dashLoading"></div>\n');
    $templateCache.put('/static/dashboard/tpl/project-view.html', '<div project-list="" bindonce="" ng-class="{\'role-user\':role==\'user\',\'empty-project-wrap\': noFolders}" class="dash-sidebar J_dash_sidebar"></div>\n<div class="dash-edit-content J_dash_edit_content">\n    <div ui-view="" class="dash-edit-content-view pr">\n        <div class="project-empty" ng-if="noFolders && (!isThirdIframe || isThirdIframe && global.domain != \'rongyi\')" bindonce="">\n            <i class="bdp-icon ico-new-folder ico-no-opacity"></i>\n            <p class="font-text-tip">\u4F60\u5F53\u524D\u6CA1\u6709\u81EA\u5EFA\u7684\u6587\u4EF6\u5939\uFF0C\u8BF7\u5148\u521B\u5EFA</p>\n        </div>\n\n        <div class="project-empty" ng-if="isThirdIframe && global.domain == \'rongyi\'">\n            <img ng-src="/static/images/rongyi_empty_folder.png" ng-if="isThirdIframe">\n            <p class="mt16 text-left">\n                \u5F53\u524D\u8D26\u6237\u5C1A\u672A\u5206\u914D\u6D4F\u89C8\u6570\u636E\u6743\u9650\uFF0C<br>\u8BF7\u8054\u7CFB\u5BB9\u6613\u7F51\u5BA2\u670D\uFF1A 400-040-8989\n            </p>\n        </div>\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/chart-warning/view/chart-warn-config-dialog.html', '<div bindonce="">\n    <div class="ngdialog-title">\n        {{warnConfigData.pageStatus.title}}\n        <span class="ngdialog-sub-title" ng-show="warnConfigData.pageStatus.view == \'list\'">{{warnConfigData.chartBaseInfo.name}}</span>\n    </div>\n    <div class="ngdialog-message">\n        <div chart-warn-task-list="" warn-list="warnConfigData.warnList" warn-config-data="warnConfigData" chart-base-info="warnConfigData.chartBaseInfo" change-view-func="warnConfigFunc.changeView(view, data)" ng-if="warnConfigData.pageStatus.view == \'list\'"></div>\n        <div chart-warn-task-edit="" page-status="warnConfigData.pageStatus" chart-base-info="warnConfigData.chartBaseInfo" warn-info="warnConfigData.editWarnInfo" warn-list="warnConfigData.warnList" field-list="warnConfigData.metaFields" tb-fields="warnConfigData.chartTbFields" toggle-preview-func="warnConfigFunc.togglePreview()" ng-if="[\'edit\',\'add\'].indexOf(warnConfigData.pageStatus.view) >= 0"></div>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'chartWarn\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-show="warnConfigData.pageStatus.view == \'list\'" ng-click="warnConfigFunc.configSave()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-show="warnConfigData.pageStatus.view == \'list\'" ng-click="warnConfigFunc.configCancel()">\u53D6\u6D88</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-show="[\'edit\',\'add\'].indexOf(warnConfigData.pageStatus.view) >= 0" ng-click="warnConfigFunc.editSave()" ng-class="{\'ngdialog-button-disabled\': warnConfigData.pageStatus.subView == \'filter\'}" ng-disabled="warnConfigData.pageStatus.subView == \'filter\'">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-show="[\'edit\',\'add\'].indexOf(warnConfigData.pageStatus.view) >= 0" ng-click="warnConfigFunc.editCancel()" ng-class="{\'ngdialog-button-disabled\': warnConfigData.pageStatus.subView == \'filter\'}" ng-disabled="warnConfigData.pageStatus.subView == \'filter\'">\u53D6\u6D88</button>\n    </div>\n    <div ng-loading-gif="" ng-show="warnConfigData.pageStatus.loading"></div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-warning/view/chart-warn-data-preview.html', '<div class="chart-warn-data-preview-wrap" bindonce="">\n    <div bdp-chart="previewData.draw_chart_url.options" display-mode="edit" data-options="previewData.draw_chart_url.options" data-lazy-loaded="previewData.draw_chart_url.lazyload" is-warn-preview="\'true\'" class="chart J_chart_box chart-table chart-canvas-table"></div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-warning/view/chart-warn-task-edit.html', '<div class="chart-warn-task-edit-wrap J-chart-warn-task-edit-wrap" bindonce="">\n    <span class="preview-opt" ng-show="warnTaskEditData.subView  == \'condition\'">\n        <span></span>\n        <span class="bdp-switch big-size ml4" ng-click="warnTaskEditFunc.togglePreviewFunc()" ng-class="{\'switch-on\': warnTaskEditData.pageStatus.isPreview }">\n            <span class="switch-bg"><span class="switch-btn"></span></span>\n        </span>\n    </span>\n    <div ng-loading-gif="" ng-show="warnTaskEditData.pageLoading"></div>\n    <div class="warn-name-wrap">\n        <span class="font-w-b">\u9884\u8B66\u540D\u79F0</span>\n        <input type="text" class="warn-name-input J-warn-name-input" placeholder="{{\'warn.inputWarnName\'|translate}}" ng-disabled="warnTaskEditData.subView == \'filter\'" ng-model="warnTaskEditData.warnInfo.warn_name">\n    </div>\n    <div class="warn-condition-wrap">\n        <div class="warn-condition-title">\n            <span class="font-w-b"></span>\n            <span class="ml8" ng-if="warnTaskEditData.subView == \'condition\' && warnTaskEditData.warnInfo.warn_condition_list.length > 1">\n                {{warnTaskEditData.tips.conditionTitle[0]}}\n                {{warnTaskEditData.warnInfo.warn_condition_list.length}}\n                {{warnTaskEditData.tips.conditionTitle[1]}}\n                <span class="cr-bdp"> {{warnTaskEditData.tips.conditionTitle[2]}}</span>\n                {{warnTaskEditData.tips.conditionTitle[3]}}\n            </span>\n            <span class="add-condition-opt mr8 cr-bdp text-decoration-underline" ng-click="warnTaskEditFunc.addCondition($event)" ng-if="!!warnTaskEditData.warnInfo.warn_condition_list.length && warnTaskEditData.subView == \'condition\'" ng-disabled="warnTaskEditData.subView == \'filter\'"></span>\n        </div>\n        <div class="warn-condition-list-wrap J-warn-condition-list-wrap" ng-if="warnTaskEditData.subView == \'condition\'">\n            <div class="empty-condition" ng-if="!warnTaskEditData.warnInfo.warn_condition_list.length">\n                <span></span>\uFF0C<span class="add-text cr-bdp text-decoration-underline cursor-pointer" ng-click="warnTaskEditFunc.addCondition($event)"></span>\n            </div>\n            <div class="warn-condition-item cursor-pointer" ng-repeat="condition in warnTaskEditData.warnInfo.warn_condition_list track by $index" ng-click="warnTaskEditFunc.editCondition($event, $index, condition)">\n                <div class="col-wrap">\n                    <div class="col-left">\n                        <span class="inner-text font-w-b"><span></span>{{$index+1}}</span>\n                    </div>\n                    <div class="col-right">\n                        <span class="bdp-icon-wrap cursor-pointer">\n                             <i class="bdp-icon ico-trash" ng-click="warnTaskEditFunc.delCondition($event,$index)" title="{{\'\u5220\u9664\u6761\u4EF6\'|translate}}"></i>\n                        </span>\n                    </div>\n                    <div class="col-center">\n                        <span class="inner-text J-warn-condition-comment">{{condition.comment}}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="warn-filter-list-wrap J-warn-filter-list-wrap" ng-if="warnTaskEditData.subView == \'filter\'">\n            <p class="warn-filter-list-title">\n                {{warnTaskEditData.curCondition.name}}\n                <span class="warn-filter-logic-wrap" ng-if="warnTaskEditData.curCondition.filters.length > 1">\n                    <span class="ml8 font-w-b">\u6EE1\u8DB3\u4E0B\u5217</span>\n                    <label class="cursor-pointer ml8 logic-text">\n                        <input type="radio" checked="checked" value="and" ng-model="warnTaskEditData.curCondition.logic"><span class="ml4">\u5168\u90E8\u6761\u4EF6</span>\n                    </label>\n                    <label class="cursor-pointer ml8 logic-text">\n                        <input type="radio" checked="checked" value="or" ng-model="warnTaskEditData.curCondition.logic"><span class="ml4">\u4EFB\u610F\u6761\u4EF6</span>\n                    </label>\n                </span>\n            </p>\n            <ul class="warn-filter-list J-warn-filter-list">\n                <li ng-repeat="filter in warnTaskEditData.curCondition.filters track by $index">\n                    <div class="filter-field mr4 line-24 vm" select-search-list="" select-data="filter.fidUniqId" search-list="warnTaskEditData.fieldListForFilter" no-search="true" val-change="warnTaskEditFunc.changeFilterField(filter)" mode-type="warnFilterField"></div>\n                    <select class="filter-opt mr4 line-24 vm" ng-change="warnTaskEditFunc.changeFilterOpt(filter)" ng-options="opt.value as opt.name for opt in warnTaskEditData.operatorList[filter.field.field_type]" ng-model="filter.opt">\n                        <option value="" ng-if="filter.opt === \'\' && filter.opt != 0">\u8BF7\u9009\u62E9</option>\n                    </select>\n                    <label class="filter-value-wrap for-string vm mt-2" ng-if="!filter.field.field_type || [8,9].indexOf(filter.opt) >= 0">\n                        <input type="text" class="filter-value disable-input vm" disabled="disabled">\n                    </label>\n                    <!-- \u6587\u672C\u7C7B\u578B\u5B57\u6BB5 -->\n                    <span class="filter-value-wrap for-string vm" ng-if="filter.field.field_type == \'string\'">\n                        <input type="text" class="filter-value" placeholder="{{warnTaskEditData.tips.placeHolder[0]}}" ng-if="[0,1].indexOf(filter.opt) >= 0" ng-model="filter.string.val">\n                        <input type="text" class="filter-value" placeholder="{{warnTaskEditData.tips.placeHolder[1]}}" ng-if="[-1,0,1,8,9].indexOf(filter.opt) < 0" ng-model="filter.string.val">\n                        <div class="filter-value vm mt-2 string-exact-value" ng-if="filter.opt == \'-1\'" multi-select-list-layer="" mode="\'field-item\'" position="\'fixed\'" check-box="true" able-search="true" able-opt-btn="true" able-select-all="true" able-select-only="true" save-data="filter.string.val" val-list="filter.string.range" list-item-api="warnTaskEditFunc.getFieldRange(data)" parent-data="filter"></div>\n                    </span>\n                    <!-- \u6570\u503C\u7C7B\u578B\u5B57\u6BB5 -->\n                    <span class="filter-value-wrap for-number" ng-if="filter.field.field_type == \'number\' && [8,9].indexOf(filter.opt) < 0">\n                        <select ng-model="filter.num.type" class="mr4 vm" ng-if="filter.opt != 12">\n                            <option value="" ng-if="filter.num.type === \'\'">\u8BF7\u9009\u62E9</option>\n                            <option value="0"></option>\n                            <option value="1" ng-if="filter.field.axisType == \'y\'"></option>\n                            <!--\n                            <option value="2" bo-text="\'\u65F6\u5E8F\u9884\u6D4B\' | translate" ng-if="filter.field.time_seires_setting && filter.field.time_seires_setting.enable"></option>\n                            -->\n                        </select>\n                        <div class="number-range-val-wrap" ng-if="filter.num.type == \'0\' && filter.opt == 12">\n                             <input type="number" class="filter-value super-small-input vm mr4" placeholder="{{\'warn.inputVal\'|translate}}" ng-model="filter.num.valRange[0]">\n                             \uFF5E\n                             <input type="number" class="filter-value super-small-input vm ml4" placeholder="{{\'warn.inputVal\'|translate}}" ng-model="filter.num.valRange[1]">\n                        </div>\n                        <input type="text" class="filter-value small-input vm disable-input" disabled="disabled" ng-if="filter.num.type === \'\'">\n                        <input type="number" class="filter-value small-input vm" placeholder="{{\'warn.inputVal\'|translate}}" ng-if="filter.num.type == \'0\' && filter.opt != 12" ng-model="filter.num.val">\n                        <div class="num-match-field-wrap select-search-list-wrap vm" ng-if="filter.num.type == \'1\'" click-outside="filter.showFieldList = false" outside-active="filter.showFieldList">\n                            <div class="num-match-show-name select-search-value pr" ng-click="warnTaskEditFunc.toggleNumMatchLayer( filter );">\n                                <span class="show-name-text nowrap vm default" ng-if="!filter.num.fid">\u8BF7\u9009\u62E9</span>\n                                <span class="show-name-text nowrap vm" ng-if="!!filter.num.fid" title="{{filter.num.showName}}">{{filter.num.showName}}</span>\n                                <i class="bdp-icon ico-triangle-down"></i>\n                            </div>\n                            <ul class="num-match-field-list dropdown-wrap" ng-if="warnTaskEditData.numSubView == \'field\' && filter.showFieldList" click-outside="filter.showFieldList = false" outside-active="filter.showFieldList">\n                                <li class="dropdown-item" ng-repeat="field in warnTaskEditData.tbFields" ng-click="warnTaskEditFunc.chooseNumField(filter, field)">{{field.name}}</li>\n                            </ul>\n                            <ul class="num-match-formula-list dropdown-wrap" ng-if="warnTaskEditData.numSubView == \'formula\' && filter.showFormulaList" click-outside="filter.showFormulaList = false" outside-active="filter.showFormulaList">\n                                <li class="dropdown-item" ng-repeat="formula in warnTaskEditData.formulaList" ng-click="warnTaskEditFunc.chooseNumFormula(filter, formula)" ng-show="formula.show == filter.num.field.data_type || formula.show == \'all\'">{{formula.name}}</li>\n                            </ul>\n                        </div>\n                        <!--\n                        <select class="small-select mr4 vm" ng-model="filter.num.predict" ng-if="filter.num.type == \'2\'">\n                            <option value="0" bo-text="\'\u9884\u6D4B\u503C\' | translate"></option>\n                            <option value="1" bo-text="\'\u4E0A\u7F6E\u4FE1\u533A\u95F4\' | translate" ng-if="filter.field.time_seires_setting && filter.field.time_seires_setting.confidence_interval > 0" ></option>\n                            <option value="2" bo-text="\'\u4E0B\u7F6E\u4FE1\u533A\u95F4\' | translate" ng-if="filter.field.time_seires_setting && filter.field.time_seires_setting.confidence_interval > 0"></option>\n                        </select>\n                        -->\n                    </span>\n                    <span class="filter-icons fr pr">\n                        <i class="bdp-icon ico-plus1 cursor-pointer" ng-click="warnTaskEditFunc.addFilter($event, $index)" title="{{\'\u6DFB\u52A0\u7B5B\u9009\u9879\'|translate}}"></i>\n                        <i class="bdp-icon ico-minus1 cursor-pointer" ng-click="warnTaskEditFunc.delFilter($event, $index)" title="{{\'\u5220\u9664\u7B5B\u9009\u9879\'|translate}}" ng-class="{\'disabled\': warnTaskEditData.curCondition.filters.length == 1}"></i>\n                    </span>\n                </li>\n            </ul>\n            <div class="warn-filter-list-opt">\n                <label class="cursor-pointer fl mt4" ng-if="!!warnTaskEditData.xFirstDate">\n                    <input type="checkbox" ng-model="warnTaskEditData.curCondition.latestDate.checked"> <span></span> {{warnTaskEditData.curCondition.latestDate.name}} <span></span>\n                </label>\n                <button class="bdp-btn bdp-btn-blue2" ng-click="warnTaskEditFunc.saveFilter($event)">\u786E\u5B9A</button>\n                <button class="bdp-btn" ng-click="warnTaskEditFunc.cancelFilter($event)">\u53D6\u6D88</button>\n            </div>\n        </div>\n    </div>\n    <!-- \u9884\u8B66\u65F6\u95F4\u8BBE\u7F6E -->\n    <div class="warn-time-wrap" ng-hide="!warnTaskEditData.warnInfo.warn_condition_list.length">\n        <span class="warn-time-title mr8 line-height-32 display-inline-block vm">\u9884\u8B66\u65F6\u95F4</span>\n        <select class="warn-time-type vm" ng-model="warnTaskEditData.warnInfo.warn_time_type" ng-disabled="warnTaskEditData.subView == \'filter\'" ng-change="warnTaskEditFunc.changeWarnType($event)">\n            <option value="0"></option>\n            <option value="1"></option>\n            <option value="2"></option>\n            <option value="3"></option>\n            <option value="4"></option>\n        </select>\n        <label class="cursor-pointer ml16 vm" ng-if="[\'0\',\'1\',\'2\'].indexOf(warnTaskEditData.warnInfo.warn_time_type) >= 0">\n            <input type="checkbox" ng-disabled="warnTaskEditData.subView == \'filter\'" ng-model="warnTaskEditData.warnInfo.warn_time_setting.weekend"> <span class="ml4"></span>\n        </label>\n        <label class="cursor-pointer ml16 vm" ng-if="[\'0\',\'1\'].indexOf(warnTaskEditData.warnInfo.warn_time_type) >= 0">\n            <input type="checkbox" ng-disabled="warnTaskEditData.subView == \'filter\'" ng-model="warnTaskEditData.warnInfo.warn_time_setting.no_repeat"> <span class="ml4"></span>\n        </label>\n        <span class="cursor-pointer ml16 vm" ng-if="[\'3\'].indexOf(warnTaskEditData.warnInfo.warn_time_type) >= 0">\n            <div class="select-time vm" multi-select-list-layer="" check-box="true" save-data="warnTaskEditData.warnInfo.warn_time_setting.warn_time_for_week" val-list="warnTaskEditData.dayOfWeekList" ng-if="warnTaskEditData.dayOfWeekList" match-with="\'id\'" is-disabled="warnTaskEditData.subView == \'filter\'"></div>\n        </span>\n        <span class="cursor-pointer ml16 vm" ng-if="[\'4\'].indexOf(warnTaskEditData.warnInfo.warn_time_type) >= 0">\n            <div class="select-time vm" multi-select-list-layer="" check-box="true" save-data="warnTaskEditData.warnInfo.warn_time_setting.warn_time_for_month" val-list="warnTaskEditData.dateOfMonthList" ng-if="warnTaskEditData.dateOfMonthList" match-with="\'id\'" is-disabled="warnTaskEditData.subView == \'filter\'"></div>\n        </span>\n        <label class="cursor-pointer ml16 vm pr hour-time-wrap" ng-if="[\'2\',\'3\',\'4\'].indexOf(warnTaskEditData.warnInfo.warn_time_type) >= 0" click-outside="showTimeList = false" outside-active="showTimeList">\n            <input type="text" class="input-time" ng-model="warnTaskEditData.warnInfo.warn_time_setting.warn_time" ui-mask="99:99" ui-options="{clearOnBlur:false}" allow-invalid-value="true" model-view-value="true" ui-mask-placeholder="" ui-mask-placeholder-char="space" ng-disabled="warnTaskEditData.subView == \'filter\'" ng-keyup="checkInputDateKeyup($event, \'time\')" ng-blur="checkInputDate($event, \'time\')">\n            <a class="bdp-icon-wrap" ng-click="showTimeList = !showTimeList;">\n                <i class="bdp-icon ico-triangle-down"></i>\n            </a>\n            <ul class="dropdown-wrap hour-time-list" ng-show="showTimeList">\n                <li class="dropdown-item" ng-repeat="time in dateTimeByHalfHour" ng-click="warnTaskEditData.warnInfo.warn_time_setting.warn_time = time.value;$parent.showTimeList=false;">{{time.label}}</li>\n            </ul>\n        </label>\n    </div>\n    <div chart-warn-data-preview="" ng-if="!!warnTaskEditData.pageStatus.isPreview">\n\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-warning/view/chart-warn-task-list.html', '<div class="chart-warn-task-list-wrap" bindonce="">\n    <div ng-loading-gif="" ng-show="warnTaskListData.pageLoading"></div>\n    <div class="task-list-title">\n        <span></span>\n        <button class="cube-btn-radius btn-primary task-list-opt" ng-click="warnTaskListData.addTask()"></button>\n    </div>\n    <div class="task-list-table-wrap">\n        <p class="empty-list" ng-if="!warnTaskListData.list.length"></p>\n        <table class="bdp-table-a" ng-if="!!warnTaskListData.list.length">\n            <thead>\n                <tr>\n                    <th class="task-item-name"><span class="inner-text"></span></th>\n                    <th class="task-item-status"><span class="inner-text"></span></th>\n                    <th class="task-item-time"><span class="inner-text"></span></th>\n                    <th class="task-item-opt"></th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="taskItem in warnTaskListData.list track by $index">\n                    <td class="task-item-name nowrap" title="{{taskItem.warn_name}}">\n                        <span class="display-inline-block nowrap inner-text">{{taskItem.warn_name}}</span>\n                        <span class="display-inline-block nowrap">\n                        (<span ng-if="warnTaskListData.configData.chartBaseInfo.role_type == taskItem.type">\u672C\u4EBA\u8BBE\u7F6E</span><span ng-if="warnTaskListData.configData.chartBaseInfo.role_type != taskItem.type">\u6765\u81EA\u7BA1\u7406\u5458</span>)\n                        </span>\n                    </td>\n                    <td class="task-item-status">\n                        <span ng-if="!taskItem.switch">--</span>\n                        <span ng-if="!!taskItem.is_trigger && !!taskItem.switch" class="cr-hint"></span>\n                        <span ng-if="!taskItem.is_trigger && !!taskItem.switch"></span>\n                    </td>\n                    <td class="task-item-time">\n                        <span ng-if="!!taskItem.is_trigger && !!taskItem.switch">{{taskItem.last_warn_time}}</span>\n                        <span ng-if="!taskItem.is_trigger || !taskItem.switch">--</span>\n                    </td>\n                    <td class="task-item-opt pr">\n                        <span ng-show="warnTaskListData.configData.chartBaseInfo.role_type == taskItem.type">\n                            <i class="bdp-icon ico-edit mr8 cursor-pointer" ng-click="warnTaskListData.editTask(taskItem)" title="\u7F16\u8F91"></i>\n                            <i class="bdp-icon ico-trash cursor-pointer" ng-click="warnTaskListData.delTask($index, taskItem)" title="\u5220\u9664"></i>\n                        </span>\n                        <span class="task-item-switch bdp-switch big-size" ng-click="warnTaskListData.switchTask(taskItem)" ng-class="{\'switch-on\': taskItem.switch }">\n                            <span class="switch-bg">\n                                <span class="switch-btn"></span>\n                            </span>\n                        </span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-warning/view/chart-warn.html', '<div class="sub-block">\n    <div class="block-header" ng-class="{\'no-margin\':warnModeData.list.length === 0 }">\n        <span>\u9884\u8B66</span>\n        <a class="bdp-icon-wrap hd-icon" ng-click="warnModeData.openConfigDialog()" ng-class="{disabled: isGraftTb}" title="\u8BBE\u7F6E\u9884\u8B66">\n            <i class="bdp-icon ico-edit"></i>\n        </a>\n    </div>\n    <div class="block-body">\n        <ul class="warn">\n            <li class="pr" ng-repeat="warn in warnModeData.list" ng-show="warn.switch" ng-class="{\'cursor-pointer\': !!warn.is_trigger}" id="J-{{warn.warn_id}}" ng-click="warn.showTriggerTip = true" outside-active="warn.showTriggerTip" click-outside="warn.showTriggerTip = false">\n                <i class="bdp-icon ico-warn-icon ico-no-opacity mt2" ng-if="!!warn.is_trigger"></i>\n                <span class="warn-name" title="{{warn.warn_name}}" ng-class="{\'cr-hint\': !!warn.is_trigger}">{{warn.warn_name}}</span>\n                <div class="dropdown-wrap warn-trigger-wrapper" ng-if="!!warn.showTriggerTip && !!warn.triggerInfo" fixed-with-dom="top-left" fixed-scroll-hide="warn.showTriggerTip = false" fixed-pos-offset="[-16,0]">\n                    <p class="warn-trigger-title font-w-b"></p>\n                    <div class="warn-trigger-text line-height-20">{{warn.triggerInfo}}</div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n\n');
    $templateCache.put('/static/chart-edit/views/tpl/chart-edit.html', '<div class="chart-edit-layer" bindonce="">\r\n    <div class="view-header J_view_header">\r\n        <a class="back-btn J-create-chart-ok-button" ng-click="verifyChartArgs()" title="\u5B8C\u6210">\r\n            <i class="bdp-icon ico-back"></i>\r\n        </a>\r\n        <div class="view-header-seperate-line"></div>\r\n        <h2 class="text-left fl view-header-left-name ng-cloak">\u7F16\u8F91\u56FE\u8868</h2>\r\n        <span class="btn-layer">\r\n            <div class="operate-record-wrap J-dot-record-list-field" ng-class="{\'disabled\': chartOperateStackInstance.undoStack.length === 0 && chartOperateStackInstance.redoStack.length === 0}" ng-click="openOperateRecordList = !openOperateRecordList" click-outside="openOperateRecordList = false" outside-active="openOperateRecordList">\r\n                <a class="record-btn">\r\n                    <i class="bdp-icon ico-undo-list no-margin"></i>\r\n                </a>\r\n                <div class="operate-record-dropdown dropdown-wrap" ng-show="openOperateRecordList">\r\n                    <ul class="operate-record-list">\r\n                        <li class="dropdown-item text-center disabled" ng-if="chartOperateStackInstance.undoStack.length === 0"></li>\r\n                        <li class="dropdown-item" ng-repeat="record in chartOperateStackInstance.undoStack | orderBy: \'-order\'" bo-html="record.type | translate | recordFormat: record.typeFormatParams" ng-click="undo($index + 1)"></li>\r\n                    </ul>\r\n                    <div class="operate-wrap clearfix" ng-click="$event.stopPropagation()">\r\n                        <a class="fl" ng-class="{\'disabled\': chartOperateStackInstance.undoStack.length === 0}" ng-click="undo()">\r\n                            <i class="bdp-icon ico-undo no-margin"></i>\r\n                            <span></span>\r\n                        </a>\r\n                        <a class="fl" ng-class="{\'disabled\': chartOperateStackInstance.redoStack.length === 0}" ng-click="redo()">\r\n                            <i class="bdp-icon ico-redo no-margin"></i>\r\n                            <span></span>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <a class="help-btn" ng-click="show_edit_help(this)" ng-show="!isPersonal" title="\u5E2E\u52A9">\r\n                <i class="bdp-icon ico-info-bold no-margin"></i>\r\n            </a>\r\n            <a class="help-btn color-blue text-undeline J-how-create-button" title="\u64CD\u4F5C\u793A\u4F8B" ng-click="show_guide_video()" ng-show="!!isPersonal">\r\n                <i class="bdp-icon ico-play-small"></i>\u64CD\u4F5C\u793A\u4F8B\r\n            </a>\r\n        </span>\r\n    </div>\r\n    <div class="chart-left J_chart_left">\r\n        <div chart-data-info="" sheets-info="dataInfo" class="J_chart_data_info chart-edit-data-info"></div>\r\n        <div class="hd pr hd-field-wrap chart-right-margin J_field_search field-search-cover">\r\n            <ul class="bdp-tab-wrap__sm clearfix pr">\r\n                <li class="bdp-tab-item" ng-class="{\'bdp-tab-active\': fieldArgsList.active === 0}" ng-click="switchFieldAndArgs(0)">\u5B57\u6BB5</li>\r\n                <li class="bdp-tab-item" ng-class="{\'bdp-tab-active\': fieldArgsList.active === 1}" ng-click="switchFieldAndArgs(1)" flash-guide="chartArgsMainGuide" fg-show="guideApi.chartArgsMainGuide">\u53C2\u6570</li>\r\n            </ul>\r\n            <div class="add pr">\r\n                <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.addChartField" guide-item="addChartField" guide-type="chart_edit" watch-status="personalInfo.chart_guide" btn-class="J-dot-add-chart-field" add-class="\'dot-guide-add-chart-field\'"></div>\r\n\r\n                <div class="J-dot-add-chart-field" ng-click="newFieldTypeSelect = !newFieldTypeSelect" click-outside="newFieldTypeSelect = false" outside-active="newFieldTypeSelect">\r\n                    <a class="cursor-pointer bdp-icon-wrap" title="\u6DFB\u52A0\u65B0\u5B57\u6BB5">\r\n                        <i class="bdp-icon ico-plus1"></i>\r\n                    </a>\r\n                    <ul class="field-type-select dropdown-wrap" ng-show="newFieldTypeSelect">\r\n                        <li class="dropdown-item" ng-click="createFieldFormula()">\u6DFB\u52A0\u8BA1\u7B97\u5B57\u6BB5</li>\r\n                        <li class="dropdown-item" ng-click="createFieldGroup()" ng-if="!isGraftTb">\u6DFB\u52A0\u5206\u7EC4\u5B57\u6BB5</li>\r\n                        <li class="dropdown-item pr">\r\n                            <chart-args-create arg-tb-id="tb_id" arg-ct-id="ct_id" arg-field-list="field_list"></chart-args-create>\r\n                        </li>\r\n                        <li class="dropdown-item" ng-click="createFieldByML()" ng-if="permision.newTraining && !isGraftTb">\u4F7F\u7528\u673A\u5668\u6A21\u578B</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="query-box auto" ng-show="fieldArgsList.active === 0">\r\n                <input type="text" class="query-text" ng-input-text="" field-ceiling="" ng-model="query">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="bd chart-right-margin J_field_list mr0" ng-if="fieldArgsList.active === 0">\r\n           \r\n            <ul class="field-list mt8" ng-if="dataInfo.length == 1">\r\n                <li ng-repeat="field in field_list | query_fields:query" ng-class="{\'handler-more\':field.handler_more_show}" ng-mouseenter="field.justshowme = true" ng-mouseleave="field.justshowme = false" title="{{field.name}}">\r\n                    <div ng-click="show_edit = !show_edit" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},onStart:\'dragTbFunc(field)\',onStop:\'stopDragField()\'}" class="title nowrap {{field.data_type}}-title cursor-pointer" ng-class="{\'field-drag-title\': !chartMainMask}">\r\n                        <i ng-if="field.data_type===\'date\'" class="bdp-icon ico-triangle-right" ng-class="{\'ico-triangle-down\':show_edit}"></i>\r\n                        <i class="bdp-icon ico-type-{{field.ico_type}}" ng-class="{\'ico-type-{{field.ico_type}}-orange\':field.formula, \'-ml\': field.made_by_ml && field.formula}"></i>\r\n                        <span class="data-tag" field-set-tooltip="field" tooltip-placement="top-left" ng-if="tbType != \'public\'" ng-class="{\'border-bottom-5182E4\': (field.original_name != field.name || field.remark)}" ng-bind="field.name"></span>\r\n                        <span class="data-tag" ng-if="tbType == \'public\'" ng-bind="field.name"></span>\r\n\r\n                        <span class="field-handler" ng-if="field.formula != \'\' && field.editable  && field.field_type !== \'group\'">\r\n                            <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">\r\n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\r\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\r\n                                    <li ng-if="field.made_by_ml" class="dropdown-item" ml-field="field" ml-field-action="updateFieldMM">\u66F4\u65B0</li>\r\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\r\n                                    <li class="dropdown-item" dependece-list="" field="field" tb-id="tb_id">\u4F9D\u8D56\u5173\u7CFB</li>                                    \r\n                                    <li class="dropdown-item" ng-click="showEnumOrder(field.fid, false, \'source\')" ng-if="field.data_type == \'string\'">\u6392\u5E8F</li>\r\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\r\n                                </ul>\r\n                            </div>\r\n                        </span>\r\n\r\n                        <span ng-if="field.formula != \'\' && field.editable  && field.field_type === \'group\'" class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">\r\n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\r\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\r\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\r\n                                    <li class="dropdown-item" dependece-list="" field="field" tb-id="tb_id">\u4F9D\u8D56\u5173\u7CFB</li>\r\n                                    <li class="dropdown-item" ng-click="showEnumOrder(field.fid ,false, \'source\')" ng-if="field.data_type == \'string\'">\u6392\u5E8F</li>\r\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\r\n                                </ul>\r\n                            </div>\r\n                        </span>\r\n\r\n                        <!-- <span ng-if="field.formula != \'\' && field.editable && field.data_type != \'string\'" class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <span class="bdp-icon-wrap fl" ng-click="modifyField(field)" ng-hide="field.made_by_ml" bo-title="\'edit\' | translate">\r\n                                <i class="bdp-icon ico-edit"></i>\r\n                            </span>\r\n                            <span class="bdp-icon-wrap fr" ng-click="delNewField(field.name,field.fid)" bo-title="\'remove\' | translate">\r\n                                <i class="bdp-icon ico-trash"></i>\r\n                            </span>\r\n                        </span> -->\r\n                        <span class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <span class="bdp-icon-wrap fr" ng-if="field.data_type == \'string\' && field.formula ==\'\'" ng-click="showEnumOrder(field.fid, false, \'source\')" title="\u6392\u5E8F">\r\n                                <i class="bdp-icon ico-config-order hover-show"></i>\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n                    <ul ng-if="field.data_type == \'date\'" ng-show="show_edit" class="date-field ml20">\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'year\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5E74</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'quarter\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5B63</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'month\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u6708</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'week\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5468</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'day\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u65E5</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'hour\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u65F6</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'minute\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5206</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'second\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u79D2</span>\r\n                            </p>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n            \r\n            <ul class="field-list" ng-if="dataInfo.length > 1 && field_list.hasDimension">\r\n                <div style="line-height: 32px">\r\n                    <span>\u7EF4\u5EA6</span>\r\n                    <span class="bdp-icon-wrap fr mt4 cursor-pointer" ng-click="editDimension()">\r\n                        <i class="bdp-icon ico-edit"></i>\r\n                    </span>\r\n                </div>\r\n                <li ng-repeat="field in field_list | filter: {type: \'dimension\'} | query_fields:query" ng-class="{\'handler-more\':field.handler_more_show}" ng-mouseenter="field.justshowme = true" ng-mouseleave="field.justshowme = false" title="{{field.name}}">\r\n                    <div ng-click="show_edit = !show_edit" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragTbFunc(field)\',onStop:\'stopDragField()\'}" class="title nowrap {{field.data_type}}-title field-drag-title cursor-pointer">\r\n                        <i ng-if="field.data_type===\'date\'" class="bdp-icon ico-triangle-right" ng-class="{\'ico-triangle-down\':show_edit}"></i>\r\n                        <i class="bdp-icon ico-type-{{field.ico_type}}" ng-class="{\'ico-type-{{field.ico_type}}-orange\':field.formula, \'-ml\': field.made_by_ml && field.formula}"></i>\r\n                        <span class="data-tag" field-set-tooltip="field" tooltip-placement="top-left" ng-if="tbType != \'public\'" ng-class="{\'border-bottom-5182E4\': (field.original_name != field.name || field.remark)}" ng-bind="field.name"></span>\r\n                        <span class="data-tag" ng-if="tbType == \'public\'" ng-bind="field.name"></span>\r\n                        <span class="field-handler" ng-if="field.formula != \'\' && field.editable && field.data_type == \'string\' && field.field_type !== \'group\'">\r\n                            <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">\r\n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\r\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\r\n                                    <li ng-if="field.made_by_ml" class="dropdown-item" ml-field="field" ml-field-action="updateFieldMM">\u66F4\u65B0</li>\r\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\r\n                                    <li class="dropdown-item" ng-click="showEnumOrder(field.fid, false, \'source\')">\u6392\u5E8F</li>\r\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\r\n                                </ul>\r\n                            </div>\r\n                        </span>\r\n                        <span ng-if="field.formula != \'\' && field.editable && field.data_type == \'string\' && field.field_type === \'group\'" class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">\r\n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\r\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\r\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\r\n                                    <li class="dropdown-item" ng-click="showEnumOrder(field.fid, false, \'source\')">\u6392\u5E8F</li>\r\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\r\n                                </ul>\r\n                            </div>\r\n                        </span>\r\n                        <span ng-if="field.formula != \'\' && field.editable && field.data_type != \'string\' " class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <span class="bdp-icon-wrap fl" ng-click="modifyField(field)" title="\u7F16\u8F91">\r\n                                <i class="bdp-icon ico-edit"></i>\r\n                            </span>\r\n                            <span class="bdp-icon-wrap fr" ng-click="delNewField(field.name,field.fid)" title="\u5220\u9664">\r\n                                <i class="bdp-icon ico-trash"></i>\r\n                            </span>\r\n                        </span>\r\n                        <span class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <span class="bdp-icon-wrap" ng-if="field.data_type == \'string\' && field.formula ==\'\'" ng-click="showEnumOrder(field.fid, false, \'source\')" title="\u6392\u5E8F">\r\n                                <i class="bdp-icon ico-config-order hover-show"></i>\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n                    <ul ng-if="field.data_type == \'date\'" ng-show="show_edit" class="date-field ml20">\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'year\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5E74</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'quarter\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5B63</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'month\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u6708</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'week\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5468</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'day\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u65E5</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'hour\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u65F6</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'minute\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5206</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'second\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u79D2</span>\r\n                            </p>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n            <ul class="field-list" ng-if="dataInfo.length > 1 && field_list.hasMeasure">\r\n                <div style="line-height: 32px">\r\n                    <span>\u6570\u503C</span>\r\n                </div>\r\n                <li ng-repeat="field in field_list | filter: {type: \'measure\'} | query_fields:query" ng-class="{\'handler-more\':field.handler_more_show}" ng-mouseenter="field.justshowme = true" ng-mouseleave="field.justshowme = false" title="{{field.name}}">\r\n                    <div ng-click="show_edit = !show_edit" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragTbFunc(field)\',onStop:\'stopDragField()\'}" class="title nowrap {{field.data_type}}-title field-drag-title cursor-pointer">\r\n                        <i ng-if="field.data_type===\'date\'" class="bdp-icon ico-triangle-right" ng-class="{\'ico-triangle-down\':show_edit}"></i>\r\n                        <i class="bdp-icon ico-type-{{field.ico_type}}" ng-class="{\'ico-type-{{field.ico_type}}-orange\':field.formula, \'-ml\': field.made_by_ml && field.formula}"></i>\r\n                        <span class="data-tag" field-set-tooltip="field" tooltip-placement="top-left" ng-if="tbType != \'public\'" ng-class="{\'border-bottom-5182E4\': (field.original_name != field.name || field.remark)}" ng-bind="field.name"></span>\r\n                        <span class="data-tag" ng-if="tbType == \'public\'" ng-bind="field.name"></span>\r\n                        <span class="field-handler" ng-if="field.formula != \'\' && field.editable && field.data_type == \'string\' && field.field_type !== \'group\'">\r\n                            <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">\r\n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\r\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\r\n                                    <li ng-if="field.made_by_ml" class="dropdown-item" ml-field="field" ml-field-action="updateFieldMM">\u66F4\u65B0</li>\r\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\r\n                                    <li class="dropdown-item" ng-click="showEnumOrder(field.fid, false, \'source\')">\u6392\u5E8F</li>\r\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\r\n                                </ul>\r\n                            </div>\r\n                        </span>\r\n                        <span ng-if="field.formula != \'\' && field.editable && field.data_type == \'string\' && field.field_type === \'group\'" class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">\r\n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\r\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\r\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\r\n                                    <li class="dropdown-item" ng-click="showEnumOrder(field.fid, false, \'source\')">\u6392\u5E8F</li>\r\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\r\n                                </ul>\r\n                            </div>\r\n                        </span>\r\n                        <span ng-if="field.formula != \'\' && field.editable && field.data_type != \'string\'" class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <span class="bdp-icon-wrap fl" ng-click="modifyField(field)" ng-hide="field.param.type == \'ml\'" title="\u7F16\u8F91">\r\n                                <i class="bdp-icon ico-edit"></i>\r\n                            </span>\r\n                            <span class="bdp-icon-wrap fr" ng-click="delNewField(field.name,field.fid)" title="\u5220\u9664">\r\n                                <i class="bdp-icon ico-trash"></i>\r\n                            </span>\r\n                        </span>\r\n                        <span class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <span class="bdp-icon-wrap" ng-if="field.data_type == \'string\' && field.formula ==\'\'" ng-click="showEnumOrder(field.fid, false, \'source\')" title="\u6392\u5E8F">\r\n                                <i class="bdp-icon ico-config-order hover-show"></i>\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n                    <ul ng-if="field.data_type == \'date\'" ng-show="show_edit" class="date-field ml20">\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'year\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5E74</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'quarter\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5B63</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'month\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u6708</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'week\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5468</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'day\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u65E5</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'hour\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u65F6</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'minute\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5206</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'second\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u79D2</span>\r\n                            </p>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class="bd chart-right-margin J_field_list mr0" ng-if="fieldArgsList.active === 1">\r\n            <chart-args-list arg-tb-id="tb_id" arg-ct-id="ct_id" arg-field-list="field_list"></chart-args-list>\r\n        </div>\r\n    </div>\r\n    <!--end chart-left-->\r\n    <a class="toggle-nav drag-btn J-toggle-nav-chart-sidebar chart-sidebar-drag-btn left-bar" resize-width-chart-sidebar="" mode="left" title="\u62D6\u52A8\u8C03\u6574\u5BBD\u5EA6"></a>\r\n    <div class="chart-main">\r\n        <div class="chart-args">\r\n            <!-- \u5C42\u7EA7 -->\r\n            <div ng-show="chart_ops.meta.level_fields.length > 1" class="row axis level" ng-class="{\'multi-axis\':viewMeta.chart_type === \'C250\'}">\r\n                <span class="axis-head">\r\n                    <span class="axis-head-name">\u56FE\u5C42</span>\r\n                </span>\r\n                <div class="drag-target">\r\n                    <!--x\u3001y\u6B63\u5E38\u663E\u793A-->\r\n                    <div class="drag-target-inner" ng-model="level_fields" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'join_field(\\\'drill\\\')\'}">\r\n                        <ul class="drag-target-list drag-target-list-layer J-delete-target-id" ui-sortable="sortAxisDrillField" id="dragDrill" ng-model="chart_ops.meta.level_fields">\r\n                            <li ng-repeat="it in chart_ops.meta.level_fields" class="drag-item drag-level-item J-delete-item-cls" ng-class="{\'active\': $index === drill_level,\'not-drill-item\': $index > drill_level}">\r\n                                <div class="data-tag remove-icon-pr">\r\n                                    <span class="tag ui-select">\r\n                                        <span class="name" ng-click="emitCrumbsClick($index)">\r\n                                            <span class="nowrap nick-name" ng-bind="it.nick_name || it.name"></span>\r\n                                            <i class="inline fl nowrap" ng-if="it.data_type === \'date\'">\r\n                                                ({{it.granularity | granularity}})\r\n                                            </i>\r\n                                        </span>\r\n                                        <i class="bdp-icon ico-delete-small-gray remove-it-icon" ng-click="removeAxisAction($event, \'drill\', it);"></i>\r\n                                    </span>\r\n                                    <i class="bdp-icon ico-level-arrow" ng-hide="$last"></i>\r\n                                </div>\r\n                                <!--end data-tag-->\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- \u7EF4\u5EA6 -->\r\n            <div class="row axis" ng-class="{\'multi-axis\':viewMeta.chart_type === \'C250\'}">\r\n                <span class="axis-head">\r\n                    <span class="axis-head-name">\u7EF4\u5EA6</span>\r\n                    <i class="bdp-icon ico-edit batch-add-axis-btn" ng-click="batchOnDropAdd(\'x\')"></i>\r\n                </span>\r\n                <div class="drag-target">\r\n                    <div class="y_operate" ng-hide="!!viewMeta.compare_axis || viewMeta.chart_type == \'C280\' || viewMeta.chart_type == \'C340\'" ng-click="axisHandle.add(\'compare_axis\')">\r\n                        <i class="bdp-icon ico-handle-compare"></i>\r\n                        <span>\u6DFB\u52A0\u5BF9\u6BD4</span>\r\n                    </div>\r\n                    <!--x\u3001y\u6B63\u5E38\u663E\u793A-->\r\n                    <div class="drag-target-inner xAxis" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'onDropAdd(\\\'x\\\')\'}">\r\n                        <ul class="drag-target-list drag-target-list-dimension J-delete-target-id" id="dragX" ui-sortable="sortAxisField" ng-model="viewMeta.x">\r\n                            <li ng-repeat="it in viewMeta.x" class="drag-item J-delete-item-cls" ng-class="{\'not-sortable\': (viewMeta.chart_type == \'C301\' && chart_ops.meta.level_fields.length > 1) || (viewMeta.chart_type != \'C301\' && chart_ops.meta.level_fields.length > 1 && !$index && it.fid === chart_ops.meta.level_fields[drill_level].fid)}" click-outside="it.show_formula = false" outside-active="it.show_formula" data-jqyoui-options="{appendTo:\'body\', scroll: false,animate:false,greedy:true, accept: \'.field-list .field-drag-title\'}" data-drop="true" data-jqyoui-droppable="{onDrop:\'join_field(\\\'x\\\',$index,it)\'}">\r\n                                <div class="data-tag" ng-class="{\'remove-icon-pr\': !(viewMeta.chart_type == \'C301\' && chart_ops.meta.level_fields.length > 1) && !(viewMeta.chart_type != \'C301\' && chart_ops.meta.level_fields.length > 1 && !$index && it.fid === chart_ops.meta.level_fields[drill_level].fid)}">\r\n                                    <span class="tag ui-select">\r\n                                        <span class="name" ng-mouseover="showFieldTip($event,it)" ng-mouseleave="hideFieldTip($event,it)" ng-click="it.show_formula = !it.show_formula">\r\n                                            <i class="bdp-icon ico-triangle-down1 fl"></i>\r\n                                            <i class="fl bdp-icon ico-sort" ng-if="viewMeta.sort.type !==\'\' && viewMeta.sort.type !== \'custom\' && viewMeta.sort.axis === \'x\' && viewMeta.sort.fid == it.fid && viewMeta.is_advanced_sort == 0 && isSortField({\'field\':it, axis:\'x\'})" ng-class="fieldSortType({index: $index})"></i>\r\n                                            <span class="nowrap" ng-bind="it.name" ng-if="!it.nick_name"></span>\r\n                                            <span class="nowrap nick-name" ng-bind="it.nick_name" ng-if="it.nick_name != undefined && it.nick_name != \'\'"></span>\r\n                                            <i class="inline fl nowrap granularity" ng-if="it.data_type === \'date\'">\r\n                                                ({{it.granularity|granularity}})\r\n                                            </i>\r\n                                            <i class="inline fl nowrap granularity" ng-if="viewMeta.chart_type === \'C200\' && it.data_type === \'string\' && permision.tableImg">\r\n                                                ({{it.data_show_type|dataShowType}})\r\n                                            </i>\r\n                                        </span>\r\n                                        <i class="bdp-icon ico-delete-small remove-it-icon" ng-if="!(viewMeta.chart_type == \'C301\' && chart_ops.meta.level_fields.length > 1) && !(viewMeta.chart_type != \'C301\' && chart_ops.meta.level_fields.length > 1 && !$index && it.fid === chart_ops.meta.level_fields[drill_level].fid)" ng-click="removeAxisAction($event, \'x\', it);"></i>\r\n                                        <div class="data-formula" ng-show="it.show_formula">\r\n                                            <div string-data-show-type="" ng-if="viewMeta.chart_type === \'C200\' && it.data_type === \'string\'" show-table-img="permision.tableImg" tb-id="tb_id" field="it" axis="\'x\'" chart-obj="$bdpChart" save-chart-fun="saveChartImmediate()" field-list="field_list" set-data-show-type="setDataShowType"></div>\r\n                                            <div date-granularity="" ng-if="it.data_type === \'date\'" tb-id="tb_id" field="it" axis="\'x\'" set-granularity="setGranularity"></div>\r\n                                            <div dimension-compare-sort="" axis="x"></div>\r\n                                        </div>\r\n                                    </span>\r\n                                </div>\r\n                                <!--end data-tag-->\r\n                                <div class="field-tip dropdown-wrap">\r\n                                    <span>{{it.name}}</span>\r\n                                </div>\r\n                            </li>\r\n                            <div class="pr display-inline-block" ng-if="enterprise_type == 3 && viewMeta.x && viewMeta.x.length > 0">\r\n                                <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.drillChart" guide-item="drillChart" guide-type="chart_edit" watch-status="personalInfo.chart_guide" btn-class="J-dot-drill-chart" add-class="\'dot-guide-drill-chart\'"></div>\r\n                            </div>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <!--end drag-target-->\r\n            </div>\r\n            <!-- \u5BF9\u6BD4 -->\r\n            <div class="row axis" ng-if="!!viewMeta.compare_axis" ng-class="{\'multi-axis\':viewMeta.chart_type === \'C250\'}">\r\n                <span class="axis-head">\r\n                    <span class="axis-head-name">\u5BF9\u6BD4</span>\r\n                    <i class="bdp-icon ico-edit batch-add-axis-btn" ng-click="batchOnDropAdd(\'compare_axis\')"></i>\r\n                </span>\r\n                <div class="drag-target">\r\n                    <div class="y_operate" ng-click="axisHandle.remove(\'compare_axis\')">\r\n                        <i class="bdp-icon ico-handle-compare"></i>\r\n                        <span>\u79FB\u9664\u5BF9\u6BD4</span>\r\n                    </div>\r\n                    <div class="drag-target-inner yAxis" ng-model="compare_list" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'onDropAdd(\\\'compare_axis\\\')\'}">\r\n                        <ul class="drag-target-list drag-target-list-dimension J-delete-target-id" id="dragCompare_axis" ui-sortable="sortAxisField" ng-model="viewMeta.compare_axis">\r\n                            <li ng-repeat="it in viewMeta.compare_axis track by $index" class="drag-item J-delete-item-cls" click-outside="it.show_formula = false" outside-active="it.show_formula" ng-class="{\'virtual-field\': it.data_type === \'virtual\'}">\r\n                                <div class="virtual-field-hint bdp-tooltip" ng-if="!hasShownVirtualFieldHint && it.data_type === \'virtual\'">\r\n                                    <i class="bdp-icon ico-cancel" ng-click="turnOffVirtualFieldHint();"></i>\r\n                                    <div class="bdp-tooltip-content">\r\n                                        <div class="content">\r\n                                            <p>\u60A8\u53EF\u4EE5\u901A\u8FC7\u62D6\u52A8\u8BE5\u865A\u62DF\u5B57\u6BB5</p>\r\n                                            <p>\u8C03\u6574\u5BF9\u6BD4\u7684\u62C6\u5206\u987A\u5E8F</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="data-tag" ng-class="{\'remove-icon-pr\': !(it.data_type === \'virtual\')}">\r\n                                    <span class="tag ui-select">\r\n                                        <span class="name" ng-click="it.show_formula = !it.show_formula">\r\n                                            <i class="bdp-icon ico-triangle-down1 fl" ng-if="it.data_type != \'virtual\' || (viewMeta.chart_type == \'C200\' && viewMeta.tb_flip)"></i>\r\n                                            <i class="fl bdp-icon ico-sort" ng-if="viewMeta.is_advanced_sort != 1 && it.compare_sort.type !==\'\' && it.compare_sort.type !== \'custom\' && isSortField({\'field\':it, axis:\'compare_axis\', \'index\': $index})" ng-class="fieldSortType({\'axis\': \'compare_axis\', \'index\': $index})"></i>\r\n                                            <span class="nowrap" ng-bind="it.name"></span>\r\n                                            <i class="inline fl nowrap granularity" ng-if="it.data_type === \'date\'">\r\n                                                ({{it.granularity|granularity}})\r\n                                            </i>\r\n                                        </span>\r\n                                        <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeAxisAction($event, \'compare_axis\', it);" ng-if="it.data_type != \'virtual\'"></i>\r\n                                        <div class="data-formula" ng-if="it.data_type != \'virtual\' || (viewMeta.chart_type == \'C200\' && viewMeta.tb_flip)" ng-show="it.show_formula">\r\n                                            <div date-granularity="" ng-if="it.data_type === \'date\'" tb-id="tb_id" field="it" axis="\'compare_axis\'" set-granularity="setGranularity"></div>\r\n                                            <div dimension-compare-sort="" axis="compare_axis"></div>\r\n                                        </div>\r\n                                    </span>\r\n                                </div>\r\n                                <!--end data-tag-->\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <!--drag target inner-->\r\n                </div>\r\n            </div>\r\n            <!-- \u6570\u503C \u666E\u901A \u53CC\u8F74\u5DE6 \u6563\u70B9X -->\r\n            <div class="row axis" ng-class="{\'multi-axis\':viewMeta.chart_type === \'C250\'}">\r\n                <div class="axis-head">\r\n                    <span class="axis-head-name" ng-if="viewMeta.chart_type == \'C280\'">\u6570\u503CX</span>\r\n                    <span class="axis-head-name" ng-if="viewMeta.chart_type !== \'C280\'">\u6570\u503C</span>\r\n                    <i class="bdp-icon ico-edit batch-add-axis-btn" ng-click="batchOnDropAdd(\'y\')" ng-if="!(viewMeta.chart_type === \'C250\') && !(viewMeta.show_y_axis_optional)"></i>\r\n                    <div class="axis-type" ng-if="viewMeta.chart_type === \'C250\'" double-yaxis-chart-type="" chart-ops="chart_ops" type="0" drill-level="drill_level" save="saveChartImmediate" warn-setting="warnSetting"></div>\r\n                </div>\r\n                <div class="drag-target">\r\n                    <div class="y_operate" ng-hide="viewMeta.show_y_axis_optional || viewMeta.chart_type == \'C280\'">\r\n                        <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.biaxialDiagram" guide-item="biaxialDiagram" guide-type="chart_edit" watch-status="personalInfo.chart_guide" btn-class="J-dot-biaxial-diagram" add-class="\'dot-guide-biaxial-diagram\'"></div>\r\n                        <div class="J-dot-biaxial-diagram" ng-click="axisHandle.add(\'y_optional\')">\r\n                            <i class="bdp-icon ico-handle-yaxis"></i>\r\n                            <span>\u6DFB\u52A0\u6B21\u8F74</span>\r\n                        </div>\r\n                    </div>\r\n                    <!--x\u3001y\u6B63\u5E38\u663E\u793A-->\r\n                    <div class="drag-target-inner yAxis" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'onDropAdd(\\\'y\\\')\'}">\r\n                        <ul class="drag-target-list drag-target-list-dimension pr J-delete-target-id" id="dragY" ui-sortable="sortAxisField" ng-class="{\'not-sortable\':viewMeta.chart_type == \'C280\'}" ng-model="viewMeta.y">\r\n                            <li ng-repeat="it in viewMeta.y" class="drag-item J-delete-item-cls" click-outside="it.show_formula = false" outside-active="it.show_formula" ng-class="{\'virtual-field\': it.data_type === \'virtual\', \'not-sortable\': it.data_type === \'virtual\'}">\r\n                                <div class="data-tag" ng-class="{\'remove-icon-pr\': !(it.data_type === \'virtual\')}">\r\n                                    <span class="tag ui-select">\r\n                                        <span class="name" ng-click="showFormula(it)" ng-mouseover="showFieldTip($event,it)" ng-mouseleave="hideFieldTip($event,it)">\r\n                                            <i class="bdp-icon ico-triangle-down1 fl"></i>\r\n                                            <i class="fl bdp-icon ico-filter-white" ng-if="it.post_filter && it.post_filter.enabled != 0"></i>\r\n                                            <i class="fl bdp-icon ico-sort" ng-if="viewMeta.is_advanced_sort == 0 && isSortField({\'field\':it, axis:\'y\'}) && viewMeta.sort.axis === \'y\'" ng-class="fieldSortType()"></i>\r\n                                            <span class="nowrap nick-name" ng-bind="it.nick_name" ng-if="it.nick_name != undefined && it.nick_name != \'\'"></span>\r\n                                            <span class="nowrap" title="" ng-bind="it.name" ng-if="!it.nick_name"></span>\r\n                                            <i data-total="it.aggregator" ng-if="it.aggregator != undefined && !it.nick_name" class="inline fl aggr-name nowrap" title="">{{setAdvanceAggregatorName(it)}}</i>\r\n                                        </span>\r\n                                        <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeAxisAction($event, \'y\', it);" ng-if="!(it.data_type === \'virtual\')"></i>\r\n                                        <div class="data-formula" ng-show="it.show_formula" field-formula="{data_type:it.data_type}"></div>\r\n                                    </span>\r\n                                </div>\r\n                                <!--end data-tag-->\r\n                                <div class="field-tip dropdown-wrap" ng-if="(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\')">\r\n                                    <span>{{it.name}}{{setAdvanceAggregatorName(it)}}</span>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <!--drag target inner-->\r\n                </div>\r\n            </div>\r\n            <!-- \u6570\u503C \u53CC\u8F74\u53F3 -->\r\n            <div class="row axis" ng-if="viewMeta.show_y_axis_optional" ng-class="{\'multi-axis\':viewMeta.chart_type === \'C250\'}">\r\n                <div class="axis-head">\r\n                    <span class="axis-head-name">\u6570\u503C</span>\r\n                    <div class="axis-type" ng-if="viewMeta.chart_type === \'C250\'" double-yaxis-chart-type="" chart-ops="chart_ops" type="1" drill-level="drill_level" save="saveChartImmediate" warn-setting="warnSetting"></div>\r\n                </div>\r\n                <div class="drag-target">\r\n                    <div class="y_operate" ng-show="viewMeta.show_y_axis_optional" ng-click="axisHandle.remove(\'y_optional\')">\r\n                        <i class="bdp-icon ico-handle-yaxis"></i>\r\n                        <span>\u79FB\u9664\u6B21\u8F74</span>\r\n                    </div>\r\n                    <!--x\u3001y\u6B63\u5E38\u663E\u793A-->\r\n                    <div class="drag-target">\r\n                        <div class="drag-target-inner yAxis" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'onDropAdd(\\\'y_optional\\\')\'}">\r\n                            <ul class="drag-target-list drag-target-list-dimension J-delete-target-id" id="dragY_optional" ui-sortable="sortAxisField" ng-model="viewMeta.y_optional">\r\n                                <li ng-repeat="it in viewMeta.y_optional" class="drag-item J-delete-item-cls" ng-init="it.show_formula = false" click-outside="it.show_formula = false" outside-active="it.show_formula">\r\n                                    <div class="data-tag remove-icon-pr">\r\n                                        <span class="tag ui-select">\r\n                                            <span class="name" ng-click="showFormula(it)" ng-mouseover="showFieldTip($event,it)" ng-mouseleave="hideFieldTip($event,it)">\r\n                                                <i class="bdp-icon ico-triangle-down1 fl"></i>\r\n                                                <i class="fl bdp-icon ico-filter-white" ng-if="it.post_filter && it.post_filter.enabled != 0"></i>\r\n                                                <i class="fl bdp-icon ico-sort" ng-if="isSortField({\'field\':it, axis:\'y_optional\'}) && viewMeta.sort.axis === \'y\'" ng-class="fieldSortType()"></i>\r\n                                                <span class="nowrap" ng-bind="it.nick_name" ng-if="!!it.nick_name"></span>\r\n                                                <span class="nowrap" title="" ng-bind="it.name" ng-if="!it.nick_name"></span>\r\n                                                <i ng-if="it.aggregator != undefined && !it.nick_name" class="inline fl nowrap aggr-name" title="">{{setAdvanceAggregatorName(it)}}</i>\r\n                                            </span>\r\n                                            <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeAxisAction($event, \'y_optional\', it);"></i>\r\n                                            <div class="data-formula" ng-show="it.show_formula" field-formula="{data_type:it.data_type,yAxis:\'y_optional\'}"></div>\r\n                                        </span>\r\n                                    </div>\r\n                                    <!--end data-tag-->\r\n                                    <div class="field-tip dropdown-wrap" ng-if="(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\')">\r\n                                        <span>{{it.name}}{{setAdvanceAggregatorName(it)}}</span>\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <!--drag target inner-->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- \u6570\u503C \u6563\u70B9Y -->\r\n            <div class="row axis" ng-if="viewMeta.chart_type == \'C280\'">\r\n                <div class="axis-head">\r\n                    <span class="axis-head-name">\u6570\u503CY</span>\r\n                </div>\r\n                <div class="drag-target">\r\n                    <div class="drag-target-inner yAxis" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'onDropAdd(\\\'y_scatter\\\')\'}">\r\n                        <ul class="drag-target-list drag-target-list-dimension not-sortable J-delete-target-id" id="dragY_scatter" ui-sortable="sortAxisField" ng-model="viewMeta.y_scatter">\r\n                            <li ng-repeat="it in viewMeta.y_scatter" class="drag-item J-delete-item-cls" click-outside="it.show_formula = false" outside-active="it.show_formula">\r\n                                <div class="data-tag remove-icon-pr">\r\n                                    <span class="tag ui-select">\r\n                                        <span class="name" ng-click="showFormula(it)" ng-mouseover="showFieldTip($event,it)" ng-mouseleave="hideFieldTip($event,it)">\r\n                                            <i class="bdp-icon ico-triangle-down1 fl"></i>\r\n                                            <i class="fl bdp-icon ico-filter-white" ng-if="it.post_filter && it.post_filter.enabled != 0"></i>\r\n                                            <span class="nowrap" ng-bind="it.nick_name" ng-if="!!it.nick_name"></span>\r\n                                            <span class="nowrap" title="" ng-bind="it.name" ng-if="!it.nick_name"></span>\r\n                                            <i ng-if="it.aggregator != undefined && !it.nick_name" class="inline fl aggr-name nowrap" title="">{{setAdvanceAggregatorName(it)}}</i>\r\n                                        </span>\r\n                                        <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeAxisAction($event, \'y_scatter\', it);"></i>\r\n                                        <div class="data-formula" ng-show="it.show_formula" field-formula="{data_type:it.data_type, yAxis: \'y_scatter\'}"></div>\r\n                                    </span>\r\n                                </div>\r\n                                <!--end data-tag-->\r\n                                <div class="field-tip dropdown-wrap">\r\n                                    <span>{{it.name}}{{setAdvanceAggregatorName(it)}}</span>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <!--drag target inner-->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--end chart args-->\r\n        <div class="chart-left-side" ng-class="{\'hide-color-setting\': !canSetColor(viewMeta.chart_type)}">\r\n            <div chart-filter=""></div>\r\n            <div class="color-setting-layer" chart-color-setting="" ng-show="canSetColor(viewMeta.chart_type)" ng-if="!([\'C280\', \'C281\', \'C273\', \'C300\', \'C301\'].indexOf(viewMeta.chart_type) > -1 || canSetOverlapSize(viewMeta.chart_type, viewMeta.overlapMode))"></div>\r\n            <div class="scatter-bubble-layer" ng-if="viewMeta.chart_type == \'C280\' || viewMeta.chart_type == \'C273\' || canSetOverlapSize(viewMeta.chart_type, viewMeta.overlapMode)">\r\n                <hr class="split">\r\n                <div class="tab-hd clearfix">\r\n                    <a class="tab-hd-item" ng-click="tab.index = 0" ng-class="{active : tab.index == 0}">\u989C\u8272</a>\r\n                    <a class="tab-hd-item" ng-click="tab.index = 1" ng-class="{active : tab.index == 1}">\u5C3A\u5BF8</a>\r\n                </div>\r\n                <div class="tab-bd">\r\n                    <div class="tab-scatter-color" chart-color-setting="" ng-show="tab.index == 0"></div>\r\n                    <div class="tab-scatter-bubble" ng-if="!canSetOverlapSize(viewMeta.chart_type, viewMeta.overlapMode)" bubble-size="" ng-show="tab.index == 1"></div>\r\n                    <div class="tab-scatter-bubble" ng-if="canSetOverlapSize(viewMeta.chart_type, viewMeta.overlapMode)" overlap-size="" ng-show="tab.index == 1"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a class="toggle-nav drag-btn" resize-width-filter-list="" title="\u62D6\u52A8\u8C03\u6574\u5BBD\u5EA6"></a>\r\n        <div id="chartBox">\r\n            <div chart-info-summary="" class="cursor-pointer chart-info-summary-icon">\r\n                <i class="bdp-icon ico-info-sign"></i>\r\n                <div class="dropdown-wrap chart-info-summary">\r\n                    <em class="arrow-up"></em>\r\n                    <div class="summary-content-wrap">\r\n                        <table class="chart-info-summary-content">\r\n                            <ul>\r\n                                <li class="label nowrap">\u6570\u636E\u66F4\u65B0</li>\r\n                                <li class="text">{{tb_update_time | date:\'yyyy-MM-dd HH:mm:ss\'}}</li>\r\n                            </ul>\r\n                            <ul ng-repeat="y in yAxis" ng-if="y.description">\r\n                                <li class="label nowrap">{{y.nick_name || y.name}}</li>\r\n                                <li class="text">{{y.description}}</li>\r\n                            </ul>\r\n                            <ul ng-repeat="x in xAxis" ng-if="x.description">\r\n                                <li class="label nowrap">{{x.nick_name || x.name}}</li>\r\n                                <li class="text">{{x.description}}</li>\r\n                            </ul>\r\n                            <ul ng-if="description">\r\n                                <li class="label nowrap">\u56FE\u8868\u5907\u6CE8</li>\r\n                                <li class="text">{{description}}</li>\r\n                            </ul>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div chart-inner-filter="" chartid="chartid" class="clearfix"></div>\r\n\r\n            <advance-sort chart-options="draw_chart_url.options" chart-meta="viewMeta" drill-level="drill_level" bdp-chart-obj="$bdpChart" save-chart-fun="saveChartImmediate()" is-graft-tb="isGraftTb" chart-mode="edit"></advance-sort>\r\n\r\n            <a href="javascript:;" class="table-flip" ng-if="selected_type === \'C200\'" title="{{ \'chart.tableFlip\' | translate}}">\r\n                <i class="bdp-icon" ng-class="{\'ico-flip-ccw\':viewMeta.tb_flip,\'ico-flip-cw\':!viewMeta.tb_flip}"></i>\r\n            </a>\r\n            <a href="javascript:;" style="display: none" ng-click="revertSelection()" class="bdp-icon-wrap revert-selection J-revert-selection" ng-if="chartConfig.canSetSelectionAnalysis" title="\u53D6\u6D88\u805A\u7126/\u6392\u9664">\r\n                <i class="bdp-icon ico-revert-selection"></i>\r\n            </a>\r\n            <div class="drill-crumbs-wrap"></div>\r\n            <div bdp-chart="draw_chart_url.options" display-mode="edit" data-options="draw_chart_url.options" data-lazy-loaded="draw_chart_url.lazyload" class="chart J_chart_box" ng-class="{\r\n                    \'cursor-crosshair\': inAddingMarkPoint,\r\n                    \'chart-table\':selected_type === \'C200\',\r\n                    \'chart-canvas-table\': selected_type === \'C200\',\r\n                    \'chart-funnel overflow-hidden\':selected_type === \'C330\',\r\n                    \'show-datalabels\': viewMeta.show_datalabels == true\r\n                }"></div>\r\n        </div>\r\n        <div class="chart-main-mask" ng-if="chartMainMask"></div>\r\n    </div>\r\n    <a class="toggle-nav drag-btn J-toggle-nav-chart-sidebar chart-sidebar-drag-btn right-bar" resize-width-chart-sidebar="" mode="right" title="\u62D6\u52A8\u8C03\u6574\u5BBD\u5EA6"></a>\r\n    <!--end chart-main-->\r\n    <div class="J-chart-right" chart-config=""></div>\r\n    <!--end chart-right-->\r\n    <div class="chart-type-tip">\r\n        <em class="arrow"></em>\r\n        <p class="chart-type-name">{{chartTypeConfigMesg.name}}</p>\r\n        <p ng-if="true">\r\n            <span>{{chartTypeConfigMesg.showDimension}}</span>\r\n            <span ng-if="chartTypeConfigMesg.dimension == \'only0\' || chartTypeConfigMesg.dimension == \'onlyOne\' || chartTypeConfigMesg.dimension == \'0orOne\'">\u7EF4\u5EA6</span>\r\n            <span ng-if="chartTypeConfigMesg.dimension != \'only0\' && chartTypeConfigMesg.dimension != \'onlyOne\' && chartTypeConfigMesg.dimension != \'0orOne\'">\u7EF4\u5EA6</span>\r\n            <span ng-if="chartTypeConfigMesg.type === \'C271\' || chartTypeConfigMesg.type === \'C272\' || chartTypeConfigMesg.type === \'C273\'">(\r\n                <span>\u884C\u653F\u533A\u5B57\u6BB5</span>)</span>\r\n            <span ng-if="chartTypeConfigMesg.needComparison">(\r\n                <span>\u652F\u6301\u5BF9\u6BD4</span>)</span>\r\n        </p>\r\n        <p ng-if="chartTypeConfigMesg.showCombination.length == 0">\r\n            <span>{{chartTypeConfigMesg.showMetric}}</span>\r\n            <span>\u6570\u503C</span>\r\n        </p>\r\n        <p ng-if="chartTypeConfigMesg.showCombination.length > 0">{{chartTypeConfigMesg.showCombination[0]}}\r\n            <span ng-if="chartTypeConfigMesg.needComparison">(\r\n                <span>\u652F\u6301\u5BF9\u6BD4</span>)</span>\r\n        </p>\r\n        <p ng-if="chartTypeConfigMesg.showCombination.length > 0">{{chartTypeConfigMesg.showCombination[1]}}</p>\r\n        <p ng-if="[\'C300\', \'C301\', \'C340\'].indexOf(chartTypeConfigMesg.type) > -1 && isGraftTb">\u76F4\u8FDE\u6570\u636E\u8868\u65E0\u6CD5\u4F7F\u7528\u8BE5\u529F\u80FD\uFF0C\u4F7F\u7528\u6570\u636E\u6E90\u52A0\u901F\uFF08\u540C\u6B65\uFF09\u540E\u4F7F\u7528</p>\r\n    </div>\r\n    <div class="guide guide-chart-edit" ng-show="show_chart_edit_guide">\r\n        <div class="guide-switch-ds">\r\n            <div class="guide-opacity-bg"></div>\r\n            <div class="guide-tip">\r\n                <em class="arrow arrow-up"></em>\r\n                <span>\u4FEE\u6539\u6570\u636E\u6E90</span>\r\n            </div>\r\n        </div>\r\n        <div class="guide-chart-field">\r\n            <div class="guide-opacity-bg"></div>\r\n            <div class="guide-tip">\r\n                <em class="arrow arrow-down"></em>\r\n                <span>\u5B57\u6BB5\u5217\u8868</span>\r\n            </div>\r\n        </div>\r\n        <div class="guide-chart-axis">\r\n            <div class="guide-opacity-bg"></div>\r\n            <div class="guide-tip">\r\n                <em class="arrow arrow-down"></em>\r\n                <span>\u9F20\u6807\u62D6\u62FD\u5B57\u6BB5\u8F7B\u677E\u5B9A\u4E49\u5143\u6570\u636E</span>\r\n            </div>\r\n        </div>\r\n        <div class="guide-chart-title">\r\n            <div class="guide-opacity-bg"></div>\r\n            <div class="guide-tip">\r\n                <em class="arrow arrow-down"></em>\r\n                <span>\u4FEE\u6539\u56FE\u8868\u540D\u79F0</span>\r\n            </div>\r\n        </div>\r\n        <div class="guide-chart-filter">\r\n            <div class="guide-opacity-bg"></div>\r\n            <div class="guide-tip">\r\n                <em class="arrow arrow-down"></em>\r\n                <span>\u589E\u52A0\u7B5B\u9009\u5668</span>\r\n            </div>\r\n        </div>\r\n        <div class="guide-switch-type">\r\n            <div class="guide-opacity-bg"></div>\r\n            <div class="guide-tip">\r\n                <em class="arrow arrow-right"></em>\r\n                <span>\u5404\u7C7B\u56FE\u8868\u7C7B\u578B\u968F\u610F\u5207\u6362</span>\r\n            </div>\r\n        </div>\r\n        <div class="guide-chart-setting">\r\n            <div class="guide-opacity-bg"></div>\r\n            <div class="guide-tip">\r\n                <em class="arrow arrow-right"></em>\r\n                <span>\u81EA\u5B9A\u4E49\u56FE\u8868\u914D\u7F6E\u9879</span>\r\n            </div>\r\n        </div>\r\n        <div class="guide-draw-chart">\r\n            <div class="guide-opacity-bg"></div>\r\n            <div class="guide-tip">\u53EF\u89C6\u5316\u56FE\u8868\u81EA\u52A8\u751F\u6210</div>\r\n        </div>\r\n    </div>\r\n    <div class="guide guide-add-to-axis" ng-if="add_to_axis_guide">\r\n        <div class="guide-opacity-bg"></div>\r\n        <div class="guide-tip">\r\n            <em class="arrow arrow-down"></em>\r\n            <span>\u62D6\u52A8\u5DE6\u4FA7\u5B57\u6BB5\u5230\u6B64\u5904\u751F\u6210\u56FE\u8868</span>\r\n        </div>\r\n    </div>\r\n    <div class="guide guide-select-chart-type" ng-if="select_chart_type_guide">\r\n        <div class="guide-opacity-bg"></div>\r\n        <div class="guide-tip">\r\n            <em class="arrow arrow-up"></em>\r\n            <span>\u9009\u62E9\u56FE\u8868\u7C7B\u578B</span>\r\n        </div>\r\n    </div>\r\n    <div class="add-point-mask" ng-if="inAddingMarkPoint">\r\n        <div class="mask-left mask"></div>\r\n        <div class="mask-top mask">\r\n            <div>\u8BF7\u70B9\u51FB\u4E0B\u65B9\u6570\u636E\u9879\u6DFB\u52A0\u6807\u6CE8</div>\r\n        </div>\r\n        <div class="mask-right mask"></div>\r\n    </div>\r\n</div>\r\n<div class="guide-video" ng-show="showGuideVideo" bindonce="">\r\n    <div class="video-wrap J-guide-video slow-in">\r\n        <span class="video-close bdp-icon" ng-click="close_guide_video()" title="\u5173\u95ED">\r\n            <i class="bdp-icon ico-cancel-white"></i>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n<div class="hz-tip error hidden" id="dataOver">\r\n    <span></span>\r\n</div>\r\n\r\n<div ng-loading-gif="" ng-show="chartContentLoading"></div>');
    $templateCache.put('/static/chart-edit/views/tpl/custom-chart-edit.html', '<div class="chart-edit-layer custom-edit-mode {{\'show-\' + curView + \'-view\'}}" bindonce="">\r\n    <div class="view-header J_view_header">\r\n        <a class="back-btn J-create-chart-ok-button" ng-click="verifyChartArgs()" title="\u5B8C\u6210">\r\n            <i class="bdp-icon ico-back"></i>\r\n        </a>\r\n        <div class="view-header-seperate-line"></div>\r\n        <h2 class="text-left view-header-left-name ng-cloak">\u7F16\u8F91\u56FE\u8868</h2>\r\n        <div class="tab-nav">\r\n            <span ng-click="changeView(\'data\')" ng-class="{active: curView !== \'develop\'}">\u6570\u636E\u89C6\u56FE</span>\r\n            <span ng-click="changeView(\'develop\')" ng-class="{active: curView === \'develop\'}">\u56FE\u8868\u89C6\u56FE</span>\r\n        </div>\r\n        <!-- \u662F\u5426\u662F\u5F00\u53D1\u57DF\u7684\u5F00\u53D1\u8005\u8D26\u53F7 -->\r\n        <div class="dev-buttons" ng-class="{\'personal-dev-buttons\': !!permision.personalSetIcon}">\r\n            <div class="no-dev" ng-if="permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage">\r\n                <a class="switch-chart-type" ng-click="switchChartType()"><i class="bdp-icon ico-switch-chart-type"></i>{{ "chart.switchChartType" | translate}}</a>\r\n                <a class="bdp-btn-radius bdp-btn-green btn-run-code" ng-click="customChartOfStoreRunCode()">{{ "run" | translate}}</a>\r\n                <!-- <a\r\n                    ng-if="permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage"\r\n                    class="bdp-btn-radius bdp-btn-blue2 btn-save-code"\r\n                    ng-click="saveCode()"\r\n                    bo-text="\'save\'|translate"></a> -->\r\n            </div>\r\n            <a ng-if="permision.enterpriseType === 7" class="bdp-btn-radius bdp-btn-blue2" ng-click="publishChartTemplate()">{{ "chart.publish" | translate }}</a>\r\n            <a ng-if="permision.enterpriseType === 7 && permision.cty_id" class="bdp-btn-radius bdp-btn-blue2" ng-click="cancelPublishChartTemplate()">{{ "chart.cancelPublish" | translate }}</a>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="panel-data">\r\n        <div class="chart-left J_chart_left">\r\n        <div custom-chart-data-info="" class="J_chart_data_info"></div>\r\n        <hr class="split">\r\n        <div class="hd pr hd-field-wrap chart-right-margin J_field_search field-search-cover" ng-show="currentView">\r\n            <p class="hd-field-tip">\u5B57\u6BB5</p>\r\n            <div class="query-box auto no-margin">\r\n                <input type="text" class="query-text" ng-input-text="" field-ceiling="" ng-model="query">\r\n            </div>\r\n            <div class="add pr">\r\n                <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.addChartField" guide-item="addChartField" guide-type="chart_edit" watch-status="personalInfo.chart_guide" btn-class="J-dot-add-chart-field" add-class="\'dot-guide-add-chart-field\'"></div>\r\n                \r\n                <div class="J-dot-add-chart-field" ng-click="newFieldTypeSelect = !newFieldTypeSelect" click-outside="newFieldTypeSelect = false" outside-active="newFieldTypeSelect">\r\n                    <a class="cursor-pointer bdp-icon-wrap" title="\u6DFB\u52A0\u65B0\u5B57\u6BB5">\r\n                        <i class="bdp-icon ico-plus1"></i>\r\n                    </a>\r\n                    <ul class="field-type-select dropdown-wrap" ng-show="newFieldTypeSelect">\r\n                        <li class="dropdown-item" ng-click="createFieldFormula()">\u6DFB\u52A0\u8BA1\u7B97\u5B57\u6BB5</li>\r\n                        <li class="dropdown-item" ng-click="createFieldGroup()">\u6DFB\u52A0\u5206\u7EC4\u5B57\u6BB5</li>\r\n                        <li class="dropdown-item" ng-click="createFieldByML()" ng-if="permision.newTraining">\u4F7F\u7528\u673A\u5668\u6A21\u578B</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="bd chart-right-margin J_field_list" ng-show="currentView">\r\n            <ul class="field-list">\r\n                <li ng-repeat="field in field_list | query_fields:query" ng-class="{\'handler-more\':field.handler_more_show}" ng-mouseenter="field.justshowme = true" ng-mouseleave="field.justshowme = false" title="{{field.name}}">\r\n                    <div ng-click="show_edit = !show_edit" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},onStart:\'dragTbFunc(field)\',onStop:\'stopDragField()\'}" class="title nowrap {{field.data_type}}-title cursor-pointer" ng-class="{\'field-drag-title\': !chartMainMask}">\r\n                        <i ng-if="field.data_type===\'date\'" class="bdp-icon ico-triangle-right" ng-class="{\'ico-triangle-down\':show_edit}"></i>\r\n                        <i class="bdp-icon ico-type-{{field.ico_type}}" ng-class="{\'ico-type-{{field.ico_type}}-orange\':field.formula, \'-ml\': field.made_by_ml && field.formula}"></i>\r\n                        <span class="data-tag" field-set-tooltip="field" tooltip-placement="top-left" ng-if="tbType != \'public\'" ng-class="{\'border-bottom-5182E4\': (field.original_name != field.name || field.remark)}" ng-bind="field.name"></span>\r\n                        <span class="data-tag" ng-if="tbType == \'public\'" ng-bind="field.name"></span>\r\n                        \r\n                        <span class="field-handler display-block" ng-if="field.formula != \'\' && field.editable  && field.field_type !== \'group\'">\r\n                            <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">\r\n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\r\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\r\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\r\n                                    <li class="dropdown-item" dependece-list="" field="field" tb-id="currentView.tb_id">\u4F9D\u8D56\u5173\u7CFB</li>                                                                        \r\n                                    <li class="dropdown-item" ng-click="showEnumOrder(field.fid, false, \'source\')" ng-if="field.data_type == \'string\'">\u6392\u5E8F</li>\r\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\r\n                                </ul>\r\n                            </div>\r\n                        </span>\r\n\r\n                        <span ng-if="field.formula != \'\' && field.editable  && field.field_type === \'group\'" class="field-handler hover-show display-block" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">\r\n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\r\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\r\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\r\n                                    <li class="dropdown-item" dependece-list="" field="field" tb-id="currentView.tb_id">\u4F9D\u8D56\u5173\u7CFB</li>                                                                                                            \r\n                                    <li class="dropdown-item" ng-click="showEnumOrder(field.fid ,false, \'source\')" ng-if="field.data_type == \'string\'">\u6392\u5E8F</li>\r\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\r\n                                </ul>\r\n                            </div>\r\n                        </span>\r\n\r\n                        <!-- <span ng-if="field.formula != \'\' && field.editable && field.data_type != \'string\'" class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <span class="bdp-icon-wrap fl" ng-click="modifyField(field)" ng-hide="field.made_by_ml" bo-title="\'edit\' | translate">\r\n                                <i class="bdp-icon ico-edit"></i>\r\n                            </span>\r\n                            <span class="bdp-icon-wrap fr" ng-click="delNewField(field.name,field.fid)" bo-title="\'remove\' | translate">\r\n                                <i class="bdp-icon ico-trash"></i>\r\n                            </span>\r\n                        </span> -->\r\n                        <span class="field-handler hover-show" ng-hide="guide == 2 && enterprise_type == 3">\r\n                            <span class="bdp-icon-wrap fr" ng-if="field.data_type == \'string\' && field.formula ==\'\'" ng-click="showEnumOrder(field.fid, false, \'source\')" title="\u6392\u5E8F">\r\n                                <i class="bdp-icon ico-config-order hover-show"></i>\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n                    <ul ng-if="field.data_type == \'date\'" ng-show="show_edit" class="date-field ml20">\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'year\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5E74</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'quarter\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5B63</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'month\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u6708</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'week\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5468</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'day\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u65E5</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'hour\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u65F6</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'minute\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u5206</span>\r\n                            </p>\r\n                        </li>\r\n                        <li class="cursor-pointer">\r\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\', scroll: false}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'second\\\')\',onStop:\'stopDragField()\'}">\r\n                                <i class="bdp-icon ico-type-3"></i>\r\n                                <span>\u79D2</span>\r\n                            </p>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        </div>\r\n        <a class="toggle-nav drag-btn J-toggle-nav-chart-sidebar chart-sidebar-drag-btn" resize-width-fields-list="" title="\u62D6\u52A8\u8C03\u6574\u5BBD\u5EA6"></a>\r\n        <div class="chart-main">\r\n        <div class="chart-args">\r\n            <!-- \u7EF4\u5EA6 -->\r\n            <div class="row axis" ng-class="{\'multi-axis\':viewMeta.chart_type === \'C250\'}">\r\n                <span class="fl axis-head">\r\n                    <span class="axis-head-name">\u7EF4\u5EA6</span>\r\n                    <i class="bdp-icon ico-edit batch-add-axis-btn" ng-click="batchOnDropAdd(\'x\')"></i>\r\n                </span>\r\n                <div class="drag-target">\r\n                    <div class="y_operate" ng-hide="!!viewMeta.compare_axis || viewMeta.chart_type == \'C280\' || viewMeta.chart_type == \'C340\'" ng-click="axisHandle.add(\'compare_axis\')">\r\n                        <i class="bdp-icon ico-handle-compare"></i>\r\n                        <span>\u6DFB\u52A0\u5BF9\u6BD4</span>\r\n                    </div>\r\n                    <!--x\u3001y\u6B63\u5E38\u663E\u793A-->\r\n                    <div class="drag-target-inner xAxis" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'onDropAdd(\\\'x\\\')\'}">\r\n                        <ul class="drag-target-list drag-target-list-dimension J-delete-target-id" id="dragX" ui-sortable="sortAxisField" ng-model="viewMeta.x">\r\n                            <li ng-repeat="it in viewMeta.x" class="drag-item J-delete-item-cls" ng-class="{\'not-sortable\': (viewMeta.chart_type == \'C301\' && chart_ops.meta.level_fields.length > 1) || (viewMeta.chart_type != \'C301\' && chart_ops.meta.level_fields.length > 1 && !$index && it.fid === chart_ops.meta.level_fields[drill_level].fid)}" click-outside="it.show_formula = false" outside-active="it.show_formula" data-jqyoui-options="{appendTo:\'body\', scroll: false,animate:false,greedy:true, accept: \'.field-list .field-drag-title\'}" data-drop="true">\r\n                                <div class="data-tag remove-icon-pr">\r\n                                    <span class="tag ui-select">\r\n                                        <span class="name" ng-mouseover="showFieldTip($event,it)" ng-mouseleave="hideFieldTip($event,it)" ng-click="it.show_formula = !it.show_formula">\r\n                                            <i class="bdp-icon ico-triangle-down1 fl"></i>\r\n                                            <i class="fl bdp-icon ico-sort" ng-if="viewMeta.sort.type !==\'\' && viewMeta.sort.type !== \'custom\' && viewMeta.sort.axis === \'x\' && viewMeta.sort.fid == it.fid && viewMeta.is_advanced_sort == 0 && isSortField({\'field\':it, axis:\'x\', index: $index})" ng-class="fieldSortType()"></i>\r\n                                            <span class="nowrap" ng-bind="it.name" ng-if="!it.nick_name"></span>\r\n                                            <span class="nowrap nick-name" ng-bind="it.nick_name" ng-if="it.nick_name != undefined && it.nick_name != \'\'"></span>\r\n                                            <i class="inline fl nowrap granularity" ng-if="it.data_type === \'date\'">\r\n                                                ({{it.granularity|granularity}})\r\n                                            </i>\r\n                                            <i class="inline fl nowrap granularity" ng-if="viewMeta.chart_type === \'C200\' && it.data_type === \'string\' && permision.tableImg">\r\n                                                ({{it.data_show_type|dataShowType}})\r\n                                            </i>\r\n                                        </span>\r\n                                        <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeAxisAction($event, \'x\', it);"></i>\r\n                                        <div class="data-formula" ng-show="it.show_formula">\r\n                                            <div string-data-show-type="" ng-if="viewMeta.chart_type === \'C200\' && it.data_type === \'string\' && permision.tableImg" tb-id="currentView.currentView.tb_id" field="it" axis="\'x\'" set-data-show-type="setDataShowType"></div>\r\n                                             <div date-granularity="" ng-if="it.data_type === \'date\'" tb-id="currentView.tb_id" field="it" axis="\'x\'" set-granularity="setGranularity"></div>\r\n                                             <div dimension-compare-sort="" axis="x"></div>\r\n                                        </div>\r\n                                    </span>\r\n                                </div>\r\n                                <!--end data-tag-->\r\n                                <div class="field-tip dropdown-wrap">\r\n                                    <span>{{it.name}}</span>\r\n                                </div>\r\n                            </li>\r\n                            <!-- \u81EA\u5B9A\u4E49\u56FE\u8868\u5E93x\u8F74\u63D0\u793A\u4FE1\u606F -->\r\n                            <li class="store-cutom-chart-field" ng-repeat="item in virtualFieldData.x" ng-if="$index === 0" ng-show="$index > viewMeta.x.length - 1 && item.name" ng-mouseenter="showTooltip({name: \'x\', description: item.description || \'\'}, $event)" ng-mouseleave="hideTooltip({name: \'x\', description: item.description || \'\'}, $event)" flash-guide="customChartFieldGuide" fg-show="guideApi.customChartFieldGuide">\r\n                                {{item.name}}\r\n                            </li>\r\n                            <li class="store-cutom-chart-field" ng-repeat="item in virtualFieldData.x" ng-if="$index > 0" ng-show="$index > viewMeta.x.length - 1 && item.name" ng-mouseenter="showTooltip({name: \'x\', description: item.description || \'\'}, $event)" ng-mouseleave="hideTooltip({name: \'x\', description: item.description || \'\'}, $event)">\r\n                                {{item.name}}\r\n                            </li>\r\n                            <div class="pr display-inline-block" ng-if="enterprise_type == 3 && viewMeta.x && viewMeta.x.length > 0">\r\n                                <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.drillChart" guide-item="drillChart" guide-type="chart_edit" watch-status="personalInfo.chart_guide" btn-class="J-dot-drill-chart" add-class="\'dot-guide-drill-chart\'"></div>\r\n                            </div>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <!--end drag-target-->\r\n            </div>\r\n            <!-- \u5BF9\u6BD4 -->\r\n            <div class="row axis" ng-if="!!viewMeta.compare_axis || virtualFieldData.compare_axis.length > 0" ng-class="{\'multi-axis\':viewMeta.chart_type === \'C250\'}">\r\n                <span class="fl axis-head">\r\n                    <span class="axis-head-name">\u5BF9\u6BD4</span>\r\n                    <i class="bdp-icon ico-edit batch-add-axis-btn" ng-click="batchOnDropAdd(\'compare_axis\')"></i>\r\n                </span>\r\n                <div class="drag-target">\r\n                    <div class="y_operate" ng-click="axisHandle.remove(\'compare_axis\')" ng-hide="virtualFieldData.compare_axis.length > 0">\r\n                        <i class="bdp-icon ico-handle-compare"></i>\r\n                        <span>\u79FB\u9664\u5BF9\u6BD4</span>\r\n                    </div>\r\n                    <div class="drag-target-inner yAxis" ng-model="compare_list" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'onDropAdd(\\\'compare_axis\\\')\'}">\r\n                        <ul class="drag-target-list drag-target-list-dimension J-delete-target-id" id="dragCompare_axis" ui-sortable="sortAxisField" ng-model="viewMeta.compare_axis">\r\n                            <li ng-repeat="it in viewMeta.compare_axis track by $index" class="drag-item J-delete-item-cls" click-outside="it.show_formula = false" outside-active="it.show_formula" ng-class="{\'virtual-field\': it.data_type === \'virtual\'}">\r\n                                <div class="virtual-field-hint bdp-tooltip" ng-if="!hasShownVirtualFieldHint && it.data_type === \'virtual\'">\r\n                                    <i class="bdp-icon ico-cancel" ng-click="turnOffVirtualFieldHint();"></i>\r\n                                    <div class="bdp-tooltip-content">\r\n                                        <div class="content">\r\n                                            <p>\u60A8\u53EF\u4EE5\u901A\u8FC7\u62D6\u52A8\u8BE5\u865A\u62DF\u5B57\u6BB5</p>\r\n                                            <p>\u8C03\u6574\u5BF9\u6BD4\u7684\u62C6\u5206\u987A\u5E8F</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="data-tag" ng-class="{\'remove-icon-pr\': !(it.data_type === \'virtual\')}">\r\n                                    <span class="tag ui-select">\r\n                                        <span class="name" ng-click="it.show_formula = !it.show_formula">\r\n                                            <i class="bdp-icon ico-triangle-down1 fl" ng-if="it.data_type != \'virtual\'"></i>\r\n                                            <i class="fl bdp-icon ico-sort" ng-if="viewMeta.is_advanced_sort != 1 && it.compare_sort.type !==\'\' && it.compare_sort.type !== \'custom\' && isSortField({\'field\':it, axis:\'compare_axis\', \'index\': $index})" ng-class="fieldSortType({\'axis\': \'compare_axis\', \'index\': $index})"></i>\r\n                                            <span class="nowrap" ng-bind="it.name"></span>\r\n                                            <i class="inline fl nowrap granularity" ng-if="it.data_type === \'date\'">\r\n                                                ({{it.granularity|granularity}})\r\n                                            </i>\r\n                                        </span>\r\n                                        <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeAxisAction($event, \'compare_axis\', it);" ng-if="!(it.data_type === \'virtual\')"></i>\r\n                                        <div class="data-formula" ng-if="it.data_type != \'virtual\'" ng-show="it.show_formula">\r\n                                            <div date-granularity="" ng-if="it.data_type === \'date\'" tb-id="currentView.tb_id" field="it" axis="\'compare_axis\'" set-granularity="setGranularity"></div>\r\n                                            <div dimension-compare-sort="" axis="compare_axis"></div>\r\n                                        </div>\r\n                                    </span>\r\n                                </div>\r\n                                <!--end data-tag-->\r\n                            </li>\r\n                            <!-- \u81EA\u5B9A\u4E49\u56FE\u8868\u5E93\u5BF9\u6BD4\u8F74\u8F74\u63D0\u793A\u4FE1\u606F -->\r\n                            <li class="store-cutom-chart-field" ng-repeat="item in virtualFieldData.compare_axis" ng-show="$index > viewMeta.compare_axis.length - 1 && item.name" ng-mouseenter="showTooltip({name: \'axis\', description: item.description || \'\'}, $event)" ng-mouseleave="hideTooltip({name: \'axis\', description: item.description || \'\'}, $event)">\r\n                                {{item.name}}\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <!--drag target inner-->\r\n                </div>\r\n            </div>\r\n            <!-- \u6570\u503C -->\r\n            <div class="row axis">\r\n                <div class="fl axis-head">\r\n                    <span class="axis-head-name">\u6570\u503C</span>\r\n                    <i class="bdp-icon ico-edit batch-add-axis-btn" ng-click="batchOnDropAdd(\'y\')"></i>\r\n                </div>\r\n                <div class="drag-target">\r\n                    <!--x\u3001y\u6B63\u5E38\u663E\u793A-->\r\n                    <div class="drag-target-inner yAxis" data-drop="true" data-jqyoui-options="{greedy:true, accept: \'.field-list .field-drag-title\', scroll: false}" data-jqyoui-droppable="{onDrop:\'onDropAdd(\\\'y\\\')\'}">\r\n                        <ul class="drag-target-list drag-target-list-dimension J-delete-target-id" id="dragY" ui-sortable="sortAxisField" ng-class="{\'not-sortable\':viewMeta.chart_type == \'C280\'}" ng-model="viewMeta.y">\r\n                            <li ng-repeat="it in viewMeta.y" class="drag-item J-delete-item-cls" click-outside="it.show_formula = false" outside-active="it.show_formula" ng-class="{\'virtual-field\': it.data_type === \'virtual\', \'not-sortable\': it.data_type === \'virtual\'}">\r\n                                <div class="data-tag" ng-class="{\'remove-icon-pr\': !(it.data_type === \'virtual\')}">\r\n                                    <span class="tag ui-select">\r\n                                        <span class="name" ng-click="showFormula(it)" ng-mouseover="showFieldTip($event,it)" ng-mouseleave="hideFieldTip($event,it)">\r\n                                            <i class="bdp-icon ico-triangle-down1 fl"></i>\r\n                                            <i class="fl bdp-icon ico-filter-white" ng-if="it.post_filter && it.post_filter.enabled != 0"></i>\r\n                                            <i class="fl bdp-icon ico-sort" ng-if="viewMeta.is_advanced_sort == 0 && isSortField({\'field\':it, axis:\'y\', index: $index}) && viewMeta.sort.axis === \'y\'" ng-class="fieldSortType()"></i>\r\n                                            <span class="nowrap nick-name" ng-bind="it.nick_name" ng-if="it.nick_name != undefined && it.nick_name != \'\'"></span>\r\n                                            <span class="nowrap" title="" ng-bind="it.name" ng-if="!it.nick_name"></span>\r\n                                            <i data-total="it.aggregator" ng-if="it.aggregator != undefined && !it.nick_name" class="inline fl aggr-name nowrap" title="">{{setAdvanceAggregatorName(it)}}</i>\r\n                                        </span>\r\n                                        <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeAxisAction($event, \'y\', it);" ng-if="!(it.data_type === \'virtual\')"></i>\r\n                                        <div class="data-formula" ng-show="it.show_formula" field-formula="{data_type:it.data_type}"></div>\r\n                                    </span>\r\n                                </div>\r\n                                <!--end data-tag-->\r\n                                <div class="field-tip dropdown-wrap" ng-if="(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\')">\r\n                                    <span>{{it.name}}{{setAdvanceAggregatorName(it)}}</span>\r\n                                </div>\r\n                            </li>\r\n                            <!-- \u81EA\u5B9A\u4E49\u56FE\u8868\u5E93x\u8F74\u63D0\u793A\u4FE1\u606F -->\r\n                            <li class="store-cutom-chart-field" ng-repeat="item in virtualFieldData.y" ng-show="$index > viewMeta.y.length - 1 && item.name" ng-mouseenter="showTooltip({name: \'y\', description: item.description || \'\'}, $event)" ng-mouseleave="hideTooltip({name: \'y\', description: item.description || \'\'}, $event)">\r\n                                {{item.name}}\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <!--drag target inner-->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--end chart args-->\r\n        <div class="chart-left-side">\r\n            <div chart-filter=""></div>\r\n        </div>\r\n        <a class="toggle-nav drag-btn" resize-width-filter-list="" title="\u62D6\u52A8\u8C03\u6574\u5BBD\u5EA6"></a>\r\n        <div id="chartBox">\r\n            <div chart-info-summary="" class="cursor-pointer chart-info-summary-icon">\r\n                <i class="bdp-icon ico-info-sign"></i>\r\n                <div class="dropdown-wrap chart-info-summary">\r\n                    <em class="arrow-up"></em>\r\n                    <div class="summary-content-wrap">\r\n                        <table class="chart-info-summary-content">\r\n                            <tr>\r\n                                <td class="label nowrap">\u6570\u636E\u66F4\u65B0</td>\r\n                                <td class="text">{{tb_update_time | date:\'yyyy-MM-dd HH:mm:ss\'}}</td>\r\n                            </tr>\r\n                            <tr ng-repeat="y in yAxis" ng-if="y.description">\r\n                                <td class="label nowrap">{{y.nick_name || y.name}}</td>\r\n                                <td class="text">{{y.description}}</td>\r\n                            </tr>\r\n                            <tr ng-repeat="x in xAxis" ng-if="x.description">\r\n                                <td class="label nowrap">{{x.nick_name || x.name}}</td>\r\n                                <td class="text">{{x.description}}</td>\r\n                            </tr>\r\n                            <tr ng-if="description">\r\n                                <td class="label nowrap">\u56FE\u8868\u5907\u6CE8</td>\r\n                                <td class="text">{{description}}</td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div chart-inner-filter="" chartid="currentView.ct_id" class="clearfix" ng-if="currentView"></div>\r\n            \r\n            <advance-sort chart-options="draw_chart_url.options" chart-meta="viewMeta" drill-level="drill_level" bdp-chart-obj="$bdpChart" save-chart-fun="saveChartImmediate()" chart-mode="edit"></advance-sort>\r\n\r\n            <a href="javascript:;" class="table-flip" title="{{ \'chart.tableFlip\' | translate}}">\r\n                <i class="bdp-icon" ng-class="{\'ico-flip-ccw\':viewMeta.tb_flip,\'ico-flip-cw\':!viewMeta.tb_flip}"></i>\r\n            </a>\r\n            <div bdp-chart="draw_chart_url.options" display-mode="edit" data-options="draw_chart_url.options" data-lazy-loaded="draw_chart_url.lazyload" class="chart chart-table J_subchart"></div>\r\n        </div>\r\n        <div class="chart-main-mask" ng-if="chartMainMask"></div>\r\n        </div>\r\n        <div class="chart-right chart-config-container J-chart-right">\r\n            <h4 class="block-title" ng-if="currentView">\u6570\u636E\u96C6\u8BBE\u7F6E</h4>\r\n            <div class="block chart-inner-filter-level" chart-inner-filter-level="" opts="chart_ops" chartid="currentView.ct_id" save="saveChartImmediate" fields="field_list" current-view="currentView" ng-if="currentView">\r\n                <!-- \u5185\u7F6E\u7B5B\u9009 -->\r\n            </div>\r\n            <div class="block statistic" ng-if="currentView">\r\n                <div class="hd block-header">\u8868\u683C\u8BBE\u7F6E</div>\r\n                <div class="bd block-body sub-block pl8">\r\n                    <div table-statistic=""></div>\r\n                </div>\r\n                <div class="sub-block pl8">\r\n                    <div class="hd mt10 block-header ng-scope">\u5408\u5E76\u540C\u7C7B\u5355\u5143\u683C</div>\r\n                    <input type="checkbox" ng-model="viewMeta.tb_merge_cell" ng-change="saveChartImmediate()">\r\n                    <span>\u5408\u5E76\u540C\u7C7B\u5355\u5143\u683C</span>\r\n                </div>\r\n            </div>\r\n            <div class="block top-chart-block show-item pl24" ng-if="chart_ops.meta.level[drill_level].x.length || chart_ops.meta.level[drill_level].compare_axis.length">\r\n                <div class="hd block-header ng-scope">\u663E\u793A\u6761\u76EE\u6570</div>\r\n                <div top-chart="" class="item-content"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="panel-develop show-fullview-{{curZoomView}}" ng-show="!hideChartView">\r\n        <div class="editor-block" ng-class="{\'show-editor-console\': showEditorConsole}" ng-show="!chart_ops.rootMeta.virtualTipsMessage || permision.enterpriseType === 7">\r\n            <div class="block-hd">\r\n                <h4 class="title">\u7F16\u8F91\u533A</h4>\r\n                <span class="display-inline-block pd8">\r\n                    <label for="lang-select" class="lang-label">\u8BED\u8A00</label>\r\n                    <select id="lang-select" class="lang-select cursor-pointer" ng-model="chart_ops.rootMeta.custom_chart_setting.mode" ng-change="saveChartImmediate({\'only_redraw\': true})">\r\n                        <option value="vega">Vega</option>\r\n                        <option value="javascript">Javascript</option>\r\n                    </select>\r\n                </span>\r\n                <a class="display-inline-block" href="/platform/dev-document/_book/zi-ding-yi-tu-biao.html" target="_blank" title="\u81EA\u5B9A\u4E49\u56FE\u8868\u5F00\u53D1\u6587\u6863">\r\n                    <span class="bdp-icon-wrap">\r\n                        <i class="bdp-icon ico-help-bold"></i>\r\n                    </span>\r\n                </a>\r\n                <i class="bdp-icon ico-enter-fullscreen-2 cursor-pointer" ng-if="curZoomView != \'editor\'" ng-click="zoomInView(\'editor\')"></i>\r\n                <i class="bdp-icon ico-exit-fullscreen-2 cursor-pointer" ng-if="curZoomView == \'editor\'" ng-click="zoomOut()"></i>\r\n            </div>\r\n            <div class="block-bd">\r\n                <div class="hint" ng-show="showCodeEditorHint">\u5728\u6B64\u5904\u7F16\u8F91\u4EE3\u7801</div>\r\n                <div id="custom-code-editor" class="custom-editor-block"></div>\r\n            </div>\r\n            <div class="custom-editor-ft">\r\n                <div class="left">\r\n                </div>\r\n                <div class="right">\r\n                    <a class="bdp-btn-radius bdp-btn-green btn-run-code" ng-click="runCode()">\u8FD0\u884C</a>\r\n                    <a class="bdp-btn-radius bdp-btn-blue2 btn-save-code" ng-click="saveCode()">\u4FDD\u5B58</a>\r\n                </div>                \r\n            </div>\r\n        </div>\r\n        <div class="exit-fullview-bar cursor-pointer" ng-if="curZoomView" ng-show="permision.enterpriseType === 7" ng-click="zoomOut()">\r\n            <i class="bdp-icon" ng-class="{\'ico-show-preview\': curZoomView == \'editor\', \'ico-show-editor\': curZoomView == \'preview\'}"></i>\r\n        </div>\r\n        <div class="preview-block" ng-class="{\'store-chart-use\': permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage}">\r\n            <div class="block-hd">\r\n                <h4 class="title">\u9884\u89C8</h4>\r\n                <div chart-inner-filter="" chartid="chartid" class="clearfix" ng-if="currentView"></div>\r\n                <i class="bdp-icon ico-enter-fullscreen-2 cursor-pointer" ng-if="curZoomView != \'preview\'" ng-click="zoomInView(\'preview\')" ng-hide="permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage"></i>\r\n                <i class="bdp-icon ico-exit-fullscreen-2 cursor-pointer" ng-if="curZoomView == \'preview\'" ng-click="zoomOut()"></i>\r\n            </div>\r\n            <div class="block-bd">\r\n                <div bdp-chart="draw_root_chart_url.options" display-mode="edit" data-options="draw_root_chart_url.options" data-lazy-loaded="draw_root_chart_url.lazyload" class="chart J_rootchart">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="chart-config-container develop-chart-config">\r\n            <h4 class="block-title">\u56FE\u8868\u8BBE\u7F6E</h4>\r\n            <div class="block chart-title">\r\n                <div class="hd">\u56FE\u8868\u6807\u9898</div>\r\n                <div class="bd">\r\n                    <input type="text" maxlength="25" ng-model="chart_ops.name" class="input-text-block chart-ops-inp" ng-click="ifClearName($event)" ng-keydown="ifEnterDown($event)" ng-blur="saveAfterCheckDirty({not_need_redraw:true,only_refresh_data:false,closeDialog:false}, true)" ng-disabled="selected_type === \'C310\'" placeholder="\u672A\u547D\u540D\u56FE\u8868">\r\n                </div>\r\n            </div>\r\n            <div class="block chart-native">\r\n                <div class="hd">\u79FB\u52A8\u7AEF\u5C55\u793A\u8BBE\u7F6E</div>\r\n                <div class="hd">\r\n                    <div class="row">\r\n                        <label>\r\n                            <input type="radio" value="0" name="134" ng-model="mob_render" ng-change="modifyNativeRender()">\r\n                            <span>\u4EC5\u5728\u5355\u56FE\u8868\u89C6\u56FE\u4E2D\u6E32\u67D3</span>\r\n                        </label>\r\n                        <div class="bdp-tooltip bottom OOCSS cursor-pointer">\r\n                            <i class="bdp-icon ico-info-sign"></i>\r\n                            <div class="bdp-tooltip-content">\r\n                                <div class="content">\u82E5\u6B64\u56FE\u8868\u6570\u636E\u91CF\u8F83\u5927\u6216\u8F83\u590D\u6742\uFF0C\u5EFA\u8BAE\u9009\u6B64\u9009\u9879\uFF0C\u907F\u514D\u5F71\u54CD\u6574\u4E2A\u4EEA\u8868\u76D8\u52A0\u8F7D</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <label>\r\n                            <input type="radio" value="1" name="134" ng-model="mob_render" ng-change="modifyNativeRender()">\r\n                            <span>\u5728\u4EEA\u8868\u76D8\u548C\u5355\u56FE\u8868\u4E2D\u5747\u6E32\u67D3</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="block no-shadow">\r\n                <div class="hd">\u56FE\u8868\u5907\u6CE8</div>\r\n                <div class="bd">\r\n                    <textarea msd-elastic="" class="input-text-block chart-description" ng-model="chart_ops.description" ng-keyup="keyUpChartDescription()"></textarea>\r\n                </div>\r\n            </div>\r\n            <h4 class="block-title mt18" ng-if="customChartSetiing.length > 0">\u56FE\u8868\u914D\u7F6E</h4>\r\n            <ul class="chart-custom-setting" ng-class="{\'chart-custom-setting-dev\': permision.enterpriseType === 7}">\r\n                <li ng-repeat="item in customChartSetiing">\r\n                    <div class="setting-ele" ng-class="{\'chart-custom-nodev-label\': permision.enterpriseType !== 7}">\r\n                        <span ng-show="permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage" class="setting-name">{{item.name}}</span>\r\n                        <input type="text" class="chart-ops-inp" ng-model="item.name" ng-blur="modifyCustomSetting()" ng-hide="permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage" placeholder="\u540D\u79F0">\r\n                    </div>\r\n                    <div class="setting-ele" ng-hide="permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage">\r\n                        <input type="text" class="chart-ops-inp" ng-model="item.key" ng-blur="modifyCustomSetting()" placeholder="key">\r\n                    </div>\r\n                    <div class="setting-ele">\r\n                        <input type="text" class="chart-ops-inp" ng-model="item.value" ng-blur="modifyCustomSetting()" placeholder="\u503C">\r\n                    </div>\r\n                    <span class="add bdp-icon ico-plus1" ng-if="$index === customChartSetiing.length - 1" ng-click="addSettingEle()" ng-hide="permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage"></span>\r\n                    <span class="del bdp-icon ico-delete" ng-click="delSettingEle($index)" ng-hide="permision.enterpriseType !== 7 && !!chart_ops.rootMeta.virtualTipsMessage"></span>\r\n                </li>\r\n            </ul>\r\n            <div class="chart-custom-resource mt18" ng-if="permision.enterpriseType === 7">\r\n                <h4 class="block-title lib">\u7B2C\u4E09\u65B9\u5E93</h4>\r\n                <ul class="js-resource">\r\n                    <li ng-repeat="item in jsResource">\r\n                        <span class="resource-name" title="{{item.name}}">{{item.name}}</span>\r\n                        <span class="del-resource bdp-icon ico-trash" ng-click="delResource(item.re_id, $index)"></span>\r\n                    </li>\r\n                </ul>\r\n                <div id="upload-resource" class="bdp-btn-radius bdp-btn-blue2 upload-resource">\u4E0A\u4F20\u7B2C\u4E09\u65B9\u5E93</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="hz-tip error hidden" id="dataOver">\r\n    <span></span>\r\n</div>\r\n\r\n<div ng-loading-gif="" ng-show="chartContentLoading"></div>\r\n\r\n<script id="vega-example-light" type="text/template">\r\n{\r\n  "data": [\r\n    {\r\n      "name": "table",\r\n      "source": "ds0",\r\n      "transform": [{"type": "pie", "field": "y0"}]\r\n    },\r\n    {\r\n      "name": "table_aggregate",\r\n      "source": "ds0",\r\n      "transform": [{"type": "aggregate", "fields": ["x0", "y0"], "ops": ["max", "max"], "as": ["x0", "max"]}]\r\n    },\r\n  ],\r\n   \r\n   "signals": [\r\n     {\r\n       "name": "sliceWidthRange",\r\n       "update": "[20, min(width, height)/3 + 50]",\r\n     },\r\n    {\r\n      "name": "hover",\r\n      "value": null,\r\n      "on": [\r\n        {"events": "arc:mouseover", "update": "datum"},\r\n        {"events": "arc:mouseout", "update": \'null\'}\r\n      ]\r\n    }\r\n  ],\r\n\r\n  "scales": [\r\n    {\r\n      "name": "r",\r\n      "type": "sqrt",\r\n      "domain": {"data": "table", "field": "y0"},\r\n      "zero": true,\r\n      "range": {\'signal\': "sliceWidthRange"}\r\n    },\r\n    {\r\n      "name": "color",\r\n      "domain": {"data": "table", "field": "x0"},\r\n      "type": "ordinal",\r\n      "range": {"scheme": "category20"}\r\n    }\r\n  ],\r\n\r\n  "legends": [\r\n    {\r\n      "entryPadding": 10,\r\n      "fill": "color", \r\n      "encode": {\r\n        "labels": {\r\n          "enter": {\r\n            "dx": 20,\r\n            "fill": {"value": "#333"}\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ],\r\n    \r\n  "marks": [\r\n    {\r\n      "type": "arc",\r\n      "from": {"data": "table"},\r\n      "encode": {\r\n        "enter": {\r\n          "x": {"field": {"group": "width"}, "mult": 0.5},\r\n          "y": {"field": {"group": "height"}, "mult": 0.5},\r\n          "startAngle": {"field": "startAngle"},\r\n          "endAngle": {"field": "endAngle"},\r\n          "stroke": {"value": "#eee"},\r\n          "strokeWidth": {"value": 2},\r\n          "strokeOpacity": {"value": 1},        \r\n          "cursor": "pointer",\r\n        },\r\n        "update": {\r\n          "fill": {"scale": "color", "field": "x0"},\r\n          "fillOpacity": [\r\n            {"test": "datum === hover", "value": 0.8},\r\n            {"value": 1}\r\n          ],\r\n          "innerRadius": [\r\n            {"value": 50}\r\n           ],\r\n          "outerRadius": [\r\n            {"test": "datum === hover", "scale": "r", "field": "y0", "offset": 10},\r\n            {"scale": "r", "field": "y0"}\r\n           ],\r\n        }\r\n      }\r\n    }, \r\n    {\r\n      "type": "text",\r\n      "interactive": false,\r\n      "encode": {\r\n        "enter": {\r\n          "x": {"signal": "width/2"},\r\n          "y": {"signal": "height/2 - 10"},\r\n          "fontWeight": {"value":"bold"},\r\n          "fontSize": {"value": 14},\r\n          "align": {"value": "center"}\r\n        },\r\n        "update": {\r\n          "fill": {"signal": "hover ? scale(\'color\', hover.x0) : \'#666\'"},\r\n          "text": {"signal": "hover ? hover.x0 : \'\u6700\u5927\u503C\'"}\r\n        }\r\n      }\r\n    },\r\n    \r\n    {\r\n      "type": "text",\r\n      "interactive": false,\r\n      "encode": {\r\n        "enter": {\r\n          "x": {"signal": "width/2"},\r\n          "y": {"signal": "height/2 + 14"},\r\n          "fill": {"value": "#666"},\r\n          "fontSize": {"value": 12},\r\n          "align": {"value": "center"}\r\n        },\r\n        "update": {\r\n          "text": {"signal": "format(hover ? hover.y0 : data(\'table_aggregate\')[0].max, \',\') "}\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}\r\n</script>\r\n<script id="vega-example-dark" type="text/template">\r\n{\r\n  "data": [\r\n    {\r\n      "name": "table",\r\n      "source": "ds0",\r\n      "transform": [{"type": "pie", "field": "y0"}]\r\n    },\r\n    {\r\n      "name": "table_aggregate",\r\n      "source": "ds0",\r\n      "transform": [{"type": "aggregate", "fields": ["x0", "y0"], "ops": ["max", "max"], "as": ["x0", "max"]}]\r\n    },\r\n  ],\r\n   \r\n   "signals": [\r\n     {\r\n       "name": "sliceWidthRange",\r\n       "update": "[20, min(width, height)/3 + 50]",\r\n     },\r\n    {\r\n      "name": "hover",\r\n      "value": null,\r\n      "on": [\r\n        {"events": "arc:mouseover", "update": "datum"},\r\n        {"events": "arc:mouseout", "update": \'null\'}\r\n      ]\r\n    }\r\n  ],\r\n\r\n  "scales": [\r\n    {\r\n      "name": "r",\r\n      "type": "sqrt",\r\n      "domain": {"data": "table", "field": "y0"},\r\n      "zero": true,\r\n      "range": {\'signal\': "sliceWidthRange"}\r\n    },\r\n    {\r\n      "name": "color",\r\n      "domain": {"data": "table", "field": "x0"},\r\n      "type": "ordinal",\r\n      "range": {"scheme": "set3"}\r\n    }\r\n  ],\r\n\r\n  "legends": [\r\n    {\r\n      "entryPadding": 10,\r\n      "fill": "color", \r\n      "encode": {\r\n        "labels": {\r\n          "enter": {\r\n            "fill": {"value": "#fff"}\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ],\r\n    \r\n  "marks": [\r\n    {\r\n      "type": "arc",\r\n      "from": {"data": "table"},\r\n      "encode": {\r\n        "enter": {\r\n          "x": {"field": {"group": "width"}, "mult": 0.5},\r\n          "y": {"field": {"group": "height"}, "mult": 0.5},\r\n          "startAngle": {"field": "startAngle"},\r\n          "endAngle": {"field": "endAngle"},\r\n          "stroke": {"value": "#fff"},\r\n          "strokeWidth": {"value": 2},\r\n          "strokeOpacity": {"value": 1},\r\n        },\r\n        "update": {\r\n          "fill": {"scale": "color", "field": "x0"},\r\n          "innerRadius": [\r\n            {"value": 50}\r\n           ],\r\n          "outerRadius": [\r\n            {"test": "datum === hover", "scale": "r", "field": "y0", "offset": 10},\r\n            {"scale": "r", "field": "y0"}\r\n           ],\r\n        }\r\n      }\r\n    }, \r\n    \r\n    {\r\n      "type": "text",\r\n      "interactive": false,\r\n      "encode": {\r\n        "enter": {\r\n          "x": {"signal": "width/2"},\r\n          "y": {"signal": "height/2 - 10"},\r\n          "fontWeight": {"value":"bold"},\r\n          "fontSize": {"value": 14},\r\n          "align": {"value": "center"}\r\n        },\r\n        "update": {\r\n          "fill": {"signal": "hover ? scale(\'color\', hover.x0) : \'#fff\'"},\r\n          "text": {"signal": "hover ? hover.x0 : \'\u6700\u5927\u503C\'"}\r\n        }\r\n      }\r\n    },\r\n    \r\n    {\r\n      "type": "text",\r\n      "interactive": false,\r\n      "encode": {\r\n        "enter": {\r\n          "x": {"signal": "width/2"},\r\n          "y": {"signal": "height/2 + 14"},\r\n          "fill": {"value": "#fff"},\r\n          "fontSize": {"value": 12},\r\n          "align": {"value": "center"}\r\n        },\r\n        "update": {\r\n          "text": {"signal": "format(hover ? hover.y0 : data(\'table_aggregate\')[0].max, \',\') "}\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\n</script>\r\n\r\n');
    $templateCache.put('/static/chart-edit/views/tpl/gis-edit.html', '<div class="gis-edit-view" bindonce="">\n    <div class="view-header text-center">\n        <a class="back-btn" ng-click="back()">\n            <i class="bdp-icon ico-back"></i>\n        </a>\n        <div class="view-header-seperate-line"></div>\n        <h2 class="text-left view-header-left-name ng-cloak">\u7F16\u8F91\u56FE\u8868</h2>\n    </div>\n\n    <div class="content-wrap">\n        <div class="gis-layers">\n            <div class="worksheets block">\n                <p class="hd">\n                    <span>\u5DE5\u4F5C\u8868</span>\n                    <i class="bdp-icon ico-plus1 fr" ng-click="showAddTableDialog()"></i>\n                </p>\n                <ul>\n                    <li ng-repeat="tb in viewData.tbList" data-drag="true" data-jqyoui-options="{helper: \'clone\', appendTo: \'body\'}" class="worksheet-item" jqyoui-draggable="{placeholder: \'keep\', onStart: \'dragTbFunc(tb)\'}">\n                        <div class="fr icon-list" ng-show="!viewData.chartTbCanEditMap || viewData.chartTbCanEditMap[tb.tb_id]">\n                            <i class="cursor-pointer bdp-icon ico-edit mr4" ng-class="{\'guide-tb-edit\': $index == 0}" ng-click="showSetCoordDialog(tb)"></i>\n                            <i class="cursor-pointer bdp-icon ico-trash fr" ng-show="viewData.tbList.length > 1" ng-click="deleteTb(tb.tb_id, $index)"></i>\n                        </div>\n                        <p class="nowrap tb-name" ng-bind="tb.name"></p>\n                    </li>\n                </ul>\n            </div>\n            <hr class="split">\n            <div class="layers block" data-drop="true" data-jqyoui-options="{accept: \'.gis-layers .worksheets li\', hoverClass: \'ui-droppable-hover\'}" jqyoui-droppable="{onDrop: \'onDrop()\'}">\n                <p class="hd">\u56FE\u5C42</p>\n                <ul ui-sortable="sortLayers" ng-model="chart_ops.meta.layers">\n                    <li class="nowrap" ng-repeat="layer in chart_ops.meta.layers" ng-class="{active: $index === currentLayerIndex}">\n                        <i class="bdp-icon ico-order fl"></i>\n                        <div class="fr icon-list">\n                            <i class="cursor-pointer bdp-icon ico-visible" ng-class="{\'ico-visible-grey\': layer.invisible}" ng-click="toggleVisible(layer)" ng-show="layer.invisible" title="\u663E\u793A\u56FE\u5C42"></i>\n                            <i class="cursor-pointer bdp-icon ico-visible" ng-class="{\'ico-visible-grey\': layer.invisible}" ng-click="toggleVisible(layer)" ng-hide="layer.invisible" title="\u9690\u85CF\u56FE\u5C42"></i>\n                            <i class="cursor-pointer bdp-icon ico-more" ng-click="toggleMoreAction($event)"></i>\n                            <div class="more-dropdown hidden">\n                                <div class="action" ng-click="editMode=true;">\u91CD\u547D\u540D</div>\n                                <div class="action" ng-click="copyLayer($index);">\u590D\u5236\u56FE\u5C42</div>\n                                <div class="action" ng-click="deleteLayer($index);">\u5220\u9664</div>\n                            </div>\n                        </div>\n                        <p class="nowrap layer-name" ng-show="!editMode" ng-click="setCurrentLayer($index)">{{layer.layer_name}}</p>\n                        <div class="layer-name" ng-show="editMode">\n                            <input type="text" class="input-text-block" focus-me="editMode" ng-model="layer.layer_name" ng-blur="editMode=renameLayer(layer);" ng-keyup="onRenameLayerKeyUp($event)">\n                        </div>\n                    </li>\n                </ul>\n                <div class="droppable-hint" ng-if="!(chart_ops.meta.layers && chart_ops.meta.layers.length)">\n                    <p>\u62D6\u62FD\u5DE5\u4F5C\u8868\u5230\u8FD9\u91CC</p>\n                    <p>\u6DFB\u52A0\u56FE\u5C42</p>\n                </div>\n            </div>\n            <hr class="split">\n            <div class="fields block pr">\n                <!-- <p class="hd">\u5B57\u6BB5</p> -->\n                <div class="hd hd-field-wrap">\n                    <p class="hd-field-tip">\u5B57\u6BB5</p>\n                    <div class="query-box auto no-margin">\n                        <input type="text" class="query-text" ng-input-text="" ng-model="query">\n                    </div>\n                    <div class="add" ng-click="newFieldTypeSelect = !newFieldTypeSelect" click-outside="newFieldTypeSelect = false" outside-active="newFieldTypeSelect">\n                        <a class="cursor-pointer bdp-icon-wrap" title="\u6DFB\u52A0\u65B0\u5B57\u6BB5">\n                            <i class="bdp-icon ico-plus1"></i>\n                        </a>\n                        <ul class="field-type-select dropdown-wrap" ng-show="newFieldTypeSelect">\n                            <li class="dropdown-item" ng-click="createFieldFormula()">\u6DFB\u52A0\u8BA1\u7B97\u5B57\u6BB5</li>\n                            <li class="dropdown-item" ng-click="createFieldGroup()">\u6DFB\u52A0\u5206\u7EC4\u5B57\u6BB5</li>\n                            <li class="dropdown-item" ng-click="createFieldByML()" ng-if="permision.newTraining">\u4F7F\u7528\u673A\u5668\u6A21\u578B</li>\n                        </ul>\n                    </div>\n                </div>\n                <ul class="field-list gis-field-list">\n                    <li ng-repeat="field in field_list | query_fields:query" ng-class="{\'handler-more\': field.handler_more_show} " ng-mouseenter="field.justshowme = true" ng-mouseleave="field.justshowme = false">\n\n                        <div ng-click="show_edit = !show_edit" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{placeholder:\'keep\',onStart:\'dragFieldFunc(field)\',onStop:\'stopDragField()\'}" class="title nowrap {{field.data_type}}-title cursor-pointer" ng-class="{\'field-drag-title\': !chartMainMask}">\n                            <i ng-if="field.data_type===\'date\'" class="bdp-icon ico-triangle-right" ng-class="{\'ico-triangle-down\':show_edit}"></i>\n                            <i class="bdp-icon ico-type-{{field.ico_type}}" ng-class="{\'ico-type-{{field.ico_type}}-orange\':field.formula, \'-ml\': field.made_by_ml && field.formula}"></i>\n                        <span class="data-tag" field-set-tooltip="field" tooltip-placement="top-left" ng-if="tbType != \'public\'" ng-class="{\'border-bottom-5182E4\': (field.original_name != field.name || field.remark)}" ng-bind="field.name"></span>\n\n                        <span class="data-tag" ng-if="tbType == \'public\'" ng-bind="field.name"></span>\n\n\n\n                        <span class="field-handler hover-show display-block" ng-if="field.formula != \'\' && field.editable && field.data_type == \'string\' && field.param.type == \'group\'" drop-down-flag="field.handler_more_show">                            \n                              <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">     \n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\n                                </ul>\n                            </div>                          \n                        </span>                        \n                        <span class="field-handler hover-show display-block" ng-if="field.formula != \'\' && field.editable && field.param.type !== \'group\'" drop-down-flag="field.handler_more_show">     \n                              <div class="bdp-icon-wrap fr" ng-click="field.handler_more_show = !field.handler_more_show;handlerMorePos($event)" chart-drop-down="" drop-down-flag="field.handler_more_show" click-outside="field.handler_more_show = false" outside-active="field.handler_more_show" title="\u66F4\u591A">     \n                                <i class="bdp-icon ico-more" ng-show="field.justshowme || field.handler_more_show"></i>\n                                <ul class="field-editable-handler-more dropdown-wrap" ng-show="field.handler_more_show">\n                                    <li class="dropdown-item" ng-click="modifyField(field)">\u7F16\u8F91</li>\n                                    <li class="dropdown-item" dependece-list="" field="field" tb-id="viewData.currentLayer.tb_id">\u4F9D\u8D56\u5173\u7CFB</li>                                                                                                            \n                                    <li class="dropdown-item" ng-click="delNewField(field.name,field.fid)">\u5220\u9664</li>\n                                </ul>\n                            </div>                          \n                        </span>  \n\n                        <!-- <span ng-if="field.formula != \'\' && field.editable && field.data_type != \'string\' " class="field-handler hover-show">\n                            <span class="bdp-icon-wrap fl" ng-click="modifyField(field)" ng-hide="field.made_by_ml" bo-title="\'edit\' | translate">\n                                <i class="bdp-icon ico-edit"></i>\n                            </span>\n                            <span class="bdp-icon-wrap fr" ng-click="delNewField(field.name,field.fid)" bo-title="\'remove\' | translate">\n                                <i class="bdp-icon ico-trash"></i>\n                            </span>\n                        </span> -->\n                        \n                        </div>\n                         <ul ng-if="field.data_type == \'date\'" ng-show="show_edit" class="date-field ml20">\n                            <li class="cursor-pointer">\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'year\\\')\',onStop:\'stopDragField()\'}">\n                                <i class="bdp-icon ico-type-date"></i>\n                                <span>\u5E74</span>\n                            </p>\n                            </li>\n                            <li class="cursor-pointer">\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'quarter\\\')\',onStop:\'stopDragField()\'}">\n                                <i class="bdp-icon ico-type-date"></i>\n                                <span>\u5B63</span>\n                            </p>\n                            </li>\n                            <li class="cursor-pointer">\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'month\\\')\',onStop:\'stopDragField()\'}">\n                                <i class="bdp-icon ico-type-date"></i>\n                                <span>\u6708</span>\n                            </p>\n                            </li>\n                            <li class="cursor-pointer">\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'week\\\')\',onStop:\'stopDragField()\'}">\n                                <i class="bdp-icon ico-type-date"></i>\n                                <span>\u5468</span>\n                            </p>\n                            </li>\n                            <li class="cursor-pointer">\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'day\\\')\',onStop:\'stopDragField()\'}">\n                                <i class="bdp-icon ico-type-date"></i>\n                                <span>\u65E5</span>\n                            </p>\n                            </li>\n                            <li class="cursor-pointer">\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'hour\\\')\',onStop:\'stopDragField()\'}">\n                                <i class="bdp-icon ico-type-date"></i>\n                                <span>\u65F6</span>\n                            </p>\n                            </li>\n                            <li class="cursor-pointer">\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'minute\\\')\',onStop:\'stopDragField()\'}">\n                                <i class="bdp-icon ico-type-date"></i>\n                                <span>\u5206</span>\n                            </p>\n                            </li>\n                            <li class="cursor-pointer">\n                            <p class="field-drag-title" data-drag="true" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\',appendTo:\'body\'}" jqyoui-draggable="{index:{{$index}},placeholder:\'keep\',onStart:\'dragSubTbFunc(field,\\\'second\\\')\',onStop:\'stopDragField()\'}">\n                                <i class="bdp-icon ico-type-date"></i>\n                                <span>\u79D2</span>\n                            </p>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n        <div class="gis-main">\n            <div class="chart-args">\n                <div class="row x-axis">\n                    <span class="axis-head">\u7EF4\u5EA6</span>\n                    <div class="drag-target">\n                        <div class="drag-target-inner" data-drop="true" data-jqyoui-options="{accept:\'.field-list .field-drag-title\'}" jqyoui-droppable="{onDrop: \'dropFieldTo(\\\'x\\\')\'}">\n                            <ul class="drag-target-list drag-target-list-dimension" id="dragX" ui-sortable="sortAxisField" ng-model="viewData.currentLayer.x">\n                                <li ng-repeat="it in viewData.currentLayer.x" class="drag-item" ng-mouseleave="it.showDropdown = false">\n                                    <div class="data-tag remove-icon-pr">\n                                        <span class="tag ui-select">\n                                            <span class="name" ng-click="it.showDropdown=true" ng-mouseover="showFieldTip($event,it)" ng-mouseleave="hideFieldTip($event,it)">\n                                                <span class="nowrap">{{it.nick_name || it.name}}</span>\n                                            </span>\n                                            <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeField(\'x\', it);"></i>\n                                        </span>\n                                    </div>\n                                    <div class="field-tip dropdown-wrap" ng-if="it.nick_name">\n                                        <span>{{it.name}}{{setAdvanceAggregatorName(it)}}</span>\n                                    </div>\n                                    <!--end data-tag-->\n                                </li>\n                            </ul>\n\n                        </div>\n                    </div>\n                </div>\n\n                <div class="row y-axis">\n                    <span class="axis-head">\u6570\u503C</span>\n                    <div class="drag-target">\n                        <div class="drag-target-inner" data-drop="true" data-jqyoui-options="{accept:\'.field-list .field-drag-title\'}" jqyoui-droppable="{onDrop: \'dropFieldTo(\\\'y\\\')\'}">\n                            <ul class="drag-target-list drag-target-list-dimension" id="dragY" ui-sortable="sortAxisField" ng-model="viewData.currentLayer.y">\n                                <li ng-repeat="it in viewData.currentLayer.y track by $index" class="drag-item" ng-mouseleave="it.show_formula = false" outside-active="it.show_formula">\n\n                                    <div class="data-tag remove-icon-pr">\n                                        <span class="tag ui-select">\n                                            <span ng-click="showFormula(it)" class="name" ng-mouseover="showFieldTip($event,it)" ng-mouseleave="hideFieldTip($event,it)">\n                                                <i class="bdp-icon ico-triangle-down1 ico-always-highlight fl"></i>\n                                                <i class="fl bdp-icon ico-filter-white" ng-if="it.post_filter && it.post_filter.enabled != 0"></i>\n                                                <span class="nowrap nick-name" ng-bind="it.nick_name" ng-if="it.nick_name != undefined && it.nick_name != \'\'"></span>\n                                                <span class="nowrap" title="" ng-bind="it.name" ng-if="!it.nick_name"></span>\n                                                <i ng-if="it.aggregator != undefined && !it.nick_name" class="inline fl aggr-name nowrap" title="">{{setAdvanceAggregatorName(it)}}</i>\n                                            </span>\n                                            <i class="bdp-icon ico-delete-small remove-it-icon" ng-click="removeField(\'y\', it);"></i>\n                                            <div class="data-formula" ng-show="it.show_formula" field-formula="{data_type:it.data_type}"></div>\n                                        </span>\n                                    </div>\n                                    <div class="field-tip dropdown-wrap" ng-if="(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\')">\n                                        <em class="arrow arrow-up"></em>\n                                        <span>{{it.name}}{{setAdvanceAggregatorName(it)}}</span>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="chart-left-side">\n                <div chart-filter=""></div>\n\n                <div class="scatter-bubble-layer" ng-show="viewData.currentLayer.type != \'heatmap\'">\n                    <hr class="split" ng-if="[\'bubble\', \'d_trajectory\'].indexOf(viewData.currentLayer.type) > -1 || (viewData.currentLayer.type == \'graph\' && viewData.currentLayer.y.length > 0)">\n                    <div class="tab-hd clearfix" ng-if="[\'bubble\', \'d_trajectory\'].indexOf(viewData.currentLayer.type) > -1 || (viewData.currentLayer.type == \'graph\' && viewData.currentLayer.y.length > 0)">\n                        <a class="tab-hd-item" ng-click="tab.index = 0" ng-class="{active : tab.index == 0}">\u989C\u8272</a>\n                        <a class="tab-hd-item" ng-click="tab.index = 1" ng-class="{active : tab.index == 1}">\u5C3A\u5BF8</a>\n                    </div>\n                    <div class="tab-bd">\n                        <div class="tab-scatter-color" gis-color-setting="" ng-show="tab.index == 0"></div>\n                        <div class="tab-scatter-bubble" gis-bubble-size="" ng-show="tab.index == 1" ng-if="[\'bubble\', \'d_trajectory\'].indexOf(viewData.currentLayer.type) > -1 || (viewData.currentLayer.type == \'graph\' && viewData.currentLayer.y.length > 0)"></div>\n                    </div>\n                </div>\n            </div>\n\n            <div id="chartBox">\n            <div bdp-chart="draw_chart_url.options" display-mode="edit" data-options="draw_chart_url.options" data-lazy-loaded="draw_chart_url.lazyload" class="chart"></div>\n            </div>\n            <div class="chart-main-mask" ng-if="chartMainMask"></div>\n        </div>\n\n\n        <div class="gis-settings chart-right">\n            <div class="block chart-title">\n                <div class="hd">\u56FE\u8868\u6807\u9898</div>\n                <div class="bd">\n                    <input type="text" ng-model="chart_ops.name" class="input-text-block chart-ops-inp" ng-keydown="ifEnterDown($event)" ng-blur="saveAfterCheckDirty({not_need_redraw:true,only_refresh_data:false,closeDialog:false})" placeholder="\u672A\u547D\u540D\u56FE\u8868">\n                </div>\n            </div>\n            <div class="block chart-type">\n                <div class="hd">\u56FE\u8868\u7C7B\u578B</div>\n                <div class="bd">\n                    <ul>\n                        <li ng-repeat="type in gisTypes" ng-click="setGisType(type)" title="{{gisTypeNames[type]}}">\n                            <a ng-class="{active: type === viewData.currentLayer.type, \'guide-newtype-trajectory\': type == \'trajectory\' }">\n                                <i class="chart-type-icon ico-gis-{{type}}"></i>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="block symbol-type" ng-if="viewData.currentLayer.type === \'bubble\'">\n                <p class="hd">\u56FE\u5F62\u7B26\u53F7</p>\n                <ul>\n                    <li ng-repeat="symbol in gisBubbleSymbol" ng-click="setGisSymbolType(symbol)">\n                        <a class="gis-bubble-symbol" ng-class="{active: viewData.currentLayer.bubble_symbol === symbol}">\n                            <i class="chart-type-icon ico-symbol-{{symbol}}"></i>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <div class="block heatmap-radius" ng-if="viewData.currentLayer.type === \'heatmap\'">\n                <p class="hd">\u70ED\u529B\u534A\u5F84</p>\n                <div>\n                    <input type="number" ng-model="viewData.currentLayer.heatmap_setting.radius" ng-blur="checkRadius()" ng-keyup="onRadiusKeyUp($event)" placeholder="\u70ED\u529B\u534A\u5F84">\n                    <select ng-model="viewData.currentLayer.heatmap_setting.unit" ng-change="onUnitChange()" ng-options="unit.value as unit.name for unit in heatMapUnit">\n                    </select>\n                </div>\n            </div>\n       \n            <div class="block symbol-type" ng-if="viewData.currentLayer.type === \'graph\'">\n                <p class="hd">\u7EDF\u8BA1\u56FE</p>\n                <ul>\n                    <li ng-repeat="type in gisGraphTypes" ng-click="setGisGraphType(type)">\n                        <a ng-class="{active: viewData.currentLayer.graph_type === type}">\n                            <i class="icomoon icomoon-{{type}}"></i>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="block time-animation">\n                <div class="hd">\n                    <label>\n                        <input type="checkbox" ng-model="viewData.currentLayer.autoViewport" ng-change="saveChart({only_redraw: true})"> \n                        <span>\u81EA\u52A8\u8C03\u6574\u89C6\u7A97\u8303\u56F4</span>\n                    </label>\n                </div>\n            </div>\n\n            <div class="block trajectory-field" ng-if="[\'trajectory\', \'d_trajectory\'].indexOf(viewData.currentLayer.type) >= 0">\n                <div class="bd">\n                    <div class="row">\n                        <label>\u8F68\u8FF9\u4E3B\u4F53\u5B57\u6BB5</label>\n                        <select ng-model="viewData.currentLayer.trajectory[0]" ng-options="field.name for field in field_list | filter:{ data_type : \'!date\' } track by field.fid" ng-change="changeTrajectory()" style="width:80%"></select>\n                    </div>\n                    <div class="row">\n                        <label>\u65F6\u95F4\u5E8F\u5217\u5B57\u6BB5</label>\n                        <select ng-model="viewData.currentLayer.sequence[0]" ng-options="field.name for field in field_list | filter:{ data_type : \'date\' } track by field.fid " ng-change="changeSequence()" style="width:80%"></select>\n                    </div>\n                </div>\n            </div>\n\n            <div class="block time-animation">\n                <div class="hd">\n                        <label>\n                            <input type="checkbox" ng-if="viewData.currentLayer.type !== \'d_trajectory\'" ng-model="viewData.currentLayer.timeline.enabled" ng-change="enableTimeline()"> \n                          <span>\u65F6\u95F4\u52A8\u753B</span>\n                        </label>\n                </div>\n                <div class="bd" ng-if="viewData.currentLayer.timeline.enabled">\n                    <div class="row" ng-if="viewData.currentLayer.type !== \'d_trajectory\'">\n                        <label>\u65F6\u95F4\u5B57\u6BB5</label>\n                        <select ng-model="viewData.currentLayer.timeline.field" ng-options="field.name for field in field_list | filter:{ data_type : \'date\' } track by field.fid" ng-change="viewData.currentLayer.timeline.field.granularity=\'day\'; saveChartImmediate()" style="max-width:100%"></select>\n                    </div>\n                    <div class="row" ng-if="viewData.currentLayer.timeline.field">\n                        <label>\u65F6\u95F4\u7C92\u5EA6</label>\n                        <select ng-model="viewData.currentLayer.timeline.field.granularity" ng-options="g|granularity for g in timeGranularity" ng-change="saveChart()"></select>\n                    </div>\n                    <div class="row" ng-if="viewData.currentLayer.timeline.field && viewData.currentLayer.type !== \'d_trajectory\'">\n                        <label>\u65F6\u95F4\u95F4\u9694</label>\n                        <input type="number" class="w60" ng-if="viewData.currentLayer.timeline.field" ng-model="viewData.currentLayer.timeline.interval" ng-blur="checkTimelineInterval()" ng-keyup="onTimelineIntervalKeyUp($event)">\n                        <label>{{ timeGranularityLabelMap[viewData.currentLayer.timeline.field.granularity] }}</label>\n                    </div>\n                    <div class="row">\n                        <label>\u64AD\u653E\u901F\u5EA6</label>\n                        <select ng-model="viewData.currentLayer.timeline.speed" ng-options="speed.val as speed.name for speed in timeAnimationSpeeds" ng-change="saveChart({only_redraw: true})" style="max-width:100%"></select>\n                        <label class="ml24" ng-if="viewData.currentLayer.timeline.speed == 9" fps="">FPS</label>\n                        <input type="number" ng-if="viewData.currentLayer.timeline.speed == 9" ng-model="viewData.currentLayer.timeline.fps" ng-blur="checkTimelineFps()" ng-keyup="onTimelineFpsKeyUp($event)">\n                    </div>\n                    <div class="row">\n                        <label>\n                          <input type="checkbox" ng-model="viewData.currentLayer.timeline.loop" ng-change="saveChart({only_redraw: true})"> <span>\u5FAA\u73AF\u64AD\u653E</span>\n                      </label>\n                    </div>\n                </div>\n            </div>\n            <!--/m:trajectory-style-->\n            <div class="block trajectory-style" ng-if="viewData.currentLayer.type === \'trajectory\'">\n                <div class="hd">\n                    <label>\u8F68\u8FF9\u6837\u5F0F\u8BBE\u7F6E</label>\n                </div>\n                <div class="row">\n                    <label>\u7C97\u7EC6</label>\n                    <select ng-model="viewData.currentLayer.trajectoryStyle.lineWidth" ng-options="g for g in trajectoryLineWidth" ng-change="saveChart({only_redraw: true})"></select>\n                    <div class="gis-trajectory-color">\n                        <label bo-text="\'\u989C\u8272\'"></label><color-style data="viewData.currentLayer.trajectoryStyle.lineColor" save-func="saveChart({only_redraw: true})" options="{showAlpha:true}"></color-style>\n                    </div>\n                </div>\n                <div class="row">\n                    <label>\n                      <input type="checkbox" ng-model="viewData.currentLayer.trajectoryStyle.blend" ng-change="saveChart({only_redraw: true})"> <span>\u53E0\u52A0\u9AD8\u5149</span>\n                    </label>\n                </div>\n                <div class="row">\n                    <label>\n                      <input type="checkbox" ng-model="viewData.currentLayer.trajectoryStyle.startEndPoint" ng-change="saveChart({only_redraw: true})"> <span>\u663E\u793A\u8D77\u70B9\u7EC8\u70B9\u7B26\u53F7</span>\n                    </label>\n                </div>\n            </div>\n            <!--/m:trajectory-style-->\n            <!--/m:dtrajectory-image-->\n            <div class="block symbol-type" ng-if="viewData.currentLayer.type === \'d_trajectory\'">\n                <p class="hd">\u56FE\u5F62\u7B26\u53F7</p>\n                <ul>\n                    <li ng-repeat="symbol in gisTrajectorySymbol" ng-click="setGisTrajectorySymbolType(symbol)">\n                        <a class="gis-bubble-symbol" ng-class="{active: viewData.currentLayer.trajectory_symbol === symbol}">\n                            <i class="chart-type-icon ico-symbol-{{symbol}}"></i>\n                        </a>\n                    </li>\n                </ul>\n                <div class="hd">\n                    <label>\u8F68\u8FF9\u6837\u5F0F\u8BBE\u7F6E</label>\n                </div>\n                <div class="row">\n                    <label>\u7C97\u7EC6</label>\n                    <select ng-model="viewData.currentLayer.trajectoryPath.lineWidth" ng-options="g for g in trajectoryLineWidth" ng-change="saveChart({only_redraw: true})"></select>\n                    <div class="gis-trajectory-color">\n                        <label bo-text="\'\u989C\u8272\'"></label><color-style data="viewData.currentLayer.trajectoryPath.lineColor" save-func="saveChart({only_redraw: true})" options="{showAlpha:true}"></color-style>\n                    </div>\n                </div>\n            </div>\n            <div class="block trajectory-style" ng-if="viewData.currentLayer.type === \'d_trajectory\' && viewData.currentLayer.trajectoryImage.enabled">\n                <div class="hd">\u56FE\u7247\u8D44\u6E90</div>\n                <div class="bd">\n                    <input type="text" ng-model="viewData.currentLayer.trajectoryImage.url" class="input-text-block" readonly="readonly" disabled="true" style="width:90px" placeholder="viewData.currentLayer.trajectoryImage.url">\n                    <a class="bdp-btn" ng-click="useImageURI()">\u5E94\u7528</a>\n                </div>\n            </div>\n            <!--/m:dtrajectory-image-->\n        </div>\n    </div>\n</div>\n\n<div gis-edit-guide="" veil-ele="guide-tb-edit" step-num="gisEditGuide" ng-if="showGisEditGuide && gisEditGuide == 0"></div>\n<div gis-edit-guide="" veil-ele="guide-newtype-trajectory" step-num="gisEditGuide" ng-if="showGisEditGuide && gisEditGuide == 1 && !(viewData.currentLayer && viewData.currentLayer.type.indexOf(\'trajectory\') >= 0)"></div>\n<div gis-edit-guide="" veil-ele="time-animation" step-num="gisEditGuide" ng-if="showGisEditGuide && gisEditGuide == 2 && !(viewData.currentLayer && viewData.currentLayer.timeline)"></div>\n\n');
    $templateCache.put('/static/chart-edit/advance-sort/advance-sort-config.html', '<div class="ngdialog-title" bindonce="">\u9AD8\u7EA7\u6392\u5E8F\u89C4\u5219</div>\n<div class="ngdialog-message" bindonce="">\n    <div class="table-adv-sort-tip">\u5141\u8BB8\u6839\u636E\u591A\u5217\u6570\u636E\u4F9D\u6B21\u8FDB\u884C\u6392\u5E8F</div>\n    <div class="bd">\n        <div class="bg-block clearfix">\n\n            <!-- \u5B57\u6BB5 \u533A\u57DF-->\n            <div class="table-field-list block-shadow-right">\n                <div class="block-head">\n                    <p class="nowrap">\u8BF7\u6DFB\u52A0\u9700\u8981\u6392\u5E8F\u7684\u5B57\u6BB5</p>\n                </div>\n\n                <div class="sbd">\n                    <div class="query-box auto no-margin">\n                        <input type="text" class="query-text" bdp-local-query="fieldListInfo" ng-model="query_tpl">\n                    </div>\n                    <ul ng-show="!showLoading" class="user-select-none">\n                        <li class="nowrap dropdown-item" ng-hide="item.hide_by_query" ng-repeat="item in fieldListInfo track by $index">\n                            <p class="name pl8">\n                                <a class="add cursor-pointer" ng-click="addAdvSortField($index)">\u6DFB\u52A0</a>\n                                <span class="inner-name nowrap" title="{{item.name}}">\n                                    {{item.name}}\n                                </span>\n                            </p>\n                        </li>\n                    </ul>\n                    \n                    <div class="bar">\n                        <a class="cursor-pointer cr-bdp" ng-click="addAllAdvSortFields()">\u5168\u90E8\u6DFB\u52A0</a>\n                    </div>\n                </div>\n            </div>\n            <div class="add-list">\n                <div ng-if="sortRuleInfo && sortRuleInfo.length > 0">\n                    <div class="block-head">\n                        <p class="nowrap">\u6392\u5E8F\u89C4\u5219\u4F18\u5148\u7EA7\u7531\u9AD8\u5230\u4F4E</p>\n                    </div>\n                    <div class="sbd br2">\n                        <ul class="user-select-none adv-list" ui-sortable="sortRuleFields" ng-model="sortRuleInfo">\n                            <li class="dropdown-item dropdown-item name clearfix J-sortable-adv-sort" ng-repeat="item in sortRuleInfo track by $index">\n                                <a href="javascript:;" class="del fr" ng-click="deleteRuleField($index)">\u5220\u9664</a>\n                                <i class="bdp-icon ico-order cursor-move fl"></i>\n                                <span class="inner-name-rule nowrap fl" title="{{item.name}}">{{item.name}}</span>\n                                <div class="select-item fl" ng-if="item.axis !== \'y\'">\n                                    <span class="sort-rule-by">\u6309</span>\n                                    <div class="select-search-list-wrap" ng-style="{width: (item.sort_items.sort_item_type != 4 ? \'276px\' : \'90px\')}">\n                                        <div class="select-search-value" ng-click="showDropdown($event, item)" click-outside="item.showDropdown = false" outside-active="item.showDropdown">\n                                            <p class="nowrap select-name" ng-style="{width: (item.sort_items.sort_item_type != 4 ? \'256px\' : \'70px\')}">{{item.sort_items.selectedName}}</p>\n                                            <i class="bdp-icon ico-triangle-down"></i>\n                                        </div>\n                                        <div class="search-list-box" ng-if="item.showDropdown" ng-style="sortItemDropdownStyle">\n                                            <ul>\n                                                <li ng-click="changeSortItem(item, 0)">\n                                                    <span ng-if="item.data_type != \'date\'">\u5B57\u6BCD</span>\n                                                    <span ng-if="item.data_type == \'date\'">\u65E5\u671F</span>\n                                                </li>\n                                                <li ng-click="changeSortItem(item, 1, metric)" ng-repeat="metric in metricFields track by $index" title="{{metric.name}}" ng-if="item.axis == \'x\' || item.axis == \'compare_axis\' && metric.data_type != \'virtual\'">{{metric.name}}</li>\n                                                <li ng-click="changeSortItem(item, 3)" ng-if="item.data_type != \'date\' && chartMeta.chart_type == \'C261\'">\u767E\u5206\u6BD4</li>\n                                                <li ng-click="changeSortItem(item, 2)" ng-if="item.data_type == \'string\'">\u81EA\u5B9A\u4E49</li>\n                                                <li ng-click="changeSortItem(item, 4)"></li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                </div>\n                                <select class="mr8" ng-if="item.sort_items.sort_item_type == 4" ng-model="item.sort_items.aggregator_sort.fid" ng-options="sc.fid as sc.name for sc in tbInfo.schema" ng-change="changeTbInfoSchema(item, item.sort_items.aggregator_sort.fid)" style="width: 122px">\n                                        <option></option>\n                                </select><select class="mr8" ng-if="item.sort_items.sort_item_type == 4 && item.sort_items.aggregator_sort.fid" ng-model="item.sort_items.aggregator_sort.aggregator" ng-options="formulaItem.type as formulaItem.name for formulaItem in formulaList | adv_formula:item.sort_items.aggregator_sort.schame_data_type" ng-change="changeTbInfoSchemaFormula(item, item.sort_items.aggregator_sort.aggregator)" style="width: 48px">\n                                    <option></option>\n                                </select><span class="inner-radio fr" ng-if="item.sort_items.sort_item_type != 2">\n                                    <label>\n                                        <input type="radio" name="{{$index}}" value="asc" ng-model="item.type">\n                                        <span>\u5347\u5E8F</span>\n                                    </label>\n                                    <label>\n                                        <input type="radio" name="{{$index}}" value="desc" ng-model="item.type">\n                                        <span>\u964D\u5E8F</span>\n                                    </label>\n                                </span>\n                                <a href="javascript:;" class="config" ng-if="item.sort_items.sort_item_type == 2" ng-click="showEnumOrderInAdv(item)">\u8BBE\u7F6E</a>\n                            </li>\n                        </ul>\n                        <div class="bar"> \n                            <a class="cursor-pointer cr-bdp" ng-click="clearAllRuleFields()">\u6E05\u7A7A</a></div>\n                    </div>\n                </div>\n                <div class="add-list-none" ng-if="!sortRuleInfo || sortRuleInfo.length == 0">\u4ECE\u5DE6\u4FA7\u5217\u8868\u9009\u62E9\u6DFB\u52A0</div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="ngdialog-buttons" bindonce="">\n    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="tableAdvSortOk()">\u786E\u5B9A</button>\n    <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n</div>\n');
    $templateCache.put('/static/chart-edit/advance-sort/advance-sort.html', '<div bindonce="" class="bdp-icon-wrap cursor-pointer advance-sort-wrap" ng-class="{\n        \'table-adv-sort\': chartMode === \'edit\', \n        \'table-adv-sort-dashboard\': chartMode !== \'edit\', \n        \'adv-sort-table\': chartMeta.chart_type === \'C200\'}" ng-if="advanceSortData.canSetAdvancedSort" ng-click="showTableAdvSort(chartMeta)" ng-mouseover="showAdvTip = !showAdvTip" ng-mouseout="showAdvTip = !showAdvTip" title="\u9AD8\u7EA7\u6392\u5E8F">\n\n    <i class="bdp-icon" ng-class="{true: \'ico-table-adv-sort-cur\', false: \'ico-table-adv-sort\'}[chartMeta.is_advanced_sort == 1 && chartMeta.advanced_sort.length > 0]"></i>\n    <div class="guide-wrap text-left" ng-if="showAdvTip">\n        <div class="box_highlight dot-guide-tip guide-hover-tip-none text-center" ng-if="!chartMeta.advanced_sort || chartMeta.advanced_sort.length == 0 || chartMeta.is_advanced_sort == 0">\n            <p>\u5F53\u524D\u65E0\u9AD8\u7EA7\u6392\u5E8F</p>\n        </div>\n        <div class="box_highlight dot-guide-tip guide-hover-tip" ng-if="chartMeta.is_advanced_sort == 1 && chartMeta.advanced_sort.length > 0">\n            <div class="adv-sort-rule-title">\u9AD8\u7EA7\u6392\u5E8F\u89C4\u5219</div>\n            <ul class="adv-sort-rule-content">\n                <li ng-repeat="item in chartMeta.advanced_sort">\n                    <span class="adv-sort-field">{{item.name}}</span>\n                    <span class="adv-sort-by" ng-if="item.axis != \'y\'">\n                        <span>\u6309</span>\n                        <span ng-if="item.sort_items.sort_item_type != 4">{{item.sort_items.selectedName}}</span>\n                        <span ng-if="item.sort_items.sort_item_type == 4">{{item.sort_items.aggregator_sort.schame_name}}({{item.sort_items.aggregator_sort.formula_name}})</span>\n                    </span>\n                    <span class="adv-sort-order-type" ng-if="item.type == \'asc\'"><i class="trigger-col-sort bdp-icon ico-asc-sort-arrow"></i><span>\u5347\u5E8F</span></span>\n                    <span class="adv-sort-order-type" ng-if="item.type == \'desc\'"><i class="trigger-col-sort bdp-icon ico-desc-sort-arrow"></i><span>\u964D\u5E8F</span></span>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/axis-batch-fields/chart-batch-add-fields.html', '<div bindonce="">\n    <div class="ngdialog-title">{{initText.dialogTitleKeyWord}}</div>\n    <div class="ngdialog-message">\n        <div class="clearfix">\n            <div class="query-box auto no-margin batch-add-search">\n                <input type="text" class="query-text" ng-input-text="" ng-model="batchQuery">\n            </div>\n        </div>\n        <div class="field-scroll-wrap">\n            <dl class="clearfix field-type-list" ng-repeat="fieldTypeItem in fieldTypeList" ng-if="(ngDialogData.fieldList | getFieldsByDataType: fieldTypeItem.type | query_fields:batchQuery).length > 0">\n                <dt class="field-type-title">\n                    <label class="cursor-pointer">\n                        <input class="field-type-selected" type="checkbox" ng-model="fieldTypeItem.selected" ng-if="!batchQuery" ng-change="selectedAllByType(fieldTypeItem.type, fieldTypeItem)">\n                        <i class="bdp-icon ico-no-opacity ico-type-{{fieldTypeItem.type}}"></i>\n                        <span class="field-type-name" ng-if="fieldTypeItem.type == \'string\'">\u6587\u672C</span>\n                        <span class="field-type-name" ng-if="fieldTypeItem.type == \'date\'">\u65E5\u671F</span>\n                        <span class="field-type-name" ng-if="fieldTypeItem.type == \'number\'">\u6570\u503C</span>\n                    </label>\n                </dt>\n                <dd class="field-list-wrap">\n                    <ul class="clearfix">\n                        <li class="field-item" ng-repeat="fieldItem in ngDialogData.fieldList | getFieldsByDataType: fieldTypeItem.type | query_fields:batchQuery">\n                            <label class="cursor-pointer">\n                                <input class="field-selected" type="checkbox" ng-model="fieldItem.selected" ng-disabled="fieldItem.disabled" ng-change="checkBatchAddType(fieldTypeItem.type, fieldTypeItem)">\n                                <span class="field-name nowrap" ng-class="{\'font-text-tip\': fieldItem.disabled,\n                                                 \'border-bottom-5182E4\': (fieldItem.original_name != fieldItem.name || fieldItem.remark)}" field-set-tooltip="fieldItem" tooltip-placement="top-left" ng-if="tbType != \'public\'" title="{{fieldItem.name}}">{{fieldItem.name}}</span>\n                                <span class="field-name nowrap" ng-if="tbType == \'public\'" ng-bind="fieldItem.name"></span>\n                            </label>\n                        </li>\n                    </ul>\n                </dd>\n            </dl>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <p class="cannot-use-tip font-text-tip nowrap">{{initText.dialogFooterTip}}</p>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="batchAdd()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/box-plot-set/box-plot-set.html', '<div class="block-body">\n    <div class="sub-block">\n        <div class="block-header">\u79BB\u7FA4\u70B9\u8BBE\u7F6E</div>\n        <div class="block-body item-content ng-scope">\n            <label>\n                <div>\n                    <input type="radio" ng-model="boxPlotStyle.data.scatter.disabled" ng-value="true" ng-change="boxPlotStyle.setScatter()">\n                    <span>\u4E0D\u533A\u5206\u79BB\u7FA4\u70B9</span>\n                </div>\n            </label>\n            <label>\n                <div>\n                    <input type="radio" ng-model="boxPlotStyle.data.scatter.disabled" ng-value="false" ng-change="boxPlotStyle.setScatter()">\n                    <span>1.5\u500DIQR\u4EE5\u5916\u7684\u6570\u636E\u4F5C\u4E3A\u79BB\u7FA4\u70B9</span>\n                </div>\n            </label>\n        </div>\n    </div>\n    <div class="sub-block">\n        <div class="block-header">\u989C\u8272\u8BBE\u7F6E</div>\n        <div class="pl16">\n            <span class="vertop">\u7BB1\u4F53</span>\n            <span class="inlineblock">\n                <label>\n                    <span class="ml16">\u4E0A</span>\n                    <span class="choose-color-wrap ml5">\n                        <i class="bdp-icon ico-fill-color edit-color ico-no-opacity"></i>\n                        <span class="select-color-exp" style="background-color: {{boxPlotStyle.data.boxPlot.q3color}}"></span>\n                        <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                        <color-picker options="{showAdaption: false,showAlpha: true,clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="" on-change="boxPlotStyle.changeColor(color)" ng-model="boxPlotStyle.data.boxPlot.q3color" on-complete="boxPlotStyle.modifyBoxPlotColor(color, opt, \'legend\', \'top\')">\n                        </color-picker>\n                    </span>\n                    <span class="ml16">\u4E0B</span>\n                    <span class="choose-color-wrap ml5">\n                        <i class="bdp-icon ico-fill-color edit-color ico-no-opacity"></i>\n                        <span class="select-color-exp" style="background-color: {{boxPlotStyle.data.boxPlot.q1color}}"></span>\n                        <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                        <color-picker options="{showAdaption: false,showAlpha: true,clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="" on-change="boxPlotStyle.changeColor(color)" ng-model="boxPlotStyle.data.boxPlot.q1color" on-complete="boxPlotStyle.modifyBoxPlotColor(color, opt, \'legend\', \'bottom\')">\n                        </color-picker>\n                    </span> \n                </label>\n                <div>\n                    <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n                    <select class="line-width-select ml4" ng-model="boxPlotStyle.data.boxPlot.border_width" ng-change="boxPlotStyle.modifyBoxPlotBorderWidth()" ng-options="lineWidth.value as lineWidth.name for lineWidth in boxLineWidth">\n                    </select>\n                    <span class="choose-color-wrap ml16">\n                        <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                        <span class="select-color-exp" style="background-color: {{boxPlotStyle.data.boxPlot.border_color}}"></span>\n                        <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                        <color-picker options="{showAdaption: false,showAlpha: false,clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" is-adaption="boxPlotStyle.data.boxPlot.isAdaption" on-change="boxPlotStyle.changeColor(color)" ng-model="boxPlotStyle.data.boxPlot.border_color" on-complete="boxPlotStyle.modifyBoxPlotColor(color, opt, \'border\')">\n                        </color-picker>\n                    </span>\n                </div>\n            </span>\n        </div>\n        <div class="pl16" ng-class="{\'disabled-color\':boxPlotStyle.data.scatter.disabled}">\n            <span>\u79BB\u7FA4\u70B9</span>\n            <label class="ml5">\n                <span class="choose-color-wrap" ng-class="{\'pick-disabled\':boxPlotStyle.data.scatter.disabled}">\n                    <i class="bdp-icon ico-fill-color edit-color ico-no-opacity"></i>\n                    <span class="select-color-exp" style="background-color: {{boxPlotStyle.data.scatter.color}}"></span>\n                    <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                    <color-picker options="{showAdaption: false,showAlpha: true,clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" on-change="boxPlotStyle.changeColor(color)" ng-model="boxPlotStyle.data.scatter.color" on-complete="boxPlotStyle.modifyScatterColor(color, opt)">\n                    </color-picker>\n                </span>\n                <span class="ml16" ng-class="{\'pick-disabled\':boxPlot.data.scatter.disabled}">\u5C3A\u5BF8</span>\n                <select class="line-width-select ml4" ng-model="boxPlotStyle.data.scatter.radius" ng-change="boxPlotStyle.modifyScatterSize()" ng-options="lineWidth.value as lineWidth.name for lineWidth in chartLineWidth" ng-disabled="boxPlotStyle.data.scatter.disabled">\n                </select>\n            </label>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/bubble-size/bubble-size-setting.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u5C3A\u5BF8\u8BBE\u7F6E</div>\n\t<div class="ngdialog-message bubble-setting-dialog">\n\t\t<div class="bd">\n\t\t\t<div class="row mb10 clearfix" ng-show="bubbleSetting.field.is_build_aggregated != 1 && !(canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode) && !currentMeta.bubble_size_groups)">\n\t\t\t\t<label>\u8BA1\u7B97\u516C\u5F0F</label>\n\t\t\t\t<select class="aggr-selector" ng-model="bubbleSetting.aggregator" ng-change="changeAggr()" ng-options="formula.type as formula.name for formula in formulaList">\n\t\t\t\t\t<option value="" ng-if="!formulaList.length">\u65E0</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div class="row mt10 mb10 clearfix">\n\t\t\t\t<label>\u5C3A\u5BF8\u8303\u56F4</label>\n\t\t\t\t<div range-slider="" min="1" max="20" step="1" ng-class="{\'signle-slider\':(canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode) && currentMeta.bubble_size_groups && currentMeta.bubble_size_groups[0]==currentMeta.bubble_size_groups[1])}" model-min="bubbleSetting.size_range[0]" model-max="bubbleSetting.size_range[1]" show-values="false">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="bg-block" text="{{currentMeta.bubble_size_groups}}">\n\t\t\t\t<!--\u901A\u7528\u5C3A\u5BF8\u8BBE\u7F6E-->\n\t\t\t\t<ul class="pane" ng-if="!canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode)">\n\t\t\t\t\t<li class="size-group" ng-repeat="range in size_groups track by $index">\n\t\t\t\t\t\t<div class="bubble-preview-wrap">\n\t\t\t\t\t\t\t<a class="bubble-preview" ng-style="{width: bubble_size_preview[$index] + \'px\', height: bubble_size_preview[$index] + \'px\'}"></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span> {{range[0]}} ~ {{range[1]}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<!--\u80D6\u7626\u56FE\u5BBD\u5EA6\u8BBE\u7F6E\uFF0C\u62D6\u5165\u4E86\u5B57\u6BB5\uFF0C\u4E0D\u53EF\u62D6\u62FD-->\n\t\t\t\t<ul class="pane" ng-if="canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode) && currentMeta.bubble_size_groups">\n\t\t\t\t\t<li class="size-group">\n\t\t\t\t\t\t<div class="bubble-preview-wrap">\n\t\t\t\t\t\t\t<a class="bubble-preview normal" ng-style="{width: bubble_size_preview[0] + \'px\', height: 11 + \'px\'}"></a>\n\t\t\t\t\t\t</div>\n            <span> {{size_groups[0]}} (<i class="normal">\u6700\u5C0F\u503C</i>)</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="size-group">\n\t\t\t\t\t\t<div class="bubble-preview-wrap">\n\t\t\t\t\t\t\t<a class="bubble-preview normal" ng-style="{width: bubble_size_preview[1] + \'px\', height: 11 + \'px\'}"></a>\n\t\t\t\t\t\t</div>\n            <span> {{size_groups[1]}} (<i class="normal">\u6700\u5927\u503C</i>) </span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="row" ng-if="!(canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode) && !currentMeta.bubble_size_groups)">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" ng-model="bubbleSetting.reverse" ng-change="toggleReverse()">\n\t\t\t\t\t<span>\u5012\u5E8F</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirm()">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\t</div>\n</div>');
    $templateCache.put('/static/chart-edit/bubble-size/bubble-size.html', '<div class="color-setting" data-drop="true" data-jqyoui-options="{accept: \'.field-list .field-drag-title\'}" data-jqyoui-droppable="{onDrop: \'onDrop()\'}" bindonce="">\n    <div ng-click="clickPanel()" text="{{currentMeta.bubble_setting}}">\n        <div class="btn-group" ng-if="currentMeta.bubble_setting && currentMeta.bubble_setting.fid" jqyoui-draggable="{onStart: \'startDrag()\', onDrag: \'removePosition()\',onStop: \'del()\'}" data-drag="true">\n            <div class="tag nowrap">\n                <div class="nowrap">\n                    <span class="field-name nowrap" ng-bind="currentMeta.bubble_setting.field.name"></span>\n                    <em class="field-formula" ng-show="currentMeta.bubble_setting.aggregator">({{formulaKeyMap[currentMeta.bubble_setting.aggregator]}})</em>\n                </div>\n                <i class="bdp-icon ico-config"></i>\n            </div>\n            <div class="dropdown-menu">\n                <ul>\n                    <li class="field-value-item clearfix" ng-repeat="range in size_groups track by $index">\n                        <div class="bubble-preview-wrap">\n                            <a class="bubble-preview" ng-if="!(canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode) && currentMeta.bubble_size_groups)" ng-style="{width: bubble_size_preview[$index] + \'px\', height: bubble_size_preview[$index] + \'px\'}">\n                            </a>\n                            <a class="bubble-preview normal" ng-if="canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode) && currentMeta.bubble_size_groups" ng-style="{width: bubble_size_preview[$index] + \'px\', height: 11 + \'px\'}">\n                            </a>\n                        </div>\n                        <span ng-if="!canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode)"> {{range[0]}} ~ {{range[1]}}</span>\n                        <span ng-if="canSetOverlapSize(currentMeta.chart_type, currentMeta.overlapMode)"> {{range[0]}}</span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!currentMeta.bubble_setting || (currentMeta.bubble_setting && !currentMeta.bubble_setting.fid)" class="no-color-setting">\n        <p>\u62D6\u62FD\u5B57\u6BB5\u5230\u8FD9\u91CC</p>\n        <p>\u8FDB\u884C\u5C3A\u5BF8\u8BBE\u7F6E</p>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/bubble-size/default-overlap-size.html', '<div class="color-setting default-overlap">\n\t<div ng-click="clickPanel()" class="default-overlap-panel"></div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-args/add-param-field.html', '<div click-outside="vmData.fieldWrap = false;" outside-active="vmData.fieldWrap" class="pr">\n    <a class="bdp-btn" ng-click="vmData.addField()" ng-class="{\'active\': vmData.fieldWrap,\'bdp-btn-disabled\': delMode}" ng-if="!vmData.addFieldDisable">\u6DFB\u52A0\u81EA\u5B57\u6BB5</a>\n    <a class="bdp-btn bdp-btn-disabled" ng-if="vmData.addFieldDisable" bdp-tooltip="vmData.addFieldDisableTip" tooltip-placement="top-left">\u6DFB\u52A0\u81EA\u5B57\u6BB5</a>\n    <div class="param-list" ng-if="vmData.fieldWrap">\n        <div ng-if="vmData.fieldListShow" class="height100-i">\n            <div class="search-wrap" ng-if="vmData.fieldList.length > 5">\n                <input type="text" class="bdp-search-input" ng-model="vmData.fieldKeyword" placeholder="\u641C\u7D22">\n            </div>\n            <ul class="mt8">\n                <li ng-repeat="item in vmData.fieldList | filter:vmData.fieldKeyword" ng-click="vmData.getFieldInfoList(item,$event)" class="nowrap" title="{{item.name}}"> {{item.name}}</li>\n                <div ng-if="(vmData.fieldList | filter:vmData.fieldKeyword).length == 0" class="font-text-tip text-center empty-tip-table">\n                    <p class="empty-tip-cell">\u65E0\u68C0\u7D22\u7ED3\u679C</p>\n                </div>\n            </ul>\n            <div ng-loading-gif="" size="size-1x" ng-show="vmData.fieldOptionsListLoading"></div>\n        </div>\n        <div ng-if="vmData.fieldOptiosShow" class="height100-i">\n            <div class="param-list-bd pr">\n                <div class="search-wrap" ng-if="vmData.fieldOptionsList.length > 5">\n                    <input type="text" class="bdp-search-input" ng-model="vmData.fieldContentKeyword" ng-keyup="vmData.searchKeyWord()" placeholder="\u641C\u7D22">\n                </div>\n                <ul class="field-options">\n                    <li ng-repeat="item in vmData.fieldOptionsList | filter:{name:vmData.fieldContentKeyword}" class="nowrap">\n                        <label>\n                            <input type="checkbox" ng-model="item.check" ng-change="vmData.checkOne()" title="{{item.name}}"> {{item.name}}</label>\n                    </li>\n                    <div ng-if="vmData.searchNum === 0 && !vmData.fieldOptionsListLoading" class="font-text-tip text-center empty-tip-table">\n                        <p class="empty-tip-cell">\u65E0\u68C0\u7D22\u7ED3\u679C</p>\n                    </div>\n                </ul>\n            </div>\n            <div class="param-list-ft">\n                <label ng-if="vmData.searchNum !== 0">\n                    <input type="checkbox" ng-model="vmData.fieldCheckAll" ng-change="vmData.checkAll()"> \u5168\u9009<span ng-if="vmData.searchNum !== null">{{vmData.searchNumText}}</span>\n                </label>\n                <div class="fr mr16">\n                    <i class="bdp-icon ico-attention-yellow" ng-if="!vmData.wranOptions && vmData.wranFieldOptions" bdp-tooltip="vmData.fieldOptionsLimitTip" tooltip-placement="top-center"></i>\n                    <i class="bdp-icon ico-attention-red" ng-if="vmData.wranOptions" bdp-tooltip="vmData.checkOptionsLimit" tooltip-placement="top-center"></i>\n                </div>\n            </div>\n            <div class="param-list-btns">\n                <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="vmData.confirmAddOptions()">\u786E\u5B9A</button>\n                <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="vmData.fieldOptiosShow = false;">\u53D6\u6D88</button>\n            </div>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-args/create-param.html', '<div bindonce="" ng-controller="CreateArgsController as vmData">\n    <div class="ngdialog-title">\n        {{ngDialogData.title}}\n    </div>\n    <div class="ngdialog-message">\n        <div class="form-wrap param-form">\n            <div class="form-item">\n                <div class="item-title">\n                    \u53C2\u6570\u540D\u79F0\n                </div>\n                <div class="item-content">\n                    <input type="text" class="param-form-input" ng-model="vmData.name">\n                    <a class="link cr-bdp cursor-pointer ml8" ng-if="!vmData.commentShow" ng-click="vmData.addComment()">\u6DFB\u52A0\u5907\u6CE8</a>\n                </div>\n            </div>\n            <div class="form-item mt16" ng-if="vmData.commentShow">\n                <div class="item-title">\u5907\u6CE8</div>\n                <div class="item-content">\n                    <textarea name="" class="param-form-input" cols="30" rows="10" ng-model="vmData.comment"></textarea>\n                </div>\n            </div>\n            <div class="form-item mt16">\n                <div class="item-title">\n                    \u53C2\u6570\u7C7B\u578B\n                </div>\n                <div class="item-content">\n                    <div class="param-form-body">\n                        <div class="vt" select-search-list="" search-list="vmData.typeOptions" select-data="vmData.type" mode="{{vmData.typeMode}}" query-box-show="false" mode-type="paramType"></div>\n                    </div>\n                </div>\n            </div>\n            <!-- \u6587\u672C \u53EF\u9009\u9879-->\n            <div class="form-item mt16" ng-if="vmData.type == \'string\'">\n                <div class="item-title">\n                    \u53EF\u9009\u9879\n                </div>\n                <div class="item-content">\n                    <div class="options-wrap optons-wrap-string mt8">\n                    <div class="param-form-body optons-wrap-bd">\n                        <div class="box">\n                            <p class="empty-tip" ng-if="vmData.optionsList.length == 0">\u8BF7\u6DFB\u52A0\u53C2\u6570\u53EF\u9009\u9879</p>\n                            <div class="query-box auto" ng-if="vmData.optionsList.length > 5">\n                                <input type="text" class="query-text" ng-class="{\'has-text\': vmData.queryName}" ng-model="vmData.queryName" ng-keydown="vmData.optionSearch()">\n                            </div>\n                            <ul id="create-param-ul" ng-if="vmData.optionsList.length > 0" class="pt8 pr" ng-class="{\'option-del-mode\': vmData.optionsCheckAll}" ui-sortable="vmData.dragOptions" ng-model="vmData.optionsList">\n                                <li ng-repeat="item in vmData.optionsList | filter:{name:vmData.queryName}" ng-class="{\'hover\': guideApi.chartArgsSetDefaultGuide && $index == 0}" flash-guide="chartArgsSetDefaultGuide" fg-show="guideApi.chartArgsSetDefaultGuide && $index == 0" ui-sortable-selectable="" outside-active="item.edit" click-outside="vmData.saveOptionNameBlur(item,$index)">\n                                    <div class="read-view" ng-show="!item.edit">\n                                        <i class="bdp-icon ico-order cursor-move"></i>\n                                        <p class="read-view-name" title="{{item.name}}">\n                                            <label class="label-option-name nowrap">\n                                                <input type="checkbox" ng-model="item.check" class="mr5-i" ng-change="vmData.optionsCheckOne(item)" ng-if="vmData.delMode">{{item.name}} \n                                            </label>\n                                            <span class="font-text-tip" ng-if="item.default">(\u9ED8\u8BA4)</span>\n                                        </p>\n                                        <div class="btns-wrap" ng-if="!vmData.delMode" outside-active="item.moreShow" click-outside="item.moreShow = false;">\n                                            <a class="cursor-pointer" ng-click="vmData.showMoreList(item,$event)"><i class="bdp-icon ico-more"></i></a>\n                                            <ul class="more-list" ng-if="item.moreShow">\n                                                <li>\n                                                    <p class="cursor-pointer item" ng-click="vmData.setDefault(item);item.moreShow = false;">\u8BBE\u4E3A\u9ED8\u8BA4\u503C</p>\n                                                </li>\n                                                <li>\n                                                    <p class="cursor-pointer item" ng-click="vmData.editOptionsName(item,$event)">\u91CD\u547D\u540D</p>\n                                                </li>\n                                                <li>\n                                                    <p class="cursor-pointer item" ng-click="vmData.deleteOptons(item)">\u5220\u9664</p>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    <div class="edit-view" ng-if="item.edit">\n                                        <input type="text" ng-model="item.name" ng-blur="vmData.saveOptionNameBlur(item,$index)" ng-keydown="vmData.saveOptionName(item,$index,$event)" placeholder="\u8F93\u5165\u6309\u56DE\u8F66\u952E\u6DFB\u52A0">\n                                    </div>\n                                </li>\n                                <li ng-if="vmData.optionsList.length >0 && (vmData.optionsList | filter:{name:vmData.queryName}).length == 0" class="font-text-tip text-center">\u65E0\u68C0\u7D22\u7ED3\u679C</li>\n                            </ul>\n                        </div>\n                        <div class="box-ft">\n                            <div ng-if="!vmData.delMode" class="add-wrap">\n                                <input type="text" ng-model="vmData.addStringOptionName" ng-keydown="vmData.addOptionName($event)" placeholder="\u8F93\u5165\u6309\u56DE\u8F66\u952E\u6DFB\u52A0">\n                                    <a class="add-btn cursor-pointer" ng-click="vmData.addOptionNameEnter($event)">\n                                        <i class="bdp-icon ico-plus1" ng-class="{\'opacity4-i\': !vmData.addStringOptionName}"></i>\n                                    </a>\n                            </div>\n                            <div ng-if="vmData.delMode && (vmData.optionsList | filter:{name:vmData.queryName}).length != 0">\n                                <label> <input type="checkbox" ng-model="vmData.optionsCheckAll" class="mr5-i" ng-change="vmData.optionsCheckAllHandle()"> \u5168\u9009</label>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="options-wrap-rt pr">\n                        <div class="add-field-wrap">\n                            <add-param-field tb-id="vmData.tbId" options-num="vmData.optionsList.length" del-mode="vmData.delMode" param-type="vmData.type" ct-id="ngDialogData.ctId" origin-field-list="vmData.originFieldList" set-options-val="vmData.confirmAddOptions(param)"></add-param-field>\n                        </div>\n                        <!-- \u6DFB\u52A0\u81EA\u6587\u672C - start -->\n                        <div class="mt8 pr" outside-active="vmData.manuallyEnterBox" click-outside="vmData.manuallyEnterBox = false;">\n                            <a class="bdp-btn" ng-class="{\'bdp-btn-disabled\': vmData.delMode,\'active\': vmData.manuallyEnterBox}" ng-click="vmData.manuallyEnter()">\u6DFB\u52A0\u81EA\u6587\u672C</a>\n                            <div class="manually-enter-box" ng-if="vmData.manuallyEnterBox">\n                                <div class="manually-enter-box-bd">\n                                    <div class="text-area" ng-if="vmData.manuallyEnterParse == \'input\'">\n                                        <textarea name="" ng-model="vmData.enterInput" placeholder="\u8BF7\u76F4\u63A5\u8F93\u5165 (\u56DE\u8F66\u5206\u9694) \u6216\u7C98\u8D34"></textarea>\n                                    </div>\n                                    <div ng-if="vmData.manuallyEnterParse == \'parse\'" class="manually-enter-box-bd-list">\n                                        <div ng-if="vmData.enterList.length > 5">\n                                            <input type="text" class="bdp-search-input" ng-model="vmData.queryEnterName" ng-keyup="vmData.searchKeyWord()" placeholder="\u641C\u7D22">\n                                        </div>\n                                        <ul class="pt8">\n                                            <li ng-repeat="item in vmData.enterList | filter:{name:vmData.queryEnterName}">\n                                                <label><input type="checkbox" ng-model="item.check" ng-change="vmData.enterCheckOneChange()"> {{item.name}}</label>\n                                            </li>\n                                            <li ng-if="(vmData.enterList | filter:{name:vmData.queryEnterName}).length == 0" class="font-text-tip text-center">\u65E0\u68C0\u7D22\u7ED3\u679C</li>\n                                        </ul>\n                                    </div>\n                                </div>\n                                <div class="manually-enter-box-ft">\n                                    <div class="check-all-wrap" ng-if="vmData.manuallyEnterParse == \'parse\'">\n                                        <label ng-if="(vmData.enterList | filter:{name:vmData.queryEnterName}).length > 0">\n                                            <input type="checkbox" ng-model="vmData.enterCheckAll" ng-change="vmData.enterCheckAllChange()"> \u5168\u9009<span ng-if="vmData.searchNum !== null">{{vmData.searchNumText}}</span></label>\n                                        <div class="fr">\n                                            <i class="bdp-icon ico-attention-red" ng-if="vmData.optionsNumLimit" bdp-tooltip="vmData.checkOptionsLimitTip" tooltip-placement="top-center"></i>\n                                    </div>\n                                    </div>\n                                    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-class="{\'opacity6\': !vmData.enterInput}" ng-disabled="!vmData.enterInput" ng-click="vmData.manuallyEnterContinue()">{{vmData.enterBtnText}}</button>\n                                    <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="vmData.manuallyEnterBox = false;">\u53D6\u6D88</button>\n                                </div>\n                            </div>\n                            <!-- \u6DFB\u52A0\u81EA\u6587\u672C - end -->\n                        </div>\n                        <div class="options-wrap-rt-ft">\n                            <!-- <button ng-if="vmData.btnStatus.clearAllBtn" class="bdp-btn  cursor-pointer" ng-class="{\'bdp-btn-disabled\': vmData.optionsList.length == 0}" ng-disabled="vmData.optionsList.length == 0" ng-click="vmData.deleteAllOptions()">\u6279\u91CF\u6E05\u9664</button> -->\n                            <button class="bdp-btn cursor-pointer" ng-class="{\'bdp-btn-disabled\' : vmData.optionsList.length == 0}" ng-disabled="vmData.optionsList.length == 0" ng-click="vmData.deleteSelectedOptions()">{{vmData.delBtnText}}</button>\n                            <button class="bdp-btn cursor-pointer mt16" ng-if="vmData.delMode" ng-click="vmData.optionsCancelDel()">\u53D6\u6D88</button>\n                        </div>\n                    </div>\n                    </div>\n                </div>\n            </div>\n            <div class="form-item mt16" ng-if="vmData.type == \'string\'">\n                <div class="item-title">\u9ED8\u8BA4\u503C</div>\n                <div class="item-content">\n                    <span class="pl8 font-text-tip" ng-if="!vmData.defaultSringVal">\u65E0</span>\n                    <span class="pl8 default-string-val nowrap">{{vmData.defaultSringVal}}</span>\n                </div>\n            </div>\n            <!-- \u6570\u503C \u53EF\u9009\u9879\u8303\u56F4\u8BBE\u7F6E-->\n            <div class="form-item mt16" ng-if="vmData.type == \'number\'">\n                <div class="item-title">\u6570\u503C\u683C\u5F0F</div>\n                <div class="item-content options-wrap">\n                    <label>\n                        <input type="radio" ng-model="vmData.numberType" value="normal"> \u6570\u503C</label>\n                    <label class="ml16">\n                        <input type="radio" ng-model="vmData.numberType" value="percent"> \u767E\u5206\u6BD4</label>\n                </div>\n            </div>\n            <div class="form-item mt16" ng-if="vmData.type == \'number\'">\n                <div class="item-title">\u53EF\u9009\u8303\u56F4</div>\n                <div class="item-content options-wrap">\n                    <div class="param-form-body optons-wrap-bd optons-wrap-number">\n                        <div class="mt8">\n                            <span>\u6700\u5C0F\u503C</span>\n                            <input type="number" ng-model="vmData.minNum" class="w100px ml8" ng-disabled="vmData.minDisable"> <span ng-if="vmData.numberType == \'percent\'" ng-class="{\'opacity4\':vmData.minDisable}">%</span>\n                            <label class="ml16">\n                                <input type="checkbox" ng-model="vmData.minDisable"> \u4E0D\u9650\n                            </label>\n                        </div>\n                        <div>\n                            <span>\u6700\u5927\u503C</span>\n                            <input type="number" ng-model="vmData.maxNum" class="w100px ml8" ng-disabled="vmData.maxDisable"> <span ng-if="vmData.numberType == \'percent\'" ng-class="{\'opacity4\':vmData.maxDisable}">%</span>\n                            <label class="ml16"><input type="checkbox" ng-model="vmData.maxDisable"> \u4E0D\u9650</label>\n                        </div>\n                    </div>\n                    <div class="options-wrap-rt pr">\n                        <div class="add-field-wrap">\n                            <add-param-field tb-id="vmData.tbId" param-type="vmData.type" origin-field-list="vmData.originFieldList" set-options-val="vmData.confirmAddOptions(param)"></add-param-field>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="form-item mt16" ng-if="vmData.type == \'number\'">\n                <div class="item-title">\u9ED8\u8BA4\u503C</div>\n                <div class="item-content">\n                    <input type="number" class="param-form-input" ng-model="vmData.defaultNumberVal"> <span ng-if="vmData.numberType == \'percent\'">%</span>\n                </div>\n            </div>\n            <!-- \u65E5\u671F \u53EF\u9009\u9879\u8303\u56F4\u8BBE\u7F6E-->\n            <div class="form-item mt16" ng-if="vmData.type == \'date\'">\n                <div class="item-title">\u65E5\u671F\u683C\u5F0F</div>\n                <div class="item-content options-wrap">\n                    <label><input type="radio" ng-model="vmData.dateType" ng-change="vmData.switchDateType()" value="date"> \u65E5\u671F\u683C\u5F0F</label>\n                    <label class="ml16"><input type="radio" ng-change="vmData.switchDateType()" ng-model="vmData.dateType" value="time"> \u65E5\u671F\u65F6\u95F4</label>\n                </div>\n            </div>\n            <div class="form-item mt16" ng-if="vmData.type == \'date\'">\n                <div class="item-title">\u53EF\u9009\u8303\u56F4</div>\n                <div class="item-content options-wrap">\n                    <div class="param-form-body optons-wrap-bd optons-wrap-date">\n                        <div class="mt8">\n                            <span>\u5F00\u59CB\u65E5\u671F</span>\n                            <set-date-value date="vmData.minDate" date-type="vmData.dateType" default-val="vmData.defaultMinDate" date-verify="vmData.minDateVerify" class="display-inline-block ml8"></set-date-value>\n                        </div>\n                        <div>\n                            <span>\u7ED3\u675F\u65E5\u671F</span>\n                            <set-date-value date="vmData.maxDate" date-type="vmData.dateType" default-val="vmData.defaultMaxDate" date-verify="vmData.maxDateVerify" class="display-inline-block ml8" set-date-back="vmData.setDateVal()"></set-date-value>\n                        </div>\n                    </div>\n                    <div class="options-wrap-rt pr">\n                        <div class="add-field-wrap">\n                            <add-param-field tb-id="vmData.tbId" param-type="vmData.type" origin-field-list="vmData.originFieldList" set-options-val="vmData.confirmAddOptions(param)"></add-param-field>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="form-item mt16" ng-if="vmData.type == \'date\'">\n                <div class="item-title">\u9ED8\u8BA4\u503C</div>\n                <div class="item-content pr" outside-active="vmData.showDefaultPicker" click-outside="vmData.showDefaultPicker = false;">\n                    <set-date-value date="vmData.defaultDateVal" date-type="vmData.dateType" date-picker-position="top" date-verify="vmData.defaultDateVerify" unlimited-show="false" class="display-inline-block"></set-date-value>\n                    <!-- <input type="text" class="param-form-input" readonly ng-click="vmData.showDefaultPicker = true;" ng-model="vmData.defaultDateVal">\n                    <div date-picker="vmData.defaultDateVal" ng-disabled="disableDatePickers" class="date-picker date-picker-default-date" min-date="vmData.minDate" max-date="vmData.maxDate" view="date"\n                        min-view="date" ng-show="vmData.showDefaultPicker"></div> -->\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="vmData.goHelp(\'chartArgs\')">\n            <i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span>\n        </span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="vmData.save()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/chart-args/set-args-permission.html', '<div bindonce="" class="ngdialog-set-hide-params">\n    <div class="ngdialog-title">\n        \u4EEA\u8868\u76D8\u53C2\u6570\u663E\u793A\u8BBE\u7F6E\n    </div>\n    <div class="ngdialog-message project-list-common">\n        <p class="ngdialog-message-derc">\u8BF7\u8BBE\u7F6E\u5728\u4EEA\u8868\u76D8\u4E2D\u9690\u85CF\u7684\u53C2\u6570</p>\n        <div class="query-box auto mt8">\n            <input type="text" class="query-text" ng-model="queryText" ng-class="{\'has-text\': !!queryText}">\n        </div>\n\n        <div class="proj-dash-list mt8">\n            <ul>\n                <li ng-repeat="param in argList | query_fields:queryText track by $index" class="project-item" ng-class="{\'item-hidden\': !param.display}">\n                    <div class="cat-op-parent">\n                        <span class="bdp-icon-wrap">\n                            <i class="bdp-icon ico-type-{{param.ico_type}}"></i>\n                        </span>\n                        <span class="name-wrap nowrap">{{param.name}}</span>\n                        <i class="bdp-icon fr ico-hide-eye cursor-pointer" ng-click="changeState(param)" bdp-tooltip="getOptTip(param)" tooltip-placement="top"></i>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="save()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-axis-style/chart-set-axis-style.html', '\n<div class="chart-style-block" bindonce="">\n    <div class="block-header">\n        <label>\n            <input type="checkbox" ng-model="axisStyle.data.enabled" ng-change="axisStyle.onAxisEnabledChanged(\'line\')">\n            <span>\u663E\u793A\u5750\u6807\u8F74</span>\n        </label>\n    </div>\n    <div class="block-body">\n        <i class="bdp-icon ico-line-style ico-no-opacity"></i>\n        <div line-style-select="" class="ml4" val-selected="axisStyle.data.lineStyle" val-change="axisStyle.onLineStyleChanged(\'line\', \'style\')" click-disabled="!axisStyle.data.enabled"></div>\n        <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n        <select class="line-width-select ml4" ng-model="axisStyle.data.lineWidth" ng-change="axisStyle.onLineStyleChanged(\'line\', \'width\')" ng-options="lineWidth.value as lineWidth.name for lineWidth in axisStyle.chartLineWidth" ng-disabled="!axisStyle.data.enabled">\n        </select>\n        <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!axisStyle.data.enabled}" ng-if="axisStyle.colorPickerOpt">\n            <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n            <span class="select-color-exp" style="background-color: {{axisStyle.data.lineColor}}"></span>\n            <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n            <color-picker options="axisStyle.colorPickerOpt" not-two-way-binding="\'no-binding\'" is-adaption="axisStyle.data.lineColorAdaption" ng-model="axisStyle.data.lineColor" on-change="axisStyle.changeColor(color)" on-complete="axisStyle.modifyColor(color, opt, \'line\')"></color-picker>\n        </span>\n    </div>\n    <div class="block-header" ng-show="axisStyle.type != \'xAxis\' || axisStyle.chartType == \'C280\'">\n        <label class="cursor-pointer">\n            <input type="checkbox" ng-model="axisStyle.data.title.enabled" ng-change="axisStyle.onAxisEnabledChanged(\'title\')">\n            <span>\u663E\u793A\u6807\u9898\u548C\u5355\u4F4D</span>\n        </label>\n    </div>\n    <div class="block-body" ng-show="axisStyle.type != \'xAxis\' || axisStyle.chartType == \'C280\'">\n        <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n        <select class="font-family-select ml4" ng-model="axisStyle.data.title.fontFamily" ng-change="axisStyle.onLineStyleChanged(\'title\', \'font\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in axisStyle.chartFontFamily" ng-disabled="!axisStyle.data.title.enabled">\n        </select>\n        <select class="font-size-select ml4" ng-model="axisStyle.data.title.fontSize" ng-change="axisStyle.onLineStyleChanged(\'title\', \'size\')" ng-options="fontSize.value as fontSize.name for fontSize in axisStyle.chartFontSize" ng-disabled="!axisStyle.data.title.enabled">\n        </select>\n        <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!axisStyle.data.title.enabled}" ng-if="axisStyle.colorPickerOpt">\n            <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n            <span class="select-color-exp" style="background-color: {{axisStyle.data.title.color}}"></span>\n            <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n            <color-picker options="axisStyle.colorPickerOpt" not-two-way-binding="\'no-binding\'" is-adaption="axisStyle.data.title.colorAdaption" ng-model="axisStyle.data.title.color" on-change="axisStyle.changeColor(color)" on-complete="axisStyle.modifyColor(color, opt, \'title\')"></color-picker>\n        </span>\n    </div>\n    <div class="block-header">\n        <label class="cursor-pointer">\n            <input type="checkbox" ng-model="axisStyle.data.labels.enabled" ng-change="axisStyle.onAxisEnabledChanged(\'labels\')">\n            <span>\u663E\u793A\u6807\u7B7E</span>\n        </label>\n    </div>\n    <div class="block-body">\n        <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n        <select class="font-family-select ml4" ng-model="axisStyle.data.labels.fontFamily" ng-change="axisStyle.onLineStyleChanged(\'labels\', \'font\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in axisStyle.chartFontFamily" ng-disabled="!axisStyle.data.labels.enabled">\n        </select>\n        <select class="font-size-select ml4" ng-model="axisStyle.data.labels.fontSize" ng-change="axisStyle.onLineStyleChanged(\'labels\', \'size\')" ng-options="fontSize.value as fontSize.name for fontSize in axisStyle.chartFontSize" ng-disabled="!axisStyle.data.labels.enabled">\n        </select>\n        <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!axisStyle.data.labels.enabled}" ng-if="axisStyle.colorPickerOpt">\n            <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n            <span class="select-color-exp" style="background-color: {{axisStyle.data.labels.color}}"></span>\n            <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n            <color-picker options="axisStyle.colorPickerOpt" not-two-way-binding="\'no-binding\'" is-adaption="axisStyle.data.labels.colorAdaption" ng-model="axisStyle.data.labels.color" on-change="axisStyle.changeColor(color)" on-complete="axisStyle.modifyColor(color,  opt, \'labels\')"></color-picker>\n        </span>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-axis-style/chart-set-xaxis.html', '<div class="row no-margin">\n\t<label class="label-head">\u6807\u9898</label>\n\t<input ng-model="chartSetting.xaxis.name" type="text" class="input-text-block l-input" ng-keyup="judgeIsEnterPressForX($event)" ng-blur="saveXaxisVareCheckDirty()">\n</div>\n<div class="row">\n\t<label class="label-head">\u5355\u4F4D</label>\n\t<input ng-model="chartSetting.xaxis.unit" type="text" class="input-text-block l-input" ng-keyup="judgeIsEnterPressForX($event)" ng-blur="saveXaxisVareCheckDirty()">\n</div>\n');
    $templateCache.put('/static/chart-edit/chart-config/chart-config.html', '<div class="chart-config-container" bindonce="">\n    <!-- \u56FE\u8868\u540D\u79F0 start-->\n    <div class="block chart-title" ng-if="chartConfig.canEditChartTitle">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u56FE\u8868\u6807\u9898</div>\n        <div class="block-body">\n            <input type="text" ng-model="chart_ops.name" class="input-text-block" ng-click="ifClearName($event)" ng-keydown="ifEnterDown($event)" ng-blur="saveAfterCheckDirty({not_need_redraw:true,only_refresh_data:false,closeDialog:false})" ng-disabled="selected_type === \'C310\'" placeholder="\u672A\u547D\u540D\u56FE\u8868">\n        </div>\n    </div>\n    <!-- \u56FE\u8868\u540D\u79F0 end -->\n    <!-- \u56FE\u8868\u7C7B\u578B start -->\n    <div class="block chart-type" ng-if="chartConfig.canEditChartType">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u56FE\u8868\u7C7B\u578B</div>\n        <div class="block-body mt8">\n            <ul>\n                <li ng-repeat="type in chart_type" ng-mouseover="showChartTypeTip(type.type, $event)" ng-mouseleave="hideChartTypeTip(type.type, $event)">\n                    <a ng-if="type.status" ng-class="{\'active\':(type.type == selected_type) || ([\'C271\', \'C272\', \'C273\'].indexOf(selected_type) >= 0 && type.type == \'C271\') || ([\'C300\', \'C301\'].indexOf(selected_type) >= 0 && type.type == \'C301\')}" ng-click="switchChartType($index)">\n                        <i class="chart-type-icon {{type.type}}"></i>\n                    </a>\n                    <a ng-if="!type.status" class="disabled" ng-click="switchChartType($index, !type.status)">\n                        <i class="chart-type-icon {{type.type}}"></i>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <!-- \u56FE\u8868\u7C7B\u578B end -->\n    <!-- \u56FE\u5185\u7B5B\u9009\u5668 start -->\n    <div class="block chart-inner-filter-level" ng-show="chartConfig.canEditInnerFilter" chart-inner-filter-level="" isgraft="isGraftTb" opts="chart_ops" chartid="chartid" save="saveChartImmediate" fields="field_list" toggle-block="chartConfig.toggleNextBlock"></div>\n    <!-- \u56FE\u5185\u7B5B\u9009\u5668 end -->\n    <!-- \u56FE\u5185\u53C2\u6570 start -->\n    <div class="block" ng-show="chart_ops.meta.param_setting.length > 0" chart-inner-args="" arg-tb-id="tb_id" arg-ct-id="ct_id" arg-save="saveChartImmediate" arg-view-meta="chart_ops.meta" toggle-block="chartConfig.toggleNextBlock"></div>\n    <!-- \u56FE\u5185\u53C2\u6570 end -->\n\n    <!-- \u8BA1\u91CF\u56FE\u7279\u6B8A\u914D\u7F6E start -->\n    <div class="block chart-gauge" ng-if="chartConfig.canEditGaugeSpec">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u8868\u76D8\u914D\u7F6E</div>\n        <div class="block-body">\n            <div gauge-setting="" opts="chart_ops" gauge-list="field_list" save="lazySaveChart" global="global" language="language"></div>\n        </div>\n    </div>\n    <!-- \u8BA1\u91CF\u56FE\u7279\u6B8A\u914D\u7F6E end -->\n    <!-- \u5361\u7247\u8868\u7279\u6B8A\u914D\u7F6E start -->\n    <div class="block chart-text" ng-if="chartConfig.canEditCardStyle">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)"></div>\n        <div class="block-body">\n            <div class="sub-block">\n                <!-- <span bo-text="\'\u8DF3\u8F6C\u5730\u5740\uFF1A\'|translate"></span>\n                <input class="bg-url-input" type="text" bo-placeholder="\'url\u8DF3\u8F6C\u5730\u5740\'|translate" ng-model="viewMeta.card.cardUrl"/>\n                <button class="bdp-btn" ng-click="changeCardUrl()"><span bdp-replace bo-text="\'dash.advDash.apply\'|translate"></span></button> -->\n                <label>\n                    <input type="checkbox" ng-model="viewMeta.card.useUrl" ng-change="changeCard(\'show\')">\n                    <span></span>\n                    <input class="card-url-input" type="text" ng-model="card.url" ng-change="changeCardUrl()">\n                </label>\n                <div ng-if="viewMeta.card.useUrl" class="pl10">\n                    <div>\n                        <label>\n                            <input type="radio" name="card-open-type" value="new" ng-model="viewMeta.card.openType" ng-change="changeCard(\'openType\')">\n                            <span></span>\n                        </label>\n                    </div>\n                    <div>\n                        <label>\n                            <input type="radio" name="card-open-type" value="current" ng-model="viewMeta.card.openType" ng-change="changeCard(\'openType\')">\n                            <span></span>\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!-- \u5361\u7247\u8868\u7279\u6B8A\u914D\u7F6E end -->\n    <!-- \u8BCD\u4E91\u7279\u6B8A\u914D\u7F6E start -->\n    <div class="block chart-wordcloud" ng-if="chartConfig.canEditWordcloudSpec">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u5206\u8BCD\u8BBE\u7F6E</div>\n        <div class="block-body">\n            <div class="sub-block">\n                <label class="cursor-pointer">\u5206\u8BCD\u6570\u91CF</label>\n                <input class="ml8" type="number" ng-model="viewMeta.word_count" max="{{maxWordCount}}" min="0" step="5" ng-keydown="saveWordCount($event)" ng-blur="saveWordCountModify()">\n                <span>\u6700\u591A200\u4E2A</span>\n            </div>\n            <div class="sub-block">\n                <label class="cursor-pointer">\n                    <input type="checkbox" ng-model="viewMeta.smart" ng-change="changeSmart()">\n                    <span>\u667A\u80FD\u5206\u8BCD</span>\n                </label>\n                <i class="bdp-icon ico-filter ml16 mt8 cursor-pointer fr" ng-if="viewMeta.smart" wordcount-result-filter="" word-count="chart_ops.meta.level[drill_level]" all-word="global.chartData" reflash-method="lazySaveChart()"></i>\n            </div>\n        </div>\n    </div>\n    <!-- \u8BCD\u4E91\u7279\u6B8A\u914D\u7F6E end -->\n    <!-- \u7BB1\u7EBF\u56FE\u914D\u7F6E start -->\n    <div class="block chart-box-plot" ng-if="chartConfig.canEditBoxPlot">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u7BB1\u7EBF\u56FE\u8BBE\u7F6E</div>\n        <div box-plot-set="" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})"></div>\n    </div>\n    <!-- \u7BB1\u7EBF\u56FE\u914D\u7F6E end -->\n    <!-- \u8868\u683C\u7279\u6B8A\u914D\u7F6E start -->\n    <div class="block chart-table-statistic" ng-if="chartConfig.canEditTableSpec">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u8868\u683C\u8BBE\u7F6E</div>\n        <div class="block-body">\n            <div class="sub-block statistic">\n                <div class="block-body">\n                    <div table-statistic=""></div>\n                </div>\n            </div>\n            <div class="sub-block">\n                <input type="checkbox" ng-model="viewMeta.tb_merge_cell" ng-change="onNormalCheckChanged(viewMeta.tb_merge_cell, [\'chart.mergeCell\'])">\n                <span>\u5408\u5E76\u540C\u7C7B\u5355\u5143\u683C</span>\n            </div>\n            <div class="sub-block">\n                <input type="checkbox" ng-model="viewMeta.tb_statistic.showRowOrder" ng-change="saveChartImmediate()">\n                <span>\u6DFB\u52A0\u884C\u5E8F\u5217</span>\n            </div>\n            <div class="sub-block">\n                <input type="checkbox" ng-model="viewMeta.tb_statistic.showColOrder" ng-change="saveChartImmediate()">\n                <span>\u6DFB\u52A0\u5217\u5E8F\u5217</span>\n            </div>\n            \n        </div>\n    </div>\n    <!-- \u8868\u683C\u7279\u6B8A\u914D\u7F6E end -->\n    <!-- \u529F\u80FD\u914D\u7F6E start -->\n    <div class="block chart-feature" ng-show="chartConfig.canEditChartFeature">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u529F\u80FD\u914D\u7F6E</div>\n        <div class="block-body">\n            <!-- \u9884\u8B66\u7EBF start -->\n            <div chart-warn="" tb-field-list="field_list" tb-can-edit="chartTbCanEdit" ng-show="chartConfig.canEditWarnLine"></div>\n            <!-- \u9884\u8B66\u7EBF end -->\n            <!-- \u8F85\u52A9\u7EBF start -->\n            <div plot-line="" ng-show="chartConfig.canEditPlotLine"></div>\n            <!-- \u8F85\u52A9\u7EBF end -->\n            <!-- \u6761\u4EF6\u683C\u5F0F start -->\n            <div table-conditional-formatting="" ng-if="chartConfig.canEditConditionFormat"></div>\n            <!-- \u6761\u4EF6\u683C\u5F0F end -->\n            <!-- \u663E\u793A\u6761\u76EE\u6570 start -->\n            <div class="sub-block top-chart-block show-item" ng-if="chartConfig.canEditTopChart">\n                <div class="block-header">\u663E\u793A\u6761\u76EE\u6570</div>\n                <div class="block-body item-content" top-chart=""></div>\n            </div>\n            <!-- \u663E\u793A\u6761\u76EE\u6570 end -->\n            <!-- \u6570\u636E\u6807\u6CE8 start -->\n            <div class="sub-block chart-mark-point" ng-show="chartConfig.canEditMarkPoint">\n                <div class="block-header no-margin"><span>\u6570\u636E\u6807\u6CE8</span>\n                    <a mark-point="" class="fr bdp-icon-wrap hd-icon" ng-click="addMarkPoint()">\n                        <i class="bdp-icon ico-plus1"></i>\n                    </a>\n                </div>\n                <div class="block-body" ng-show="right_comment.length > 0">\n                    <ul class="mark-point-list">\n                        <li ng-repeat="fc in right_comment track by $index" class="clearfix" ng-mouseover="fr_hover = true" ng-mouseleave="fr_hover = false" ng-click="show_makePoint_model($index)">\n                            <p class="fl nowrap data-anntation" ng-bind="fc.comment"></p>\n                            <div class="fr" ng-show="fr_hover">\n                                <a class="bdp-icon-wrap edit" ng-click="editMarkPoint(fc, ct_id,$event)" title="\u7F16\u8F91">\n                                    <i class="bdp-icon ico-edit"></i>\n                                </a>\n                                <a class="bdp-icon-wrap del" ng-click="removeMarkPointById(ct_id, fc.fc_id, $event)" title="\u5220\u9664">\n                                    <i class="bdp-icon ico-trash"></i>\n                                </a>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <!-- \u6570\u636E\u6807\u6CE8 end -->\n            <!-- \u5BF9\u6BD4\u62C6\u5206 start -->\n            <div class="sub-block chart-split-compare" ng-if="chartConfig.canEditSplitCompare">\n                <div class="block-header" ng-if="selected_type !== \'C310\' && selected_type !== \'C261\'">\n                    <div class="row">\n                        <label>\n                            <input type="checkbox" ng-model="viewMeta.split_compare" ng-change="onNormalCheckChanged(viewMeta.split_compare, [\'chart.splitCompare\'])">\n                            <span>\u6309\u5BF9\u6BD4\u62C6\u5206</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="block-header" ng-if="viewMeta.split_compare || (selected_type == \'C310\' || selected_type == \'C261\')">\n                    <div class="row">\u5355\u5C4F\u663E\u793A\u6570\u91CF</div>\n                </div>\n                <div class="block-body" ng-if="viewMeta.split_compare || (selected_type == \'C310\' || selected_type == \'C261\')">\n                    <div class="row">\n                        <label>\u884C\u6570</label>\n                        <input ng-model="viewMeta.split_compare_setting.rows" type="number" max="6" min="1" step="1" class="s-input rows-num" ng-blur="saveSplitCompareSetting(\'rows\')">\n                        <label>\u5217\u6570</label>\n                        <input ng-model="viewMeta.split_compare_setting.cols" type="number" max="6" min="1" step="1" class="s-input cols-num" ng-blur="saveSplitCompareSetting(\'cols\')">\n                    </div>\n                </div>\n            </div>\n            <!-- \u5BF9\u6BD4\u62C6\u5206 end -->\n        </div>\n    </div>\n    <!-- \u529F\u80FD\u914D\u7F6E end -->\n    <!-- \u6570\u503C\u8BBE\u7F6E start -->\n    <div class="block chart-value" ng-if="chartConfig.canEditChartNumercial">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u6570\u503C\u8BBE\u7F6E</div>\n        <div class="block-body">\n            <div class="sub-block" ng-if="chartConfig.canEditTrendLine">\n                <label class="cursor-pointer">\n                    <input type="checkbox" class="mr8" ng-model="viewMeta.scatter_setting.enable_trend_line" ng-change="enable_trend_line()">\n                    <span>\u663E\u793A\u8D8B\u52BF\u7EBF</span>\n                </label>\n                <ul class="trend-line-types" ng-show="viewMeta.scatter_setting.enable_trend_line">\n                    <li>\n                        <label>\n                            <input type="radio" ng-model="viewMeta.scatter_setting.trend_line_type" value="1" ng-change="trend_line_type_change()">\n                            <i class="bdp-icon ico-linear-line"></i>\n                            <span>\u7EBF\u6027</span>\n                        </label>\n                    </li>\n                    <li>\n                        <label>\n                            <input type="radio" ng-model="viewMeta.scatter_setting.trend_line_type" value="4" ng-change="trend_line_type_change()">\n                            <i class="bdp-icon ico-polynomial-line"></i>\n                            <span>\u591A\u9879\u5F0F</span>\n                        </label>\n                        <label class="fr">\n                            <span>\u987A\u5E8F</span>\n                            <input class="s-input" type="number" max="6" min="2" step="1" value="2" ng-disabled="viewMeta.scatter_setting.trend_line_type != 4" ng-model="viewMeta.scatter_setting.poly_p" ng-blur="onPolynomialBlur()" ng-keyup="onPolynomialEnter($event)">\n                        </label>\n                    </li>\n                    <li>\n                        <label>\n                            <input type="radio" ng-model="viewMeta.scatter_setting.trend_line_type" value="2" ng-change="trend_line_type_change()">\n                            <i class="bdp-icon ico-log-line"></i>\n                            <span>\u5BF9\u6570</span>\n                        </label>\n                    </li>\n                    <li>\n                        <label>\n                            <input type="radio" ng-model="viewMeta.scatter_setting.trend_line_type" value="3" ng-change="trend_line_type_change()">\n                            <i class="bdp-icon ico-exp-line"></i>\n                            <span>\u6307\u6570</span>\n                        </label>\n                    </li>\n                </ul>\n            </div>\n            <div class="sub-block chart-cumulative" ng-if="chartConfig.canEditCumulative">\n                <label class="cursor-pointer">\n                    <input type="checkbox" class="mr8" ng-model="viewMeta.waterfall_setting.show_sum" ng-change="onNormalCheckChanged(viewMeta.waterfall_setting.show_sum, [\'chart.showSumValue\'], {only_redraw: true})">\n                    <span>\u663E\u793A\u7D2F\u8BA1\u503C</span>\n                </label>\n                <div class="row" ng-show="viewMeta.waterfall_setting.show_sum">\n                    <label class="label-head">\u540D\u79F0</label>\n                    <input type="text" class="input-text-block l-input" ng-model="viewMeta.waterfall_setting.sum_name" ng-blur="onNormalValueChanged(\'edit\', [\'chart.sumValue\', \'chart.sumName\'],{only_redraw: true})">\n                </div>\n            </div>\n            <div class="sub-block" ng-if="chartConfig.canEditChartSummary">\n                <label class="cursor-pointer">\n                    <input type="checkbox" class="mr8" ng-model="viewMeta.show_total" ng-change="onNormalCheckChanged(viewMeta.show_total, [\'chart.showChartSummary\'], {only_save_meta: false})">\n                    <span>\u663E\u793A\u56FE\u5185\u603B\u8BA1</span>\n                </label>\n                <div class="sub-block" normal-text-style="" style-label="dash.advDash.chartSummary" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})" text-type="\'title\'" ng-show="viewMeta.show_total"></div>\n            </div>\n        </div>\n    </div>\n    <!-- \u6570\u503C\u8BBE\u7F6E end -->\n    <!-- X\u5750\u6807\u8F74 start -->\n    <div class="block chart-axis" ng-if="chartConfig.canEditXAxis" ng-controller="yAxisUnitController">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u5750\u6807X\u8F74</div>\n        <div class="block-body">\n            <div ng-include="\'/static/chart-edit/chart-axis-style/chart-set-xaxis.html\'" ng-show="selected_type == \'C280\'"></div>\n            <div class="sub-block" chart-set-axis-style="" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})" type="\'xAxis\'"></div>\n            <div class="sub-block">\n                <div class="block-body">\n                    <!-- BDP-22002 \u7BB1\u578B\u56FE\u6B64\u529F\u80FD\u6B63\u5728\u5F00\u53D1\u4E2D\uFF0C\u6682\u65F6\u5173\u95ED -->\n                    <div ng-show="selected_type !== \'C281\'"><!-- \u7EE7\u7EED\u7ED1\u5B9A -->\n                        <label class="label-head">{{\'\u6587\u5B57\u65B9\u5411\' | translate}}</label>\n                        <select ng-model="viewMeta.xAxisLabelsRotation" ng-change="onAxisLabelRotationChanged(\'xAxis\')">\n                            <option value="0">{{\'\u9ED8\u8BA4\' | translate}}</option>\n                            <option value="0.1">{{\'\u6A2A\u5411\' | translate}}</option>\n                            <option value="90">{{\'\u7AD6\u5411\' | translate}}</option>\n                            <option value="315">{{\'\u5DE6\u503E\u659C45\' | translate}}</option>\n                            <option value="45">{{\'\u53F3\u503E\u659C45\' | translate}}</option>\n                        </select>\n                    </div>\n                    <div>\n                        <label>\n                            <input type="checkbox" ng-model="viewMeta.xAxisLabelsStep" ng-change="onAxisLabelStepChanged(viewMeta.xAxisLabelsStep, \'xAxis\')">\n                            <span>{{\'\u5F3A\u5236\u663E\u793A\u6240\u6709\u6807\u7B7E\' | translate}}</span>\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!-- X\u5750\u6807\u8F74 end -->\n    <!-- \u4E3B\u5750\u6807\u8F74 start -->\n    <div class="block chart-axis" ng-if="chartConfig.canEditLeftAxis" ng-controller="yAxisUnitController">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u5750\u6807Y\u8F74</div>\n        <div class="block-body">\n            <div ng-include="\'/static/chart-edit/yaxis-label/chart-set-yaxis-left.html\'"></div>\n            <div class="sub-block" ng-if="chartConfig.canEditZeroAligneds">\n                <label class="cursor-pointer ng-binding">\n                    <input class="mr4-i" type="checkbox" ng-model="viewMeta.zero_aligned" ng-change="setZeroAligned()">\n                    <span>\u4E3B\u6B21\u5750\u6807\u8F74\u7EDF\u4E00</span>\n                </label>\n            </div>\n        </div>\n    </div>\n    <!-- \u4E3B\u5750\u6807\u8F74 end -->\n    <!-- \u6B21\u5750\u6807\u8F74 start -->\n    <div class="block chart-axis" ng-if="chartConfig.canEditRightAxis" ng-controller="yAxisUnitController">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u6B21\u5750\u6807\u8F74</div>\n        <div class="block-body">\n            <div ng-include="\'/static/chart-edit/yaxis-label/chart-set-yaxis-right.html\'"></div>\n        </div>\n    </div>\n    <!-- \u6B21\u5750\u6807\u8F74 end -->\n    <!-- \u56FE\u8868\u6837\u5F0F start -->\n    <div class="block chart-style-setting" ng-if="chartConfig.canEditChartStyleSetting">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u56FE\u8868\u6837\u5F0F</div>\n        <div class="block-body">\n            <!-- \u5730\u56FE\u6837\u5F0F -->\n            <div class="sub-block map-style" ng-if="chartConfig.canEditMapSpec">\n                <div class="row">\n                    \u5730\u56FE\u7C7B\u578B\n                </div>\n                <ul class="map-type">\n                    <li class="chart-type" ng-repeat="type in [\'C271\', \'C272\', \'C273\']" ng-mouseover="showChartTypeTip(type, $event)" ng-mouseleave="hideChartTypeTip(type, $event)" ng-click="mapSetting.setMapType(type)">\n                        <a ng-class="{active: viewMeta.chart_type === type}">\n                            <i class="chart-type-icon {{type}}" ng-if="type != \'C271\'"></i>\n                            <i class="chart-type-icon C271x" ng-if="type == \'C271\'"></i>\n                        </a>\n                    </li>\n                </ul>\n                <div class="row" ng-if="viewMeta.chart_type == \'C273\'">\n                    \u6807\u7B7E\u7B26\u53F7\n                </div>\n                <ul class="symbol-type" ng-if="viewMeta.chart_type == \'C273\'">\n                    <li ng-repeat="type in [\'circle\', \'rect\', \'diamond\', \'triangle\']" ng-click="mapSetting.setTagSymbolShape(type)">\n                        <a ng-class="{active: viewMeta.map.text_symbol.shape === type}">\n                            <i class="icomoon icomoon-{{type}}"></i>\n                        </a>\n                    </li>\n                </ul>\n                <div class="row" ng-if="viewMeta.chart_type == \'C273\'">\n                    <label>\u7B26\u53F7\u989C\u8272</label>\n                    <span class="choose-color-wrap">\n                        <i class="bdp-icon ico-fill-color edit-color ico-no-opacity"></i>\n                        <span class="select-color-exp" style="background-color: {{viewMeta.map.text_symbol.color}}"></span>\n                        <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                        <color-picker options="{showAlpha: false, clickoutFiresChange: false}" not-two-way-binding="\'no-binding\'" ng-model="viewMeta.map.text_symbol.color" on-complete="mapSetting.setTagSymbolColor(color)"></color-picker>\n                    </span>\n                </div>\n            </div>\n            <!--\u6851\u57FA\u56FE\u6837\u5F0F-->\n            <div class="sub-block map-style" ng-if="chartConfig.canEditSankeySpec">\n                <div class="row">\n                    chart.sankeyType\n                </div>\n                <ul class="map-type">\n                    <li class="chart-type" ng-repeat="type in [\'C301\', \'C300\']" ng-mouseover="showChartTypeTip(type, $event)" ng-mouseleave="hideChartTypeTip(type, $event)" ng-click="sankeySetting.setSankeyType(type)" ng-class="{disabled:type===\'C300\' && viewMeta.x.length > 2}">\n                        <a ng-class="{active: viewMeta.chart_type === type}">\n                            <i class="chart-type-icon {{type}}" ng-if="type != \'C301\'"></i>\n                            <i class="chart-type-icon C301" ng-if="type == \'C301\'"></i>\n                        </a>\n                    </li>\n                </ul>\n                <label class="label-head">\u7EBF\u6761\u6837\u5F0F</label>\n                <label class="ml16 cursor-pointer">\n                    <input type="radio" value="0" ng-model="viewMeta.use_spline" ng-change="lazySaveChart({}, 0)">\n                    <span>\u76F4\u7EBF</span>\n                </label>\n                <label class="ml16 cursor-pointer">\n                    <input type="radio" value="1" ng-model="viewMeta.use_spline" ng-change="lazySaveChart({}, 0)">\n                    <span>\u66F2\u7EBF</span>\n                </label>\n            </div>\n            <!-- \u7EBF\u6761\u6837\u5F0F -->\n            <div class="sub-block" ng-if="chartConfig.canEditLineStyle">\n                <label class="label-head">\u7EBF\u6761\u6837\u5F0F</label>\n                <label class="ml16 cursor-pointer">\n                    <input type="radio" value="0" ng-model="viewMeta.use_spline" ng-change="onNormalValueChanged(\'switch\', [\'chart.lineStyle\', \'chart.straightLine\'], {only_redraw: true}, 0)">\n                    <span>\u76F4\u7EBF</span>\n                </label>\n                <label class="ml16 cursor-pointer">\n                    <input type="radio" value="1" ng-model="viewMeta.use_spline" ng-change="onNormalValueChanged(\'switch\', [\'chart.lineStyle\', \'chart.curve\'], {only_redraw: true}, 0)">\n                    <span>\u66F2\u7EBF</span>\n                </label>\n            </div>\n            <!-- \u997C\u56FE\u6837\u5F0F -->\n            <div class="sub-block" ng-if="chartConfig.canEditPieStyle">\n                <label class="label-head">\u997C\u56FE\u6837\u5F0F</label>\n                <label class="ml16 cursor-pointer">\n                    <input type="radio" value="pie" ng-model="viewMeta.shape" ng-change="onNormalValueChanged(\'switch\', [\'chart.pieStyle\', \'chart.pieShape\'], {only_redraw: true}, 0)">\n                    <span>\u997C\u72B6</span>\n                </label>\n                <label class="ml16 cursor-pointer">\n                    <input type="radio" value="donut" ng-model="viewMeta.shape" ng-change="onNormalValueChanged(\'switch\', [\'chart.pieStyle\', \'chart.donutShape\'], {only_redraw: true}, 0)">\n                    <span>\u73AF\u5F62</span>\n                </label>\n            </div>\n            <!-- \u7011\u5E03\u56FE\u5E03\u5C40\u6837\u5F0F -->\n            <div class="sub-block" ng-if="chartConfig.canEditFunnelLayout">\n                <label class="label-head">\u5E03\u5C40\u65B9\u5F0F</label>\n                <label class="ml16 cursor-pointer">\n                    <input type="radio" value="horizontal" ng-model="viewMeta.funnel_setting.layout" ng-change="onNormalValueChanged(\'switch\', [\'chart.layoutHorizontal\'], {only_redraw: true})">\n                    <span>\u6C34\u5E73\u5E03\u5C40</span>\n                </label>\n                <label class="ml16 cursor-pointer">\n                    <input type="radio" value="vertical" ng-model="viewMeta.funnel_setting.layout" ng-change="onNormalValueChanged(\'switch\', [\'chart.layoutVertical\'], {only_redraw: true})">\n                    <span>\u5782\u76F4\u5E03\u5C40</span>\n                </label>\n            </div>\n            <!-- \u8BCD\u4E913D -->\n            <div class="sub-block" ng-if="chartConfig.canEditWordcloud3D">\n                <div class="row">\n                    <label class="cursor-pointer">\n                        <input type="checkbox" ng-model="viewMeta.display_in_3d" ng-change="onNormalCheckChanged(viewMeta.display_in_3d, [\'chart.displayIn3D\'], {only_redraw: true})">\n                        <span>3D\u6A21\u5F0F</span>\n                    </label>\n                </div>\n                <div class="row">\n                    <label class="cursor-pointer" ng-if="viewMeta.display_in_3d">\n                        <input type="checkbox" ng-model="viewMeta.wordcloud_setting.text_shadow" ng-change="onNormalCheckChanged(viewMeta.wordcloud_setting.text_shadow, [\'chart.textShadowEffect\'], {only_redraw: true})">\n                        <span>\u6587\u5B57\u9634\u5F71\u6548\u679C</span>\n                    </label>\n                </div>\n            </div>\n            <!-- \u5BF9\u6BD4\u6761\u5F62\u7EF4\u5EA6\u8F74 -->\n            <div class="sub-block" ng-if="chartConfig.canEditComparisonBarAxis">\n                <div class="block-header">\u7EF4\u5EA6\u8F74\u4F4D\u7F6E\u8BBE\u7F6E</div>\n                <div class="block-body show-pos-set">\n                    <label class="cursor-pointer mr8">\n                        <input class="mr4-i" type="radio" value="pos_left" ng-model="viewMeta.comparison_xaxis_pos" ng-change="onNormalValueChanged(\'switch\', [\'chart.showxAxisPos\', \'chart.xAxisLeftSide\'], {only_redraw: true})">\n                        <span>\u5DE6</span>\n                    </label>\n                    <label class="cursor-pointer mr8">\n                        <input class="mr4-i" type="radio" value="pos_right" ng-model="viewMeta.comparison_xaxis_pos" ng-change="onNormalValueChanged(\'switch\', [\'chart.showxAxisPos\', \'chart.xAxisRightSide\'], {only_redraw: true})">\n                        <span>\u53F3</span>\n                    </label>\n                    <label class="cursor-pointer mr8 show-pos-set-two">\n                        <input class="mr4-i" type="radio" value="pos_middle" ng-model="viewMeta.comparison_xaxis_pos" ng-change="onNormalValueChanged(\'switch\', [\'chart.showxAxisPos\', \'chart.xAxisMiddleSide\'], {only_redraw: true})">\n                        <span>\u4E2D</span>\n                    </label>\n                    <label class="cursor-pointer mr8">\n                        <input class="mr4-i" type="radio" value="pos_side" ng-model="viewMeta.comparison_xaxis_pos" ng-change="onNormalValueChanged(\'switch\', [\'chart.showxAxisPos\', \'chart.xAxisTwoSide\'], {only_redraw: true})">\n                        <span>\u4E24\u4FA7</span>\n                    </label>\n                </div>\n            </div>\n            <!-- \u663E\u793A\u56FE\u8868\u6807\u7B7E -->\n            <div class="sub-block show-item" ng-if="chartConfig.canEditChartDataLabels">\n                <div class="cursor-pointer" ng-if="[\'C300\', \'C301\'].indexOf(selected_type) < 0">\n                    <label>\n                        <input type="checkbox" ng-model="viewMeta.show_datalabels" ng-change="onNormalCheckChanged(viewMeta.show_datalabels, [\'chart.showDatalabels\'], {only_redraw: true})">\n                        <span>\u663E\u793A\u56FE\u8868\u6807\u7B7E</span>\n                    </label>\n                    <div class="sub-block" normal-text-style="" style-label="chart.dataLabels" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})" text-type="\'labels\'" ng-if="viewMeta.show_datalabels && [\'C271\',\'C272\',\'C273\',\'C300\',\'C301\',\'C330\'].indexOf(selected_type) < 0"></div>\n                </div>\n                <div class="block-body" ng-show="viewMeta.show_datalabels && selected_type === \'C360\'">\n                    <label class="cursor-pointer">\n                        <input type="radio" value="text" ng-model="viewMeta.sunburst_setting.showProportion" ng-change="onNormalValueChanged(\'switch\', [\'chart.dataLabels\', \'chart.showName\'], {only_redraw: true})">\n                        <span>\u6587\u5B57</span>\n                    </label>\n                    <label class="cursor-pointer ml16">\n                        <input type="radio" value="proportion" ng-model="viewMeta.sunburst_setting.showProportion" ng-change="onNormalValueChanged(\'switch\', [\'chart.dataLabels\', \'chart.showProportion\'], {only_redraw: true})">\n                        <span>\u5360\u6BD4</span>\n                    </label>\n                </div>\n                <div class="block-body" ng-if="chartConfig.canEditTreeMapLabels">\n                    <label class="cursor-pointer">\n                        <input type="checkbox" ng-model="viewMeta.data_label_setting.show_percent" ng-change="onNormalCheckChanged(viewMeta.data_label_setting.show_percent, [\'chart.showSeriesRate\'], {only_redraw: true})">\n                        <span>\u663E\u793A\u5360\u6BD4</span>\n                    </label>\n                </div>\n                <div class="block-body" ng-show="viewMeta.show_datalabels && selected_type === \'C230\' && viewMeta.shape !== \'donut\'">\n                    <label class="cursor-pointer">\n                        <input type="checkbox" ng-model="viewMeta.show_real_value" ng-change="onNormalCheckChanged(viewMeta.show_real_value, [\'chart.showRealValue\'], {only_redraw: true})">\n                        <span>\u663E\u793A\u5177\u4F53\u6570\u503C</span>\n                    </label>\n                    <div class="sub-block" normal-text-style="" style-label="chart.realValue" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})" text-type="\'labelsForPieValue\'"></div>\n                </div>\n                <div class="block-body" ng-show="viewMeta.show_datalabels && selected_type === \'C230\'">\n                    <label class="cursor-pointer">\n                        <input type="checkbox" ng-model="viewMeta.show_connector_label" ng-change="onNormalCheckChanged(viewMeta.show_connector_label, [\'chart.showConnectorLabel\'], {only_redraw: true})">\n                        <span>\u663E\u793A\u7EF4\u5EA6\u6807\u7B7E</span>\n                    </label>\n                    <div class="sub-block" normal-text-style="" style-label="chart.connectorLabel" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})" text-type="\'labelsForPieConnector\'"></div>\n                </div>\n                <div class="block-body" ng-if="viewMeta.show_datalabels && [\'C300\',\'C301\',\'C330\',\'C273\'].indexOf(selected_type) < 0">\n                    <label class="cursor-pointer">\n                        <input type="checkbox" ng-model="viewMeta.show_all_datalabels" ng-change="onNormalCheckChanged(viewMeta.show_all_datalabels, [\'chart.style\', \'chart.showAllDatalabels\'], {only_redraw: true})">\n                        <span>\u5F3A\u5236\u663E\u793A\u6240\u6709\u6807\u7B7E</span>\n                    </label>\n                </div>\n                <div class="cursor-pointer" ng-if="[\'C271\', \'C272\', \'C273\'].indexOf(selected_type) > -1">\n                    <label>\n                        <input type="checkbox" ng-model="viewMeta.show_placenames" ng-change="onNormalCheckChanged(viewMeta.show_placenames, [\'chart.showPlaceNames\'], {only_redraw: true})">\n                        \u663E\u793A\u5730\u540D\n                    </label>\n                </div>\n            </div>\n            <!-- \u8BBE\u7F6E\u80D6\u7626\u56FE -->\n            <div class="sub-block" ng-if="chartConfig.canEditChartOverlapMode">\n                <div class="block-header">\u5C55\u793A\u65B9\u5F0F</div>\n                <label class="cursor-pointer">\n                    <input type="radio" ng-model="viewMeta.overlapMode" ng-value="1" ng-change="saveChartImmediate({only_redraw: true})">\n                    <span>\u5E76\u5217\u5C55\u793A</span>\n                </label>\n                <label class="cursor-pointer ml16">\n                    <input type="radio" ng-model="viewMeta.overlapMode" ng-value="2" ng-change="saveChartImmediate({only_redraw: true})">\n                    <span>\u91CD\u53E0\u5C55\u793A</span>\n                </label>\n                <div class="block-header">\n                    <span>\u5C3A\u5BF8\u8BBE\u7F6E</span>\n                    <a class="bdp-icon-wrap hd-icon" ng-class="{disabled: !(canSetOverlapSize(viewMeta.chart_type, viewMeta.overlapMode) && (!viewMeta.bubble_setting || !viewMeta.bubble_setting.fid))}">\n                        <i class="bdp-icon ico-edit" default-overlap-size=""></i>\n                    </a>\n                </div>\n            </div>\n            <div class="sub-block chart-set-extend-style" chart-set-extend-style="" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})"></div>\n            <div class="sub-block" ng-if="chartConfig.canEditChartSeriesType">\n                <label class="label-head font-w-b">\u5E03\u5C40\u65B9\u5F0F</label>\n                <label><input type="radio" ng-model="viewMeta.seriesType" ng-value="false" ng-change="onNormalValueChanged(\'switch\', [\'chart.layoutStyle\', \'chart.layoutHorizontal\'], {only_redraw: true})"><span>\u6C34\u5E73\u5E03\u5C40</span></label>\n                <label><input type="radio" ng-model="viewMeta.seriesType" ng-value="true" ng-change="onNormalValueChanged(\'switch\', [\'chart.layoutStyle\', \'chart.layoutVertical\'], {only_redraw: true})"><span>\u5782\u76F4\u5E03\u5C40</span></label>\n            </div>\n            <div class="sub-block" ng-if="chartConfig.canEditChartReversed">\n                <label class="label-head font-w-b">\u5BF9\u9F50\u65B9\u5F0F</label>\n                <label><input type="radio" ng-model="viewMeta.reversed" ng-value="false" ng-change="onNormalValueChanged(\'switch\', [\'chart.alignmentMethod\', \'chart.alignmentLeft\'],{only_redraw: true})"><span>\u5DE6\u5BF9\u9F50</span></label>\n                <label><input type="radio" ng-model="viewMeta.reversed" ng-value="true" ng-change="onNormalValueChanged(\'switch\', [\'chart.alignmentMethod\', \'chart.alignmentRight\'],{only_redraw: true})"><span>\u53F3\u5BF9\u9F50</span></label>\n            </div>\n        </div>\n    </div>\n    <!-- \u56FE\u8868\u6837\u5F0F end -->\n    <!-- \u6851\u57FA\u56FE\u7279\u6B8A\u914D\u7F6E start -->\n    <div class="block chart-sankey" ng-if="chartConfig.canEditSankeySpec && viewMeta.chart_type!==\'C301\'">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u6D41\u7A0B\u4E3B\u4F53\u5B57\u6BB5</div>\n        <div class="block-body">\n            <select ng-model="viewMeta.sankey_setting.relate_field_fid" ng-options="field.fid as field.name for field in field_list | filter:{ data_type : \'!date\' }" ng-change="onNormalValueChanged(\'set\', [\'chart.sankeyFlag\'])" style="max-width:100%"></select>\n        </div>\n    </div>\n    <!-- \u6851\u57FA\u56FE\u7279\u6B8A\u914D\u7F6E end -->\n    <!-- \u4EA4\u4E92\u5143\u7D20 start -->\n    <div class="block" ng-if="chartConfig.canEditChartInteractive">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u5206\u6790\u4EA4\u4E92\u8BBE\u7F6E</div>\n        <div class="block-body">\n            <div class="sub-block" ng-if="chartConfig.canSetHoverMode">\n                 <label>\u9F20\u6807\u60AC\u6D6E\u67E5\u770B\u6570\u636E\u65B9\u5F0F</label>\n                 <div class="row">\n                    <label>\n                        <input type="radio" value="single" ng-model="viewMeta.hover_mode" ng-change="onHoverModeChanged()">\n                        <span>\u5355\u4E2A\u6570\u636E\u70B9</span>\n                    </label>\n                </div>\n                <div class="row">\n                    <label class="cursor-pointer">\n                        <input type="radio" value="multiple" ng-model="viewMeta.hover_mode" ng-change="onHoverModeChanged()">\n                        <span>\u591A\u4E2A\u6570\u636E\u70B9</span>\n                    </label>\n                </div>\n            </div>\n            <div class="sub-block" ng-if="chartConfig.canSetSelectionAnalysis" free-drill-setting="">\n                <label class="cursor-pointer vm">\n                    <input type="checkbox" ng-model="chart_ops.meta.level[drill_level].free_drill_setting.enabled" ng-change="onFreeDrillSettingChanged()">\n                    <span ng-if="permision.isPersonal">\u5206\u4EAB\u540E\u5141\u8BB8\u81EA\u7531\u5206\u6790</span>\n                    <span ng-if="!permision.isPersonal">\u5206\u4EAB\u6216\u5206\u914D\u540E\u5141\u8BB8\u81EA\u7531\u5206\u6790</span>\n                </label>\n                <a class="bdp-icon-wrap row-icon cursor-pointer" ng-click="showFreeDrillSetting()" ng-show="chart_ops.meta.level[drill_level].free_drill_setting.enabled" title="\u81EA\u7531\u5206\u6790\u7EF4\u5EA6\u8BBE\u7F6E">\n                    <i class="bdp-icon ico-edit"></i>\n                </a>\n            </div>\n            <div class="sub-block" ng-if="chartConfig.canEditNavigator">\n                <label class="cursor-pointer">\n                    <input type="checkbox" ng-model="chart_ops.meta.level[drill_level].navigator_setting.enabled" ng-change="onNormalCheckChanged(chart_ops.meta.level[drill_level].navigator_setting.enabled, [\'chart.isShowNavigator\'], {only_redraw: true})">\n                    <span>\u663E\u793A\u7F29\u7565\u8F74</span>\n                </label>\n            </div>\n            <div class="sub-block" ng-if="chartConfig.canEditGranularity">\n                <label class="cursor-pointer">\n                    <input type="checkbox" ng-model="viewMeta.fullscreen_granularity" ng-change="onNormalCheckChanged(viewMeta.fullscreen_granularity, [\'chart.granularity\'])">\n                    <span>\u5168\u5C4F\u6A21\u5F0F\u4E0B\u53EF\u5207\u6362\u65E5\u671F\u7C92\u5EA6</span>\n                </label>\n            </div>\n        </div>\n    </div>\n    <!-- \u4EA4\u4E92\u5143\u7D20 end -->\n    <!-- \u5730\u56FE\u7279\u6B8A\u914D\u7F6E start -->\n    <div class="block map-geo-fields" ng-if="chartConfig.canEditMapSpec">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\n            <a class="bdp-icon-wrap hd-icon" ng-click="mapSetting.configGeoFields($event)">\n                <i class="bdp-icon ico-edit"></i>\n            </a>\n            <span>\u5B57\u6BB5\u5339\u914D\u8BBE\u7F6E</span>\n        </div>\n        <div class="block-body">\n            <div class="sub-block">\n                <div>\n                    <span>\u7701: </span>\n                    <span>{{fidToName[viewMeta.map.geo_field_setting[\'province\']] || (\'none\' | translate)}}</span>\n                </div>\n                <div>\n                    <span>\u5E02: </span>\n                    <span>{{fidToName[viewMeta.map.geo_field_setting[\'city\']] || (\'none\' | translate)}}</span>\n                </div>\n                <div>\n                    <span>\u533A\u53BF: </span>\n                    <span>{{fidToName[viewMeta.map.geo_field_setting[\'district\']] || (\'none\' | translate)}}</span>\n                </div>\n                <div>\n                    <span>\u533A\u5212\u4EE3\u7801: </span>\n                    <span>{{fidToName[viewMeta.map.geo_field_setting[\'adcode\']] || (\'none\' | translate)}}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="block map-granularity" ng-if="chartConfig.canEditMapSpec">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u7EDF\u8BA1\u8BBE\u7F6E</div>\n        <div class="block-body">\n            <div class="sub-block">\n                <p>\u663E\u793A\u8303\u56F4</p>\n                <select class="ml8" ng-model="viewMeta.map.region" ng-change="mapSetting.onRegionTypeChanged(viewMeta.map.region)">\n                    <option value="1" ng-selected="viewMeta.map.region == \'1\' || viewMeta.map.region == \'\'">\u663E\u793A\u5168\u56FD\u8F6E\u5ED3</option>\n                    <option value="2">\u663E\u793A\u7701\u7EA7\u8F6E\u5ED3</option>\n                    <option value="3">\u663E\u793A\u5E02\u7EA7\u8F6E\u5ED3</option>\n                </select>\n            </div>\n            <div class="sub-block" ng-if="viewMeta.map.region != \'1\' && viewMeta.map.region != \'\'">\n                <p>\u663E\u793A\u5185\u5BB9</p>\n                <select class="ml8" ng-model="viewMeta.map.region_area.province" ng-change="mapSetting.onRegionAreaChanged(\'province\')" ng-options="item.adcode as item.name for item in mapSetting.provinceList">\n                </select>\n                <select class="ml8" ng-if="viewMeta.map.region == \'3\'" ng-model="viewMeta.map.region_area.city" ng-change="mapSetting.onRegionAreaChanged(\'city\')" ng-options="item.adcode as item.name for item in mapSetting.cityList">\n                </select>\n            </div>\n            <div class="sub-block">\n                <p>\u663E\u793A\u5B50\u533A\u57DF</p>\n                <select class="ml8" ng-model="viewMeta.map.granularity" ng-change="mapSetting.onGranularityTypeChanged({map:{granularity:viewMeta.map.granularity}})">\n                    <option value="province" ng-selected="viewMeta.map.granularity === \'province\' || viewMeta.map.granularity === \'\'" ng-show="viewMeta.map.region == \'1\' || viewMeta.map.region == \'\'">\u663E\u793A\u5230\u7701</option>\n                    <option value="city" ng-show="viewMeta.map.region !== \'3\'">\u663E\u793A\u5230\u5E02</option>\n                    <option value="district" ng-show="viewMeta.map.region == \'2\' || viewMeta.map.region == \'3\'">\u663E\u793A\u5230\u533A\u53BF</option>\n                </select>\n            </div>\n        </div>\n    </div>\n    <!-- \u5730\u56FE\u7279\u6B8A\u914D\u7F6E end -->\n    <!-- \u56FE\u8868\u63CF\u8FF0 start -->\n    <div class="block no-shadow chart-description" ng-if="chartConfig.canEditDescription">\n        <div class="block-header has-toggle" ng-click="chartConfig.toggleNextBlock($event)">\u56FE\u8868\u5907\u6CE8</div>\n        <div class="block-body mt8">\n            <textarea msd-elastic="" class="input-text-block chart-description J-chart-description-textarea" ng-model="chart_ops.description" ng-blur="keyUpChartDescription()"></textarea>\n        </div>\n    </div>\n    <!-- \u56FE\u8868\u63CF\u8FF0 end -->\n</div>');
    $templateCache.put('/static/chart-edit/chart-config/chart-set-extend-style.html', '<div class="chart-style-block">\n    <div class="chart-grid-plot-style" ng-if="gridPlotLineStyle.canEditGridPlotLine()">\n        <div class="block-header">\u7F51\u683C\u663E\u793A</div>\n        <div class="block-body" ng-if="chartInfo.chart_type != \'C320\'">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="gridPlotLineStyle.data.yAxis.enabled" ng-change="gridPlotLineStyle.onCheckBoxChanged(\'yAxis\', gridPlotLineStyle.data.yAxis.enabled, [\'dash.advDash.showGridLine\', \'dash.advDash.horizontalGridLine\'])">\n                <span>\u6A2A\u5411\u7F51\u683C</span>\n            </label>\n            <label class="ml16" ng-if="!!gridPlotLineStyle.data.yAxis.enabled">\n                <span>\u6570\u91CF</span><input class="grid-slit-num s-input ml8" type="number" ng-model="gridPlotLineStyle.data.yAxis.splitNum" ng-blur="gridPlotLineStyle.onStyleChanged(\'yAxis\', \'number\')" ng-keyup="gridPlotLineStyle.changeSplitNum($event, \'yAxis\')">\n            </label>\n            <div class="pl16">\u7EBF\u6761\u6837\u5F0F</div>\n            <div class="pl16">\n                <i class="bdp-icon ico-line-style ico-no-opacity"></i>\n                <div line-style-select="" class="ml4" val-selected="gridPlotLineStyle.data.yAxis.dashStyle" val-change="gridPlotLineStyle.onStyleChanged(\'yAxis\', \'style\')" click-disabled="!gridPlotLineStyle.data.yAxis.enabled"></div>\n                <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n                <select class="line-width-select ml4" ng-model="gridPlotLineStyle.data.yAxis.width" ng-change="gridPlotLineStyle.onStyleChanged(\'yAxis\', \'width\')" ng-options="lineWidth.value as lineWidth.name for lineWidth in chartLineWidth" ng-disabled="!gridPlotLineStyle.data.yAxis.enabled">\n                </select>\n                <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!gridPlotLineStyle.data.yAxis.enabled}" ng-if="gridPlotLineStyle.colorPickerOpt">\n                    <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                    <span class="select-color-exp" style="background-color: {{gridPlotLineStyle.data.yAxis.color}}"></span>\n                    <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                    <color-picker options="gridPlotLineStyle.colorPickerOpt" not-two-way-binding="\'no-binding\'" is-adaption="gridPlotLineStyle.data.yAxis.colorAdaption" on-change="gridPlotLineStyle.changeColor(color)" ng-model="gridPlotLineStyle.data.yAxis.color" on-complete="gridPlotLineStyle.modifyColor(color, opt, \'yAxis\')"></color-picker>\n                </span>\n            </div>\n        </div>\n        <div class="block-body">\n            <label class="cursor-pointer">\n                <input type="checkbox" ng-model="gridPlotLineStyle.data.xAxis.enabled" ng-change="gridPlotLineStyle.onCheckBoxChanged(\'xAxis\', gridPlotLineStyle.data.xAxis.enabled, [\'dash.advDash.showGridLine\', \'dash.advDash.verticalGridLine\'])">\n                <span>\u7EB5\u5411\u7F51\u683C</span>\n            </label>\n            <label class="ml16" ng-if="!!gridPlotLineStyle.data.xAxis.enabled">\n                <span>\u6570\u91CF</span><input class="grid-slit-num s-input ml8" type="number" ng-model="gridPlotLineStyle.data.xAxis.splitNum" ng-blur="gridPlotLineStyle.onStyleChanged(\'xAxis\', \'number\')" ng-keyup="gridPlotLineStyle.changeSplitNum($event,\'xAxis\')">\n            </label>\n            <div class="pl16">\u7EBF\u6761\u6837\u5F0F</div>\n            <div class="pl16">\n                <i class="bdp-icon ico-line-style ico-no-opacity"></i>\n                <div line-style-select="" class="ml4" val-selected="gridPlotLineStyle.data.xAxis.dashStyle" val-change="gridPlotLineStyle.onStyleChanged(\'xAxis\', \'style\')" click-disabled="!gridPlotLineStyle.data.xAxis.enabled"></div>\n                <i class="bdp-icon ico-line-width ico-no-opacity ml16"></i>\n                <select class="line-width-select ml4" ng-model="gridPlotLineStyle.data.xAxis.width" ng-change="gridPlotLineStyle.onStyleChanged(\'xAxis\', \'width\')" ng-options="lineWidth.value as lineWidth.name for lineWidth in chartLineWidth" ng-disabled="!gridPlotLineStyle.data.xAxis.enabled">\n                </select>\n                <span class="choose-color-wrap ml16" ng-class="{\'pick-disabled\':!gridPlotLineStyle.data.xAxis.enabled}" ng-if="gridPlotLineStyle.colorPickerOpt">\n                    <i class="bdp-icon ico-edit edit-color ico-no-opacity"></i>\n                    <span class="select-color-exp" style="background-color: {{gridPlotLineStyle.data.xAxis.color}}"></span>\n                    <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                    <color-picker options="gridPlotLineStyle.colorPickerOpt" not-two-way-binding="\'no-binding\'" is-adaption="gridPlotLineStyle.data.xAxis.colorAdaption" on-change="gridPlotLineStyle.changeColor(color)" ng-model="gridPlotLineStyle.data.xAxis.color" on-complete="gridPlotLineStyle.modifyColor(color, opt, \'xAxis\')"></color-picker>\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class="chart-legend-style" ng-if="chartLegendStyle.canEditChartLegend()">\n        <div class="block-header">\u56FE\u4F8B\u8BBE\u7F6E</div>\n        <div class="block-body">\n            <span class="legend-item style-square-item mr8" bdp-tooltip="popupTips.noLegend" tooltip-placement="bottom" ng-class="{\'active\': chartLegendStyle.data.pos == \'null\'}" ng-click="chartLegendStyle.setChartLegendPosition({\'pos\':\'null\'}, popupTips.noLegend)"><i class="bdp-icon ico-legend-none bdp-icon-bgcol"></i></span>\n            <span class="legend-item style-square-item mr8" bdp-tooltip="popupTips.rightLegend" tooltip-placement="bottom" ng-class="{\'active\': chartLegendStyle.data.pos == \'right\'}" ng-click="chartLegendStyle.setChartLegendPosition({\'pos\':\'right\'}, popupTips.rightLegend)"><i class="bdp-icon ico-legend-right bdp-icon-bgcol"></i></span>\n            <span class="legend-item style-square-item mr8" bdp-tooltip="popupTips.bottomLegend" tooltip-placement="bottom" ng-class="{\'active\': chartLegendStyle.data.pos == \'bottom\'}" ng-click="chartLegendStyle.setChartLegendPosition({\'pos\':\'bottom\'}, popupTips.bottomLegend)"><i class="bdp-icon ico-legend-bottom bdp-icon-bgcol"></i></span>\n            <span class="legend-item style-square-item" bdp-tooltip="popupTips.topLegend" tooltip-placement="bottom" ng-class="{\'active\': chartLegendStyle.data.pos == \'top\'}" ng-click="chartLegendStyle.setChartLegendPosition({\'pos\':\'top\'}, popupTips.topLegend)"><i class="bdp-icon ico-legend-top bdp-icon-bgcol"></i></span>\n        </div>\n        <div class="pl16">\u6807\u7B7E</div>\n        <div class="pl32">\n            <i class="bdp-icon ico-font-family ico-no-opacity"></i>\n            <select class="font-family-select ml4" ng-model="chartLegendStyle.data.itemStyle.fontFamily" ng-change="chartLegendStyle.onStyleChanged(\'font\')" ng-options="fontFamily.value as fontFamily.name for fontFamily in chartFontFamily" ng-disabled="!chartLegendStyle.data.enabled">\n            </select>\n            <select class="font-size-select ml4" ng-model="chartLegendStyle.data.itemStyle.fontSize" ng-change="chartLegendStyle.onStyleChanged(\'size\')" ng-options="fontSize.value as fontSize.name for fontSize in chartFontSize" ng-disabled="!chartLegendStyle.data.enabled">\n            </select>\n            <span class="choose-color-wrap ml4" ng-class="{\'pick-disabled\':!chartLegendStyle.data.enabled}" ng-if="chartLegendStyle.colorPickerOpt">\n                <i class="bdp-icon ico-text-color edit-color ico-no-opacity"></i>\n                <span class="select-color-exp" style="background-color: {{chartLegendStyle.data.itemStyle.color}}"></span>\n                <i class="bdp-icon ico-triangle-down edit-color-arrow ico-no-opacity"></i>\n                <color-picker options="chartLegendStyle.colorPickerOpt" not-two-way-binding="\'no-binding\'" is-adaption="chartLegendStyle.data.itemStyle.colorAdaption" on-change="chartLegendStyle.changeColor(color)" ng-model="chartLegendStyle.data.itemStyle.color" on-complete="chartLegendStyle.modifyColor(color, opt, \'legend\')"></color-picker>\n            </span>\n        </div>\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/chart-filter/chart-filter-date-modal.html', '<div bindonce="">\n    <div class="ngdialog-title">\u7F16\u8F91\u7B5B\u9009\u9879</div>\n    <div class="ngdialog-message">\n        <div class="top">\n            <label>\u5168\u5C40\u65B9\u6848</label>\n            <div select-search-list="" search-list="globalDateFilterConfig.schemeList" select-data="globalDateFilterConfig.applySchemeId" val-change="globalDateFilterConfig.changeApply()" mode-type="schemeList" ng-if="globalDateFilterConfig.schemeList"></div>\n            <i class="bdp-icon ico-help ml4 mt-2 cursor-pointer" bdp-tooltip="globalDateFilterConfig.tip" tooltip-placement="right"></i>\n            <span class="fr mt8 cr-bdp cursor-pointer" ng-click="globalDateFilterConfig.enter()" ng-if="!!permision.canDateFilter">\u5168\u5C40\u65B9\u6848\u914D\u7F6E</span>\n            <div class="split-line"></div>\n        </div>\n        <div class="modal-main" ng-class="{\'is-default\': globalDateFilterConfig.selectedScheme.is_default}">\n            <div class="left prev-list" ng-if="!!globalDateFilterConfig.isConfig" ng-class="{\'empty-list\': !globalDateFilterConfig.schemeList.length}">\n                <a class="bdp-icon-wrap cursor-pointer add" id="J-add-global-config" ng-click="globalDateFilterConfig.add()">\n                    <i class="bdp-icon ico-plus1"></i>\n                </a>\n                <h5>\u65B9\u6848</h5>\n                <ul>\n                    <li class="cursor-pointer" ng-repeat="scheme in globalDateFilterConfig.schemeList" title="{{scheme.name}}" ng-class="{\'active\':globalDateFilterConfig.selectedScheme.scheme_id == scheme.scheme_id}" click-outside="globalDateFilterConfig.editMap[scheme.scheme_id] = false" outside-active="globalDateFilterConfig.editMap[scheme.scheme_id].isCreating" outside-if-not="J-add-global-config">\n                        <p class="nowrap name" ng-if="!globalDateFilterConfig.editMap[scheme.scheme_id]" ng-click="globalDateFilterConfig.info($event, scheme, $index)">{{scheme.name}}</p>\n                        <span class="line-op-group pos-right" ng-if="!globalDateFilterConfig.editMap[scheme.scheme_id] && scheme.is_default != 1">\n                            <a class="bdp-icon-wrap" ng-click="globalDateFilterConfig.edit($event, scheme, $index)"><i class="bdp-icon ico-text-edit ico-no-opacity"></i></a>\n                            <a class="bdp-icon-wrap" ng-click="globalDateFilterConfig.del($event, scheme, $index)"><i class="bdp-icon ico-trash ico-no-opacity"></i></a>\n                        </span>\n                        <input type="text" class="edit-name" ng-model="scheme.name" ng-if="!!globalDateFilterConfig.editMap[scheme.scheme_id]">\n                        <a class="bdp-icon-wrap" ng-if="!!globalDateFilterConfig.editMap[scheme.scheme_id]" ng-click="globalDateFilterConfig.save($event, scheme, $index)"><i class="bdp-icon ico-ok"></i></a>\n                    </li>\n                    <li class="cursor-pointer active" ng-show="!!globalDateFilterConfig.isCreating" click-outside="globalDateFilterConfig.isCreating = false" outside-active="globalDateFilterConfig.isCreating" outside-if-not="J-add-global-config">\n                        <input type="text" id="J-new-name" class="edit-name" ng-model="globalDateFilterConfig.newScheme.name">\n                        <a class="bdp-icon-wrap" ng-click="globalDateFilterConfig.save($event, globalDateFilterConfig.newScheme, $index)"><i class="bdp-icon ico-ok ico-no-opacity"></i></a>\n                    </li>\n                </ul>\n            </div>\n            <div class="left" ng-class="{\'empty-list\':!advDateModule.adv_date_list.length}">\n                <a class="bdp-icon-wrap cursor-pointer add" ng-click="advDateModule.modify(\'create\')" ng-hide="!!globalDateFilterConfig.isConfig && globalDateFilterConfig.selectedScheme.is_default">\n                    <i class="bdp-icon ico-plus1"></i>\n                </a>\n                <div class="guide" ng-show="!!advanceView.empty && !selected_opt_id">\n                    <div class="guide-tip">\n                        <em class="arrow arrow-up"></em>\n                        <span>\u589E\u52A0\u7B5B\u9009\u9879</span>\n                    </div>\n                </div>\n                <h5>\u7B5B\u9009\u9879</h5>\n                <ul ui-sortable="advDateModule.sort" ng-model="advDateModule.adv_date_list" ng-hide="globalDateFilterConfig.status.listLoading">\n                    <li ng-repeat="it in advDateModule.adv_date_list" class="cursor-pointer" title="{{it.name}}" ng-class="{\'active\':selected_opt_id == it.opt_id, \'opt-hide\': !globalDateFilterConfig.isConfig && scheme.it != 1}">\n                        <p class="name" ng-click="advDateModule.modify(it.opt_id,$index)" ng-hide="!!globalDateFilterConfig.isConfig && it.is_global!=1">\n                            <span class="name-span nowrap">{{it.name}}</span>\n                            <i class="filter-tag" ng-show="it.is_global==1">(<em>\u5168\u5C40</em>)</i>\n                        </p>\n                        <span class="line-op-group pos-right" ng-hide="!globalDateFilterConfig.isConfig && it.is_global == 1 || !!globalDateFilterConfig.isConfig && globalDateFilterConfig.selectedScheme.is_default">\n                            <a class="bdp-icon-wrap" ng-click="advDateModule.del(it.opt_id,it,$index)">\n                                <i class="bdp-icon ico-trash"></i>\n                            </a>\n                        </span>\n                    </li>\n                </ul>\n                <div ng-loading-gif="" size="size-1x" ng-show="globalDateFilterConfig.status.listLoading"></div>\n            </div>\n            <div class="right bg-block fl" ng-if="!advanceView.empty">\n                <div class="clearfix date-content" ng-class="{\'date-content-disabled\': !!advDateModule.isDisabled}" ng-hide="globalDateFilterConfig.status.listLoading || advDateModule.listLoading || advDateModule.infoLoading">\n                    <div class="block-shadow-bottom pb8">\n                        <div class="date-title">\n                            <span class="text-right">\u7B5B\u9009\u9879</span>\n                            <label>\n                                <input type="text" class="input-text-block" ng-model="date.name" ng-disabled="advDateModule.isDisabled" placeholder="\u7B5B\u9009\u9879\u540D\u79F0">\n                            </label>\n                        </div>\n                        <div class="date-title">\n                            <span class="text-right">\u65F6\u95F4\u8BBE\u7F6E</span>\n                            <select class="set-time" ng-model="date.type" ng-change="advDateModule.switchTab(date.type)" ng-disabled="advDateModule.isDisabled">\n                                <option value="fixed" ng-selected="date.type == \'fixed\'">\u56FA\u5B9A\u65F6\u957F</option>\n                                <option value="relative" ng-selected="date.type == \'relative\'">\u76F8\u5BF9\u65F6\u957F</option>\n                                <option value="accurate" ng-selected="date.type == \'accurate\'">\u7CBE\u786E\u65E5\u671F</option>\n                                <option value="expression" ng-selected="date.type == \'expression\'">\u8868\u8FBE\u5F0F</option>\n                            </select>\n                        </div>\n\n                    </div>\n                    <div class="tab-content">\n                        <div class="tab-pane" ng-class="{\'active\':date.type===\'fixed\',\'fixed\':date.type===\'fixed\'}">\n                            <div class="row-start mt16">\n                                <label>\n                                    <span class="label-head">\u6700\u8FD1</span>\n                                    <input type="text" class="input-text-block m-input" ng-model="date.fixed.start" ng-disabled="advDateModule.isDisabled">&nbsp;\n                                </label>\n                                <select ng-model="date.fixed.granularity" class="fixed-granularity" ng-disabled="advDateModule.isDisabled">\n                                    <option value="day" ng-selected="date.fixed.granularity === \'day\'">\u5929</option>\n                                    <option value="week" ng-selected="date.fixed.granularity === \'week\'">\u5468</option>\n                                    <option value="month" ng-selected="date.fixed.granularity === \'month\'">\u6708</option>\n                                    <option value="quarter" ng-selected="date.fixed.granularity === \'quarter\'">\u5B63</option>\n                                    <option value="year" ng-selected="date.fixed.granularity === \'year\'">\u5E74</option>\n                                </select>\n                            </div>\n                            <div class="row-end mt8">\n                                <label class="label-head">\u622A\u81F3</label>\n                                <label class="label-input" ng-class="{\'val-active\':date.fixed.end.type==0}">\n                                    <input type="radio" ng-model="date.fixed.end.type" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;\n                                    <span ng-if="date.fixed.granularity == \'day\'">\u4ECA\u5929</span>\n                                    <span ng-if="date.fixed.granularity == \'week\'">\u672C\u5468</span>\n                                    <span ng-if="date.fixed.granularity == \'month\'">\u672C\u6708</span>\n                                    <span ng-if="date.fixed.granularity == \'quarter\'">\u672C\u5B63\u5EA6</span>\n                                    <span ng-if="date.fixed.granularity == \'year\'">\u4ECA\u5E74</span>\n                                </label>\n                                <label class="label-input" ng-class="{\'val-active\':date.fixed.end.type==1}">\n                                    <input type="radio" ng-model="date.fixed.end.type" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;\n                                    <span ng-if="date.fixed.granularity == \'day\'">\u6628\u5929</span>\n                                    <span ng-if="date.fixed.granularity == \'week\'">\u4E0A\u5468</span>\n                                    <span ng-if="date.fixed.granularity == \'month\'">\u4E0A\u6708</span>\n                                    <span ng-if="date.fixed.granularity == \'quarter\'">\u4E0A\u5B63\u5EA6</span>\n                                    <span ng-if="date.fixed.granularity == \'year\'">\u53BB\u5E74</span>\n                                </label>\n                                <label class="label-input" ng-class="{\'val-active\':date.fixed.end.type==2}">\n                                    <input type="radio" ng-model="date.fixed.end.type" value="2" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u524D</span>&nbsp;\n                                    <input type="text" class="input-text-block input-number-small" ng-class="{\'input-disabled\':date.fixed.end.type != 2}" ng-model="date.fixed.end.value" ng-disabled="date.fixed.end.type != 2">&nbsp;\n                                    <span ng-if="date.fixed.granularity == \'day\'">\u5929</span>\n                                    <span ng-if="date.fixed.granularity == \'week\'">\u5468</span>\n                                    <span ng-if="date.fixed.granularity == \'month\'">\u6708</span>\n                                    <span ng-if="date.fixed.granularity == \'quarter\'">\u5B63</span>\n                                    <span ng-if="date.fixed.granularity == \'year\'">\u5E74</span>\n                                </label>\n                                <label class="label-input" ng-class="{\'val-active\':date.fixed.end.type==3}">\n                                    <input type="radio" ng-model="date.fixed.end.type" value="3" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u540E</span>&nbsp;\n                                    <input type="text" class="input-text-block input-number-small" ng-class="{\'input-disabled\':date.fixed.end.type != 3}" ng-model="date.fixed.end.value" ng-disabled="date.fixed.end.type != 3">&nbsp;\n                                    <span ng-if="date.fixed.granularity == \'day\'">\u5929</span>\n                                    <span ng-if="date.fixed.granularity == \'week\'">\u5468</span>\n                                    <span ng-if="date.fixed.granularity == \'month\'">\u6708</span>\n                                    <span ng-if="date.fixed.granularity == \'quarter\'">\u5B63</span>\n                                    <span ng-if="date.fixed.granularity == \'year\'">\u5E74</span>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="tab-pane" ng-class="{\'active\':date.type===\'relative\', \'relative\':date.type===\'relative\'}">\n                            <div class="mt20">\n                                <label class="label-head">\u5468\u671F</label>\n                                <select class="m-input ml8" ng-model="date.relative.granularity" ng-disabled="advDateModule.isDisabled">\n                                    <option value="week" ng-selected="date.relative.granularity === \'week\'">\u5468</option>\n                                    <option value="month" ng-selected="date.relative.granularity === \'month\'">\u6708</option>\n                                    <option value="quarter" ng-selected="date.relative.granularity === \'quarter\'">\u5B63</option>\n                                    <option value="year" ng-selected="date.relative.granularity === \'year\'">\u5E74</option>\n                                </select>\n                            </div>\n                            <div ng-show="date.relative.granularity === \'week\'">\n                                <div class="row-end mt8">\n                                    <label class="label-head">\u8D77\u59CB</label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.week.start==0}">\n                                        <input type="radio" ng-model="date.relative.week.start" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u672C\u5468</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.week.start==1}">\n                                        <input type="radio" ng-model="date.relative.week.start" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u5468</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.week.start==2}">\n                                        <input type="radio" ng-model="date.relative.week.start" value="2" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0B\u5468</span>\n                                    </label>\n                                </div>\n                                <div class="row-end mt8" ng-if="date.relative.week.start == 0">\n                                    <label class="label-head">\u622A\u81F3</label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.week.end==0}">\n                                        <input type="radio" ng-model="date.relative.week.end" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4ECA\u5929</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.week.end==1}">\n                                        <input type="radio" ng-model="date.relative.week.end" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u6628\u5929</span>\n                                    </label>\n                                </div>\n                            </div>\n                            <div ng-show="date.relative.granularity === \'month\'">\n                                <div class="row-end mt8">\n                                    <label class="label-head">\u8D77\u59CB</label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.month.start==0}">\n                                        <input type="radio" ng-model="date.relative.month.start" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u672C\u6708</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.month.start==1}">\n                                        <input type="radio" ng-model="date.relative.month.start" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u6708</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.month.start==2}">\n                                        <input type="radio" ng-model="date.relative.month.start" value="2" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0B\u6708</span>\n                                    </label>\n                                </div>\n                                <div class="row-end mt8" ng-if="date.relative.month.start == 0">\n                                    <label class="label-head">\u622A\u81F3</label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.month.end==0}">\n                                        <input type="radio" ng-model="date.relative.month.end" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4ECA\u5929</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.month.end==1}">\n                                        <input type="radio" ng-model="date.relative.month.end" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u6628\u5929</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.month.end==2}">\n                                        <input type="radio" ng-model="date.relative.month.end" value="2" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u5468</span>\n                                    </label>\n                                </div>\n                            </div>\n                            <div ng-show="date.relative.granularity === \'quarter\'">\n                                <div class="row-end mt8">\n                                    <label class="label-head">\u8D77\u59CB</label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.quarter.start==0}">\n                                        <input type="radio" ng-model="date.relative.quarter.start" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u672C\u5B63\u5EA6</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.quarter.start==1}">\n                                        <input type="radio" ng-model="date.relative.quarter.start" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u5B63\u5EA6</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.quarter.start==2}">\n                                        <input type="radio" ng-model="date.relative.quarter.start" value="2" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0B\u5B63\u5EA6</span>\n                                    </label>\n                                </div>\n                                <div class="row-end mt8" ng-if="date.relative.quarter.start == 0">\n                                    <label class="label-head">\u622A\u81F3</label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.quarter.end==0}">\n                                        <input type="radio" ng-model="date.relative.quarter.end" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4ECA\u5929</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.quarter.end==1}">\n                                        <input type="radio" ng-model="date.relative.quarter.end" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u6628\u5929</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.quarter.end==2}">\n                                        <input type="radio" ng-model="date.relative.quarter.end" value="2" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u5468</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.quarter.end==3}">\n                                        <input type="radio" ng-model="date.relative.quarter.end" value="3" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u6708</span>\n                                    </label>\n                                </div>\n                            </div>\n                            <div ng-show="date.relative.granularity === \'year\'">\n                                <div class="row-end mt8">\n                                    <label class="label-head">\u8D77\u59CB</label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.year.start==0}">\n                                        <input type="radio" ng-model="date.relative.year.start" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4ECA\u5E74</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.year.start==1}">\n                                        <input type="radio" ng-model="date.relative.year.start" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u53BB\u5E74</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.year.start==2}">\n                                        <input type="radio" ng-model="date.relative.year.start" value="2" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0B\u5E74</span>\n                                    </label>\n                                </div>\n                                <div class="row-end mt8" ng-if="date.relative.year.start == 0">\n                                    <label class="label-head">\u622A\u81F3</label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.year.end==0}">\n                                        <input type="radio" ng-model="date.relative.year.end" value="0" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4ECA\u5929</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.year.end==1}">\n                                        <input type="radio" ng-model="date.relative.year.end" value="1" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u6628\u5929</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.year.end==2}">\n                                        <input type="radio" ng-model="date.relative.year.end" value="2" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u5468</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.year.end==3}">\n                                        <input type="radio" ng-model="date.relative.year.end" value="3" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u6708</span>\n                                    </label>\n                                    <label class="label-input" ng-class="{\'val-active\':date.relative.year.end==4}">\n                                        <input type="radio" ng-model="date.relative.year.end" value="4" ng-disabled="advDateModule.isDisabled">&nbsp;<span>\u4E0A\u5B63\u5EA6</span>\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                        <!--end relative tab body-->\n                        <div class="tab-pane" ng-class="{\'active\':date.type===\'accurate\'}">\n                            <div class="mt20 date-picker" ng-click="pickEnd=false">\n                                <label class="label-head">\u8D77\u59CB\u65E5\u671F</label>\n                                <div class="display-inline-block">\n                                    <input type="text" class="input-text-block m-input" ng-model="date.accurate.start" date-format="" readonly="readonly" ng-click="pickStart=!pickStart" ng-disabled="advDateModule.isDisabled">\n                                    <a class="bdp-icon-wrap cursor-pointer" ng-click="pickStart=!pickStart" ng-hide="advDateModule.isDisabled">\n                                        <i class="bdp-icon ico-type-date"></i>\n                                    </a>\n                                    <div date-picker="date.accurate.start" range="date.accurate.start" view="date" min-view="date" ng-show="pickStart"></div>\n                                </div>\n                            </div>\n                            <div class="date-picker mt8" ng-click="pickStart=false">\n                                <label class="label-head">\u622A\u81F3\u65E5\u671F</label>\n                                <div class="display-inline-block">\n                                    <input type="text" class="input-text-block m-input" ng-model="date.accurate.end" date-format="" readonly="readonly" ng-click="pickEnd=!pickEnd" ng-disabled="advDateModule.isDisabled">\n                                    <a class="bdp-icon-wrap cursor-pointer" ng-click="pickEnd=!pickEnd" ng-hide="advDateModule.isDisabled">\n                                        <i class="bdp-icon ico-type-date"></i>\n                                    </a>\n                                    <div date-picker="date.accurate.end" range="date.accurate.end" view="date" min-view="date" ng-show="pickEnd"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="tab-pane expression" ng-class="{\'active\':date.type===\'expression\'}">\n                            <div class="formula-filter-part mt20">\n                                <div class="formula-edit-part" ng-show="!!advDateModule.isDisabled">\n                                    <textarea advance-data-formula="" id="formula-str" expression-content="date.expression" readonly="true" class="input-text-block ng-formula" on-blur="dateFilter.setExpression(content)" on-key-up="expressionChanged(flag)"></textarea>\n                                </div>\n                                <div class="formula-edit-part" ng-show="!advDateModule.isDisabled">\n                                    <textarea advance-data-formula="" id="formula-str" expression-content="date.expression" class="input-text-block ng-formula" on-blur="dateFilter.setExpression(content)" on-key-up="expressionChanged(flag)"></textarea>\n                                </div>\n                                <a class="insert-field-name" ng-click="insertFieldNameToExpression(current_config_field_name)" ng-hide="advDateModule.isDisabled">\u63D2\u5165\u5B57\u6BB5</a>\n                                <button type="button" class="check-formula-grammar" ng-click="checkFormulaGrammar(\'\',current_fid,\'date\')" ng-hide="advDateModule.isDisabled">\u8BED\u6CD5\u68C0\u67E5</button>\n                            </div>\n                            <p class="formula-example">\u793A\u4F8B: [\u65E5\u671F]=\'2015-05-01 00:00:00\', \u4E14\u540D\u79F0\u9700\u4E0E\u7B5B\u9009\u5668\u540D\u79F0\u76F8\u540C</p>\n                        </div>\n                    </div>\n                    <span class="date-advance-opt cr-bdp text-decoration-underline cursor-pointer" ng-click="advDateModule.save()" ng-hide="advDateModule.isDisabled || !!advanceView.empty || !date">\u4FDD\u5B58\u914D\u7F6E</span>\n                </div>\n                <div ng-loading-gif="" size="size-1x" ng-show="!!globalDateFilterConfig.isConfig && globalDateFilterConfig.status.listLoading || advDateModule.infoLoading"></div>\n            </div>\n        </div>\n        <div class="bottom clear">\n            <span class="operator-help-link" ng-click="goHelp(\'advanceDateFilter\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n            <div class="ngdialog-buttons" ng-if="!globalDateFilterConfig.isConfig">\n                <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="dateFilter.saveAdvanceDateScheme()" ng-show="globalDateFilterConfig.schemeList.length > 0">\u4FDD\u5B58</button>\n                <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="dateFilter.closeAdvanceDate()">\u5173\u95ED</button>\n            </div>\n            <div class="ngdialog-buttons" ng-if="!!globalDateFilterConfig.isConfig">\n                <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="globalDateFilterConfig.exit()">\u8FD4\u56DE\u7B5B\u9009\u9879</button>\n            </div>\n        </div>\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/chart-filter/chart-filter-number-modal.html', '<div bindonce="">\n    <div class="ngdialog-title">\u7F16\u8F91\u7B5B\u9009\u9879</div>\n    <span class="ngdialog-cancel" ng-click="removeFilter();closeThisDialog()"><i class="bdp-icon ico-cancel"></i></span>\n    <div class="ngdialog-message string-filter number-filter">\n        <div class="bd">\n            <div class="filter-type-part">\n                <label>\n                    <input type="radio" value="condition" ng-model="numberAdvFilter.type" name="a">\n                    <span>\u6761\u4EF6\u7B5B\u9009</span>\n                </label>\n                <label>\n                    <input type="radio" value="expression" ng-model="numberAdvFilter.type" name="a">\n                    <span>\u8868\u8FBE\u5F0F</span>\n                </label>\n            </div>\n\n            <div class="bg-block clearfix">\n            \n                <!-- \u6761\u4EF6\u7B5B\u9009 \u533A\u57DF-->\n                <div class="condition-filter" ng-if="numberAdvFilter.type == \'condition\' ">\n                    <p class="nowrap block-head">\u7B5B\u9009\u6761\u4EF6</p>\n                    <div class="condition-filter-part">\n                        <div class="number-range">\n                            <select class="ng-pristine ng-valid" ng-model="numberFilter.number_operator" ng-options="o.value as o.name for o in operatorNumberMap">\n                            </select>\n                            <input class="input-text-block ng-pristine ng-valid" type="number" ng-if="numberFilter.number_operator != 12 " ng-model="numberFilter.number_both" ng-disabled="numberFilter.number_operator == 8 || numberFilter.number_operator == 9" placeholder="\u8BF7\u8F93\u5165\u6570\u503C">\n                            <input class="input-text-block ng-pristine ng-valid range-input" type="number" ng-if="numberFilter.number_operator == 12 " ng-model="numberFilter.number_left" placeholder="\u8BF7\u8F93\u5165\u6570\u503C">\n                            <span ng-if="numberFilter.number_operator == 12 "> \uFF5E </span>\n                            <input class="input-text-block ng-pristine ng-valid range-input" type="number" ng-if="numberFilter.number_operator == 12 " ng-model="numberFilter.number_right" placeholder="\u8BF7\u8F93\u5165\u6570\u503C">\n                        </div>\n                    </div>\n                </div>\n                <!-- \u8868\u8FBE\u5F0F \u533A\u57DF-->\n                <div class="formula-filter" ng-if="numberAdvFilter.type == \'expression\' ">\n                    <p class="nowrap block-head">\u7B5B\u9009\u6761\u4EF6</p>\n                    <div class="formula-filter-part">\n                        <div>\n                            <div class="formula-edit-part">\n                                <textarea advance-data-formula="" id="formula-str" expression-content="numberFilter.expression_str" class="input-text-block ng-formula" on-blur="numberFilter.setExpression(content)" on-key-up="expressionChanged(flag)"></textarea>\n                            </div>\n                            <p>\n                                <a class="insert-field-name" ng-click="insertFieldNameToExpression(numberFilter.field_name)">\u63D2\u5165\u5B57\u6BB5</a>\n                                <button type="button" class="check-formula-grammar" ng-click="checkFormulaGrammar(numberFilter.field_name,numberAdvFilter.fid,\'number\')">\u8BED\u6CD5\u68C0\u67E5</button>\n                            </p>\n                        </div>\n                        <p class="formula-example">\u793A\u4F8B: [\u5B57\u6BB5\u540D]=\'123\', \u4E14\u540D\u79F0\u9700\u4E0E\u7B5B\u9009\u5668\u540D\u79F0\u76F8\u540C</p>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="numberFilter.saveAdvNumberFilter()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="removeFilter();closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-filter/chart-filter-string-modal.html', '<div bindonce="">\n    <div class="ngdialog-title">\u7F16\u8F91\u7B5B\u9009\u9879</div>\n    <span class="ngdialog-cancel" ng-click="removeFilter();closeThisDialog()"><i class="bdp-icon ico-cancel"></i></span>\n    <div class="ngdialog-message string-filter">\n        <div class="bd">\n            <div class="filter-type-part">\n                <label class="ng-binding">\n                    <input type="radio" value="exact" class="ng-binding" ng-model="strAdvFilter.type" name="a">\n                    <span>\u7CBE\u786E\u7B5B\u9009</span>\n                </label>\n                <label class="ng-binding">\n                    <input type="radio" value="condition" class="ng-binding" ng-model="strAdvFilter.type" name="a">\n                    <span>\u6761\u4EF6\u7B5B\u9009</span>\n                </label>\n                <label class="ng-binding">\n                    <input type="radio" value="expression" class="ng-binding" ng-model="strAdvFilter.type" name="a">\n                    <span>\u8868\u8FBE\u5F0F</span>\n                </label>\n            </div>\n\n            <div class="bg-block clearfix">\n\n                <!-- \u7CBE\u786E\u7B5B\u9009 \u533A\u57DF-->\n                <div class="search-list block-shadow-right" ng-if="strAdvFilter.type == \'exact\'">\n                    <div class="block-head">\n                        <p class="nowrap">{{strFilter.name}}</p>\n                    </div>\n                    <div class="sbd">\n\n                        <div class="query-box auto" ng-if="strFilter.total <= 100">\n                            <input type="text" class="query-text" ng-model="strFilter.keyword" ng-input-text="" ng-keyup="strFilter.enterToQuery({e:$event,realSearch:false})">\n                        </div>\n\n                        <div class="query-box" ng-if="strFilter.total > 100">\n                            <input type="text" class="query-text" ng-model="strFilter.keyword" ng-keyup="strFilter.enterToQuery({e:$event,realSearch:true})">\n                            <a class="bdp-icon-wrap query-btn" ng-click="strFilter.query()">\n                                <i class="bdp-icon ico-search"></i>\n                            </a>\n                        </div>\n                        <div ng-loading-gif="" ng-show="showLoading"></div>\n                        <ul ng-show="!showLoading" class="user-select-none" ng-if="strFilter.data_type ==\'string\' || strFilter.data_type ==\'sub_date\'">\n                            <li ng-repeat="it in strFilter.searchList | filter:strFilter.filterKwd track by $index" class="nowrap dropdown-item">\n                                <p class="name pl8" ng-dblclick="addStrOpts(it,$event)">\n                                    <a class="add cursor-pointer" ng-click="addStrOpts(it,$event)">\u6DFB\u52A0</a>\n                                    <span class="inner-name nowrap" title="{{it.name}}">{{it.name | sub_date:strFilter}}</span>\n                                </p>\n                            </li>\n                        </ul>\n                        \n                        <div ng-loading-gif="" ng-show="strFilter.loading" size="size-1x"></div>\n                        <div class="bar" ng-if="strFilter.searchList.length > 0">\n                            <a class="cursor-pointer cr-bdp" ng-click="addAll()">\u5168\u90E8\u6DFB\u52A0</a>\n                        </div>\n                    </div>\n                </div>\n                <div class="add-list" ng-if="strAdvFilter.type == \'exact\'">\n\n                    <div class="block-head">\n                        <select class="logic-select ng-scope ng-valid ng-dirty" ng-model="strAdvFilter.range_type">\n                            <option value="1" selected="selected">\u5305\u542B\u4E0B\u5217\u9009\u9879</option>\n                            <option value="0">\u4E0D\u5305\u542B\u4E0B\u5217\u9009\u9879</option>\n                        </select>\n                    </div>\n\n                    <div class="sbd br2">\n                        <ul class="user-select-none">\n                            <li ng-repeat="it in strFilter.addList track by $index" class="nowrap dropdown-item">\n                                <p class="name pl8" ng-dblclick="delStrOpts($index)">\n                                    <a ng-click="delStrOpts($index,$event)" class="cursor-pointer">\u5220\u9664</a>\n                                    <span class="inner-name nowrap" title="{{it}}">{{it | sub_date:strFilter}}</span>\n                                </p>\n                            </li>\n                            <div ng-if="strFilter.addList.length == 0" class="empty-addlist">\u8BF7\u4ECE\u5DE6\u4FA7\u5217\u8868\u9009\u62E9\u6DFB\u52A0</div>\n                        </ul>\n                        <div class="bar" ng-if="strFilter.addList.length > 0">\n                            <span>\u5DF2\u6DFB\u52A0</span>\n                            <span>{{strFilter.addList.length}}</span>\n                            <span>\u6761</span>\n                            <a ng-click="delAll()" class="cursor-pointer cr-bdp">\u6E05\u7A7A</a></div>\n                    </div>\n                </div>\n                <p class="too-much-items-tip" ng-if="strAdvFilter.type == \'exact\' && strFilter.total > 100">\u7B5B\u9009\u9879\u5185\u5BB9\u8FC7\u591A\uFF0C\u8BF7\u641C\u7D22\u67E5\u8BE2\u5168\u90E8</p>\n                <!-- \u6761\u4EF6\u7B5B\u9009 \u533A\u57DF-->\n                <div class="condition-filter" ng-if="strAdvFilter.type == \'condition\'">\n                    <p class="nowrap block-head">\u7B5B\u9009\u6761\u4EF6</p>\n                    <div class="condition-filter-part">\n                        <div class="head">\n                            <span class="filter-name nowrap">{{strFilter.name}}</span>\n                            <select class="condition-select ng-pristine ng-valid" ng-model="new_condition.operator" ng-options="o.value as o.name for o in operatorMap">\n                                <option value="">\u8BF7\u9009\u62E9\u6761\u4EF6</option>\n                            </select>\n                            <input class="new-condition input-text-block ng-pristine ng-valid" type="text" ng-model="new_condition.content" ng-disabled="new_condition.operator == 8 || new_condition.operator == 9" placeholder="\u8BF7\u8F93\u5165\u6761\u4EF6">\n                            <a class="bdp-icon-wrap add-condition" ng-click="addNewCondition(strFilter.name,new_condition)" title="\u6DFB\u52A0\u8BE5\u6761\u4EF6">\n                                <i class="bdp-icon ico-plus1"></i>\n                            </a>\n                        </div>\n                        <div class="condition-container">\n                            <p>\n                                <select class="logic-select ng-scope ng-valid ng-dirty" ng-if="conditionList.length > 1" ng-model="strFilter.condition_type">\n                                    <option value="1" selected="selected">\u6EE1\u8DB3\u4EFB\u4E00\u6761\u4EF6</option>\n                                    <option value="2">\u6EE1\u8DB3\u6240\u6709\u6761\u4EF6</option>\n                                </select>\n                            </p>\n                            <ul>\n                                <li ng-repeat="item in conditionList track by $index">\n                                    <span class="condition-content-name nowrap">{{item.name}}</span>\n                                    <span class="condition-content-operator nowrap">{{AdvfilterOperatorList[item.operator]}}</span>\n                                    <span class="condition-content nowrap">{{item.content}}</span>\n                                    <a class="bdp-icon-wrap remove-condition" ng-click="removeCondition($index)" title="\u5220\u9664\u8BE5\u6761\u4EF6">\n                                        <i class="bdp-icon ico-minus1"></i>\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n\n                    </div>\n                </div>\n                <!-- \u8868\u8FBE\u5F0F \u533A\u57DF-->\n                <div class="formula-filter" ng-if="strAdvFilter.type == \'expression\'">\n                    <p class="nowrap block-head">\u7B5B\u9009\u6761\u4EF6</p>\n                    <div class="formula-filter-part">\n                        <div>\n                            <div class="formula-edit-part">\n                                <textarea advance-data-formula="" id="formula-str" expression-content="strFilter.expression_str" class="input-text-block ng-formula" on-blur="strFilter.setExpression(content)" on-key-up="expressionChanged(flag)"></textarea>\n                            </div>\n                            <p>\n                                <a class="insert-field-name" ng-click="insertFieldNameToExpression(strFilter.name)">\u63D2\u5165\u5B57\u6BB5</a>\n                                <button type="button" class="check-formula-grammar" ng-click="checkFormulaGrammar(strFilter.name,strFilter.fid,\'string\')">\u8BED\u6CD5\u68C0\u67E5</button>\n                            </p>\n                        </div>\n                        <p class="formula-example">\u793A\u4F8B: [\u5B57\u6BB5\u540D]=\'\u67D0\u67D0\', \u4E14\u540D\u79F0\u9700\u4E0E\u7B5B\u9009\u5668\u540D\u79F0\u76F8\u540C</p>\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="strFilter.saveAdvStrFilter();">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="removeFilter();closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-filter/chart-filter.html', '<div class="filter-layer expansion" ng-class="{top:pageInfo.type == \'double_y\'}" data-drop="true" jqyoui-droppable="{onDrop:\'filterHandler.addFilter()\'}" data-jqyoui-options="{accept: dropAccept || \'.field-list .field-drag-title\'}" ng-model="filter_list_require" bindonce="">\n    <div class="hd">\n        <p>\u7B5B\u9009\u5668</p>\n    </div>\n    <div class="bd">\n        <p class="no-filter" ng-if="getFilterList().length == 0">\n            <span>\u62D6\u62FD\u5B57\u6BB5\u5230\u8FD9\u91CC</span>\n            <br>\n            <span>\u8FDB\u884C\u7B5B\u9009</span>\n        </p>\n        <ul class="row-y filter-ul">\n            <li ng-repeat="it in getFilterList() track by it.fid">\n                <div class="box" data-drag="true" ng-if="it.data_type !== \'number\'" jqyoui-draggable="{onStart:\'filterHandler.startDelFilter()\',onDrag:\'filterHandler.removePosition()\',onStop:\'filterHandler.delFilter($index, it.data_type)\'}" data-jqyoui-options="{scroll:false}">\n                    <div class="data-tag" ng-click="filterItemHandler.getFilterRange(it.data_type,it.fid,it,$index)">\n                        <span class="tag">\n                            <span class="name nowrap" ng-bind="it.name"></span>\n                        </span>\n                        <span class="tag-edit" ng-if="it.data_type == \'string\' || it.data_type== \'sub_date\' " ng-click="strFilter.showAdvanceString($event,it,$parent.$index,\'\')" title="\u7F16\u8F91\u7B5B\u9009\u6761\u4EF6"><i class="bdp-icon ico-config"></i></span>\n                        <span class="tag-edit" ng-if="it.data_type == \'date\' && !doNotModify" ng-click="dateFilter.showAdvanceDate($event,it,$parent.$index)" title="\u7F16\u8F91\u7B5B\u9009\u6761\u4EF6"><i class="bdp-icon ico-config"></i></span>\n                        <i class="bdp-icon ico-triangle-down"></i>\n                    </div><!--end data-tag-->\n                    <!--date\u7C7B\u578B-->\n                    <div ng-if="it.data_type == \'date\'" ng-show="filterItemHandler.isShowFilter(it.fid) || loading[it.fid]" class="show-range filter-date">\n                        <div class="loading" ng-show="loading[it.fid]">\n                        <img src="//m1.bdp.cn/static/img/loading_a639fc5.gif" width="20"></div>\n                        <ul ng-show="filterItemHandler.isShowFilter(it.fid)" style="max-height:210px;overflow-y:auto">\n                            <li class="dropdown-item">\n                                <a class="cursor-pointer" ng-class="{\'active\':it.range.length == 0}" ng-click="it.range = [];filterHandler.save({range:[],index:$index,type:\'date\'})">\u5168\u90E8\u65F6\u95F4</a>\n                            </li>\n                            <li class="nowrap adv-item pr dropdown-item" ng-show="filterRangeList[it.fid].list.length > 0" ng-repeat="item in filterRangeList[it.fid].list">\n                                <a class="cursor-pointer" ng-class="{\'active\':it.range[0] == item.opt_id || date_active[it.fid] == item.name}" title="{{item.name}}" ng-click="filterHandler.save({range:[item.opt_id],index:$parent.$index,type:\'date\'})">\n                                    {{item.name}}\n                                </a>\n                            </li>\n                            <li class="dropdown-item">\n                                <a class="cursor-pointer" ng-class="{\'active\':it.range.length == 2}" ng-click="dateFilter.showFilterDatePicker($index,it.range)">\u81EA\u5B9A\u4E49\u65F6\u95F4\u6BB5</a>\n                            </li>\n                        </ul>\n                    </div>\n                    <!--string or sub_date-->\n                    <div ng-if="it.data_type == \'sub_date\'" ng-show="filterItemHandler.isShowFilter(it.fid) || loading[it.fid]" class="show-range filter-string" ng-click="strFilter.showAdvanceString($event,it,$parent.$index,\'\')">\n                        <div class="loading" ng-show="loading[it.fid]"><img src="//m1.bdp.cn/static/img/loading_a639fc5.gif" width="20"></div>\n                        <div ng-show="filterItemHandler.isShowFilter(it.fid)">\n                            <ul ng-show="filterRangeList[it.fid].type == \'exact\'">\n                                <li class="nowrap dropdown-item" ng-if="filterRangeList[it.fid].list.length > 0" ng-repeat="item in filterRangeList[it.fid].list | query_fields:string_query">\n                                    {{item.name | dash_sub_date:it}}\n                                </li>\n                            </ul>\n                            <ul ng-show="filterRangeList[it.fid].type == \'condition\'">\n                                <li ng-if="filterRangeList[it.fid].list.conditions.length > 1 && filterRangeList[it.fid].list.condition_type == \'2\'">{{\'dash.satisfyAllConditions\'| translate}}:</li>\n                                <li ng-if="filterRangeList[it.fid].list.conditions.length > 1 &&  filterRangeList[it.fid].list.condition_type == \'1\'">{{\'dash.satisfyAnyConditions\'| translate}}:</li>\n                                <li class="nowrap dropdown-item" ng-repeat="item in filterRangeList[it.fid].list.conditions track by $index">\n                                    {{AdvfilterOperatorList[item.calc_type]}}&nbsp;&nbsp;{{item.value}}\n                                </li>\n                            </ul>\n                            <ul ng-show="filterRangeList[it.fid].type == \'expression\'">\n                                <li class="nowrap">\u81EA\u5B9A\u4E49\u8868\u8FBE\u5F0F</li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div ng-if="it.data_type == \'string\' " ng-show="filterItemHandler.isShowFilter(it.fid) || loading[it.fid]" class="show-range filter-string" ng-click="strFilter.showAdvanceString($event,it,$parent.$index,\'\')">\n                        <div class="loading" ng-show="loading[it.fid]"><img src="//m1.bdp.cn/static/img/loading_a639fc5.gif" width="20"></div>\n                        <div ng-show="filterItemHandler.isShowFilter(it.fid)">\n                            <ul ng-show="filterRangeList[it.fid].type == \'exact\'">\n                                <li class="nowrap" ng-if="filterRangeList[it.fid].range_type == 1 ">\u5305\u542B\u4E0B\u5217\u9009\u9879</li>\n                                <li class="nowrap" ng-if="filterRangeList[it.fid].range_type == 0 ">\u4E0D\u5305\u542B\u4E0B\u5217\u9009\u9879</li>\n                                <li class="nowrap dropdown-item" ng-if="filterRangeList[it.fid].list.length > 0" ng-repeat="item in filterRangeList[it.fid].list | query_fields:string_query">\n                                    {{item.name}}\n                                </li>\n                            </ul>\n                            <ul ng-show="filterRangeList[it.fid].type == \'condition\'">\n                                <li ng-if="filterRangeList[it.fid].list.conditions.length > 1 && filterRangeList[it.fid].list.condition_type == \'2\'">{{\'dash.satisfyAllConditions\'| translate}}:</li>\n                                <li ng-if="filterRangeList[it.fid].list.conditions.length > 1 && filterRangeList[it.fid].list.condition_type == \'1\'">{{\'dash.satisfyAnyConditions\'| translate}}:</li>\n                                <li class="nowrap dropdown-item" ng-repeat="item in filterRangeList[it.fid].list.conditions track by $index">\n                                    {{AdvfilterOperatorList[item.calc_type]}}&nbsp;&nbsp;{{item.value}}\n                                </li>\n                            </ul>\n                            <ul ng-show="filterRangeList[it.fid].type == \'expression\'">\n                                <li class="nowrap">\u81EA\u5B9A\u4E49\u8868\u8FBE\u5F0F</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                <!--number\u7C7B\u578B-->\n                <div class="box" ng-if="it.data_type === \'number\'" data-drag="true" jqyoui-draggable="{onStart:\'filterHandler.startDelFilter()\',onDrag:\'filterHandler.removePosition()\',onStop:\'filterHandler.delFilter($index, it.data_type)\'}" data-jqyoui-options="{scroll:false}">\n                    <div class="data-tag" ng-click="filterItemHandler.getFilterRange(it.data_type,it.fid,it,$index)">\n                        <span class="tag">\n                            <span class="name nowrap" ng-bind="it.name"></span>\n                        </span>\n                        <span class="tag-edit" ng-if="it.data_type == \'number\'" ng-click="numberFilter.showAdvanceNumber($event,it,$parent.$index,it.name)" title="\u7F16\u8F91\u7B5B\u9009\u6761\u4EF6"><i class="bdp-icon ico-config"></i></span>\n                        <i class="bdp-icon ico-triangle-down"></i>\n                    </div>\n                    <div class="show-range filter-number" ng-show="filterItemHandler.isShowFilter(it.fid) || loading[it.fid]" ng-click="numberFilter.showAdvanceNumber($event,it,$parent.$index,it.name)">\n                        <div class="loading" ng-show="loading[it.fid]"><img src="//m1.bdp.cn/static/img/loading_a639fc5.gif" width="20"></div>\n                        <ul ng-show="filterRangeList[it.fid].type == \'condition\'">\n                            <li>{{\'dash.satisfyConditions\'| translate}}:</li>\n                            <li class="nowrap" ng-if="filterRangeList[it.fid].list.conditions.length == 1">\n                                {{AdvfilterOperatorList[filterRangeList[it.fid].list.conditions[0].calc_type]}}&nbsp;&nbsp;{{filterRangeList[it.fid].list.conditions[0].value}}\n                            </li>\n                            <li class="nowrap" ng-if="filterRangeList[it.fid].list.conditions.length > 1">\n                                {{filterRangeList[it.fid].list.conditions[0].value}}&nbsp;~&nbsp;{{filterRangeList[it.fid].list.conditions[1].value}}\n                            </li>\n                        </ul>\n                        <ul ng-show="filterRangeList[it.fid].type == \'expression\'">\n                            <li class="nowrap">\u81EA\u5B9A\u4E49\u8868\u8FBE\u5F0F</li>\n                        </ul>\n\n                    </div>\n                </div>\n            </li>\n        </ul>\n\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/chart-filter-wordcloud/word-count-dialog.html', '<div bindonce="">\n    <div class="ngdialog-title">\u5206\u8BCD\u8FC7\u6EE4</div>\n    <div class="ngdialog-message string-filter">\n        <div class="bd">\n            <div class="bg-block clearfix">\n                <div class="search-list block-shadow-right">\n                    <p class="nowrap block-head">\u5173\u952E\u8BCD</p>\n                    <div class="sbd">\n                        <div class="query-box auto">\n                            <input type="text" class="query-text" ng-model="query_tpl" bdp-local-query="wordCount.list" query-key="\'name\'">\n                        </div>\n                        <ul class="user-select-none">\n                            <li class="nowrap dropdown-item" ng-repeat="item in wordCount.list | filter:{hide_by_query: false, select: false} track by $index">\n                                <p class="name pl8" ng-dblclick="changeItem(item, true)">\n                                    <a class="add cursor-pointer" ng-click="changeItem(item, true)">\u6DFB\u52A0</a>\n                                    <span class="inner-name nowrap" title="{{item.name}}">\n                                        {{item.name}}\n                                    </span>\n                                </p>\n                            </li>\n                        </ul>\n                        <div class="bar" ng-if="wordCount.list.length > 0">\n                            <a class="cursor-pointer cr-bdp" ng-click="changeAll(true)">\u5168\u90E8\u6DFB\u52A0</a>\n                        </div>\n                    </div>\n                </div>\n                <div class="add-list">\n                    <p class="clearfix block-head">\n                        <span class="name fl">\u5DF2\u6DFB\u52A0</span>\n                    </p>\n                    <p class="clearfix mt12 mb0 ml16 mr16">\n                        <select class="logic-select ng-scope ng-valid ng-dirty" ng-model="wordCount.rangeType">\n                            <option value="1" selected="selected">\u5305\u542B\u4E0B\u5217\u9009\u9879</option>\n                            <option value="0">\u4E0D\u5305\u542B\u4E0B\u5217\u9009\u9879</option>\n                        </select>\n                    </p>\n                    <div class="sbd">\n                        <div ng-if="(wordCount.list | filter:{select: true}).length == 0" class="empty-addlist">\u8BF7\u4ECE\u5DE6\u4FA7\u5217\u8868\u9009\u62E9\u6DFB\u52A0</div>\n                        <ul ng-if="wordCount.list.length" class="user-select-none">\n                            <li ng-repeat="item in wordCount.list | filter:{select: true} track by $index" class="nowrap dropdown-item">\n                                <p class="name pl8" ng-dblclick="changeItem(item, false)">\n                                    <a class="cursor-pointer" ng-click="changeItem(item, false)">\u5220\u9664</a>\n                                    <span class="inner-name nowrap" title="{{item.name}}">\n                                        {{item.name}}\n                                    </span>\n                                </p>\n                            </li>\n                        </ul>\n                        <div class="bar" ng-if="(wordCount.list | filter:{select: true}).length > 0">\n                            <span>\u5DF2\u6DFB\u52A0</span>\n                            <span>{{(wordCount.list | filter:{select: true}).length}}</span>\n                            <span>\u6761</span>\n                            <a ng-click="changeAll(false)" class="cursor-pointer cr-bdp">\u6E05\u7A7A</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="complateEdit();closeThisDialog();">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-inner-filter/chart-inner-filter-config.html', '<div bindonce="">\n    <div class="ngdialog-title">\u56FE\u5185\u7B5B\u9009\u5668\u914D\u7F6E</div>\n    <div class="ngdialog-message string-filter inner-filter-config">\n        <div class="bd bg-block clearfix">\n            <div class="search-list block-shadow-right">\n                <p class="nowrap block-head">\u5B57\u6BB5</p>\n                <div class="sbd br2">\n                    <div class="query-box auto">\n                        <input type="text" class="query-text" ng-input-text="" ng-model="field_query">\n                    </div>\n                    <ul class="field-list user-select-none">\n                        <li ng-repeat="it in inner_field | query_fields:field_query track by $index" class="cursor-pointer nowrap dropdown-item" ng-hide="it.is_build_aggregated === 1 && !it.hasOwnProperty(\'aggregator\')">\n                            <p class="name nowrap {{it.data_type}}-title" title="{{it.name}}" ng-dblclick="addInner($event,it)">\n                                <i ng-if="it.data_type===\'date\' && !it.hasOwnProperty(\'aggregator\')" class="bdp-icon ico-triangle-right" ng-class="{\'ico-triangle-down\':it.show}" ng-click="it.show = !it.show"></i>\n                                <i class="bdp-icon ico-type-{{it.ico_type}}" ng-class="{\'ico-type-{{it.ico_type}}-new\':it.is_build_aggregated != 0 }" ng-show="!it.hasOwnProperty(\'aggregator\')"></i>\n                                <i class="bdp-icon ico-type-number" ng-class="{\'ico-type-{{it.ico_type}}-new\':it.is_build_aggregated != 0 }" ng-show="it.hasOwnProperty(\'aggregator\')"></i>\n                                <span ng-if="!it.nick_name" class="inner-name nowrap" title="{{it.name}}">{{it.name}}{{setAdvanceAggregatorName(it)}}</span>\n                                <span ng-if="!!it.nick_name" class="inner-name nowrap" title="{{it.nick_name}}">{{it.nick_name}}</span>\n                                <a class="add cursor-pointer" ng-click="addInner($event,it)">\u6DFB\u52A0</a>\n                            </p>\n                            <ul ng-if="it.data_type == \'date\' && !it.hasOwnProperty(\'aggregator\') " class="sub-date-list" ng-show="it.show">\n                                <li>\n                                    <p class="name nowrap" ng-dblclick="addInner($event,it,\'year\')">\n                                        <i class="bdp-icon ico-type-3" ng-class="{\'ico-type-3-orange\':it.is_build_aggregated != 0}"></i>\n                                        <span>\u5E74</span>\n                                        <a class="add" ng-click="addInner($event,it,\'year\')">\u6DFB\u52A0</a>\n                                    </p>\n                                </li>\n                                <li>\n                                    <p class="name nowrap" ng-dblclick="addInner($event,it,\'quarter\')">\n                                        <i class="bdp-icon ico-type-3" ng-class="{\'ico-type-3-orange\':it.is_build_aggregated != 0}"></i>\n                                        <span>\u5B63</span>\n                                        <a class="add" ng-click="addInner($event,it,\'quarter\')">\u6DFB\u52A0</a>\n                                    </p>\n                                </li>\n                                <li>\n                                    <p class="name nowrap" ng-dblclick="addInner($event,it,\'month\')">\n                                        <i class="bdp-icon ico-type-3" ng-class="{\'ico-type-3-orange\':it.is_build_aggregated != 0}"></i>\n                                        <span>\u6708</span>\n                                        <a class="add" ng-click="addInner($event,it,\'month\')">\u6DFB\u52A0</a>\n                                    </p>\n                                </li>\n                                <li>\n                                    <p class="name nowrap" ng-dblclick="addInner($event,it,\'week\')">\n                                        <i class="bdp-icon ico-type-3" ng-class="{\'ico-type-3-orange\':it.is_build_aggregated != 0}"></i>\n                                        <span>\u5468</span>\n                                        <a class="add" ng-click="addInner($event,it,\'week\')">\u6DFB\u52A0</a>\n                                    </p>\n                                </li>\n                                <li>\n                                    <p class="name nowrap" ng-dblclick="addInner($event,it,\'day\')">\n                                        <i class="bdp-icon ico-type-3" ng-class="{\'ico-type-3-orange\':it.is_build_aggregated != 0}"></i>\n                                        <span>\u65E5</span>\n                                        <a class="add" ng-click="addInner($event,it,\'day\')">\u6DFB\u52A0</a>\n                                    </p>\n                                </li>\n                                <li>\n                                    <p class="name nowrap" ng-dblclick="addInner($event,it,\'hour\')">\n                                        <i class="bdp-icon ico-type-3" ng-class="{\'ico-type-3-orange\':it.is_build_aggregated != 0}"></i>\n                                        <span>\u65F6</span>\n                                        <a class="add" ng-click="addInner($event,it,\'hour\')">\u6DFB\u52A0</a>\n                                    </p>\n                                </li>\n                            </ul>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="add-list block-shadow-right">\n                <p class="name block-head">\u5DF2\u6DFB\u52A0</p>\n                <div class="sbd br2" id="addList">\n                    <ul>\n                        <li ng-repeat="it in addList track by $index" class="cursor-pointer {{it.data_type}} dropdown-item" ng-hide="it.del" ng-click="selectItemList=[];showAllItem($event,it,$index)">\n                            <div class="name" ng-mouseleave="moreShow[it.fid] = false">\n                                <a ng-click="delInnerFilter($event,$index)" class="bdp-icon ico-trash" title="\u5220\u9664"></a>\n                                <span ng-if="!it.nick_name " class="inner-name nowrap" title="{{it.name}}">{{it.name}}{{setAdvanceAggregatorName(it,formulaKeyMap)}}</span>\n                                <span ng-if="!!it.nick_name" class="inner-name nowrap" title="{{it.nick_name}}">{{it.nick_name}}</span>\n\n                                <span ng-if="it.data_type == \'date\' && !it.hasOwnProperty(\'aggregator\')" class="date-granularity" ng-click="$event.stopPropagation();addListHighLight($index)">\n                                    (\n                                    <div class="s-select-model" ng-class="{\'zIndex\':moreShow[it.fid]}">\n                                        <p ng-click="moreShow[it.fid] = !moreShow[it.fid]">{{it.granularity | granularityName  }}</p>\n                                        <ul class="date-granularity-list dropdown-wrap" ng-show=" moreShow[it.fid]" ng-click="$event.stopPropagation()">\n                                            <li class="dropdown-item" ng-class="{\'active\':!it.granularity}" ng-click="it.granularity= \'\';moreShow[it.fid] = false;showAllItem($event,it,$index)">\u5E38\u89C4</li>\n                                            <li class="dropdown-item" ng-class="{\'active\':it.granularity == \'year\'}" ng-click="it.granularity=\'year\';moreShow[it.fid] = false;showAllItem($event,it,$index)">\u6309\u5E74</li>\n                                            <li class="dropdown-item" ng-class="{\'active\':it.granularity == \'quarter\'}" ng-click="it.granularity=\'quarter\';moreShow[it.fid] = false;showAllItem($event,it,$index)">\u6309\u5B63</li>\n                                            <li class="dropdown-item" ng-class="{\'active\':it.granularity == \'month\'}" ng-click="it.granularity=\'month\';moreShow[it.fid] = false;showAllItem($event,it,$index)">\u6309\u6708</li>\n                                            <li class="dropdown-item" ng-class="{\'active\':it.granularity ==\'week\'}" ng-click="it.granularity=\'week\';moreShow[it.fid] = false;showAllItem($event,it,$index)">\u6309\u5468</li>\n                                            <li class="dropdown-item" ng-class="{\'active\':it.granularity == \'day\'}" ng-click="it.granularity=\'day\';moreShow[it.fid] = false;showAllItem($event,it,$index)">\u6309\u65E5</li>\n                                        </ul>\n                                    </div>\n                                    )\n                                </span>\n                            </div>\n                        </li>\n                        <div ng-if="addList.length == 0" class="empty-addlist">\u8BF7\u4ECE\u5DE6\u4FA7\u5217\u8868\u9009\u62E9\u6DFB\u52A0</div>\n                    </ul>\n                </div>\n            </div>\n            <div class="select-item-list">\n                <p class="name block-head">\u9009\u9879</p>\n                <div class="sbd" id="selectItemList">\n                    <div ng-loading-gif="" size="size-1x" ng-show="showLoading" class="need-bg"></div>\n                    <ul ng-show="!showLoading && selectItemList.length > 0" ng-class="{\'for-date\':default_granularity != \'\' && selectField.data_type == \'date\'}" ui-sortable="sortInnerStringFilter" ng-model="selectItemList">\n                        <!-- \u663E\u793A \u5168\u90E8\u65F6\u95F4 -->\n                        <li ng-if="selectField.data_type == \'date\' && default_granularity == \'\' && !selectField.hasOwnProperty(\'aggregator\')">\n                            <div class="name" ng-if="selectItemList.length != 0">\n                                <span class="inner-name nowrap select-all-name" ng-class="{\'active\':selectField.show_all}">\u5168\u90E8</span>\n                                <span class="bdp-icon-wrap cursor-pointer eye">\n                                    <i ng-if="selectField.show_all" class="bdp-icon ico-eye" ng-click="setShowAllFlag()" title="\u9690\u85CF\u5168\u90E8\u65F6\u95F4\u9009\u9879"></i>\n                                    <i ng-if="!selectField.show_all" class="bdp-icon ico-eye" ng-click="setShowAllFlag()" title="\u663E\u793A\u5168\u90E8\u65F6\u95F4\u9009\u9879"></i>\n                                </span>\n                            </div>\n                        </li>\n                        <!-- \u663E\u793A \u5168\u90E8 -->\n                        <li ng-if="((selectField.data_type == \'date\' && default_granularity != \'\') || selectField.data_type == \'sub_date\' || selectField.data_type == \'string\') && !selectField.hasOwnProperty(\'aggregator\')">\n                            <div class="name" ng-if="selectItemList.length != 0">\n                                <span class="inner-name nowrap select-all-name" ng-class="{\'active\':selectField.show_all}">\u5168\u90E8</span>\n                                <span class="bdp-icon-wrap cursor-pointer eye">\n                                    <i ng-if="selectField.show_all" class="bdp-icon ico-eye" ng-click="setShowAllFlag()" title="\u9690\u85CF\u5168\u90E8\u9009\u9879"></i>\n                                    <i ng-if="!selectField.show_all" class="bdp-icon ico-eye" ng-click="setShowAllFlag()" title="\u663E\u793A\u5168\u90E8\u9009\u9879"></i>\n                                </span>\n                            </div>\n                        </li>\n                        <!-- \u65E5\u671F\u5B57\u6BB5\u7C7B\u578B \u5E38\u89C4 -->\n                        <li ng-repeat="it in selectItemList track by $index" ng-hide="it.del" ng-if="selectField.data_type == \'date\' && default_granularity == \'\' && !selectField.hasOwnProperty(\'aggregator\')">\n                            <div class="name">\n                                <span class="inner-name nowrap" title="{{it.name}}">\n                                   {{it.name}}\n                                </span>\n                            </div>\n                        </li>\n                        <!-- \u65E5\u671F\u5B57\u6BB5\u7C7B\u578B \u5E26\u7C92\u5EA6 -->\n                        <li ng-repeat="it in selectItemList track by $index" ng-hide="it.del" ng-if="selectField.data_type == \'date\' && default_granularity != \'\' && !selectField.hasOwnProperty(\'aggregator\')">\n                            <div class="name">\n                                <span class="inner-name nowrap" title="{{it | timestamp2LocaleDate: default_granularity }}">\n                                  {{it | timestamp2LocaleDate: default_granularity }}\n                                </span>\n                                <span ng-if="itemDataType == \'date\' && default_granularity == \'week\'">({{it | weekFormat}})</span>\n                            </div>\n                        </li>\n                        <!-- \u6587\u672C\u5B57\u6BB5\u7C7B\u578B -->\n                        <li ng-repeat="it in selectItemList track by $index" ng-hide="it.del" ng-if="selectField.data_type == \'string\' && !selectField.hasOwnProperty(\'aggregator\')" class="dropdown-item cursor-move" ng-class="{\'graft-disabled-wrapper\': isGraftTb, \'J-sortable-string\': !isGraftTb}" title="{{isGraftTb ? \'\u76F4\u8FDE\u6570\u636E\u8868\u65E0\u6CD5\u4F7F\u7528\u8BE5\u529F\u80FD\uFF0C\u4F7F\u7528\u6570\u636E\u6E90\u52A0\u901F\uFF08\u540C\u6B65\uFF09\u540E\u4F7F\u7528\' : item.name}}">\n                            <div class="name">\n                                <span class="inner-name nowrap" title="{{it.name}}" ng-class="{\'graft-font-disabled\': isGraftTb}">\n                                  <i class="bdp-icon ico-order" ng-class="{\'graft-icon-disabled\': isGraftTb}"></i>{{it}}\n                                </span>\n                            </div>\n                        </li>\n                        <!-- \u5B50\u65E5\u671F\u5B57\u6BB5\u7C7B\u578B -->\n                        <li ng-repeat="it in selectItemList track by $index" ng-hide="it.del" ng-if="selectField.data_type == \'sub_date\' && !selectField.hasOwnProperty(\'aggregator\')">\n                            <div class="name">\n                                <span class="inner-name nowrap" title="{{it | sub_date:selectField}}">\n                                  {{it | sub_date:selectField}}\n                                </span>\n                            </div>\n                        </li>\n                        <!-- \u65E5\u671F\u5B57\u6BB5\u7C7B\u578B \u81EA\u5B9A\u4E49\u65F6\u95F4\u6BB5 -->\n                        <li class="cursor-pointer dropdown-item" ng-hide="it.del" ng-if="selectItemList != 0 && selectField.data_type == \'date\' && default_granularity == \'\' && !selectField.hasOwnProperty(\'aggregator\') ">\n                            <div class="name">\n                                <span class="inner-name nowrap" title="{{it.name}}">\u81EA\u5B9A\u4E49\u65F6\u95F4\u6BB5</span>\n                            </div>\n                        </li>\n                        <!-- \u6570\u503C\u5B57\u6BB5\u7C7B\u578B -->\n                        <li ng-if="( selectField.data_type == \'number\' || (selectField.data_type !=\'number\' && selectField.hasOwnProperty(\'aggregator\')) ) && selectItemList.length != 0">\n                            <div class="name">\n                                <span class="inner-name nowrap">\u6570\u503C\u8303\u56F4</span>\n                            </div>\n                        </li>\n                        <!-- \u6570\u503C\u5B57\u6BB5\u7C7B\u578B -->\n                        <li ng-if="( selectField.data_type == \'number\' || (selectField.data_type !=\'number\' && selectField.hasOwnProperty(\'aggregator\')) ) && selectItemList.length != 0">\n                            <div class="name">\n                                <span class="inner-name nowrap">{{selectItemList[0]}}</span>\n                                <span class="inner-name nowrap">~</span>\n                                <span class="inner-name nowrap">{{selectItemList[1]}}</span>\n                            </div>\n                        </li>\n\n                    </ul>\n                    <div ng-if="selectItemList.length == 0" class="empty-addlist">\u8BF7\u4ECE\u4E2D\u95F4\u5217\u8868\u9009\u62E9\u663E\u793A</div>\n                    <!-- \u65F6\u95F4\u9ED8\u8BA4\u6700\u8FD1 -->\n                    <div ng-show="!showLoading" ng-if="(default_granularity != \'\' && selectField.data_type == \'date\') && (selectItemList.length != 0)" class="default-wrap">\n                        <label>\n                            <input type="checkbox" ng-model="selectField.recent_date_button" class="default-recent-checkbox">\n                            <span>\u9ED8\u8BA4\u9009\u4E2D\u6700\u8FD11</span>{{default_recent_str}}\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'innerFilter\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveInnerFilter();closeThisDialog();">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/chart-inner-filter/chart-inner-filter-level.html', '<div class="block-header has-toggle" ng-click="toggleBlock($event)" ng-class="{\'no-toggle\': currentLevelInnerFilter.length == 0}">\n\t<a class="bdp-icon-wrap hd-icon" ng-click="addInnerFilter($event, isgraft)">\n\t\t<i class="bdp-icon ico-edit"></i>\n\t</a>\n    <span>\u56FE\u5185\u7B5B\u9009\u5668</span>\n</div>\n<div class="block-body" ng-show="currentLevelInnerFilter.length > 0">\n\t<div ui-tree="treeOptions">\n\t    <ol ui-tree-nodes="" ng-model="currentLevelInnerFilter">\n\t        <li ng-repeat="item in currentLevelInnerFilter" ui-tree-node="" ng-include="\'innerFilterLevelTpl\'"></li>\n\t    </ol>\n\t</div>\n</div>\n\n<script type="text/ng-template" id="innerFilterLevelTpl">\n    <div ui-tree-handle="" class="inner-filter-item nowrap">\n        <a class="bdp-icon-wrap">\n            <i class="bdp-icon ico-order cursor-move"></i>\n        </a>\n        <span class="nowrap name" title="{{item.name}}" ng-if="!item.nick_name">{{item.name}}{{setAdvanceAggregatorName(item)}}</span>\n        <span class="nowrap name" title="{{item.nick_name}}" ng-if="!!item.nick_name">{{item.nick_name}}</span>\n            <span class="pa hidden operate" ng-hide="item.data_type === \'number\' || ( item.data_type !=\'number\' && item.hasOwnProperty(\'aggregator\') )">\n                <a class="bdp-icon-wrap" data-nodrag="" ng-click="innerFilter.level(this,\'up\')">\n                    <i class="bdp-icon ico-triangle-left fr"></i>\n                </a>\n                <a class="bdp-icon-wrap" data-nodrag="" ng-click="innerFilter.level(this,\'down\')">\n                    <i class="bdp-icon ico-triangle-right fl"></i>\n                </a>\n            </span>\n    </div>\n    <ol ui-tree-nodes="" ng-model="item.items">\n        <li ng-repeat="item in item.items" ng-init="itemChild=true" ui-tree-node="" ng-include="\'innerFilterLevelTpl\'">\n        </li>\n    </ol>\n</script>');
    $templateCache.put('/static/chart-edit/chart-inner-filter/chart-inner-filter.html', '<div class="filter-i-w chart-inner-filter" ng-if="innerFilterList.length" bindonce="">\n    <i class="bdp-icon ico-filter" style="float:left;margin-top:16px;margin-right:16px"></i>\n    <dl class="filter-i" ng-repeat="it in innerFilterList track by $index" ng-class="{\'disable\':(it.disabled ||it.recent_date_button)}">\n        <dd ng-if="it.data_type !== \'date\' && it.data_type !== \'number\' && !it.hasOwnProperty(\'aggregator\')" click-outside="show_options[it.fid+it.uniq_id] = false" outside-active="show_options[it.fid+it.uniq_id]">\n            <div class="filter-i-list-w">\n                <p class="filter-i-name name" ng-click="getInnerFilterList($event,it)">\n                    <span class="nowrap" title="{{it.range | sub_date:it}}">\n                        {{it.range | sub_date:it}}\n                    </span>\n                    <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                </p>\n                <div class="filter-i-list" ng-show="show_options[it.fid+it.uniq_id]" ng-style="adjustWidth[it.fid]">\n                    \n                    <div ng-loading-gif="" size="size-1x" placeholder="true" ng-show="showLoading"></div>\n\n                    <div ng-if="(innerList[it.fid].total <= 100 && innerList[it.fid].list.length > 20)" ng-show="!showLoading" class="query-box auto">\n                        <input type="text" class="query-text" ng-model="queryKwd[it.fid]" ng-input-text="" ng-keyup="enterToQuery({\'e\':$event,\'filter\':it,\'is_advance\':false,\'real_search\':false})">\n                    </div>\n\n                    <div ng-if="innerList[it.fid].is_all && innerList[it.fid].total > 100" ng-show="!showLoading" class="query-box">\n                        <input type="text" class="query-text" ng-model="queryKwd[it.fid]" ng-keyup="enterToQuery({\'e\':$event,\'filter\':it,\'is_advance\':false,\'real_search\':true})">\n                        <a class="bdp-icon-wrap query-btn" ng-click="innerQrueryField(it)">\n                            <i class="bdp-icon ico-search"></i>\n                        </a>\n                    </div>\n\n                    <ul ng-show="!showLoading">\n                        <li ng-show="it.show_all" ng-click="modifyInnerFilter(it, [])">\n                            <a ng-class="{\'active\':it.range.length == 0}">\u5168\u90E8</a>\n                        </li>\n                        <li ng-repeat="range in innerList[it.fid].list | query_inner:innerList[it.fid].keyword:\'\':it track by $index " title="{{range | sub_date:it}}" ng-click="modifyInnerFilter(it,[range])">\n                            <a ng-class="{\'active\':it.range[0] == range }">{{range | sub_date:it}}</a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </dd>\n\n        <dd ng-if="it.data_type === \'date\' && !it.hasOwnProperty(\'aggregator\')" click-outside="show_options[it.fid+it.uniq_id] = false" outside-active="show_options[it.fid+it.uniq_id]">\n            <div class="filter-i-list-w">\n                <p class="filter-i-name name" ng-click="getInnerFilterList($event,it)">\n\n                    <span class="nowrap" ng-if="it.granularity !== \'\'" title="{{it.range | sub_date:it}}">\n                        {{it.range | sub_date:it}}\n                        <em ng-if="it.range[0] && it.granularity == \'week\'">({{it.range[0] | weekFormat}})</em>\n                    </span>\n\n                    <span class="nowrap" ng-if="!it.granularity" title="{{it.range | format_date:adv_date_list:it.name}}">\n                        {{it.range | format_date:adv_date_list:it.name}}\n                    </span>\n                    <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                </p>\n                <div class="filter-i-list" ng-show="show_options[it.fid+it.uniq_id]" ng-style="adjustWidth[it.fid]">\n                    <div ng-loading-gif="" size="size-1x" placeholder="true" ng-show="showLoading"></div>\n\n                    <ul ng-if="!it.granularity" ng-show="!showLoading">\n                        <li>\n                            <a ng-class="{\'active\':it.range[0] == \'\' || it.range.length == 0}" ng-if="it.show_all" ng-click="modifyInnerFilter(it, []);">\u5168\u90E8\u65F6\u95F4</a>\n                        </li>\n                        <li ng-repeat="adv in innerList[it.fid].list" title="{{adv.name}}">\n                            <a ng-class="{\'active\':it.range[0] == adv.opt_id}" ng-click="modifyInnerFilter(it, [adv.opt_id]);">\n                                {{adv.name}}\n                            </a>\n                        </li>\n                        <li>\n                            <a ng-class="{\'active\':it.range.length == 2}" ng-click="showInnerFilterDatePicker($index,it.range)">\u81EA\u5B9A\u4E49\u65F6\u95F4\u6BB5</a>\n                        </li>\n                    </ul>\n\n                    <!--granularity not null-->\n                    <ul ng-if="it.granularity !== \'\'" ng-show="!showLoading">\n                        <li ng-show="it.show_all" ng-click="modifyInnerFilter(it, [])">\n                            <a ng-class="{\'active\':it.range.length == 0}">\u5168\u90E8\u65F6\u95F4</a>\n                        </li>\n\n                        <li ng-repeat="range in innerList[it.fid].list | query_inner:innerList[it.fid].keyword:\'\':it track by $index " ng-if="it.granularity !== \'week\'">\n                            <a ng-class="{\'active\':it.range[0] == range }" title="{{range | sub_date:it}}" ng-click="modifyInnerFilter(it,[range])">\n                                {{range | sub_date:it}}\n                            </a>\n                        </li>\n                        <li ng-repeat="range in innerList[it.fid].list | query_inner:innerList[it.fid].keyword:\'\':it track by $index " ng-if="it.granularity == \'week\'">\n                            <a ng-class="{\'active\':it.range[0] == range }" title="{{range | sub_date:it}}({{range | weekFormat}})" ng-click="modifyInnerFilter(it, [range])">\n                                {{range | sub_date:it}}\n                                <span>({{range | weekFormat}})</span>\n                            </a>\n                        </li>\n\n                    </ul>\n                </div>\n            </div>\n        </dd>\n        <dd ng-if="it.data_type == \'number\' || (it.data_type !=\'number\' && it.hasOwnProperty(\'aggregator\'))" click-outside="show_options[it.fid+it.uniq_id] = false" outside-active="show_options[it.fid+it.uniq_id]">\n            <div class="filter-i-list-w number-filter-i-list">\n                <p class="filter-i-name name" ng-click="getInnerFilterListForNumber($event,it)">\n                    <span ng-if="!(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\') " class="nowrap" title="{{it.name}}">{{it.name}}{{setAdvanceAggregatorName(it)}}</span>\n                    <span ng-if="(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\')" class="nowrap" title="{{it.nick_name}}">{{it.nick_name}}</span>\n                    <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                </p>\n                <div class="filter-i-list" ng-style="adjustWidth[it.fid]" ng-show="show_options[it.fid+it.uniq_id]">\n                    <div ng-loading-gif="" size="size-1x" placeholder="true" ng-show="showLoading"></div>\n                    <div ng-show="!showLoading" class="select-box">\n                        <select ng-model="innerList[it.fid].numOpt" ng-options="opt.value as opt.text for opt in numberInnerFilterMap" ng-change="changeNumberOpt(it,innerList[it.fid].numOpt)"></select>\n                    </div>\n                    <ul ng-show="!showLoading">\n                        <li class="none-filter-range" ng-if="nullRange[it.fid+it.uniq_id]">\u65E0\u8303\u56F4</li>\n                        <li ng-loading-gif="" size="size-1x" placeholder="true" ng-show="rangeLoading"></li>\n                        <li class="range range-all" ng-if="!nullRange[it.fid+it.uniq_id] && defaultRange[it.fid+it.uniq_id].length > 0 && innerList[it.fid].numOpt == -1">\n                            {{defaultRange[it.fid+it.uniq_id][0]}}~{{defaultRange[it.fid+it.uniq_id][1]}}\n                        </li>\n                        <li class="range" ng-if="!nullRange[it.fid+it.uniq_id] && defaultRange[it.fid+it.uniq_id].length == 0 && innerList[it.fid].numOpt != -1">\n                            <input type="number" ng-model="innerList[it.fid].numRange[0]" placeholder="\u503C" ng-disabled="innerList[it.fid].numOpt == 8 || innerList[it.fid].numOpt == 9">\n                        </li>\n                        <li class="range" ng-if="!nullRange[it.fid+it.uniq_id] && defaultRange[it.fid+it.uniq_id].length == 0 && innerList[it.fid].numOpt == 12">\u81F3</li>\n                        <li class="range" ng-if="!nullRange[it.fid+it.uniq_id] && defaultRange[it.fid+it.uniq_id].length == 0 && innerList[it.fid].numOpt == 12">\n                            <input type="number" ng-model="innerList[it.fid].numRange[1]" placeholder="\u503C">\n                        </li>\n                    </ul>\n                    <div class="operator" ng-show="!showLoading">\n                        <button class="bdp-btn bdp-btn-ok" ng-click="modifyInnerFilterForNumber(it)">\u786E\u5B9A</button>\n                    </div>\n\n                </div>\n            </div>\n        </dd>\n    </dl>\n</div>\n');
    $templateCache.put('/static/chart-edit/color-setting/chart-color-setting.html', '<hr class="split" ng-if="!(currentMeta.chart_type == \'C280\' || currentMeta.chart_type == \'C273\')">\n<div class="color-setting" data-drop="true" data-jqyoui-options="{accept: \'.field-list .field-drag-title\'}" data-jqyoui-droppable="{onDrop: \'dropField()\'}" bindonce="">\n    <div style="padding: 0 0 8px 0" class="color-setting-title" ng-if="!(currentMeta.chart_type == \'C280\' || currentMeta.chart_type == \'C273\')">\u989C\u8272</div>\n    <div ng-show="!showSeriesColor" ng-click="clickPanel()">\n        <div class="btn-group" ng-if="currentMeta.color_setting && currentMeta.color_setting.mode !== undefined && currentMeta.chart_type != \'C360\' && currentMeta.chart_type != \'C370\'" ng-repeat="colorField in currentMeta.color_setting.field" jqyoui-draggable="{onStart: \'startDrag()\', onDrag: \'removePosition()\',onStop: \'del($index)\'}" data-drag="canRemove()">\n            <div class="tag">\n                <div class="nowrap">\n                    <span class="field-name nowrap" ng-bind="colorField.name">\n                    </span>\n                    <em class="field-formula" ng-show="currentMeta.color_setting.aggregator">({{formulaKeyMap[currentMeta.color_setting.aggregator]}})</em>\n                </div>\n                <i class="bdp-icon ico-setting-gray"></i>\n            </div>\n            <div aria-labelledby="color-setting" class="dropdown-menu" ng-if="currentMeta.color_setting.mode == 1">\n                <div class="color-range-widget color-range-widget-sm clearfix" color-linear-gradient="" start-color="currentMeta.color_setting.range_color.start_color" step="currentMeta.color_setting.range_color.step" end-color="currentMeta.color_setting.range_color.end_color">\n                </div>\n            </div>\n        </div>\n\n        <!-- \u65ED\u65E5\u56FE\u989C\u8272\u8BBE\u7F6E -->\n        <div class="btn-group" ng-if="currentMeta.chart_type == \'C360\'" jqyoui-draggable="{onStart: \'startDrag()\', onDrag: \'removePosition()\',onStop: \'del()\'}" data-drag="false">\n            <div class="tag">\n                <div class="nowrap">\n                    <span class="field-name nowrap" ng-bind="currentMeta.color_setting.field[0].name">\n                    </span>\n                    <em class="field-formula" ng-show="currentMeta.color_setting.aggregator">({{formulaKeyMap[currentMeta.color_setting.aggregator]}})</em>\n                </div>\n                <i class="bdp-icon ico-setting-gray"></i>\n            </div>\n        </div>\n        <!-- \u65ED\u65E5\u56FE\u989C\u8272\u8BBE\u7F6E\u7ED3\u675F -->\n\n        <!-- \u6811\u56FE\u989C\u8272\u8BBE\u7F6E -->\n        <div class="btn-group" ng-if="currentMeta.chart_type == \'C370\' " jqyoui-draggable="{onStart: \'startDrag()\', onDrag: \'removePosition()\',onStop: \'del()\'}" data-drag="false">\n            <div class="tag">\n                <div class="nowrap">\n                    <span class="field-name nowrap" ng-bind="currentMeta.color_setting.field[0].name">\n                    </span>\n                    <em class="field-formula" ng-show="currentMeta.color_setting.aggregator">({{formulaKeyMap[currentMeta.color_setting.aggregator]}})</em>\n                </div>\n                <i class="bdp-icon ico-setting-gray"></i>\n            </div>\n        </div>\n        <!-- \u6811\u56FE\u989C\u8272\u8BBE\u7F6E\u7ED3\u675F-->\n\n    </div>\n\n    <div ng-show="showSeriesColor && seriesColors && seriesColors.length > 0" class="cursor-pointer">\n        <ul ng-click="showColorSettingModalByItem()">\n           <li class="series-color-item nowrap" ng-repeat="s in seriesColors"> \n                <i class="color-thumb-sm" ng-style="{background: s.color}"></i><span title="{{s.show_name}}">{{s.show_name}}</span>\n            </li>\n        </ul>\n    </div>\n    <div ng-if="!colorSettingDisabled && !showSeriesColor && (!colorSetting || colorSetting.mode === undefined)" class="no-color-setting">\n        <p>\u62D6\u62FD\u5B57\u6BB5\u5230\u8FD9\u91CC</p>\n        <p>\u8FDB\u884C\u989C\u8272\u8BBE\u7F6E</p>\n    </div>\n\n    <div ng-if="colorSettingDisabled" class="no-color-setting">\u4E0D\u652F\u6301\u989C\u8272\u8BBE\u7F6E</div>\n\n</div>\n');
    $templateCache.put('/static/chart-edit/color-setting/color-setting-modal.html', '<div bindonce="">\n    <div class="ngdialog-title">\u989C\u8272\u8BBE\u7F6E</div>\n    <div class="ngdialog-message color-setting-dialog">\n        <div class="bd clearfix">\n            <div class="row mt10 mb10" ng-show="showFormulaList()">\n                <label>\u8BA1\u7B97\u516C\u5F0F</label>\n                <select class="aggr-selector" ng-model="colorSetting.aggregator" ng-change="changeAggr()" ng-options="formula.type as formula.name for formula in formulaList">\n                    <option value="" ng-if="currentMeta.chart_type !== \'C230\' || currentMeta.chart_type === \'C230\' && currentMeta.x.length && colorSetting.field[0].fid === currentMeta.x[0].fid">\u65E0</option>\n                </select>\n            </div>\n            <div class="row mt10 mb10" ng-if="currentMeta.chart_type == \'C340\'">\n                <label>\u914D\u8272\u6A21\u5F0F</label>\n                <select class="aggr-selector" ng-model="colorSetting.mode" ng-change="changeColorModel()" ng-options="item.key as item.name for item in colorWordCloudModel">\n                </select>\n            </div>\n\n            <div ng-if="colorSetting.mode != 1">\n                <div class="color-preview clearfix bg-block">\n                    <div class="field-values">\n                        <p class="hd">\u5B57\u6BB5\u9879</p>\n                        <ul class="pane block-shadow-right" ng-show="!viewData.showTips">\n                            <li class="field-value-item nowrap" ng-repeat="key in colorItemsOrder track by $index" ng-click="selectItem($event, key, $index)" ng-class="{selected: isHighlight($index)}">\n                                <i class="color-thumb-sm" ng-style="{background: colorSetting.enum_color_map[key].color}"></i><span title="{{colorSetting.enum_color_map[key].name}}">{{colorSetting.enum_color_map[key].name}}</span>\n                            </li>\n                        </ul>\n                        <div class="tips" ng-if="viewData.showTips">\u8BE5\u5B57\u6BB5\u9879\u8D85\u8FC7\u4E00\u767E\u9879\uFF0C\u6682\u4E0D\u652F\u6301\u8BBE\u7F6E\u989C\u8272\u3002</div>\n                    </div>\n                    <div class="color-theme">\n                        <div class="hd clearfix">\n                            <span class="fl">\u914D\u8272\u65B9\u6848</span>\n                            <div class="fr apply-color-theme bdp-btn" ng-click="applyTheme(themeSelector.theme)">\u5E94\u7528</div>\n                            <div class="theme-selector" ng-class="{open: themeSelector.open}" click-outside="themeSelector.open = false" outside-active="themeSelector.open">\n                                <div class="dropdown-btn" id="select-color-theme" ng-click="themeSelector.open = !themeSelector.open">\n                                    {{ themeSelector.theme.alias}}\n                                    <span class="bdp-icon-wrap">\n                                    <i class="bdp-icon ico-triangle-down"></i>\n                                    </span>\n                                </div>\n                                <ul class="dropdown-menu">\n                                    <li class="menuitem cursor-pointer" ng-repeat="theme in colorTheme" ng-class="{active: theme == themeSelector.theme}" ng-click="changeTheme(theme)">\n                                        <i class="bdp-theme-icon ico-theme-{{theme.name}}"></i><span>{{theme.alias}}</span>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                        <ul class="pane">\n                            <li class="color-thumb" ng-repeat="c in colors" ng-style="{background: c}" ng-class="{checked: c == selected.color}" ng-click="selectColor($index)">\n                                <i class="bdp-icon ico-ok-white ico-no-opacity"></i>\n                            </li>\n                        </ul>\n                        <div class="fr cursor-pointer" id="show-more-color">\n                            <color-picker ng-model="viewData.selectedColor" options="colorPickerOptions" trigger-id="show-more-color" on-change="onColorChange(color)">\n                            </color-picker>\n                            <span>\u81EA\u5B9A\u4E49\u989C\u8272</span>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n            <div ng-if="colorSetting.mode == 1">\n                <div class="row">\n                    <span class="fl">\u914D\u8272\u65B9\u6848</span>\n                    <div class="theme-selector range-theme-selector" ng-class="{open: rangeThemeSelector.open}" click-outside="rangeThemeSelector.open = false" outside-active="rangeThemeSelector.open">\n                        <div class="dropdown-btn" id="select-color-theme" ng-click="rangeThemeSelector.open = !rangeThemeSelector.open">\n                            {{ rangeThemeSelector.theme.alias}}\n                            <span class="bdp-icon-wrap">\n                                    <i class="bdp-icon ico-triangle-down"></i>\n                                    </span>\n                        </div>\n                        <ul class="dropdown-menu">\n                            <li class="menuitem cursor-pointer" ng-repeat="theme in rangeColorTheme" ng-class="{active: theme == rangeThemeSelector.theme}" ng-click="changeRangeTheme(theme)">\n                                \n                                <span>{{theme.alias}}</span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="color-range-widget clearfix" color-linear-gradient="" on-change-color="changeRangeColor()" start-color="colorSetting.range_color.start_color" step="colorSetting.range_color.step" end-color="colorSetting.range_color.end_color" show-alpha="colorPickerOptions.showAlpha">\n                    </div>\n                    <div class="clearfix">\n                        <div class="fl">\n                            <label>\n                                <input class="input-number" type="number" ng-model="viewData.min" ng-disabled="viewData.disable_min">\n                                <input type="checkbox" ng-model="viewData.disable_min"><span>\u81EA\u52A8</span>\n                            </label>\n                        </div>\n                        <div class="fr">\n                            <label>\n                                <input class="input-number" type="number" ng-model="viewData.max" ng-disabled="viewData.disable_max">\n                                <input type="checkbox" ng-model="viewData.disable_max">\n                                <span>\u81EA\u52A8</span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <label>\n                        <input type="checkbox" ng-model="viewData.enable_step" ng-change="toggleStep(viewData.enable_step)">\n                        <span>\u68AF\u5EA6</span>\n                    </label>\n                    <input class="color-step input-number" type="number" step="1" min="2" max="20" ng-model="viewData.step" ng-disabled="!viewData.enable_step" ng-change="setStep(viewData.step)">\n                </div>\n                <div class="row">\n                    <label>\n                        <input type="checkbox" ng-model="colorSetting.range_color.inverse" ng-change="inverseRangeColor()">\n                        <span>\u989C\u8272\u53CD\u8F6C</span>\n                    </label>\n                </div>\n            </div>\n\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'colorSettingByField\')" ng-if="colorSetting.mode == 0"><i class="bdp-icon ico-help"></i>\u67E5\u770B\u5E2E\u52A9</span>\n        <span class="operator-help-link" ng-click="goHelp(\'colorSettingByNum\')" ng-if="colorSetting.mode == 1"><i class="bdp-icon ico-help"></i>\u67E5\u770B\u5E2E\u52A9</span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveByField()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="cancelByField()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/color-setting/color-setting-series.html', '<div bindonce="">\n    <div class="ngdialog-title">\u989C\u8272\u8BBE\u7F6E</div>\n    <div class="ngdialog-message color-setting-dialog">\n        <div class="bd clearfix bg-block">\n            <div class="color-preview">\n                <div class="field-values">\n                    <p class="hd" ng-hide="isSunburst">\u6570\u503C\u8F74</p>\n                    <p class="hd" ng-show="isSunburst">\u5B57\u6BB5\u9879</p>\n                    <ul class="pane block-shadow-right">\n                        <li class="field-value-item nowrap" ng-repeat="s in series" ng-click="selectItem($index)" title="{{s.show_name}}" ng-class="{selected: isHighlight($index)}">\n                            <i class="color-thumb-sm" ng-style="{background: s.color}"></i>\n                            <span>{{s.show_name}}</span>\n                        </li>\n                    </ul>\n\n                </div>\n                <div class="color-theme">\n                    <div class="hd clearfix">\n                        <span class="fl">\u914D\u8272\u65B9\u6848</span>\n\n                        <div class="fr apply-color-theme bdp-btn" ng-click="applyTheme(themeSelector.theme)">\u5E94\u7528</div>\n                        <div class="theme-selector" ng-class="{open: themeSelector.open}" click-outside="themeSelector.open = false" outside-active="themeSelector.open">\n                            <div class="dropdown-btn" id="select-color-theme" ng-click="themeSelector.open = !themeSelector.open">\n                                {{ themeSelector.theme.alias}}\n                                <span class="bdp-icon-wrap">\n                                <i class="bdp-icon ico-triangle-down"></i>\n                                </span>\n                            </div>\n                            <ul class="dropdown-menu">\n                                <li class="menuitem cursor-pointer" ng-repeat="theme in colorTheme" ng-class="{active: theme == themeSelector.theme}" ng-click="changeTheme(theme)">\n                                    <i class="bdp-theme-icon ico-theme-{{theme.name}}"></i><span>{{theme.alias}}</span>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <ul class="pane">\n                        <li class="color-thumb" ng-repeat="c in chartColorTheme[themeSelector.theme.name]" ng-style="{background: c}" ng-class="{checked: c == series[highlightIndex].color}" ng-click="selectColor($index)">\n                            <i class="bdp-icon ico-ok-white ico-no-opacity"></i>\n                        </li>\n                    </ul>\n                    <div class="fr cursor-pointer" id="show-more-color" ng-hide="isSunburst">\n                        <color-picker ng-model="viewData.selectedColor" options="colorPickerOptions" trigger-id="show-more-color" on-change="onColorChange(color)">\n                        </color-picker>\n                        <span>\u81EA\u5B9A\u4E49\u989C\u8272</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveByItem()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="cancelByItem()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/condition-formatting/bdp-select.html', '<div class="bdp-select">\n    <div class="bdp-input" ng-click="showDropdown($event)" click-outside="show = false" outside-active="show">\n        <i class="bdp-input__icon bdp-icon ico-triangle-down"></i>\n        <input type="text" class="bdp-input__inner cursor-text J_input" ng-if="valueType == 0" ng-model="valueData" ng-keyup="clearNoNum(item, valueIndex, valueData)" placeholder="\u8BF7\u8F93\u5165\u6570\u503C">\n        <input type="text" class="bdp-input__inner" ng-if="valueType != 0" value="{{list[valueType]}}" readonly="readonly">\n        <ul class="dropdown-wrap bdp-select__dropdown" ng-show="show">\n            <li class="dropdown-item" ng-repeat="(key, val) in list track by $index" ng-click="setType(key)">{{list[key]}}</li>\n        </ul>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/condition-formatting/chart-table-condition-formatting.html', '<div class="sub-block tb-conditional-formatting">\n    <div class="block-header">\n        <a class="bdp-icon-wrap hd-icon cursor-pointer" ng-click="showDialog()">\n            <i class="bdp-icon ico-edit"></i>\n        </a>\n        <span>\u6761\u4EF6\u683C\u5F0F</span>\n    </div>\n    <div class="block-body bd">\n        <ul class="table-condition-list">\n            <li ng-repeat="c in $view" class="condition-item">\n                <i ng-if="viewMeta.chart_type != \'C310\' && c.color_type != 2 && c.color_type != 3" class="bdp-icon fr ico-formatting-thumb" ng-style="c.style">{{conditionDemoText}}</i>\n                <i ng-if="viewMeta.chart_type == \'C200\' && c.color_type == 2" class="bdp-icon fr ico-formatting-thumb" style="{{c.gradationColor}}">{{conditionDemoText}}</i>\n                <i ng-if="viewMeta.chart_type == \'C200\' && c.color_type == 3" class="bdp-icon fr ico-formatting-thumb" style="{{createDataBarColor(c.bar_color.left, c.bar_color.right, c.bar_color.axis, c.bar_color.text_color)}}">{{conditionDemoText}}</i>\n                <span ng-if="viewMeta.chart_type == \'C310\'" class="fr ico-formatting-thumb {{viewMeta.chart_type}}" ng-style="c.style">\n                    <i class="bdp-icon icomoon icomoon-{{c.shape_type}}"></i>\n                    <i class="bdp-icon">{{conditionDemoText}}</i>\n                </span>\n                <span class="text">\n                    <span>{{c.alias}}</span>\n                    <span ng-if="c.color_type != 2 && c.color_type != 3">{{operatorMap[c.operator]}} {{ c.displayRangeText}}</span>\n                    <span ng-if="c.color_type == 2">\u6309\u8272\u9636</span>\n                    <span ng-if="c.color_type == 3">\u6309\u6570\u636E\u6761</span>\n                </span>\n            </li>\n        </ul>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/condition-formatting/conditional-formatting.html', '<div bindonce="">\n    <div class="ngdialog-title">\n        <span>\u6761\u4EF6\u683C\u5F0F</span>\n        <span class="title-tip" ng-if="currentMeta.chart_type === \'C200\'">\u5BF9\u540C\u4E00\u6570\u503C\u65E0\u6CD5\u540C\u65F6\u8BBE\u7F6E"\u6570\u636E\u6761"\u548C"\u5355\u8272/\u8272\u9636"</span>\n    </div>\n    <div class="ngdialog-message">\n        <div ng-if="conditions.length == 0" class="text-center mt15">\n            <p>\u5F53\u524D\u8FD8\u6CA1\u6709\u8BBE\u7F6E\u6761\u4EF6</p>\n            <button class="cursor-pointer bdp-btn init-add" ng-click="add()">\u70B9\u6B64\u6DFB\u52A0</button>\n        </div>\n        <ul class="condition-list" ui-sortable="tbConditionSort" ng-model="conditions">\n            <li ng-repeat="item in conditions" class="condition-item dialog-condition-item">\n                <i class="bdp-icon ico-order"></i>\n                <select class="select-color-type" ng-if="currentMeta.chart_type == \'C200\'" ng-model="item.color_type" ng-change="colorboardObj.changeColorType(item)">\n                    <option value="1">\u5355\u8272</option>\n                    <option value="2">\u8272\u9636</option>\n                    <option value="3">\u6570\u636E\u6761</option>\n                </select>\n                <select ng-show="[\'C200\',\'C310\'].indexOf(currentMeta.chart_type) > -1" class="select-axis" ng-model="item.uniq_id" ng-options="y.uniq_id as y.alias for y in yAxis"></select>\n                <span ng-show="currentMeta.chart_type == \'C261\'">\u5B8C\u6210\u7387</span>\n                \n                <select ng-if="item.color_type == 1" class="select-operator" ng-model="item.operator" ng-options="operator.value as operator.name for operator in operatorList" ng-change="changeOperator($event, item)"></select>\n                <div class="display-inline-block use-gradation" ng-if="item.color_type == 3">\n                    <label class="mute-font">\u5750\u6807\u8F74\u4F4D\u7F6E</label>\n                    <select ng-if="item.color_type == 3" class="select-axis-pos" ng-model="item.axis_pos">\n                        <option value="auto">\u81EA\u52A8</option>\n                        <option value="mid">\u4E2D\u70B9</option>\n                    </select>\n                </div>\n                <div class="display-inline-block number-wrap condition-value" ng-if="item.color_type == 1 && item.operator != 12">\n                    <input ng-if="currentMeta.chart_type !== \'C200\'" type="text" name="value" ng-model="item.value" ng-keyup="clearNoNum(item, \'value\')" class="bdp-input__inner" placeholder="\u8BF7\u8F93\u5165\u6570\u503C">\n                    <bdp-select ng-if="currentMeta.chart_type == \'C200\'" item="item" list="typeMap" value-data="item.value" value-type="item.value_type[0]" value-index="-1"></bdp-select>\n                </div>\n                <div class="display-inline-block number-wrap condition-range" ng-if="item.color_type == 1 && item.operator == 12">\n                    <input ng-if="currentMeta.chart_type !== \'C200\'" type="text" ng-model="item.range[0]" ng-keyup="clearNoNum(item, \'range\', 0)" class="bdp-input__inner">\n                    <bdp-select ng-if="currentMeta.chart_type == \'C200\'" item="item" list="typeMap" value-data="item.value[0]" value-type="item.value_type[0]" value-index="0"></bdp-select>\n                    <span>~</span>\n                    <input ng-if="currentMeta.chart_type !== \'C200\'" type="text" ng-model="item.range[1]" ng-keyup="clearNoNum(item, \'range\', 1)" class="bdp-input__inner">\n                    <bdp-select ng-if="currentMeta.chart_type == \'C200\'" item="item" list="typeMap" value-data="item.value[1]" value-type="item.value_type[1]" value-index="1"></bdp-select>\n                </div>\n\n                <div class="display-inline-block use-gradation" ng-if="item.color_type == 2">\n                    <label class="mute-font">\u8272\u9636\u7C7B\u578B</label>\n                    <select class="select-axis" ng-model="item.color_type_sub" ng-change="colorboardObj.applyGradationTheme(item, item.color_type_sub == 1 ? 0 : 8)">\n                        <option value="1">\u53CC\u8272\u9636</option>\n                        <option value="2">\u4E09\u8272\u9636</option>\n                    </select>\n                </div>\n                <div class="label matching" click-outside="item.show = false" outside-active="item.show">\n                    <span class="mute-font" ng-if="currentMeta.chart_type != \'C310\'">\u914D\u8272</span>\n                    <span class="mute-font" ng-if="currentMeta.chart_type == \'C310\'">\u6837\u5F0F</span>\n                    \n                    <span class="select-color cursor-pointer" ng-click="tableColor.setCustomStyle($index, $event)">\n                        \n                        <span class="color-matching" ng-if="item.color_type != 2 && item.color_type != 3" ng-style="item.style">\n                            <i ng-if="currentMeta.chart_type == \'C310\' && !!item.shape_type" class="icomoon icomoon-{{item.shape_type}}"></i>{{displayText}}\n                        </span>\n                        <span class="color-matching color-gradation" ng-if="item.color_type == 2" style="{{item.gradationColor}}">\n                            {{displayText}}\n                        </span>\n                        <span class="color-matching" ng-if="item.color_type == 3" style="{{createDataBarColor(item.bar_color.left, item.bar_color.right, item.bar_color.axis, item.bar_color.text_color)}}">\n                            {{displayText}}\n                        </span>\n                    </span>\n\n                    <div class="ngdialog-colorboard" ng-if="item.show" ng-class="{\'double-gradation\': item.color_type == 2 && item.color_type_sub == 1, \'triple-gradation\': item.color_type == 2 && item.color_type_sub == 2,  \'data-bar\': item.color_type == 3}" ng-style="tableColor.colorboardStyle">\n                        <a class="bdp-icon-wrap ngdialog-colorboard-close" ng-click="item.show = false;"><i class="bdp-icon ico-cancel"></i></a>\n                        \n                        <!--\u5355\u8272-->\n                        <ul class="pure-themes" ng-if="currentMeta.chart_type != \'C310\' && item.color_type != 2 && item.color_type != 3">\n                            <li class="mt10" ng-repeat="color in tableColor[currentMeta.chart_type]">\n                                <a ng-style="color.style" ng-click="tableColor.changeTemplate(item, color, $event, $parent.$index);" class="matching-colors" href="javascript:void(0)">{{displayText}}</a>\n                            </li>\n                        </ul>\n                        <ul class="pure-themes" ng-if="currentMeta.chart_type == \'C310\'">\n                            <li class="mt10" ng-repeat="color in tableColor.C310">\n                                <a ng-style="color.style" ng-click="tableColor.changeTemplate(item, color, $event, $parent.$index);" class="matching-colors" ng-class="{\'clicked\': $index === selectedIndex}" href="javascript:void(0)">\n                                    <i ng-if="!!color.shape_type" class="icomoon icomoon-{{color.shape_type}}"></i>{{displayText}}\n                                </a>\n                            </li>\n                        </ul>\n\n                        <!--\u8868\u683C\u8272\u9636-->\n                        <div class="table-gradation" ng-if="currentMeta.chart_type == \'C200\' && item.color_type == 2">\n                            <p class="mb8">\u9884\u89C8</p>\n                            <div class="color-gradation">\n                                <div class="clearfix">\n                                    <div class="theme-bar" style="{{tableColor.tempCondition.gradationColor}}" ng-click="showThemesDropdown = !showThemesDropdown" click-outside="showThemesDropdown = false" outside-active="showThemesDropdown">\n                                        <span class="theme-bar__text" style="color: {{tableColor.tempCondition.color_gradation.text_color || \'#FFF\'}}">Aa</span>\n                                        <i class="theme-bar__icon bdp-icon ico-triangle-down1 ico-no-opacity"></i>\n                                        <div class="color-gradation__themes" ng-show="showThemesDropdown">\n                                            <ul>\n                                                <li class="item" ng-repeat="theme in gradationThemes track by $index" ng-if="theme.usedFor == item.color_type_sub" ng-click="colorboardObj.applyGradationTheme(tableColor.tempCondition, $index)" style="{{theme.style}}"></li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    <div class="color-inverse">\n                                        <label><input type="checkbox" ng-model="tableColor.tempCondition.color_gradation.inverse" ng-change="colorboardObj.changeInverse(tableColor.tempCondition)"> \u989C\u8272\u53CD\u8F6C</label>\n                                    </div>\n                                </div>\n                                <div class="color-range clearfix">\n                                    <div class="color-range__select-color">\n                                        <span class="color-thumb" ng-style="{background:tableColor.tempCondition.color_gradation.min.color}">\n                                            <color-picker ng-model="tableColor.tempCondition.color_gradation.min.color" on-change="colorboardObj.changeColor(tableColor.tempCondition)"></color-picker>\n                                        </span>\n                                        <div class="bdp-select">\n                                            <div class="bdp-input" ng-click="colorboardObj.showRangeDropdown($event, \'Min\');" click-outside="tableColor.showMinDropdown = false" outside-active="tableColor.showMinDropdown">\n                                                <i class="bdp-input__icon bdp-icon ico-triangle-down"></i>\n                                                <input type="number" class="bdp-input__inner cursor-text J_input" ng-if="tableColor.tempCondition.color_gradation.min.type == 0" ng-model="tableColor.tempCondition.color_gradation.min.value">\n                                                <input type="text" class="bdp-input__inner" ng-if="tableColor.tempCondition.color_gradation.min.type == 1" value="{{typeMap[tableColor.tempCondition.color_gradation.min.type]}}" readonly="readonly">\n                                                <ul class="dropdown-wrap bdp-select__dropdown" ng-show="tableColor.showMinDropdown">\n                                                    <li class="dropdown-item" ng-click="tableColor.tempCondition.color_gradation.min.type = 1">{{typeMap[\'1\']}}</li>\n                                                    <li class="dropdown-item" ng-click="tableColor.tempCondition.color_gradation.min.type = 0">{{typeMap[\'0\']}}</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="color-range__select-color" ng-if="tableColor.tempCondition.color_type_sub == 2">\n                                        <span class="color-thumb" ng-style="{background:tableColor.tempCondition.color_gradation.mid.color}">\n                                            <color-picker ng-model="tableColor.tempCondition.color_gradation.mid.color" on-change="colorboardObj.changeColor(tableColor.tempCondition)"></color-picker>\n                                        </span>\n                                        <div class="bdp-select">\n                                            <div class="bdp-input" ng-click="colorboardObj.showRangeDropdown($event, \'Mid\');" click-outside="tableColor.showMidDropdown = false" outside-active="tableColor.showMidDropdown">\n                                                <i class="bdp-input__icon bdp-icon ico-triangle-down"></i>\n                                                <input type="number" class="bdp-input__inner cursor-text J_input" ng-if="tableColor.tempCondition.color_gradation.mid.type == 0" ng-model="tableColor.tempCondition.color_gradation.mid.value">\n                                                <input type="text" class="bdp-input__inner" ng-if="tableColor.tempCondition.color_gradation.mid.type != 0" value="{{typeMap[tableColor.tempCondition.color_gradation.mid.type]}}" readonly="readonly">\n                                                <ul class="dropdown-wrap bdp-select__dropdown" ng-show="tableColor.showMidDropdown">\n                                                    <li class="dropdown-item" ng-click="tableColor.tempCondition.color_gradation.mid.type = 3">{{typeMap[\'3\']}}</li>\n                                                    <li class="dropdown-item" ng-click="tableColor.tempCondition.color_gradation.mid.type = 4">{{typeMap[\'4\']}}</li>\n                                                    <li class="dropdown-item" ng-click="tableColor.tempCondition.color_gradation.mid.type = 0">{{typeMap[\'0\']}}</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="color-range__select-color">\n                                        <span class="color-thumb" ng-style="{background:tableColor.tempCondition.color_gradation.max.color}">\n                                            <color-picker ng-model="tableColor.tempCondition.color_gradation.max.color" on-change="colorboardObj.changeColor(tableColor.tempCondition)"></color-picker>\n                                        </span>\n                                        <div class="bdp-select">\n                                            <div class="bdp-input" ng-click="colorboardObj.showRangeDropdown($event, \'Max\');" click-outside="tableColor.showMaxDropdown = false" outside-active="tableColor.showMaxDropdown">\n                                                <i class="bdp-input__icon bdp-icon ico-triangle-down"></i>\n                                                <input type="number" class="bdp-input__inner cursor-text J_input" ng-if="tableColor.tempCondition.color_gradation.max.type == 0" ng-model="tableColor.tempCondition.color_gradation.max.value">\n                                                <input type="text" class="bdp-input__inner" ng-if="tableColor.tempCondition.color_gradation.max.type != 0" value="{{typeMap[tableColor.tempCondition.color_gradation.max.type]}}" readonly="readonly">\n                                                <ul class="dropdown-wrap bdp-select__dropdown" ng-show="tableColor.showMaxDropdown">\n                                                    <li class="dropdown-item" ng-click="tableColor.tempCondition.color_gradation.max.type = 2">{{typeMap[\'2\']}}</li>\n                                                    <li class="dropdown-item" ng-click="tableColor.tempCondition.color_gradation.max.type = 0">{{typeMap[\'0\']}}</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <!--end gradation-->\n                        </div>\n\n                        <div ng-if="currentMeta.chart_type == \'C200\' && item.color_type == 3">\n                            <div class="color-gradation">\n                                <div class="color-bar-wrap">\n                                    <span class="color-bar-label">\u586B\u5145\u989C\u8272</span>\n                                    <div class="color-bar clearfix">\n                                        <div class="color-bar__select-color">\n                                            <span class="info-label">\u6B63\u503C</span>\n                                            <span class="color-thumb" ng-style="{background:tableColor.tempCondition.bar_color.right}">\n                                            <color-picker ng-model="tableColor.tempCondition.bar_color.right" ng-change="item.bar_color.right = tableColor.tempCondition.bar_color.right"></color-picker>\n                                        </span>\n                                        </div>\n                                        <div class="color-bar__select-color">\n                                            <span class="info-label">\u8D1F\u503C</span>\n                                            <span class="color-thumb" ng-style="{background:tableColor.tempCondition.bar_color.left}">\n                                            <color-picker ng-model="tableColor.tempCondition.bar_color.left" ng-change="item.bar_color.left = tableColor.tempCondition.bar_color.left"></color-picker>\n                                        </span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="color-bar-wrap">\n                                    <span class="color-bar-label">\u5750\u6807\u8F74</span>\n                                    <color-picker ng-model="tableColor.tempCondition.bar_color.axis" ng-change="item.bar_color.axis = tableColor.tempCondition.bar_color.axis"></color-picker>\n                                </div>\n                                <div class="color-bar-wrap">\n                                    <span class="color-bar-label">\u6587\u5B57</span>\n                                    <color-picker ng-model="tableColor.tempCondition.bar_color.text_color" ng-change="item.bar_color.text_color = tableColor.tempCondition.bar_color.text_color"></color-picker>\n                                </div>\n                            </div>\n                            <!--end gradation-->\n                        </div>\n\n                        <div class="custom-color" ng-if="item.color_type != 2 && item.color_type != 3">\n                            <span class="custom">\u81EA\u5B9A\u4E49</span>\n                            <div class="tf-shape mb16" ng-if="currentMeta.chart_type == \'C310\'">\n                                <span>\u6837\u5F0F</span>\n                                <span class="color-matching custom-shape cursor-pointer" ng-click="showShapes = !showShapes" click-outside="showShapes = false" outside-active="showShapes">\n                                    <i class="icomoon icomoon-{{item.shape_type || \'ban-circle\'}}"></i>\n                                </span>\n                                <div class="dropdown-wrap shapes" ng-show="showShapes">\n                                    <ul class="pure-themes">\n                                        <li ng-repeat="shape in tableColor.shapes">\n                                            <a href="javascript:;" class="matching-colors" ng-click="tableColor.changeShape(item, shape);">\n                                                <i class="icomoon icomoon-{{shape}}"></i>\n                                            </a>\n                                        </li>\n                                    </ul>\n                                    <div class="no-shape">\n                                        <a href="javascript:;" class="matching-colors" ng-click="tableColor.changeShape(item, \'\');">\n                                            <i class="icomoon icomoon-ban-circle"></i>\n                                        </a>\n                                        <span>\u65E0\u6837\u5F0F</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="tf-bg-color" ng-class="{\'use-default\':item.useDefaultBg}" ng-if="currentMeta.chart_type != \'C310\'">\n                                <span>\u80CC\u666F</span>\n                                <span class="color-thumb ml8" ng-style="{background:item.style.backgroundColor}">\n                                    <color-picker ng-model="item.style.backgroundColor"></color-picker>\n                                </span>\n                                <span class="color-matching bdp-color-picker-shadow ml8">\n                                    <i class="bdp-icon ico-color-none"></i>\n                                </span>\n                            </div>\n                            <div class="tf-text-color">\n                                <span>\u6587\u5B57</span>\n                                <span class="color-thumb ml8" ng-style="{background:item.style.color}">\n                                    <color-picker ng-model="item.style.color"></color-picker>\n                                </span>\n                            </div>\n                            <div class="mt20" ng-if="currentMeta.chart_type != \'C310\' && currentMeta.chart_type != \'C261\'">\n                                <input type="checkbox" ng-model="item.useDefaultBg" ng-change="useDefaultBg(item)">\n                                <span>\u4F7F\u7528\u9ED8\u8BA4\u80CC\u666F\u989C\u8272</span>\n                            </div>\n                        </div>\n\n                        <div class="gradation-text" ng-if="item.color_type == 2">\n                            <div class="tf-text-color">\n                                <span class="color-thumb" ng-style="{background:item.color_gradation.text_color}">\n                                    <color-picker ng-model="tableColor.tempCondition.color_gradation.text_color" on-change="colorboardObj.changeColor(tableColor.tempCondition)"></color-picker>\n                                </span>\n                                <span class="ml8">\u6587\u5B57</span>\n                            </div>\n                        </div>\n\n                        <div class="fr" ng-if="item.color_type == 2">\n                            <button class="bdp-btn bdp-btn-ok" ng-click="colorboardObj.save(item, tableColor.tempCondition)">\u786E\u5B9A</button>\n                            <button class="bdp-btn bdp-btn-cancel" ng-click="colorboardObj.cancel(item)">\u53D6\u6D88</button>\n                        </div>\n                    </div>\n                </div>\n\n                <i class="bdp-icon ico-plus1" ng-click="add()"></i>\n                <i class="bdp-icon ico-minus1" ng-click="remove($index)"></i>\n            </li>\n        </ul>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'tableFormatting\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="save()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/create-field/add-field.html', '<div bindonce="">\n    <div class="ngdialog-title" ng-init="$parent.$root.pageLoading = false">\u65B0\u5B57\u6BB5</div>\n    <div class="ngdialog-message new-field" ng-controller="FormulaEditController">\n        <div class="row">\n            <input ng-model="newField.name" type="text" class="input-text-block" name="name" autocomplete="off" maxlength="255" placeholder="\u5B57\u6BB5\u540D\u79F0">\n        </div>\n        <div class="row">\n            <select ng-show="view != \'chart_edit\' || editGisView == \'gis_edit\' ||dataInfo.length == 1" style="width:100%" ng-model="newField.data_type" ng-options="type.value as type.text for type in typeList">\n                <option value="">\u8BF7\u9009\u62E9\u5B57\u6BB5\u7C7B\u578B</option>\n            </select>\n            <div ng-show="dataInfo.length > 1" class="field-type-number">\u5B57\u6BB5\u7C7B\u578B\uFF1A\u6570\u503C</div>\n        </div>\n        <div class="row bdp-formula-wrap" ng-if="paramListLoaded">\n            <textarea bdp-formula="" id="formula-str" class="input-text-block ng-formula" contenteditable="true" editor="data.editor" fields="fields" arg-list-result="argListResult" new-field="newField" placeholder="\u8BF7\u501F\u52A9\u4E8E\u4E0B\u9762\u7684\u51FD\u6570\uFF0C\u8F93\u5165\u5B57\u6BB5\u7684\u8BA1\u7B97\u516C\u5F0F">{{newField.aggregator}}</textarea>\n        </div>\n        <div class="row clearfix func-hint-row">\n            <div class="func-usage-hint">{{currFunc.usage}}</div>\n            <div class="field-list-set" ng-if="currArg">\n                <div class="title nowrap">\n                    <i class="bdp-icon ico-type-{{currArg.ico_type}}"></i>\n                    <span class="data-tag" ng-bind="currArg.name"></span>\n                    <i class="bdp-icon ico-info-sign"></i>\n                </div>\n                <div class="func-tip">\n                    <a class="func-tip-arrow"></a>\n                    <h5 ng-bind="currArg.name"></h5>\n                    <div class="offset-top clearfix"><span class="key">\u9ED8\u8BA4\u503C</span><p class="text" ng-bind="currArg.defaultValDisplay"></p></div>\n                    <div class="offset-top clearfix" ng-if="currArg.comment"><span class="key">\u5907\u6CE8</span><p class="text" ng-bind="currArg.comment"></p></div>\n                    <div class="offset-top clearfix" ng-if="currArg.type !== \'string\'"><span class="key">\u6700\u5C0F\u503C</span><p class="text" ng-bind="currArg.config.minDisplay"></p></div>\n                    <div class="offset-top clearfix" ng-if="currArg.type !== \'string\'"><span class="key">\u6700\u5927\u503C</span><p class="text" ng-bind="currArg.config.maxDisplay"></p></div>\n                </div>\n            </div>\n            \n        </div>\n        <div class="row clearfix bg-block">\n            <div class="function-list block-shadow-right">\n                <p class="function-list-hd">\u51FD\u6570</p>\n                <div class="select-pane">\n                    <div class="function-search" ng-mouseleave="cancelSearch();">\n\n                        <div class="search-group">\n                            <input type="text" class="query-text" id="function_query" ng-model="formula_query" ng-keyup="search_formula($event)" ng-click="inputQuery()" ng-mousedown="clearContent($event)" ng-mouseleave="cancelQuery()">\n\n                            <a class="select-function" ng-click="showClassify($event)" ng-class="{\'active\':show_top}">\n                                <i class="bdp-icon ico-triangle-down" ng-class="{\'ico-triangle-up\':show_top}"></i>\n                            </a>\n\n                        </div>\n                        <div class="classify-list dropdown-wrap" ng-show="show_classify_list">\n                            <ul>\n                                <li class="dropdown-item" ng-click="selectClassifyItem(0)">\u5168\u90E8</li>\n                                <li class="dropdown-item" ng-if="newField.module != \'wb\' " ng-click="selectClassifyItem(1)">\u805A\u5408\u7EDF\u8BA1</li>\n                                <li class="dropdown-item" ng-click="selectClassifyItem(2)">\u975E\u805A\u5408\u7EDF\u8BA1</li>\n                                <li class="dropdown-item" ng-click="selectClassifyItem(3)">\u65E5\u671F\u548C\u65F6\u95F4</li>\n                                <li class="dropdown-item" ng-click="selectClassifyItem(4)">\u5B57\u7B26\u4E32</li>\n                                <li class="dropdown-item" ng-click="selectClassifyItem(5)">\u903B\u8F91</li>\n                                <li class="dropdown-item" ng-click="selectClassifyItem(6)">\u6570\u503C</li>\n                            </ul>\n                        </div>\n\n                    </div>\n\n                    <div ng-loading-gif="" size="size-1x" placeholder="true" ng-show="showLoading" class="function-loading"></div>\n                    <ul class="list-wrap">\n                        <li ng-repeat="func in func_list_result" ng-click="add_func_to_formula(func)" func-tip="ul">\n                            <p class="func-type">{{func.type}}</p>\n                            <div class="func-tip">\n                                <a class="func-tip-arrow"></a>\n                                <h5>{{func.type}} {{func.zh_name}}</h5>\n                                <div class="offset-top clearfix"><span class="key">\u7528\u6CD5</span><p class="text">{{func.usage}}</p></div>\n                                <div class="offset-top clearfix"><span class="key">\u8BF4\u660E</span><p class="text">{{func.description}}</p></div>\n                                <div class="offset-top clearfix" ng-show="func.example"><span class="key">\u793A\u4F8B</span><p class="text">{{func.example}}</p></div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="field-list-set no-padding">\n                <ul class="bdp-tab-wrap__sm clearfix field-list-set-tab pr">\n                    <li class="bdp-tab-item" ng-class="{\'bdp-tab-active\': fieldArgsList.active === 0}" ng-click="switchFieldAndArgs(0)">\u5B57\u6BB5\u540D</li>\n                    <li class="bdp-tab-item" ng-if="view === \'chart_edit\' && editGisView !== \'gis_edit\'" ng-class="{\'bdp-tab-active\': fieldArgsList.active === 1}" flash-guide="chartArgsNewField" fg-show="guideApi.chartArgsNewField" ng-click="switchFieldAndArgs(1)">\u53C2\u6570</li>\n                </ul>\n                <div class="select-pane">\n                    <div ng-if="fieldArgsList.active === 0">\n                        <div class="field-search">\n                            <input type="text" class="query-text" ng-model="field_query">\n                        </div>\n                        <ul class="list-wrap">\n                            <li ng-repeat="field in fieldListResult | filter:{name:field_query}" ng-if="field.fid != newField.fid" ng-click="add_field_to_formula(field)">\n                                <p class="title nowrap">\n                                    <i class="bdp-icon ico-type-{{field.ico_type || field.type}}" ng-class="{\'ico-type-{{field.ico_type}}-orange\':field.formula, \'-ml\': field.made_by_ml && field.formula}"></i>\n                                    <span class="data-tag" title="{{field.name}}" ng-bind="field.name"></span>\n                                </p>\n                            </li>\n                        </ul>\n                    </div>\n                    <div ng-if="fieldArgsList.active === 1">\n                        <div class="field-search" ng-if="argListResult.length > 0">\n                            <input type="text" class="query-text" ng-model="fieldArgsList.argsQuery">\n                        </div>\n                        <p ng-if="argListResult.length ==0" class="empty-tip">\u6682\u65E0\u53C2\u6570</p>\n                        <ul class="list-wrap">\n                            <li ng-repeat="field in argListResult | filter:{name:fieldArgsList.argsQuery}" title="{{field.name}}" ng-click="add_field_to_formula(field, true)" func-tip="ul">\n                                <div class="title nowrap">\n                                    <i class="bdp-icon ico-type-{{field.ico_type}}"></i>\n                                    <span class="data-tag" ng-bind="field.name"></span>\n                                </div>\n                                <div class="func-tip">\n                                    <a class="func-tip-arrow"></a>\n                                    <h5 bo-bind="field.name"></h5>\n                                    <div class="offset-top clearfix"><span class="key">\u9ED8\u8BA4\u503C</span><p class="text" bo-text="field.defaultValDisplay"></p></div>\n                                    <div class="offset-top clearfix" ng-if="field.comment"><span class="key">\u5907\u6CE8</span><p class="text" bo-text="field.comment"></p></div>\n                                    <div class="offset-top clearfix" ng-if="field.type !== \'string\'"><span class="key">\u6700\u5C0F\u503C</span><p class="text" ng-bind="field.config.minDisplay"></p></div>\n                                    <div class="offset-top clearfix" ng-if="field.type !== \'string\'"><span class="key">\u6700\u5927\u503C</span><p class="text" ng-bind="field.config.maxDisplay"></p></div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="row field-sync-remark mt16" ng-if="newField.module == \'wb\'">\n            <label>\n                <input type="checkbox" class="input-checkbox" ng-model="newField.is_display" ng-checked="newField.is_display">\n                <span>\u5B57\u6BB5\u8BA1\u7B97\u516C\u5F0F\u5F00\u653E\u7ED9\u8BE5\u8868\u88AB\u5206\u914D\u7684\u4EBA\u67E5\u770B</span></label>\n            <div class="bdp-tooltip bottom ml6 display-inline-block">\n                <i class="bdp-icon ico-help"></i>\n                <div class="bdp-tooltip-content">\n                    <div class="content">\n                        <p>1.\u52FE\u9009\u540E\uFF0C\u8BE5\u5DE5\u4F5C\u8868\u88AB\u5206\u914D\u7684\u7528\u6237\u5C06\u9F20\u6807\u79FB\u5230\u8BE5\u5B57\u6BB5\u4E0A\u65F6\uFF0C\u53EF\u4EE5\u67E5\u770B\u5230\u8BE5\u8BA1\u7B97\u5B57\u6BB5\u7684\u8BA1\u7B97\u516C\u5F0F\u3002</p>\n                        <p>2.\u5982\u679C\u516C\u5F0F\u6D89\u53CA\u5230\u654F\u611F\u4FE1\u606F\uFF0C\u4E0D\u5E0C\u671B\u88AB\u5206\u4EAB\u7684\u4EBA\u67E5\u770B\uFF0C\u53EF\u4EE5\u4E0D\u52FE\u9009\u6B64\u9879\u3002</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <input name="original_field_name" type="hidden" value="newField.name">\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" promise-button="" pb-completed="global.clickComplete" pb-click="addCalcField(newField)">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/create-field/add-group-field.html', '<div ng-controller="FieldGroupController" bindonce="">\n    <div class="ngdialog-title" ng-init="$parent.$root.pageLoading = false">\u65B0\u5B57\u6BB5</div>\n    <div class="ngdialog-message new-field field-group">\n        <div class="errtip-dialog" ng-show="global.dialog_hint" ng-bind="global.dialog_hint"></div>\n        <div class="row">\n            <label class="label-text">\u5B57\u6BB5\u540D\u79F0</label>\n            <input ng-model="newField.name" type="text" class="input-text-block label-text-content" name="name">\n        </div>\n        <div class="row clearfix">\n            <div class="row-half">\n                <label class="label-text">\u5206\u7EC4\u5B57\u6BB5</label>\n                <div class="label-text-content groupfield">\n                    <ui-select ng-model="selected.field" ng-select="initGroupInfo()" style="width:100%" on-select="initGroupInfo()" theme="select2" search-enabled="false">\n                        <ui-select-match placeholder="\u8BF7\u9009\u62E9\u5B57\u6BB5">\n                            <i class="bdp-icon ico-type-{{$select.selected.ico_type}} " style="margin-top:-2px"></i>\n                            <span>{{$select.selected.name}}</span>\n                        </ui-select-match>\n                        <ui-select-choices repeat="field in fieldList | buildAggregator">\n                            <i class="bdp-icon ico-type-{{field.ico_type}}" ng-class="{\'ico-type-{{field.ico_type}}-orange\': field.formula, \'-ml\': field.made_by_ml && field.formula}" style="margin-top:-2px"></i>\n                            <span ng-bind="field.name"></span>\n                        </ui-select-choices>\n                    </ui-select>\n                </div>\n            </div>\n            <div class="row-half" ng-if="selected.field.data_type==\'string\'">\n                <label class="label-text">\u5206\u7EC4\u65B9\u5F0F</label>\n                <select ng-model="groupData.info.type" ng-change="initGroupInfo(groupData.info.type)" class="grouptype label-text-content">\n                    <option value="condition" ng-selected="!groupData.info.type || groupData.info.type === \'condition\'">\u6309\u6761\u4EF6</option>\n                    <option value="item">\u6309\u9879\u76EE</option>\n                    <option value="expression">\u8868\u8FBE\u5F0F</option>\n                </select>\n            </div>\n\n            <div class="row-half" ng-if="selected.field.data_type==\'date\'">\n                <label class="label-text">\u5206\u7EC4\u65B9\u5F0F</label>\n                <div class="label-text-content grouptype">\n                    <ui-select ng-model="selected.dateGroupType" ng-select="initGroupInfo()" on-select="initGroupInfo()" style="width:100%" theme="select2" search-enabled="false">\n                        <ui-select-match placeholder="\u8BF7\u9009\u62E9\u5B57\u6BB5">\n                            <span>{{$select.selected.name}}</span>\n                        </ui-select-match>\n                        <ui-select-choices repeat="dateGroupType in dateGroupTypeList">\n                            <span ng-bind="dateGroupType.name"></span>\n                        </ui-select-choices>\n                    </ui-select>\n                </div>\n            </div>\n\n            <div class="row-half" ng-if="!selected.field || selected.field.data_type==\'number\'">\n                <label class="label-text">\u5206\u7EC4\u65B9\u5F0F</label>\n                <select ng-model="groupData.info.type" ng-change="initGroupInfo(groupData.info.type)" class="label-text-content grouptype">\n                    <option value="fixed">\u56FA\u5B9A\u6B65\u957F</option>\n                    <option value="custom">\u81EA\u5B9A\u4E49\u6B65\u957F</option>\n                    <option value="expression">\u8868\u8FBE\u5F0F</option>\n                </select>\n            </div>\n        </div>\n\n        <!--\u6570\u503C\u7C7B\u578B\u5206\u7EC4-->\n        <div class="data-type-number" ng-if="!selected.field || selected.field.data_type==\'number\'">\n            \n            <!--\u56FA\u5B9A\u6B65\u957F, default-->\n            <div class="group-number-fixed" ng-show="groupData.info.type === \'fixed\'">\n            \n                <div class="row clearfix">\n                    <label class="label-text">\u8D77\u59CB\u4E8E</label>\n                    <div class="label-text-content">\n                        <input class="input-text-block" type="number" input-number="" data-nm-type="number" ng-model="groupData.info.range[0]">\n                    </div>\n                </div>\n                <div class="row clearfix">\n                    <label class="label-text">\u7EC8\u6B62\u4E8E</label>\n                    <div class="label-text-content">\n                        <input class="input-text-block" type="number" input-number="" data-nm-type="number" ng-model="groupData.info.range[1]">\n                    </div>\n                </div>\n                <div class="row clearfix">\n                    <label class="label-text">\u5206\u7EC4\u6B65\u957F</label>\n                    <div class="label-text-content">\n                        <input class="input-text-block" type="number" input-number="" data-nm-type="positive" min="0" ng-model="groupData.info.step" placeholder="\u6B65\u957F\u6700\u591A\u53EA\u652F\u63016\u4F4D\u5C0F\u6570">\n                    </div>\n                </div>\n            </div>\n            <!--\u81EA\u5B9A\u4E49\u6B65\u957F-->\n            <div class="group-number-custom" ng-show="groupData.info.type === \'custom\'">\n                <ul class="group-list bg-block">\n                    <li ng-repeat="group in groupData.info.groups">\n                        <input class="group-name" type="text" ng-model="group.name">\n                        <input type="number" ng-model="group.range[0]" ng-blur="checkInvalidNumber($event, 0)">\n                        <select ng-model="group.boundary[0]" ng-options="o.value as o.text for o in LessThen"></select>\n                        <span class="select-field-name">{{selected.field.name}}</span>\n                        <select ng-model="group.boundary[1]" ng-options="o.value as o.text for o in LessThen"></select>\n                        <input type="number" ng-model="group.range[1]" ng-blur="checkInvalidNumber($event, 1)">\n                        <a class="cursor-pointer bdp-icon-wrap add-group" ng-click="addNewNumberGroup(groupData.info.type)">\n                            <i class="bdp-icon ico-plus1"></i>\n                        </a>\n                        <a class="cursor-pointer bdp-icon-wrap" ng-click="removeGroup($index)" ng-show="groupData.info.groups.length > 1">\n                            <i class="bdp-icon ico-minus1"></i>\n                        </a>\n                    </li>\n                    <li class="default-group-name">\n                        <input class="group-name" type="text" ng-model="groupData.info.default_name">\n                        <span class="group-case group-case-default cr-999">\u672A\u8986\u76D6\u7684\u8303\u56F4</span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <!--\u5B57\u7B26\u4E32\u7C7B\u578B\u5206\u7EC4-->\n        <div class="group-type-string bg-block" ng-if="selected.field.data_type==\'string\'">\n            \n            <div class="group-detail" ng-if="groupData.info.type !== \'expression\'">\n                <div class="group-list fl block-shadow-right">\n                    <div class="clearfix head">\n                        <span>\u5206\u7EC4</span>\n                        <a class="bdp-icon-wrap fr add-condition cursor-pointer" ng-click="addNewStringGroup()">\n                            <i class="bdp-icon ico-plus1"></i>\n                        </a>\n                    </div>\n                    <ul ui-sortable="sortGroupField" ng-model="groupData.info.groups">\n                        <li ng-repeat="group in groupData.info.groups" ng-click="selectGroup(group, selected.field.data_type, groupData.info.type)" ng-class="{active: select.group==group}">\n                            <span class="enum-item-name cursor-move"><i class="bdp-icon ico-order"></i></span>\n                            <div class="group-name nowrap" title="{{group.name}}" ng-bind="group.name"></div>\n                            <a class="bdp-icon-wrap cursor-pointer del-btn" ng-click="removeGroup($index)">\n                                <i class="bdp-icon ico-trash"></i>\n                            </a>\n                        </li>\n                        <li class="default-group-name" ng-click="selectGroup(\'default\')" ng-class="{active: showDefaultGroup()}" data-drag="false">\n                            <div class="group-name nowrap" title="{{groupData.info.default_name}}" ng-bind="groupData.info.default_name"></div>\n                        </li>\n                    </ul>\n                </div>\n                <div class="group-item-conditions fr" ng-if="groupData.info.type === \'condition\'">\n                    <div class="group-condition-list default-group ng-cloak" ng-if="showDefaultGroup()">\n                        <div class="title">\n                            <span>\u5206\u7EC4\u540D\u79F0</span>\n                            <input type="text" class="edit-name" ng-model="groupData.info.default_name">\n                        </div>\n                        <p>\u672A\u5206\u7EC4\u7684\u6570\u636E\u9879</p>\n                    </div>\n                    <div class="group-condition-list" ng-if="showConditionList()">\n                        <div class="title">\n                            <span>\u5206\u7EC4\u540D\u79F0</span>\n                            <input type="text" class="edit-name" ng-model="select.group.name">\n                        </div>\n                        <ul class="condition-list">\n                            <li ng-if="select.group.conditions.length > 1">\n                                <span>\u5206\u7EC4\u6761\u4EF6</span>\n                                <select class="logic-select" ng-model="select.group.logic" ng-options="k as v for (k,v) in logicMap"></select>\n                            </li>\n                            <li ng-repeat="condition in select.group.conditions">\n                                <select class="new-condition-op" ng-model="condition.operator" ng-options="k as v for (k,v) in operatorMap"></select>\n                                <input class="group-item-name input-text-block" type="text" ng-model="condition.value">\n                                <a class="bdp-icon-wrap add-condition cursor-pointer" ng-click="addCondition(select.group)">\n                                    <i class="bdp-icon ico-plus1"></i>\n                                </a>\n                                <a class="bdp-icon-wrap remove-condition cursor-pointer" ng-show="select.group.conditions.length > 1" ng-click="removeCondition(select.group.conditions, $index)">\n                                    <i class="bdp-icon ico-minus1"></i>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="group-item-conditions fl" ng-if="groupData.info.type === \'item\'">\n                    <div class="group-condition-list default-group ng-cloak" ng-if="showDefaultGroup()">\n                        <div class="title">\n                            <span>\u5206\u7EC4\u540D\u79F0</span>\n                            <input type="text" class="edit-name" ng-model="groupData.info.default_name">\n                        </div>\n                        <p>\u672A\u5206\u7EC4\u7684\u6570\u636E\u9879</p>\n                    </div>\n                    <div class="group-condition-list" ng-show="showConditionList()">\n                        <div class="title">\n                            <span>\u5206\u7EC4\u540D\u79F0</span>\n                            <input type="text" class="edit-name" ng-model="select.group.name">\n                        </div>\n                        <div class="str-filter-model">\n                            <div class="search-list bd">\n                                <div class="sbd" ng-mouseleave="itemEvent.mouseLeave()">\n                                    <div class="query-box">\n                                        <input type="text" class="query-text" ng-model="itemEvent.keyword" ng-keyup="itemEvent.keyupEvent($event, itemEvent.keyword)" placeholder="\u67E5\u627E...">\n                                        <a class="bdp-icon-wrap query-btn" ng-click="itemEvent.search(itemEvent.keyword)">\n                                            <i class="bdp-icon ico-search"></i>\n                                        </a>\n                                    </div>\n                                    <div class="searchlist dropdown-wrap" ng-show="show">\n                                        <ul>\n                                            <li ng-repeat="it in searchList track by $index" class="nowrap dropdown-item">\n                                                <p ng-dblclick="itemEvent.addItem(it)">\n                                                    <a class="add cursor-pointer" ng-click="itemEvent.addItem(it)">\u6DFB\u52A0</a>\n                                                    <span class="inner-name nowrap" title="{{it}}">{{it}}</span>\n                                                </p>\n                                            </li>\n                                        </ul>\n                                        <div class="bar" ng-if="searchList.length > 0">\n                                            <a class="cursor-pointer" ng-click="itemEvent.addAll()">\u5168\u90E8\u6DFB\u52A0</a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="add-list bd no-padding">\n                                <div class="sbd">\n                                    <ul class="user-select-none" ng-show="selectedlist && select.group.conditions.length > 0">\n                                        <li ng-repeat="it in select.group.conditions track by $index" ng-class="{nosearch:nosearch_list.indexOf($index) > -1}" class="nowrap">\n                                            <p ng-dblclick="itemEvent.delItem($index)">\n                                                <a ng-click="itemEvent.delItem($index)" class="cursor-pointer bdp-icon ico-trash"></a>\n                                                <span class="inner-name nowrap" title="{{it}}" ng-model="itemEvent.keyword">{{it}}</span>\n                                            </p>\n                                        </li>\n                                    </ul>\n                                    <div ng-if="select.group.conditions.length == 0 && !addmanually" class="empty-addlist">\u8BF7\u4ECE\u4E0A\u65B9\u8FDB\u884C\u641C\u7D22\u6216\u70B9\u51FB\u7F16\u8F91\u6DFB\u52A0</div>\n                                    <textarea class="add-manually" ng-show="addmanually && selectgroup"></textarea>\n                                    <div class="bar">\n                                        <span ng-show="selectedlist">\n                                            <span>\u5DF2\u6DFB\u52A0</span>\n                                            <span>{{select.group.conditions.length}}</span>\n                                            <span>\u6761</span>\n                                        </span>\n                                        <a ng-click="itemEvent.delAll()" class="cursor-pointer clear-all" ng-show="selectedlist">\u6E05\u7A7A</a>\n                                        <a ng-click="itemEvent.itemEdit()" class="edit cursor-pointer fr" ng-show="selectedlist">\u7F16\u8F91</a>\n                                        <a ng-click="itemEvent.addDone()" class="edit-done cursor-pointer fr" ng-show="addmanually && selectgroup ">\u5B8C\u6210</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div ng-loading-gif="" ng-show="showLoading"></div>\n                </div>\n            </div>\n        </div>\n        <!--\u65E5\u671F\u5B57\u6BB5\u5206\u7EC4-->\n        <div class="group-type-date" ng-if="selected.field.data_type==\'date\'">\n            \n            <div class="group-detail">\n                <div class="group-item-container bg-block" ng-show="groupData.info.type !== \'fixed\' && groupData.info.type !== \'expression\'">\n                    <!--\u65E5\u671F\u5206\u7EC4\uFF0D\u5E38\u89C4-->\n                    <div class="group-list" ng-show="groupData.info.type==\'custom\'">\n                        <ul class="group-list-ul">\n                            <li ng-repeat="group in groupData.info.groups" class="add-group">\n                                <input class="group-item-name input-text-block" type="text" ng-model="group.name" placeholder="\u5206\u7EC4\u540D\u79F0">\n                                <!-- \u8BBE\u7F6E\u8D77\u59CB\u65E5\u671F -->\n                                <div class="date-picker-abs date-picker-fixed bottom date-picker display-inline-block J-show-date-picker" ng-click="pickEnd[$index]=false">\n                                    <input class="group-item-name input-text-block" type="text" ng-model="group.range[0]" date-format="" readonly="readonly" ng-click="fixDatePickerPos($event, \'pickStart\', $index)" placeholder="\u8D77\u59CB\u65E5\u671F">\n                                    <a class="bdp-icon-wrap cursor-pointer" style="margin: 0 -3px" ng-click="fixDatePickerPos($event, \'pickStart\', $index)">\n                                        <i class="bdp-icon ico-type-date"></i>\n                                    </a>\n                                    <div class="dateStart" date-picker="group.range[0]" view="date" min-view="date" ng-show="pickStart[$index]" ng-style="datePickerPos"></div>\n                                </div>\n                                <span style="margin-left: -1px">\u81F3</span>\n                                <div class="date-picker-abs date-picker-fixed bottom date-picker display-inline-block J-show-date-picker" ng-click="pickStart[$index]=false">\n                                    <!-- \u8BBE\u7F6E\u622A\u81F3\u65E5\u671F -->\n                                    <input class="group-item-name input-text-block" type="text" ng-model="group.range[1]" date-format="" readonly="readonly" ng-click="fixDatePickerPos($event, \'pickEnd\', $index)" placeholder="\u622A\u81F3\u65E5\u671F">\n                                    <a class="bdp-icon-wrap cursor-pointer" style="margin-left: -3px" ng-click="fixDatePickerPos($event, \'pickEnd\', $index)">\n                                        <i class="bdp-icon ico-type-date"></i>\n                                    </a>\n                                    <div class="dateEnd" date-picker="group.range[1]" view="date" min-view="date" ng-show="pickEnd[$index]" ng-style="datePickerPos"></div>\n                                </div>\n                                <a class="bdp-icon-wrap add-condition cursor-pointer excursion" ng-click="pickStart[$index]=false;pickEnd[$index]=false;addNewDateGroup(groupData.info.type)">\n                                    <i class="bdp-icon ico-plus1"></i>\n                                </a>\n                                <a class="bdp-icon-wrap cursor-pointer" ng-show="groupData.info.groups.length > 1" ng-click="pickStart[$index]=false;pickEnd[$index]=false;removeGroup($index)">\n                                    <i class="bdp-icon ico-minus1"></i>\n                                </a>\n                            </li>\n                            <li class="default-group-name">\n                                <input class="group-item-name input-text-block" type="text" ng-model="groupData.info.default_name">\n                                <span class="group-case group-case-default">\u672A\u8986\u76D6\u7684\u8303\u56F4</span>\n                            </li>\n                        </ul>\n                    </div>\n                    <!--\u65E5\u671F\u5206\u7EC4\uFF0D\u5E74\u5185\u5206\u7EC4-->\n                    <div class="group-list" ng-show="groupData.info.type==\'group_year\'">\n                        <ul class="group-list-ul">\n                            <li ng-repeat="group in groupData.info.groups" class="add-group">\n                                <input class="group-item-name input-text-block" type="text" style="margin-left: 0" ng-model="group.name" placeholder="\u5206\u7EC4\u540D\u79F0">\n                                <!-- \u8BBE\u7F6E\u8D77\u59CB\u6708\u65E5 -->\n                                <select class="select51" ng-model="group.range[0]" ng-options="month|i18nMonth for month in dateList.monthList"></select>\n                                <select class="select51" ng-model="group.range[1]" ng-options="day for day in dayList1"></select>\n                                <span style="margin-left: -1px">\u81F3</span>\n                                <!-- \u8BBE\u7F6E\u622A\u81F3\u6708\u65E5 -->\n                                <select class="select51" ng-model="group.range[2]" ng-options="month|i18nMonth for month in dateList.monthList"></select>\n                                <select class="select51" ng-model="group.range[3]" ng-options="day for day in dayList2"></select>\n                                <a class="bdp-icon-wrap add-condition cursor-pointer excursion" ng-click="addNewDateGroup(groupData.info.type)">\n                                    <i class="bdp-icon ico-plus1"></i>\n                                </a>\n                                <a class="bdp-icon-wrap cursor-pointer" ng-show="groupData.info.groups.length > 1" ng-click="removeGroup($index)">\n                                    <i class="bdp-icon ico-minus1"></i>\n                                </a>\n                            </li>\n                            <li class="default-group-name">\n                                <input class="group-item-name input-text-block" type="text" ng-model="groupData.info.default_name">\n                                <span class="group-case group-case-default">\u672A\u8986\u76D6\u7684\u8303\u56F4</span>\n                            </li>\n                        </ul>\n                    </div>\n                    <!--\u65E5\u671F\u5206\u7EC4\uFF0D\u6708\u5185\u5206\u7EC4|\u5468\u5185\u5206\u7EC4-->\n                    <div class="group-list" ng-show="groupData.info.type==\'group_month\'||groupData.info.type==\'group_week\'">\n                        <ul class="group-list-ul">\n                            <li ng-repeat="group in groupData.info.groups" class="add-group">\n                                <input class="group-item-name input-text-block" type="text" ng-model="group.name" placeholder="\u5206\u7EC4\u540D\u79F0">\n                                <!-- \u8BBE\u7F6E\u8D77\u59CB\u65E5 -->\n                                <select class="select84" ng-model="group.range[0]" ng-if="groupData.info.type==\'group_month\'" ng-options="day for day in dateList.dayList"></select>\n                                <!--\u8BBE\u7F6E\u8D77\u59CB\u4E8E\u661F\u671F\u51E0-->\n                                <select class="select84" ng-model="group.range[0]" ng-if="groupData.info.type==\'group_week\'" ng-options="week for week in dateList.weekDayList"></select>\n                                <span style="margin-left: -1px">\u81F3</span>\n                                <!-- \u8BBE\u7F6E\u622A\u81F3\u65E5 -->\n                                <select class="select84" ng-model="group.range[1]" ng-if="groupData.info.type==\'group_month\'" ng-options="day for day in dateList.dayList"></select>\n                                <!--\u8BBE\u7F6E\u622A\u81F3\u661F\u671F\u51E0-->\n                                <select class="select84" ng-model="group.range[1]" ng-if="groupData.info.type==\'group_week\'" ng-options="week for week in dateList.weekDayList"></select>\n                                <a class="bdp-icon-wrap add-condition cursor-pointer excursion" ng-click="addNewDateGroup(groupData.info.type)">\n                                    <i class="bdp-icon ico-plus1"></i>\n                                </a>\n                                <a class="bdp-icon-wrap cursor-pointer" ng-show="groupData.info.groups.length > 1" ng-click="removeGroup($index)">\n                                    <i class="bdp-icon ico-minus1"></i>\n                                </a>\n                            </li>\n                            <li class="default-group-name">\n                                <input class="group-item-name input-text-block" type="text" ng-model="groupData.info.default_name">\n                                <span class="group-case group-case-default">\u672A\u8986\u76D6\u7684\u8303\u56F4</span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <!--\u65E5\u671F\u5206\u7EC4\uFF0D\u56FA\u5B9A\u5206\u7EC4-->\n                <div class="group-date-fixed" ng-show="groupData.info.type==\'fixed\'">\n                    <div class="row clearfix">\n                        <label class="label-text">\u805A\u5408\u65B9\u5F0F</label>\n                        <div class="label-text-content">\n                            <select ng-model="groupData.info.aggregator" ng-options="aggregator.type as aggregator.name for aggregator in aggregators" class="w100"></select>\n                        </div>\n                    </div>\n                    <div class="row clearfix">\n                        <label class="label-text">\u8D77\u59CB\u4E8E</label>\n                        <div class="label-text-content" ng-if="groupData.info.aggregator!=\'day\'">\n                            <select ng-model="groupData.info.start[0]" class="w100">\n                                <option ng-repeat="dateItem in dateRanges">{{dateItem | timestamp2LocaleDate: groupData.info.aggregator}}</option>\n                            </select>\n                        </div>\n                        <div class="label-text-content" ng-if="groupData.info.aggregator==\'day\'">\n                            <div class="date-picker-abs bottom date-picker">\n                                <input class="input-text-block" type="text" ng-model="groupData.info.start[1]" date-format="" readonly="readonly" ng-click="pick=!pick" placeholder="\u8D77\u59CB\u65E5\u671F">\n                                <!--ng-model\u8BBE\u4E3Astart[1]\u662F\u56E0\u4E3A\u5982\u679C\u540C\u4E3Astart[0]\uFF0C\u4E0Edate picker\u51B2\u7A81\uFF0C\u4F7F\u5176\u663E\u793ANaN -->\n                                <a class="bdp-icon-wrap cursor-pointer" ng-click="pick=!pick" style="position: absolute;right: 4px;margin-top: -26px">\n                                    <i class="bdp-icon ico-type-date"></i>\n                                </a>\n                                <div class="datePicker" date-picker="groupData.info.start[1]" view="date" min-view="date" ng-show="pick"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row clearfix no-margin">\n                        <label class="label-text">\u5206\u7EC4\u6B65\u957F</label>\n                        <div class="label-text-content">\n                            <input class="input-text-block date-step-input" type="number" input-number="" data-nm-type="positiveInt" min="0" ng-model="groupData.info.step">\n                            <span style="padding-left: 5px" ng-bind="getAggreName()"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-show="groupData.info.type === \'expression\'" class="group-type-string group-expression bg-block">\n            <div class="group-detail">\n                <div class="group-list fl block-shadow-right">\n                    <div class="clearfix head">\n                        <span>\u5206\u7EC4</span>\n                        <a class="bdp-icon-wrap fr add-condition cursor-pointer" ng-click="addNewExpressionGroup()">\n                            <i class="bdp-icon ico-plus1"></i>\n                        </a>\n                    </div>\n                    <ul ui-sortable="sortGroupField" ng-model="groupData.info.groups">\n                        <li ng-repeat="group in groupData.info.groups" ng-click="selectGroup(group, groupData.data_type, groupData.info.type)" ng-class="{active: select.group==group}">\n                            <span class="enum-item-name cursor-move"><i class="bdp-icon ico-order"></i></span>\n                            <div class="group-name nowrap" title="{{group.name}}" ng-bind="group.name"></div>\n                            <a class="bdp-icon-wrap cursor-pointer del-btn" ng-click="removeGroup($index)">\n                                <i class="bdp-icon ico-trash"></i>\n                            </a>\n                        </li>\n                        <li class="default-group-name" ng-click="selectGroup(\'default\')" ng-class="{active: showDefaultGroup()}">\n                            <div class="group-name nowrap" title="{{groupData.info.default_name}}" ng-bind="groupData.info.default_name"></div>\n                        </li>\n                    </ul>\n                </div>\n                <div class="group-item-conditions fl">\n                    <div class="group-condition-list default-group ng-cloak" ng-if="showDefaultGroup()">\n                        <div class="title">\n                            <span>\u5206\u7EC4\u540D\u79F0</span>\n                            <input type="text" class="edit-name" ng-model="groupData.info.default_name">\n                        </div>\n                        <p>\u672A\u5206\u7EC4\u7684\u6570\u636E\u9879</p>\n                    </div>\n                    <div ng-show="showConditionList()" class="group-condition-list">\n                        <div class="title">\n                            <span>\u5206\u7EC4\u540D\u79F0</span>\n                            <input type="text" class="edit-name" ng-model="select.group.name">\n                        </div>\n                        <div class="formula-filter-part">\n                            <div class="formula-edit-part">\n                                <textarea advance-data-formula="" id="formula-str" expression-content="select.group.expression" class="input-text-block ng-formula" on-blur="groupExpression.setExpression(content)" on-key-up="groupExpression.expressionChanged(flag, content)"></textarea>\n                            </div>\n                            <a class="insert-field-name" ng-click="groupExpression.insertFieldNameToExpression(selected.field.name)">\u63D2\u5165\u5B57\u6BB5</a>\n                            <button type="button" class="check-formula-grammar" ng-click="groupExpression.checkFormulaGrammar(selected.field.name, selected.field.fid, \'date\')">\u8BED\u6CD5\u68C0\u67E5</button>\n                        </div>\n                        <p class="formula-example" ng-if="selected.field.data_type==\'date\'">\u793A\u4F8B: [\u65E5\u671F]=\'2015-05-01 00:00:00\', \u4E14\u540D\u79F0\u9700\u4E0E\u7B5B\u9009\u5668\u540D\u79F0\u76F8\u540C</p>\n                        <p class="formula-example" ng-if="selected.field.data_type==\'string\'">\u793A\u4F8B: [\u5B57\u6BB5\u540D]=\'\u67D0\u67D0\', \u4E14\u540D\u79F0\u9700\u4E0E\u7B5B\u9009\u5668\u540D\u79F0\u76F8\u540C</p>\n                        <p class="formula-example" ng-if="selected.field.data_type==\'number\'">\u793A\u4F8B: [\u5B57\u6BB5\u540D]=\'123\', \u4E14\u540D\u79F0\u9700\u4E0E\u7B5B\u9009\u5668\u540D\u79F0\u76F8\u540C</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" promise-button="" pb-completed="global.clickComplete" pb-click="commit()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/create-field/create-chart-field.html', '<div bindonce="">\n    <h3 class="ngdialog-title">\u673A\u5668\u5B66\u4E60\u6A21\u578B</h3>\n    <div class="ngdialog-message">\n        <div ml-add-field="" tb-id="ngDialogData.tb_id" ct-id="ngDialogData.ct_id" field-list="field_list" control="mlControl" field-dropable="true" drag-field="dragField"></div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="commitMlField(closeThisDialog)">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeMlDialog(closeThisDialog)">\u53D6\u6D88</button>\n    </div>\n    <div ng-loading-gif="" ng-show="showLoading"></div>\n</div>');
    $templateCache.put('/static/chart-edit/enum-order/enum-order.html', '<div bindonce="">\n    <div class="ngdialog-title">\n        <span ng-if="!ngDialogData.isCustomOrder">\u6587\u672C\u6392\u5E8F</span>\n        <span ng-if="ngDialogData.isCustomOrder">\u81EA\u5B9A\u4E49\u6392\u5E8F</span>\n        <div class="bdp-icon-wrap bdp-tooltip bottom">\n            <i class="bdp-icon ico-info-sign cursor-pointer"></i>\n            <div class="bdp-tooltip-content">\n                <div class="content">\n                    <p ng-if="ngDialogData.source === \'source\'">\u82E5\u5F53\u524D\u5B58\u5728\u56FE\u8868\u7EA7\u522B\u6392\u5E8F\uFF0C\u6B64\u5DE5\u4F5C\u8868\u7EA7\u522B\u6392\u5E8F\u5C06\u4E0D\u5F71\u54CD\u5F53\u524D\u56FE\u8868</p>\n                    <p ng-if="ngDialogData.source !== \'source\'">\u82E5\u5E0C\u671B\u7EF4\u6301\u5DE5\u4F5C\u8868\u7EA7\u522B\u7684\u7EDF\u4E00\u6392\u5E8F\uFF0C\u8BF7\u8FD4\u56DE\u5E76\u4F7F\u7528\u5DE6\u4FA7\u5B57\u6BB5\u5217\u8868\u4E2D\u5B57\u6BB5\u7684\u6392\u5E8F</p>\n                </div>\n                <div class="bdp-tooltip-arrow">\n                    <em></em>\n                    <span></span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="errtip-dialog" ng-show="global.dialog_hint" ng-bind="global.dialog_hint"></div>\n    <div class="ngdialog-message enum-order-bd">\n\n        <ul class="order-type" ng-if="!ngDialogData.isCustomOrder">\n            <li>\n                <label>\n                    <input type="radio" name="order_type" value="1" ng-model="viewData.type">\n                    <span>\u9ED8\u8BA4\u6392\u5E8F</span>\n                </label>\n            </li>\n            <li>\n                <label>\n                    <input type="radio" name="order_type" value="2" ng-model="viewData.type">\n                    <span>\u6309\u5B57\u6BCD\u6392\u5E8F</span>\n                </label>\n                <select ng-model="viewData.alpha_order_type" ng-options="order.value as order.text for order in alpha_order_types" ng-disabled="viewData.type != 2"></select>\n            </li>\n            <li>\n                <label>\n                    <input type="radio" name="order_type" value="4" ng-model="viewData.type" disabled="disabled" ng-if="isGraftTb">\n                    <input type="radio" name="order_type" value="4" ng-model="viewData.type" ng-if="!isGraftTb">\n                    <span>\u81EA\u5B9A\u4E49\u6392\u5E8F</span>\n                </label>\n            </li>\n        </ul>\n        <div class="enum-items-wrap bg-block" ng-class="{\'has-tip\':viewData.displayTemplate.total > 100}">\n            <div class="loading" ng-show="loading"><img src="//m1.bdp.cn/static/img/loading_a639fc5.gif" width="20"></div>\n            <div class="mask" ng-show="(viewData.type != 4) && !ngDialogData.isCustomOrder"></div>\n            <div class="enum-items" ui-sortable="sortEnumField" ng-model="viewData.displayTemplate.range">\n                <div class="enum-item dropdown-item" ng-repeat="item in viewData.displayTemplate.range">\n                    <span class="enum-item-name nowrap cursor-move"><i class="bdp-icon ico-order"></i>{{item}}</span>\n                    <div class="icons">\n                        <a class="bdp-icon-wrap cursor-pointer" ng-click="incOnePos($index)">\n                            <i class="bdp-icon ico-triangle-up"></i>\n                        </a>\n                        <a class="bdp-icon-wrap cursor-pointer" ng-click="descOnePos($index)">\n                            <i class="bdp-icon ico-triangle-down"></i>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <p class="over-tip">\u5F53\u524D\u6570\u636E\u9879\u8FC7\u591A\uFF0C\u4EC5\u663E\u793A\u524D100\u9879\uFF0C\u5269\u4F59\u90E8\u5206\u65E0\u6CD5\u5B8C\u6574\u663E\u793A</p>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="save(ngDialogData.fid,ngDialogData.source)">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/dimensionCompareSort.html', '<ul mouseover-event-active="it.show_formula" mouseover-hide="" mouseover-hide-cls="J-mouseover-hide" mouseover-parent-cls="J-parent-mouseover-cls" class="text-left">\n\n    <!--\u7EF4\u5EA6\u4FEE\u6539\u540D\u79F0-->\n    <li ng-class="{\'line\':it.data_type === \'date\' || meta.chart_type === \'C200\' && it.data_type === \'string\'}" ng-show="axis === \'x\'">\n        <a class="cursor-pointer" ng-click="setNickName($event)">\u8BBE\u7F6E\u5B57\u6BB5</a>\n    </li><!--end \u7EF4\u5EA6\u4FEE\u6539\u540D\u79F0-->\n    <!-- \u81EA\u52A8\u6362\u884C start -->\n    <li class="J-parent-mouseover-cls more-list-outer" ng-if="meta.chart_type === \'C200\'" ng-show="(axis === \'x\' && !viewMeta.tb_flip) || (axis === \'compare_axis\' && viewMeta.tb_flip)">\n        <a class="cursor-pointer more" ng-class="{\'active\': ([\'x\', \'compare_axis\'].indexOf(axis) > -1  && it.is_auto_wordwrap) || (it.data_type === \'virtual\' && axis === \'compare_axis\' && viewMeta.virtual_wordwrap.is_auto_wordwrap)}"><span>\u81EA\u52A8\u6362\u884C</span><i class="bdp-icon ico-triangle-right"></i></a>\n        <ul class="J-mouseover-hide more-list sort-method-list">\n            <li>\n                <a class="cursor-pointer" ng-click="setAutoWordwrap($event, \'on\', axis, it)">\u5F00\u542F</a>\n                <a class="cursor-pointer" ng-click="setAutoWordwrap($event, \'off\', axis, it)">\u5173\u95ED</a>\n            </li>\n        </ul>\n    </li>\n    <!-- \u81EA\u52A8\u6362\u884C end -->\n    <!--\u8868\u683C\u5BF9\u9F50\u65B9\u5F0F-->\n    <li class="J-parent-mouseover-cls more-list-outer" ng-if="meta.chart_type === \'C200\'" ng-show="axis === \'x\'">\n        <a class="cursor-pointer more"><span>\u5BF9\u9F50\u65B9\u5F0F</span><i class="bdp-icon ico-triangle-right"></i></a>\n        <ul class="J-mouseover-hide more-list sort-method-list">\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\':it.alignment_method === \'left\' || !it.alignment_method && it.data_type === \'string\'}" ng-click="setAlignmentMethod($event,\'left\')">\u5DE6\u5BF9\u9F50</a>\n                <a class="cursor-pointer" ng-class="{\'active\':it.alignment_method === \'center\'}" ng-click="setAlignmentMethod($event,\'center\')">\u5C45\u4E2D</a>\n                <a class="cursor-pointer" ng-class="{\'active\':it.alignment_method === \'right\' || !it.alignment_method && it.data_type !== \'string\' }" ng-click="setAlignmentMethod($event,\'right\')">\u53F3\u5BF9\u9F50</a>\n            </li>\n        </ul>\n    </li><!--end \u8868\u683C\u5BF9\u9F50\u65B9\u5F0F-->\n\n    <!--\u7EF4\u5EA6\u3001\u5BF9\u6BD4\u7EF4\u5EA6\u6392\u5E8F\u65B9\u5F0F-->\n\t<li class="J-parent-mouseover-cls more-list-outer" ng-if="canSetSort() && it.data_type !== \'virtual\'">\n        <a class="cursor-pointer more" ng-class="{\'disabled\':meta.x[0].data_type === \'date\' && meta.chart_type !== \'C200\' && axis !== \'compare_axis\'}"><span>\u6392\u5E8F</span><i class="bdp-icon ico-triangle-right"></i></a>\n        <ul class="J-mouseover-hide more-list sort-method-list" ng-hide="meta.x[0].data_type === \'date\' && meta.chart_type !== \'C200\' && axis !== \'compare_axis\'">\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\': (axis === \'x\' && meta.sort.axis === \'x\' && meta.sort.type ==\'\' &&  it.fid == meta.sort.fid) || (meta.is_advanced_sort != 1 && axis === \'compare_axis\' && it.compare_sort.type == \'\')}" ng-click="setAxisSort($index, \'\', it, axis)">\u9ED8\u8BA4</a>\n                <a class="cursor-pointer" ng-class="{\'active\': (axis === \'x\' && meta.sort.type === \'asc\' && isSortField({\'field\':it, axis:\'x\'})) || (meta.is_advanced_sort != 1 && axis === \'compare_axis\' && it.compare_sort.type == \'asc\')}" ng-click="setAxisSort($index, \'asc\', it, axis)">\u5347\u5E8F</a>\n                <a class="cursor-pointer" ng-class="{\'active\': (axis === \'x\' && meta.sort.type === \'desc\' && isSortField({\'field\':it, axis:\'x\'})) || (meta.is_advanced_sort != 1 && axis === \'compare_axis\' && it.compare_sort.type == \'desc\')}" ng-click="setAxisSort($index, \'desc\', it, axis)">\u964D\u5E8F</a>\n\t\t\t\t<a class="cursor-pointer" ng-class="{disabled: isGraftTb, \'active\': (axis === \'x\' && meta.sort.type === \'custom\' && it.uniq_id === meta.sort.uniq_id && meta.is_advanced_sort == 0) || (meta.is_advanced_sort != 1 && axis === \'compare_axis\' && it.compare_sort.type == \'custom\')}" ng-click="!isGraftTb && showEnumOrder(it.fid, true, axis, $parent.$index)" ng-show="it.data_type === \'string\'">\u81EA\u5B9A\u4E49\u6392\u5E8F</a>\n            </li>\n        </ul>\n    </li><!--end \u7EF4\u5EA6\u3001\u5BF9\u6BD4\u7EF4\u5EA6\u6392\u5E8F\u65B9\u5F0F-->\n</ul>');
    $templateCache.put('/static/chart-edit/field-action/first-active-rate.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u63D0\u793A</div>\n\t<div class="ngdialog-message send-notice">\n\t\t<p>\u4E0E\u7559\u5B58\u7387\u7C7B\u4F3C\uFF0C\u6D3B\u8DC3\u7387\u53EF\u4EE5\u5E2E\u52A9\u4F60\u8BA1\u7B97\u5F53\u524D\u7528\u6237\u5728\u524D\u51E0\u5929\u3001\u524D\u51E0\u6708\u7684\u5386\u53F2\u6D3B\u8DC3\u60C5\u51B5\u3002</p>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="ngDialogData.know(ngDialogData.e, ngDialogData.field, ngDialogData.type)">\u6211\u77E5\u9053\u4E86</button>\n\t</div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/formula-list.html', '<ul mouseover-event-active="it.show_formula" mouseover-hide="" mouseover-hide-cls="J-mouseover-hide" mouseover-parent-cls="J-parent-mouseover-cls" class="text-left">\n    <li ng-if="global.show_discrete && it.is_build_aggregated != 1 ">\n        <a class="cursor-pointer" ng-class="{active: it.aggregator == \'\'}" ng-click="setFormulaToField($event, {name:\'\', type: \'\'}, it)">\u65E0</a>\n    </li>\n    <li class="J-parent-mouseover-cls" ng-if="it.data_type != \'virtual\' && !it.is_new || it.is_build_aggregated == 2  " ng-repeat="formula in formula_list" ng-class="{\'more-list-outer\':formula.type === \'more\'}" text="{{formula.show}} {{dataType}} {{formula.type}} {{selected_type}}" ng-show="((formula.show == \'all\' || formula.show == dataType) && (selected_type !== \'C300\' && selected_type !== \'C301\'))\n            || ((selected_type === \'C300\' || selected_type === \'C301\') && ((formula.type === \'SUM\' && formula.show === dataType)\n            || formula.type === \'COUNT\' || formula.type === \'COUNT_DISTINCT\'))">\n        <a class="cursor-pointer" ng-class="{\'active\':formula.type !== \'more\' && it.aggregator == formula.type,\'more\':formula.type === \'more\'}" ng-click="setFormulaToField($event,formula,it)" fix-more="">\n            {{formula.name}}\n            <i class="bdp-icon ico-triangle-right" ng-if="formula.type === \'more\'"></i>\n        </a>\n        <!--more formula-->\n        <ul class="J-mouseover-hide more-list" ng-if="formula.type === \'more\' && selected_type !== \'C300\' && selected_type !== \'C301\'">\n            <li class="J-parent-mouseover-cls" ng-repeat="item in formula.list" ng-class="{\'more-list-outer\':item.type === \'PERCENTILE\'}">\n                <a class="cursor-pointer" fix-more="" ng-class="{\'active\':it.aggregator == item.type,\'more\':item.type === \'PERCENTILE\', \'disabled\': (item.type === \'PERCENTILE\' || item.type === \'MED\')  && !!isGraftTb}" ng-click="setFormulaToField($event,item,it)">{{item.name}}\n                    <i class="bdp-icon ico-triangle-right" ng-if="item.type === \'PERCENTILE\' && !isGraftTb"></i>\n                </a>\n                <ul class="J-mouseover-hide more-list percentile-part" ng-if="item.type === \'PERCENTILE\' && selected_type !== \'C300\' && selected_type !== \'C301\' && !isGraftTb">\n                    <li ng-repeat="sub_item in item.list">\n                        <a class="cursor-pointer" fix-more="" ng-class="{\'active\':it.aggregator == sub_item.type}" ng-click="setFormulaToField($event,sub_item,it)">{{sub_item.name}}</a>\n                    </li>\n                    <li>\n                        <a class="cursor-pointer" fix-more="" ng-class="{\'active\': isCustomPercentile(it)}" ng-click="setCustomPercentile($event,it)">\u81EA\u5B9A\u4E49</a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </li>\n\n    <!--\u9AD8\u7EA7\u8BA1\u7B97-->\n    <li class="J-parent-mouseover-cls more-list-outer" ng-class="{\'line\':!it.is_new || it.is_build_aggregated == 2}" ng-if="canSetAdvanceAggr() && it.data_type != \'virtual\'">\n        <a class="cursor-pointer more J-dot-advanced-computing" fix-more="">\n            <span>\u9AD8\u7EA7\u8BA1\u7B97</span>\n            <div class="pr" ng-if="enterprise_type == 3">\n                <div ng-if="enterprise_type == 3" ng-show="guide != 1 && guide != 2" dot-guide="" dot-mask="dotMask.advancedComputing" guide-item="advancedComputing" guide-type="chart_edit" watch-status="personalInfo.chart_guide" btn-class="J-dot-advanced-computing" add-class="\'dot-guide-advanced-computing\'"></div>\n            </div>\n            <i class="bdp-icon ico-triangle-right"></i>\n        </a>\n        \n        <ul class="J-mouseover-hide more-list J-dot-advanced-computing">\n            <li class="J-parent-mouseover-cls more-list-outer" ng-class="{\'disabled\':chart_ops.meta.level[0].x[0].granularity === \'hour\'||chart_ops.meta.level[0].x[0].granularity === \'minute\'||chart_ops.meta.level[0].x[0].granularity === \'second\'}">\n                <a class="more cursor-pointer" ng-class="{\'disabled\':chart_ops.meta.level[0].x[0].granularity === \'hour\'||chart_ops.meta.level[0].x[0].granularity === \'minute\'||chart_ops.meta.level[0].x[0].granularity === \'second\'}" ng-if="chart_ops.meta.level[0].x.length >= 1 && chart_ops.meta.level[0].x[0].data_type===\'date\'" fix-more="">\n                    <span>\u540C\u6BD4/\u73AF\u6BD4</span>\n                    <i class="bdp-icon ico-triangle-right"></i>\n                </a>\n                <a class="more string-field cursor-pointer" ng-class="{\'active\':it.yoyQoqSetting.checked == \'1\'}" ng-if="!chart_ops.meta.level[0].x.length || (chart_ops.meta.level[0].x.length >= 1 && chart_ops.meta.level[0].x[0].data_type!==\'date\')" ng-click="setStringFieldYoYQoQ($event,it)" fix-more="">\n                    <span>\u540C\u6BD4/\u73AF\u6BD4</span>\n                    <i class="bdp-icon ico-triangle-right" ng-if="chart_ops.meta.level[0].x[0].data_type === \'date\'"></i>\n                </a>\n                <ul class="J-mouseover-hide more-list contrast" ng-if="chart_ops.meta.level[0].x.length >= 1 && chart_ops.meta.level[0].x[0].data_type === \'date\' && chart_ops.meta.level[0].x[0].granularity != \'hour\' && chart_ops.meta.level[0].x[0].granularity != \'minute\' && chart_ops.meta.level[0].x[0].granularity != \'second\'">\n                    <li>\n                        <a class="cursor-pointer" ng-class="{\'active\':it.QoQ &&  it.yoyQoqType === \'value\'}" ng-click="setContrastField($event,it,\'QoQ\',\'\',\'value\', (chart_ops.meta.level[0].x[0].granularity | yoyTypeTranslate:\'value\'))">\n                           {{chart_ops.meta.level[0].x[0].granularity | yoyTypeTranslate:\'value\'}}\n                        </a>\n                    </li>\n                    <li>\n                        <a class="cursor-pointer" ng-class="{\'active\':it.QoQ && (!it.yoyQoqType || it.yoyQoqType === \'rate\')}" ng-click="setContrastField($event,it,\'QoQ\',\'\',\'rate\', (chart_ops.meta.level[0].x[0].granularity | yoyTypeTranslate:\'rate\'))">\n                           {{ chart_ops.meta.level[0].x[0].granularity | yoyTypeTranslate:\'rate\'}}\n                        </a>\n                    </li>\n                    <li ng-if="chart_ops.meta.level[0].x[0].granularity === \'day\'">\n                        <a class="cursor-pointer" ng-class="{\'active\':it.YoY === \'week\' &&  it.yoyQoqType === \'value\'}" ng-click="setContrastField($event,it,\'YoY\',\'week\',\'value\', (\'chart.weekYoYValue\'|translate))">\u4E0A\u5468\u540C\u6BD4\u503C</a>\n                    </li>\n                    <li ng-if="chart_ops.meta.level[0].x[0].granularity === \'day\'">\n                        <a class="cursor-pointer" ng-class="{\'active\':it.YoY === \'week\' && (!it.yoyQoqType || it.yoyQoqType === \'rate\')}" ng-click="setContrastField($event,it,\'YoY\',\'week\',\'rate\', (\'chart.weekYoYPercent\'|translate))">\u4E0A\u5468\u540C\u6BD4\u7387</a>\n                    </li>\n                    <li ng-if="chart_ops.meta.level[0].x[0].granularity === \'day\'">\n                        <a class="cursor-pointer" ng-class="{\'active\':it.YoY === \'month\' &&  it.yoyQoqType === \'value\'}" ng-click="setContrastField($event,it,\'YoY\',\'month\',\'value\', (\'chart.monthYoYValue\'|translate))">\u4E0A\u6708\u540C\u6BD4\u503C</a>\n                    </li>\n                    <li ng-if="chart_ops.meta.level[0].x[0].granularity === \'day\'">\n                        <a class="cursor-pointer" ng-class="{\'active\':it.YoY === \'month\' && (!it.yoyQoqType || it.yoyQoqType === \'rate\')}" ng-click="setContrastField($event,it,\'YoY\',\'month\',\'rate\', (\'chart.monthYoYPercent\'|translate))">\u4E0A\u6708\u540C\u6BD4\u7387</a>\n                    </li>\n                    <li ng-if="chart_ops.meta.level[0].x[0].granularity !== \'year\'">\n                        <a class="cursor-pointer" ng-class="{\'active\':it.YoY === \'year\' &&  it.yoyQoqType === \'value\'}" ng-click="setContrastField($event,it,\'YoY\',\'year\',\'value\', (\'chart.yearYoYValue\'|translate))">\u4E0A\u5E74\u540C\u6BD4\u503C</a>\n                    </li>\n                    <li ng-if="chart_ops.meta.level[0].x[0].granularity !== \'year\'">\n                        <a class="cursor-pointer" ng-class="{\'active\':it.YoY === \'year\' && (!it.yoyQoqType || it.yoyQoqType === \'rate\')}" ng-click="setContrastField($event,it,\'YoY\',\'year\',\'rate\', (\'chart.yearYoYPercent\'|translate))">\u4E0A\u5E74\u540C\u6BD4\u7387</a>\n                    </li>\n                    <li>\n                      <a class="cursor-pointer" ng-class="{\'active\':it.yoyQoqSetting.type === \'custom\'}" ng-click="customYoYQoQ.open($event, it)">\u81EA\u5B9A\u4E49\u5BF9\u6BD4</a>\n                    </li>\n                </ul>\n            </li>\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\':(it.advance_aggregator.type !== \'cancel\' && it.percentage == true) || it.advance_aggregator.type === \'percentage\'}" ng-click="setAdvanceAggregator($event,it,\'percentage\')">\u767E\u5206\u6BD4</a>\n            </li>\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\':it.advance_aggregator.type === \'retention\',\n                   \'disabled\':chart_ops.meta.level[0].x[0].granularity === \'hour\'||chart_ops.meta.level[0].x[0].granularity === \'minute\'||chart_ops.meta.level[0].x[0].granularity === \'second\' || it.is_build_aggregated == 1}" ng-click="setAdvanceAggregator($event,it,\'retention\')">\u7559\u5B58\u7387</a>\n            </li>\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\':it.advance_aggregator.type === \'activity\',\n                   \'disabled\':chart_ops.meta.level[0].x[0].granularity === \'hour\'||chart_ops.meta.level[0].x[0].granularity === \'minute\'||chart_ops.meta.level[0].x[0].granularity === \'second\' || it.is_build_aggregated == 1}" ng-click="setAdvanceAggregator($event,it,\'activity\')">\u6D3B\u8DC3\u7387</a>\n            </li>\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\':it.advance_aggregator.type === \'running\',\n                   \'disabled\':chart_ops.meta.level[0].x.length < 1 || chart_ops.meta.level[0].x[0].data_type !== \'date\' || chart_ops.meta.level[0].x[0].granularity === \'hour\'||chart_ops.meta.level[0].x[0].granularity === \'minute\'||chart_ops.meta.level[0].x[0].granularity === \'second\'}" ng-click="setAdvanceAggregator($event,it,\'running\')">\u7D2F\u8BA1\u8BA1\u7B97</a>\n            </li>\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\':it.advance_aggregator.type === \'moving\',\n                   \'disabled\':chart_ops.meta.level[0].x.length < 1 || chart_ops.meta.level[0].x[0].data_type !== \'date\' || chart_ops.meta.level[0].x[0].granularity === \'hour\'||chart_ops.meta.level[0].x[0].granularity === \'minute\'||chart_ops.meta.level[0].x[0].granularity === \'second\'}" ng-click="setAdvanceAggregator($event,it,\'moving\')">\u79FB\u52A8\u8BA1\u7B97</a>\n            </li>\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\':it.advance_aggregator.type === \'repetition\',\n                   \'disabled\':chart_ops.meta.level[0].x[0].granularity === \'hour\'||chart_ops.meta.level[0].x[0].granularity === \'minute\'||chart_ops.meta.level[0].x[0].granularity === \'second\' || it.is_build_aggregated == 1}" ng-click="setAdvanceAggregator($event,it,\'repetition\')">\u91CD\u590D\u7387</a>\n            </li>\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\':(it.advance_aggregator.type !== \'cancel\' && it.percentage == false) || it.advance_aggregator.type === \'cancel\'}" ng-click="setAdvanceAggregator($event,it,\'cancel\')">\u65E0</a>\n            </li>\n        </ul>\n    </li>\n    <li ng-class="{\'line\': it.data_type != \'virtual\' &&  !(is_gis && it.is_build_aggregated === 1) }">\n        <a class="cursor-pointer" ng-click="setNumDigit($event)" aggregator="{{formulaKeyMap[it.aggregator]}}">\u6570\u503C\u663E\u793A\u683C\u5F0F</a>\n    </li>\n    <li>\n        <a class="cursor-pointer" ng-click="setNickName($event)">\u8BBE\u7F6E\u5B57\u6BB5</a>\n    </li>\n    <li class="J-parent-mouseover-cls more-list-outer" ng-if="chart_ops.meta.level[drill_level].chart_type === \'C200\'">\n        <a class="cursor-pointer more"><span>\u5BF9\u9F50\u65B9\u5F0F</span><i class="bdp-icon ico-triangle-right"></i></a>\n        <ul class="J-mouseover-hide more-list sort-method-list">\n            <li>\n                <a class="cursor-pointer" data-test="{{it.alignment_method}}" ng-class="{\'active\':it.alignment_method === \'left\'}" ng-click="setAlignmentMethod($event,\'left\')">\u5DE6\u5BF9\u9F50</a>\n                <a class="cursor-pointer" ng-class="{\'active\':it.alignment_method === \'center\'}" ng-click="setAlignmentMethod($event,\'center\')">\u5C45\u4E2D</a>\n                <a class="cursor-pointer" ng-class="{\'active\':it.alignment_method === \'right\' || !it.alignment_method}" ng-click="setAlignmentMethod($event,\'right\')">\u53F3\u5BF9\u9F50</a>\n            </li>\n        </ul>\n    </li>\n    <li ng-if="it.data_type != \'virtual\'">\n        <a class="cursor-pointer" ng-click="setPostFilter($event)">\u7ED3\u679C\u7B5B\u9009\u5668</a>\n    </li>\n\n    <li class="J-parent-mouseover-cls more-list-outer" ng-if="canSetSort()">\n        <a class="cursor-pointer more" ng-class="{\'disabled\':chart_ops.meta.level[drill_level].x[0].data_type === \'date\' && chart_ops.meta.level[drill_level].chart_type !== \'C200\'}" fix-more=""><span>\u6392\u5E8F</span><i class="bdp-icon ico-triangle-right"></i></a>\n        <ul class="J-mouseover-hide more-list sort-method-list" ng-if="!(chart_ops.meta.level[drill_level].x[drill_level].data_type === \'date\' && chart_ops.meta.level[drill_level].chart_type !== \'C200\')">\n\n            <li>\n                <a class="cursor-pointer" ng-class="{\'active\': chart_ops.meta.level[drill_level].sort.axis === \'y\' && chart_ops.meta.level[drill_level].sort.type ==\'\' &&  it.fid == chart_ops.meta.level[drill_level].sort.fid, \'disabled\':chart_ops.meta.level[drill_level].x[0].data_type === \'date\' && chart_ops.meta.level[drill_level].chart_type !== \'C200\'}" ng-click="setAxisSort($event, \'\', it)">\u9ED8\u8BA4</a>\n                <a class="cursor-pointer" ng-class="{\'active\': chart_ops.meta.level[drill_level].sort.type === \'asc\' && chart_ops.meta.level[drill_level].sort.axis === \'y\' && isSortField({\'field\':it, axis:\'y\'}), \'disabled\':chart_ops.meta.level[drill_level].x[0].data_type === \'date\' && chart_ops.meta.level[drill_level].chart_type !== \'C200\'}" ng-click="setAxisSort($event, \'asc\', it)">\u5347\u5E8F</a>\n                <a class="cursor-pointer" ng-class="{\'active\': chart_ops.meta.level[drill_level].sort.type === \'desc\' && chart_ops.meta.level[drill_level].sort.axis === \'y\' && isSortField({\'field\':it, axis:\'y\'}), \'disabled\':chart_ops.meta.level[drill_level].x[0].data_type === \'date\' && chart_ops.meta.level[drill_level].chart_type !== \'C200\'}" ng-click="setAxisSort($event, \'desc\', it)">\u964D\u5E8F</a>\n            </li>\n        </ul>\n    </li>\n    <!-- // TODO \u673A\u5668\u5B66\u4E60\u4E09\u671F\uFF0C\u6A21\u578B\u5F00\u542F\u5F00\u5173\u6309\u94AE -->\n    <li class="line J-parent-mouseover-cls" ng-if="chart_ops.meta.level[drill_level].chart_type == \'C220\' && viewMeta.x && viewMeta.x.length == 1 && viewMeta.x[0].data_type == \'date\'" time-predicted="" pre-field="it" pre-granularity="viewMeta.x[0].granularity" pre-savefun="saveChartImmediate()">\n    </li>\n    <li class="J-parent-mouseover-cls line" ng-if="selected_type == \'C250\'">\n        <a class="cursor-pointer more" fix-more="">\n            <span></span>\n            <i class="chart-type-icon icon-32-to-24 {{it.field_series_type}}"></i>\n            <i class="bdp-icon ico-triangle-right"></i>\n        </a>\n        <ul class="J-mouseover-hide more-list series-type-list">\n            <li>\n                <a class="cursor-pointer" ng-repeat="typeItem in doubleYaxisChartTypes" ng-click="changeFieldSeriesType($event, it, typeItem)">\n                    <i class="chart-type-icon {{typeItem}}"></i>\n                </a>\n            </li>\n        </ul>\n    </li>\n</ul>\n');
    $templateCache.put('/static/chart-edit/field-action/linkSetting.html', '<div bindonce="">\n    <div class="ngdialog-title">\n        <span>\u8BF7\u9009\u62E9\u5F53\u524D\u8DF3\u8F6C\u5B57\u6BB5</span>\n        <span class="title-tip">(\u6CE8\uFF1A\u5F53\u524D\u8BBE\u7F6E\u4EC5\u5BF9\u542B\u6709http\u5F00\u5934\u7684\u94FE\u63A5\u5B57\u6BB5\u751F\u6548)</span>\n    </div>\n    <div class="ngdialog-message">\n        <div class="clearfix">\n            <div class="query-box auto no-margin batch-add-search">\n                <input type="text" class="query-text" ng-input-text="" ng-model="batchQuery">\n            </div>\n        </div>\n        <div class="field-scroll-wrap">\n            <dl class="clearfix field-type-list" ng-repeat="fieldTypeItem in fieldTypeList" ng-if="(ngDialogData.fieldList | getFieldsByDataType: fieldTypeItem.type | query_fields:batchQuery).length > 0">\n                <dt class="field-type-title">\n                    <label class="cursor-pointer">\n                        <i class="bdp-icon ico-no-opacity ico-type-{{fieldTypeItem.type}}"></i>\n                        <span class="field-type-name" ng-if="fieldTypeItem.type == \'string\'">\u6587\u672C</span>\n                        <span class="field-type-name" ng-if="fieldTypeItem.type == \'date\'">\u65E5\u671F</span>\n                        <span class="field-type-name" ng-if="fieldTypeItem.type == \'number\'">\u6570\u503C</span>\n                    </label>\n                </dt>\n                <dd class="field-list-wrap">\n                    <ul class="clearfix">\n                        <li class="field-item" ng-repeat="fieldItem in ngDialogData.fieldList | getFieldsByDataType: fieldTypeItem.type | query_fields:batchQuery">\n                            <label class="cursor-pointer">\n                                <input class="field-selected" type="checkbox" ng-model="fieldItem.selected" ng-disabled="fieldItem.disabled" ng-change="changeSelectedOne(fieldItem)">\n                                <span class="field-name nowrap" ng-class="{\'font-text-tip\': fieldItem.disabled,\n                                                 \'border-bottom-5182E4\': (fieldItem.original_name != fieldItem.name || fieldItem.remark)}" field-set-tooltip="fieldItem" tooltip-placement="top-left" ng-if="tbType != \'public\'" title="{{fieldItem.name}}">{{fieldItem.name}}</span>\n                                <span class="field-name nowrap" ng-if="tbType == \'public\'" ng-bind="fieldItem.name"></span>\n                            </label>\n                        </li>\n                    </ul>\n                </dd>\n            </dl>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <p class="cannot-use-tip font-text-tip nowrap">{{initText.dialogFooterTip}}</p>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="sure()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/nick-name.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u8BBE\u7F6E\u5B57\u6BB5</div>\n\t<div class="nick-model-bd nick-name-wrap">\n\t\t<p class="hd">\u8BBE\u7F6E\u5F53\u524D\u5B57\u6BB5\u522B\u540D</p>\n\t\t<div>\n\t\t\t<div class="bd-form">\n\t\t\t\t<input type="text" ng-model="ngDialogData.field.nick_name" class="nick-name" placeholder="{{\'chart.setFieldNameInChartTagPlaceholder\' | translate }}">\n\t\t\t</div>\n\t\t</div>\n\t\t<p class="hd" ng-if="ngDialogData.dimension !== \'dimension\'">\u8BBE\u7F6E\u5F53\u524D\u5B57\u6BB5\u5355\u4F4D</p>\n\t\t<div ng-if="ngDialogData.dimension !== \'dimension\'">\n\t\t\t<div class="bd-form">\n\t\t\t\t<input type="text" ng-model="ngDialogData.field.unit_adv" class="nick-name" placeholder="{{\'chart.setFieldUnitPlaceholder\' | translate }}">\n\t\t\t</div>\n\t\t</div>\n\t\t<p class="hd mt10">\u5B57\u6BB5\u63CF\u8FF0</p>\n\t\t<div>\n\t\t\t<div class="bd-form">\n\t\t\t\t<textarea ng-model="ngDialogData.field.description" placeholder="{{\'chart.fieldDescription\' | translate }}"></textarea>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="ngDialogData.save(ngDialogData.field,ngDialogData.field_index,ngDialogData.origin_name)">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\n\t</div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/post-filter.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u6C47\u603B\u6570\u503C\u7B5B\u9009\u5668</div>\n\t<div class="ngdialog-message number-filter">\n\t\t<div class="condition-filter">\n\t\t\t<p>\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" ng-model="filter_enabled">\n\t\t\t\t\t<span>\u4F7F\u7528\u4E0B\u65B9\u7B5B\u9009\u6761\u4EF6</span>\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<div class="condition-filter-part bg-block" ng-class="{\'--disabled\': !filter_enabled}">\n\t\t\t\t<div class="number-range nowrap">\n\t\t\t\t\t<select class="ng-pristine ng-valid" ng-model="filter.number_operator" ng-options="o.value as o.name for o in operatorNumberMap">\n\t\t\t\t\t</select>\n\t\t\t\t\t<input class="input-text-block ng-pristine ng-valid" type="number" ng-if="filter.number_operator != 12 " ng-model="filter.number_both" ng-disabled="filter.number_operator == 8 || filter.number_operator == 9" placeholder="\u8BF7\u8F93\u5165\u6570\u503C">\n\t\t\t\t\t<input class="input-text-block ng-pristine ng-valid range-input" type="number" ng-if="filter.number_operator == 12 " ng-model="filter.number_left" placeholder="\u8BF7\u8F93\u5165\u6570\u503C">\n\t\t\t\t\t<span ng-if="filter.number_operator == 12 "> \uFF5E </span>\n\t\t\t\t\t<input class="input-text-block ng-pristine ng-valid range-input" type="number" ng-if="filter.number_operator == 12 " ng-model="filter.number_right" placeholder="\u8BF7\u8F93\u5165\u6570\u503C">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<span class="operator-help-link" ng-click="goHelp(\'resultFilter\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirmModify()">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\n\t</div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/set-custom-percentile.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u767E\u5206\u4F4D\u8BBE\u7F6E</div>\n\t<div class="ngdialog-message">\n\t\t<div class="line-height-32">\n\t\t\t<span>\u81EA\u5B9A\u4E49\u503C</span>\n\t\t\t<input type="text" class="ml8" placeholder="{{ \'chart.inputIntBetweenZeroToHundred\'  | translate }}" ng-model="ngDialogData.customVal">\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="savePercentileSetting(ngDialogData.event,ngDialogData.field,ngDialogData.customVal)">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\t</div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/set-custom-yoy.html', '<div bindonce="">\n    <div class="ngdialog-title">\u540C\u6BD4/\u73AF\u6BD4\u8BBE\u7F6E</div>\n    <div class="ngdialog-message">\n        <div>\n            <label class="label-head">\u6570\u503C\u8BBE\u7F6E</label>\n            <select ng-model="currentField.yoyQoqSetting.aggregator">\n                <option ng-value="1" ng-selected="currentField.yoyQoqSetting.aggregator == 1">\u589E\u957F\u503C</option>\n                <option ng-value="2" ng-selected="currentField.yoyQoqSetting.aggregator == 2">\u589E\u957F\u7387</option>\n                <option ng-value="3" ng-selected="currentField.yoyQoqSetting.aggregator == 3">\u5BF9\u6BD4\u503C</option>\n            </select>\n\n            <div class="bdp-icon-wrap bdp-tooltip top repetition-tooltip">\n                <i class="bdp-icon ico-info-sign cursor-pointer"></i>\n                <div class="bdp-tooltip-content">\n                    <div class="content">\n                        <p ng-show="currentField.yoyQoqSetting.aggregator==1">\u589E\u957F\u503C = \u6240\u9009\u65E5\u671F \u5BF9\u5E94\u503C - \u5BF9\u6BD4\u65E5\u671F \u5BF9\u5E94\u503C</p>\n                        <p ng-show="currentField.yoyQoqSetting.aggregator==2">\u589E\u957F\u7387 = (\u6240\u9009\u65E5\u671F \u5BF9\u5E94\u503C - \u5BF9\u6BD4\u65E5\u671F \u5BF9\u5E94\u503C) / \u5BF9\u6BD4\u65E5\u671F \u5BF9\u5E94\u503C</p>\n                    </div>\n                    <div class="bdp-tooltip-arrow">\n                        <em></em>\n                        <span></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="mt20">\n            <label class="label-head">\u5BF9\u6BD4\u65B9\u5F0F</label>\n            <select ng-model="currentField.yoyQoqSetting.compare_type">\n                <option ng-value="1" ng-selected="currentField.yoyQoqSetting.compare_type == 1">\u5BF9\u6BD4\u76F8\u5BF9\u65E5\u671F</option>\n            </select>\n        </div>\n        <div class="mt20">\n            <table>\n                <tr>\n                    <td>\n                        <label class="label-head">\u6240\u9009\u65E5\u671F</label>\n                    </td>\n                    <td>\n                        <div class="steppy" id="steppyStart">\n                            <div class="steppy-inner">\n                                <div class="steppy-item" ng-repeat="date in steppyStartDates">\n                                    <span class="steppy-middle">\n                                        {{date|t2Date:chart_ops.meta.level[drill_level].x[0]}}\n                                        <span ng-if="ngDialogData.granularity === \'day\'">\n                                            {{date|timestamp2DayInWeek}}\n                                        </span>\n                                        <span ng-if="ngDialogData.granularity === \'week\'">\n                                            {{date|weekFormat}}\n                                        </span>\n                                    </span>\n                                    \n                                </div>\n                            </div>\n                        </div>\n                    </td>\n                    <td>\n                        <div class="date-picker date-picker-abs" ng-mouseleave="pickStart=false">\n                            <a class="bdp-icon-wrap cursor-pointer" ng-click="pickStart=!pickStart">\n                                <i class="bdp-icon ico-type-date"></i>\n                            </a>\n                            <div ng-if="ngDialogData.granularity === \'day\' || ngDialogData.granularity === \'week\'" date-picker="date.start" view="date" min-view="date" ng-show="pickStart"></div>\n\n                            <input type="text" class="hidden" ng-model="date.start">\n                            <div ng-if="ngDialogData.granularity === \'month\' || ngDialogData.granularity === \'quarter\'" date-picker="date.start" view="month" min-view="month" ng-show="pickStart"></div>\n                            <input type="text" class="hidden" ng-model="date.end">\n                            <div ng-if="ngDialogData.granularity === \'year\'" view="year" min-view="year" ng-show="pickStart" date-picker="date.start"></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label class="label-head">\u5BF9\u6BD4\u65E5\u671F</label>\n                    </td>\n                    <td>\n                        <div class="steppy" id="steppyEnd">\n                            <div class="steppy-inner">\n                                <div class="steppy-item" ng-repeat="date in steppyEndDates">\n                                    <span class="steppy-middle">\n                                        {{date|t2Date:chart_ops.meta.level[drill_level].x[0]}}\n                                        <span ng-if="ngDialogData.granularity === \'day\'">\n                                            {{date|timestamp2DayInWeek}}\n                                        </span>\n                                        <span ng-if="ngDialogData.granularity === \'week\'">\n                                            {{date|weekFormat}}\n                                        </span>\n                                    </span>\n                                    \n                                </div>\n                            </div>\n                        </div>\n                    </td>\n                    <td>\n                        <div class="date-picker date-picker-abs" ng-mouseleave="pickEnd=false">\n\n                            <a class="bdp-icon-wrap cursor-pointer" ng-click="pickEnd=!pickEnd">\n                                <i class="bdp-icon ico-type-date"></i>\n                            </a>\n                            <div ng-if="ngDialogData.granularity === \'day\' || ngDialogData.granularity === \'week\'" date-picker="date.end" view="date" min-view="date" ng-show="pickEnd"></div>\n                            <div ng-if="ngDialogData.granularity === \'month\' || ngDialogData.granularity === \'quarter\'" date-picker="date.end" view="month" min-view="month" ng-show="pickEnd"></div>\n                            <div ng-if="ngDialogData.granularity === \'year\'" date-picker="date.end" view="year" min-view="year" ng-show="pickEnd"></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td></td>\n                    <td>\n                        <div class="mt10" style="color:#999">\u901A\u8FC7\u62D6\u62FD\u8C03\u6574\u5BF9\u6BD4\u65E5\u671F\u7684\u5BF9\u5E94\u5173\u7CFB</div>\n                </td></tr>\n            </table>\n            <div class="steppy-focus"></div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'customYoy\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="customYoYQoQ.save()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/set-moving.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u79FB\u52A8\u8BA1\u7B97</div>\n\t  <div class="ngdialog-message">\n\n\t\t<div class="mt20">\n\t\t\t<label class="label-head">\u8BA1\u7B97\u8303\u56F4</label>\n\t\t\t<label>\n\t\t\t\t<span>\u524D</span>\n\t\t\t\t<input type="number" class="input-text-block input-number-small" min="0" input-number="" data-nm-type="natural" ng-model="ngDialogData.setting.prev_values">\n\t\t\t\t<span>{{ngDialogData.meta.level[0].x[0].granularity|date_gran_to_name}}</span>\n\t\t\t</label>\n\t\t\t\uFF5E\n\t\t\t<label class="mr10">\n\t\t\t\t<span>\u540E</span>\n\t\t\t\t<input type="number" class="input-text-block input-number-small" min="0" input-number="" data-nm-type="natural" ng-model="ngDialogData.setting.next_values">\n\t\t\t\t<span>{{ngDialogData.meta.level[0].x[0].granularity|date_gran_to_name}}</span>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>\u5171</span>\n\t\t\t\t<span>\n\t\t\t\t\t{{ngDialogData.setting.prev_values - 1 + (ngDialogData.setting.next_values - (-2))}}\n\t\t\t\t</span>\n\t\t\t\t<span>{{ngDialogData.meta.level[0].x[0].granularity|date_gran_to_name}}</span>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class="mt20">\n\t\t\t<label class="label-head">\u8BA1\u7B97\u65B9\u5F0F</label>\n\t\t\t<select ng-model="ngDialogData.setting.method" class="m-input" ng-options="f.type as f.name for f in formulaList">\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<span class="operator-help-link" ng-click="goHelp(\'chartMoveCalc\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveAdvanceAggregator(ngDialogData.field_index,\'moving\')">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\t</div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/set-numdigit.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u8BBE\u7F6E\u5B57\u6BB5\u6570\u503C\u663E\u793A\u683C\u5F0F</div>\n\t<form name="numdigitForm">\n\t\t<div class="ngdialog-message numdigit-model-bd">\n\t\t\t<div class="row">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="show_type" ng-model="ngDialogData.field.formatter.check" value="num">\n\t\t\t\t\t<span>\u663E\u793A\u4E3A\u6570\u503C</span>\n\t\t\t\t</label>\n\t\t\t\t<p>\n\t\t\t\t\t<span>\u5C0F\u6570\u4F4D\u6570</span>\n\t\t\t\t\t<input type="number" input-number="" data-nm-type="natural" ng-model="ngDialogData.field.formatter.num.digit" ng-disabled="ngDialogData.field.formatter.check!==\'num\'">\n\t\t\t\t\t<input type="checkbox" name="" ng-model="ngDialogData.field.formatter.num.millesimal" ng-disabled="ngDialogData.field.formatter.check!==\'num\'">\n\t\t\t\t\t<span>\u4F7F\u7528\u5343\u4F4D\u5206\u9694\u7B26</span>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<span>\u6570\u503C\u5355\u4F4D</span>\n\t\t\t\t\t<select ng-if="language == \'zh\'" ng-model="ngDialogData.field.formatter.num.unit" class="num-unit" ng-disabled="ngDialogData.field.formatter.check!==\'num\'">\n\t\t\t\t\t\t<option value="1">\u65E0</option>\n\t\t\t\t\t\t<option value="10000">\u4E07</option>\n\t\t\t\t\t\t<option value="100000000">\u4EBF</option>\n\t\t\t\t\t\t<option value="1000">k</option>\n\t\t\t\t\t\t<option value="1000000">M</option>\n\t\t\t\t\t\t<option value="1000000000">G</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<select ng-if="language == \'en\'" ng-model="ngDialogData.field.formatter.num.unit" class="num-unit" ng-disabled="ngDialogData.field.formatter.check!==\'num\'">\n\t\t\t\t\t\t<option value="1">None</option>\n\t\t\t\t\t\t<option value="1000">k</option>\n\t\t\t\t\t\t<option value="1000000">M</option>\n\t\t\t\t\t\t<option value="1000000000">G</option>\n\t\t\t\t\t</select>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="row" ng-if="chart_ops.chart_type !== \'C212\' && chart_ops.chart_type !== \'C242\' && chart_ops.chart_type !== \'C230\'">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="radio" name="show_type" ng-model="ngDialogData.field.formatter.check" value="percent">\n\t\t\t\t\t<span>\u663E\u793A\u4E3A\u767E\u5206\u6570</span>\n\t\t\t\t</label>\n\n\t\t\t\t<p>\n\t\t\t\t\t<span>\u5C0F\u6570\u4F4D\u6570</span>\n\t\t\t\t\t<input type="number" input-number="" data-nm-type="natural" ng-model="ngDialogData.field.formatter.percent.digit" ng-disabled="ngDialogData.field.formatter.check !== \'percent\'">\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="ngdialog-buttons">\n\t\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveNumdigit(ngDialogData.field,ngDialogData.field_index)">\u786E\u5B9A</button>\n\t\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\n\t\t</div>\n\t</form>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/set-repetition.html', '<div bindonce="">\n    <div class="ngdialog-title">\u91CD\u590D\u7387\u8BBE\u7F6E</div>\n    <div class="ngdialog-message">\n\n        <div class="mt20" ng-if="ngDialogData.meta.level[0].x[0].data_type !== \'date\'">\n            <label class="label-head">\u65E5\u671F\u5B57\u6BB5</label>\n            <select ng-options="field.fid as field.name for field in field_list|filter:{ data_type : \'date\' }" ng-model="ngDialogData.setting.date_field_fid" class="m-input">\n                <option value="">\u8BF7\u9009\u62E9\u5B57\u6BB5</option>\n            </select>\n\n        </div>\n        <div class="mt20">\n            <label class="label-head">\u6570\u503C\u8BBE\u7F6E</label>\n            <select ng-model="ngDialogData.setting.aggregator" class="m-input">\n                <option value="2" ng-selected="ngDialogData.setting.aggregator == 2">\u91CD\u590D\u7387</option>\n                <option value="1" ng-selected="ngDialogData.setting.aggregator == 1">\u91CD\u590D\u6570</option>\n            </select>\n        </div>\n\n        <div class="mt20">\n            <label class="label-head">\u8BA1\u7B97\u65B9\u5F0F</label>\n            <select ng-model="ngDialogData.setting.calc_type">\n                <option value="1" ng-selected="ngDialogData.setting.calc_type==1">\u6309\u6761\u4EF6</option>\n                <option value="2" ng-selected="ngDialogData.setting.calc_type==2">\u6309\u6B21\u6570</option>\n            </select>\n\n            <div class="bdp-icon-wrap bdp-tooltip top repetition-tooltip" ng-show="language === \'zh\'">\n                <i class="bdp-icon ico-info-sign cursor-pointer"></i>\n                <div class="bdp-tooltip-content">\n                    <div class="content">\n                        <p ng-show="ngDialogData.setting.calc_type==1">\u6309\u6761\u4EF6\u8BA1\u7B97\u91CD\u590D\u7387\u4F1A\u6839\u636E\u8BBE\u7F6E\u7684\u6761\u4EF6\uFF0C\u7EDF\u8BA1\u51FA\u7B26\u5408\u6761\u4EF6\u7684\u91CD\u590D\u503C\u8FDB\u884C\u7EDF\u8BA1\uFF0C\u4F8B\u5982\uFF1A\u8BBE\u7F6E\u6761\u4EF6\u7B49\u4E8E2\uFF0C\u5C06\u7EDF\u8BA1\u51FA\u73B02\u6B21\u7684\u6570\u636E\u5E76\u8FDB\u884C\u6C47\u603B\u3002</p>\n                        <p ng-show="ngDialogData.setting.calc_type==2">\u6309\u6B21\u6570\u8BA1\u7B97\u91CD\u590D\u7387\u4F1A\u7EDF\u8BA1\u51FA\u6240\u6709\u91CD\u590D\u9879\uFF0C\u5E76\u5BF9\u91CD\u590D\u6B21\u6570\u8FDB\u884C\u6C47\u603B\uFF0C\u4F8B\u5982\uFF1A\u6570\u636E\u4E2DA\u9879\u51FA\u73B0\u4E862\u6B21\uFF0CB\u9879\u51FA\u73B0\u4E863\u6B21\uFF0C\u5219\u91CD\u590D\u6570\u4F1A\u7EDF\u8BA1\u4E3A2+3=5\u6B21\u3002</p>\n                    </div>\n                    <div class="bdp-tooltip-arrow">\n                        <em></em>\n                        <span></span>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n\n        <div class="mt20" ng-if="ngDialogData.setting.calc_type == \'1\'">\n            <label class="label-head">\u91CD\u590D\u6761\u4EF6</label>\n\n            <select ng-model="ngDialogData.setting.calc_condition.type">\n                <option value="1" ng-selected="ngDialogData.setting.calc_condition.type == 1">\u5927\u4E8E\u7B49\u4E8E</option>\n                <option value="2" ng-selected="ngDialogData.setting.calc_condition.type == 2">\u7B49\u4E8E</option>\n                <option value="3" ng-selected="ngDialogData.setting.calc_condition.type == 3">\u533A\u95F4</option>\n            </select>\n            <input type="number" min="0" class="input-text-block input-number-small" input-number="" data-nm-type="positiveInt" ng-model="ngDialogData.setting.calc_condition.range[0]">\n            <span ng-if="ngDialogData.setting.calc_condition.type == 3">~</span>\n            <input ng-if="ngDialogData.setting.calc_condition.type == 3" type="number" min="1" input-number="" data-nm-type="positiveInt" class="input-text-block input-number-small" ng-model="ngDialogData.setting.calc_condition.range[1]">\n            <span>\u6B21</span>\n        </div>\n\n        <div class="mt20" ng-if="ngDialogData.meta.level[0].x[0].data_type !== \'date\'">\n            <label class="label-head">\u8BA1\u7B97\u5468\u671F</label>\n            <select ng-model="ngDialogData.setting.calc_period.type">\n                <option value="fixed" ng-selected="ngDialogData.setting.calc_period.type == \'fixed\'">\u56FA\u5B9A\u65F6\u957F</option>\n                <option value="relative" ng-selected="ngDialogData.setting.calc_period.type == \'relative\'">\u76F8\u5BF9\u65F6\u957F</option>\n                <option value="accurate" ng-selected="ngDialogData.setting.calc_period.type == \'accurate\'">\u7CBE\u786E\u65E5\u671F</option>\n                <option value="expression" ng-selected="ngDialogData.setting.calc_period.type == \'expression\'">\u8868\u8FBE\u5F0F</option>\n            </select>\n        </div>\n\n        <div class="mt20" ng-if="ngDialogData.meta.level[0].x[0].data_type !== \'date\'">\n            <div ng-if="ngDialogData.setting.calc_period.type == \'fixed\'">\n                <div class="row-start mt20">\n                    <label>\n                        <span class="label-head">\u6700\u8FD1</span>\n                        <input type="number" input-number="" data-nm-type="positiveInt" class="input-text-block m-input" ng-model="ngDialogData.setting.calc_period.fixed.start">\n                               <span>\u5929</span>\n                    </label>\n                </div>\n                <div class="row-end mt20">\n                    <label class="label-head">\u622A\u81F3</label>\n                    <label>\n                        <input type="radio" ng-model="ngDialogData.setting.calc_period.fixed.end.type" ng-value="0">\n                        <span>\u4ECA\u5929</span>\n                    </label>\n                    <label>\n                        <input type="radio" ng-model="ngDialogData.setting.calc_period.fixed.end.type" ng-value="1">\n                        <span>\u6628\u5929</span>\n                    </label>\n                    <label>\n                        <input type="radio" ng-model="ngDialogData.setting.calc_period.fixed.end.type" ng-value="2">\n                        <span>\u524D</span>\n                        <input type="number" input-number="" data-nm-type="positiveInt" min="1" class="input-text-block input-number-small" ng-class="{\'input-disabled\':ngDialogData.setting.calc_period.fixed.end.type != 2}" ng-model="ngDialogData.setting.calc_period.fixed.end.value" ng-disabled="ngDialogData.setting.calc_period.fixed.end.type != 2">\n                               <span>\u5929</span>\n                    </label>\n                    <label>\n                        <input type="radio" ng-model="ngDialogData.setting.calc_period.fixed.end.type" ng-value="3">\n                        <span>\u540E</span>\n                        <input type="number" input-number="" data-nm-type="positiveInt" min="1" class="input-text-block input-number-small" ng-class="{\'input-disabled\':ngDialogData.setting.calc_period.fixed.end.type != 3}" ng-model="ngDialogData.setting.calc_period.fixed.end.value" ng-disabled="ngDialogData.setting.calc_period.fixed.end.type != 3">\n                        <span>\u5929</span>\n                    </label>\n                </div>\n            </div>\n            <div ng-if="ngDialogData.setting.calc_period.type == \'relative\'">\n                <div class="mt20">\n                    <label class="label-head">\u5468\u671F</label>\n                    <select ng-model="ngDialogData.setting.calc_period.relative.granularity" class="m-input">\n                        <option value="week" ng-selected="ngDialogData.setting.calc_period.relative.granularity === \'week\'">\u5468</option>\n                        <option value="month" ng-selected="ngDialogData.setting.calc_period.relative.granularity === \'month\'">\u6708</option>\n                        <option value="quarter" ng-selected="ngDialogData.setting.calc_period.relative.granularity === \'quarter\'">\u5B63</option>\n                        <option value="year" ng-selected="ngDialogData.setting.calc_period.relative.granularity === \'year\'">\u5E74</option>\n                    </select>\n                </div>\n                <div ng-show="ngDialogData.setting.calc_period.relative.granularity === \'week\'">\n                    <div class="row-end mt20">\n                        <label class="label-head">\u8D77\u59CB</label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.week.start" value="0">\n                            <span>\u672C\u5468</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.week.start" value="1">\n                            <span>\u4E0A\u5468</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.week.start" value="2">\n                            <span>\u4E0B\u5468</span>\n                        </label>\n                    </div>\n                    <div class="row-end mt20" ng-if="ngDialogData.setting.calc_period.relative.week.start == 0">\n                        <label class="label-head">\u622A\u81F3</label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.week.end" value="0">\n                            <span>\u4ECA\u5929</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.week.end" value="1">\n                            <span>\u6628\u5929</span>\n                        </label>\n                    </div>\n                </div>\n\n                <div ng-show="ngDialogData.setting.calc_period.relative.granularity === \'month\'">\n                    <div class="row-end mt20">\n                        <label class="label-head">\u8D77\u59CB</label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.month.start" value="0">\n                            <span>\u672C\u6708</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.month.start" value="1">\n                            <span>\u4E0A\u6708</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.month.start" value="2">\n                            <span>\u4E0B\u6708</span>\n                        </label>\n                    </div>\n                    <div class="row-end mt20" ng-if="ngDialogData.setting.calc_period.relative.month.start == 0">\n                        <label class="label-head">\u622A\u81F3</label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.month.end" value="0">\n                            <span>\u4ECA\u5929</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.month.end" value="1">\n                            <span>\u6628\u5929</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.month.end" value="2">\n                            <span>\u4E0A\u5468</span>\n                        </label>\n                    </div>\n                </div>\n\n                <div ng-show="ngDialogData.setting.calc_period.relative.granularity === \'quarter\'">\n                    <div class="row-end mt20">\n                        <label class="label-head">\u8D77\u59CB</label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.quarter.start" value="0">\n                            <span>\u672C\u5B63\u5EA6</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.quarter.start" value="1">\n                            <span>\u4E0A\u5B63\u5EA6</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.quarter.start" value="2">\n                            <span>\u4E0B\u5B63\u5EA6</span>\n                        </label>\n                    </div>\n                    <div class="row-end mt20" ng-if="ngDialogData.setting.calc_period.relative.quarter.start == 0">\n                        <label class="label-head">\u622A\u81F3</label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.quarter.end" value="0">\n                            <span>\u4ECA\u5929</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.quarter.end" value="1">\n                            <span>\u6628\u5929</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.quarter.end" value="2">\n                            <span>\u4E0A\u5468</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.quarter.end" value="3">\n                            <span>\u4E0A\u6708</span>\n                        </label>\n                    </div>\n                </div>\n\n                <div ng-show="ngDialogData.setting.calc_period.relative.granularity === \'year\'">\n                    <div class="row-end mt20">\n                        <label class="label-head">\u8D77\u59CB</label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.year.start" value="0">\n                            <span>\u4ECA\u5E74</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.year.start" value="1">\n                            <span>\u53BB\u5E74</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.year.start" value="2">\n                            <span>\u4E0B\u5E74</span>\n                        </label>\n                    </div>\n                    <div class="row-end mt20" ng-if="ngDialogData.setting.calc_period.relative.year.start == 0">\n                        <label class="label-head">\u622A\u81F3</label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.year.end" value="0">\n                            <span>\u4ECA\u5929</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.year.end" value="1">\n                            <span>\u6628\u5929</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.year.end" value="2">\n                            <span>\u4E0A\u5468</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.year.end" value="3">\n                            <span>\u4E0A\u6708</span>\n                        </label>\n                        <label>\n                            <input type="radio" ng-model="ngDialogData.setting.calc_period.relative.year.end" value="4">\n                            <span>\u4E0A\u5B63\u5EA6</span>\n                        </label>\n                    </div>\n                </div>\n\n            </div><!--end relative tab body-->\n            <div ng-if="ngDialogData.setting.calc_period.type == \'accurate\'">\n                <div class="mt20 date-picker" ng-mouseleave="pickStart=false">\n                    <label class="label-head">\u8D77\u59CB\u65E5\u671F</label>\n                    <input type="text" class="input-text-block m-input" ng-model="ngDialogData.setting.calc_period.accurate.start" date-format="" readonly="readonly" ng-click="pickStart=!pickStart">\n                    <a class="bdp-icon-wrap cursor-pointer" ng-click="pickStart=!pickStart">\n                        <i class="bdp-icon ico-type-date"></i>\n                    </a>\n                    <div date-picker="ngDialogData.setting.calc_period.accurate.start" view="date" min-view="date" ng-show="pickStart"></div>\n                </div>\n                <div class="mt20 date-picker" ng-mouseleave="pickEnd=false">\n                    <label class="label-head">\u622A\u81F3\u65E5\u671F</label>\n                    <input type="text" class="input-text-block m-input" ng-model="ngDialogData.setting.calc_period.accurate.end" date-format="" readonly="readonly" ng-click="pickEnd=!pickEnd">\n                    <a class="bdp-icon-wrap cursor-pointer" ng-click="pickEnd=!pickEnd">\n                        <i class="bdp-icon ico-type-date"></i>\n                    </a>\n                    <div date-picker="ngDialogData.setting.calc_period.accurate.end" view="date" min-view="date" ng-show="pickEnd"></div>\n                </div>\n            </div>\n            <div ng-if="ngDialogData.setting.calc_period.type == \'expression\'">\n                <div class="formula-filter-part mt20">\n                    <div class="formula-edit-part">\n                        <textarea advance-data-formula="" id="formula-str" expression-content="ngDialogData.setting.calc_period.expression" on-blur="repetitionEvents.setExpression(content)" class="input-text-block ng-formula"></textarea>\n                    </div>\n                    <a class="insert-field-name" ng-click="repetitionEvents.insertFieldNameToExpression(fidToName[ngDialogData.setting.date_field_fid])">\u63D2\u5165\u5B57\u6BB5</a>\n                    <button type="button" class="check-formula-grammar" ng-click="repetitionEvents.checkFormulaGrammar(ngDialogData)">\u8BED\u6CD5\u68C0\u67E5</button>\n                </div>\n                <p class="formula-example">\u793A\u4F8B: [\u65E5\u671F]=\'2015-05-01 00:00:00\', \u4E14\u540D\u79F0\u9700\u4E0E\u6240\u9009\u65E5\u671F\u5B57\u6BB5\u540D\u79F0\u76F8\u540C</p>\n            </div>\n        </div><!--end date cycle-->\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'chartRepetition\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveAdvanceAggregator(ngDialogData.field_index,\'repetition\')">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/set-retention.html', '<!-- BDP-20747 \u8FD9\u91CC\u76F4\u63A5\u5199\u7684tab\u4F1A\u53D6\u7EE7\u627F\u94FE\uFF0C\u7EE7\u627F\u94FE\u4E0A\u7684tab\u4E0D\u77E5\u9053\u53D8\u6210\u4E86\u5BF9\u8C61\uFF0C\u5BFC\u81F4\u521D\u59CB\u503C\u9519\u8BEF -->\n<div bindonce="" ng-init="tab = \'1\'">\n    <div class="ngdialog-title">{{ngDialogData.text.title}}</div>\n    <div class="ngdialog-message">\n        <div class="tab-header">\n            <div class="tab-header-wrap">\n                <div class="tab-header-item" ng-class="{\'active\':tab === \'1\' || !tab}">\n                    <a class="cursor-pointer" ng-click="tab=\'1\'">\u57FA\u672C\u8BBE\u7F6E</a>\n                </div>\n                <div class="tab-header-item" ng-class="{\'active\':tab === \'2\'}">\n                    <a class="cursor-pointer" ng-click="tab=\'2\'">\u9AD8\u7EA7\u9009\u9879</a>\n                </div>\n            </div>\n        </div>\n        <div class="tab-content">\n            <div class="tab-pane" ng-class="{\'active\':tab === \'1\' || !tab}">\n                <div class="mt20">\n                    <label class="label-head">{{ngDialogData.text.period}}</label>\n                    <select ng-model="ngDialogData.setting.start.range_type">\n                        <option value="0" ng-selected="ngDialogData.setting.start.range_type===\'0\'">\u56FA\u5B9A\u65F6\u95F4</option>\n                        <option value="1" ng-selected="ngDialogData.setting.start.range_type===\'1\'">\u8303\u56F4\u65F6\u95F4</option>\n                        <option value="2" ng-selected="ngDialogData.setting.start.range_type===\'2\'">\u81EA\u5B9A\u4E49\u65F6\u95F4\u6BB5</option>\n                    </select>\n                    <div class="display-inline-block" ng-if="ngDialogData.setting.start.range_type === \'0\' || ngDialogData.setting.start.range_type === \'1\'">\n                        <div class="display-inline-block mr10">\n                            <select ng-model="ngDialogData.setting.start.granularity">\n                                <option value="day" ng-selected="ngDialogData.setting.start.granularity === \'day\'">\u6309\u65E5</option>\n                                <option value="week" ng-selected="ngDialogData.setting.start.granularity === \'week\'">\u6309\u5468</option>\n                                <option value="month" ng-selected="ngDialogData.setting.start.granularity === \'month\'">\u6309\u6708</option>\n                                <option value="quarter" ng-selected="ngDialogData.setting.start.granularity === \'quarter\'">\u6309\u5B63</option>\n                                <option value="year" ng-selected="ngDialogData.setting.start.granularity === \'year\'">\u6309\u5E74</option>\n                            </select>\n                            <span ng-show="ngDialogData.type === \'retention\'">\u7B2C</span>\n                            <input type="text" class="input-text-block input-number-small" ng-model="ngDialogData.setting.start.range[0]" value="7">\n                            <span ng-show="ngDialogData.type === \'retention\'">{{ngDialogData.setting.start.granularity|date_gran_to_name}}&nbsp;{{ngDialogData.text.typeText}}</span>\n                            <span ng-show="ngDialogData.type === \'activity\'">{{ngDialogData.setting.start.granularity|date_gran_to_name}}<span>\u524D</span>{{ngDialogData.text.typeText}}</span>\n                        </div>\n                        <div class="display-inline-block mr10" ng-show="ngDialogData.setting.start.range_type === \'1\'">\n                            <span>\u5230</span>\n                            <span ng-show="ngDialogData.type === \'retention\'">\u7B2C</span>\n                            <input type="text" class="input-text-block input-number-small" ng-model="ngDialogData.setting.start.range[1]" value="7">\n                            <span ng-show="ngDialogData.type === \'retention\'">{{ngDialogData.setting.start.granularity|date_gran_to_name}}&nbsp;{{ngDialogData.text.typeText}}</span>\n                            <span ng-show="ngDialogData.type === \'activity\'">{{ngDialogData.setting.start.granularity|date_gran_to_name}}<span>\u524D</span>{{ngDialogData.text.typeText}}</span>\n                        </div>\n                    </div>\n                    <div class="display-inline-block pr" ng-if="ngDialogData.setting.start.range_type === \'2\'">\n                        <div class="date-picker display-inline-block">\n                            <input type="text" class="input-text-block m-input" ng-model="ngDialogData.setting.start.date_range[0]" placeholder="{{\'chart.startDate\' | translate }}" date-format="" readonly="readonly" ng-click="pickStart=!pickStart">\n                            <a class="bdp-icon-wrap cursor-pointer" ng-click="pickStart=!pickStart">\n                                <i class="bdp-icon ico-type-date"></i>\n                            </a>\n                            <div date-picker="ngDialogData.setting.start.date_range[0]" view="date" min-view="date" ng-show="pickStart"></div>\n                        </div>\n                        <div class="date-picker display-inline-block">\n                            <input type="text" class="input-text-block m-input" ng-model="ngDialogData.setting.start.date_range[1]" placeholder="{{\'chart.endDate\' | translate }}" date-format="" readonly="readonly" ng-click="pickEnd=!pickEnd">\n                            <a class="bdp-icon-wrap cursor-pointer" ng-click="pickEnd=!pickEnd">\n                                <i class="bdp-icon ico-type-date"></i>\n                            </a>\n                            <div date-picker="ngDialogData.setting.start.date_range[1]" view="date" min-view="date" ng-show="pickEnd"></div>\n                        </div>\n                    </div>\n                    <label ng-if="ngDialogData.type === \'activity\' && ngDialogData.setting.start.range_type === \'1\'">\n                        <input type="checkbox" ng-model="ngDialogData.setting.is_continue" ng-true-value="1" ng-false-value="0" ng-checked="ngDialogData.setting.is_continue == 1">\n                        <span>\u8FDE\u7EED\u6D3B\u8DC3</span>\n                        <div class="bdp-icon-wrap bdp-tooltip top repetition-tooltip">\n                            <i class="bdp-icon ico-info-sign cursor-pointer"></i>\n                            <div class="bdp-tooltip-content">\n                                <div class="content">\n                                    <p>\u52FE\u9009\u8FDE\u7EED\u6D3B\u8DC3\u540E\uFF0C\u5F53\u8BA1\u7B97\u8303\u56F4\u65F6\u95F4\u5185\u6BCF\u4E2A\u8282\u70B9\u540C\u65F6\u6D3B\u8DC3\u65F6\uFF0C\u624D\u7B97\u4F5C\u6D3B\u8DC3\u3002</p>\n                                </div>\n                                <div class="bdp-tooltip-arrow">\n                                    <em></em>\n                                    <span></span>\n                                </div>\n                            </div>\n                        </div>\n                    </label>\n                </div>\n                <div class="mt20" ng-if="ngDialogData.meta.level[0].x[0].data_type !== \'date\'">\n                    <label class="label-head">\u65E5\u671F\u5B57\u6BB5</label>\n                    <select ng-options="field.fid as field.name for field in field_list|filter:{ data_type : \'date\' }" ng-model="ngDialogData.setting.date_field_fid" class="m-input">\n                        <option value="">\u8BF7\u9009\u62E9\u5B57\u6BB5</option>\n                    </select>\n                </div>\n                <div class="mt20" ng-if="ngDialogData.meta.level[0].x[0].data_type !== \'date\'">\n                    <label class="label-head">\u6240\u9009\u65E5\u671F</label>\n                    <select ng-model="ngDialogData.setting.end.range_type">\n                        <option value="0" ng-selected="ngDialogData.setting.end.range_type===\'0\'">\u56FA\u5B9A\u65F6\u95F4</option>\n                        <option value="2" ng-selected="ngDialogData.setting.end.range_type===\'2\'">\u81EA\u5B9A\u4E49\u65F6\u95F4\u6BB5</option>\n                    </select>\n                    <select ng-model="ngDialogData.setting.date_field_type" ng-if="ngDialogData.setting.end.range_type===\'0\'">\n                        <option value="day" ng-selected="ngDialogData.setting.date_field_type === \'day\'">\u6309\u65E5</option>\n                        <option value="week" ng-selected="ngDialogData.setting.date_field_type === \'week\'">\u6309\u5468</option>\n                        <option value="month" ng-selected="ngDialogData.setting.date_field_type === \'month\'">\u6309\u6708</option>\n                        <option value="quarter" ng-selected="ngDialogData.setting.date_field_type === \'quarter\'">\u6309\u5B63</option>\n                        <option value="year" ng-selected="ngDialogData.setting.date_field_type === \'year\'">\u6309\u5E74</option>\n                    </select>\n                    <div class="display-inline-block" ng-if="ngDialogData.setting.end.range_type === \'0\'">\n                        <label class="mr10" ng-if="ngDialogData.setting.date_field_type === \'day\'">\n                            <input type="radio" ng-model="ngDialogData.setting.end.type" value="0">\n                            <span>\u4ECA\u5929</span>\n                        </label>\n                        <label class="mr10" ng-if="ngDialogData.setting.date_field_type === \'day\'">\n                            <input type="radio" ng-model="ngDialogData.setting.end.type" value="1">\n                            <span>\u6628\u5929</span>\n                        </label>\n                        <label class="mr10" ng-if="ngDialogData.setting.date_field_type !== \'day\' && ngDialogData.setting.date_field_type !== \'year\'">\n                            <input type="radio" ng-model="ngDialogData.setting.end.type" value="0">\n                            <span>\u672C</span>{{ngDialogData.setting.date_field_type|date_gran_to_name}}\n                        </label>\n                        <label class="mr10" ng-if="ngDialogData.setting.date_field_type !== \'day\' && ngDialogData.setting.date_field_type !== \'year\'">\n                            <input type="radio" ng-model="ngDialogData.setting.end.type" value="1">\n                            <span>\u4E0A</span>{{ngDialogData.setting.date_field_type|date_gran_to_name}}\n                        </label>\n                        <label class="mr10" ng-if="ngDialogData.setting.date_field_type === \'year\'">\n                            <input type="radio" ng-model="ngDialogData.setting.end.type" value="0">\n                            <span>\u4ECA\u5E74</span>\n                        </label>\n                        <label class="mr10" ng-if="ngDialogData.setting.date_field_type === \'year\'">\n                            <input type="radio" ng-model="ngDialogData.setting.end.type" value="1">\n                            <span>\u53BB\u5E74</span>\n                        </label>\n                        <label class="mr10">\n                            <input type="radio" ng-model="ngDialogData.setting.end.type" value="2">\n                            <span>\u524D</span>\n                            <input type="text" class="input-text-block input-number-small" ng-class="{\'input-disabled\':ngDialogData.setting.end.type != \'2\'}" ng-model="ngDialogData.setting.end.offset" ng-disabled="ngDialogData.setting.end.type != \'2\'">&nbsp;&nbsp;{{ngDialogData.setting.date_field_type|date_gran_to_name}}\n                        </label>\n                    </div>\n                    <div class="display-inline-block pr" ng-if="ngDialogData.setting.end.range_type === \'2\'">\n                        <div class="date-picker display-inline-block">\n                            <input type="text" class="input-text-block m-input" ng-model="ngDialogData.setting.end.date_range[0]" placeholder="{{\'chart.startDate\' | translate }}" date-format="" readonly="readonly" ng-click="pickStart=!pickStart">\n                            <a class="bdp-icon-wrap cursor-pointer" ng-click="pickStart=!pickStart">\n                                <i class="bdp-icon ico-type-date"></i>\n                            </a>\n                            <div date-picker="ngDialogData.setting.end.date_range[0]" view="date" min-view="date" ng-show="pickStart"></div>\n                        </div>\n                        <div class="date-picker display-inline-block">\n                            <input type="text" class="input-text-block m-input" ng-model="ngDialogData.setting.end.date_range[1]" placeholder="{{\'chart.endDate\' | translate }}" date-format="" readonly="readonly" ng-click="pickEnd=!pickEnd">\n                            <a class="bdp-icon-wrap cursor-pointer" ng-click="pickEnd=!pickEnd">\n                                <i class="bdp-icon ico-type-date"></i>\n                            </a>\n                            <div date-picker="ngDialogData.setting.end.date_range[1]" view="date" min-view="date" ng-show="pickEnd"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="mt20">\n                    <label class="label-head">\u6570\u503C\u8BBE\u7F6E</label>\n                    <select ng-model="ngDialogData.setting.aggregator" class="m-input">\n                        <option value="2" ng-selected="ngDialogData.setting.aggregator === \'2\'">{{ngDialogData.text.rate}}</option>\n                        <option value="1" ng-selected="ngDialogData.setting.aggregator === \'1\'">{{ngDialogData.text.num}}</option>\n                    </select>\n                </div>\n            </div>\n            <!--end tab-pane-->\n            <div class="tab-pane advance" ng-class="{\'active\':tab === \'2\'}">\n                <p class="mt20" ng-if="ngDialogData.type === \'retention\'">\u5982\u7559\u5B58\u7387\u8BA1\u7B97\u503C\u5B58\u5728\u591A\u4E2A\u72B6\u6001\uFF0C\u53EF\u4EE5\u5728\u6B64\u6DFB\u52A0\u4F8B\u5916\u5B57\u6BB5\uFF0C\u8BBE\u7F6E\u540E\u7559\u5B58\u7387\u5C06\u4E0D\u53D7\u6B64\u72B6\u6001\u5B57\u6BB5\u7B5B\u9009\u5F71\u54CD</p>\n                <p class="mt20" ng-if="ngDialogData.type === \'activity\'">\u5982\u6D3B\u8DC3\u7387\u8BA1\u7B97\u503C\u5B58\u5728\u591A\u4E2A\u72B6\u6001\uFF0C\u53EF\u4EE5\u5728\u6B64\u6DFB\u52A0\u4F8B\u5916\u5B57\u6BB5\uFF0C\u8BBE\u7F6E\u540E\u6D3B\u8DC3\u7387\u5C06\u4E0D\u53D7\u6B64\u72B6\u6001\u5B57\u6BB5\u7B5B\u9009\u5F71\u54CD</p>\n                <div class="mt10">\n                    <label class="label-head">\u4F8B\u5916\u5B57\u6BB5</label>\n                    <select ng-model="selected_except" ng-options="field.fid as field.name for field in field_list">\n                        <option value="">\u8BF7\u9009\u62E9</option>\n                    </select>\n                    <span class="cursor-pointer display-inline-block mt10" ng-click="retentionEvents.addExceptField(ngDialogData.setting.except_fields,selected_except)">\n                        <i class="bdp-icon ico-plus1"></i>\n                    </span>\n                </div>\n                <div class="block">\n                    <div ng-repeat="fid in ngDialogData.setting.except_fields">\n                        <span>{{fidToName[fid]}}</span>\n                        <span class="cursor-pointer fr" ng-click="retentionEvents.delExceptField(ngDialogData.setting.except_fields,$index)">\n                            <i class="bdp-icon ico-minus1"></i>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <!--end tab-pane-->\n        </div>\n        <!--end tab-content-->\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'chartRetention\')" ng-if="ngDialogData.type == \'retention\'"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <span class="operator-help-link" ng-click="goHelp(\'chartActivity\')" ng-if="ngDialogData.type == \'activity\'"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveAdvanceAggregator(ngDialogData.field_index, ngDialogData.type)">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/set-running.html', '<div bindonce="">\n    <div class="ngdialog-title">\u7D2F\u8BA1\u8BA1\u7B97</div>\n    <div class="ngdialog-message">\n        <div class="mt20">\n            <label class="label-head">\u8BA1\u7B97\u65B9\u5F0F</label>\n            <select ng-model="ngDialogData.setting.method" class="m-input" ng-options="f.type as f.name for f in formulaList">\n            </select>\n        </div>\n        <div class="mt20" ng-show="ngDialogData.canSetPeriod">\n            <label class="label-head">\u91CD\u7F6E\u5468\u671F</label>\n            <select ng-model="ngDialogData.setting.reset_period" class="m-input">\n                <option value="all" ng-selected="ngDialogData.setting.reset_period === \'all\'">\u7A7A</option>\n                <option value="week" ng-if="ngDialogData.meta.x[0].granularity === \'day\'" ng-selected="ngDialogData.setting.reset_period === \'week\'">\u5468</option>\n                <option value="month" ng-if="ngDialogData.meta.x[0].granularity === \'day\' || ngDialogData.meta.x[0].granularity === \'week\'" ng-selected="ngDialogData.setting.reset_period === \'month\'">\u6708</option>\n                <option value="quarter" ng-if="ngDialogData.meta.x[0].granularity === \'day\' || ngDialogData.meta.x[0].granularity === \'week\' || ngDialogData.meta.x[0].granularity === \'month\'" ng-selected="ngDialogData.setting.reset_period === \'quarter\'">\u5B63</option>\n                <option value="year" ng-if="ngDialogData.meta.x[0].granularity !== \'year\'" ng-selected="ngDialogData.setting.reset_period === \'year\'">\u5E74</option>\n            </select>\n        </div>\n        <div class="mt20">\n            <label class="label-head">\u8D77\u59CB\u65E5\u671F</label>\n            <div class="display-inline-block">\n                <label>\n                    <input type="radio" ng-model="ngDialogData.setting.running_start_type" ng-value="0">\n                    <span>\u9ED8\u8BA4</span>\n                </label>\n                <div class="bdp-icon-wrap bdp-tooltip top running-tooltip">\n                    <i class="bdp-icon ico-info-sign cursor-pointer"></i>\n                    <div class="bdp-tooltip-content">\n                        <div class="content">\n                            <p>\u6570\u636E\u8868\u4E2D\u6700\u65E9\u65E5\u671F</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="reset-start">\n                <label>\n                    <input type="radio" ng-model="ngDialogData.setting.running_start_type" ng-value="1">\n                    <span>\u81EA\u5B9A\u4E49</span>\n                </label>\n                <div ng-if="ngDialogData.setting.running_start_type == 1" class="date-picker-abs date-picker pr display-inline-block">\n                    <input type="text" class="input-text-block m-input" ng-model="ngDialogData.setting.running_start_date" date-format="" readonly="readonly" ng-click="pickStart=!pickStart">\n                    <a class="bdp-icon-wrap cursor-pointer" ng-click="pickStart=!pickStart">\n                        <i class="bdp-icon ico-type-date"></i>\n                    </a>\n                    <div date-picker="ngDialogData.setting.running_start_date" view="date" min-view="date" ng-show="pickStart"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'chartRunning\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveAdvanceAggregator(ngDialogData.field_index,\'running\')">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/set-string-field-yoy.html', '<div bindonce="">\n    <div class="ngdialog-title">\u540C\u6BD4/\u73AF\u6BD4\u8BBE\u7F6E</div>\n    <div class="ngdialog-message">\n        <div class="yoy-modal-tab">\n            <ul class="pr">\n                <li ng-click="changeYoyModalIndex(0)" ng-class="{\'active\': yoyModalBodyIndex == 0}">\u666E\u901A</li>\n                <li ng-click="changeYoyModalIndex(1)" ng-class="{\'active\': yoyModalBodyIndex == 1}">\u57FA\u4E8E\u65E5\u671F\u7B5B\u9009</li>\n            </ul>\n        </div>\n        <div class="yoy-modal-body">\n            <div class="yoy-modal-body-normal" ng-show="yoyModalBodyIndex == 0">\n                <div class="clearfix row">\n                    <label class="label-head">\u65E5\u671F\u5B57\u6BB5</label>\n                    <select ng-options="field.fid as field.name for field in dateFields" ng-model="current_formula.yoyQoqSetting.date_field_fid" class="m-input">\n                    </select>\n                    <select ng-model="current_formula.yoyQoqSetting.date_field_type" ng-change="switchYoyGranularity(current_formula.yoyQoqSetting.date_field_type)" class="s-input">\n                        <option value="day" ng-selected="current_formula.yoyQoqSetting.date_field_type === \'day\'">\u6309\u65E5</option>\n                        <option value="week" ng-selected="current_formula.yoyQoqSetting.date_field_type === \'week\'" ng-if="isCustomFixed()">\u6309\u5468</option>\n                        <option value="month" ng-selected="current_formula.yoyQoqSetting.date_field_type === \'month\'" ng-if="isCustomFixed()">\u6309\u6708</option>\n                        <option value="quarter" ng-selected="current_formula.yoyQoqSetting.date_field_type === \'quarter\'" ng-if="isCustomFixed()">\u6309\u5B63</option>\n                        <option value="year" ng-selected="current_formula.yoyQoqSetting.date_field_type === \'year\'" ng-if="isCustomFixed()">\u6309\u5E74</option>\n                    </select>\n                    <select ng-show="[\'day\',\'quarter\'].indexOf(current_formula.yoyQoqSetting.date_field_type) < 0" ng-model="current_formula.yoyQoqSetting.granularity_name" class="s-input">\n                        <option value="{{it.granularity_name}}" ng-repeat="it in customGranularity[current_formula.yoyQoqSetting.date_field_type]" ng-selected="current_formula.yoyQoqSetting.granularity_name == it.name || !it.granularity_name && current_formula.yoyQoqSetting.granularity_name === \'default\'">{{it.name}}</option>\n                    </select>\n                </div>\n                <div class="mt20 clearfix row">\n                    <label class="label-head">\u5BF9\u6BD4\u7C7B\u578B</label>\n                    <select ng-model="current_formula.yoyQoqSetting.type" class="m-input">\n                        <option value="qoq" ng-selected="current_formula.yoyQoqSetting.type === \'qoq\'">{{current_formula.yoyQoqSetting.date_field_type | yoyTypeTranslate }}</option>\n                        <option value="yoy_week" ng-if="current_formula.yoyQoqSetting.date_field_type===\'day\'" ng-selected="current_formula.yoyQoqSetting.type === \'yoy_week\'">\u4E0A\u5468\u540C\u6BD4</option>\n                        <option value="yoy_month" ng-if="current_formula.yoyQoqSetting.date_field_type===\'day\'" ng-selected="current_formula.yoyQoqSetting.type === \'yoy_month\'">\u4E0A\u6708\u540C\u6BD4</option>\n                        <option value="yoy_year" ng-if="current_formula.yoyQoqSetting.date_field_type!==\'year\'" ng-selected="current_formula.yoyQoqSetting.type === \'yoy_year\'">\u53BB\u5E74\u540C\u6BD4</option>\n                        <option value="nodate_custom" ng-selected="current_formula.yoyQoqSetting.type === \'nodate_custom\'">\u81EA\u5B9A\u4E49\u5BF9\u6BD4</option>\n\n                    </select>\n                </div>\n                <div class="mt20 clearfix row">\n                    <label class="label-head">\u6570\u503C\u8BBE\u7F6E</label>\n                    <select ng-model="current_formula.yoyQoqSetting.aggregator" class="m-input">\n                        <option value="1" ng-selected="current_formula.yoyQoqSetting.aggregator === \'1\'">\u589E\u957F\u503C</option>\n                        <option value="2" ng-selected="current_formula.yoyQoqSetting.aggregator === \'2\'">\u589E\u957F\u7387</option>\n                        <option value="3" ng-selected="current_formula.yoyQoqSetting.aggregator === \'3\'">\u5BF9\u6BD4\u503C</option>\n                    </select>\n                </div>\n                <div class="mt20 clearfix row" ng-if="current_formula.yoyQoqSetting.type === \'nodate_custom\'">\n                    <label class="label-head">\u5BF9\u6BD4\u65B9\u5F0F</label>\n                    <select ng-model="current_formula.yoyQoqSetting.compare_type" ng-change="switchCompareType(current_formula.yoyQoqSetting.compare_type)" class="m-input">\n                        <option value="1" ng-selected="current_formula.yoyQoqSetting.compare_type === \'1\'">\u5BF9\u6BD4\u76F8\u5BF9\u65E5\u671F</option>\n                        <option value="2" ng-selected="current_formula.yoyQoqSetting.compare_type === \'2\'">\u5BF9\u6BD4\u56FA\u5B9A\u65E5\u671F</option>\n                    </select>\n                </div>\n                <div class="mt20 clearfix row">\n                    <label class="label-head">\u6240\u9009\u65E5\u671F</label>\n                    <div ng-if="current_formula.yoyQoqSetting.compare_type != \'2\' || current_formula.yoyQoqSetting.type !== \'nodate_custom\'">\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'day\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="0">\n                            <span>\u4ECA\u5929</span>\n                        </label>\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'day\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="1">\n                            <span>\u6628\u5929</span>\n                        </label>\n\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'week\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="0">\n                            <span>\u672C\u5468</span>\n                        </label>\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'week\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="1">\n                            <span>\u4E0A\u5468</span>\n                        </label>\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'month\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="0">\n                            <span>\u672C\u6708</span>\n                        </label>\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'month\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="1">\n                            <span>\u4E0A\u6708</span>\n                        </label>\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'quarter\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="0">\n                            <span>\u672C\u5B63\u5EA6</span>\n                        </label>\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'quarter\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="1">\n                            <span>\u4E0A\u5B63\u5EA6</span>\n                        </label>\n\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'year\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="0">\n                            <span>\u4ECA\u5E74</span>\n                        </label>\n                        <label class="mr8" ng-if="current_formula.yoyQoqSetting.date_field_type === \'year\'">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="1">\n                            <span>\u53BB\u5E74</span>\n                        </label>\n                        <label class="mr8">\n                            <input type="radio" ng-model="current_formula.yoyQoqSetting.end.type" value="2">\n                            <span>\u524D</span>\n                            <input type="text" class="input-text-block input-number-small" ng-class="{\'input-disabled\':current_formula.yoyQoqSetting.end.type != \'2\'}" ng-model="current_formula.yoyQoqSetting.end.offset" ng-disabled="current_formula.yoyQoqSetting.end.type != \'2\'">{{current_formula.yoyQoqSetting.date_field_type|date_gran_to_name}}\n                        </label>\n                        <p class="actual-date-tip">{{yoyQoqDate}}</p>\n                    </div>\n                    <div ng-if="current_formula.yoyQoqSetting.compare_type == \'2\' && current_formula.yoyQoqSetting.type === \'nodate_custom\'">\n                        <div class="date-filter-wrap input-value-wrap fl">\n                            <div class="date-filter-wrap-content clearfix" ng-click="dateRangShow = !dateRangShow">\n                                <div class="input-date-value-wrap fl pr8">\n                                    <input class="input-value input-text-block" type="text" ng-model="current_formula.yoyQoqSetting.select_date_range.start" date-format="" readonly="true">\n                                </div>\n                                <div class="input-date-value-wrap fl pr8">\n                                    <input class="input-value input-text-block" type="text" ng-model="current_formula.yoyQoqSetting.select_date_range.end" date-format="" readonly="true">\n                                </div>\n                            </div>\n                            <div ng-show="dateRangShow" class="date-picker-content date-picker-modal fl pa z1" start-end-date="" start-date="current_formula.yoyQoqSetting.select_date_range.start" end-date="current_formula.yoyQoqSetting.select_date_range.end" date-rang-show="dateRangShow"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="mt20 clearfix row" ng-if="current_formula.yoyQoqSetting.type === \'nodate_custom\'">\n                    <div ng-if="current_formula.yoyQoqSetting.compare_type == \'1\'">\n                        <label class="label-head">\u5BF9\u6BD4\u65E5\u671F</label>\n                        <span>\u6240\u9009\u65E5\u671F\u7684\u524D</span>\n                        <input type="text" class="input-text-block input-number-small" ng-model="current_formula.yoyQoqSetting.start.offset_to_end">\n                        {{current_formula.yoyQoqSetting.date_field_type|date_gran_to_name}}\n                    </div>\n                    <div class="row" ng-if="current_formula.yoyQoqSetting.compare_type == \'2\'">\n                        <label class="label-head">\u5BF9\u6BD4\u65E5\u671F</label>\n                        <div class="date-filter-wrap input-value-wrap fl">\n                            <div class="date-filter-wrap-content clearfix" ng-click="dateRangShow = !dateRangShow">\n                                <div class="input-date-value-wrap fl pr8">\n                                    <input class="input-value input-text-block" type="text" ng-model="current_formula.yoyQoqSetting.compare_date_range.start" date-format="" readonly="true">\n                                </div>\n                                <div class="input-date-value-wrap fl pr8">\n                                    <input class="input-value input-text-block" type="text" ng-model="current_formula.yoyQoqSetting.compare_date_range.end" date-format="" readonly="true">\n                                </div>\n                            </div>\n                            <div ng-show="dateRangShow" class="date-picker-content date-picker-modal fl pa z1" start-end-date="" start-date="current_formula.yoyQoqSetting.compare_date_range.start" end-date="current_formula.yoyQoqSetting.compare_date_range.end" date-rang-show="dateRangShow"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="yoy-modal-body-date" ng-show="yoyModalBodyIndex == 1">\n                <div class="clearfix row">\n                    <label>\n                        <span class="label-head">\u65E5\u671F\u5B57\u6BB5</span>\n                        <select ng-model="yoyQoqDateSetting.date_field_fid" ng-options="filter.fid as filter.name for filter in dateFields" ng-change="getCmpDateRange(yoyQoqDateSetting.date_field_fid)"></select>\n                    </label>\n                </div>\n                <div class="mt20 clearfix row">\n                    <label>\n                        <span class="label-head">\u5BF9\u6BD4\u7C7B\u578B</span>\n                        <select ng-model="yoyQoqDateSetting.compare_method" ng-change="getCmpDateRange(yoyQoqDateSetting.date_field_fid)">\n                            <option value="0">\u540C\u6BD4</option>\n                            <option value="1">\u73AF\u6BD4</option>\n                            <option value="2">\u5BF9\u6BD4\u76F8\u5BF9\u65E5\u671F</option>\n                            <option value="3">\u81EA\u5B9A\u4E49</option>\n                        </select>\n                    </label>\n                    <select ng-show="yoyQoqDateSetting.compare_method == 0" ng-model="yoyQoqDateSetting.filter_type" ng-change="getCmpDateRange(yoyQoqDateSetting.date_field_fid)">\n                        <option value="filter_yoy_year">\u53BB\u5E74\u540C\u671F</option>\n                        <option value="filter_yoy_month">\u4E0A\u6708\u540C\u671F</option>\n                        <option value="filter_yoy_week">\u4E0A\u5468\u540C\u671F</option>\n                    </select>\n                    <label class="target-date-range" ng-show="yoyQoqDateSetting.compare_method == 2">\n                        <span class="label-head">\u76EE\u6807\u65E5\u671F\u8303\u56F4</span>\n                        <select class="target-date-relative-type" ng-model="yoyQoqDateSetting.relative_type" ng-change="getCmpDateRange(yoyQoqDateSetting.date_field_fid)">\n                            <option value="0">\u524D\u79FB</option>\n                            <option value="1">\u540E\u79FB</option>\n                        </select>\n                        <input class="target-date-relative-value" input-number="" data-nm-type="positiveInt" type="number" min="1" ng-model="yoyQoqDateSetting.relative_value" ng-change="yoyQoqDateSetting.relative_value /> 0 && getCmpDateRange(yoyQoqDateSetting.date_field_fid)">\n                        <select class="target-date-field-type" ng-model="yoyQoqDateSetting.date_field_type" ng-change="getCmpDateRange(yoyQoqDateSetting.date_field_fid)">\n                            <option value="year">\u5E74</option>\n                            <option value="month">\u6708</option>\n                            <option value="week">\u5468</option>\n                            <option value="day">\u65E5</option>\n                            <option value="hour">\u5C0F\u65F6</option>\n                        </select>\n                    </label>\n                </div>\n                <div class="mt20 clearfix row">\n                    <span class="label-head">\u5F53\u524D\u65E5\u671F\u8303\u56F4</span>\n                    <div class="display-inline-block" ng-if="!yoyQoqDateSetting.select_date_range.start && !yoyQoqDateSetting.select_date_range.end">\u5168\u90E8\u65F6\u95F4</div>\n                    <div class="display-inline-block" ng-if="yoyQoqDateSetting.select_date_range.start || yoyQoqDateSetting.select_date_range.end">\n                        <span>{{removeHour(\'select_date_range\', \'start\')}}</span>\n                        <span class="sep"> ~ </span>\n                        <span>{{removeHour(\'select_date_range\', \'end\')}}</span>\n                    </div>\n                </div>\n                <div class="mt20 clearfix row" ng-if="yoyQoqDateSetting.compare_method && yoyQoqDateSetting.compare_method != 3">\n                    <span class="label-head">\u5BF9\u6BD4\u65E5\u671F\u8303\u56F4</span>\n                    <div class="display-inline-block" ng-if="yoyQoqDateSetting.$filterOptionType !== \'expression\' && !yoyQoqDateSetting.select_date_range.start && !yoyQoqDateSetting.select_date_range.end">\u5168\u90E8\u65F6\u95F4</div>\n                    <div class="display-inline-block" ng-if="yoyQoqDateSetting.$filterOptionType === \'expression\' && yoyQoqDateSetting.compare_date_range.start === null && yoyQoqDateSetting.compare_date_range.end === null">\n                        <span class="cr">\u65E0\u6CD5\u83B7\u5F97\u5BF9\u6BD4\u65E5\u671F</span>\n                        <div class="bdp-icon-wrap bdp-tooltip top">\n                            <i class="bdp-icon ico-info-sign cursor-pointer"></i>\n                            <div class="bdp-tooltip-content">\n                                <div class="content">\n                                    <p>\u5F53\u524D\u65E5\u671F\u7684\u7B5B\u9009\u6761\u4EF6\u4E0D\u5141\u8BB8\u57FA\u4E8E\u8868\u8FBE\u5F0F</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="display-inline-block" ng-if="yoyQoqDateSetting.compare_date_range.start || yoyQoqDateSetting.compare_date_range.end">\n                        <span>{{removeHour(\'compare_date_range\', \'start\')}}</span>\n                        <span class="sep"> ~ </span>\n                        <span>{{removeHour(\'compare_date_range\', \'end\')}}</span>\n                    </div>\n                </div>\n                <div class="mt20 clearfix row" ng-if="yoyQoqDateSetting.compare_method == 3">\n                    <span class="label-head">\u5BF9\u6BD4\u65E5\u671F\u8303\u56F4</span>\n                    <span class="compare-date-range" ng-click="dateRangShow = !dateRangShow">{{removeHour(\'compare_date_range\', \'start\')}}</span>\n                    <span class="sep"> ~ </span>\n                    <span class="compare-date-range" ng-click="dateRangShow = !dateRangShow">{{removeHour(\'compare_date_range\', \'end\')}}</span>\n                    <div ng-show="dateRangShow" class="date-picker-content date-picker-modal fl pa z1" start-end-date="" start-date="yoyQoqDateSetting.compare_date_range.start" end-date="yoyQoqDateSetting.compare_date_range.end" date-rang-show="dateRangShow"></div>\n                </div>\n                <div class="mt20 clearfix row">\n                    <span class="label-head">\u6570\u503C\u8BBE\u7F6E</span>\n                    <select ng-if="yoyQoqDateSetting.compare_method==0" ng-model="yoyQoqDateSetting.aggregator">\n                        <option value="1">\u540C\u6BD4\u589E\u957F\u503C</option>\n                        <option value="2">\u540C\u6BD4\u589E\u957F\u7387</option>\n                        <option value="3">\u5BF9\u6BD4\u65E5\u671F\u503C</option>\n                    </select>\n                    <select ng-if="yoyQoqDateSetting.compare_method==1" ng-model="yoyQoqDateSetting.aggregator">\n                        <option value="1">\u73AF\u6BD4\u589E\u957F\u503C</option>\n                        <option value="2">\u73AF\u6BD4\u589E\u957F\u7387</option>\n                        <option value="3">\u5BF9\u6BD4\u65E5\u671F\u503C</option>\n                    </select>\n                    <select ng-if="yoyQoqDateSetting.compare_method != 0 && yoyQoqDateSetting.compare_method != 1" ng-model="yoyQoqDateSetting.aggregator">\n                        <option value="1">\u589E\u957F\u503C</option>\n                        <option value="2">\u589E\u957F\u7387</option>\n                        <option value="3">\u5BF9\u6BD4\u65E5\u671F\u503C</option>\n                    </select>\n                </div>\n                <div class="mt20 clearfix row"><label><input type="checkbox" ng-model="yoyQoqDateSetting.allow_dash" class="mr4-i"><span>\u5141\u8BB8\u7528\u6237\u5728\u4EEA\u8868\u76D8\u8C03\u6574\u5BF9\u6BD4\u65E5\u671F\u8303\u56F4</span></label></div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'dateYoy\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveyoyQoqSetting()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog();">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/field-action/string-data-show-type.html', '<ul mouseover-event-active="field.show_formula" mouseover-hide="" mouseover-hide-cls="J-mouseover-hide" mouseover-parent-cls="J-parent-mouseover-cls" class="text-left">\n    <li class="J-parent-mouseover-cls more-list-outer">\n        <a class="cursor-pointer more" ng-class="{\'active\':field.data_show_type == \'text\' || !field.data_show_type}" ng-click="setDataShowType($event,axis,field,\'text\')">\n            <span>\u6587\u672C</span>\n            <i class="bdp-icon ico-triangle-right"></i>\n        </a>\n        <ul class="J-mouseover-hide more-list sort-method-list">\n            <li>\n                <a class="cursor-pointer" ng-click="setLinkField($event)">\u8DF3\u8F6C\u8BBE\u7F6E</a>\n            </li>\n        </ul>\n    </li>\n    <li ng-if="showTableImg">\n        <a class="cursor-pointer" ng-class="{\'active\':field.data_show_type == \'img\'}" ng-click="setDataShowType($event,axis,field,\'img\')">\u56FE\u7247</a>\n    </li>\n</ul>');
    $templateCache.put('/static/chart-edit/field-action/time-predicted.html', '<div bindonce="">\n    <div class="ngdialog-title">\n        \u9884\u6D4B\u8BBE\u7F6E - {{(field.nick_name || field.name) + \'\uFF08\' + formulaKeyMap[field.aggregator] + \'\uFF09\'}}\n    </div>\n    <div class="ngdialog-message">\n        <p class="predict-intro font-text-tip">\u4F7F\u7528ARIMA\u7B97\u6CD5\u5BF9\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u8FDB\u884C\u9884\u6D4B\u5206\u6790</p>\n        <div class="box_highlight">\n            <div class="predict-form">\n                <dl class="form-item clearfix">\n                    <dt class="form-title font-text-tip">\u9884\u6D4B\u8303\u56F4</dt>\n                    <dd class="form-content">\n                        <span>\u9884\u6D4B\u4E4B\u540E</span>\n                        <input class="w24" type="text" maxlength="3" ng-model="form.predictRange.val">\n                        <span bo-text="granularityText"></span>\n                    </dd>\n                </dl>\n                <dl class="form-item clearfix">\n                    <dt class="form-title font-text-tip">\u771F\u5B9E\u6570\u636E\u8303\u56F4</dt>\n                    <dd class="form-content">\n                        <div>\n                            <select ng-model="form.trainRange.selVal" ng-options="item.val as item.key for item in form.trainRange.option" ng-change="changeSelect(form.trainRange)"></select>\n                        </div>\n                        <div class="mt8 clearfix" ng-if="form.trainRange.showCusSet">\n                            <div class="input-date-value-wrap fl" ng-click="dateRangShow = !dateRangShow">\n                                <input class="input-value input-text-block" type="text" ng-model="form.trainRange.start" date-format="" readonly="true">\n                                <i class="bdp-icon ico-calendar"></i>\n                            </div>\n                            <span class="ml8 mr8 fl">\u81F3</span>\n                            <div class="input-date-value-wrap fl" ng-click="dateRangShow = !dateRangShow">\n                                <input class="input-value input-text-block" type="text" ng-model="form.trainRange.end" date-format="" readonly="true">\n                                <i class="bdp-icon ico-calendar"></i>\n                            </div>\n                            <div ng-show="dateRangShow" class="date-picker-content date-picker-modal fl pa z1" start-end-date="" start-date="form.trainRange.start" end-date="form.trainRange.end" date-rang-show="dateRangShow"></div>\n                        </div>\n                    </dd>\n                </dl>\n                <dl class="form-item clearfix">\n                    <dt class="form-title font-text-tip">\u6570\u636E\u5904\u7406</dt>\n                    <dd class="form-content">\n                        <label class="cursor-pointer">\n                            <input type="checkbox" ng-model="form.dataProcess">\n                            <span>\u4F7F\u75280\u586B\u5145\u7F3A\u5931\u7684\u6570\u636E\u70B9</span>\n                        </label>\n                    </dd>\n                </dl>\n                <dl class="form-item clearfix">\n                    <dt class="form-title font-text-tip">\n                       \u7F6E\u4FE1\u533A\u95F4\n                    </dt>\n                    <dd class="form-content">\n                        <div>\n                            <label class="cursor-pointer mr16">\n                                <input type="radio" ng-model="form.section.show" ng-value="true">\n                                \u663E\u793A\n                            </label>\n                            <label class="cursor-pointer">\n                                <input type="radio" ng-model="form.section.show" ng-value="false">\n                                \u4E0D\u663E\u793A\n                            </label>\n                        </div>\n                        <div class="mt4" ng-if="form.section.show">\n                            <span>\u8986\u76D6</span>\n                            <input class="w24" type="text" maxlength="2" ng-model="form.section.range">\n                            <span>%\u7684\u53EF\u80FD\u6027</span>\n                        </div>\n                    </dd>\n                </dl>\n                <dl class="form-item clearfix">\n                    <dt class="form-title font-text-tip">\n                       \u9884\u6D4B\u6A21\u5F0F\n                    </dt>\n                    <dd class="form-content">\n                        <select ng-model="form.solver.val" ng-options="item.val as item.key for item in form.solver.option"></select>\n                        <i class="bdp-icon ico-info-sign" bdp-tooltip="modeTips" tooltip-placement="right"></i>\n                    </dd>\n                </dl>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="savePredict()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/free-drill-setting/free-drill-setting.html', '<div bindonce="">\n    <div class="ngdialog-title">\u81EA\u7531\u5206\u6790\u7EF4\u5EA6\u8BBE\u7F6E</div>\n    <div class="ngdialog-message">\n        <div class="bd">\n            <label class="display-inline-block mb16 mr16 cursor-pointer">\n                <input type="radio" ng-value="false" ng-change="changeFreeDrillLimited(false)" ng-model="free_drill_limited"> \u5168\u90E8\u7EF4\u5EA6\u5141\u8BB8\u81EA\u7531\u5206\u6790\n            </label>\n            <label class="display-inline-block mb16 cursor-pointer">\n                <input type="radio" ng-value="true" ng-change="changeFreeDrillLimited(true)" ng-model="free_drill_limited"> \u4EC5\u90E8\u5206\u7EF4\u5EA6\u5141\u8BB8\u81EA\u7531\u5206\u6790\n            </label>\n            <div class="bg-block clearfix setting-block" ng-class="{\'disable\': !free_drill_limited}">\n                <!-- \u5B57\u6BB5 \u533A\u57DF-->\n                <div class="table-field-list block-shadow-right">\n                    <div class="block-head">\n                        <p class="nowrap">\u53EF\u9009\u7EF4\u5EA6</p>\n                    </div>\n\n                    <div class="sbd">\n                        <div class="query-box auto no-margin">\n                            <input type="text" class="query-text" ng-model="query_tpl" bdp-local-query="optionalFreeDrillFields">\n                        </div>\n                        <ul ng-show="!showLoading" class="field-list">\n                            <li ng-repeat="field in optionalFreeDrillFields track by $index" ng-init="fieldIndex = $index" ng-click="show_edit = !show_edit" ng-hide="field.hide_by_query || freeDrillFieldIds.indexOf(field.fid) > -1" class="optional-field" ng-mouseenter="field.justshowme = true" ng-mouseleave="field.justshowme = false" title="{{field.name}}">\n                                <i class="bdp-icon ico-type-{{field.ico_type}}" ng-class="{\'ico-type-{{field.ico_type}}-orange\':field.formula, \'-ml\': field.made_by_ml && field.formula}"></i>\n                                <span class="data-tag nowrap" field-set-tooltip="field" tooltip-placement="top-left" ng-if="tbType != \'public\'" ng-class="{\'border-bottom-5182E4\': (field.original_name != field.name || field.remark)}" ng-bind="field.name"></span>\n                                <span class="data-tag nowrap" ng-if="tbType == \'public\'" ng-bind="field.name"></span>\n                                <a class="add cursor-pointer" ng-click="addFreeDrillField($index)">\u6DFB\u52A0</a>\n                            </li>\n                        </ul>\n                        \n                        <div class="bar">\n                            <a class="cursor-pointer cr-bdp" ng-click="addAllOptionalFields()">\u5168\u90E8\u6DFB\u52A0</a>\n                        </div>\n                    </div>\n                </div>\n                <div class="add-list">\n                    <div ng-if="freeDrillFields && freeDrillFields.length > 0">\n                        <div class="block-head">\n                            <p class="nowrap">\u4EE5\u4E0B\u7EF4\u5EA6\u5141\u8BB8\u7528\u6237\u5728\u4EEA\u8868\u76D8\u8FDB\u884C\u81EA\u7531\u5206\u6790</p>\n                        </div>\n                        <div class="sbd br2">\n                            <div class="query-box auto ml24 mr24 mb4">\n                                <input type="text" class="query-text" ng-model="query_tpl2" bdp-local-query="freeDrillFields">\n                            </div>\n                            <ul class="user-select-none" ui-sortable="sortFreeDrillFields" ng-model="freeDrillFields">\n                                <li class="nowrap dropdown-item J-sortable-freedrill-field" ng-repeat="item in freeDrillFields track by $index" ng-hide="item.hide_by_query">\n                                    <p class="name">\n                                        <a class="remove cursor-pointer" ng-click="deleteFreeDrillField($index)">\u5220\u9664</a>\n                                        <i class="bdp-icon ico-order cursor-move"></i>\n                                        <span class="field-name nowrap" title="{{item.name}}">{{item.name}}</span>\n                                    </p>\n                                </li>\n                            </ul>\n                            <div class="bar"> \n                                <a class="cursor-pointer cr-bdp" ng-click="deleteAllDrillFields()">\u5168\u90E8\u5220\u9664</a></div>\n                        </div>\n                    </div>\n                    <div class="add-list-none" ng-if="!freeDrillFields || freeDrillFields.length == 0">\u4ECE\u5DE6\u4FA7\u5217\u8868\u9009\u62E9\u6DFB\u52A0</div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="saveFreeDrillSetting()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/gauge-goal/gauge-goal-setting.html', '<div bindonce="">\n    <div class="ngdialog-title">\u8BBE\u7F6E\u76EE\u6807\u503C</div>\n    <div class="ngdialog-message">\n        <div class="row">\n            <select ng-model="gaugeSetting.goal.value_type" ng-options="p.type as p.name for p in lineType">\n            </select>\n            <select class="field-name-select" ng-if="gaugeSetting.goal.value_type==\'calculate\'" ng-model="gaugeSetting.goal.fid" ng-change="canAddFormula(gaugeSetting.goal.fid)" ng-options="field.fid as field.name for field in fields" style="max-width: 5em">\n                <option value="">\u8BF7\u9009\u62E9\u5B57\u6BB5</option>\n            </select>\n            <input type="text" ng-model="gaugeSetting.goal.value" ng-if="gaugeSetting.goal.value_type==\'constant\'">\n            <select ng-if="gaugeSetting.goal.value_type==\'calculate\' && gaugeSetting.goal.is_new" ng-model="gaugeSetting.goal.formula" ng-options="f.type as f.name for f in calcuType"></select>\n        </div>\n        <div class="row mt10">\n            <label>\n                <span>\u5C0F\u6570\u4F4D\u6570</span>\n                <input type="number" input-number="" data-nm-type="natural" ng-model="gaugeSetting.goal.digit" style="width:32px">\n            </label>\n\n            <label>\n                <input type="checkbox" name="" ng-model="gaugeSetting.goal.millesimal">\n                <span>\u4F7F\u7528\u5343\u4F4D\u5206\u9694\u7B26</span>\n            </label>\n        </div>\n\n        <div class="row mt10">\n            <span>\u6570\u503C\u5355\u4F4D</span>\n            <select ng-if="language == \'zh\'" class="num-unit" ng-model="gaugeSetting.goal.unit">\n                <option value="" ng-selected="!gaugeSetting.goal.unit">\u81EA\u52A8</option>\n                <option value="1" ng-selected="gaugeSetting.goal.unit == 1">\u65E0</option>\n                <option value="10000" ng-selected="gaugeSetting.goal.unit == 10000">\u4E07</option>\n                <option value="100000000" ng-selected="gaugeSetting.goal.unit == 100000000">\u4EBF</option>\n                <option value="1000" ng-selected="gaugeSetting.goal.unit == 1000">k</option>\n                <option value="1000000" ng-selected="gaugeSetting.goal.unit == 1000000">M</option>\n                <option value="1000000000" ng-selected="gaugeSetting.goal.unit == 1000000000">G</option>\n            </select>\n            <select ng-if="language == \'en\'" class="num-unit" ng-model="gaugeSetting.goal.unit">\n                <option value="" ng-selected="!gaugeSetting.goal.unit">Automatic</option>\n                <option value="1" ng-selected="gaugeSetting.goal.unit == 1">None</option>\n                <option value="1000" ng-selected="gaugeSetting.goal.unit == 1000">k</option>\n                <option value="1000000" ng-selected="gaugeSetting.goal.unit == 1000000">M</option>\n                <option value="1000000000" ng-selected="gaugeSetting.goal.unit == 1000000000">G</option>\n            </select>\n        </div>\n        \n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="lazySaveGauge(gaugeSetting,\'goal\')">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/gauge-goal/gauge_setting.html', '<div class="row no-margin">\n    <label class="label-head">\u6807\u9898</label>\n    <input ng-model="showGaugeSetting.name" type="text" class="input-text-block l-input" ng-blur="lazySaveGauge(showGaugeSetting,\'title\')" ng-keyup="isEnterKey($event,showGaugeSetting,\'title\')">\n</div>\n<div class="row">\n    <label class="label-head">\u5355\u4F4D</label>\n    <input ng-model="showGaugeSetting.unit" type="text" class="input-text-block l-input" ng-blur="lazySaveGauge(showGaugeSetting,\'unit\')" ng-keyup="isEnterKey($event,showGaugeSetting,\'unit\')">\n</div>\n<div class="row">\n    <label class="label-head">\u76EE\u6807\u503C</label>\n    <span class="nowrap display-inline-block vm chart-gauge-value" ng-if="showGaugeSetting.goal.value_type===\'constant\'">{{showGaugeSetting.goal.value}}</span>\n    <span class="nowrap gauge-calc-name" ng-if="showGaugeSetting.goal.value_type===\'calculate\'" title="{{showGaugeSetting.goal.field_name}}{{showGaugeSetting.goal.formula | plot_line_calc}}">\n        {{showGaugeSetting.goal.field_name}}\n        {{showGaugeSetting.goal.formula | plot_line_calc}}\n    </span>\n    <a class="bdp-icon-wrap fr cursor-pointer mt4" ng-click="goalSetting()">\n        <i class="bdp-icon ico-edit"></i>\n    </a>\n</div>\n<div class="row">\n    <lable class="label-head gauge-label-head">\u5B8C\u6210\u7387\u5C0F\u6570\u4F4D\u6570</lable>\n    <input type="number" ng-model="showGaugeSetting.rateDigit" input-number="" data-nm-type="natural" max="4" min="0" class="s-input ml8" ng-blur="lazySaveGauge(showGaugeSetting,\'rateDigit\')" ng-keyup="isEnterKey($event,showGaugeSetting,\'rateDigit\')">\n</div>\n');
    $templateCache.put('/static/chart-edit/mark-point/mark-point-modal.html', '<div bindonce="">\n    <div class="ngdialog-title">\u8BBE\u7F6E\u6807\u6CE8</div>\n    <div class="nick-model-bd">\n        <div ng-if="type==\'create\'">\n            <p class="hd">\u9009\u4E2D\u6570\u636E\u9879</p>\n        </div>\n\n        <p class="hd">\u6807\u6CE8\u5185\u5BB9</p>\n        <div>\n            <div class="bd-form">\n                <textarea msd-elastic="" class="mark-point-textarea" ng-model="point.comment"></textarea>\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="save()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/mark-point/mark-point-tooltip.html', '<div class="mark-point-wrap" bindonce="">\n    <div ng-repeat="item in markPoints" class="hchart-mark-point" style="left:{{item.pos.left}}px;top:{{item.pos.top}}px">\n        <i class="bdp-icon ico-comment" ng-click="setTooltipPos($event, item)" ng-show="!item.show"></i>\n        <div class="popover mark-point-tooltip" ng-class="{\'top\': item.popover.pos === \'top\',\'bottom\': item.popover.pos === \'bottom\',}" ng-show="item.show" ng-style="item.posStyle">\n            <i class="bdp-icon ico-cancel close" ng-click="item.show=false" title="\u5173\u95ED"></i>\n            <div class="popover-inner">\n                <div class="popover-content" ng-style="item.widthStyle">\n                    <div class="tooltip-hd text-left" ng-if="mode==\'edit\'">\u6570\u636E\u6807\u6CE8</div>\n                    <div class="tooltip-bd text-left" ng-bind="item.pointModel.comment"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/plotline/chart-plot-line.html', '<div class="sub-block">\n    <div class="block-header" ng-class="{\'no-margin\':!showPlotLines.length}">\n        <span>\u8F85\u52A9\u7EBF</span><span ng-show="chart_ops.chart_type === \'C250\'">(<span>\u4E3B\u5750\u6807\u8F74</span>)</span>\n        <a class="bdp-icon-wrap hd-icon" ng-click="setPlotLine(\'y\')">\n            <i class="bdp-icon ico-edit"></i>\n        </a>\n    </div>\n    <div class="block-body" ng-class="{\'no-padding\':!showPlotLines.length}">\n        <ul class="plot-lines" ng-if="!!showPlotLines.length || !!showPlotLinesX.length">\n            <!-- \u6A2A\u5411\u8F85\u52A9\u7EBF -->\n            <li ng-repeat="line in showPlotLines">\n                <!--\u8FD8\u8981\u8003\u8651\u94BB\u53D6\u56FE\u8868-->\n                    <div ng-if="line.value_type === \'constant\'" title="{{line.name}}{{line.value}}">\n                        <span>{{line.name}}</span>\n                        <span>{{line.value}}</span>\n                    </div>\n                    <div ng-if="line.value_type === \'calculate\'">\n                        <span title="{{line.name}}">{{line.name}}</span>\n                        <span ng-repeat="f in originFields" ng-if="f.uniq_id == line.uniq_id" title="{{f.alias_name}}">{{f.alias_name}}</span>\n                        <span title="{{line.formula | plot_line_calc}}" class="last">{{line.formula | plot_line_calc}}</span>\n                    </div>\n            </li>\n            <!-- \u7EB5\u5411\u8F85\u52A9\u7EBF -->\n            <li ng-repeat="line in showPlotLinesX" ng-if="selected_type === \'C280\' ">\n                    <div ng-if="line.value_type === \'constant\'" title="{{line.name}}{{line.value}}">\n                        <span>{{line.name}}</span>\n                        <span>{{line.value}}</span>\n                    </div>\n                    <div ng-if="line.value_type ===\'calculate\'">\n                        <span title="{{line.name}}">{{line.name}}</span>\n                        <span ng-repeat="f in originFieldsX" ng-if="f.uniq_id == line.uniq_id" title="{{f.alias_name}}">{{f.alias_name}}</span>\n                        <span title="{{line.formula | plot_line_calc}}" class="last">{{line.formula | plot_line_calc}}</span>\n                    </div>\n            </li>\n        </ul>\n    </div>\n</div>\n<div class="sub-block" ng-if="selected_type && selected_type === \'C250\' && !chart_ops.meta.level[drill_level].zero_aligned">\n    <div class="block-header" ng-class="{\'no-margin\':!showPlotLinesRight.length}">\n        <span>\u8F85\u52A9\u7EBF</span><span>(<span>\u6B21\u5750\u6807\u8F74</span>)</span>\n        <a class="bdp-icon-wrap hd-icon" ng-click="setPlotLine(\'y_optional\')">\n            <i class="bdp-icon ico-edit"></i>\n        </a>\n    </div>\n    <div class="block-body" ng-class="{\'no-padding\':!showPlotLinesRight.length}">\n        <ul class="plot-lines" ng-if="!!showPlotLinesRight.length">\n            <li ng-repeat="line in showPlotLinesRight">\n                <!--\u8FD8\u8981\u8003\u8651\u94BB\u53D6\u56FE\u8868-->\n                <div ng-if="line.value_type === \'constant\'" title="{{line.name}}{{line.value}}">\n                    <span>{{line.name}}</span>\n                    <span>{{line.value}}</span>\n                </div>\n                <div ng-if="line.value_type==\'calculate\'">\n                    <span title="{{line.name}}">{{line.name}}</span>\n                    <span ng-repeat="f in originFieldsRight" ng-if="f.uniq_id == line.uniq_id" title="{{f.alias_name}}">{{f.alias_name}}</span>\n                    <span title="{{line.formula | plot_line_calc}}" class="last">{{line.formula | plot_line_calc}}</span>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/plotline/chart-plotline-numerical-format.html', '<div bindonce="">\n    <div class="ngdialog-title">\n        <span>\u8BBE\u7F6E\u8F85\u52A9\u7EBF\u6570\u503C\u663E\u793A\u683C\u5F0F</span><span class="cur-plot-line-name nowrap" title="{{ngDialogData.labelName}}">{{ngDialogData.labelName}}</span>\n    </div>\n    <div class="ngdialog-message">\n        <div class="numerical-format-row">\n            <label class="cursor-pointer row-label">\n                <input type="radio" ng-model="numericalData.type" value="auto"><span class="ml4">\u81EA\u52A8</span>\n            </label>\n        </div>\n        <div class="numerical-format-row">\n            <label class="cursor-pointer row-label">\n                <input type="radio" ng-model="numericalData.type" value="num"><span class="ml4">\u663E\u793A\u4E3A\u6570\u503C</span>\n            </label>\n            <div class="numerical-format-sub" ng-class="{\'format-row-disable\': numericalData.type != \'num\'}">\n                <span>\u5C0F\u6570\u4F4D\u6570</span>\n                <input type="number" class="row-input" ng-model="numericalData.num.digit" ng-disabled="numericalData.type != \'num\'">\n                <label class="cursor-pointer row-label">\n                    <input type="checkbox" class="row-input" ng-model="numericalData.num.millesimal" ng-disabled="numericalData.type != \'num\'"><span class="ml4">\u4F7F\u7528\u5343\u4F4D\u5206\u9694\u7B26</span>\n                </label>\n            </div>\n            <div class="numerical-format-sub">\n                <span>\u6570\u503C\u5355\u4F4D</span>\n                <select class="row-select" ng-model="numericalData.num.unit" ng-options="opt.unit as opt.text for opt in numericalData.chartMetricOpt" ng-disabled="numericalData.type != \'num\'"></select>\n            </div>\n        </div>\n        <div class="numerical-format-row">\n            <label class="cursor-pointer" row-label="">\n                <input type="radio" ng-model="numericalData.type" value="percent"><span class="ml4">\u663E\u793A\u4E3A\u767E\u5206\u6570</span>\n            </label>\n            <div class="numerical-format-sub" ng-class="{\'format-row-disable\': numericalData.type != \'percent\'}">\n                <span>\u5C0F\u6570\u4F4D\u6570</span>\n                <input type="number" class="row-input" ng-model="numericalData.percent.digit" ng-disabled="numericalData.type != \'percent\'">\n            </div>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="numericalData.saveFormat()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/plotline/plotline-config.html', '<div bindonce="">\n    <div class="add-plot-line">\n        <div class="ngdialog-title">\u6DFB\u52A0\u8F85\u52A9\u7EBF</div>\n        <div class="ngdialog-message">\n            <ul class="plot-lines">\n                <span class="line-lateral" ng-show="selected_type==\'C280\'">\u6A2A\u5411\u8F85\u52A9\u7EBF</span>\n                <div ng-show="plotLinesY.length === 0" class="no-plot-line">\n                    <span>\u4F60\u5F53\u524D\u8FD8\u6CA1\u6709\u6A2A\u5411\u8F85\u52A9\u7EBF</span>, <a class="add-line-btn" ng-click="addPlotLineY()">\u70B9\u6B64\u6DFB\u52A0</a>\n                </div>\n                <li ng-repeat="line in plotLinesY">\n                    <div class="left">\n                        <input type="text" ng-model="line.name" placeholder="\u540D\u79F0">\n                        <select ng-model="line.value_type" ng-options="p.type as p.name for p in lineType">\n                        </select>\n                    </div>\n                    <div class="right" ng-show="line.value_type==\'constant\'">\n                        <input class="line-value" type="text" ng-show="line.value_type==\'constant\'" ng-model="line.value">\n                    </div>\n                    <div class="right" ng-show="line.value_type==\'calculate\'">\n                        <select class="field-name-select" ng-model="line.uniq_id" ng-change="setUniqId(this.$index, line)" ng-options="field.uniq_id as field.alias_name for field in fields"></select>\n                        <select ng-model="line.formula" ng-options="f.type as f.name for f in calcuType"></select>\n                    </div>\n                    <i class="bdp-icon ico-plus1 add-line-btn" ng-click="addPlotLineY($index)" title="\u6DFB\u52A0\u8F85\u52A9\u7EBF"></i>\n                    <i class="bdp-icon ico-minus1 del-line-btn" ng-click="removeThisLineY($index)" title="\u5220\u9664\u8F85\u52A9\u7EBF"></i>\n                </li>\n            </ul>\n            <ul class="plot-lines mt20" ng-show="selected_type ==\'C280\'">\n                <span class="line-vertical">\u7EB5\u5411\u8F85\u52A9\u7EBF</span>\n                <div ng-show="plotLinesX.length === 0" class="no-plot-line">\n                    <span>\u4F60\u5F53\u524D\u8FD8\u6CA1\u6709\u7EB5\u5411\u8F85\u52A9\u7EBF</span>, <a class="add-line-btn" ng-click="addPlotLineX()">\u70B9\u6B64\u6DFB\u52A0</a>\n                </div>\n                <li ng-repeat="line in plotLinesX">\n                    <div class="left">\n                        <input type="text" ng-model="line.name" placeholder="\u540D\u79F0">\n                        <select ng-model="line.value_type" ng-options="p.type as p.name for p in lineType">\n                        </select>\n                    </div>\n                    <div class="right" ng-show="line.value_type==\'constant\'">\n                        <input class="line-value" type="text" ng-show="line.value_type==\'constant\'" ng-model="line.value">\n                    </div>\n                    <div class="right" ng-show="line.value_type==\'calculate\'">\n                        <select class="field-name-select" ng-model="line.uniq_id" ng-options="field.uniq_id as field.alias_name for field in fieldsX"></select>\n                        <select ng-model="line.formula" ng-options="f.type as f.name for f in calcuType"></select>\n                    </div>\n                    <i class="bdp-icon ico-plus1 add-line-btn" ng-click="addPlotLineX($index)" title="\u6DFB\u52A0\u8F85\u52A9\u7EBF"></i>\n                    <i class="bdp-icon ico-minus1 del-line-btn" ng-click="removeThisLineX($index)" title="\u5220\u9664\u8F85\u52A9\u7EBF"></i>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="ngdialog-buttons">\n        <span class="operator-help-link" ng-click="goHelp(\'plotLine\')"><i class="bdp-icon ico-help"></i><span>\u67E5\u770B\u5E2E\u52A9</span></span>\n        <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="save()">\u786E\u5B9A</button>\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/preview-data/delete_table_dependency.html', '<div bindonce="">\n\t<div class="ngdialog-title">{{ngDialogData.title}}</div>\n\t<div class="ngdialog-message word-break-all">\n\t\t<span>{{ngDialogData.message}}</span>\n\t\t<p class="mt8">\n\t\t\t\u5DF2\u9009\u62E9\u5B57\u6BB5\uFF1A\n\t\t\t<span ng-repeat="field in dependencyFields">{{field.title}}{{$last? \'\' : \'\u3001\'}}</span>\n\t\t</p>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirm()">\u786E\u5B9A</button>\n\t</div>\n\t<div ng-loading-gif="" ng-show="showLoading"></div>\n</div>');
    $templateCache.put('/static/chart-edit/preview-data/preview-table-data.html', '<div bindonce="">\n    <div ng-loading-gif="" ng-show="getInitialData"></div>\n    <div class="ngdialog-title">\n        <span>\u67E5\u770B\u6570\u636E</span>\n        - <span class="table-name nowrap">{{ngDialogData.tableName}}</span>\n        <div class="bdp-tooltip right OOCSS" ng-show="!!ngDialogData.label || !!ngDialogData.comment">\n            <i class="bdp-icon ico-info-sign cursor-pointer"></i>\n            <div class="bdp-tooltip-content label-comment-tooltip">\n                <div class="box">\n                    <div class="tooltip-label" ng-show="!!ngDialogData.label">\n                        <span>\u6807\u7B7E</span>\n                        <span>{{ngDialogData.label}}</span>\n                    </div>\n                    <div class="tooltip-comment" ng-show="!!ngDialogData.comment">\n                        <span>\u5907\u6CE8</span>\n                        <span>{{ngDialogData.comment}}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class="ngdialog-message">\n        <div class="table-info" ng-show="getInitialData === false">\n            <span>\u663E\u793A\u6700\u65B0</span><em>{{ngDialogData.latestData}}</em><span>\u6761\u6570\u636E</span>\uFF0C<span>\u5171</span><em>{{ngDialogData.totalData}}</em><span>\u6761\u6570\u636E</span>\n            <span class="table-update-time"><span>\u6700\u8FD1\u66F4\u65B0\u65F6\u95F4\uFF1A</span>{{ngDialogData.tableUpdateTime}}</span>\n            <span class="table-status" ng-if="!!ngDialogData.currentStatus"><span>\u72B6\u6001</span>\uFF1A<em>{{ngDialogData.currentStatus}}</em></span>\n            <span class="table-status" ng-if="ngDialogData.generateCoordinateStatus == 2"><span>\u6570\u636E\u66F4\u65B0</span>\uFF1A<em>\u7ECF\u7EAC\u5EA6\u5B57\u6BB5\u751F\u6210\u5931\u8D25</em></span>\n            <div class="table-status generating-hint" ng-if="ngDialogData.generateCoordinateStatus == 3"><i class="bdp-icon ico-attention"></i><span class="generating-hint-text">\u7ECF\u7EAC\u5EA6\u5B57\u6BB5\u751F\u6210\u4E2D</span></div>\n        </div>\n        <div class="table-main pr">\n            <div class="table-fixhead J-table-fixhead">\n                <table class="bdp-table-normal">\n                    <thead>\n                        <tr>\n                            <th ng-repeat="it in ngDialogData.schema">{{it.name}}</th>\n                        </tr>\n                    </thead>\n                </table>\n            </div>\n            <div class="table-scroll">\n                <table class="bdp-table-normal">\n                    <thead>\n                        <tr>\n                            <th ng-repeat="it in ngDialogData.schema">{{it.name}}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="it in ngDialogData.data">\n                            <td ng-repeat="value in it track by $index">\n                                {{value}}\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/preview-data/set-common-dimension.html', '<div bindonce="">\n\t<div class="ngdialog-title">\u8BBE\u7F6E\u591A\u5DE5\u4F5C\u8868\u7684\u516C\u5171\u7EF4\u5EA6</div>\n\t<div class="ngdialog-message">\n\t\t<div class="worktable-info-list-title">\n\t\t\t<div class="worktable-info-title nowrap">\u5DE5\u4F5C\u8868\u8868\u5934</div>\n\t\t\t<div class="worktable-info-input-wrapper" ng-repeat="dimension in dimensionArray">\n\t\t\t\t<input type="text" class="worktable-info-input" ng-model="dimension.title">\n\t\t\t\t<span class="bdp-icon-wrap cursor-pointer" ng-click="removeColumn($index)">\n\t\t\t\t\t<i class="bdp-icon ico-delete"></i>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<span class="bdp-icon-wrap cursor-pointer add-new-column" ng-click="addNewColumn()">\n\t\t\t\t<i class="bdp-icon ico-plus1"></i>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="worktable-info-list" ng-repeat="table in tableInfoList" ng-class="{\'cr-bdp\': table.mark}">\n\t\t\t<div class="worktable-info-title nowrap" title="{{table.tb_name}}">{{table.tb_name}}</div>\n\t\t\t<div class="display-inline-block" ng-repeat="field in table.fieldList">\n\t\t\t\t<select class="worktable-info-select" ng-model="field.fid" ng-change="updateInputValue($index, $parent.$index, field.fid)" ng-options="field.fid as field.name for field in table.schema | filter: filterSelectType">\n\t\t\t\t\t<option value="" selected="selected">\u8BF7\u9009\u62E9\u5B57\u6BB5</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ngdialog-buttons">\n\t\t<button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="sendDimensionConfig(ngDialogData.operationMode)">\u786E\u5B9A</button>\n\t\t<button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">\u53D6\u6D88</button>\n\t</div>\n\n\t<div ng-loading-gif="" ng-show="chartContentLoading"></div>\n</div>');
    $templateCache.put('/static/chart-edit/table-statistic/table-statistic.html', '<div bindonce="">\n    <div class="hd block-header">\u884C\u603B\u8BA1</div>\n    <p>\n        <label ng-class="{\'disabled\': chart_ops.meta.level[drill_level].y.length == 0 || chartConfig.isGraftTb}">\n            <input type="checkbox" ng-model="tb_statistic.row" ng-change="saveTableStatistic(tb_statistic, \'row_summary\', tb_statistic.row, [(\'chart.showStatisticRow\'|translate)])">\n            <span>\u663E\u793A\u6574\u4F53\u884C\u603B\u8BA1</span>\n        </label>\n    </p>\n    <div ng-if="tb_statistic.row">\n        <ul class="statistic-method">\n            <li>\n                <label class="nowrap line-height-32" title="\u8BA1\u7B97\u65B9\u5F0F">\u8BA1\u7B97\u65B9\u5F0F</label>\n                <select ng-model="tb_statistic.row_formula" ng-change="onSelectChanged(\'changeFormula\', [(\'chart.tableRowStatistic\' | translate)])">\n                    <option value="SUM" ng-selected="tb_statistic.row_formula === \'SUM\' || !tb_statistic.row_formula">\u884C\u603B\u8BA1</option>\n                    <option value="AVERAGE" ng-selected="tb_statistic.row_formula === \'AVERAGE\'">\u884C\u5E73\u5747</option>\n                    <option value="MAX" ng-selected="tb_statistic.row_formula === \'MAX\'">\u884C\u6700\u5927\u503C</option>\n                    <option value="MIN" ng-selected="tb_statistic.row_formula === \'MIN\'">\u884C\u6700\u5C0F\u503C</option>\n                </select>\n            </li>\n            <li>\n                <label class="nowrap line-height-32" title="\u4F4D\u7F6E">\u4F4D\u7F6E</label>\n                <select ng-model="tb_statistic.row_pos" ng-change="onSelectChanged(\'changePos\', [(\'chart.tableRowStatistic\' | translate)])">\n                    <option value="left">\u5DE6\u4FA7\u663E\u793A</option>\n                    <option value="right">\u53F3\u4FA7\u663E\u793A</option>\n                </select>\n            </li>\n        </ul>\n    </div>\n\n    <p class="mt10">\n        <label ng-class="{\'disabled\': !tableStatisticData.canSetNumRow}">\n            <input type="checkbox" ng-model="tb_statistic.number_row" ng-change="saveTableStatistic(tb_statistic, \'number_row_summary\', tb_statistic.number_row, [(\'chart.showSubStatisticRow\'|translate)])">\n            <span>\u663E\u793A\u5404\u6570\u503C\u884C\u603B\u8BA1</span>\n        </label>\n    </p>\n    <div ng-if="tb_statistic.number_row">\n        <ul class="statistic-aggregator">\n            <li ng-repeat="field in chart_ops.meta.level[drill_level].y" ng-if="field.fid != \'row_summary\'">\n                <label class="nowrap" title="{{field.nick_name || field.name}}{{ formulaKeyMap[field.aggregator]}}">\n                    {{field.nick_name || field.name}}\n                    <i ng-if="field.aggregator != \'\' && field.aggregator != undefined" class="mr10 inline nowrap">({{formulaKeyMap[field.aggregator]}})</i>\n                </label>\n                <select ng-model="field.number_row_formula" ng-change="onNumberRowFormulaChanged(field.number_row_formula, field.uniq_id, (field.nick_name || field.name) + formulaKeyMap[field.aggregator])">\n                    <option value="SUM" ng-selected="field.number_row_formula === \'SUM\'">\u884C\u603B\u8BA1</option>\n                    <option value="AVERAGE" ng-selected="field.number_row_formula === \'AVERAGE\'">\u884C\u5E73\u5747</option>\n                    <option value="MAX" ng-selected="field.number_row_formula === \'MAX\'">\u884C\u6700\u5927\u503C</option>\n                    <option value="MIN" ng-selected="field.number_row_formula === \'MIN\'">\u884C\u6700\u5C0F\u503C</option>\n                    <option value="" ng-selected="!field.number_row_formula">\u65E0</option>\n                </select>\n            </li>\n            <li ng-repeat="field in chart_ops.meta.level[drill_level].y_optional">\n                <label class="nowrap" title="{{field.nick_name || field.name}}{{formulaKeyMap[field.aggregator]}}">\n                    {{field.nick_name || field.name}}\n                    <i ng-if="field.aggregator != \'\' && field.aggregator != undefined" class="mr10 inline nowrap">({{formulaKeyMap[field.aggregator]}})</i>\n                </label>\n                <select ng-model="field.number_row_formula" ng-change="onNumberRowFormulaChanged(field.number_row_formula, field.uniq_id, (field.nick_name || field.name) + formulaKeyMap[field.aggregator])">\n                    <option value="SUM" ng-selected="field.number_row_formula === \'SUM\'">\u884C\u603B\u8BA1</option>\n                    <option value="AVERAGE" ng-selected="field.number_row_formula === \'AVERAGE\'">\u884C\u5E73\u5747</option>\n                    <option value="MAX" ng-selected="field.number_row_formula === \'MAX\'">\u884C\u6700\u5927\u503C</option>\n                    <option value="MIN" ng-selected="field.number_row_formula === \'MIN\'">\u884C\u6700\u5C0F\u503C</option>\n                    <option value="" ng-selected="!field.number_row_formula">\u65E0</option>\n                </select>\n            </li>\n        </ul>\n    </div>\n    <div class="hd mt10 block-header">\u5217\u603B\u8BA1</div>\n    <p>\n        <label ng-class="{\'disabled\': chart_ops.meta.level[drill_level].y.length == 0 || chartConfig.isGraftTb}">\n            <input type="checkbox" ng-model="tb_statistic.col" ng-change="saveTableStatistic(tb_statistic, \'col_summary\', tb_statistic.col, [(\'chart.tableColStatistic\' | translate)])">\n            <span>\u663E\u793A\u5217\u603B\u8BA1</span>\n        </label>\n    </p>\n    <div ng-if="tb_statistic.col">\n        <ul class="statistic-aggregator">\n            <li class="line-height-32" ng-repeat="field in chart_ops.meta.level[drill_level].y" ng-if="field.fid != \'row_summary\'">\n\n                <label class="nowrap" title="{{field.nick_name || field.name}}{{ formulaKeyMap[field.aggregator]}}">\n                    {{field.nick_name || field.name}}\n                    <i ng-if="field.aggregator != \'\' && field.aggregator != undefined" class="mr10 inline nowrap">({{formulaKeyMap[field.aggregator]}})</i>\n                </label>\n                <!--\n                <div multi-select-list-layer\n                     ng-if="colCheckBoxData[$index]"\n                     class="select-time width-calc83 vm"\n                     check-box="true"\n                     save-data="field.statistic_method"\n                     val-list="colCheckBoxData[$index]"\n                     match-with="\'id\'"\n                     item-callback="onSelectChanged(\'changeFormula\', [(\'chart.tableColStatistic\' | translate), (field.nick_name || field.name) + (formulaKeyMap[field.aggregator])])"\n                ></div>\n                -->\n               <select ng-model="field.statistic_method" ng-change="saveChartImmediate()">\n                   <option value="SUM" ng-selected="field.statistic_method === \'SUM\' || field.statistic_method === undefined">\u5217\u603B\u8BA1</option>\n                   <option value="AVERAGE" ng-selected="field.statistic_method === \'AVERAGE\'">\u5217\u5E73\u5747</option>\n                   <option value="MAX" ng-selected="field.statistic_method === \'MAX\'">\u5217\u6700\u5927\u503C</option>\n                   <option value="MIN" ng-selected="field.statistic_method === \'MIN\'">\u5217\u6700\u5C0F\u503C</option>\n                   <option value="CALCULATE" ng-selected="field.statistic_method === \'CALCULATE\'" ng-if="field.is_new || field.yoyQoqSetting">\u8BA1\u7B97\u503C</option>\n                   <option value="" ng-selected="field.statistic_method === \'\'">\u65E0</option>\n               </select>\n\n            </li>\n            <li class="line-height-32" ng-repeat="field in chart_ops.meta.level[drill_level].y_optional">\n                <!--<label class="nowrap" title="{{field.nick_name || field.name}}{{formulaKeyMap[field.aggregator]}}">-->\n                    <!--{{field.nick_name || field.name}}-->\n                    <!--<i ng-if="field.aggregator != \'\' && field.aggregator != undefined" class="mr10 inline nowrap">({{formulaKeyMap[field.aggregator]}})</i>-->\n                <!--</label>-->\n                <!--<select ng-model="field.statistic_method" ng-change="saveChartImmediate()">-->\n                    <!--<option value="SUM" ng-selected="field.statistic_method === \'SUM\' || !field.statistic_method" bo-text="\'chart.sumOfCol\' | translate"></option>-->\n                    <!--<option value="AVERAGE" ng-selected="field.statistic_method === \'AVERAGE\'" bo-text="\'chart.avgOfCol\' | translate"></option>-->\n                    <!--<option value="MAX" ng-selected="field.statistic_method === \'MAX\'" bo-text="\'chart.maxOfCol\' | translate"></option>-->\n                    <!--<option value="MIN" ng-selected="field.statistic_method === \'MIN\'" bo-text="\'chart.minOfCol\' | translate"></option>-->\n                    <!--<option value="CALCULATE" ng-selected="field.statistic_method === \'CALCULATE\'" ng-if="field.is_new || field.yoyQoqSetting" bo-text="\'chart.calcuOfCol\' | translate"></option>-->\n                <!--</select>-->\n                <label class="nowrap" title="{{field.nick_name || field.name}}{{ formulaKeyMap[field.aggregator]}}">\n                    {{field.nick_name || field.name}}\n                    <i ng-if="field.aggregator != \'\' && field.aggregator != undefined" class="mr10 inline nowrap">({{formulaKeyMap[field.aggregator]}})</i>\n                </label>\n                <!--\n                <div multi-select-list-layer\n                     ng-if="colCheckBoxData[$index]"\n                     class="select-time width-calc83 vm"\n                     check-box="true"\n                     save-data="field.statistic_method"\n                     val-list="colCheckBoxData[$index]"\n                     match-with="\'id\'"\n                     item-callback="onSelectChanged(\'changeFormula\', [(\'chart.tableColStatistic\' | translate), (field.nick_name || field.name) + (formulaKeyMap[field.aggregator])])"\n                ></div>\n                 -->\n                <select ng-model="field.statistic_method" ng-change="saveChartImmediate()">\n                    <option value="SUM" ng-selected="field.statistic_method === \'SUM\' || !field.statistic_method">\u5217\u603B\u8BA1</option>\n                    <option value="AVERAGE" ng-selected="field.statistic_method === \'AVERAGE\'">\u5217\u5E73\u5747</option>\n                    <option value="MAX" ng-selected="field.statistic_method === \'MAX\'">\u5217\u6700\u5927\u503C</option>\n                    <option value="MIN" ng-selected="field.statistic_method === \'MIN\'">\u5217\u6700\u5C0F\u503C</option>\n                    <option value="CALCULATE" ng-selected="field.statistic_method === \'CALCULATE\'" ng-if="field.is_new || field.yoyQoqSetting">\u8BA1\u7B97\u503C</option>\n                </select>\n\n            </li>\n            <li class="line-height-32">\n                <label>\u4F4D\u7F6E</label>\n                <select ng-model="tb_statistic.col_pos" ng-change="onSelectChanged(\'changePos\', [(\'chart.tableColStatistic\' | translate)])">\n                    <option value="bottom">\u5E95\u90E8\u663E\u793A</option>\n                    <option value="top">\u9876\u90E8\u663E\u793A</option>\n                </select>\n            </li>\n        </ul>\n        <div class="classify-wrap" ng-if="chart_ops.meta.level[drill_level].x.length > 1">\n            <div class="classify-title classify-common">\n                <label>\n                    <input type="checkbox" ng-model="tb_statistic.subtotal" ng-change="handleSubtotalTitle()">\n                    <span>\u663E\u793A\u5206\u7C7B\u6C47\u603B</span>\n                </label>\n            </div>\n\n            <div class="classify-content classify-common" ng-if="tb_statistic.subtotal">\n                <ul>\n                    <li ng-repeat="field in chart_ops.meta.level[drill_level].x" ng-if="$index != chart_ops.meta.level[drill_level].x.length - 1">\n                        <label class="nowrap" title="{{field.nick_name || field.name}}" ng-if="field.data_type != \'date\' \n                            && !(chart_ops.meta.level[drill_level].chart_type === \'C200\' \n                                && field.data_type === \'string\' \n                                && permision.tableImg)">\n                            <input type="checkbox" ng-model="tb_statistic.subtotal_setting.dimensions[$index]" ng-change="saveTableStatistic(tb_statistic, \'sub_col_summary\', tb_statistic.subtotal_setting.dimensions[$index], [(\'chart.subtotal\'|translate), (field.nick_name || field.name)])">\n                            {{field.nick_name || field.name}}\n                        </label>\n\n                        <label class="nowrap" title="{{field.nick_name || field.name}}{{field.granularity|granularity}}" ng-if="field.data_type === \'date\'">\n                            <input type="checkbox" ng-model="tb_statistic.subtotal_setting.dimensions[$index]" ng-change="saveTableStatistic(tb_statistic, \'sub_col_summary\', tb_statistic.subtotal_setting.dimensions[$index], [(\'chart.subtotal\'|translate), (field.nick_name || field.name)+(field.granularity|granularity)])">\n                            {{field.nick_name || field.name}} \n                            <i>\n                                ({{field.granularity|granularity}})\n                            </i>\n                        </label>\n\n                        <label class="nowrap" title="{{field.nick_name || field.name}}{{field.data_show_type|dataShowType}}" ng-if="chart_ops.meta.level[drill_level].chart_type === \'C200\' \n                            && field.data_type === \'string\' \n                            && permision.tableImg">\n                            <input type="checkbox" ng-model="tb_statistic.subtotal_setting.dimensions[$index]" ng-change="saveTableStatistic(tb_statistic, \'sub_col_summary\', tb_statistic.subtotal_setting.dimensions[$index], [(\'chart.subtotal\'|translate), (field.nick_name || field.name)+(field.data_show_type|dataShowType)])">\n                            {{field.nick_name || field.name}}\n                            <i>\n                                ({{field.data_show_type|dataShowType}})\n                            </i>\n                        </label>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>');
    $templateCache.put('/static/chart-edit/top-chart/top-chart.html', '\n<div class="block-body no-padding no-border" ng-class="{\'disabled\': chartConfig.isGraftTb}" ng-show="chart_ops.meta.level[drill_level].x.length">\n    <input type="checkbox" ng-model="chart_ops.meta.level[drill_level].top.enabled" ng-disabled="chartConfig.isGraftTb" ng-change="onToggleTop()">\n    <span>\u7EF4\u5EA6\u663E\u793A\u6761\u76EE\u6570</span>\n    <div ng-show="chart_ops.meta.level[drill_level].top.enabled">\n        <select ng-model="chart_ops.meta.level[drill_level].top.reversed" ng-change="onTopChange(\'chart.op.config.changeTopReversed\')">\n            <option value="0">\u524D</option>\n            <option value="1">\u540E</option>\n        </select>\n        <input class="top-chart-number ml8" id="topD" type="number" ng-model="chart_ops.meta.level[drill_level].top.value" input-number="" data-nm-type="positiveInt" ng-blur="onTopValueChange()" ng-keyup="onTopValueKeyup($event)">\n\n        <select class="ml8" ng-model="chart_ops.meta.level[drill_level].top.type" ng-change="onTopChange(\'chart.op.config.changeTopUnit\')">\n            <option value="items">\u9879\u76EE</option>\n            <option value="percent">%</option>\n        </select>\n    </div>\n</div>\n<div class="block-body no-padding no-border" ng-class="{\'disabled\': chartConfig.isGraftTb}" ng-show="chart_ops.meta.level[drill_level].compare_axis.length">\n    <input type="checkbox" ng-model="chart_ops.meta.level[drill_level].top_compare.enabled" ng-disabled="chartConfig.isGraftTb" ng-change="onToggleTopCompare()">\n    <span>\u5BF9\u6BD4\u663E\u793A\u6761\u76EE\u6570</span>\n    <div ng-show="chart_ops.meta.level[drill_level].top_compare.enabled">\n        <select ng-model="chart_ops.meta.level[drill_level].top_compare.reversed" ng-change="onTopCompareChange(\'chart.op.config.changeTopCompareReversed\')">\n            <option value="0">\u524D</option>\n            <option value="1">\u540E</option>\n        </select>\n        <input class="top-chart-number ml8" id="topC" type="number" ng-model="chart_ops.meta.level[drill_level].top_compare.value" input-number="" data-nm-type="positiveInt" ng-blur="onTopCompareValueChange()" ng-keyup="onTopCompareValueKeyup($event)">\n        <select class="ml8" ng-model="chart_ops.meta.level[drill_level].top_compare.type" ng-change="onTopCompareChange(\'chart.op.config.changeTopCompareUnit\')">\n            <option value="items">\u9879\u76EE</option>\n            <option value="percent">%</option>\n        </select>\n    </div>\n</div>\n');
    $templateCache.put('/static/chart-edit/yaxis-label/chart-set-yaxis-left.html', '<div class="row no-margin" ng-if="selected_type !== \'C243\'">\n    <label class="label-head">\u6807\u9898</label>\n    <input ng-model="chartSetting.yaxis_left.name" type="text" class="input-text-block l-input" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_left,\'left\', \'changeTitle\')" ng-blur="setYaxisUnit(chartSetting.yaxis_left,\'left\', \'changeTitle\')">\n</div>\n\n<div class="row no-margin" ng-if="selected_type === \'C243\'">\n    <label class="label-head">\u5DE6\u8F74\u6807\u9898</label>\n    <input ng-model="chartSetting.yaxis_left.name" type="text" class="input-text-block l-input" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_left,\'left\', \'changeLeftTitle\')" ng-blur="setYaxisUnit(chartSetting.yaxis_left,\'left\', \'changeLeftTitle\')">\n</div>\n\n<div class="row" ng-if="selected_type === \'C243\'">\n    <label class="label-head">\u53F3\u8F74\u6807\u9898</label>\n    <input ng-model="chartSetting.yaxis_left.rightName" type="text" class="input-text-block l-input" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_left,\'left\', \'changeRightTitle\')" ng-blur="setYaxisUnit(chartSetting.yaxis_left,\'left\', \'changeRightTitle\')">\n</div>\n\n<div class="row" ng-if="selected_type !== \'C243\'">\n    <label class="label-head">\u5355\u4F4D</label>\n    <input ng-model="chartSetting.yaxis_left.unit" type="text" class="input-text-block l-input" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_left,\'left\', \'changeUnit\')" ng-blur="setYaxisUnit(chartSetting.yaxis_left,\'left\', \'changeUnit\')">\n</div>\n\n<div class="row" ng-if="canSetAxisValue(0)">\n    <label class="label-head">\u6700\u5927\u503C</label>\n    <input ng-model="chartSetting.yaxis_left.max_value" type="number" id="yAxisLeftMaxInput" input-number="" nm-type="number" class="input-text-block" ng-class="{\'input-disabled\':chartSetting.yaxis_left.max_disabled,\'l-input\':selected_type === \'C261\',\'m-input\':selected_type !== \'C261\'}" ng-disabled="chartSetting.yaxis_left.max_disabled" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_left,\'left\', \'changeMax\')" ng-blur="setYaxisUnit(chartSetting.yaxis_left,\'left\', \'changeMax\')">\n    <label>\n        <input type="checkbox" ng-disabled="chartSetting.yaxis_left.auto_zoom" ng-model="chartSetting.yaxis_left.max_disabled" ng-change="setValueAuto(\'max\',\'left\')"> <span>\u81EA\u52A8</span>\n    </label>\n</div>\n<div class="row" ng-if="canSetAxisValue(0)">\n    <label class="label-head">\u6700\u5C0F\u503C</label>\n    <input ng-model="chartSetting.yaxis_left.min_value" type="number" id="yAxisLeftMinInput" input-number="" nm-type="number" class="input-text-block m-input" ng-class="{\'input-disabled\':chartSetting.yaxis_left.min_disabled}" ng-disabled="chartSetting.yaxis_left.min_disabled" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_left,\'left\', \'changeMin\')" ng-blur="setYaxisUnit(chartSetting.yaxis_left,\'left\', \'changeMin\')">\n    <label>\n        <input type="checkbox" ng-disabled="chartSetting.yaxis_left.auto_zoom" ng-model="chartSetting.yaxis_left.min_disabled" ng-change="setValueAuto(\'min\',\'left\')"> <span>\u81EA\u52A8</span>\n    </label>\n</div>\n\n<div class="row" ng-if="canSetAxisValue(0) && canSetZoom()">\n    <label class="cursor-pointer ng-binding">\n        <input type="checkbox" ng-model="chartSetting.yaxis_left.auto_zoom" ng-change="setZoomState(\'left\')">\n        <span>\u81EA\u52A8\u653E\u5927\u6570\u503C\u5DEE\u5F02</span>\n    </label>\n</div>\n<div class="sub-block" chart-set-axis-style="" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})" type="\'yAxis\'"></div>\n');
    $templateCache.put('/static/chart-edit/yaxis-label/chart-set-yaxis-right.html', '<div class="row no-margin">\n    <label class="label-head">\u6807\u9898</label>\n    <input class="input-text-block l-input" ng-model="chartSetting.yaxis_right.name" type="text" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_right,\'right\', \'changeTitle\')" ng-blur="setYaxisUnit(chartSetting.yaxis_right,\'right\', \'changeTitle\')">\n</div>\n<div class="row">\n    <label class="label-head">\u5355\u4F4D</label>\n    <input class="input-text-block l-input" ng-model="chartSetting.yaxis_right.unit" type="text" ng-keyup="ifEnterDownForY($event, chartSetting.yaxis_right, \'right\', \'changeUnit\')" ng-blur="setYaxisUnit(chartSetting.yaxis_right, \'right\', \'changeUnit\')">\n</div>\n<div class="row" ng-if="viewMeta.type_optional[1] !== \'C212\'">\n    <label class="label-head">\u6700\u5927\u503C</label>\n    <input id="yAxisRightMaxInput" class="input-text-block m-input" ng-class="{\'input-disabled\':chartSetting.yaxis_right.max_disabled}" ng-model="chartSetting.yaxis_right.max_value" type="number" input-number="" nm-type="number" ng-disabled="chartSetting.yaxis_right.max_disabled" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_right,\'right\', \'changeMax\')" ng-blur="setYaxisUnit(chartSetting.yaxis_right,\'right\', \'changeMax\')">\n    <label>\n        <input type="checkbox" ng-disabled="chartSetting.yaxis_right.auto_zoom" ng-model="chartSetting.yaxis_right.max_disabled" ng-change="setValueAuto(\'max\',\'right\')">\n        <span>\u81EA\u52A8</span>\n    </label>\n</div>\n<div class="row" ng-if="viewMeta.type_optional[1] !== \'C212\'">\n    <label class="label-head">\u6700\u5C0F\u503C</label>\n    <input id="yAxisRightMinInput" class="input-text-block m-input" ng-class="{\'input-disabled\':chartSetting.yaxis_right.min_disabled}" ng-model="chartSetting.yaxis_right.min_value" type="number" input-number="" nm-type="number" ng-disabled="chartSetting.yaxis_right.min_disabled" ng-keyup="ifEnterDownForY($event,chartSetting.yaxis_right,\'right\',\'changeMin\')" ng-blur="setYaxisUnit(chartSetting.yaxis_right,\'right\', \'changeMin\')">\n    <label>\n        <input type="checkbox" ng-disabled="chartSetting.yaxis_right.auto_zoom" ng-model="chartSetting.yaxis_right.min_disabled" ng-change="setValueAuto(\'min\',\'right\')">\n        <span>\u81EA\u52A8</span>\n    </label>\n</div>\n<div class="row">\n    <label class="cursor-pointer ng-binding">\n        <input type="checkbox" ng-model="chartSetting.yaxis_right.auto_zoom" ng-change="setZoomState(\'right\')">\n        <span>\u81EA\u52A8\u653E\u5927\u6570\u503C\u5DEE\u5F02</span>\n    </label>\n</div>\n<div class="sub-block" chart-set-axis-style="" chart-info="viewMeta" save-func="saveChartImmediate({only_redraw: true})" type="\'yOptionalAxis\'"></div>\n');
    $templateCache.put('/static/chart-edit/yaxis-type/doubleYaxisChartTypeTpl.html', '<a class="cursor-pointer pr" ng-click="showType = !showType;" ng-class="{\'active\':showType}" outside-active="showType" click-outside="showType = false">\n    <i class="chart-type-icon {{getDoubleAxisIcon()}}" ng-if="getDoubleAxisIcon() !== \'mix\'"></i>\n    <i class="chart-type-icon" ng-if="getDoubleAxisIcon() === \'mix\'">\u6DF7\u5408</i>\n    <i class="bdp-icon ico-triangle-down double-yaxis"></i>\n</a>\n<ul ng-show="showType" class="dropdown-wrap">\n    <li ng-repeat="it in types" class="dropdown-item" ng-class="{\'active\':it===meta.level[drillLevel].type_optional[yaxis]}">\n        <a class="cursor-pointer" ng-click="changeType(it)">\n            <i class="chart-type-icon {{it}}"></i>\n        </a>\n    </li>\n</ul>');
    $templateCache.put('/static/dashboard-core/chart-operate/chart-operate.html', '<div class="chart-operate" bindonce="">\n    <span class="no-hover-show-wrap mr24 display-inline-block">\n        <span class="bdp-icon-wrap" ng-if="operateView.canSetWarnLine && !!warnSwitchOn && !!warnTrigger.has"><i class="bdp-icon ico-alarm-red ico-always-highlight"></i></span>\n    </span>\n    <div class="hover-show-wrap">\n    <a class="cursor-pointer bdp-icon-wrap J-width-change pr" style="display: none" ng-click="saveTableWidth()" title="\u4FDD\u5B58\u5F53\u524D\u5217\u5BBD">\n        <i class="bdp-icon ico-columnwidth-save" flash-guide="tableGuideDashColWidthChange" fg-show="guideApi.tableGuideDashColWidthChange == 1 && !!_t" fg-close="closeCB"></i>\n    </a>\n    <a class="cursor-pointer bdp-icon-wrap J-revert-selection" style="display: none" ng-click="revertSelection()" title="\u53D6\u6D88\u805A\u7126/\u6392\u9664">\n        <i class="bdp-icon ico-revert-selection"></i>\n    </a>\n    <a class="cursor-pointer bdp-icon-wrap chart-op-refresh" ng-click="refreshChart({type:\'refresh\'})" ng-if="chartOptPermission.refresh" title="\u5237\u65B0\u56FE\u8868">\n        <i class="bdp-icon ico-refresh"></i>\n    </a>\n    <a class="bdp-icon-wrap chart-op-edit" ng-if="!proj_share && permision.dashOperate && child.meta.property == 0 && !isFullscreenMode && chartOptPermission.editData" ng-click="editData()" title="\u7F16\u8F91">\n        <i class="bdp-icon ico-edit-data"></i>\n    </a>\n    <a class="bdp-icon-wrap chart-op-edit" ng-if="!proj_share && permision.dashOperate && child.meta.property == 0 && !isFullscreenMode && chartOptPermission.edit" ng-click="edit()" title="\u7F16\u8F91">\n        <i class="bdp-icon ico-edit"></i>\n    </a>\n    <a ng-if="canEnterFullScreen() && chartOptPermission.fullScreen" chart-full-screen="" chart-url="draw_chart_url" domid="child.dom_id" standard-items="dashStandardItems" adv-or-screen="dashCategory" class="chart-op-fs"></a>\n    <div chart-info-summary="" class="pr bdp-icon-wrap chart-info-summary-icon chart-op-sum" ng-if="chartOptPermission.summary">\n        <i class="bdp-icon ico-info-bold" ng-class="{\'active\': child.meta.refresh}"></i>\n        <div class="dropdown-wrap chart-info-summary">\n            <em class="arrow-up"></em>\n            <div class="summary-content-wrap">\n                <table class="chart-info-summary-content">\n                    <ul>\n                        <li class="label" style="width:{{width}}px">\u6570\u636E\u66F4\u65B0</li>\n                        <li class="text">{{tb_update_time | date:\'yyyy-MM-dd HH:mm:ss\'}}</li>\n                    </ul>\n                    <ul ng-if="child.meta.refresh">\n                        <li class="label" style="width:{{width}}px">\u66F4\u65B0\u72B6\u6001</li>\n                        <li class="text">\u6B63\u5728\u66F4\u65B0...</li>\n                    </ul>\n                    <ul ng-repeat="y in yAxis" ng-if="y.description">\n                        <li class="label" title="{{y.nick_name || y.name}}">{{y.nick_name || y.name}}</li>\n                        <li class="text">{{y.description}}</li>\n                    </ul>\n                    <ul ng-repeat="x in xAxis" ng-if="x.description">\n                        <li class="label" title="{{x.nick_name || x.name}}">{{x.nick_name || x.name}}</li>\n                        <li class="text">{{x.description}}</li>\n                    </ul>\n                    <ul ng-if="description">\n                        <li class="label">\u56FE\u8868\u5907\u6CE8</li>\n                        <li class="text">{{description}}</li>\n                    </ul>\n                </table>\n            </div>\n        </div>\n    </div>\n    <a class="bdp-icon-wrap chart-warn-alert-icon chart-op-warn" ng-if="operateView.canSetWarnLine && chartOptPermission.sort" outside-active="warnTrigger.show" click-outside="warnTrigger.show = false" title="\u9884\u8B66\u8BBE\u7F6E">\n        <i class="bdp-icon ico-alarm-on" ng-if="!warnSwitchOn" ng-click="showSetWarningDialog()"></i>\n        <i class="bdp-icon ico-alarm-active ico-always-highlight" ng-if="!!warnSwitchOn && !warnTrigger.has" ng-click="showSetWarningDialog()"></i>\n        <i class="bdp-icon ico-alarm-red ico-always-highlight" ng-if="!!warnSwitchOn && !!warnTrigger.has" ng-click="warnTrigger.show = true;"></i>\n        <div class="dropdown-wrap warn-trigger-wrapper" ng-if="!!warnTrigger.show">\n            <p class="warn-trigger-title font-w-b text-left"></p>\n            <div class="warn-trigger-text line-height-20">\n                <p class="line-height-16 mt4" ng-repeat="item in warnTrigger.info track by $index">{{item.text}}</p>\n            </div>\n            <p class="cr-bdp mt8 text-decoration-underline" ng-click="showSetWarningDialog();warnTrigger.show = false;"></p>\n        </div>\n    </a>\n    <div dash-filter="" adv-date-list="child.meta.adv_date_list" chart-options="draw_chart_url[child.dom_id].options" opts="item.children[0]" chart-mode="dashboard" ng-if="chartOptPermission.dashFilter">\n    </div>\n\n    <advance-sort ng-if="chartOptPermission.sort" chart-options="draw_chart_url[child.dom_id].options" chart-meta="child.meta" drill-level="drill_level" bdp-chart-obj="$bdpChart" chart-mode="dashboard"></advance-sort>\n    \n    <div class="pr bdp-icon-wrap chart-info-summary-icon" click-outside="operateView.chartArgShow = false" outside-active="operateView.chartArgShow" ng-if="operateView.chartArgIf" ng-click="operateView.chartArgShow = true">\n        <i class="bdp-icon ico-parameter" flash-guide="chartArgsDashboard" fg-show="guideApi.chartArgsDashboard && operateView.chartArgIf"></i>\n        <div chart-args-use="" chart-options="draw_chart_url[child.dom_id].options" arg-view-meta="child.meta" chart-mode="dashboard" ng-if="operateView.chartArgShow" class="dash-chart-args-use"></div>\n    </div>\n    <div operate-more="" data-chart-url="draw_chart_url[child.dom_id]" opts="item.children[0]" ng-hide="global.hideChartMore" ng-if="chartOptPermission.more"></div>\n    </div>\n</div>\n');
    $templateCache.put('/static/dashboard-core/dash-filter/dash-filter.html', '<div bindonce="" click-outside="show_dash_filter = false;" outside-active="show_dash_filter" ng-class="{\'is-show-wrap-bg\': show_dash_filter}" class="dash-filter bdp-icon-wrap" ng-show="show_filter">\n    <i class="bdp-icon ico-filter-white fs-filter-icon"></i>\n    <i class="bdp-icon ico-filter" ng-class="{\'ico-filter-active\':isActive, \'ico-always-highlight\':isActive}" ng-click="handleFilterPos($event)"></i>\n    <div class="bd filter-i-w J_filterLayer" ng-show="show_dash_filter">\n        <dl class="filter-i nowrap" ng-class="{\'disable\':it.disabled}" ng-repeat="it in filter_list_inner">\n            <dt class="nowrap" title="{{it.name}}{{setAdvanceAggregatorName(it)}}" ng-if="!(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\') ">{{it.name}}{{setAdvanceAggregatorName(it)}}</dt>\n            <dt class="nowrap" title="{{it.nick_name}}" ng-if="(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\') ">{{it.nick_name}}</dt>\n            <dd click-outside="show_options[it.fid+it.uniq_id] = false" outside-active="show_options[it.fid+it.uniq_id]" ng-if="it.data_type !== \'date\' && it.data_type !== \'number\' && !it.hasOwnProperty(\'aggregator\') ">\n                <div class="filter-i-list-w">\n                    <p class="filter-i-name" ng-class="{\'selected\': show_options[it.fid+it.uniq_id]}" ng-if="!innerFilterModule.isShowFilter(it.fid,it.uniq_id) " ng-click="innerFilterModule.getItemList(opts.meta,it);">\n                        <span ng-if="!fullscreen && it.range_type != 0" class="nowrap" title="{{it.range | dash_sub_date:it}}">\n                            {{it.range | dash_sub_date:it}}\n                        </span>\n                        <span ng-if="!fullscreen && it.range_type == 0 " class="nowrap" title="\u81EA\u5B9A\u4E49">\u81EA\u5B9A\u4E49</span>\n                        <span ng-if="fullscreen && ( (it.is_defined && it.rangeNumber != 1) || it.range_type == 0 )" class="nowrap" title="\u81EA\u5B9A\u4E49">\u81EA\u5B9A\u4E49</span>\n                        <span ng-if="fullscreen && it.is_defined && it.rangeNumber == 1 && it.range_type != 0" class="nowrap" title="{{it.range | sub_date:it}}">\n                            {{it.rangeFirstField | dash_sub_date:it}}\n                            <em ng-if="it.rangeFirstField && it.data_type == \'date\' && it.granularity == \'week\'">\n                                ({{it.rangeFirstField | weekFormat:it.rangeFirstField}})\n                            </em>\n                        </span>\n                        <span ng-if="fullscreen && !it.is_defined && it.range_type != 0 " class="nowrap" title="{{it.range | sub_date:it}}">\n                            {{it.range | sub_date:it}}\n                        </span>\n                        <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                    </p>\n\n                    <p class="filter-i-name" ng-class="{\'selected\': show_options[it.fid+it.uniq_id]}" ng-if="innerFilterModule.isShowFilter(it.fid,it.uniq_id) && (it.rangeNumber != 1 || it.range_type == 0 )" ng-click="innerFilterModule.getItemList(opts.meta,it);">\n                        <span class="nowrap">\u81EA\u5B9A\u4E49</span>\n                        <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                    </p>\n                    <p class="filter-i-name" ng-class="{\'selected\': show_options[it.fid+it.uniq_id]}" ng-if="innerFilterModule.isShowFilter(it.fid,it.uniq_id) && it.rangeNumber == 1 && it.range_type != 0" ng-click="innerFilterModule.getItemList(opts.meta,it);">\n                        <span class="nowrap">\n                            {{it.rangeFirstField | dash_sub_date:it}}\n                        </span>\n                        <em ng-if="it.rangeFirstField && it.data_type == \'date\' && it.granularity == \'week\'">\n                            ({{it.rangeFirstField | weekFormat:it.rangeFirstField}})\n                        </em>\n                        <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                    </p>\n                    <div class="filter-i-list" ng-show="show_options[it.fid+it.uniq_id] && !it.disabled" ng-style="adjustWidth[it.fid]">\n\n                        <div ng-loading-gif="" size="size-1x" placeholder="true" ng-show="showLoading"></div>\n                        <div class="query-box auto" ng-if="(innerFilterItems[it.fid].total <= 100 && innerFilterItems[it.fid].list.length > 20)">\n                            <input type="text" class="query-text" ng-input-text="" ng-keyup="filterQueryModule.enterToQuery({\'e\':$event,\'filter\':it,\'is_advance\':false,\'real_search\':false})" ng-model="queryKwd[it.fid]">\n                        </div>\n                        <div ng-if="innerFilterItems[it.fid].total > 100" ng-show="!showLoading" class="query-box">\n                            <input type="text" ng-model="queryKwd[it.fid]" ng-keyup="filterQueryModule.enterToQuery({\'e\':$event,\'filter\':it,\'is_advance\':false,\'real_search\':true})" class="query-text">\n                            <a class="bdp-icon-wrap query-btn" ng-click="filterQueryModule.query(it,false)">\n                                <i class="bdp-icon ico-search"></i>\n                            </a>\n                        </div>\n                        <ul>\n                            <li ng-show="!showLoading && it.show_all">\n                                <a class="cursor-pointer" ng-click="innerFilterModule.setInnerFilter({range:[],index:$index,fid:it.fid,type:it.data_type,uniq_id:it.uniq_id});" ng-class="{\'active\':it.range && it.range.length == 0 }">\u5168\u90E8</a>\n                            </li>\n                            <li ng-show="!showLoading" ng-repeat="range in innerFilterItems[it.fid].list | query_inner:innerFilterItems[it.fid].keyword:\'\':it track by $index">\n                                <a class="nowrap cursor-pointer" title="{{range | sub_date:it}}" ng-class="{\'active\': it.range[0] == range }" ng-click="innerFilterModule.setInnerFilter({range:[range],index:$parent.$parent.$index,fid:it.fid,type:it.data_type,uniq_id:it.uniq_id})">{{range | sub_date:it}}</a>\n                            </li>\n\n                            <li ng-if="innerFilterItems[it.fid].list.length == 0" ng-show="!showLoading" class="empty" style="padding:3px">\n                                <p>\u65E0\u68C0\u7D22\u7ED3\u679C</p>\n                            </li>\n                        </ul>\n                    </div>\n                </div><span class="filter-i-adv" ng-click="innerFilterModule.getItemList(opts.meta,it,innerFilterModule.openAdvanceModal);">\u591A\u9009</span>\n            </dd>\n\n            <dd click-outside="show_options[it.fid+it.uniq_id] = false" outside-active="show_options[it.fid+it.uniq_id]" ng-if="it.data_type === \'date\' && !it.hasOwnProperty(\'aggregator\')">\n                <div class="filter-i-list-w">\n                    <p class="filter-i-name" ng-class="{\'selected\': show_options[it.fid+it.uniq_id]}" ng-if="it.granularity !== \'\'" ng-click="innerFilterModule.getItemList(opts.meta,it);">\n\n                        <span ng-if="!fullscreen" class="nowrap" title="{{it.range | dash_sub_date:it}}">\n                            {{it.range | dash_sub_date:it}}\n                            <em ng-if="it.range[0] && it.granularity == \'week\'">\n                                ({{it.range[0] | weekFormat}})\n                            </em>\n                        </span>\n                        <span ng-if="fullscreen && it.is_defined" class="nowrap" title="{{it.range | sub_date:it}}">\u81EA\u5B9A\u4E49</span>\n                        <span ng-if="fullscreen && !it.is_defined" class="nowrap" title="{{it.range | sub_date:it}}">\n                            {{it.range | sub_date:it}}\n                            <em ng-if="it.range[0] && it.granularity == \'week\'">\n                                ({{it.range[0] | weekFormat}})\n                            </em>\n                        </span>\n                        <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                    </p>\n\n                    <p class="filter-i-name" ng-class="{\'selected\': show_options[it.fid+it.uniq_id]}" ng-if="!it.granularity" ng-click="innerFilterModule.getItemList(opts.meta,it);">\n\n                        <span class="nowrap" ng-if="fullscreen" title="{{it.range | format_date:adv_date_list:it.name}}">\n                            {{it.range | format_date:adv_date_list:it.name}}\n                        </span>\n                        <span class="nowrap" ng-if="!fullscreen" title="{{it.range | format_date:adv_date_list}}">\n                            {{it.range | format_date:adv_date_list}}\n                        </span>\n                        <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                    </p>\n                    <div class="filter-i-list" ng-show="show_options[it.fid+it.uniq_id] && !it.disabled" ng-style="adjustWidth[it.fid]">\n                        \n                        <div ng-loading-gif="" size="size-1x" placeholder="true" ng-show="showLoading"></div>\n                        <div class="query-box auto" ng-if="(innerFilterItems[it.fid].total <= 100 && innerFilterItems[it.fid].list.length > 20)">\n                            <input type="text" class="query-text" ng-model="queryKwd[it.fid]" ng-input-text="" ng-keyup="filterQueryModule.enterToQuery({\'e\':$event,\'filter\':it,\'is_advance\':false,\'real_search\':false})">\n                        </div>\n                        <div ng-if="innerFilterItems[it.fid].total > 100" ng-show="!showLoading" class="query-box">\n                            <input type="text" ng-model="queryKwd[it.fid]" ng-keyup="filterQueryModule.enterToQuery({\'e\':$event,\'filter\':it,\'is_advance\':false,\'real_search\':true})" class="query-text">\n                            <a class="bdp-icon-wrap query-btn" ng-click="filterQueryModule.query(it,false)">\n                                <i class="bdp-icon ico-search"></i>\n                            </a>\n                        </div>\n\n                        <ul ng-if="!it.granularity" ng-show="!showLoading">\n                            <li>\n                                <a ng-class="{\'active\':it.range[0] == \'\' || it.range.length == 0}" ng-show="it.show_all" ng-click="innerFilterModule.setInnerFilter({range:[],index:$parent.$index,fid:it.fid,type:\'date\',uniq_id:it.uniq_id})">\u5168\u90E8\u65F6\u95F4</a>\n                            </li>\n                            <li ng-repeat="adv in innerFilterItems[it.fid].list">\n                                <a class="nowrap pointer" title="{{adv.name}}" ng-class="{\'active\':it.range[0] == adv.opt_id}" ng-click="innerFilterModule.setInnerFilter({range:[adv.opt_id],index:$parent.$index,fid:it.fid,type:\'date\',uniq_id:it.uniq_id})">{{adv.name}}</a>\n                            </li>\n                            <li>\n                                <a class="cursor-pointer" ng-class="{\'active\':it.range.length == 2}" ng-click="innerFilterModule.showDatePicker($parent.$index,it.range,it.fid)" title="\u81EA\u5B9A\u4E49\u65F6\u95F4\u6BB5">\u81EA\u5B9A\u4E49\u65F6\u95F4\u6BB5</a>\n                            </li>\n                        </ul>\n\n                        <!--granularity not null-->\n                        <ul ng-if="it.granularity !== \'\'">\n                            <li ng-show="it.show_all">\n                                <a ng-class="{\'active\':it.range[0] == \'\'}" ng-show="it.show_all" ng-click="innerFilterModule.setInnerFilter({range:[],index:$parent.$index,fid:it.fid,type:\'date\',uniq_id:it.uniq_id})">\u5168\u90E8\u65F6\u95F4</a>\n                            </li>\n                            <li ng-if="it.granularity !== \'week\'" ng-repeat="range in innerFilterItems[it.fid].list | query_inner:innerFilterItems[it.fid].keyword:it.granularity track by $index">\n                                <a class="nowrap cursor-pointer" title="{{range | timestamp2LocaleDate:it.granularity}}" ng-click="innerFilterModule.setInnerFilter({range:[range],index:$parent.$parent.$index,fid:it.fid,type:it.data_type,uniq_id:it.uniq_id})">{{range | timestamp2LocaleDate:it.granularity}}</a>\n                            </li>\n                            <li ng-if="it.granularity == \'week\'" ng-repeat="range in innerFilterItems[it.fid].list | query_inner:innerFilterItems[it.fid].keyword:it.granularity track by $index">\n                                <a class="nowrap cursor-pointer" title="{{range | sub_date:it}}({{range | weekFormat}})" ng-click="innerFilterModule.setInnerFilter({range:[range],index:$parent.$parent.$index,fid:it.fid,type:it.data_type,uniq_id:it.uniq_id})">{{range | sub_date:it}}<span ng-if="it.data_type == \'date\' && it.granularity == \'week\'">({{range | weekFormat}})</span></a>\n                            </li>\n\n                        </ul>\n                    </div>\n                </div>\n            </dd>\n\n            <dd ng-if="it.data_type === \'number\' || ( it.data_type !=\'number\' && it.hasOwnProperty(\'aggregator\') ) " click-outside="show_options[it.fid+it.uniq_id] = false" outside-active="show_options[it.fid+it.uniq_id]">\n                <div class="filter-i-list-w number-filter-i-list">\n                    <p class="filter-i-name name" ng-class="{\'selected\': show_options[it.fid+it.uniq_id]}" ng-if="!innerFilterModule.isShowFilter(it.fid,it.uniq_id)" ng-click="innerFilterModule.getItemListForNumber(opts.meta,it);">\n                        <span ng-if="!fullscreen" class="nowrap" title="{{numberConditionFormatString[it.fid+it.uniq_id]}}">\n                            {{numberConditionFormatString[it.fid+it.uniq_id]}}\n                        </span>\n                        <span ng-if="fullscreen && (it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\') " class="nowrap" title="{{it.nick_name}}{{numberConditionFormatString[it.fid+it.uniq_id]}}">\n                            {{it.nick_name}}{{numberConditionFormatString[it.fid+it.uniq_id]}}\n                        </span>\n                        <span ng-if="fullscreen && !(it.hasOwnProperty(\'nick_name\') && it.nick_name !==\'\') " class="nowrap" title="{{it.name}}{{setAdvanceAggregatorName(it)}}{{numberConditionFormatString[it.fid+it.uniq_id]}}">\n                            {{it.name}}{{setAdvanceAggregatorName(it)}}{{numberConditionFormatString[it.fid+it.uniq_id]}}\n                        </span>\n                        <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                    </p>\n                    <div class="filter-i-list" ng-style="adjustWidth[it.fid]" ng-show="show_options[it.fid+it.uniq_id]">\n                        \n                        <div ng-loading-gif="" size="size-1x" placeholder="true" ng-show="showLoading"></div>\n                        <div ng-show="!showLoading" class="select-box">\n                            <select ng-model="innerFilterItems[it.fid+it.uniq_id].numOpt" ng-options="opt.value as opt.text for opt in numberInnerFilterMap" ng-change="changeNumberOpt(opts.meta, it, innerFilterItems[it.fid+it.uniq_id].numOpt)"></select>\n                        </div>\n                        <ul ng-show="!showLoading">\n                            <li class="none-filter-range" ng-if="nullRange[it.fid+it.uniq_id]">\u65E0\u8303\u56F4</li>\n                            <li ng-loading-gif="" size="size-1x" placeholder="true" ng-show="rangeLoading"></li>\n                            <li class="range range-all" ng-if="!nullRange[it.fid+it.uniq_id] && defaultRange[it.fid+it.uniq_id].length > 0 && innerFilterItems[it.fid+it.uniq_id].numOpt == -1">\n                                {{defaultRange[it.fid+it.uniq_id][0]}}~{{defaultRange[it.fid+it.uniq_id][1]}}\n                            </li>\n                            <li class="range" ng-if="!nullRange[it.fid+it.uniq_id] && defaultRange[it.fid+it.uniq_id].length == 0 && innerFilterItems[it.fid+it.uniq_id].numOpt != -1">\n                                <input type="number" ng-model="innerFilterItems[it.fid+it.uniq_id].numRange[0]" ng-disabled="innerFilterItems[it.fid+it.uniq_id].numOpt == 8 || innerFilterItems[it.fid+it.uniq_id].numOpt == 9">\n                            </li>\n                            <li class="range" ng-if="!nullRange[it.fid+it.uniq_id] && defaultRange[it.fid+it.uniq_id].length == 0 && innerFilterItems[it.fid+it.uniq_id].numOpt == 12">\u81F3</li>\n                            <li class="range" ng-if="!nullRange[it.fid+it.uniq_id] && defaultRange[it.fid+it.uniq_id].length == 0 && innerFilterItems[it.fid+it.uniq_id].numOpt == 12">\n                                <input type="number" ng-model="innerFilterItems[it.fid+it.uniq_id].numRange[1]">\n                            </li>\n                        </ul>\n                        <div class="operator" ng-show="!showLoading">\n                            <button class="bdp-btn bdp-btn-ok" ng-click="innerFilterModule.setInnerFilterForNumber({fid:it.fid,index:$index,uniq_id:it.uniq_id})">\u786E\u5B9A</button>\n                        </div>\n\n                    </div>\n                </div>\n            </dd>\n        </dl>\n\n        <div class="fullscreen-hide" ng-class="{\'filter-i-compare-title pt10\': filter_list_inner.length > 0}" ng-show="opts.meta.compareDateFilter.length > 0">\u5BF9\u6BD4\u65E5\u671F\u7B5B\u9009</div>\n\n        <dl class="filter-i nowrap" ng-class="{\'disable\':it.disabled}" ng-repeat="item in opts.meta.compareDateFilter">\n\n            <dt class="nowrap" title="{{item.name}}">{{item.name}}</dt>\n            <dd click-outside="show_options[item.uniq_id] = false" outside-active="show_options[item.uniq_id]">\n                <div class="filter-i-list-w">\n                    <p class="filter-i-name nowrap" ng-click="toggleCmpDropdown($event, item)">\n                        <span class="nowrap fullscreen-hide" title="{{item.customName || item.aggregatorName}}">{{item.customName || item.aggregatorName}}</span>\n                        <span class="nowrap dash-hide" title="{{item.customName || getCmpDefaultName(item)}}">{{item.customName || getCmpDefaultName(item)}}</span>\n                        <i class="bdp-icon ico-triangle-down arrow-down"></i>\n                    </p>\n                    <div class="filter-i-list" ng-show="show_options[item.uniq_id]">\n                        <ul>\n                            <li>\n                                <a href="javascript:;" title="{{item.aggregatorName}}" ng-click="compareDateChange(\'default\', item)" ng-class="{\'active\': !item.compareType || item.compareType == \'default\'}">\n                                    {{item.aggregatorName}}\n                                </a>\n                            </li>\n                            <li>\n                                <a href="javascript:;" ng-click="compareDateChange(\'custom\', item)" ng-class="{\'active\': item.compareType == \'custom\'}" title="\u81EA\u5B9A\u4E49\u65E5\u671F">\u81EA\u5B9A\u4E49\u65E5\u671F</a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </dd>\n\n        </dl>\n    </div>\n</div>');
    $templateCache.put('/static/common/tpl/selectSearchList.html', '<div class="display-inline-block select-search-more-list" bindonce="">\n        <div class="select-search-list-wrap" click-outside="viewData.showList = false" outside-active="viewData.showList" ng-show="viewData.ordinaryUserFlag">\n                <div class="select-search-value pr16" ng-class="{\'opacity6\': viewData.mode == \'disabled\'}" ng-click="toggleList( $event )">\n                    <p class="select-search-text nowrap" title=" {{viewData.selectedText}}" ng-show="!!viewData.selectedText">\n                        <i ng-if="viewData.iconClass" class="bdp-icon mr4 {{viewData.iconClass}}"></i>\n                        <i ng-if="viewData.iconId" class="bdp-icon mr4 {{viewData.iconId}}"></i>\n                        {{viewData.selectedText}}\n                    </p>\n                    <p ng-show="!viewData.selectedText && viewData.defaultPlaceHolder"> {{viewData.defaultPlaceHolder}}</p>\n                    <i class="bdp-icon ico-triangle-down"></i>\n                </div>\n                <div class="search-list-box" ng-show="viewData.showList">\n                    <div class="query-box auto" ng-if="viewData.queryBoxShow && viewData.searchList.length > 5">\n                        <input type="text" class="query-text" ng-model="viewData.searchQuery" ng-class="{\'has-text\': viewData.searchQuery}" ng-keyup="doQuery()">\n                    </div>\n                    <div class="search-list-ul">\n                        <ul>\n                            <li ng-repeat="item in viewData.searchList track by $index" title="{{item[viewData.displayKey]}}" ng-click="selectItem(item);" ng-show="!viewData.searchQuery || item.selectHit">\n                                <i ng-if="item.iconClass" class="bdp-icon mr4 {{item.iconClass}}"></i>\n                                <i ng-if="item.iconId" class="bdp-icon mr4 {{item.iconId}}"></i>\n                                {{item[viewData.displayKey]}}\n                            </li>\n                            <li ng-show="!!viewData.searchQuery && viewData.hitQueryNum == 0 && (!showListLoading || !vmData.showListLoading)" class="no-query-item">\n                                \u65E0\u68C0\u7D22\u7ED3\u679C\n                            </li>\n                            <li ng-show="!viewData.searchQuery && viewData.searchList.length == 0 && (!showListLoading || !vmData.showListLoading)" class="no-query-item">\n                                \u65E0\u68C0\u7D22\u7ED3\u679C\n                            </li>\n                        </ul>\n                        <div ng-loading-gif="" ng-show="!!viewData.showListLoading || !!showListLoading" size="size-1x"></div>\n                    </div>\n                </div>\n        </div>\n\n        <div class="select-search-list-wrap" click-outside="viewData.showDataSource = false" outside-active="viewData.showDataSource" ng-if="workSheetFlag">\n                <div class="select-search-value pr16" ng-class="{\'opacity6\': viewData.mode == \'disabled\'}" ng-click="viewData.showDataSource = !viewData.showDataSource">\n                    <p>{{viewData.dataSourcePlaceHolder}}</p>\n                    <i class="bdp-icon ico-triangle-down"></i>\n                </div>\n                <div class="search-list-box" ng-show="viewData.showDataSource">\n                    <div class="search-list-ul">\n                        <ul>\n                            <li ng-repeat="res in viewData.dataSourceList" title="res.dataSource" ng-click="dataSourceSelect(res)">{{res.dataSource}}</li>\n                        </ul>\n                    </div>\n                </div>\n        </div>\n        <div class="select-search-list-wrap" click-outside="viewData.showDataType = false" outside-active="viewData.showDataType" ng-if="workSheetFlag">\n                <div class="select-search-value pr16" ng-class="{\'opacity6\': viewData.mode == \'disabled\'}" ng-click="viewData.showDataType = !viewData.showDataType">\n                    <p>{{viewData.dataTypePlaceHolder}}</p>\n                    <i class="bdp-icon ico-triangle-down"></i>\n                </div>\n                <div class="search-list-box" ng-show="viewData.showDataType">\n                    <div class="search-list-ul">\n                        <ul>\n                           <li ng-repeat="item in viewData.dataTypeList" title="item.dataType" ng-click="dataTypeSelect(item)">{{item.dataType}}</li>\n                        </ul>\n                    </div>\n                </div>\n        </div>\n        \n        <a class="search-btn" ng-if="workSheetFlag" ng-click="findWorkSheet()">\u67E5\u8BE2</a>\n</div>\n\n');
    $templateCache.put('/static/common/set-date-value/set-date-value.html', '<div class="set-date-value filter-date-picker">\n    <div class="display-inline-block pr">\n        <input type="text" class="daterange-input datepicker-{{$id}}" ng-model="dateVm.dateVal" ui-mask-placeholder="" ui-mask-placeholder-char="space" ng-disabled="dateVm.disable" ng-class="{\'daterange-invalid\': !dateVm.verifydate}" ui-mask="9999-99-99" ui-options="{clearOnBlur:false}" allow-invalid-value="true" model-view-value="true" ng-keyup="checkInputDateKeyup($event, \'date\')" ng-blur="checkInputDate($event, \'date\')" ng-click="dateVm.selectDate($event)">\n        <!-- <a ng-click="dateVm.selectDate($event)">\n            <i class="bdp-icon ico-type-date trigger-datepicker"></i>\n        </a> -->\n        <div date-picker="dateVm.dateVal" class="date-picker" date="" view="date" min-view="date" ng-show="dateVm.showStartPicker"></div>\n    </div>\n    <div class="pr start start-time" ng-hide="dateType == \'date\'" click-outside="dateVm.showStartTime = false" outside-active="dateVm.showStartTime">\n        <input type="text" class="input-time" ng-class="{\'daterange-invalid\':!dateVm.verifytime}" ng-model="dateVm.hour" ui-mask="99:99:99" ui-options="{clearOnBlur:false}" allow-invalid-value="true" model-view-value="true" ui-mask-placeholder="" ui-mask-placeholder-char="space" ng-disabled="dateVm.disable" ng-keyup="checkInputDateKeyup($event, \'time\')" ng-blur="checkInputDate($event, \'time\')" ng-click="dateVm.timeChange()">\n        <!-- <a class="bdp-icon-wrap daterange-time" >\n            <i class="bdp-icon ico-triangle-down"></i>\n        </a> -->\n        <ul class="dropdown-wrap" ng-show="dateVm.showStartTime">\n            <li class="dropdown-item" ng-repeat="time in dateVm.dateTimeByHalfHour" ng-click="selectTime(time);">{{time.label}}</li>\n        </ul>\n    </div>\n    <label class="set-date-value-rt" ng-hide="dateVm.unlimitedShow" ng-class="{\'ml24\':dateType == \'date\'}">\n        <input type="checkbox" ng-model="dateVm.unlimited" ng-change="dateVm.change()"> \u4E0D\u9650\n    </label>\n</div>');
    $templateCache.put('/static/dashboard-core/chart-operate/chart-operate-more.html', '\n<div class="chart-operate-more bdp-icon-wrap J-dot-dash-edit" ng-class="{\'active is-show-wrap-bg\':more_show == true}" click-outside="more_show = false" outside-active="more_show" ng-click="setOperatorPos($event, child.meta.ct_id, item);" ng-mouseleave="setOperatorIndex(false,false,item);" data-ct-id="{{child.meta.ct_id}}" bindonce="">\n    <i class="bdp-icon ico-more" title="\u66F4\u591A"></i>\n    <ul bindonce="" ng-show="more_show" class="dropdown-wrap">\n        <li ng-if="true || permision.allowExporting && [\'C200\'].indexOf(child.meta.drillChartType) < 0 && chartOptMorePermission.exportingChart" export-img="" data-mode="dashboard" data-setting="{{child.meta.dash_setting}}" data-filename="{{child.meta.name}}" class="dropdown-item">\u5BFC\u51FA\u56FE\u7247</li>\n        <li class="dropdown-item" ng-show="canExportExcel(child) && canExportSnapshot(child)" ng-mouseleave="export_data_more = false" ng-mouseenter="showItemMoreOperate($event, \'.J-export-data-more\', \'export_data_more\')">\n            <span>\u5BFC\u51FA\u6570\u636E</span>\n            <ul class="dropdown-wrap J-export-data-more" ng-show="export_data_more" click-outside="export_data_more = false" outside-active="export_data_more">\n                <li ng-if="canExportExcel(child)" export-excel="" data-mode="dashboard" class="dropdown-item">\u5BFC\u51FAExcel</li>\n                <li ng-if="canExportSnapshot(child)" class="dropdown-item" export-snapshot="" data-mode="dashboard">\u5FEB\u7167\u5DE5\u4F5C\u8868</li>\n            </ul>\n        </li>\n        <li ng-if="!proj_share && permision.dashOperate && child.meta.property == 0 && chartOptMorePermission.moveChart" ng-click="move_chart()" class="dropdown-item" title="">\u79FB\u52A8\u56FE\u8868</li>\n        <li ng-if="!proj_share && permision.dashOperate  && child.meta.property == 0 && chartOptMorePermission.copyChart" ng-click="copy_chart()" class="dropdown-item" title="">\u590D\u5236\u56FE\u8868</li>\n        <li ng-if="!proj_share && permision.dashOperate && child.meta.property == 0 && chartOptMorePermission.chartLink" ng-click="chartChain.open(child.meta)" class="pr chart-china-text dropdown-item" ng-class="{\'dropdown-item-disabled\': !child.meta.supportChain}">\n            <span>\u8054\u52A8\u8BBE\u7F6E</span>\n            <span class="del-chart-chain" ng-if="child.meta.chart_link.linked_chart_type == \'2\' && child.meta.supportChain" ng-click="chartChain.del($event,child.meta.ct_id)">\n                <i class="bdp-icon ico-trash"></i>\n            </span>\n        </li>\n        <li ng-if="!proj_share && permision.dashOperate && permision.showChartJump && child.meta.property == 0 && chartOptMorePermission.jumpChart" ng-click="chartDashJump.showDia(child.meta)" class="pr chart-china-text dropdown-item" title="" ng-class="{\'dropdown-item-disabled\': !chartDashJump.checkSupport(child.meta)}">\n            <span>\u8DF3\u8F6C\u8BBE\u7F6E</span>\n            <span class="del-chart-chain" ng-if="child.meta.chart_jump.can_jump == \'1\'" ng-click="chartDashJump.del($event, child.meta.ct_id)">\n                <i class="bdp-icon ico-trash"></i>\n            </span>\n        </li>\n        <li ng-if="!proj_share && permision.dashOperate && child.meta.property == 0 && (chartOptMorePermission.net_mod_allow || chartOptMorePermission.net_info_allow)" ng-click="setNetWorkSegment()" class="dropdown-item" title="">\u7F51\u6BB5\u8BBE\u7F6E</li>\n        <li ng-if="!proj_share && permision.dashOperate && child.meta.property == 0" ng-click="del()" class="dropdown-item" title="">\u5220\u9664</li>\n    </ul>\n</div>');
    $templateCache.put('/static/main-nav/header.html', '<header class="bdp-header-wraper clearfix" ng-controller="mainNavCtrl" bindonce="">\n    <h1 id="logo" class="logo" ng-if="enterprise_type != 3">\n        <!-- <img class="partner-login-logo ng-cloak" ng-src="{{userInfoObj.partnerLogoSrc}}" ng-if="userInfoObj && userInfoObj.is_personalized && enterprise_type != 9"/> -->\n        <a class="logo-link ng-cloak bdp-logo" ng-if="!(enterprise_type == 5 || enterprise_type == 6 || enterprise_type == 9) && userInfoObj.personalize_info.custom_logo == 0" ng-href="{{userInfoObj.personalize_info.logo_redirect}}">\n            BDP\n        </a>\n        <a class="logo-link ng-cloak bdp-logo" ng-if="!(enterprise_type == 5 || enterprise_type == 6 || enterprise_type == 9) && userInfoObj.personalize_info.custom_logo == 1 " ng-href="{{userInfoObj.personalize_info.logo_redirect}}">\n            BDP\n        </a>\n        <span class="logo-link ng-cloak" ng-class="{\'acewill-logo\': enterprise_type == 9}" ng-if="enterprise_type == 9">\n            Acewill\n        </span>\n    </h1>\n    <h1 class="logo-personal clearfix ng-cloak" ng-if="enterprise_type == 3">\n        <a class="logo-link ng-cloak" href="/home.html">\n            BDP\n        </a>\n    </h1>\n    <nav class="nav-wrap">\n        <ul class="nav-function clearfix ng-cloak">\n            <li class="nav-item ng-cloak" ng-if="permision.navDashboard" ng-class="{active: view == \'dashboard\'|| view==\'chart_edit\'}" ng-click="click_show_view(\'dashboard\')">\n                <div class="nav-item-title">\u4EEA\u8868\u76D8</div>\n            </li>\n            <li class="nav-item ng-cloak" ng-if="permision.navWorktable" ng-class="{active: view == \'worktable\'}" ng-click="click_show_view(\'data_source\')">\n                <div class="nav-item-title">\u5DE5\u4F5C\u8868</div>\n            </li>\n            <li class="nav-item nav-datasource ng-cloak" ng-if="permision.navDatabase" ng-class="{active: view == \'database\'}" ng-click="click_show_view(\'database\')">\n                <div class="nav-item-title">\u6570\u636E\u6E90</div>\n            </li>\n            <li class="nav-item ng-cloak" ng-if="permision.navAccount" ng-show="role && role !==\'user\'" ng-class="{active: view == \'account\'}" ng-click="click_show_view(\'account\')">\n                <div class="nav-item-title">\u8D26\u53F7\u6743\u9650</div>\n            </li>\n            <li class="nav-item nav-template ng-cloak" ng-if="permision.navTpl" ng-class="{active: view == \'template\'}" ng-click="click_show_view(\'template_home\')">\n                <div class="nav-item-title">\u6A21\u677F\u5206\u53D1</div>\n            </li>\n            <li class="nav-item ng-cloak" ng-if="permision.newTraining" ng-class="{active: view == \'training\'}" ng-click="click_show_view(\'training\')" style="position: relative">\n                <div class="nav-item-title">\u673A\u5668\u5B66\u4E60</div>\n            </li>\n            <li class="nav-item ng-cloak" ng-if="enterprise_type == 7" ng-class="{active: view == \'chart_template\'}" ng-click="click_show_view(\'chart_template\')">\n                <div class="nav-item-title">\u56FE\u8868\u6A21\u677F</div>\n            </li>\n            <li class="nav-item ng-cloak" ng-if="permision.navDataScreen" ng-class="{active: view == \'data_screen\'}" ng-click="click_show_view(\'data_screen\')">\n                <div class="nav-item-title">\u6570\u636E\u5927\u5C4F</div>\n            </li>\n        </ul>\n    </nav>\n    <div class="bdp-hd-set" ng-if="!permision.personalSetIcon">\n        <ul class="clearfix ng-cloak">\n            <li class="hd-set-item account-setting-clickBtn" ng-class="{\'active\':view == \'personal\'}" ng-hide="enterprise_type == 5 || enterprise_type == 6">\n                <a id="J_account_setting_btn" class="account-setting-name display-inline-block" ng-click="accountInfoSetting = !accountInfoSetting" title="\u8D26\u53F7\u8BBE\u7F6E">\n                    <span class="ng-cloak">\n                        <i class="bdp-icon ico-default-photo-32 ico-no-opacity" ng-if="!permision.isAuthorized && user.hasPhoto && !user.hasPhoto.show"></i>\n                        <img ng-if="!permision.isAuthorized && user.hasPhoto && user.hasPhoto.show" class="user-photo ng-cloak" ng-src="{{user.hasPhoto.url}}" width="22">\n                        <span ng-if="!!user.contact" ng-bind="user.contact"></span>\n                        <span ng-if="!user.contact" bo-bind="user.username"></span>\n                    </span>\n                </a>\n                <i class="arrow-top-model J_user_setting_account" ng-if="accountInfoSetting && !permision.isAuthorized && permision.accountDetailSetting"></i>\n                <div class="view-header-seperate-line"></div>\n            </li>\n            <li class="fl pr J_user_setting_account" ng-show="accountInfoSetting && !permision.isAuthorized && permision.accountDetailSetting" click-outside="accountInfoSetting = false" outside-active="accountInfoSetting" outside-if-not="J_account_setting_btn">\n                <div class="account-info-model">\n                    <div class="account-info-model-name">\n                        <span class="account-info-photo">\n                            <img class="user-photo ng-cloak" ng-src="{{user.hasPhoto.url}}">\n                            <span class="account-info-photo-hover" ng-click="changeUserPhoto()">\u66F4\u6539</span>\n                        </span>\n                        <a>\n                            <span class="user-contact nowrap" title="{{user.contact}}" ng-bind="user.contact"></span>\n                        </a>\n                    </div>\n                    <div class="account-info-model-info">\n                        <dl>\n                            <dt>\n                                <i class="bdp-icon ico-account-personalinfo ico-always-highlight"></i>\n                                <span>\u4E2A\u4EBA\u4FE1\u606F</span>\n                                <i class="bdp-icon ico-account-edit" ng-click="editUserBaseInfo()"></i>\n                            </dt>\n                            <dd class="account-info-model-info-nameDD nowrap" title="{{user.contact}}">\n                                <span class="account-info-model-info-title">\u59D3\u540D</span>\n                                <span class="no-margin no-padding" ng-bind="user.contact"></span>\n                            </dd>\n                            <dd class="account-info-model-info-sexDD nowrap">\n                                <span class="account-info-model-info-title">\u6027\u522B</span>\n                                <span ng-if="user.sex == \'\u5973\'">\u5973</span>\n                                <span ng-if="user.sex == \'\u7537\'">\u7537</span>\n                                <span ng-if="!user.sex">\u672A\u586B\u5199</span>\n                            </dd>\n                            <dd class="account-info-model-info-positionDD nowrap" title="{{user.position}}">\n                                <span class="account-info-model-info-title">\u804C\u4F4D</span>\n                                <span ng-if="!user.position">\u672A\u586B\u5199</span>\n                                <span ng-if="user.position">{{user.position}}</span>\n                            </dd>\n                            <dd class="account-info-model-info-mobileDD nowrap" title="{{user.mobile}}">\n                                <span class="account-info-model-info-title">\u624B\u673A</span>\n                                <span ng-if="user.mobile" class="no-margin no-padding">{{user.mobile}}</span>\n                                <span ng-if="!user.mobile" class="no-margin no-padding">\u672A\u7ED1\u5B9A</span>\n                            </dd>\n                            <dd class="account-info-model-info-emailDD nowrap" title="{{user.email}}">\n                                <span class="account-info-model-info-title">\u90AE\u7BB1</span>\n                                <span ng-if="user.email" class="no-margin no-padding">{{user.email}}</span>\n                                <span ng-if="!user.email" class="no-margin no-padding">\u672A\u7ED1\u5B9A</span>\n                            </dd>\n                        </dl>\n                    </div>\n                    <div class="account-info-model-pwd">\n                        <p>\n                            <i class="bdp-icon ico-account-password ico-always-highlight"></i>\n                            <span>\u4FEE\u6539\u5BC6\u7801</span>\n                            <i class="bdp-icon ico-account-edit" ng-click="editPassword();"></i>\n                        </p>\n                    </div>\n                </div>\n            </li>\n            <li class="hd-set-item pl8 pr8" ng-show="permision.isAuthorized" ng-model="user.username"></li>\n            <li class="hd-set-item pl8 pr8" ng-show="permision.showAllSetting" ng-click="goWarnList()">\n                <span class="bdp-icon-wrap" ng-class="{\'unread\':unread > 0}" title="\u62A5\u8B66\u6D88\u606F">\n                    <i class="bdp-icon ico-alarm-line"></i>\n                </span>\n            </li>\n            <li id="J_sys_setting_btn" class="hd-set-item pl8 pr8 cursor-pointer" ng-show="permision.sysSetting" ng-click="userSystemSetting.show = !userSystemSetting.show;hideOfflineTipAction();">\n                <a title="\u7CFB\u7EDF\u8BBE\u7F6E">\n                    <span id="J_account_setting" class="bdp-icon-wrap pr display-inline-block">\n                        <i class="bdp-icon ico-setting"></i>\n                        <i ng-show="log_unread || noticeStore.offlineTaskNewFile" class="unwatched" ng-class="{\'active\':log_unread || noticeStore.offlineTaskNewFile}"></i>\n                    </span>\n                </a>\n                <i class="arrow-top-model J_user_setting_layer" ng-if="userSystemSetting.show"></i>\n                <i ng-show="generatedCoordinateList.success.length || generatedCoordinateList.failed.length" class="generate-coordinate-triangle"></i>\n            </li>\n            <li class="fl pr J_user_setting_layer" ng-show="userSystemSetting.show" click-outside="userSystemSetting.show = false" outside-active="userSystemSetting.show" outside-if-not="J_sys_setting_btn">\n                <div class="account-setting" ng-class="{\'right-account-setting\': (enterprise_type == 9)}">\n                    <ul>\n                        <li>\n                            <div class="account-setting-topbar">\n                                <i class="bdp-icon ico-theme mr8"></i>\n                                <span>\u4E3B\u9898</span>\n                            </div>\n                            <div class="skin-rectangle-toggle" ng-repeat="theme in themes | orderBy:\'id\':true track by $index" ng-click="changeSelectedTheme(theme.id)" bo-class="{\'mr16\': $index == 0}">\n                                <div class="skin-rectangle">\n                                    <div class="theme-active-img">\n                                        <div class="theme-bg {{theme.backgroundImg}}" ng-class="{\'theme-active\': theme.id == usedThemeId}"></div>\n                                    </div>\n                                    <i class="bdp-icon ico-sheet-active" ng-if="usedThemeId == theme.id"></i>\n                                    <div class="theme-active-border" ng-class="{\'theme-active\': theme.id == usedThemeId}"></div>\n                                    <span class="account-theme-name" bo-bind="theme.name"></span>\n                                </div>\n                            </div>\n                        </li>\n                        <li class="cursor-pointer">\n                            <div ng-click="select_language_flag = !select_language_flag" click-outside="select_language_flag = false" outside-active="select_language_flag">\n                                <i class="bdp-icon ico-language mr8"></i>\n                                <span>\u8BED\u8A00</span>\n                                <span class="select-triangle">\n                                    <span bo-bind="current_language"></span>\n                                    <i class="bdp-icon ico-triangle-down" ng-show="!select_language_flag"></i>\n                                    <i class="bdp-icon ico-triangle-up ng-hide" ng-show="select_language_flag"></i>\n                                </span>\n                                <div class="account-setting-language ng-hide" ng-show="select_language_flag">\n                                    <p ng-click="changeLanguage(\'zh\')" class="zh" ng-class="{\'active\': language == \'zh\'}">\u7B80\u4F53\u4E2D\u6587</p>\n                                    <p ng-click="changeLanguage(\'en\')" class="en" ng-class="{\'active\': language == \'en\'}">English</p>\n                                </div>\n                            </div>\n                        </li>\n                        <li ng-if="permision.newFeatures && userInfoObj.personalize_info.product_update_permission">\n                            <a href="/home/update.html" target="_blank" ng-click="readNewFeatures();" class="label_update pr display-inline-block">\n                                <i class="bdp-icon ico-update mr8"></i>\n                                <i ng-show="log_unread" class="unwatched" ng-class="{\'active\':log_unread}"></i>\n                                <span>\u4EA7\u54C1\u66F4\u65B0\u65E5\u5FD7</span>\n                            </a>\n                        </li>\n\n                        <li ng-if="!permision.isAuthorized && permision.authorizedPrivilege && userInfoObj.personalize_info.authorization_management">\n                            <a ui-sref="author_manage" class="author-manage-nav" ng-click="hideUserSystemSetting();">\n                                <i class="bdp-icon ico-authority mr8"></i>\n                                <span>\u6388\u6743\u7BA1\u7406</span>\n                            </a>\n                        </li>\n                        <li ng-if="permision.offlineTaskFlag">\n                            <a ng-click="showOfflineTask();" class="label_update cursor-pointer pr display-inline-block">\n                                <i class="bdp-icon ico-download-task mr8"></i>\n                                <i ng-show="noticeStore.offlineTaskNewFile" class="unwatched" ng-class="{\'active\': noticeStore.offlineTaskNewFile}"></i>\n                                <span>\u79BB\u7EBF\u4EFB\u52A1</span>\n                            </a>\n                        </li>\n                        <li ng-if="permision.showDeveloper && userInfoObj.personalize_info.developer_permission">\n                            <a class="label_update cursor-pointer" href="/platform" target="_blank">\n                                <i class="bdp-icon ico-platform mr8"></i>\n                                <span>\u5F00\u53D1\u8005\u4E2D\u5FC3</span>\n                            </a>\n                        </li>\n                        <li ng-if="permision.showExportoverall">\n                            <a class="label_update cursor-pointer" href="#/export_overall">\n                                <i class="bdp-icon ico-export mr8"></i>\n                                <span>\u6574\u4F53\u89E3\u51B3\u65B9\u6848\u7BA1\u7406</span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </li>\n            <li class="generate-coordinate-success" ng-show="generatedCoordinateList.success.length || generatedCoordinateList.failed.length">\n                <div>\n                    <div class="generate-coordinate-status-title" ng-show="generatedCoordinateList.success.length > 0">\n                        <span>\u4E0B\u5217\u5DE5\u4F5C\u8868\uFF0C\u65B0\u589E\u5B57\u6BB5\u751F\u6210\u6210\u529F</span>\n                        <i class="generate-coordinate-status-close cursor-pointer bdp-icon ico-cancel" ng-click="closeGeneratedTip()"></i>\n                    </div>\n                    <div class="generate-coordinate-status-content" ng-repeat="table in generatedCoordinateList.success">\n                        <span class="generate-coordinate-status-txt nowrap" bo-bind="table.tb_name"></span>\n                        <a class="generate-coordinate-status-detail cr-bdp cursor-pointer text-decoration-underline" ng-click="checkTableDetail(table.tb_id)">\u67E5\u770B</a>\n                    </div>\n                    <div class="generate-coordinate-status-title" ng-show="generatedCoordinateList.failed.length > 0">\n                        <span>\u4E0B\u5217\u5DE5\u4F5C\u8868\uFF0C\u65B0\u589E\u5B57\u6BB5\u751F\u6210\u5931\u8D25</span>\n                    </div>\n                    <div class="generate-coordinate-status-content" ng-repeat="table in generatedCoordinateList.failed">\n                        <span class="generate-coordinate-status-txt nowrap" bo-bind="table.tb_name"></span>\n                        <a class="generate-coordinate-status-detail cr-bdp cursor-pointer text-decoration-underline" ng-click="checkTableDetail(table.tb_id)">\u67E5\u770B</a>\n                    </div>\n                </div>\n            </li>\n            <li class="J-offline-task-wrap fl pr ng-cloak" ng-if="noticeStore.showOfflineTip">\n                <div class="task-ready-tip-wrap clearfix">\n                    <i class="task-ready-tip-top"></i>\n                    <div class="task-ready-title fr">\n                        <i class="bdp-icon ico-gis-close cursor-pointer" ng-click="hideOfflineTipAction();"></i>\n                    </div>\n                    <div class="task-ready-content fl">\n                        <div class="task-ready-name-wrap" ng-if="offlineTaskData.offlineFileName">\n                            <p class="task-ready-name nowrap" bo-title="offlineTaskData.offlineFileName" bo-bind="offlineTaskData.offlineFileName"></p>\n                            <span ng-if="offlineTaskData.offlineStatus == 0">\u6570\u636E\u5BFC\u51FA\u6210\u529F</span>\n                            <span ng-if="offlineTaskData.offlineStatus == 2">\u6570\u636E\u5BFC\u51FA\u5931\u8D25</span>\n                        </div>\n                        <div class="task-ready-name-wrap" ng-if="!offlineTaskData.offlineFileName">\u79BB\u7EBF\u4EFB\u52A1\u6709\u65B0\u52A8\u6001</div>\n                        <div class="cr-bdp font-underline task-ready-detail cursor-pointer display-inline-block" ng-click="showOfflineTask();hideOfflineTipAction();">\u67E5\u770B</div>\n                    </div>\n                </div>\n            </li>\n            <!-- \u65B0\u589E\u4E3B\u9898\u8BBE\u7F6E\u5165\u53E3 end -->\n            <li class="hd-set-item pl8 pr16 pr" ng-if="permision.helpLink && userInfoObj.personalize_info.help_center_permission">\n                <a class="ng-cloak display-inline-block" ng-href="{{helpPath}}" target="_blank" title="\u5E2E\u52A9\u4E2D\u5FC3">\n                    <span class="bdp-icon-wrap">\n                        <i class="bdp-icon ico-help-bold"></i>\n                    </span>\n                </a>\n            </li>\n            <li class="hd-set-item pl8 pr8" ng-show="permision.showAllSetting && permision.showLogout" ng-controller="LogoutController" ng-click="logout()">\n                <a title="\u9000\u51FA\u767B\u5F55">\n                    <i class="bdp-icon ico-logout"></i>\n                </a>\n            </li>\n        </ul>\n        <div class="hd-set-expired-reminder ng-cloak" ng-if="expireInfo.status == 1" ng-click="expiredReminder()">\u6388\u6743\u5269\u4F59{{expireInfo.last_days}}\u5929</div>\n    </div>\n    <div class="bdp-hd-set personal-hd-set" ng-if="permision.personalSetIcon">\n        <ul class="clearfix ng-cloak">\n            <li class="hd-set-item mr8" ng-if="personalInfo.activity11">\n                <a class="btn-nav-activity" href="/doubule11.html" target="_blank"></a>\n            </li>\n            <li class="hd-set-item pl8 pr8 mr8" ng-if="!permision.isCloudMarket" ng-click="navMemUpgradeLog(\'nav\');">\n                <a class="display-inline-block font-w-b cr-bdp text-decoration-hover-underline ng-hide" href="/member.html" target="_blank" ng-show="memberData.vipLevel == 0">\u5347\u7EA7\u4F1A\u5458</a>\n                <a class="display-inline-block font-w-b cr-bdp text-decoration-hover-underline ng-hide" href="/member-pay.html#?vipLevel={{memberData.vipLevel}}" target="_blank" ng-show="memberData.vipLevel > 0">\u5347\u7EA7/\u7EED\u8D39</a>\n            </li>\n            <li class="hd-set-item pl8 pr8 pr" ng-class="{\'active\':view == \'personal\'}" ng-hide="enterprise_type == 5 || enterprise_type == 6">\n                <div class="account-info" click-outside="accountInfoSetting = false" outside-active="accountInfoSetting" outside-if-not="J_account_setting_btn">\n\n                    <div class="display-inline-block nav-user-logo after-triangle pr" id="J_account_setting_btn" ng-click="accountInfoSetting = !accountInfoSetting" ng-class="{\'with-mem-gold\': memberData.vipLevel == 2, \'with-mem-silver\': memberData.vipLevel == 1}" title="\u8D26\u53F7\u8BBE\u7F6E">\n                        <img class="user-logo-img ng-cloak" ng-src="/static/images/user/{{photo_id}}-head-pic.png" width="22">\n                    </div>\n\n                    <div class="box-account-tip account-info-content J_user_setting_account" ng-show="accountInfoSetting && !permision.isAuthorized && permision.accountDetailSetting">\n                        <div class="top-split-line user-info clearfix">\n                            <div class="user-logo" ng-click="modifyPic()">\n                                <img class="user-logo-img ng-cloak" ng-src="/static/images/user/{{photo_id}}-head-pic.png">\n                            </div>\n                            <div class="user-content">\n                                <div>\n                                    <span class="user-contact nowrap" title="{{user.contact}}" ng-bind="user.contact"></span>\n                                    <a class="cursor-pointer" href="/member-pay.html#?vipLevel={{memberData.vipLevel}}" target="_blank" ng-if="!permision.isCloudMarket" ng-click="navMemUpgradeLog(\'icon\');">\n                                        <i class="bdp-icon ico-no-opacity" ng-class="{\'ico-mem-gold\': memberData.vipLevel == 2, \'ico-mem-silver\': memberData.vipLevel == 1}" ng-if="memberData.vipLevel >= 1"></i>\n                                    </a>\n                                    <a class="cursor-pointer" ng-if="permision.isCloudMarket">\n                                        <i class="bdp-icon ico-no-opacity" ng-class="{\'ico-mem-gold\': memberData.vipLevel == 2, \'ico-mem-silver\': memberData.vipLevel == 1}" ng-if="memberData.vipLevel >= 1"></i>\n                                    </a>\n                                </div>\n                                <div class="capacity-wrap">\n                                    <div class="capacity-use" ng-style="{\'width\': personalInfo.capacity_info.used / personalInfo.capacity_info.capacity * 100 + \'%\'}"></div>\n                                </div>\n                                <div class="clearfix">\n                                    <span>{{personalInfo.capacity_info.used | formatStorageAccount}}</span>\n                                    <span class="font-text-tip">/{{personalInfo.capacity_info.capacity | formatStorageAccount}}</span>\n                                    <a class="font-w-b cr-bdp text-decoration-hover-underline fr" href="/member.html" target="_blank" ng-show="memberData.vipLevel == 0" ng-if="!permision.isCloudMarket" ng-click="navMemUpgradeLog(\'tab_content\');">\u5347\u7EA7\u4F1A\u5458</a>\n                                    <a class="font-w-b cr-bdp text-decoration-hover-underline fr ng-hide" href="/member-pay.html#?vipLevel={{memberData.vipLevel}}" target="_blank" ng-show="memberData.vipLevel > 0" ng-if="!permision.isCloudMarket" ng-click="navMemUpgradeLog(\'tab_content\');">\u5347\u7EA7/\u7EED\u8D39</a>\n                                </div>\n                            </div>\n                        </div>\n                        <ul class="operate-list">\n                            <li class="operate-item" ng-click="editUserBaseInfo()">\n                                <i class="bdp-icon ico-account-personalinfo operate-img"></i>\n                                <span>\u4E2A\u4EBA\u4FE1\u606F</span>\n                                <i class="bdp-icon ico-triangle-right operater"></i>\n                            </li>\n                            <li class="operate-item" ng-if="memberData.vipLevel > 0 && !permision.isCloudMarket" ng-click="personalMemberInfo();">\n                                <i class="bdp-icon ico-mem-mark operate-img"></i>\n                                <span>\u4F1A\u5458\u4FE1\u606F</span>\n                                <i class="bdp-icon ico-triangle-right operater"></i>\n                            </li>\n                            <li class="operate-item" novice-coupon="">\n                                <i class="bdp-icon ico-coupon operate-img"></i>\n                                <i class="unwatched"></i>\n                                <span>\u4F18\u60E0\u5238</span>\n                                <span class="coupon-number" ng-bind="userInfoObj.personal_coupon_number" ng-if="userInfoObj.personal_coupon_number"></span>\n                                <i class="bdp-icon ico-triangle-right operater"></i>\n                            </li>\n                            <li class="operate-item" ng-click="editPassword()">\n                                <i class="bdp-icon ico-account-password operate-img"></i>\n                                <span>\u4FEE\u6539\u5BC6\u7801</span>\n                                <i class="bdp-icon ico-triangle-right operater"></i>\n                            </li>\n                            <li class="operate-item">\n                                <i class="bdp-icon ico-theme operate-img"></i>\n                                <span>\u4E3B\u9898</span>\n                                <div class="operater">\n                                    <div class="theme-operate-{{theme.filename}}" bo-title="theme.name" ng-repeat="theme in themes | orderBy:\'id\':true track by $index" ng-click="changeSelectedTheme(theme.id)" ng-class="{\'theme-active\': theme.id == usedThemeId}">\n                                    </div>\n                                </div>\n                            </li>\n                            <li class="operate-item" ng-click="showOfflineTask()" ng-if="permision.offlineTaskFlag">\n                                <i class="bdp-icon ico-download-task operate-img"></i>\n                                <i ng-show="noticeStore.offlineTaskNewFile" class="unwatched" ng-class="{\'active\': noticeStore.offlineTaskNewFile}"></i>\n                                <span>\u79BB\u7EBF\u4EFB\u52A1</span>\n                                <i class="bdp-icon ico-triangle-right operater"></i>\n                            </li>\n                        </ul>\n                    </div>\n\n                    <div class="box-account-tip J-offline-task-wrap ng-cloak" ng-if="noticeStore.showOfflineTip">\n                        <div class="task-ready-tip-wrap clearfix">\n                            <i class="task-ready-tip-top"></i>\n                            <div class="task-ready-title fr">\n                                <i class="bdp-icon ico-gis-close cursor-pointer" ng-click="hideOfflineTipAction();"></i>\n                            </div>\n                            <div class="task-ready-content fl">\n                                <div class="task-ready-name-wrap" ng-if="offlineTaskData.offlineFileName">\n                                    <p class="task-ready-name nowrap" bo-title="offlineTaskData.offlineFileName" bo-bind="offlineTaskData.offlineFileName"></p>\n                                    <span ng-if="offlineTaskData.offlineStatus == 0">\u6570\u636E\u5BFC\u51FA\u6210\u529F</span>\n                                    <span ng-if="offlineTaskData.offlineStatus == 2">\u6570\u636E\u5BFC\u51FA\u5931\u8D25</span>\n                                </div>\n                                <div class="task-ready-name-wrap" ng-if="!offlineTaskData.offlineFileName">\u79BB\u7EBF\u4EFB\u52A1\u6709\u65B0\u52A8\u6001</div>\n                                <div class="cr-bdp font-underline task-ready-detail cursor-pointer display-inline-block" ng-click="showOfflineTask();hideOfflineTipAction();">\u67E5\u770B</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="box-account-tip" ng-show="generatedCoordinateList.success.length || generatedCoordinateList.failed.length">\n                        <div class="generate-coordinate-success">\n                            <div class="generate-coordinate-status-title" ng-show="generatedCoordinateList.success.length > 0">\n                                <span>\u4E0B\u5217\u5DE5\u4F5C\u8868\uFF0C\u65B0\u589E\u5B57\u6BB5\u751F\u6210\u6210\u529F</span>\n                                <i class="generate-coordinate-status-close cursor-pointer bdp-icon ico-cancel" ng-click="closeGeneratedTip()"></i>\n                            </div>\n                            <div class="generate-coordinate-status-content" ng-repeat="table in generatedCoordinateList.success">\n                                <span class="generate-coordinate-status-txt nowrap" bo-bind="table.tb_name"></span>\n                                <a class="generate-coordinate-status-detail cr-bdp cursor-pointer text-decoration-underline" ng-click="checkTableDetail(table.tb_id)">\u67E5\u770B</a>\n                            </div>\n                            <div class="generate-coordinate-status-title" ng-show="generatedCoordinateList.failed.length > 0">\n                                <span>\u4E0B\u5217\u5DE5\u4F5C\u8868\uFF0C\u65B0\u589E\u5B57\u6BB5\u751F\u6210\u5931\u8D25</span>\n                            </div>\n                            <div class="generate-coordinate-status-content" ng-repeat="table in generatedCoordinateList.failed">\n                                <span class="generate-coordinate-status-txt nowrap" bo-bind="table.tb_name"></span>\n                                <a class="generate-coordinate-status-detail cr-bdp cursor-pointer text-decoration-underline" ng-click="checkTableDetail(table.tb_id)">\u67E5\u770B</a>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="box-account-tip w240 ng-hide" ng-show="memberData.vipShowTip" ng-if="!permision.isCloudMarket" click-outside="memberData.vipShowTip = false" outside-active="memberData.vipShowTip">\n                        <div class="member-tip-wrap">\n                            <div class="member-tip-content clearfix">\n                                <div class="line-height-19">\n                                    \u60A8\u7684\n                                    <span ng-if="memberData.vipLevel == 1">\u94F6\u94BB</span>\n                                    <span ng-if="memberData.vipLevel == 2">\u91D1\u94BB</span>\u4F1A\u5458\u8FD8\u6709{{memberData.lessDay}}\u5929\u5C31\u5230\u671F\u5566\uFF0C\u4E3A\u786E\u4FDD\u60A8\u80FD\u7EE7\u7EED\u4EAB\u53D7\u4F1A\u5458\u798F\u5229\uFF0C\u8BF7\u53CA\u65F6\u5145\u503C\u7EED\u8D39\u54E6\u3002\n                                </div>\n                                <a class="cr-bdp fr line-height-25" href="/member-pay.html#?vipLevel={{memberData.vipLevel}}" ng-click="memberData.vipShowTip = false" target="_blank">\u6211\u8981\u7EED\u8D39</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </li>\n            <li class="hd-set-item pl8 pr8" ng-if="enterprise_type == 3">\n                <nav-notice></nav-notice>\n            </li>\n            <li class="hd-set-item pl8 pr8 cursor-pointer" ng-show="permision.showAllSetting && permision.showLogout" ng-controller="LogoutController" ng-click="logout()" title="\u9000\u51FA\u767B\u5F55">\n                <span class="bdp-icon-wrap">\n                    <i class="bdp-icon ico-logout"></i>\n                </span>\n            </li>\n        </ul>\n    </div>\n</header>');
}]);